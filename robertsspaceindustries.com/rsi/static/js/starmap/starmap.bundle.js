!function(e) {
    function t(i) {
        if (n[i])
            return n[i].exports;
        var r = n[i] = {
            exports: {},
            id: i,
            loaded: !1
        };
        return e[i].call(r.exports, r, r.exports, t),
        r.loaded = !0,
        r.exports
    }
    var n = {};
    return t.m = e,
    t.c = n,
    t.p = "",
    t(0)
}(function(e) {
    for (var t in e)
        if (Object.prototype.hasOwnProperty.call(e, t))
            switch (typeof e[t]) {
            case "function":
                break;
            case "object":
                e[t] = function(t) {
                    var n = t.slice(1)
                      , i = e[t[0]];
                    return function(e, t, r) {
                        i.apply(this, [e, t, r].concat(n))
                    }
                }(e[t]);
                break;
            default:
                e[t] = e[e[t]]
            }
    return e
}([function(e, t, n) {
    "use strict";
    var i = n(19)["default"]
      , r = n(74)["default"]
      , o = n(75)
      , a = r(o)
      , s = n(78)
      , l = r(s)
      , c = n(81)
      , u = r(c);
    "Promise"in window || (window.Promise = n(19)["default"]),
    n(433),
    n(435);
    var h = "#starmap-application"
      , d = function(e, t) {
        return new i(function(n, i) {
            return FontDetect.onFontLoaded(e, n, i, {
                msTimeout: t
            })
        }
        )
    };
    a["default"].$ = n(77),
    l["default"].Renderer.render = function(e, t) {
        return e.render(t)
    }
    ,
    a["default"].$(function() {
        var e = new u["default"]({
            el: h,
            resourcePath: "/rsi/static/js/starmap",
            apiBaseURL: ""
        });
        e.on("start", function() {
            a["default"].history && a["default"].history.start({
                pushState: !0,
                root: location.pathname
            })
        }),
        d("Electrolize").then(function() {
            setTimeout(function() {
                e.start()
            })
        })["catch"](function(e) {
            console.error(e)
        })
    })
}
, , , , , , , , , , , , , , , , , , , function(e, t, n) {
    e.exports = {
        "default": n(20),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(21),
    n(22),
    n(46),
    n(53),
    e.exports = n(30).Promise
}
, function(e, t) {}
, [436, 23, 26], [437, 24, 25], function(e, t) {
    var n = Math.ceil
      , i = Math.floor;
    e.exports = function(e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? i : n)(e)
    }
}
, function(e, t) {
    e.exports = function(e) {
        if (void 0 == e)
            throw TypeError("Can't call method on  " + e);
        return e
    }
}
, [438, 27, 28, 33, 34, 39, 40, 41, 42, 35, 43], function(e, t) {
    e.exports = !0
}
, function(e, t, n) {
    var i = n(29)
      , r = n(30)
      , o = n(31)
      , a = "prototype"
      , s = function(e, t, n) {
        var l, c, u, h = e & s.F, d = e & s.G, f = e & s.S, p = e & s.P, m = e & s.B, v = e & s.W, g = d ? r : r[t] || (r[t] = {}), y = d ? i : f ? i[t] : (i[t] || {})[a];
        d && (n = t);
        for (l in n)
            c = !h && y && l in y,
            c && l in g || (u = c ? y[l] : n[l],
            g[l] = d && "function" != typeof y[l] ? n[l] : m && c ? o(u, i) : v && y[l] == u ? function(e) {
                var t = function(t) {
                    return this instanceof e ? new e(t) : e(t)
                };
                return t[a] = e[a],
                t
            }(u) : p && "function" == typeof u ? o(Function.call, u) : u,
            p && ((g[a] || (g[a] = {}))[l] = u))
    };
    s.F = 1,
    s.G = 2,
    s.S = 4,
    s.P = 8,
    s.B = 16,
    s.W = 32,
    e.exports = s
}
, function(e, t) {
    var n = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = n)
}
, function(e, t) {
    var n = e.exports = {
        version: "1.2.6"
    };
    "number" == typeof __e && (__e = n)
}
, [439, 32], function(e, t) {
    e.exports = function(e) {
        if ("function" != typeof e)
            throw TypeError(e + " is not a function!");
        return e
    }
}
, function(e, t, n) {
    e.exports = n(34)
}
, [440, 35, 36, 37], function(e, t) {
    var n = Object;
    e.exports = {
        create: n.create,
        getProto: n.getPrototypeOf,
        isEnum: {}.propertyIsEnumerable,
        getDesc: n.getOwnPropertyDescriptor,
        setDesc: n.defineProperty,
        setDescs: n.defineProperties,
        getKeys: n.keys,
        getNames: n.getOwnPropertyNames,
        getSymbols: n.getOwnPropertySymbols,
        each: [].forEach
    }
}
, function(e, t) {
    e.exports = function(e, t) {
        return {
            enumerable: !(1 & e),
            configurable: !(2 & e),
            writable: !(4 & e),
            value: t
        }
    }
}
, [441, 38], function(e, t) {
    e.exports = function(e) {
        try {
            return !!e()
        } catch (t) {
            return !0
        }
    }
}
, function(e, t) {
    var n = {}.hasOwnProperty;
    e.exports = function(e, t) {
        return n.call(e, t)
    }
}
, function(e, t) {
    e.exports = {}
}
, [442, 35, 36, 42, 34, 43], [443, 35, 39, 43], [444, 44, 45, 29], [445, 29], function(e, t) {
    var n = 0
      , i = Math.random();
    e.exports = function(e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++n + i).toString(36))
    }
}
, function(e, t, n) {
    n(47);
    var i = n(40);
    i.NodeList = i.HTMLCollection = i.Array
}
, [446, 48, 49, 40, 50, 26], function(e, t) {
    e.exports = function() {}
}
, function(e, t) {
    e.exports = function(e, t) {
        return {
            value: t,
            done: !!e
        }
    }
}
, [447, 51, 25], [448, 52], function(e, t) {
    var n = {}.toString;
    e.exports = function(e) {
        return n.call(e).slice(8, -1)
    }
}
, [449, 35, 27, 29, 31, 54, 28, 55, 56, 32, 57, 58, 63, 64, 43, 65, 66, 37, 71, 42, 72, 30, 73], [450, 52, 43], function(e, t) {
    e.exports = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}
, [451, 55], function(e, t) {
    e.exports = function(e, t, n) {
        if (!(e instanceof t))
            throw TypeError(n + ": use the 'new' operator!");
        return e
    }
}
, [452, 31, 59, 60, 56, 61, 62], [453, 56], [454, 40, 43], [455, 24], [456, 54, 43, 40, 30], [457, 35, 55, 56, 31], function(e, t) {
    e.exports = Object.is || function(e, t) {
        return e === t ? 0 !== e || 1 / e === 1 / t : e != e && t != t
    }
}
, [458, 56, 32, 43], [459, 29, 67, 52], [460, 31, 68, 69, 70, 29, 52], function(e, t) {
    e.exports = function(e, t, n) {
        var i = void 0 === n;
        switch (t.length) {
        case 0:
            return i ? e() : e.call(n);
        case 1:
            return i ? e(t[0]) : e.call(n, t[0]);
        case 2:
            return i ? e(t[0], t[1]) : e.call(n, t[0], t[1]);
        case 3:
            return i ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);
        case 4:
            return i ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3])
        }
        return e.apply(n, t)
    }
}
, [461, 29], [462, 55, 29], [463, 33], function(e, t, n) {
    "use strict";
    var i = n(30)
      , r = n(35)
      , o = n(37)
      , a = n(43)("species");
    e.exports = function(e) {
        var t = i[e];
        o && t && !t[a] && r.setDesc(t, a, {
            configurable: !0,
            get: function() {
                return this
            }
        })
    }
}
, [464, 43], function(e, t) {
    "use strict";
    t["default"] = function(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }
    ,
    t.__esModule = !0
}
, function(e, t, n) {
    var i, r;
    (function(o) {
        !function(a) {
            var s = "object" == typeof self && self.self == self && self || "object" == typeof o && o.global == o && o;
            i = [n(76), n(77), t],
            r = function(e, t, n) {
                s.Backbone = a(s, n, e, t)
            }
            .apply(t, i),
            !(void 0 !== r && (e.exports = r))
        }(function(e, t, n, i) {
            var r = e.Backbone
              , o = Array.prototype.slice;
            t.VERSION = "1.2.3",
            t.$ = i,
            t.noConflict = function() {
                return e.Backbone = r,
                this
            }
            ,
            t.emulateHTTP = !1,
            t.emulateJSON = !1;
            var a = function(e, t, i) {
                switch (e) {
                case 1:
                    return function() {
                        return n[t](this[i])
                    }
                    ;
                case 2:
                    return function(e) {
                        return n[t](this[i], e)
                    }
                    ;
                case 3:
                    return function(e, r) {
                        return n[t](this[i], l(e, this), r)
                    }
                    ;
                case 4:
                    return function(e, r, o) {
                        return n[t](this[i], l(e, this), r, o)
                    }
                    ;
                default:
                    return function() {
                        var e = o.call(arguments);
                        return e.unshift(this[i]),
                        n[t].apply(n, e)
                    }
                }
            }
              , s = function(e, t, i) {
                n.each(t, function(t, r) {
                    n[r] && (e.prototype[r] = a(t, r, i))
                })
            }
              , l = function(e, t) {
                return n.isFunction(e) ? e : n.isObject(e) && !t._isModel(e) ? c(e) : n.isString(e) ? function(t) {
                    return t.get(e)
                }
                : e
            }
              , c = function(e) {
                var t = n.matches(e);
                return function(e) {
                    return t(e.attributes)
                }
            }
              , u = t.Events = {}
              , h = /\s+/
              , d = function(e, t, i, r, o) {
                var a, s = 0;
                if (i && "object" == typeof i) {
                    void 0 !== r && "context"in o && void 0 === o.context && (o.context = r);
                    for (a = n.keys(i); s < a.length; s++)
                        t = d(e, t, a[s], i[a[s]], o)
                } else if (i && h.test(i))
                    for (a = i.split(h); s < a.length; s++)
                        t = e(t, a[s], r, o);
                else
                    t = e(t, i, r, o);
                return t
            };
            u.on = function(e, t, n) {
                return f(this, e, t, n)
            }
            ;
            var f = function(e, t, n, i, r) {
                if (e._events = d(p, e._events || {}, t, n, {
                    context: i,
                    ctx: e,
                    listening: r
                }),
                r) {
                    var o = e._listeners || (e._listeners = {});
                    o[r.id] = r
                }
                return e
            };
            u.listenTo = function(e, t, i) {
                if (!e)
                    return this;
                var r = e._listenId || (e._listenId = n.uniqueId("l"))
                  , o = this._listeningTo || (this._listeningTo = {})
                  , a = o[r];
                if (!a) {
                    var s = this._listenId || (this._listenId = n.uniqueId("l"));
                    a = o[r] = {
                        obj: e,
                        objId: r,
                        id: s,
                        listeningTo: o,
                        count: 0
                    }
                }
                return f(e, t, i, this, a),
                this
            }
            ;
            var p = function(e, t, n, i) {
                if (n) {
                    var r = e[t] || (e[t] = [])
                      , o = i.context
                      , a = i.ctx
                      , s = i.listening;
                    s && s.count++,
                    r.push({
                        callback: n,
                        context: o,
                        ctx: o || a,
                        listening: s
                    })
                }
                return e
            };
            u.off = function(e, t, n) {
                return this._events ? (this._events = d(m, this._events, e, t, {
                    context: n,
                    listeners: this._listeners
                }),
                this) : this
            }
            ,
            u.stopListening = function(e, t, i) {
                var r = this._listeningTo;
                if (!r)
                    return this;
                for (var o = e ? [e._listenId] : n.keys(r), a = 0; a < o.length; a++) {
                    var s = r[o[a]];
                    if (!s)
                        break;
                    s.obj.off(t, i, this)
                }
                return n.isEmpty(r) && (this._listeningTo = void 0),
                this
            }
            ;
            var m = function(e, t, i, r) {
                if (e) {
                    var o, a = 0, s = r.context, l = r.listeners;
                    if (t || i || s) {
                        for (var c = t ? [t] : n.keys(e); a < c.length; a++) {
                            t = c[a];
                            var u = e[t];
                            if (!u)
                                break;
                            for (var h = [], d = 0; d < u.length; d++) {
                                var f = u[d];
                                i && i !== f.callback && i !== f.callback._callback || s && s !== f.context ? h.push(f) : (o = f.listening,
                                o && 0 === --o.count && (delete l[o.id],
                                delete o.listeningTo[o.objId]))
                            }
                            h.length ? e[t] = h : delete e[t]
                        }
                        return n.size(e) ? e : void 0
                    }
                    for (var p = n.keys(l); a < p.length; a++)
                        o = l[p[a]],
                        delete l[o.id],
                        delete o.listeningTo[o.objId]
                }
            };
            u.once = function(e, t, i) {
                var r = d(v, {}, e, t, n.bind(this.off, this));
                return this.on(r, void 0, i)
            }
            ,
            u.listenToOnce = function(e, t, i) {
                var r = d(v, {}, t, i, n.bind(this.stopListening, this, e));
                return this.listenTo(e, r)
            }
            ;
            var v = function(e, t, i, r) {
                if (i) {
                    var o = e[t] = n.once(function() {
                        r(t, o),
                        i.apply(this, arguments)
                    });
                    o._callback = i
                }
                return e
            };
            u.trigger = function(e) {
                if (!this._events)
                    return this;
                for (var t = Math.max(0, arguments.length - 1), n = Array(t), i = 0; t > i; i++)
                    n[i] = arguments[i + 1];
                return d(g, this._events, e, void 0, n),
                this
            }
            ;
            var g = function(e, t, n, i) {
                if (e) {
                    var r = e[t]
                      , o = e.all;
                    r && o && (o = o.slice()),
                    r && y(r, i),
                    o && y(o, [t].concat(i))
                }
                return e
            }
              , y = function(e, t) {
                var n, i = -1, r = e.length, o = t[0], a = t[1], s = t[2];
                switch (t.length) {
                case 0:
                    for (; ++i < r; )
                        (n = e[i]).callback.call(n.ctx);
                    return;
                case 1:
                    for (; ++i < r; )
                        (n = e[i]).callback.call(n.ctx, o);
                    return;
                case 2:
                    for (; ++i < r; )
                        (n = e[i]).callback.call(n.ctx, o, a);
                    return;
                case 3:
                    for (; ++i < r; )
                        (n = e[i]).callback.call(n.ctx, o, a, s);
                    return;
                default:
                    for (; ++i < r; )
                        (n = e[i]).callback.apply(n.ctx, t);
                    return
                }
            };
            u.bind = u.on,
            u.unbind = u.off,
            n.extend(t, u);
            var b = t.Model = function(e, t) {
                var i = e || {};
                t || (t = {}),
                this.cid = n.uniqueId(this.cidPrefix),
                this.attributes = {},
                t.collection && (this.collection = t.collection),
                t.parse && (i = this.parse(i, t) || {}),
                i = n.defaults({}, i, n.result(this, "defaults")),
                this.set(i, t),
                this.changed = {},
                this.initialize.apply(this, arguments)
            }
            ;
            n.extend(b.prototype, u, {
                changed: null,
                validationError: null,
                idAttribute: "id",
                cidPrefix: "c",
                initialize: function() {},
                toJSON: function(e) {
                    return n.clone(this.attributes)
                },
                sync: function() {
                    return t.sync.apply(this, arguments)
                },
                get: function(e) {
                    return this.attributes[e]
                },
                escape: function(e) {
                    return n.escape(this.get(e))
                },
                has: function(e) {
                    return null != this.get(e)
                },
                matches: function(e) {
                    return !!n.iteratee(e, this)(this.attributes)
                },
                set: function(e, t, i) {
                    if (null == e)
                        return this;
                    var r;
                    if ("object" == typeof e ? (r = e,
                    i = t) : (r = {})[e] = t,
                    i || (i = {}),
                    !this._validate(r, i))
                        return !1;
                    var o = i.unset
                      , a = i.silent
                      , s = []
                      , l = this._changing;
                    this._changing = !0,
                    l || (this._previousAttributes = n.clone(this.attributes),
                    this.changed = {});
                    var c = this.attributes
                      , u = this.changed
                      , h = this._previousAttributes;
                    for (var d in r)
                        t = r[d],
                        n.isEqual(c[d], t) || s.push(d),
                        n.isEqual(h[d], t) ? delete u[d] : u[d] = t,
                        o ? delete c[d] : c[d] = t;
                    if (this.id = this.get(this.idAttribute),
                    !a) {
                        s.length && (this._pending = i);
                        for (var f = 0; f < s.length; f++)
                            this.trigger("change:" + s[f], this, c[s[f]], i)
                    }
                    if (l)
                        return this;
                    if (!a)
                        for (; this._pending; )
                            i = this._pending,
                            this._pending = !1,
                            this.trigger("change", this, i);
                    return this._pending = !1,
                    this._changing = !1,
                    this
                },
                unset: function(e, t) {
                    return this.set(e, void 0, n.extend({}, t, {
                        unset: !0
                    }))
                },
                clear: function(e) {
                    var t = {};
                    for (var i in this.attributes)
                        t[i] = void 0;
                    return this.set(t, n.extend({}, e, {
                        unset: !0
                    }))
                },
                hasChanged: function(e) {
                    return null == e ? !n.isEmpty(this.changed) : n.has(this.changed, e)
                },
                changedAttributes: function(e) {
                    if (!e)
                        return this.hasChanged() ? n.clone(this.changed) : !1;
                    var t = this._changing ? this._previousAttributes : this.attributes
                      , i = {};
                    for (var r in e) {
                        var o = e[r];
                        n.isEqual(t[r], o) || (i[r] = o)
                    }
                    return n.size(i) ? i : !1
                },
                previous: function(e) {
                    return null != e && this._previousAttributes ? this._previousAttributes[e] : null
                },
                previousAttributes: function() {
                    return n.clone(this._previousAttributes)
                },
                fetch: function(e) {
                    e = n.extend({
                        parse: !0
                    }, e);
                    var t = this
                      , i = e.success;
                    return e.success = function(n) {
                        var r = e.parse ? t.parse(n, e) : n;
                        return t.set(r, e) ? (i && i.call(e.context, t, n, e),
                        void t.trigger("sync", t, n, e)) : !1
                    }
                    ,
                    z(this, e),
                    this.sync("read", this, e)
                },
                save: function(e, t, i) {
                    var r;
                    null == e || "object" == typeof e ? (r = e,
                    i = t) : (r = {})[e] = t,
                    i = n.extend({
                        validate: !0,
                        parse: !0
                    }, i);
                    var o = i.wait;
                    if (r && !o) {
                        if (!this.set(r, i))
                            return !1
                    } else if (!this._validate(r, i))
                        return !1;
                    var a = this
                      , s = i.success
                      , l = this.attributes;
                    i.success = function(e) {
                        a.attributes = l;
                        var t = i.parse ? a.parse(e, i) : e;
                        return o && (t = n.extend({}, r, t)),
                        t && !a.set(t, i) ? !1 : (s && s.call(i.context, a, e, i),
                        void a.trigger("sync", a, e, i))
                    }
                    ,
                    z(this, i),
                    r && o && (this.attributes = n.extend({}, l, r));
                    var c = this.isNew() ? "create" : i.patch ? "patch" : "update";
                    "patch" !== c || i.attrs || (i.attrs = r);
                    var u = this.sync(c, this, i);
                    return this.attributes = l,
                    u
                },
                destroy: function(e) {
                    e = e ? n.clone(e) : {};
                    var t = this
                      , i = e.success
                      , r = e.wait
                      , o = function() {
                        t.stopListening(),
                        t.trigger("destroy", t, t.collection, e)
                    };
                    e.success = function(n) {
                        r && o(),
                        i && i.call(e.context, t, n, e),
                        t.isNew() || t.trigger("sync", t, n, e)
                    }
                    ;
                    var a = !1;
                    return this.isNew() ? n.defer(e.success) : (z(this, e),
                    a = this.sync("delete", this, e)),
                    r || o(),
                    a
                },
                url: function() {
                    var e = n.result(this, "urlRoot") || n.result(this.collection, "url") || V();
                    if (this.isNew())
                        return e;
                    var t = this.get(this.idAttribute);
                    return e.replace(/[^\/]$/, "$&/") + encodeURIComponent(t)
                },
                parse: function(e, t) {
                    return e
                },
                clone: function() {
                    return new this.constructor(this.attributes)
                },
                isNew: function() {
                    return !this.has(this.idAttribute)
                },
                isValid: function(e) {
                    return this._validate({}, n.defaults({
                        validate: !0
                    }, e))
                },
                _validate: function(e, t) {
                    if (!t.validate || !this.validate)
                        return !0;
                    e = n.extend({}, this.attributes, e);
                    var i = this.validationError = this.validate(e, t) || null;
                    return i ? (this.trigger("invalid", this, i, n.extend(t, {
                        validationError: i
                    })),
                    !1) : !0
                }
            });
            var x = {
                keys: 1,
                values: 1,
                pairs: 1,
                invert: 1,
                pick: 0,
                omit: 0,
                chain: 1,
                isEmpty: 1
            };
            s(b, x, "attributes");
            var w = t.Collection = function(e, t) {
                t || (t = {}),
                t.model && (this.model = t.model),
                void 0 !== t.comparator && (this.comparator = t.comparator),
                this._reset(),
                this.initialize.apply(this, arguments),
                e && this.reset(e, n.extend({
                    silent: !0
                }, t))
            }
              , _ = {
                add: !0,
                remove: !0,
                merge: !0
            }
              , S = {
                add: !0,
                remove: !1
            }
              , M = function(e, t, n) {
                n = Math.min(Math.max(n, 0), e.length);
                for (var i = Array(e.length - n), r = t.length, o = 0; o < i.length; o++)
                    i[o] = e[o + n];
                for (o = 0; r > o; o++)
                    e[o + n] = t[o];
                for (o = 0; o < i.length; o++)
                    e[o + r + n] = i[o]
            };
            n.extend(w.prototype, u, {
                model: b,
                initialize: function() {},
                toJSON: function(e) {
                    return this.map(function(t) {
                        return t.toJSON(e)
                    })
                },
                sync: function() {
                    return t.sync.apply(this, arguments)
                },
                add: function(e, t) {
                    return this.set(e, n.extend({
                        merge: !1
                    }, t, S))
                },
                remove: function(e, t) {
                    t = n.extend({}, t);
                    var i = !n.isArray(e);
                    e = i ? [e] : n.clone(e);
                    var r = this._removeModels(e, t);
                    return !t.silent && r && this.trigger("update", this, t),
                    i ? r[0] : r
                },
                set: function(e, t) {
                    if (null != e) {
                        t = n.defaults({}, t, _),
                        t.parse && !this._isModel(e) && (e = this.parse(e, t));
                        var i = !n.isArray(e);
                        e = i ? [e] : e.slice();
                        var r = t.at;
                        null != r && (r = +r),
                        0 > r && (r += this.length + 1);
                        for (var o, a = [], s = [], l = [], c = {}, u = t.add, h = t.merge, d = t.remove, f = !1, p = this.comparator && null == r && t.sort !== !1, m = n.isString(this.comparator) ? this.comparator : null, v = 0; v < e.length; v++) {
                            o = e[v];
                            var g = this.get(o);
                            if (g) {
                                if (h && o !== g) {
                                    var y = this._isModel(o) ? o.attributes : o;
                                    t.parse && (y = g.parse(y, t)),
                                    g.set(y, t),
                                    p && !f && (f = g.hasChanged(m))
                                }
                                c[g.cid] || (c[g.cid] = !0,
                                a.push(g)),
                                e[v] = g
                            } else
                                u && (o = e[v] = this._prepareModel(o, t),
                                o && (s.push(o),
                                this._addReference(o, t),
                                c[o.cid] = !0,
                                a.push(o)))
                        }
                        if (d) {
                            for (v = 0; v < this.length; v++)
                                o = this.models[v],
                                c[o.cid] || l.push(o);
                            l.length && this._removeModels(l, t)
                        }
                        var b = !1
                          , x = !p && u && d;
                        if (a.length && x ? (b = this.length != a.length || n.some(this.models, function(e, t) {
                            return e !== a[t]
                        }),
                        this.models.length = 0,
                        M(this.models, a, 0),
                        this.length = this.models.length) : s.length && (p && (f = !0),
                        M(this.models, s, null == r ? this.length : r),
                        this.length = this.models.length),
                        f && this.sort({
                            silent: !0
                        }),
                        !t.silent) {
                            for (v = 0; v < s.length; v++)
                                null != r && (t.index = r + v),
                                o = s[v],
                                o.trigger("add", o, this, t);
                            (f || b) && this.trigger("sort", this, t),
                            (s.length || l.length) && this.trigger("update", this, t)
                        }
                        return i ? e[0] : e
                    }
                },
                reset: function(e, t) {
                    t = t ? n.clone(t) : {};
                    for (var i = 0; i < this.models.length; i++)
                        this._removeReference(this.models[i], t);
                    return t.previousModels = this.models,
                    this._reset(),
                    e = this.add(e, n.extend({
                        silent: !0
                    }, t)),
                    t.silent || this.trigger("reset", this, t),
                    e
                },
                push: function(e, t) {
                    return this.add(e, n.extend({
                        at: this.length
                    }, t))
                },
                pop: function(e) {
                    var t = this.at(this.length - 1);
                    return this.remove(t, e)
                },
                unshift: function(e, t) {
                    return this.add(e, n.extend({
                        at: 0
                    }, t))
                },
                shift: function(e) {
                    var t = this.at(0);
                    return this.remove(t, e)
                },
                slice: function() {
                    return o.apply(this.models, arguments)
                },
                get: function(e) {
                    if (null == e)
                        return void 0;
                    var t = this.modelId(this._isModel(e) ? e.attributes : e);
                    return this._byId[e] || this._byId[t] || this._byId[e.cid]
                },
                at: function(e) {
                    return 0 > e && (e += this.length),
                    this.models[e]
                },
                where: function(e, t) {
                    return this[t ? "find" : "filter"](e)
                },
                findWhere: function(e) {
                    return this.where(e, !0)
                },
                sort: function(e) {
                    var t = this.comparator;
                    if (!t)
                        throw new Error("Cannot sort a set without a comparator");
                    e || (e = {});
                    var i = t.length;
                    return n.isFunction(t) && (t = n.bind(t, this)),
                    1 === i || n.isString(t) ? this.models = this.sortBy(t) : this.models.sort(t),
                    e.silent || this.trigger("sort", this, e),
                    this
                },
                pluck: function(e) {
                    return n.invoke(this.models, "get", e)
                },
                fetch: function(e) {
                    e = n.extend({
                        parse: !0
                    }, e);
                    var t = e.success
                      , i = this;
                    return e.success = function(n) {
                        var r = e.reset ? "reset" : "set";
                        i[r](n, e),
                        t && t.call(e.context, i, n, e),
                        i.trigger("sync", i, n, e)
                    }
                    ,
                    z(this, e),
                    this.sync("read", this, e)
                },
                create: function(e, t) {
                    t = t ? n.clone(t) : {};
                    var i = t.wait;
                    if (e = this._prepareModel(e, t),
                    !e)
                        return !1;
                    i || this.add(e, t);
                    var r = this
                      , o = t.success;
                    return t.success = function(e, t, n) {
                        i && r.add(e, n),
                        o && o.call(n.context, e, t, n)
                    }
                    ,
                    e.save(null, t),
                    e
                },
                parse: function(e, t) {
                    return e
                },
                clone: function() {
                    return new this.constructor(this.models,{
                        model: this.model,
                        comparator: this.comparator
                    })
                },
                modelId: function(e) {
                    return e[this.model.prototype.idAttribute || "id"]
                },
                _reset: function() {
                    this.length = 0,
                    this.models = [],
                    this._byId = {}
                },
                _prepareModel: function(e, t) {
                    if (this._isModel(e))
                        return e.collection || (e.collection = this),
                        e;
                    t = t ? n.clone(t) : {},
                    t.collection = this;
                    var i = new this.model(e,t);
                    return i.validationError ? (this.trigger("invalid", this, i.validationError, t),
                    !1) : i
                },
                _removeModels: function(e, t) {
                    for (var n = [], i = 0; i < e.length; i++) {
                        var r = this.get(e[i]);
                        if (r) {
                            var o = this.indexOf(r);
                            this.models.splice(o, 1),
                            this.length--,
                            t.silent || (t.index = o,
                            r.trigger("remove", r, this, t)),
                            n.push(r),
                            this._removeReference(r, t)
                        }
                    }
                    return n.length ? n : !1
                },
                _isModel: function(e) {
                    return e instanceof b
                },
                _addReference: function(e, t) {
                    this._byId[e.cid] = e;
                    var n = this.modelId(e.attributes);
                    null != n && (this._byId[n] = e),
                    e.on("all", this._onModelEvent, this)
                },
                _removeReference: function(e, t) {
                    delete this._byId[e.cid];
                    var n = this.modelId(e.attributes);
                    null != n && delete this._byId[n],
                    this === e.collection && delete e.collection,
                    e.off("all", this._onModelEvent, this)
                },
                _onModelEvent: function(e, t, n, i) {
                    if ("add" !== e && "remove" !== e || n === this) {
                        if ("destroy" === e && this.remove(t, i),
                        "change" === e) {
                            var r = this.modelId(t.previousAttributes())
                              , o = this.modelId(t.attributes);
                            r !== o && (null != r && delete this._byId[r],
                            null != o && (this._byId[o] = t))
                        }
                        this.trigger.apply(this, arguments)
                    }
                }
            });
            var C = {
                forEach: 3,
                each: 3,
                map: 3,
                collect: 3,
                reduce: 4,
                foldl: 4,
                inject: 4,
                reduceRight: 4,
                foldr: 4,
                find: 3,
                detect: 3,
                filter: 3,
                select: 3,
                reject: 3,
                every: 3,
                all: 3,
                some: 3,
                any: 3,
                include: 3,
                includes: 3,
                contains: 3,
                invoke: 0,
                max: 3,
                min: 3,
                toArray: 1,
                size: 1,
                first: 3,
                head: 3,
                take: 3,
                initial: 3,
                rest: 3,
                tail: 3,
                drop: 3,
                last: 3,
                without: 0,
                difference: 0,
                indexOf: 3,
                shuffle: 1,
                lastIndexOf: 3,
                isEmpty: 1,
                chain: 1,
                sample: 3,
                partition: 3,
                groupBy: 3,
                countBy: 3,
                sortBy: 3,
                indexBy: 3
            };
            s(w, C, "models");
            var T = t.View = function(e) {
                this.cid = n.uniqueId("view"),
                n.extend(this, n.pick(e, k)),
                this._ensureElement(),
                this.initialize.apply(this, arguments)
            }
              , E = /^(\S+)\s*(.*)$/
              , k = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
            n.extend(T.prototype, u, {
                tagName: "div",
                $: function(e) {
                    return this.$el.find(e)
                },
                initialize: function() {},
                render: function() {
                    return this
                },
                remove: function() {
                    return this._removeElement(),
                    this.stopListening(),
                    this
                },
                _removeElement: function() {
                    this.$el.remove()
                },
                setElement: function(e) {
                    return this.undelegateEvents(),
                    this._setElement(e),
                    this.delegateEvents(),
                    this
                },
                _setElement: function(e) {
                    this.$el = e instanceof t.$ ? e : t.$(e),
                    this.el = this.$el[0]
                },
                delegateEvents: function(e) {
                    if (e || (e = n.result(this, "events")),
                    !e)
                        return this;
                    this.undelegateEvents();
                    for (var t in e) {
                        var i = e[t];
                        if (n.isFunction(i) || (i = this[i]),
                        i) {
                            var r = t.match(E);
                            this.delegate(r[1], r[2], n.bind(i, this))
                        }
                    }
                    return this
                },
                delegate: function(e, t, n) {
                    return this.$el.on(e + ".delegateEvents" + this.cid, t, n),
                    this
                },
                undelegateEvents: function() {
                    return this.$el && this.$el.off(".delegateEvents" + this.cid),
                    this
                },
                undelegate: function(e, t, n) {
                    return this.$el.off(e + ".delegateEvents" + this.cid, t, n),
                    this
                },
                _createElement: function(e) {
                    return document.createElement(e)
                },
                _ensureElement: function() {
                    if (this.el)
                        this.setElement(n.result(this, "el"));
                    else {
                        var e = n.extend({}, n.result(this, "attributes"));
                        this.id && (e.id = n.result(this, "id")),
                        this.className && (e["class"] = n.result(this, "className")),
                        this.setElement(this._createElement(n.result(this, "tagName"))),
                        this._setAttributes(e)
                    }
                },
                _setAttributes: function(e) {
                    this.$el.attr(e)
                }
            }),
            t.sync = function(e, i, r) {
                var o = A[e];
                n.defaults(r || (r = {}), {
                    emulateHTTP: t.emulateHTTP,
                    emulateJSON: t.emulateJSON
                });
                var a = {
                    type: o,
                    dataType: "json"
                };
                if (r.url || (a.url = n.result(i, "url") || V()),
                null != r.data || !i || "create" !== e && "update" !== e && "patch" !== e || (a.contentType = "application/json",
                a.data = JSON.stringify(r.attrs || i.toJSON(r))),
                r.emulateJSON && (a.contentType = "application/x-www-form-urlencoded",
                a.data = a.data ? {
                    model: a.data
                } : {}),
                r.emulateHTTP && ("PUT" === o || "DELETE" === o || "PATCH" === o)) {
                    a.type = "POST",
                    r.emulateJSON && (a.data._method = o);
                    var s = r.beforeSend;
                    r.beforeSend = function(e) {
                        return e.setRequestHeader("X-HTTP-Method-Override", o),
                        s ? s.apply(this, arguments) : void 0
                    }
                }
                "GET" === a.type || r.emulateJSON || (a.processData = !1);
                var l = r.error;
                r.error = function(e, t, n) {
                    r.textStatus = t,
                    r.errorThrown = n,
                    l && l.call(r.context, e, t, n)
                }
                ;
                var c = r.xhr = t.ajax(n.extend(a, r));
                return i.trigger("request", i, c, r),
                c
            }
            ;
            var A = {
                create: "POST",
                update: "PUT",
                patch: "PATCH",
                "delete": "DELETE",
                read: "GET"
            };
            t.ajax = function() {
                return t.$.ajax.apply(t.$, arguments)
            }
            ;
            var P = t.Router = function(e) {
                e || (e = {}),
                e.routes && (this.routes = e.routes),
                this._bindRoutes(),
                this.initialize.apply(this, arguments)
            }
              , L = /\((.*?)\)/g
              , O = /(\(\?)?:\w+/g
              , R = /\*\w+/g
              , F = /[\-{}\[\]+?.,\\\^$|#\s]/g;
            n.extend(P.prototype, u, {
                initialize: function() {},
                route: function(e, i, r) {
                    n.isRegExp(e) || (e = this._routeToRegExp(e)),
                    n.isFunction(i) && (r = i,
                    i = ""),
                    r || (r = this[i]);
                    var o = this;
                    return t.history.route(e, function(n) {
                        var a = o._extractParameters(e, n);
                        o.execute(r, a, i) !== !1 && (o.trigger.apply(o, ["route:" + i].concat(a)),
                        o.trigger("route", i, a),
                        t.history.trigger("route", o, i, a))
                    }),
                    this
                },
                execute: function(e, t, n) {
                    e && e.apply(this, t)
                },
                navigate: function(e, n) {
                    return t.history.navigate(e, n),
                    this
                },
                _bindRoutes: function() {
                    if (this.routes) {
                        this.routes = n.result(this, "routes");
                        for (var e, t = n.keys(this.routes); null != (e = t.pop()); )
                            this.route(e, this.routes[e])
                    }
                },
                _routeToRegExp: function(e) {
                    return e = e.replace(F, "\\$&").replace(L, "(?:$1)?").replace(O, function(e, t) {
                        return t ? e : "([^/?]+)"
                    }).replace(R, "([^?]*?)"),
                    new RegExp("^" + e + "(?:\\?([\\s\\S]*))?$")
                },
                _extractParameters: function(e, t) {
                    var i = e.exec(t).slice(1);
                    return n.map(i, function(e, t) {
                        return t === i.length - 1 ? e || null : e ? decodeURIComponent(e) : null
                    })
                }
            });
            var B = t.History = function() {
                this.handlers = [],
                this.checkUrl = n.bind(this.checkUrl, this),
                "undefined" != typeof window && (this.location = window.location,
                this.history = window.history)
            }
              , D = /^[#\/]|\s+$/g
              , I = /^\/+|\/+$/g
              , N = /#.*$/;
            B.started = !1,
            n.extend(B.prototype, u, {
                interval: 50,
                atRoot: function() {
                    var e = this.location.pathname.replace(/[^\/]$/, "$&/");
                    return e === this.root && !this.getSearch()
                },
                matchRoot: function() {
                    var e = this.decodeFragment(this.location.pathname)
                      , t = e.slice(0, this.root.length - 1) + "/";
                    return t === this.root
                },
                decodeFragment: function(e) {
                    return decodeURI(e.replace(/%25/g, "%2525"))
                },
                getSearch: function() {
                    var e = this.location.href.replace(/#.*/, "").match(/\?.+/);
                    return e ? e[0] : ""
                },
                getHash: function(e) {
                    var t = (e || this).location.href.match(/#(.*)$/);
                    return t ? t[1] : ""
                },
                getPath: function() {
                    var e = this.decodeFragment(this.location.pathname + this.getSearch()).slice(this.root.length - 1);
                    return "/" === e.charAt(0) ? e.slice(1) : e
                },
                getFragment: function(e) {
                    return null == e && (e = this._usePushState || !this._wantsHashChange ? this.getPath() : this.getHash()),
                    e.replace(D, "")
                },
                start: function(e) {
                    if (B.started)
                        throw new Error("Backbone.history has already been started");
                    if (B.started = !0,
                    this.options = n.extend({
                        root: "/"
                    }, this.options, e),
                    this.root = this.options.root,
                    this._wantsHashChange = this.options.hashChange !== !1,
                    this._hasHashChange = "onhashchange"in window && (void 0 === document.documentMode || document.documentMode > 7),
                    this._useHashChange = this._wantsHashChange && this._hasHashChange,
                    this._wantsPushState = !!this.options.pushState,
                    this._hasPushState = !(!this.history || !this.history.pushState),
                    this._usePushState = this._wantsPushState && this._hasPushState,
                    this.fragment = this.getFragment(),
                    this.root = ("/" + this.root + "/").replace(I, "/"),
                    this._wantsHashChange && this._wantsPushState) {
                        if (!this._hasPushState && !this.atRoot()) {
                            var t = this.root.slice(0, -1) || "/";
                            return this.location.replace(t + "#" + this.getPath()),
                            !0
                        }
                        this._hasPushState && this.atRoot() && this.navigate(this.getHash(), {
                            replace: !0
                        })
                    }
                    if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {
                        this.iframe = document.createElement("iframe"),
                        this.iframe.src = "javascript:0",
                        this.iframe.style.display = "none",
                        this.iframe.tabIndex = -1;
                        var i = document.body
                          , r = i.insertBefore(this.iframe, i.firstChild).contentWindow;
                        r.document.open(),
                        r.document.close(),
                        r.location.hash = "#" + this.fragment
                    }
                    var o = window.addEventListener || function(e, t) {
                        return attachEvent("on" + e, t)
                    }
                    ;
                    return this._usePushState ? o("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe ? o("hashchange", this.checkUrl, !1) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)),
                    this.options.silent ? void 0 : this.loadUrl()
                },
                stop: function() {
                    var e = window.removeEventListener || function(e, t) {
                        return detachEvent("on" + e, t)
                    }
                    ;
                    this._usePushState ? e("popstate", this.checkUrl, !1) : this._useHashChange && !this.iframe && e("hashchange", this.checkUrl, !1),
                    this.iframe && (document.body.removeChild(this.iframe),
                    this.iframe = null),
                    this._checkUrlInterval && clearInterval(this._checkUrlInterval),
                    B.started = !1
                },
                route: function(e, t) {
                    this.handlers.unshift({
                        route: e,
                        callback: t
                    })
                },
                checkUrl: function(e) {
                    var t = this.getFragment();
                    return t === this.fragment && this.iframe && (t = this.getHash(this.iframe.contentWindow)),
                    t === this.fragment ? !1 : (this.iframe && this.navigate(t),
                    void this.loadUrl())
                },
                loadUrl: function(e) {
                    return this.matchRoot() ? (e = this.fragment = this.getFragment(e),
                    n.some(this.handlers, function(t) {
                        return t.route.test(e) ? (t.callback(e),
                        !0) : void 0
                    })) : !1
                },
                navigate: function(e, t) {
                    if (!B.started)
                        return !1;
                    t && t !== !0 || (t = {
                        trigger: !!t
                    }),
                    e = this.getFragment(e || "");
                    var n = this.root;
                    ("" === e || "?" === e.charAt(0)) && (n = n.slice(0, -1) || "/");
                    var i = n + e;
                    if (e = this.decodeFragment(e.replace(N, "")),
                    this.fragment !== e) {
                        if (this.fragment = e,
                        this._usePushState)
                            this.history[t.replace ? "replaceState" : "pushState"]({}, document.title, i);
                        else {
                            if (!this._wantsHashChange)
                                return this.location.assign(i);
                            if (this._updateHash(this.location, e, t.replace),
                            this.iframe && e !== this.getHash(this.iframe.contentWindow)) {
                                var r = this.iframe.contentWindow;
                                t.replace || (r.document.open(),
                                r.document.close()),
                                this._updateHash(r.location, e, t.replace)
                            }
                        }
                        return t.trigger ? this.loadUrl(e) : void 0
                    }
                },
                _updateHash: function(e, t, n) {
                    if (n) {
                        var i = e.href.replace(/(javascript:|#).*$/, "");
                        e.replace(i + "#" + t)
                    } else
                        e.hash = "#" + t
                }
            }),
            t.history = new B;
            var j = function(e, t) {
                var i, r = this;
                i = e && n.has(e, "constructor") ? e.constructor : function() {
                    return r.apply(this, arguments)
                }
                ,
                n.extend(i, r, t);
                var o = function() {
                    this.constructor = i
                };
                return o.prototype = r.prototype,
                i.prototype = new o,
                e && n.extend(i.prototype, e),
                i.__super__ = r.prototype,
                i
            };
            b.extend = w.extend = P.extend = T.extend = B.extend = j;
            var V = function() {
                throw new Error('A "url" property or function must be specified')
            }
              , z = function(e, t) {
                var n = t.error;
                t.error = function(i) {
                    n && n.call(t.context, e, i, t),
                    e.trigger("error", e, i, t)
                }
            };
            return t
        })
    }
    ).call(t, function() {
        return this
    }())
}
, function(e, t, n) {
    var i, r;
    (function() {
        function n(e) {
            function t(t, n, i, r, o, a) {
                for (; o >= 0 && a > o; o += e) {
                    var s = r ? r[o] : o;
                    i = n(i, t[s], s, t)
                }
                return i
            }
            return function(n, i, r, o) {
                i = S(i, o, 4);
                var a = !P(n) && _.keys(n)
                  , s = (a || n).length
                  , l = e > 0 ? 0 : s - 1;
                return arguments.length < 3 && (r = n[a ? a[l] : l],
                l += e),
                t(n, i, r, a, l, s)
            }
        }
        function o(e) {
            return function(t, n, i) {
                n = M(n, i);
                for (var r = A(t), o = e > 0 ? 0 : r - 1; o >= 0 && r > o; o += e)
                    if (n(t[o], o, t))
                        return o;
                return -1
            }
        }
        function a(e, t, n) {
            return function(i, r, o) {
                var a = 0
                  , s = A(i);
                if ("number" == typeof o)
                    e > 0 ? a = o >= 0 ? o : Math.max(o + s, a) : s = o >= 0 ? Math.min(o + 1, s) : o + s + 1;
                else if (n && o && s)
                    return o = n(i, r),
                    i[o] === r ? o : -1;
                if (r !== r)
                    return o = t(p.call(i, a, s), _.isNaN),
                    o >= 0 ? o + a : -1;
                for (o = e > 0 ? a : s - 1; o >= 0 && s > o; o += e)
                    if (i[o] === r)
                        return o;
                return -1
            }
        }
        function s(e, t) {
            var n = B.length
              , i = e.constructor
              , r = _.isFunction(i) && i.prototype || h
              , o = "constructor";
            for (_.has(e, o) && !_.contains(t, o) && t.push(o); n--; )
                o = B[n],
                o in e && e[o] !== r[o] && !_.contains(t, o) && t.push(o)
        }
        var l = this
          , c = l._
          , u = Array.prototype
          , h = Object.prototype
          , d = Function.prototype
          , f = u.push
          , p = u.slice
          , m = h.toString
          , v = h.hasOwnProperty
          , g = Array.isArray
          , y = Object.keys
          , b = d.bind
          , x = Object.create
          , w = function() {}
          , _ = function(e) {
            return e instanceof _ ? e : this instanceof _ ? void (this._wrapped = e) : new _(e)
        };
        "undefined" != typeof e && e.exports && (t = e.exports = _),
        t._ = _,
        _.VERSION = "1.8.3";
        var S = function(e, t, n) {
            if (void 0 === t)
                return e;
            switch (null == n ? 3 : n) {
            case 1:
                return function(n) {
                    return e.call(t, n)
                }
                ;
            case 2:
                return function(n, i) {
                    return e.call(t, n, i)
                }
                ;
            case 3:
                return function(n, i, r) {
                    return e.call(t, n, i, r)
                }
                ;
            case 4:
                return function(n, i, r, o) {
                    return e.call(t, n, i, r, o)
                }
            }
            return function() {
                return e.apply(t, arguments)
            }
        }
          , M = function(e, t, n) {
            return null == e ? _.identity : _.isFunction(e) ? S(e, t, n) : _.isObject(e) ? _.matcher(e) : _.property(e)
        };
        _.iteratee = function(e, t) {
            return M(e, t, 1 / 0)
        }
        ;
        var C = function(e, t) {
            return function(n) {
                var i = arguments.length;
                if (2 > i || null == n)
                    return n;
                for (var r = 1; i > r; r++)
                    for (var o = arguments[r], a = e(o), s = a.length, l = 0; s > l; l++) {
                        var c = a[l];
                        t && void 0 !== n[c] || (n[c] = o[c])
                    }
                return n
            }
        }
          , T = function(e) {
            if (!_.isObject(e))
                return {};
            if (x)
                return x(e);
            w.prototype = e;
            var t = new w;
            return w.prototype = null,
            t
        }
          , E = function(e) {
            return function(t) {
                return null == t ? void 0 : t[e]
            }
        }
          , k = Math.pow(2, 53) - 1
          , A = E("length")
          , P = function(e) {
            var t = A(e);
            return "number" == typeof t && t >= 0 && k >= t
        };
        _.each = _.forEach = function(e, t, n) {
            t = S(t, n);
            var i, r;
            if (P(e))
                for (i = 0,
                r = e.length; r > i; i++)
                    t(e[i], i, e);
            else {
                var o = _.keys(e);
                for (i = 0,
                r = o.length; r > i; i++)
                    t(e[o[i]], o[i], e)
            }
            return e
        }
        ,
        _.map = _.collect = function(e, t, n) {
            t = M(t, n);
            for (var i = !P(e) && _.keys(e), r = (i || e).length, o = Array(r), a = 0; r > a; a++) {
                var s = i ? i[a] : a;
                o[a] = t(e[s], s, e)
            }
            return o
        }
        ,
        _.reduce = _.foldl = _.inject = n(1),
        _.reduceRight = _.foldr = n(-1),
        _.find = _.detect = function(e, t, n) {
            var i;
            return i = P(e) ? _.findIndex(e, t, n) : _.findKey(e, t, n),
            void 0 !== i && -1 !== i ? e[i] : void 0
        }
        ,
        _.filter = _.select = function(e, t, n) {
            var i = [];
            return t = M(t, n),
            _.each(e, function(e, n, r) {
                t(e, n, r) && i.push(e)
            }),
            i
        }
        ,
        _.reject = function(e, t, n) {
            return _.filter(e, _.negate(M(t)), n)
        }
        ,
        _.every = _.all = function(e, t, n) {
            t = M(t, n);
            for (var i = !P(e) && _.keys(e), r = (i || e).length, o = 0; r > o; o++) {
                var a = i ? i[o] : o;
                if (!t(e[a], a, e))
                    return !1
            }
            return !0
        }
        ,
        _.some = _.any = function(e, t, n) {
            t = M(t, n);
            for (var i = !P(e) && _.keys(e), r = (i || e).length, o = 0; r > o; o++) {
                var a = i ? i[o] : o;
                if (t(e[a], a, e))
                    return !0
            }
            return !1
        }
        ,
        _.contains = _.includes = _.include = function(e, t, n, i) {
            return P(e) || (e = _.values(e)),
            ("number" != typeof n || i) && (n = 0),
            _.indexOf(e, t, n) >= 0
        }
        ,
        _.invoke = function(e, t) {
            var n = p.call(arguments, 2)
              , i = _.isFunction(t);
            return _.map(e, function(e) {
                var r = i ? t : e[t];
                return null == r ? r : r.apply(e, n)
            })
        }
        ,
        _.pluck = function(e, t) {
            return _.map(e, _.property(t))
        }
        ,
        _.where = function(e, t) {
            return _.filter(e, _.matcher(t))
        }
        ,
        _.findWhere = function(e, t) {
            return _.find(e, _.matcher(t))
        }
        ,
        _.max = function(e, t, n) {
            var i, r, o = -(1 / 0), a = -(1 / 0);
            if (null == t && null != e) {
                e = P(e) ? e : _.values(e);
                for (var s = 0, l = e.length; l > s; s++)
                    i = e[s],
                    i > o && (o = i)
            } else
                t = M(t, n),
                _.each(e, function(e, n, i) {
                    r = t(e, n, i),
                    (r > a || r === -(1 / 0) && o === -(1 / 0)) && (o = e,
                    a = r)
                });
            return o
        }
        ,
        _.min = function(e, t, n) {
            var i, r, o = 1 / 0, a = 1 / 0;
            if (null == t && null != e) {
                e = P(e) ? e : _.values(e);
                for (var s = 0, l = e.length; l > s; s++)
                    i = e[s],
                    o > i && (o = i)
            } else
                t = M(t, n),
                _.each(e, function(e, n, i) {
                    r = t(e, n, i),
                    (a > r || r === 1 / 0 && o === 1 / 0) && (o = e,
                    a = r)
                });
            return o
        }
        ,
        _.shuffle = function(e) {
            for (var t, n = P(e) ? e : _.values(e), i = n.length, r = Array(i), o = 0; i > o; o++)
                t = _.random(0, o),
                t !== o && (r[o] = r[t]),
                r[t] = n[o];
            return r
        }
        ,
        _.sample = function(e, t, n) {
            return null == t || n ? (P(e) || (e = _.values(e)),
            e[_.random(e.length - 1)]) : _.shuffle(e).slice(0, Math.max(0, t))
        }
        ,
        _.sortBy = function(e, t, n) {
            return t = M(t, n),
            _.pluck(_.map(e, function(e, n, i) {
                return {
                    value: e,
                    index: n,
                    criteria: t(e, n, i)
                }
            }).sort(function(e, t) {
                var n = e.criteria
                  , i = t.criteria;
                if (n !== i) {
                    if (n > i || void 0 === n)
                        return 1;
                    if (i > n || void 0 === i)
                        return -1
                }
                return e.index - t.index
            }), "value")
        }
        ;
        var L = function(e) {
            return function(t, n, i) {
                var r = {};
                return n = M(n, i),
                _.each(t, function(i, o) {
                    var a = n(i, o, t);
                    e(r, i, a)
                }),
                r
            }
        };
        _.groupBy = L(function(e, t, n) {
            _.has(e, n) ? e[n].push(t) : e[n] = [t]
        }),
        _.indexBy = L(function(e, t, n) {
            e[n] = t
        }),
        _.countBy = L(function(e, t, n) {
            _.has(e, n) ? e[n]++ : e[n] = 1
        }),
        _.toArray = function(e) {
            return e ? _.isArray(e) ? p.call(e) : P(e) ? _.map(e, _.identity) : _.values(e) : [];
        }
        ,
        _.size = function(e) {
            return null == e ? 0 : P(e) ? e.length : _.keys(e).length
        }
        ,
        _.partition = function(e, t, n) {
            t = M(t, n);
            var i = []
              , r = [];
            return _.each(e, function(e, n, o) {
                (t(e, n, o) ? i : r).push(e)
            }),
            [i, r]
        }
        ,
        _.first = _.head = _.take = function(e, t, n) {
            return null == e ? void 0 : null == t || n ? e[0] : _.initial(e, e.length - t)
        }
        ,
        _.initial = function(e, t, n) {
            return p.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t)))
        }
        ,
        _.last = function(e, t, n) {
            return null == e ? void 0 : null == t || n ? e[e.length - 1] : _.rest(e, Math.max(0, e.length - t))
        }
        ,
        _.rest = _.tail = _.drop = function(e, t, n) {
            return p.call(e, null == t || n ? 1 : t)
        }
        ,
        _.compact = function(e) {
            return _.filter(e, _.identity)
        }
        ;
        var O = function(e, t, n, i) {
            for (var r = [], o = 0, a = i || 0, s = A(e); s > a; a++) {
                var l = e[a];
                if (P(l) && (_.isArray(l) || _.isArguments(l))) {
                    t || (l = O(l, t, n));
                    var c = 0
                      , u = l.length;
                    for (r.length += u; u > c; )
                        r[o++] = l[c++]
                } else
                    n || (r[o++] = l)
            }
            return r
        };
        _.flatten = function(e, t) {
            return O(e, t, !1)
        }
        ,
        _.without = function(e) {
            return _.difference(e, p.call(arguments, 1))
        }
        ,
        _.uniq = _.unique = function(e, t, n, i) {
            _.isBoolean(t) || (i = n,
            n = t,
            t = !1),
            null != n && (n = M(n, i));
            for (var r = [], o = [], a = 0, s = A(e); s > a; a++) {
                var l = e[a]
                  , c = n ? n(l, a, e) : l;
                t ? (a && o === c || r.push(l),
                o = c) : n ? _.contains(o, c) || (o.push(c),
                r.push(l)) : _.contains(r, l) || r.push(l)
            }
            return r
        }
        ,
        _.union = function() {
            return _.uniq(O(arguments, !0, !0))
        }
        ,
        _.intersection = function(e) {
            for (var t = [], n = arguments.length, i = 0, r = A(e); r > i; i++) {
                var o = e[i];
                if (!_.contains(t, o)) {
                    for (var a = 1; n > a && _.contains(arguments[a], o); a++)
                        ;
                    a === n && t.push(o)
                }
            }
            return t
        }
        ,
        _.difference = function(e) {
            var t = O(arguments, !0, !0, 1);
            return _.filter(e, function(e) {
                return !_.contains(t, e)
            })
        }
        ,
        _.zip = function() {
            return _.unzip(arguments)
        }
        ,
        _.unzip = function(e) {
            for (var t = e && _.max(e, A).length || 0, n = Array(t), i = 0; t > i; i++)
                n[i] = _.pluck(e, i);
            return n
        }
        ,
        _.object = function(e, t) {
            for (var n = {}, i = 0, r = A(e); r > i; i++)
                t ? n[e[i]] = t[i] : n[e[i][0]] = e[i][1];
            return n
        }
        ,
        _.findIndex = o(1),
        _.findLastIndex = o(-1),
        _.sortedIndex = function(e, t, n, i) {
            n = M(n, i, 1);
            for (var r = n(t), o = 0, a = A(e); a > o; ) {
                var s = Math.floor((o + a) / 2);
                n(e[s]) < r ? o = s + 1 : a = s
            }
            return o
        }
        ,
        _.indexOf = a(1, _.findIndex, _.sortedIndex),
        _.lastIndexOf = a(-1, _.findLastIndex),
        _.range = function(e, t, n) {
            null == t && (t = e || 0,
            e = 0),
            n = n || 1;
            for (var i = Math.max(Math.ceil((t - e) / n), 0), r = Array(i), o = 0; i > o; o++,
            e += n)
                r[o] = e;
            return r
        }
        ;
        var R = function(e, t, n, i, r) {
            if (!(i instanceof t))
                return e.apply(n, r);
            var o = T(e.prototype)
              , a = e.apply(o, r);
            return _.isObject(a) ? a : o
        };
        _.bind = function(e, t) {
            if (b && e.bind === b)
                return b.apply(e, p.call(arguments, 1));
            if (!_.isFunction(e))
                throw new TypeError("Bind must be called on a function");
            var n = p.call(arguments, 2)
              , i = function() {
                return R(e, i, t, this, n.concat(p.call(arguments)))
            };
            return i
        }
        ,
        _.partial = function(e) {
            var t = p.call(arguments, 1)
              , n = function() {
                for (var i = 0, r = t.length, o = Array(r), a = 0; r > a; a++)
                    o[a] = t[a] === _ ? arguments[i++] : t[a];
                for (; i < arguments.length; )
                    o.push(arguments[i++]);
                return R(e, n, this, this, o)
            };
            return n
        }
        ,
        _.bindAll = function(e) {
            var t, n, i = arguments.length;
            if (1 >= i)
                throw new Error("bindAll must be passed function names");
            for (t = 1; i > t; t++)
                n = arguments[t],
                e[n] = _.bind(e[n], e);
            return e
        }
        ,
        _.memoize = function(e, t) {
            var n = function(i) {
                var r = n.cache
                  , o = "" + (t ? t.apply(this, arguments) : i);
                return _.has(r, o) || (r[o] = e.apply(this, arguments)),
                r[o]
            };
            return n.cache = {},
            n
        }
        ,
        _.delay = function(e, t) {
            var n = p.call(arguments, 2);
            return setTimeout(function() {
                return e.apply(null, n)
            }, t)
        }
        ,
        _.defer = _.partial(_.delay, _, 1),
        _.throttle = function(e, t, n) {
            var i, r, o, a = null, s = 0;
            n || (n = {});
            var l = function() {
                s = n.leading === !1 ? 0 : _.now(),
                a = null,
                o = e.apply(i, r),
                a || (i = r = null)
            };
            return function() {
                var c = _.now();
                s || n.leading !== !1 || (s = c);
                var u = t - (c - s);
                return i = this,
                r = arguments,
                0 >= u || u > t ? (a && (clearTimeout(a),
                a = null),
                s = c,
                o = e.apply(i, r),
                a || (i = r = null)) : a || n.trailing === !1 || (a = setTimeout(l, u)),
                o
            }
        }
        ,
        _.debounce = function(e, t, n) {
            var i, r, o, a, s, l = function() {
                var c = _.now() - a;
                t > c && c >= 0 ? i = setTimeout(l, t - c) : (i = null,
                n || (s = e.apply(o, r),
                i || (o = r = null)))
            };
            return function() {
                o = this,
                r = arguments,
                a = _.now();
                var c = n && !i;
                return i || (i = setTimeout(l, t)),
                c && (s = e.apply(o, r),
                o = r = null),
                s
            }
        }
        ,
        _.wrap = function(e, t) {
            return _.partial(t, e)
        }
        ,
        _.negate = function(e) {
            return function() {
                return !e.apply(this, arguments)
            }
        }
        ,
        _.compose = function() {
            var e = arguments
              , t = e.length - 1;
            return function() {
                for (var n = t, i = e[t].apply(this, arguments); n--; )
                    i = e[n].call(this, i);
                return i
            }
        }
        ,
        _.after = function(e, t) {
            return function() {
                return --e < 1 ? t.apply(this, arguments) : void 0
            }
        }
        ,
        _.before = function(e, t) {
            var n;
            return function() {
                return --e > 0 && (n = t.apply(this, arguments)),
                1 >= e && (t = null),
                n
            }
        }
        ,
        _.once = _.partial(_.before, 2);
        var F = !{
            toString: null
        }.propertyIsEnumerable("toString")
          , B = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        _.keys = function(e) {
            if (!_.isObject(e))
                return [];
            if (y)
                return y(e);
            var t = [];
            for (var n in e)
                _.has(e, n) && t.push(n);
            return F && s(e, t),
            t
        }
        ,
        _.allKeys = function(e) {
            if (!_.isObject(e))
                return [];
            var t = [];
            for (var n in e)
                t.push(n);
            return F && s(e, t),
            t
        }
        ,
        _.values = function(e) {
            for (var t = _.keys(e), n = t.length, i = Array(n), r = 0; n > r; r++)
                i[r] = e[t[r]];
            return i
        }
        ,
        _.mapObject = function(e, t, n) {
            t = M(t, n);
            for (var i, r = _.keys(e), o = r.length, a = {}, s = 0; o > s; s++)
                i = r[s],
                a[i] = t(e[i], i, e);
            return a
        }
        ,
        _.pairs = function(e) {
            for (var t = _.keys(e), n = t.length, i = Array(n), r = 0; n > r; r++)
                i[r] = [t[r], e[t[r]]];
            return i
        }
        ,
        _.invert = function(e) {
            for (var t = {}, n = _.keys(e), i = 0, r = n.length; r > i; i++)
                t[e[n[i]]] = n[i];
            return t
        }
        ,
        _.functions = _.methods = function(e) {
            var t = [];
            for (var n in e)
                _.isFunction(e[n]) && t.push(n);
            return t.sort()
        }
        ,
        _.extend = C(_.allKeys),
        _.extendOwn = _.assign = C(_.keys),
        _.findKey = function(e, t, n) {
            t = M(t, n);
            for (var i, r = _.keys(e), o = 0, a = r.length; a > o; o++)
                if (i = r[o],
                t(e[i], i, e))
                    return i
        }
        ,
        _.pick = function(e, t, n) {
            var i, r, o = {}, a = e;
            if (null == a)
                return o;
            _.isFunction(t) ? (r = _.allKeys(a),
            i = S(t, n)) : (r = O(arguments, !1, !1, 1),
            i = function(e, t, n) {
                return t in n
            }
            ,
            a = Object(a));
            for (var s = 0, l = r.length; l > s; s++) {
                var c = r[s]
                  , u = a[c];
                i(u, c, a) && (o[c] = u)
            }
            return o
        }
        ,
        _.omit = function(e, t, n) {
            if (_.isFunction(t))
                t = _.negate(t);
            else {
                var i = _.map(O(arguments, !1, !1, 1), String);
                t = function(e, t) {
                    return !_.contains(i, t)
                }
            }
            return _.pick(e, t, n)
        }
        ,
        _.defaults = C(_.allKeys, !0),
        _.create = function(e, t) {
            var n = T(e);
            return t && _.extendOwn(n, t),
            n
        }
        ,
        _.clone = function(e) {
            return _.isObject(e) ? _.isArray(e) ? e.slice() : _.extend({}, e) : e
        }
        ,
        _.tap = function(e, t) {
            return t(e),
            e
        }
        ,
        _.isMatch = function(e, t) {
            var n = _.keys(t)
              , i = n.length;
            if (null == e)
                return !i;
            for (var r = Object(e), o = 0; i > o; o++) {
                var a = n[o];
                if (t[a] !== r[a] || !(a in r))
                    return !1
            }
            return !0
        }
        ;
        var D = function(e, t, n, i) {
            if (e === t)
                return 0 !== e || 1 / e === 1 / t;
            if (null == e || null == t)
                return e === t;
            e instanceof _ && (e = e._wrapped),
            t instanceof _ && (t = t._wrapped);
            var r = m.call(e);
            if (r !== m.call(t))
                return !1;
            switch (r) {
            case "[object RegExp]":
            case "[object String]":
                return "" + e == "" + t;
            case "[object Number]":
                return +e !== +e ? +t !== +t : 0 === +e ? 1 / +e === 1 / t : +e === +t;
            case "[object Date]":
            case "[object Boolean]":
                return +e === +t
            }
            var o = "[object Array]" === r;
            if (!o) {
                if ("object" != typeof e || "object" != typeof t)
                    return !1;
                var a = e.constructor
                  , s = t.constructor;
                if (a !== s && !(_.isFunction(a) && a instanceof a && _.isFunction(s) && s instanceof s) && "constructor"in e && "constructor"in t)
                    return !1
            }
            n = n || [],
            i = i || [];
            for (var l = n.length; l--; )
                if (n[l] === e)
                    return i[l] === t;
            if (n.push(e),
            i.push(t),
            o) {
                if (l = e.length,
                l !== t.length)
                    return !1;
                for (; l--; )
                    if (!D(e[l], t[l], n, i))
                        return !1
            } else {
                var c, u = _.keys(e);
                if (l = u.length,
                _.keys(t).length !== l)
                    return !1;
                for (; l--; )
                    if (c = u[l],
                    !_.has(t, c) || !D(e[c], t[c], n, i))
                        return !1
            }
            return n.pop(),
            i.pop(),
            !0
        };
        _.isEqual = function(e, t) {
            return D(e, t)
        }
        ,
        _.isEmpty = function(e) {
            return null == e ? !0 : P(e) && (_.isArray(e) || _.isString(e) || _.isArguments(e)) ? 0 === e.length : 0 === _.keys(e).length
        }
        ,
        _.isElement = function(e) {
            return !(!e || 1 !== e.nodeType)
        }
        ,
        _.isArray = g || function(e) {
            return "[object Array]" === m.call(e)
        }
        ,
        _.isObject = function(e) {
            var t = typeof e;
            return "function" === t || "object" === t && !!e
        }
        ,
        _.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(e) {
            _["is" + e] = function(t) {
                return m.call(t) === "[object " + e + "]"
            }
        }),
        _.isArguments(arguments) || (_.isArguments = function(e) {
            return _.has(e, "callee")
        }
        ),
        "function" != typeof /./ && "object" != typeof Int8Array && (_.isFunction = function(e) {
            return "function" == typeof e || !1
        }
        ),
        _.isFinite = function(e) {
            return isFinite(e) && !isNaN(parseFloat(e))
        }
        ,
        _.isNaN = function(e) {
            return _.isNumber(e) && e !== +e
        }
        ,
        _.isBoolean = function(e) {
            return e === !0 || e === !1 || "[object Boolean]" === m.call(e)
        }
        ,
        _.isNull = function(e) {
            return null === e
        }
        ,
        _.isUndefined = function(e) {
            return void 0 === e
        }
        ,
        _.has = function(e, t) {
            return null != e && v.call(e, t)
        }
        ,
        _.noConflict = function() {
            return l._ = c,
            this
        }
        ,
        _.identity = function(e) {
            return e
        }
        ,
        _.constant = function(e) {
            return function() {
                return e
            }
        }
        ,
        _.noop = function() {}
        ,
        _.property = E,
        _.propertyOf = function(e) {
            return null == e ? function() {}
            : function(t) {
                return e[t]
            }
        }
        ,
        _.matcher = _.matches = function(e) {
            return e = _.extendOwn({}, e),
            function(t) {
                return _.isMatch(t, e)
            }
        }
        ,
        _.times = function(e, t, n) {
            var i = Array(Math.max(0, e));
            t = S(t, n, 1);
            for (var r = 0; e > r; r++)
                i[r] = t(r);
            return i
        }
        ,
        _.random = function(e, t) {
            return null == t && (t = e,
            e = 0),
            e + Math.floor(Math.random() * (t - e + 1))
        }
        ,
        _.now = Date.now || function() {
            return (new Date).getTime()
        }
        ;
        var I = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "`": "&#x60;"
        }
          , N = _.invert(I)
          , j = function(e) {
            var t = function(t) {
                return e[t]
            }
              , n = "(?:" + _.keys(e).join("|") + ")"
              , i = RegExp(n)
              , r = RegExp(n, "g");
            return function(e) {
                return e = null == e ? "" : "" + e,
                i.test(e) ? e.replace(r, t) : e
            }
        };
        _.escape = j(I),
        _.unescape = j(N),
        _.result = function(e, t, n) {
            var i = null == e ? void 0 : e[t];
            return void 0 === i && (i = n),
            _.isFunction(i) ? i.call(e) : i
        }
        ;
        var V = 0;
        _.uniqueId = function(e) {
            var t = ++V + "";
            return e ? e + t : t
        }
        ,
        _.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var z = /(.)^/
          , U = {
            "'": "'",
            "\\": "\\",
            "\r": "r",
            "\n": "n",
            "\u2028": "u2028",
            "\u2029": "u2029"
        }
          , H = /\\|'|\r|\n|\u2028|\u2029/g
          , G = function(e) {
            return "\\" + U[e]
        };
        _.template = function(e, t, n) {
            !t && n && (t = n),
            t = _.defaults({}, t, _.templateSettings);
            var i = RegExp([(t.escape || z).source, (t.interpolate || z).source, (t.evaluate || z).source].join("|") + "|$", "g")
              , r = 0
              , o = "__p+='";
            e.replace(i, function(t, n, i, a, s) {
                return o += e.slice(r, s).replace(H, G),
                r = s + t.length,
                n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : i ? o += "'+\n((__t=(" + i + "))==null?'':__t)+\n'" : a && (o += "';\n" + a + "\n__p+='"),
                t
            }),
            o += "';\n",
            t.variable || (o = "with(obj||{}){\n" + o + "}\n"),
            o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
            try {
                var a = new Function(t.variable || "obj","_",o)
            } catch (s) {
                throw s.source = o,
                s
            }
            var l = function(e) {
                return a.call(this, e, _)
            }
              , c = t.variable || "obj";
            return l.source = "function(" + c + "){\n" + o + "}",
            l
        }
        ,
        _.chain = function(e) {
            var t = _(e);
            return t._chain = !0,
            t
        }
        ;
        var W = function(e, t) {
            return e._chain ? _(t).chain() : t
        };
        _.mixin = function(e) {
            _.each(_.functions(e), function(t) {
                var n = _[t] = e[t];
                _.prototype[t] = function() {
                    var e = [this._wrapped];
                    return f.apply(e, arguments),
                    W(this, n.apply(_, e))
                }
            })
        }
        ,
        _.mixin(_),
        _.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(e) {
            var t = u[e];
            _.prototype[e] = function() {
                var n = this._wrapped;
                return t.apply(n, arguments),
                "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0],
                W(this, n)
            }
        }),
        _.each(["concat", "join", "slice"], function(e) {
            var t = u[e];
            _.prototype[e] = function() {
                return W(this, t.apply(this._wrapped, arguments))
            }
        }),
        _.prototype.value = function() {
            return this._wrapped
        }
        ,
        _.prototype.valueOf = _.prototype.toJSON = _.prototype.value,
        _.prototype.toString = function() {
            return "" + this._wrapped
        }
        ,
        i = [],
        r = function() {
            return _
        }
        .apply(t, i),
        !(void 0 !== r && (e.exports = r))
    }
    ).call(this)
}
, function(e, t, n) {
    var i, r;
    /*!
	 * jQuery JavaScript Library v2.1.4
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-04-28T16:01Z
	 */
    !function(t, n) {
        "object" == typeof e && "object" == typeof e.exports ? e.exports = t.document ? n(t, !0) : function(e) {
            if (!e.document)
                throw new Error("jQuery requires a window with a document");
            return n(e)
        }
        : n(t)
    }("undefined" != typeof window ? window : this, function(n, o) {
        function a(e) {
            var t = "length"in e && e.length
              , n = ie.type(e);
            return "function" === n || ie.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
        }
        function s(e, t, n) {
            if (ie.isFunction(t))
                return ie.grep(e, function(e, i) {
                    return !!t.call(e, i, e) !== n
                });
            if (t.nodeType)
                return ie.grep(e, function(e) {
                    return e === t !== n
                });
            if ("string" == typeof t) {
                if (he.test(t))
                    return ie.filter(t, e, n);
                t = ie.filter(t, e)
            }
            return ie.grep(e, function(e) {
                return Z.call(t, e) >= 0 !== n
            })
        }
        function l(e, t) {
            for (; (e = e[t]) && 1 !== e.nodeType; )
                ;
            return e
        }
        function c(e) {
            var t = ye[e] = {};
            return ie.each(e.match(ge) || [], function(e, n) {
                t[n] = !0
            }),
            t
        }
        function u() {
            te.removeEventListener("DOMContentLoaded", u, !1),
            n.removeEventListener("load", u, !1),
            ie.ready()
        }
        function h() {
            Object.defineProperty(this.cache = {}, 0, {
                get: function() {
                    return {}
                }
            }),
            this.expando = ie.expando + h.uid++
        }
        function d(e, t, n) {
            var i;
            if (void 0 === n && 1 === e.nodeType)
                if (i = "data-" + t.replace(Me, "-$1").toLowerCase(),
                n = e.getAttribute(i),
                "string" == typeof n) {
                    try {
                        n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : Se.test(n) ? ie.parseJSON(n) : n
                    } catch (r) {}
                    _e.set(e, t, n)
                } else
                    n = void 0;
            return n
        }
        function f() {
            return !0
        }
        function p() {
            return !1
        }
        function m() {
            try {
                return te.activeElement
            } catch (e) {}
        }
        function v(e, t) {
            return ie.nodeName(e, "table") && ie.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
        }
        function g(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type,
            e
        }
        function y(e) {
            var t = Ve.exec(e.type);
            return t ? e.type = t[1] : e.removeAttribute("type"),
            e
        }
        function b(e, t) {
            for (var n = 0, i = e.length; i > n; n++)
                we.set(e[n], "globalEval", !t || we.get(t[n], "globalEval"))
        }
        function x(e, t) {
            var n, i, r, o, a, s, l, c;
            if (1 === t.nodeType) {
                if (we.hasData(e) && (o = we.access(e),
                a = we.set(t, o),
                c = o.events)) {
                    delete a.handle,
                    a.events = {};
                    for (r in c)
                        for (n = 0,
                        i = c[r].length; i > n; n++)
                            ie.event.add(t, r, c[r][n])
                }
                _e.hasData(e) && (s = _e.access(e),
                l = ie.extend({}, s),
                _e.set(t, l))
            }
        }
        function w(e, t) {
            var n = e.getElementsByTagName ? e.getElementsByTagName(t || "*") : e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
            return void 0 === t || t && ie.nodeName(e, t) ? ie.merge([e], n) : n
        }
        function _(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && ke.test(e.type) ? t.checked = e.checked : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
        }
        function S(e, t) {
            var i, r = ie(t.createElement(e)).appendTo(t.body), o = n.getDefaultComputedStyle && (i = n.getDefaultComputedStyle(r[0])) ? i.display : ie.css(r[0], "display");
            return r.detach(),
            o
        }
        function M(e) {
            var t = te
              , n = Ge[e];
            return n || (n = S(e, t),
            "none" !== n && n || (He = (He || ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),
            t = He[0].contentDocument,
            t.write(),
            t.close(),
            n = S(e, t),
            He.detach()),
            Ge[e] = n),
            n
        }
        function C(e, t, n) {
            var i, r, o, a, s = e.style;
            return n = n || Xe(e),
            n && (a = n.getPropertyValue(t) || n[t]),
            n && ("" !== a || ie.contains(e.ownerDocument, e) || (a = ie.style(e, t)),
            qe.test(a) && We.test(t) && (i = s.width,
            r = s.minWidth,
            o = s.maxWidth,
            s.minWidth = s.maxWidth = s.width = a,
            a = n.width,
            s.width = i,
            s.minWidth = r,
            s.maxWidth = o)),
            void 0 !== a ? a + "" : a
        }
        function T(e, t) {
            return {
                get: function() {
                    return e() ? void delete this.get : (this.get = t).apply(this, arguments)
                }
            }
        }
        function E(e, t) {
            if (t in e)
                return t;
            for (var n = t[0].toUpperCase() + t.slice(1), i = t, r = $e.length; r--; )
                if (t = $e[r] + n,
                t in e)
                    return t;
            return i
        }
        function k(e, t, n) {
            var i = Je.exec(t);
            return i ? Math.max(0, i[1] - (n || 0)) + (i[2] || "px") : t
        }
        function A(e, t, n, i, r) {
            for (var o = n === (i ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; 4 > o; o += 2)
                "margin" === n && (a += ie.css(e, n + Te[o], !0, r)),
                i ? ("content" === n && (a -= ie.css(e, "padding" + Te[o], !0, r)),
                "margin" !== n && (a -= ie.css(e, "border" + Te[o] + "Width", !0, r))) : (a += ie.css(e, "padding" + Te[o], !0, r),
                "padding" !== n && (a += ie.css(e, "border" + Te[o] + "Width", !0, r)));
            return a
        }
        function P(e, t, n) {
            var i = !0
              , r = "width" === t ? e.offsetWidth : e.offsetHeight
              , o = Xe(e)
              , a = "border-box" === ie.css(e, "boxSizing", !1, o);
            if (0 >= r || null == r) {
                if (r = C(e, t, o),
                (0 > r || null == r) && (r = e.style[t]),
                qe.test(r))
                    return r;
                i = a && (ee.boxSizingReliable() || r === e.style[t]),
                r = parseFloat(r) || 0
            }
            return r + A(e, t, n || (a ? "border" : "content"), i, o) + "px"
        }
        function L(e, t) {
            for (var n, i, r, o = [], a = 0, s = e.length; s > a; a++)
                i = e[a],
                i.style && (o[a] = we.get(i, "olddisplay"),
                n = i.style.display,
                t ? (o[a] || "none" !== n || (i.style.display = ""),
                "" === i.style.display && Ee(i) && (o[a] = we.access(i, "olddisplay", M(i.nodeName)))) : (r = Ee(i),
                "none" === n && r || we.set(i, "olddisplay", r ? n : ie.css(i, "display"))));
            for (a = 0; s > a; a++)
                i = e[a],
                i.style && (t && "none" !== i.style.display && "" !== i.style.display || (i.style.display = t ? o[a] || "" : "none"));
            return e
        }
        function O(e, t, n, i, r) {
            return new O.prototype.init(e,t,n,i,r)
        }
        function R() {
            return setTimeout(function() {
                et = void 0
            }),
            et = ie.now()
        }
        function F(e, t) {
            var n, i = 0, r = {
                height: e
            };
            for (t = t ? 1 : 0; 4 > i; i += 2 - t)
                n = Te[i],
                r["margin" + n] = r["padding" + n] = e;
            return t && (r.opacity = r.width = e),
            r
        }
        function B(e, t, n) {
            for (var i, r = (at[t] || []).concat(at["*"]), o = 0, a = r.length; a > o; o++)
                if (i = r[o].call(n, t, e))
                    return i
        }
        function D(e, t, n) {
            var i, r, o, a, s, l, c, u, h = this, d = {}, f = e.style, p = e.nodeType && Ee(e), m = we.get(e, "fxshow");
            n.queue || (s = ie._queueHooks(e, "fx"),
            null == s.unqueued && (s.unqueued = 0,
            l = s.empty.fire,
            s.empty.fire = function() {
                s.unqueued || l()
            }
            ),
            s.unqueued++,
            h.always(function() {
                h.always(function() {
                    s.unqueued--,
                    ie.queue(e, "fx").length || s.empty.fire()
                })
            })),
            1 === e.nodeType && ("height"in t || "width"in t) && (n.overflow = [f.overflow, f.overflowX, f.overflowY],
            c = ie.css(e, "display"),
            u = "none" === c ? we.get(e, "olddisplay") || M(e.nodeName) : c,
            "inline" === u && "none" === ie.css(e, "float") && (f.display = "inline-block")),
            n.overflow && (f.overflow = "hidden",
            h.always(function() {
                f.overflow = n.overflow[0],
                f.overflowX = n.overflow[1],
                f.overflowY = n.overflow[2]
            }));
            for (i in t)
                if (r = t[i],
                nt.exec(r)) {
                    if (delete t[i],
                    o = o || "toggle" === r,
                    r === (p ? "hide" : "show")) {
                        if ("show" !== r || !m || void 0 === m[i])
                            continue;
                        p = !0
                    }
                    d[i] = m && m[i] || ie.style(e, i)
                } else
                    c = void 0;
            if (ie.isEmptyObject(d))
                "inline" === ("none" === c ? M(e.nodeName) : c) && (f.display = c);
            else {
                m ? "hidden"in m && (p = m.hidden) : m = we.access(e, "fxshow", {}),
                o && (m.hidden = !p),
                p ? ie(e).show() : h.done(function() {
                    ie(e).hide()
                }),
                h.done(function() {
                    var t;
                    we.remove(e, "fxshow");
                    for (t in d)
                        ie.style(e, t, d[t])
                });
                for (i in d)
                    a = B(p ? m[i] : 0, i, h),
                    i in m || (m[i] = a.start,
                    p && (a.end = a.start,
                    a.start = "width" === i || "height" === i ? 1 : 0))
            }
        }
        function I(e, t) {
            var n, i, r, o, a;
            for (n in e)
                if (i = ie.camelCase(n),
                r = t[i],
                o = e[n],
                ie.isArray(o) && (r = o[1],
                o = e[n] = o[0]),
                n !== i && (e[i] = o,
                delete e[n]),
                a = ie.cssHooks[i],
                a && "expand"in a) {
                    o = a.expand(o),
                    delete e[i];
                    for (n in o)
                        n in e || (e[n] = o[n],
                        t[n] = r)
                } else
                    t[i] = r
        }
        function N(e, t, n) {
            var i, r, o = 0, a = ot.length, s = ie.Deferred().always(function() {
                delete l.elem
            }), l = function() {
                if (r)
                    return !1;
                for (var t = et || R(), n = Math.max(0, c.startTime + c.duration - t), i = n / c.duration || 0, o = 1 - i, a = 0, l = c.tweens.length; l > a; a++)
                    c.tweens[a].run(o);
                return s.notifyWith(e, [c, o, n]),
                1 > o && l ? n : (s.resolveWith(e, [c]),
                !1)
            }, c = s.promise({
                elem: e,
                props: ie.extend({}, t),
                opts: ie.extend(!0, {
                    specialEasing: {}
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: et || R(),
                duration: n.duration,
                tweens: [],
                createTween: function(t, n) {
                    var i = ie.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                    return c.tweens.push(i),
                    i
                },
                stop: function(t) {
                    var n = 0
                      , i = t ? c.tweens.length : 0;
                    if (r)
                        return this;
                    for (r = !0; i > n; n++)
                        c.tweens[n].run(1);
                    return t ? s.resolveWith(e, [c, t]) : s.rejectWith(e, [c, t]),
                    this
                }
            }), u = c.props;
            for (I(u, c.opts.specialEasing); a > o; o++)
                if (i = ot[o].call(c, e, u, c.opts))
                    return i;
            return ie.map(u, B, c),
            ie.isFunction(c.opts.start) && c.opts.start.call(e, c),
            ie.fx.timer(ie.extend(l, {
                elem: e,
                anim: c,
                queue: c.opts.queue
            })),
            c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
        }
        function j(e) {
            return function(t, n) {
                "string" != typeof t && (n = t,
                t = "*");
                var i, r = 0, o = t.toLowerCase().match(ge) || [];
                if (ie.isFunction(n))
                    for (; i = o[r++]; )
                        "+" === i[0] ? (i = i.slice(1) || "*",
                        (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n)
            }
        }
        function V(e, t, n, i) {
            function r(s) {
                var l;
                return o[s] = !0,
                ie.each(e[s] || [], function(e, s) {
                    var c = s(t, n, i);
                    return "string" != typeof c || a || o[c] ? a ? !(l = c) : void 0 : (t.dataTypes.unshift(c),
                    r(c),
                    !1)
                }),
                l
            }
            var o = {}
              , a = e === St;
            return r(t.dataTypes[0]) || !o["*"] && r("*")
        }
        function z(e, t) {
            var n, i, r = ie.ajaxSettings.flatOptions || {};
            for (n in t)
                void 0 !== t[n] && ((r[n] ? e : i || (i = {}))[n] = t[n]);
            return i && ie.extend(!0, e, i),
            e
        }
        function U(e, t, n) {
            for (var i, r, o, a, s = e.contents, l = e.dataTypes; "*" === l[0]; )
                l.shift(),
                void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
            if (i)
                for (r in s)
                    if (s[r] && s[r].test(i)) {
                        l.unshift(r);
                        break
                    }
            if (l[0]in n)
                o = l[0];
            else {
                for (r in n) {
                    if (!l[0] || e.converters[r + " " + l[0]]) {
                        o = r;
                        break
                    }
                    a || (a = r)
                }
                o = o || a
            }
            return o ? (o !== l[0] && l.unshift(o),
            n[o]) : void 0
        }
        function H(e, t, n, i) {
            var r, o, a, s, l, c = {}, u = e.dataTypes.slice();
            if (u[1])
                for (a in e.converters)
                    c[a.toLowerCase()] = e.converters[a];
            for (o = u.shift(); o; )
                if (e.responseFields[o] && (n[e.responseFields[o]] = t),
                !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
                l = o,
                o = u.shift())
                    if ("*" === o)
                        o = l;
                    else if ("*" !== l && l !== o) {
                        if (a = c[l + " " + o] || c["* " + o],
                        !a)
                            for (r in c)
                                if (s = r.split(" "),
                                s[1] === o && (a = c[l + " " + s[0]] || c["* " + s[0]])) {
                                    a === !0 ? a = c[r] : c[r] !== !0 && (o = s[0],
                                    u.unshift(s[1]));
                                    break
                                }
                        if (a !== !0)
                            if (a && e["throws"])
                                t = a(t);
                            else
                                try {
                                    t = a(t)
                                } catch (h) {
                                    return {
                                        state: "parsererror",
                                        error: a ? h : "No conversion from " + l + " to " + o
                                    }
                                }
                    }
            return {
                state: "success",
                data: t
            }
        }
        function G(e, t, n, i) {
            var r;
            if (ie.isArray(t))
                ie.each(t, function(t, r) {
                    n || kt.test(e) ? i(e, r) : G(e + "[" + ("object" == typeof r ? t : "") + "]", r, n, i)
                });
            else if (n || "object" !== ie.type(t))
                i(e, t);
            else
                for (r in t)
                    G(e + "[" + r + "]", t[r], n, i)
        }
        function W(e) {
            return ie.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
        }
        var q = []
          , X = q.slice
          , Y = q.concat
          , J = q.push
          , Z = q.indexOf
          , Q = {}
          , K = Q.toString
          , $ = Q.hasOwnProperty
          , ee = {}
          , te = n.document
          , ne = "2.1.4"
          , ie = function(e, t) {
            return new ie.fn.init(e,t)
        }
          , re = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g
          , oe = /^-ms-/
          , ae = /-([\da-z])/gi
          , se = function(e, t) {
            return t.toUpperCase()
        };
        ie.fn = ie.prototype = {
            jquery: ne,
            constructor: ie,
            selector: "",
            length: 0,
            toArray: function() {
                return X.call(this)
            },
            get: function(e) {
                return null != e ? 0 > e ? this[e + this.length] : this[e] : X.call(this)
            },
            pushStack: function(e) {
                var t = ie.merge(this.constructor(), e);
                return t.prevObject = this,
                t.context = this.context,
                t
            },
            each: function(e, t) {
                return ie.each(this, e, t)
            },
            map: function(e) {
                return this.pushStack(ie.map(this, function(t, n) {
                    return e.call(t, n, t)
                }))
            },
            slice: function() {
                return this.pushStack(X.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(e) {
                var t = this.length
                  , n = +e + (0 > e ? t : 0);
                return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: J,
            sort: q.sort,
            splice: q.splice
        },
        ie.extend = ie.fn.extend = function() {
            var e, t, n, i, r, o, a = arguments[0] || {}, s = 1, l = arguments.length, c = !1;
            for ("boolean" == typeof a && (c = a,
            a = arguments[s] || {},
            s++),
            "object" == typeof a || ie.isFunction(a) || (a = {}),
            s === l && (a = this,
            s--); l > s; s++)
                if (null != (e = arguments[s]))
                    for (t in e)
                        n = a[t],
                        i = e[t],
                        a !== i && (c && i && (ie.isPlainObject(i) || (r = ie.isArray(i))) ? (r ? (r = !1,
                        o = n && ie.isArray(n) ? n : []) : o = n && ie.isPlainObject(n) ? n : {},
                        a[t] = ie.extend(c, o, i)) : void 0 !== i && (a[t] = i));
            return a
        }
        ,
        ie.extend({
            expando: "jQuery" + (ne + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(e) {
                throw new Error(e)
            },
            noop: function() {},
            isFunction: function(e) {
                return "function" === ie.type(e)
            },
            isArray: Array.isArray,
            isWindow: function(e) {
                return null != e && e === e.window
            },
            isNumeric: function(e) {
                return !ie.isArray(e) && e - parseFloat(e) + 1 >= 0
            },
            isPlainObject: function(e) {
                return "object" !== ie.type(e) || e.nodeType || ie.isWindow(e) ? !1 : e.constructor && !$.call(e.constructor.prototype, "isPrototypeOf") ? !1 : !0
            },
            isEmptyObject: function(e) {
                var t;
                for (t in e)
                    return !1;
                return !0
            },
            type: function(e) {
                return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? Q[K.call(e)] || "object" : typeof e
            },
            globalEval: function(e) {
                var t, n = eval;
                e = ie.trim(e),
                e && (1 === e.indexOf("use strict") ? (t = te.createElement("script"),
                t.text = e,
                te.head.appendChild(t).parentNode.removeChild(t)) : n(e))
            },
            camelCase: function(e) {
                return e.replace(oe, "ms-").replace(ae, se)
            },
            nodeName: function(e, t) {
                return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
            },
            each: function(e, t, n) {
                var i, r = 0, o = e.length, s = a(e);
                if (n) {
                    if (s)
                        for (; o > r && (i = t.apply(e[r], n),
                        i !== !1); r++)
                            ;
                    else
                        for (r in e)
                            if (i = t.apply(e[r], n),
                            i === !1)
                                break
                } else if (s)
                    for (; o > r && (i = t.call(e[r], r, e[r]),
                    i !== !1); r++)
                        ;
                else
                    for (r in e)
                        if (i = t.call(e[r], r, e[r]),
                        i === !1)
                            break;
                return e
            },
            trim: function(e) {
                return null == e ? "" : (e + "").replace(re, "")
            },
            makeArray: function(e, t) {
                var n = t || [];
                return null != e && (a(Object(e)) ? ie.merge(n, "string" == typeof e ? [e] : e) : J.call(n, e)),
                n
            },
            inArray: function(e, t, n) {
                return null == t ? -1 : Z.call(t, e, n)
            },
            merge: function(e, t) {
                for (var n = +t.length, i = 0, r = e.length; n > i; i++)
                    e[r++] = t[i];
                return e.length = r,
                e
            },
            grep: function(e, t, n) {
                for (var i, r = [], o = 0, a = e.length, s = !n; a > o; o++)
                    i = !t(e[o], o),
                    i !== s && r.push(e[o]);
                return r
            },
            map: function(e, t, n) {
                var i, r = 0, o = e.length, s = a(e), l = [];
                if (s)
                    for (; o > r; r++)
                        i = t(e[r], r, n),
                        null != i && l.push(i);
                else
                    for (r in e)
                        i = t(e[r], r, n),
                        null != i && l.push(i);
                return Y.apply([], l)
            },
            guid: 1,
            proxy: function(e, t) {
                var n, i, r;
                return "string" == typeof t && (n = e[t],
                t = e,
                e = n),
                ie.isFunction(e) ? (i = X.call(arguments, 2),
                r = function() {
                    return e.apply(t || this, i.concat(X.call(arguments)))
                }
                ,
                r.guid = e.guid = e.guid || ie.guid++,
                r) : void 0
            },
            now: Date.now,
            support: ee
        }),
        ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
            Q["[object " + t + "]"] = t.toLowerCase()
        });
        var le = /*!
	 * Sizzle CSS Selector Engine v2.2.0-pre
	 * http://sizzlejs.com/
	 *
	 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-12-16
	 */
        function(e) {
            function t(e, t, n, i) {
                var r, o, a, s, l, c, h, f, p, m;
                if ((t ? t.ownerDocument || t : V) !== O && L(t),
                t = t || O,
                n = n || [],
                s = t.nodeType,
                "string" != typeof e || !e || 1 !== s && 9 !== s && 11 !== s)
                    return n;
                if (!i && F) {
                    if (11 !== s && (r = ye.exec(e)))
                        if (a = r[1]) {
                            if (9 === s) {
                                if (o = t.getElementById(a),
                                !o || !o.parentNode)
                                    return n;
                                if (o.id === a)
                                    return n.push(o),
                                    n
                            } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(a)) && N(t, o) && o.id === a)
                                return n.push(o),
                                n
                        } else {
                            if (r[2])
                                return K.apply(n, t.getElementsByTagName(e)),
                                n;
                            if ((a = r[3]) && w.getElementsByClassName)
                                return K.apply(n, t.getElementsByClassName(a)),
                                n
                        }
                    if (w.qsa && (!B || !B.test(e))) {
                        if (f = h = j,
                        p = t,
                        m = 1 !== s && e,
                        1 === s && "object" !== t.nodeName.toLowerCase()) {
                            for (c = C(e),
                            (h = t.getAttribute("id")) ? f = h.replace(xe, "\\$&") : t.setAttribute("id", f),
                            f = "[id='" + f + "'] ",
                            l = c.length; l--; )
                                c[l] = f + d(c[l]);
                            p = be.test(e) && u(t.parentNode) || t,
                            m = c.join(",")
                        }
                        if (m)
                            try {
                                return K.apply(n, p.querySelectorAll(m)),
                                n
                            } catch (v) {} finally {
                                h || t.removeAttribute("id")
                            }
                    }
                }
                return E(e.replace(le, "$1"), t, n, i)
            }
            function n() {
                function e(n, i) {
                    return t.push(n + " ") > _.cacheLength && delete e[t.shift()],
                    e[n + " "] = i
                }
                var t = [];
                return e
            }
            function i(e) {
                return e[j] = !0,
                e
            }
            function r(e) {
                var t = O.createElement("div");
                try {
                    return !!e(t)
                } catch (n) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t),
                    t = null
                }
            }
            function o(e, t) {
                for (var n = e.split("|"), i = e.length; i--; )
                    _.attrHandle[n[i]] = t
            }
            function a(e, t) {
                var n = t && e
                  , i = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || X) - (~e.sourceIndex || X);
                if (i)
                    return i;
                if (n)
                    for (; n = n.nextSibling; )
                        if (n === t)
                            return -1;
                return e ? 1 : -1
            }
            function s(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return "input" === n && t.type === e
                }
            }
            function l(e) {
                return function(t) {
                    var n = t.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && t.type === e
                }
            }
            function c(e) {
                return i(function(t) {
                    return t = +t,
                    i(function(n, i) {
                        for (var r, o = e([], n.length, t), a = o.length; a--; )
                            n[r = o[a]] && (n[r] = !(i[r] = n[r]))
                    })
                })
            }
            function u(e) {
                return e && "undefined" != typeof e.getElementsByTagName && e
            }
            function h() {}
            function d(e) {
                for (var t = 0, n = e.length, i = ""; n > t; t++)
                    i += e[t].value;
                return i
            }
            function f(e, t, n) {
                var i = t.dir
                  , r = n && "parentNode" === i
                  , o = U++;
                return t.first ? function(t, n, o) {
                    for (; t = t[i]; )
                        if (1 === t.nodeType || r)
                            return e(t, n, o)
                }
                : function(t, n, a) {
                    var s, l, c = [z, o];
                    if (a) {
                        for (; t = t[i]; )
                            if ((1 === t.nodeType || r) && e(t, n, a))
                                return !0
                    } else
                        for (; t = t[i]; )
                            if (1 === t.nodeType || r) {
                                if (l = t[j] || (t[j] = {}),
                                (s = l[i]) && s[0] === z && s[1] === o)
                                    return c[2] = s[2];
                                if (l[i] = c,
                                c[2] = e(t, n, a))
                                    return !0
                            }
                }
            }
            function p(e) {
                return e.length > 1 ? function(t, n, i) {
                    for (var r = e.length; r--; )
                        if (!e[r](t, n, i))
                            return !1;
                    return !0
                }
                : e[0]
            }
            function m(e, n, i) {
                for (var r = 0, o = n.length; o > r; r++)
                    t(e, n[r], i);
                return i
            }
            function v(e, t, n, i, r) {
                for (var o, a = [], s = 0, l = e.length, c = null != t; l > s; s++)
                    (o = e[s]) && (!n || n(o, i, r)) && (a.push(o),
                    c && t.push(s));
                return a
            }
            function g(e, t, n, r, o, a) {
                return r && !r[j] && (r = g(r)),
                o && !o[j] && (o = g(o, a)),
                i(function(i, a, s, l) {
                    var c, u, h, d = [], f = [], p = a.length, g = i || m(t || "*", s.nodeType ? [s] : s, []), y = !e || !i && t ? g : v(g, d, e, s, l), b = n ? o || (i ? e : p || r) ? [] : a : y;
                    if (n && n(y, b, s, l),
                    r)
                        for (c = v(b, f),
                        r(c, [], s, l),
                        u = c.length; u--; )
                            (h = c[u]) && (b[f[u]] = !(y[f[u]] = h));
                    if (i) {
                        if (o || e) {
                            if (o) {
                                for (c = [],
                                u = b.length; u--; )
                                    (h = b[u]) && c.push(y[u] = h);
                                o(null, b = [], c, l)
                            }
                            for (u = b.length; u--; )
                                (h = b[u]) && (c = o ? ee(i, h) : d[u]) > -1 && (i[c] = !(a[c] = h))
                        }
                    } else
                        b = v(b === a ? b.splice(p, b.length) : b),
                        o ? o(null, a, b, l) : K.apply(a, b)
                })
            }
            function y(e) {
                for (var t, n, i, r = e.length, o = _.relative[e[0].type], a = o || _.relative[" "], s = o ? 1 : 0, l = f(function(e) {
                    return e === t
                }, a, !0), c = f(function(e) {
                    return ee(t, e) > -1
                }, a, !0), u = [function(e, n, i) {
                    var r = !o && (i || n !== k) || ((t = n).nodeType ? l(e, n, i) : c(e, n, i));
                    return t = null,
                    r
                }
                ]; r > s; s++)
                    if (n = _.relative[e[s].type])
                        u = [f(p(u), n)];
                    else {
                        if (n = _.filter[e[s].type].apply(null, e[s].matches),
                        n[j]) {
                            for (i = ++s; r > i && !_.relative[e[i].type]; i++)
                                ;
                            return g(s > 1 && p(u), s > 1 && d(e.slice(0, s - 1).concat({
                                value: " " === e[s - 2].type ? "*" : ""
                            })).replace(le, "$1"), n, i > s && y(e.slice(s, i)), r > i && y(e = e.slice(i)), r > i && d(e))
                        }
                        u.push(n)
                    }
                return p(u)
            }
            function b(e, n) {
                var r = n.length > 0
                  , o = e.length > 0
                  , a = function(i, a, s, l, c) {
                    var u, h, d, f = 0, p = "0", m = i && [], g = [], y = k, b = i || o && _.find.TAG("*", c), x = z += null == y ? 1 : Math.random() || .1, w = b.length;
                    for (c && (k = a !== O && a); p !== w && null != (u = b[p]); p++) {
                        if (o && u) {
                            for (h = 0; d = e[h++]; )
                                if (d(u, a, s)) {
                                    l.push(u);
                                    break
                                }
                            c && (z = x)
                        }
                        r && ((u = !d && u) && f--,
                        i && m.push(u))
                    }
                    if (f += p,
                    r && p !== f) {
                        for (h = 0; d = n[h++]; )
                            d(m, g, a, s);
                        if (i) {
                            if (f > 0)
                                for (; p--; )
                                    m[p] || g[p] || (g[p] = Z.call(l));
                            g = v(g)
                        }
                        K.apply(l, g),
                        c && !i && g.length > 0 && f + n.length > 1 && t.uniqueSort(l)
                    }
                    return c && (z = x,
                    k = y),
                    m
                };
                return r ? i(a) : a
            }
            var x, w, _, S, M, C, T, E, k, A, P, L, O, R, F, B, D, I, N, j = "sizzle" + 1 * new Date, V = e.document, z = 0, U = 0, H = n(), G = n(), W = n(), q = function(e, t) {
                return e === t && (P = !0),
                0
            }, X = 1 << 31, Y = {}.hasOwnProperty, J = [], Z = J.pop, Q = J.push, K = J.push, $ = J.slice, ee = function(e, t) {
                for (var n = 0, i = e.length; i > n; n++)
                    if (e[n] === t)
                        return n;
                return -1
            }, te = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", ne = "[\\x20\\t\\r\\n\\f]", ie = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", re = ie.replace("w", "w#"), oe = "\\[" + ne + "*(" + ie + ")(?:" + ne + "*([*^$|!~]?=)" + ne + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + re + "))|)" + ne + "*\\]", ae = ":(" + ie + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + oe + ")*)|.*)\\)|)", se = new RegExp(ne + "+","g"), le = new RegExp("^" + ne + "+|((?:^|[^\\\\])(?:\\\\.)*)" + ne + "+$","g"), ce = new RegExp("^" + ne + "*," + ne + "*"), ue = new RegExp("^" + ne + "*([>+~]|" + ne + ")" + ne + "*"), he = new RegExp("=" + ne + "*([^\\]'\"]*?)" + ne + "*\\]","g"), de = new RegExp(ae), fe = new RegExp("^" + re + "$"), pe = {
                ID: new RegExp("^#(" + ie + ")"),
                CLASS: new RegExp("^\\.(" + ie + ")"),
                TAG: new RegExp("^(" + ie.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + oe),
                PSEUDO: new RegExp("^" + ae),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + ne + "*(even|odd|(([+-]|)(\\d*)n|)" + ne + "*(?:([+-]|)" + ne + "*(\\d+)|))" + ne + "*\\)|)","i"),
                bool: new RegExp("^(?:" + te + ")$","i"),
                needsContext: new RegExp("^" + ne + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + ne + "*((?:-\\d)?\\d*)" + ne + "*\\)|)(?=[^-]|$)","i")
            }, me = /^(?:input|select|textarea|button)$/i, ve = /^h\d$/i, ge = /^[^{]+\{\s*\[native \w/, ye = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, be = /[+~]/, xe = /'|\\/g, we = new RegExp("\\\\([\\da-f]{1,6}" + ne + "?|(" + ne + ")|.)","ig"), _e = function(e, t, n) {
                var i = "0x" + t - 65536;
                return i !== i || n ? t : 0 > i ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320)
            }, Se = function() {
                L()
            };
            try {
                K.apply(J = $.call(V.childNodes), V.childNodes),
                J[V.childNodes.length].nodeType
            } catch (Me) {
                K = {
                    apply: J.length ? function(e, t) {
                        Q.apply(e, $.call(t))
                    }
                    : function(e, t) {
                        for (var n = e.length, i = 0; e[n++] = t[i++]; )
                            ;
                        e.length = n - 1
                    }
                }
            }
            w = t.support = {},
            M = t.isXML = function(e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return t ? "HTML" !== t.nodeName : !1
            }
            ,
            L = t.setDocument = function(e) {
                var t, n, i = e ? e.ownerDocument || e : V;
                return i !== O && 9 === i.nodeType && i.documentElement ? (O = i,
                R = i.documentElement,
                n = i.defaultView,
                n && n !== n.top && (n.addEventListener ? n.addEventListener("unload", Se, !1) : n.attachEvent && n.attachEvent("onunload", Se)),
                F = !M(i),
                w.attributes = r(function(e) {
                    return e.className = "i",
                    !e.getAttribute("className")
                }),
                w.getElementsByTagName = r(function(e) {
                    return e.appendChild(i.createComment("")),
                    !e.getElementsByTagName("*").length
                }),
                w.getElementsByClassName = ge.test(i.getElementsByClassName),
                w.getById = r(function(e) {
                    return R.appendChild(e).id = j,
                    !i.getElementsByName || !i.getElementsByName(j).length
                }),
                w.getById ? (_.find.ID = function(e, t) {
                    if ("undefined" != typeof t.getElementById && F) {
                        var n = t.getElementById(e);
                        return n && n.parentNode ? [n] : []
                    }
                }
                ,
                _.filter.ID = function(e) {
                    var t = e.replace(we, _e);
                    return function(e) {
                        return e.getAttribute("id") === t
                    }
                }
                ) : (delete _.find.ID,
                _.filter.ID = function(e) {
                    var t = e.replace(we, _e);
                    return function(e) {
                        var n = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                        return n && n.value === t
                    }
                }
                ),
                _.find.TAG = w.getElementsByTagName ? function(e, t) {
                    return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName(e) : w.qsa ? t.querySelectorAll(e) : void 0
                }
                : function(e, t) {
                    var n, i = [], r = 0, o = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; n = o[r++]; )
                            1 === n.nodeType && i.push(n);
                        return i
                    }
                    return o
                }
                ,
                _.find.CLASS = w.getElementsByClassName && function(e, t) {
                    return F ? t.getElementsByClassName(e) : void 0
                }
                ,
                D = [],
                B = [],
                (w.qsa = ge.test(i.querySelectorAll)) && (r(function(e) {
                    R.appendChild(e).innerHTML = "<a id='" + j + "'></a><select id='" + j + "-\f]' msallowcapture=''><option selected=''></option></select>",
                    e.querySelectorAll("[msallowcapture^='']").length && B.push("[*^$]=" + ne + "*(?:''|\"\")"),
                    e.querySelectorAll("[selected]").length || B.push("\\[" + ne + "*(?:value|" + te + ")"),
                    e.querySelectorAll("[id~=" + j + "-]").length || B.push("~="),
                    e.querySelectorAll(":checked").length || B.push(":checked"),
                    e.querySelectorAll("a#" + j + "+*").length || B.push(".#.+[+~]")
                }),
                r(function(e) {
                    var t = i.createElement("input");
                    t.setAttribute("type", "hidden"),
                    e.appendChild(t).setAttribute("name", "D"),
                    e.querySelectorAll("[name=d]").length && B.push("name" + ne + "*[*^$|!~]?="),
                    e.querySelectorAll(":enabled").length || B.push(":enabled", ":disabled"),
                    e.querySelectorAll("*,:x"),
                    B.push(",.*:")
                })),
                (w.matchesSelector = ge.test(I = R.matches || R.webkitMatchesSelector || R.mozMatchesSelector || R.oMatchesSelector || R.msMatchesSelector)) && r(function(e) {
                    w.disconnectedMatch = I.call(e, "div"),
                    I.call(e, "[s!='']:x"),
                    D.push("!=", ae)
                }),
                B = B.length && new RegExp(B.join("|")),
                D = D.length && new RegExp(D.join("|")),
                t = ge.test(R.compareDocumentPosition),
                N = t || ge.test(R.contains) ? function(e, t) {
                    var n = 9 === e.nodeType ? e.documentElement : e
                      , i = t && t.parentNode;
                    return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i)))
                }
                : function(e, t) {
                    if (t)
                        for (; t = t.parentNode; )
                            if (t === e)
                                return !0;
                    return !1
                }
                ,
                q = t ? function(e, t) {
                    if (e === t)
                        return P = !0,
                        0;
                    var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return n ? n : (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1,
                    1 & n || !w.sortDetached && t.compareDocumentPosition(e) === n ? e === i || e.ownerDocument === V && N(V, e) ? -1 : t === i || t.ownerDocument === V && N(V, t) ? 1 : A ? ee(A, e) - ee(A, t) : 0 : 4 & n ? -1 : 1)
                }
                : function(e, t) {
                    if (e === t)
                        return P = !0,
                        0;
                    var n, r = 0, o = e.parentNode, s = t.parentNode, l = [e], c = [t];
                    if (!o || !s)
                        return e === i ? -1 : t === i ? 1 : o ? -1 : s ? 1 : A ? ee(A, e) - ee(A, t) : 0;
                    if (o === s)
                        return a(e, t);
                    for (n = e; n = n.parentNode; )
                        l.unshift(n);
                    for (n = t; n = n.parentNode; )
                        c.unshift(n);
                    for (; l[r] === c[r]; )
                        r++;
                    return r ? a(l[r], c[r]) : l[r] === V ? -1 : c[r] === V ? 1 : 0
                }
                ,
                i) : O
            }
            ,
            t.matches = function(e, n) {
                return t(e, null, null, n)
            }
            ,
            t.matchesSelector = function(e, n) {
                if ((e.ownerDocument || e) !== O && L(e),
                n = n.replace(he, "='$1']"),
                w.matchesSelector && F && (!D || !D.test(n)) && (!B || !B.test(n)))
                    try {
                        var i = I.call(e, n);
                        if (i || w.disconnectedMatch || e.document && 11 !== e.document.nodeType)
                            return i
                    } catch (r) {}
                return t(n, O, null, [e]).length > 0
            }
            ,
            t.contains = function(e, t) {
                return (e.ownerDocument || e) !== O && L(e),
                N(e, t)
            }
            ,
            t.attr = function(e, t) {
                (e.ownerDocument || e) !== O && L(e);
                var n = _.attrHandle[t.toLowerCase()]
                  , i = n && Y.call(_.attrHandle, t.toLowerCase()) ? n(e, t, !F) : void 0;
                return void 0 !== i ? i : w.attributes || !F ? e.getAttribute(t) : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
            }
            ,
            t.error = function(e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }
            ,
            t.uniqueSort = function(e) {
                var t, n = [], i = 0, r = 0;
                if (P = !w.detectDuplicates,
                A = !w.sortStable && e.slice(0),
                e.sort(q),
                P) {
                    for (; t = e[r++]; )
                        t === e[r] && (i = n.push(r));
                    for (; i--; )
                        e.splice(n[i], 1)
                }
                return A = null,
                e
            }
            ,
            S = t.getText = function(e) {
                var t, n = "", i = 0, r = e.nodeType;
                if (r) {
                    if (1 === r || 9 === r || 11 === r) {
                        if ("string" == typeof e.textContent)
                            return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling)
                            n += S(e)
                    } else if (3 === r || 4 === r)
                        return e.nodeValue
                } else
                    for (; t = e[i++]; )
                        n += S(t);
                return n
            }
            ,
            _ = t.selectors = {
                cacheLength: 50,
                createPseudo: i,
                match: pe,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(e) {
                        return e[1] = e[1].replace(we, _e),
                        e[3] = (e[3] || e[4] || e[5] || "").replace(we, _e),
                        "~=" === e[2] && (e[3] = " " + e[3] + " "),
                        e.slice(0, 4)
                    },
                    CHILD: function(e) {
                        return e[1] = e[1].toLowerCase(),
                        "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]),
                        e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])),
                        e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]),
                        e
                    },
                    PSEUDO: function(e) {
                        var t, n = !e[6] && e[2];
                        return pe.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && de.test(n) && (t = C(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t),
                        e[2] = n.slice(0, t)),
                        e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(e) {
                        var t = e.replace(we, _e).toLowerCase();
                        return "*" === e ? function() {
                            return !0
                        }
                        : function(e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    },
                    CLASS: function(e) {
                        var t = H[e + " "];
                        return t || (t = new RegExp("(^|" + ne + ")" + e + "(" + ne + "|$)")) && H(e, function(e) {
                            return t.test("string" == typeof e.className && e.className || "undefined" != typeof e.getAttribute && e.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(e, n, i) {
                        return function(r) {
                            var o = t.attr(r, e);
                            return null == o ? "!=" === n : n ? (o += "",
                            "=" === n ? o === i : "!=" === n ? o !== i : "^=" === n ? i && 0 === o.indexOf(i) : "*=" === n ? i && o.indexOf(i) > -1 : "$=" === n ? i && o.slice(-i.length) === i : "~=" === n ? (" " + o.replace(se, " ") + " ").indexOf(i) > -1 : "|=" === n ? o === i || o.slice(0, i.length + 1) === i + "-" : !1) : !0
                        }
                    },
                    CHILD: function(e, t, n, i, r) {
                        var o = "nth" !== e.slice(0, 3)
                          , a = "last" !== e.slice(-4)
                          , s = "of-type" === t;
                        return 1 === i && 0 === r ? function(e) {
                            return !!e.parentNode
                        }
                        : function(t, n, l) {
                            var c, u, h, d, f, p, m = o !== a ? "nextSibling" : "previousSibling", v = t.parentNode, g = s && t.nodeName.toLowerCase(), y = !l && !s;
                            if (v) {
                                if (o) {
                                    for (; m; ) {
                                        for (h = t; h = h[m]; )
                                            if (s ? h.nodeName.toLowerCase() === g : 1 === h.nodeType)
                                                return !1;
                                        p = m = "only" === e && !p && "nextSibling"
                                    }
                                    return !0
                                }
                                if (p = [a ? v.firstChild : v.lastChild],
                                a && y) {
                                    for (u = v[j] || (v[j] = {}),
                                    c = u[e] || [],
                                    f = c[0] === z && c[1],
                                    d = c[0] === z && c[2],
                                    h = f && v.childNodes[f]; h = ++f && h && h[m] || (d = f = 0) || p.pop(); )
                                        if (1 === h.nodeType && ++d && h === t) {
                                            u[e] = [z, f, d];
                                            break
                                        }
                                } else if (y && (c = (t[j] || (t[j] = {}))[e]) && c[0] === z)
                                    d = c[1];
                                else
                                    for (; (h = ++f && h && h[m] || (d = f = 0) || p.pop()) && ((s ? h.nodeName.toLowerCase() !== g : 1 !== h.nodeType) || !++d || (y && ((h[j] || (h[j] = {}))[e] = [z, d]),
                                    h !== t)); )
                                        ;
                                return d -= r,
                                d === i || d % i === 0 && d / i >= 0
                            }
                        }
                    },
                    PSEUDO: function(e, n) {
                        var r, o = _.pseudos[e] || _.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                        return o[j] ? o(n) : o.length > 1 ? (r = [e, e, "", n],
                        _.setFilters.hasOwnProperty(e.toLowerCase()) ? i(function(e, t) {
                            for (var i, r = o(e, n), a = r.length; a--; )
                                i = ee(e, r[a]),
                                e[i] = !(t[i] = r[a])
                        }) : function(e) {
                            return o(e, 0, r)
                        }
                        ) : o
                    }
                },
                pseudos: {
                    not: i(function(e) {
                        var t = []
                          , n = []
                          , r = T(e.replace(le, "$1"));
                        return r[j] ? i(function(e, t, n, i) {
                            for (var o, a = r(e, null, i, []), s = e.length; s--; )
                                (o = a[s]) && (e[s] = !(t[s] = o))
                        }) : function(e, i, o) {
                            return t[0] = e,
                            r(t, null, o, n),
                            t[0] = null,
                            !n.pop()
                        }
                    }),
                    has: i(function(e) {
                        return function(n) {
                            return t(e, n).length > 0
                        }
                    }),
                    contains: i(function(e) {
                        return e = e.replace(we, _e),
                        function(t) {
                            return (t.textContent || t.innerText || S(t)).indexOf(e) > -1
                        }
                    }),
                    lang: i(function(e) {
                        return fe.test(e || "") || t.error("unsupported lang: " + e),
                        e = e.replace(we, _e).toLowerCase(),
                        function(t) {
                            var n;
                            do
                                if (n = F ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang"))
                                    return n = n.toLowerCase(),
                                    n === e || 0 === n.indexOf(e + "-");
                            while ((t = t.parentNode) && 1 === t.nodeType);
                            return !1
                        }
                    }),
                    target: function(t) {
                        var n = e.location && e.location.hash;
                        return n && n.slice(1) === t.id
                    },
                    root: function(e) {
                        return e === R
                    },
                    focus: function(e) {
                        return e === O.activeElement && (!O.hasFocus || O.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function(e) {
                        return e.disabled === !1
                    },
                    disabled: function(e) {
                        return e.disabled === !0
                    },
                    checked: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    },
                    selected: function(e) {
                        return e.parentNode && e.parentNode.selectedIndex,
                        e.selected === !0
                    },
                    empty: function(e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeType < 6)
                                return !1;
                        return !0
                    },
                    parent: function(e) {
                        return !_.pseudos.empty(e)
                    },
                    header: function(e) {
                        return ve.test(e.nodeName)
                    },
                    input: function(e) {
                        return me.test(e.nodeName)
                    },
                    button: function(e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    },
                    text: function(e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                    },
                    first: c(function() {
                        return [0]
                    }),
                    last: c(function(e, t) {
                        return [t - 1]
                    }),
                    eq: c(function(e, t, n) {
                        return [0 > n ? n + t : n]
                    }),
                    even: c(function(e, t) {
                        for (var n = 0; t > n; n += 2)
                            e.push(n);
                        return e
                    }),
                    odd: c(function(e, t) {
                        for (var n = 1; t > n; n += 2)
                            e.push(n);
                        return e
                    }),
                    lt: c(function(e, t, n) {
                        for (var i = 0 > n ? n + t : n; --i >= 0; )
                            e.push(i);
                        return e
                    }),
                    gt: c(function(e, t, n) {
                        for (var i = 0 > n ? n + t : n; ++i < t; )
                            e.push(i);
                        return e
                    })
                }
            },
            _.pseudos.nth = _.pseudos.eq;
            for (x in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            })
                _.pseudos[x] = s(x);
            for (x in {
                submit: !0,
                reset: !0
            })
                _.pseudos[x] = l(x);
            return h.prototype = _.filters = _.pseudos,
            _.setFilters = new h,
            C = t.tokenize = function(e, n) {
                var i, r, o, a, s, l, c, u = G[e + " "];
                if (u)
                    return n ? 0 : u.slice(0);
                for (s = e,
                l = [],
                c = _.preFilter; s; ) {
                    (!i || (r = ce.exec(s))) && (r && (s = s.slice(r[0].length) || s),
                    l.push(o = [])),
                    i = !1,
                    (r = ue.exec(s)) && (i = r.shift(),
                    o.push({
                        value: i,
                        type: r[0].replace(le, " ")
                    }),
                    s = s.slice(i.length));
                    for (a in _.filter)
                        !(r = pe[a].exec(s)) || c[a] && !(r = c[a](r)) || (i = r.shift(),
                        o.push({
                            value: i,
                            type: a,
                            matches: r
                        }),
                        s = s.slice(i.length));
                    if (!i)
                        break
                }
                return n ? s.length : s ? t.error(e) : G(e, l).slice(0)
            }
            ,
            T = t.compile = function(e, t) {
                var n, i = [], r = [], o = W[e + " "];
                if (!o) {
                    for (t || (t = C(e)),
                    n = t.length; n--; )
                        o = y(t[n]),
                        o[j] ? i.push(o) : r.push(o);
                    o = W(e, b(r, i)),
                    o.selector = e
                }
                return o
            }
            ,
            E = t.select = function(e, t, n, i) {
                var r, o, a, s, l, c = "function" == typeof e && e, h = !i && C(e = c.selector || e);
                if (n = n || [],
                1 === h.length) {
                    if (o = h[0] = h[0].slice(0),
                    o.length > 2 && "ID" === (a = o[0]).type && w.getById && 9 === t.nodeType && F && _.relative[o[1].type]) {
                        if (t = (_.find.ID(a.matches[0].replace(we, _e), t) || [])[0],
                        !t)
                            return n;
                        c && (t = t.parentNode),
                        e = e.slice(o.shift().value.length)
                    }
                    for (r = pe.needsContext.test(e) ? 0 : o.length; r-- && (a = o[r],
                    !_.relative[s = a.type]); )
                        if ((l = _.find[s]) && (i = l(a.matches[0].replace(we, _e), be.test(o[0].type) && u(t.parentNode) || t))) {
                            if (o.splice(r, 1),
                            e = i.length && d(o),
                            !e)
                                return K.apply(n, i),
                                n;
                            break
                        }
                }
                return (c || T(e, h))(i, t, !F, n, be.test(e) && u(t.parentNode) || t),
                n
            }
            ,
            w.sortStable = j.split("").sort(q).join("") === j,
            w.detectDuplicates = !!P,
            L(),
            w.sortDetached = r(function(e) {
                return 1 & e.compareDocumentPosition(O.createElement("div"))
            }),
            r(function(e) {
                return e.innerHTML = "<a href='#'></a>",
                "#" === e.firstChild.getAttribute("href")
            }) || o("type|href|height|width", function(e, t, n) {
                return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
            }),
            w.attributes && r(function(e) {
                return e.innerHTML = "<input/>",
                e.firstChild.setAttribute("value", ""),
                "" === e.firstChild.getAttribute("value")
            }) || o("value", function(e, t, n) {
                return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
            }),
            r(function(e) {
                return null == e.getAttribute("disabled")
            }) || o(te, function(e, t, n) {
                var i;
                return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
            }),
            t
        }(n);
        ie.find = le,
        ie.expr = le.selectors,
        ie.expr[":"] = ie.expr.pseudos,
        ie.unique = le.uniqueSort,
        ie.text = le.getText,
        ie.isXMLDoc = le.isXML,
        ie.contains = le.contains;
        var ce = ie.expr.match.needsContext
          , ue = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
          , he = /^.[^:#\[\.,]*$/;
        ie.filter = function(e, t, n) {
            var i = t[0];
            return n && (e = ":not(" + e + ")"),
            1 === t.length && 1 === i.nodeType ? ie.find.matchesSelector(i, e) ? [i] : [] : ie.find.matches(e, ie.grep(t, function(e) {
                return 1 === e.nodeType
            }))
        }
        ,
        ie.fn.extend({
            find: function(e) {
                var t, n = this.length, i = [], r = this;
                if ("string" != typeof e)
                    return this.pushStack(ie(e).filter(function() {
                        for (t = 0; n > t; t++)
                            if (ie.contains(r[t], this))
                                return !0
                    }));
                for (t = 0; n > t; t++)
                    ie.find(e, r[t], i);
                return i = this.pushStack(n > 1 ? ie.unique(i) : i),
                i.selector = this.selector ? this.selector + " " + e : e,
                i
            },
            filter: function(e) {
                return this.pushStack(s(this, e || [], !1))
            },
            not: function(e) {
                return this.pushStack(s(this, e || [], !0))
            },
            is: function(e) {
                return !!s(this, "string" == typeof e && ce.test(e) ? ie(e) : e || [], !1).length
            }
        });
        var de, fe = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, pe = ie.fn.init = function(e, t) {
            var n, i;
            if (!e)
                return this;
            if ("string" == typeof e) {
                if (n = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : fe.exec(e),
                !n || !n[1] && t)
                    return !t || t.jquery ? (t || de).find(e) : this.constructor(t).find(e);
                if (n[1]) {
                    if (t = t instanceof ie ? t[0] : t,
                    ie.merge(this, ie.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : te, !0)),
                    ue.test(n[1]) && ie.isPlainObject(t))
                        for (n in t)
                            ie.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]);
                    return this
                }
                return i = te.getElementById(n[2]),
                i && i.parentNode && (this.length = 1,
                this[0] = i),
                this.context = te,
                this.selector = e,
                this
            }
            return e.nodeType ? (this.context = this[0] = e,
            this.length = 1,
            this) : ie.isFunction(e) ? "undefined" != typeof de.ready ? de.ready(e) : e(ie) : (void 0 !== e.selector && (this.selector = e.selector,
            this.context = e.context),
            ie.makeArray(e, this))
        }
        ;
        pe.prototype = ie.fn,
        de = ie(te);
        var me = /^(?:parents|prev(?:Until|All))/
          , ve = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
        ie.extend({
            dir: function(e, t, n) {
                for (var i = [], r = void 0 !== n; (e = e[t]) && 9 !== e.nodeType; )
                    if (1 === e.nodeType) {
                        if (r && ie(e).is(n))
                            break;
                        i.push(e)
                    }
                return i
            },
            sibling: function(e, t) {
                for (var n = []; e; e = e.nextSibling)
                    1 === e.nodeType && e !== t && n.push(e);
                return n
            }
        }),
        ie.fn.extend({
            has: function(e) {
                var t = ie(e, this)
                  , n = t.length;
                return this.filter(function() {
                    for (var e = 0; n > e; e++)
                        if (ie.contains(this, t[e]))
                            return !0
                })
            },
            closest: function(e, t) {
                for (var n, i = 0, r = this.length, o = [], a = ce.test(e) || "string" != typeof e ? ie(e, t || this.context) : 0; r > i; i++)
                    for (n = this[i]; n && n !== t; n = n.parentNode)
                        if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && ie.find.matchesSelector(n, e))) {
                            o.push(n);
                            break
                        }
                return this.pushStack(o.length > 1 ? ie.unique(o) : o)
            },
            index: function(e) {
                return e ? "string" == typeof e ? Z.call(ie(e), this[0]) : Z.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                return this.pushStack(ie.unique(ie.merge(this.get(), ie(e, t))))
            },
            addBack: function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }),
        ie.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            },
            parents: function(e) {
                return ie.dir(e, "parentNode")
            },
            parentsUntil: function(e, t, n) {
                return ie.dir(e, "parentNode", n)
            },
            next: function(e) {
                return l(e, "nextSibling")
            },
            prev: function(e) {
                return l(e, "previousSibling")
            },
            nextAll: function(e) {
                return ie.dir(e, "nextSibling")
            },
            prevAll: function(e) {
                return ie.dir(e, "previousSibling")
            },
            nextUntil: function(e, t, n) {
                return ie.dir(e, "nextSibling", n)
            },
            prevUntil: function(e, t, n) {
                return ie.dir(e, "previousSibling", n)
            },
            siblings: function(e) {
                return ie.sibling((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return ie.sibling(e.firstChild)
            },
            contents: function(e) {
                return e.contentDocument || ie.merge([], e.childNodes)
            }
        }, function(e, t) {
            ie.fn[e] = function(n, i) {
                var r = ie.map(this, t, n);
                return "Until" !== e.slice(-5) && (i = n),
                i && "string" == typeof i && (r = ie.filter(i, r)),
                this.length > 1 && (ve[e] || ie.unique(r),
                me.test(e) && r.reverse()),
                this.pushStack(r)
            }
        });
        var ge = /\S+/g
          , ye = {};
        ie.Callbacks = function(e) {
            e = "string" == typeof e ? ye[e] || c(e) : ie.extend({}, e);
            var t, n, i, r, o, a, s = [], l = !e.once && [], u = function(c) {
                for (t = e.memory && c,
                n = !0,
                a = r || 0,
                r = 0,
                o = s.length,
                i = !0; s && o > a; a++)
                    if (s[a].apply(c[0], c[1]) === !1 && e.stopOnFalse) {
                        t = !1;
                        break
                    }
                i = !1,
                s && (l ? l.length && u(l.shift()) : t ? s = [] : h.disable())
            }, h = {
                add: function() {
                    if (s) {
                        var n = s.length;
                        !function a(t) {
                            ie.each(t, function(t, n) {
                                var i = ie.type(n);
                                "function" === i ? e.unique && h.has(n) || s.push(n) : n && n.length && "string" !== i && a(n)
                            })
                        }(arguments),
                        i ? o = s.length : t && (r = n,
                        u(t))
                    }
                    return this
                },
                remove: function() {
                    return s && ie.each(arguments, function(e, t) {
                        for (var n; (n = ie.inArray(t, s, n)) > -1; )
                            s.splice(n, 1),
                            i && (o >= n && o--,
                            a >= n && a--)
                    }),
                    this
                },
                has: function(e) {
                    return e ? ie.inArray(e, s) > -1 : !(!s || !s.length)
                },
                empty: function() {
                    return s = [],
                    o = 0,
                    this
                },
                disable: function() {
                    return s = l = t = void 0,
                    this
                },
                disabled: function() {
                    return !s
                },
                lock: function() {
                    return l = void 0,
                    t || h.disable(),
                    this
                },
                locked: function() {
                    return !l
                },
                fireWith: function(e, t) {
                    return !s || n && !l || (t = t || [],
                    t = [e, t.slice ? t.slice() : t],
                    i ? l.push(t) : u(t)),
                    this
                },
                fire: function() {
                    return h.fireWith(this, arguments),
                    this
                },
                fired: function() {
                    return !!n
                }
            };
            return h
        }
        ,
        ie.extend({
            Deferred: function(e) {
                var t = [["resolve", "done", ie.Callbacks("once memory"), "resolved"], ["reject", "fail", ie.Callbacks("once memory"), "rejected"], ["notify", "progress", ie.Callbacks("memory")]]
                  , n = "pending"
                  , i = {
                    state: function() {
                        return n
                    },
                    always: function() {
                        return r.done(arguments).fail(arguments),
                        this
                    },
                    then: function() {
                        var e = arguments;
                        return ie.Deferred(function(n) {
                            ie.each(t, function(t, o) {
                                var a = ie.isFunction(e[t]) && e[t];
                                r[o[1]](function() {
                                    var e = a && a.apply(this, arguments);
                                    e && ie.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o[0] + "With"](this === i ? n.promise() : this, a ? [e] : arguments)
                                })
                            }),
                            e = null
                        }).promise()
                    },
                    promise: function(e) {
                        return null != e ? ie.extend(e, i) : i
                    }
                }
                  , r = {};
                return i.pipe = i.then,
                ie.each(t, function(e, o) {
                    var a = o[2]
                      , s = o[3];
                    i[o[1]] = a.add,
                    s && a.add(function() {
                        n = s
                    }, t[1 ^ e][2].disable, t[2][2].lock),
                    r[o[0]] = function() {
                        return r[o[0] + "With"](this === r ? i : this, arguments),
                        this
                    }
                    ,
                    r[o[0] + "With"] = a.fireWith
                }),
                i.promise(r),
                e && e.call(r, r),
                r
            },
            when: function(e) {
                var t, n, i, r = 0, o = X.call(arguments), a = o.length, s = 1 !== a || e && ie.isFunction(e.promise) ? a : 0, l = 1 === s ? e : ie.Deferred(), c = function(e, n, i) {
                    return function(r) {
                        n[e] = this,
                        i[e] = arguments.length > 1 ? X.call(arguments) : r,
                        i === t ? l.notifyWith(n, i) : --s || l.resolveWith(n, i)
                    }
                };
                if (a > 1)
                    for (t = new Array(a),
                    n = new Array(a),
                    i = new Array(a); a > r; r++)
                        o[r] && ie.isFunction(o[r].promise) ? o[r].promise().done(c(r, i, o)).fail(l.reject).progress(c(r, n, t)) : --s;
                return s || l.resolveWith(i, o),
                l.promise()
            }
        });
        var be;
        ie.fn.ready = function(e) {
            return ie.ready.promise().done(e),
            this
        }
        ,
        ie.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(e) {
                e ? ie.readyWait++ : ie.ready(!0)
            },
            ready: function(e) {
                (e === !0 ? --ie.readyWait : ie.isReady) || (ie.isReady = !0,
                e !== !0 && --ie.readyWait > 0 || (be.resolveWith(te, [ie]),
                ie.fn.triggerHandler && (ie(te).triggerHandler("ready"),
                ie(te).off("ready"))))
            }
        }),
        ie.ready.promise = function(e) {
            return be || (be = ie.Deferred(),
            "complete" === te.readyState ? setTimeout(ie.ready) : (te.addEventListener("DOMContentLoaded", u, !1),
            n.addEventListener("load", u, !1))),
            be.promise(e)
        }
        ,
        ie.ready.promise();
        var xe = ie.access = function(e, t, n, i, r, o, a) {
            var s = 0
              , l = e.length
              , c = null == n;
            if ("object" === ie.type(n)) {
                r = !0;
                for (s in n)
                    ie.access(e, t, s, n[s], !0, o, a)
            } else if (void 0 !== i && (r = !0,
            ie.isFunction(i) || (a = !0),
            c && (a ? (t.call(e, i),
            t = null) : (c = t,
            t = function(e, t, n) {
                return c.call(ie(e), n)
            }
            )),
            t))
                for (; l > s; s++)
                    t(e[s], n, a ? i : i.call(e[s], s, t(e[s], n)));
            return r ? e : c ? t.call(e) : l ? t(e[0], n) : o
        }
        ;
        ie.acceptData = function(e) {
            return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
        }
        ,
        h.uid = 1,
        h.accepts = ie.acceptData,
        h.prototype = {
            key: function(e) {
                if (!h.accepts(e))
                    return 0;
                var t = {}
                  , n = e[this.expando];
                if (!n) {
                    n = h.uid++;
                    try {
                        t[this.expando] = {
                            value: n
                        },
                        Object.defineProperties(e, t)
                    } catch (i) {
                        t[this.expando] = n,
                        ie.extend(e, t)
                    }
                }
                return this.cache[n] || (this.cache[n] = {}),
                n
            },
            set: function(e, t, n) {
                var i, r = this.key(e), o = this.cache[r];
                if ("string" == typeof t)
                    o[t] = n;
                else if (ie.isEmptyObject(o))
                    ie.extend(this.cache[r], t);
                else
                    for (i in t)
                        o[i] = t[i];
                return o
            },
            get: function(e, t) {
                var n = this.cache[this.key(e)];
                return void 0 === t ? n : n[t]
            },
            access: function(e, t, n) {
                var i;
                return void 0 === t || t && "string" == typeof t && void 0 === n ? (i = this.get(e, t),
                void 0 !== i ? i : this.get(e, ie.camelCase(t))) : (this.set(e, t, n),
                void 0 !== n ? n : t)
            },
            remove: function(e, t) {
                var n, i, r, o = this.key(e), a = this.cache[o];
                if (void 0 === t)
                    this.cache[o] = {};
                else {
                    ie.isArray(t) ? i = t.concat(t.map(ie.camelCase)) : (r = ie.camelCase(t),
                    t in a ? i = [t, r] : (i = r,
                    i = i in a ? [i] : i.match(ge) || [])),
                    n = i.length;
                    for (; n--; )
                        delete a[i[n]]
                }
            },
            hasData: function(e) {
                return !ie.isEmptyObject(this.cache[e[this.expando]] || {})
            },
            discard: function(e) {
                e[this.expando] && delete this.cache[e[this.expando]]
            }
        };
        var we = new h
          , _e = new h
          , Se = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
          , Me = /([A-Z])/g;
        ie.extend({
            hasData: function(e) {
                return _e.hasData(e) || we.hasData(e)
            },
            data: function(e, t, n) {
                return _e.access(e, t, n)
            },
            removeData: function(e, t) {
                _e.remove(e, t)
            },
            _data: function(e, t, n) {
                return we.access(e, t, n)
            },
            _removeData: function(e, t) {
                we.remove(e, t)
            }
        }),
        ie.fn.extend({
            data: function(e, t) {
                var n, i, r, o = this[0], a = o && o.attributes;
                if (void 0 === e) {
                    if (this.length && (r = _e.get(o),
                    1 === o.nodeType && !we.get(o, "hasDataAttrs"))) {
                        for (n = a.length; n--; )
                            a[n] && (i = a[n].name,
                            0 === i.indexOf("data-") && (i = ie.camelCase(i.slice(5)),
                            d(o, i, r[i])));
                        we.set(o, "hasDataAttrs", !0)
                    }
                    return r
                }
                return "object" == typeof e ? this.each(function() {
                    _e.set(this, e)
                }) : xe(this, function(t) {
                    var n, i = ie.camelCase(e);
                    if (o && void 0 === t) {
                        if (n = _e.get(o, e),
                        void 0 !== n)
                            return n;
                        if (n = _e.get(o, i),
                        void 0 !== n)
                            return n;
                        if (n = d(o, i, void 0),
                        void 0 !== n)
                            return n
                    } else
                        this.each(function() {
                            var n = _e.get(this, i);
                            _e.set(this, i, t),
                            -1 !== e.indexOf("-") && void 0 !== n && _e.set(this, e, t)
                        })
                }, null, t, arguments.length > 1, null, !0)
            },
            removeData: function(e) {
                return this.each(function() {
                    _e.remove(this, e)
                })
            }
        }),
        ie.extend({
            queue: function(e, t, n) {
                var i;
                return e ? (t = (t || "fx") + "queue",
                i = we.get(e, t),
                n && (!i || ie.isArray(n) ? i = we.access(e, t, ie.makeArray(n)) : i.push(n)),
                i || []) : void 0
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var n = ie.queue(e, t)
                  , i = n.length
                  , r = n.shift()
                  , o = ie._queueHooks(e, t)
                  , a = function() {
                    ie.dequeue(e, t)
                };
                "inprogress" === r && (r = n.shift(),
                i--),
                r && ("fx" === t && n.unshift("inprogress"),
                delete o.stop,
                r.call(e, a, o)),
                !i && o && o.empty.fire()
            },
            _queueHooks: function(e, t) {
                var n = t + "queueHooks";
                return we.get(e, n) || we.access(e, n, {
                    empty: ie.Callbacks("once memory").add(function() {
                        we.remove(e, [t + "queue", n])
                    })
                })
            }
        }),
        ie.fn.extend({
            queue: function(e, t) {
                var n = 2;
                return "string" != typeof e && (t = e,
                e = "fx",
                n--),
                arguments.length < n ? ie.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                    var n = ie.queue(this, e, t);
                    ie._queueHooks(this, e),
                    "fx" === e && "inprogress" !== n[0] && ie.dequeue(this, e)
                })
            },
            dequeue: function(e) {
                return this.each(function() {
                    ie.dequeue(this, e)
                })
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var n, i = 1, r = ie.Deferred(), o = this, a = this.length, s = function() {
                    --i || r.resolveWith(o, [o])
                };
                for ("string" != typeof e && (t = e,
                e = void 0),
                e = e || "fx"; a--; )
                    n = we.get(o[a], e + "queueHooks"),
                    n && n.empty && (i++,
                    n.empty.add(s));
                return s(),
                r.promise(t)
            }
        });
        var Ce = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
          , Te = ["Top", "Right", "Bottom", "Left"]
          , Ee = function(e, t) {
            return e = t || e,
            "none" === ie.css(e, "display") || !ie.contains(e.ownerDocument, e)
        }
          , ke = /^(?:checkbox|radio)$/i;
        !function() {
            var e = te.createDocumentFragment()
              , t = e.appendChild(te.createElement("div"))
              , n = te.createElement("input");
            n.setAttribute("type", "radio"),
            n.setAttribute("checked", "checked"),
            n.setAttribute("name", "t"),
            t.appendChild(n),
            ee.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked,
            t.innerHTML = "<textarea>x</textarea>",
            ee.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
        }();
        var Ae = "undefined";
        ee.focusinBubbles = "onfocusin"in n;
        var Pe = /^key/
          , Le = /^(?:mouse|pointer|contextmenu)|click/
          , Oe = /^(?:focusinfocus|focusoutblur)$/
          , Re = /^([^.]*)(?:\.(.+)|)$/;
        ie.event = {
            global: {},
            add: function(e, t, n, i, r) {
                var o, a, s, l, c, u, h, d, f, p, m, v = we.get(e);
                if (v)
                    for (n.handler && (o = n,
                    n = o.handler,
                    r = o.selector),
                    n.guid || (n.guid = ie.guid++),
                    (l = v.events) || (l = v.events = {}),
                    (a = v.handle) || (a = v.handle = function(t) {
                        return typeof ie !== Ae && ie.event.triggered !== t.type ? ie.event.dispatch.apply(e, arguments) : void 0
                    }
                    ),
                    t = (t || "").match(ge) || [""],
                    c = t.length; c--; )
                        s = Re.exec(t[c]) || [],
                        f = m = s[1],
                        p = (s[2] || "").split(".").sort(),
                        f && (h = ie.event.special[f] || {},
                        f = (r ? h.delegateType : h.bindType) || f,
                        h = ie.event.special[f] || {},
                        u = ie.extend({
                            type: f,
                            origType: m,
                            data: i,
                            handler: n,
                            guid: n.guid,
                            selector: r,
                            needsContext: r && ie.expr.match.needsContext.test(r),
                            namespace: p.join(".")
                        }, o),
                        (d = l[f]) || (d = l[f] = [],
                        d.delegateCount = 0,
                        h.setup && h.setup.call(e, i, p, a) !== !1 || e.addEventListener && e.addEventListener(f, a, !1)),
                        h.add && (h.add.call(e, u),
                        u.handler.guid || (u.handler.guid = n.guid)),
                        r ? d.splice(d.delegateCount++, 0, u) : d.push(u),
                        ie.event.global[f] = !0)
            },
            remove: function(e, t, n, i, r) {
                var o, a, s, l, c, u, h, d, f, p, m, v = we.hasData(e) && we.get(e);
                if (v && (l = v.events)) {
                    for (t = (t || "").match(ge) || [""],
                    c = t.length; c--; )
                        if (s = Re.exec(t[c]) || [],
                        f = m = s[1],
                        p = (s[2] || "").split(".").sort(),
                        f) {
                            for (h = ie.event.special[f] || {},
                            f = (i ? h.delegateType : h.bindType) || f,
                            d = l[f] || [],
                            s = s[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                            a = o = d.length; o--; )
                                u = d[o],
                                !r && m !== u.origType || n && n.guid !== u.guid || s && !s.test(u.namespace) || i && i !== u.selector && ("**" !== i || !u.selector) || (d.splice(o, 1),
                                u.selector && d.delegateCount--,
                                h.remove && h.remove.call(e, u));
                            a && !d.length && (h.teardown && h.teardown.call(e, p, v.handle) !== !1 || ie.removeEvent(e, f, v.handle),
                            delete l[f])
                        } else
                            for (f in l)
                                ie.event.remove(e, f + t[c], n, i, !0);
                    ie.isEmptyObject(l) && (delete v.handle,
                    we.remove(e, "events"))
                }
            },
            trigger: function(e, t, i, r) {
                var o, a, s, l, c, u, h, d = [i || te], f = $.call(e, "type") ? e.type : e, p = $.call(e, "namespace") ? e.namespace.split(".") : [];
                if (a = s = i = i || te,
                3 !== i.nodeType && 8 !== i.nodeType && !Oe.test(f + ie.event.triggered) && (f.indexOf(".") >= 0 && (p = f.split("."),
                f = p.shift(),
                p.sort()),
                c = f.indexOf(":") < 0 && "on" + f,
                e = e[ie.expando] ? e : new ie.Event(f,"object" == typeof e && e),
                e.isTrigger = r ? 2 : 3,
                e.namespace = p.join("."),
                e.namespace_re = e.namespace ? new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
                e.result = void 0,
                e.target || (e.target = i),
                t = null == t ? [e] : ie.makeArray(t, [e]),
                h = ie.event.special[f] || {},
                r || !h.trigger || h.trigger.apply(i, t) !== !1)) {
                    if (!r && !h.noBubble && !ie.isWindow(i)) {
                        for (l = h.delegateType || f,
                        Oe.test(l + f) || (a = a.parentNode); a; a = a.parentNode)
                            d.push(a),
                            s = a;
                        s === (i.ownerDocument || te) && d.push(s.defaultView || s.parentWindow || n)
                    }
                    for (o = 0; (a = d[o++]) && !e.isPropagationStopped(); )
                        e.type = o > 1 ? l : h.bindType || f,
                        u = (we.get(a, "events") || {})[e.type] && we.get(a, "handle"),
                        u && u.apply(a, t),
                        u = c && a[c],
                        u && u.apply && ie.acceptData(a) && (e.result = u.apply(a, t),
                        e.result === !1 && e.preventDefault());
                    return e.type = f,
                    r || e.isDefaultPrevented() || h._default && h._default.apply(d.pop(), t) !== !1 || !ie.acceptData(i) || c && ie.isFunction(i[f]) && !ie.isWindow(i) && (s = i[c],
                    s && (i[c] = null),
                    ie.event.triggered = f,
                    i[f](),
                    ie.event.triggered = void 0,
                    s && (i[c] = s)),
                    e.result
                }
            },
            dispatch: function(e) {
                e = ie.event.fix(e);
                var t, n, i, r, o, a = [], s = X.call(arguments), l = (we.get(this, "events") || {})[e.type] || [], c = ie.event.special[e.type] || {};
                if (s[0] = e,
                e.delegateTarget = this,
                !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                    for (a = ie.event.handlers.call(this, e, l),
                    t = 0; (r = a[t++]) && !e.isPropagationStopped(); )
                        for (e.currentTarget = r.elem,
                        n = 0; (o = r.handlers[n++]) && !e.isImmediatePropagationStopped(); )
                            (!e.namespace_re || e.namespace_re.test(o.namespace)) && (e.handleObj = o,
                            e.data = o.data,
                            i = ((ie.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, s),
                            void 0 !== i && (e.result = i) === !1 && (e.preventDefault(),
                            e.stopPropagation()));
                    return c.postDispatch && c.postDispatch.call(this, e),
                    e.result
                }
            },
            handlers: function(e, t) {
                var n, i, r, o, a = [], s = t.delegateCount, l = e.target;
                if (s && l.nodeType && (!e.button || "click" !== e.type))
                    for (; l !== this; l = l.parentNode || this)
                        if (l.disabled !== !0 || "click" !== e.type) {
                            for (i = [],
                            n = 0; s > n; n++)
                                o = t[n],
                                r = o.selector + " ",
                                void 0 === i[r] && (i[r] = o.needsContext ? ie(r, this).index(l) >= 0 : ie.find(r, this, null, [l]).length),
                                i[r] && i.push(o);
                            i.length && a.push({
                                elem: l,
                                handlers: i
                            })
                        }
                return s < t.length && a.push({
                    elem: this,
                    handlers: t.slice(s)
                }),
                a
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(e, t) {
                    return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode),
                    e
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(e, t) {
                    var n, i, r, o = t.button;
                    return null == e.pageX && null != t.clientX && (n = e.target.ownerDocument || te,
                    i = n.documentElement,
                    r = n.body,
                    e.pageX = t.clientX + (i && i.scrollLeft || r && r.scrollLeft || 0) - (i && i.clientLeft || r && r.clientLeft || 0),
                    e.pageY = t.clientY + (i && i.scrollTop || r && r.scrollTop || 0) - (i && i.clientTop || r && r.clientTop || 0)),
                    e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0),
                    e
                }
            },
            fix: function(e) {
                if (e[ie.expando])
                    return e;
                var t, n, i, r = e.type, o = e, a = this.fixHooks[r];
                for (a || (this.fixHooks[r] = a = Le.test(r) ? this.mouseHooks : Pe.test(r) ? this.keyHooks : {}),
                i = a.props ? this.props.concat(a.props) : this.props,
                e = new ie.Event(o),
                t = i.length; t--; )
                    n = i[t],
                    e[n] = o[n];
                return e.target || (e.target = te),
                3 === e.target.nodeType && (e.target = e.target.parentNode),
                a.filter ? a.filter(e, o) : e
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        return this !== m() && this.focus ? (this.focus(),
                        !1) : void 0
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === m() && this.blur ? (this.blur(),
                        !1) : void 0
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        return "checkbox" === this.type && this.click && ie.nodeName(this, "input") ? (this.click(),
                        !1) : void 0
                    },
                    _default: function(e) {
                        return ie.nodeName(e.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            },
            simulate: function(e, t, n, i) {
                var r = ie.extend(new ie.Event, n, {
                    type: e,
                    isSimulated: !0,
                    originalEvent: {}
                });
                i ? ie.event.trigger(r, null, t) : ie.event.dispatch.call(t, r),
                r.isDefaultPrevented() && n.preventDefault()
            }
        },
        ie.removeEvent = function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n, !1)
        }
        ,
        ie.Event = function(e, t) {
            return this instanceof ie.Event ? (e && e.type ? (this.originalEvent = e,
            this.type = e.type,
            this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? f : p) : this.type = e,
            t && ie.extend(this, t),
            this.timeStamp = e && e.timeStamp || ie.now(),
            void (this[ie.expando] = !0)) : new ie.Event(e,t)
        }
        ,
        ie.Event.prototype = {
            isDefaultPrevented: p,
            isPropagationStopped: p,
            isImmediatePropagationStopped: p,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = f,
                e && e.preventDefault && e.preventDefault()
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = f,
                e && e.stopPropagation && e.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var e = this.originalEvent;
                this.isImmediatePropagationStopped = f,
                e && e.stopImmediatePropagation && e.stopImmediatePropagation(),
                this.stopPropagation()
            }
        },
        ie.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(e, t) {
            ie.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, i = this, r = e.relatedTarget, o = e.handleObj;
                    return (!r || r !== i && !ie.contains(i, r)) && (e.type = o.origType,
                    n = o.handler.apply(this, arguments),
                    e.type = t),
                    n
                }
            }
        }),
        ee.focusinBubbles || ie.each({
            focus: "focusin",
            blur: "focusout"
        }, function(e, t) {
            var n = function(e) {
                ie.event.simulate(t, e.target, ie.event.fix(e), !0)
            };
            ie.event.special[t] = {
                setup: function() {
                    var i = this.ownerDocument || this
                      , r = we.access(i, t);
                    r || i.addEventListener(e, n, !0),
                    we.access(i, t, (r || 0) + 1)
                },
                teardown: function() {
                    var i = this.ownerDocument || this
                      , r = we.access(i, t) - 1;
                    r ? we.access(i, t, r) : (i.removeEventListener(e, n, !0),
                    we.remove(i, t))
                }
            }
        }),
        ie.fn.extend({
            on: function(e, t, n, i, r) {
                var o, a;
                if ("object" == typeof e) {
                    "string" != typeof t && (n = n || t,
                    t = void 0);
                    for (a in e)
                        this.on(a, t, n, e[a], r);
                    return this
                }
                if (null == n && null == i ? (i = t,
                n = t = void 0) : null == i && ("string" == typeof t ? (i = n,
                n = void 0) : (i = n,
                n = t,
                t = void 0)),
                i === !1)
                    i = p;
                else if (!i)
                    return this;
                return 1 === r && (o = i,
                i = function(e) {
                    return ie().off(e),
                    o.apply(this, arguments)
                }
                ,
                i.guid = o.guid || (o.guid = ie.guid++)),
                this.each(function() {
                    ie.event.add(this, e, i, n, t)
                })
            },
            one: function(e, t, n, i) {
                return this.on(e, t, n, i, 1)
            },
            off: function(e, t, n) {
                var i, r;
                if (e && e.preventDefault && e.handleObj)
                    return i = e.handleObj,
                    ie(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler),
                    this;
                if ("object" == typeof e) {
                    for (r in e)
                        this.off(r, t, e[r]);
                    return this
                }
                return (t === !1 || "function" == typeof t) && (n = t,
                t = void 0),
                n === !1 && (n = p),
                this.each(function() {
                    ie.event.remove(this, e, n, t)
                })
            },
            trigger: function(e, t) {
                return this.each(function() {
                    ie.event.trigger(e, t, this)
                })
            },
            triggerHandler: function(e, t) {
                var n = this[0];
                return n ? ie.event.trigger(e, t, n, !0) : void 0
            }
        });
        var Fe = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
          , Be = /<([\w:]+)/
          , De = /<|&#?\w+;/
          , Ie = /<(?:script|style|link)/i
          , Ne = /checked\s*(?:[^=]|=\s*.checked.)/i
          , je = /^$|\/(?:java|ecma)script/i
          , Ve = /^true\/(.*)/
          , ze = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
          , Ue = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
        Ue.optgroup = Ue.option,
        Ue.tbody = Ue.tfoot = Ue.colgroup = Ue.caption = Ue.thead,
        Ue.th = Ue.td,
        ie.extend({
            clone: function(e, t, n) {
                var i, r, o, a, s = e.cloneNode(!0), l = ie.contains(e.ownerDocument, e);
                if (!(ee.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ie.isXMLDoc(e)))
                    for (a = w(s),
                    o = w(e),
                    i = 0,
                    r = o.length; r > i; i++)
                        _(o[i], a[i]);
                if (t)
                    if (n)
                        for (o = o || w(e),
                        a = a || w(s),
                        i = 0,
                        r = o.length; r > i; i++)
                            x(o[i], a[i]);
                    else
                        x(e, s);
                return a = w(s, "script"),
                a.length > 0 && b(a, !l && w(e, "script")),
                s
            },
            buildFragment: function(e, t, n, i) {
                for (var r, o, a, s, l, c, u = t.createDocumentFragment(), h = [], d = 0, f = e.length; f > d; d++)
                    if (r = e[d],
                    r || 0 === r)
                        if ("object" === ie.type(r))
                            ie.merge(h, r.nodeType ? [r] : r);
                        else if (De.test(r)) {
                            for (o = o || u.appendChild(t.createElement("div")),
                            a = (Be.exec(r) || ["", ""])[1].toLowerCase(),
                            s = Ue[a] || Ue._default,
                            o.innerHTML = s[1] + r.replace(Fe, "<$1></$2>") + s[2],
                            c = s[0]; c--; )
                                o = o.lastChild;
                            ie.merge(h, o.childNodes),
                            o = u.firstChild,
                            o.textContent = ""
                        } else
                            h.push(t.createTextNode(r));
                for (u.textContent = "",
                d = 0; r = h[d++]; )
                    if ((!i || -1 === ie.inArray(r, i)) && (l = ie.contains(r.ownerDocument, r),
                    o = w(u.appendChild(r), "script"),
                    l && b(o),
                    n))
                        for (c = 0; r = o[c++]; )
                            je.test(r.type || "") && n.push(r);
                return u
            },
            cleanData: function(e) {
                for (var t, n, i, r, o = ie.event.special, a = 0; void 0 !== (n = e[a]); a++) {
                    if (ie.acceptData(n) && (r = n[we.expando],
                    r && (t = we.cache[r]))) {
                        if (t.events)
                            for (i in t.events)
                                o[i] ? ie.event.remove(n, i) : ie.removeEvent(n, i, t.handle);
                        we.cache[r] && delete we.cache[r]
                    }
                    delete _e.cache[n[_e.expando]]
                }
            }
        }),
        ie.fn.extend({
            text: function(e) {
                return xe(this, function(e) {
                    return void 0 === e ? ie.text(this) : this.empty().each(function() {
                        (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = e)
                    })
                }, null, e, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = v(this, e);
                        t.appendChild(e)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = v(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                })
            },
            remove: function(e, t) {
                for (var n, i = e ? ie.filter(e, this) : this, r = 0; null != (n = i[r]); r++)
                    t || 1 !== n.nodeType || ie.cleanData(w(n)),
                    n.parentNode && (t && ie.contains(n.ownerDocument, n) && b(w(n, "script")),
                    n.parentNode.removeChild(n));
                return this
            },
            empty: function() {
                for (var e, t = 0; null != (e = this[t]); t++)
                    1 === e.nodeType && (ie.cleanData(w(e, !1)),
                    e.textContent = "");
                return this
            },
            clone: function(e, t) {
                return e = null == e ? !1 : e,
                t = null == t ? e : t,
                this.map(function() {
                    return ie.clone(this, e, t)
                })
            },
            html: function(e) {
                return xe(this, function(e) {
                    var t = this[0] || {}
                      , n = 0
                      , i = this.length;
                    if (void 0 === e && 1 === t.nodeType)
                        return t.innerHTML;
                    if ("string" == typeof e && !Ie.test(e) && !Ue[(Be.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = e.replace(Fe, "<$1></$2>");
                        try {
                            for (; i > n; n++)
                                t = this[n] || {},
                                1 === t.nodeType && (ie.cleanData(w(t, !1)),
                                t.innerHTML = e);
                            t = 0
                        } catch (r) {}
                    }
                    t && this.empty().append(e)
                }, null, e, arguments.length)
            },
            replaceWith: function() {
                var e = arguments[0];
                return this.domManip(arguments, function(t) {
                    e = this.parentNode,
                    ie.cleanData(w(this)),
                    e && e.replaceChild(t, this)
                }),
                e && (e.length || e.nodeType) ? this : this.remove()
            },
            detach: function(e) {
                return this.remove(e, !0)
            },
            domManip: function(e, t) {
                e = Y.apply([], e);
                var n, i, r, o, a, s, l = 0, c = this.length, u = this, h = c - 1, d = e[0], f = ie.isFunction(d);
                if (f || c > 1 && "string" == typeof d && !ee.checkClone && Ne.test(d))
                    return this.each(function(n) {
                        var i = u.eq(n);
                        f && (e[0] = d.call(this, n, i.html())),
                        i.domManip(e, t)
                    });
                if (c && (n = ie.buildFragment(e, this[0].ownerDocument, !1, this),
                i = n.firstChild,
                1 === n.childNodes.length && (n = i),
                i)) {
                    for (r = ie.map(w(n, "script"), g),
                    o = r.length; c > l; l++)
                        a = n,
                        l !== h && (a = ie.clone(a, !0, !0),
                        o && ie.merge(r, w(a, "script"))),
                        t.call(this[l], a, l);
                    if (o)
                        for (s = r[r.length - 1].ownerDocument,
                        ie.map(r, y),
                        l = 0; o > l; l++)
                            a = r[l],
                            je.test(a.type || "") && !we.access(a, "globalEval") && ie.contains(s, a) && (a.src ? ie._evalUrl && ie._evalUrl(a.src) : ie.globalEval(a.textContent.replace(ze, "")))
                }
                return this
            }
        }),
        ie.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(e, t) {
            ie.fn[e] = function(e) {
                for (var n, i = [], r = ie(e), o = r.length - 1, a = 0; o >= a; a++)
                    n = a === o ? this : this.clone(!0),
                    ie(r[a])[t](n),
                    J.apply(i, n.get());
                return this.pushStack(i)
            }
        });
        var He, Ge = {}, We = /^margin/, qe = new RegExp("^(" + Ce + ")(?!px)[a-z%]+$","i"), Xe = function(e) {
            return e.ownerDocument.defaultView.opener ? e.ownerDocument.defaultView.getComputedStyle(e, null) : n.getComputedStyle(e, null)
        };
        !function() {
            function e() {
                a.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",
                a.innerHTML = "",
                r.appendChild(o);
                var e = n.getComputedStyle(a, null);
                t = "1%" !== e.top,
                i = "4px" === e.width,
                r.removeChild(o)
            }
            var t, i, r = te.documentElement, o = te.createElement("div"), a = te.createElement("div");
            a.style && (a.style.backgroundClip = "content-box",
            a.cloneNode(!0).style.backgroundClip = "",
            ee.clearCloneStyle = "content-box" === a.style.backgroundClip,
            o.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",
            o.appendChild(a),
            n.getComputedStyle && ie.extend(ee, {
                pixelPosition: function() {
                    return e(),
                    t
                },
                boxSizingReliable: function() {
                    return null == i && e(),
                    i
                },
                reliableMarginRight: function() {
                    var e, t = a.appendChild(te.createElement("div"));
                    return t.style.cssText = a.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
                    t.style.marginRight = t.style.width = "0",
                    a.style.width = "1px",
                    r.appendChild(o),
                    e = !parseFloat(n.getComputedStyle(t, null).marginRight),
                    r.removeChild(o),
                    a.removeChild(t),
                    e
                }
            }))
        }(),
        ie.swap = function(e, t, n, i) {
            var r, o, a = {};
            for (o in t)
                a[o] = e.style[o],
                e.style[o] = t[o];
            r = n.apply(e, i || []);
            for (o in t)
                e.style[o] = a[o];
            return r
        }
        ;
        var Ye = /^(none|table(?!-c[ea]).+)/
          , Je = new RegExp("^(" + Ce + ")(.*)$","i")
          , Ze = new RegExp("^([+-])=(" + Ce + ")","i")
          , Qe = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        }
          , Ke = {
            letterSpacing: "0",
            fontWeight: "400"
        }
          , $e = ["Webkit", "O", "Moz", "ms"];
        ie.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var n = C(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": "cssFloat"
            },
            style: function(e, t, n, i) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var r, o, a, s = ie.camelCase(t), l = e.style;
                    return t = ie.cssProps[s] || (ie.cssProps[s] = E(l, s)),
                    a = ie.cssHooks[t] || ie.cssHooks[s],
                    void 0 === n ? a && "get"in a && void 0 !== (r = a.get(e, !1, i)) ? r : l[t] : (o = typeof n,
                    "string" === o && (r = Ze.exec(n)) && (n = (r[1] + 1) * r[2] + parseFloat(ie.css(e, t)),
                    o = "number"),
                    null != n && n === n && ("number" !== o || ie.cssNumber[s] || (n += "px"),
                    ee.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"),
                    a && "set"in a && void 0 === (n = a.set(e, n, i)) || (l[t] = n)),
                    void 0)
                }
            },
            css: function(e, t, n, i) {
                var r, o, a, s = ie.camelCase(t);
                return t = ie.cssProps[s] || (ie.cssProps[s] = E(e.style, s)),
                a = ie.cssHooks[t] || ie.cssHooks[s],
                a && "get"in a && (r = a.get(e, !0, n)),
                void 0 === r && (r = C(e, t, i)),
                "normal" === r && t in Ke && (r = Ke[t]),
                "" === n || n ? (o = parseFloat(r),
                n === !0 || ie.isNumeric(o) ? o || 0 : r) : r
            }
        }),
        ie.each(["height", "width"], function(e, t) {
            ie.cssHooks[t] = {
                get: function(e, n, i) {
                    return n ? Ye.test(ie.css(e, "display")) && 0 === e.offsetWidth ? ie.swap(e, Qe, function() {
                        return P(e, t, i)
                    }) : P(e, t, i) : void 0
                },
                set: function(e, n, i) {
                    var r = i && Xe(e);
                    return k(e, n, i ? A(e, t, i, "border-box" === ie.css(e, "boxSizing", !1, r), r) : 0)
                }
            }
        }),
        ie.cssHooks.marginRight = T(ee.reliableMarginRight, function(e, t) {
            return t ? ie.swap(e, {
                display: "inline-block"
            }, C, [e, "marginRight"]) : void 0
        }),
        ie.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(e, t) {
            ie.cssHooks[e + t] = {
                expand: function(n) {
                    for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [n]; 4 > i; i++)
                        r[e + Te[i] + t] = o[i] || o[i - 2] || o[0];
                    return r
                }
            },
            We.test(e) || (ie.cssHooks[e + t].set = k)
        }),
        ie.fn.extend({
            css: function(e, t) {
                return xe(this, function(e, t, n) {
                    var i, r, o = {}, a = 0;
                    if (ie.isArray(t)) {
                        for (i = Xe(e),
                        r = t.length; r > a; a++)
                            o[t[a]] = ie.css(e, t[a], !1, i);
                        return o
                    }
                    return void 0 !== n ? ie.style(e, t, n) : ie.css(e, t)
                }, e, t, arguments.length > 1)
            },
            show: function() {
                return L(this, !0)
            },
            hide: function() {
                return L(this)
            },
            toggle: function(e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                    Ee(this) ? ie(this).show() : ie(this).hide()
                })
            }
        }),
        ie.Tween = O,
        O.prototype = {
            constructor: O,
            init: function(e, t, n, i, r, o) {
                this.elem = e,
                this.prop = n,
                this.easing = r || "swing",
                this.options = t,
                this.start = this.now = this.cur(),
                this.end = i,
                this.unit = o || (ie.cssNumber[n] ? "" : "px")
            },
            cur: function() {
                var e = O.propHooks[this.prop];
                return e && e.get ? e.get(this) : O.propHooks._default.get(this)
            },
            run: function(e) {
                var t, n = O.propHooks[this.prop];
                return this.options.duration ? this.pos = t = ie.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e,
                this.now = (this.end - this.start) * t + this.start,
                this.options.step && this.options.step.call(this.elem, this.now, this),
                n && n.set ? n.set(this) : O.propHooks._default.set(this),
                this
            }
        },
        O.prototype.init.prototype = O.prototype,
        O.propHooks = {
            _default: {
                get: function(e) {
                    var t;
                    return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = ie.css(e.elem, e.prop, ""),
                    t && "auto" !== t ? t : 0) : e.elem[e.prop]
                },
                set: function(e) {
                    ie.fx.step[e.prop] ? ie.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[ie.cssProps[e.prop]] || ie.cssHooks[e.prop]) ? ie.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
                }
            }
        },
        O.propHooks.scrollTop = O.propHooks.scrollLeft = {
            set: function(e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        },
        ie.easing = {
            linear: function(e) {
                return e
            },
            swing: function(e) {
                return .5 - Math.cos(e * Math.PI) / 2
            }
        },
        ie.fx = O.prototype.init,
        ie.fx.step = {};
        var et, tt, nt = /^(?:toggle|show|hide)$/, it = new RegExp("^(?:([+-])=|)(" + Ce + ")([a-z%]*)$","i"), rt = /queueHooks$/, ot = [D], at = {
            "*": [function(e, t) {
                var n = this.createTween(e, t)
                  , i = n.cur()
                  , r = it.exec(t)
                  , o = r && r[3] || (ie.cssNumber[e] ? "" : "px")
                  , a = (ie.cssNumber[e] || "px" !== o && +i) && it.exec(ie.css(n.elem, e))
                  , s = 1
                  , l = 20;
                if (a && a[3] !== o) {
                    o = o || a[3],
                    r = r || [],
                    a = +i || 1;
                    do
                        s = s || ".5",
                        a /= s,
                        ie.style(n.elem, e, a + o);
                    while (s !== (s = n.cur() / i) && 1 !== s && --l)
                }
                return r && (a = n.start = +a || +i || 0,
                n.unit = o,
                n.end = r[1] ? a + (r[1] + 1) * r[2] : +r[2]),
                n
            }
            ]
        };
        ie.Animation = ie.extend(N, {
            tweener: function(e, t) {
                ie.isFunction(e) ? (t = e,
                e = ["*"]) : e = e.split(" ");
                for (var n, i = 0, r = e.length; r > i; i++)
                    n = e[i],
                    at[n] = at[n] || [],
                    at[n].unshift(t)
            },
            prefilter: function(e, t) {
                t ? ot.unshift(e) : ot.push(e)
            }
        }),
        ie.speed = function(e, t, n) {
            var i = e && "object" == typeof e ? ie.extend({}, e) : {
                complete: n || !n && t || ie.isFunction(e) && e,
                duration: e,
                easing: n && t || t && !ie.isFunction(t) && t
            };
            return i.duration = ie.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in ie.fx.speeds ? ie.fx.speeds[i.duration] : ie.fx.speeds._default,
            (null == i.queue || i.queue === !0) && (i.queue = "fx"),
            i.old = i.complete,
            i.complete = function() {
                ie.isFunction(i.old) && i.old.call(this),
                i.queue && ie.dequeue(this, i.queue)
            }
            ,
            i
        }
        ,
        ie.fn.extend({
            fadeTo: function(e, t, n, i) {
                return this.filter(Ee).css("opacity", 0).show().end().animate({
                    opacity: t
                }, e, n, i)
            },
            animate: function(e, t, n, i) {
                var r = ie.isEmptyObject(e)
                  , o = ie.speed(t, n, i)
                  , a = function() {
                    var t = N(this, ie.extend({}, e), o);
                    (r || we.get(this, "finish")) && t.stop(!0)
                };
                return a.finish = a,
                r || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)
            },
            stop: function(e, t, n) {
                var i = function(e) {
                    var t = e.stop;
                    delete e.stop,
                    t(n)
                };
                return "string" != typeof e && (n = t,
                t = e,
                e = void 0),
                t && e !== !1 && this.queue(e || "fx", []),
                this.each(function() {
                    var t = !0
                      , r = null != e && e + "queueHooks"
                      , o = ie.timers
                      , a = we.get(this);
                    if (r)
                        a[r] && a[r].stop && i(a[r]);
                    else
                        for (r in a)
                            a[r] && a[r].stop && rt.test(r) && i(a[r]);
                    for (r = o.length; r--; )
                        o[r].elem !== this || null != e && o[r].queue !== e || (o[r].anim.stop(n),
                        t = !1,
                        o.splice(r, 1));
                    (t || !n) && ie.dequeue(this, e)
                })
            },
            finish: function(e) {
                return e !== !1 && (e = e || "fx"),
                this.each(function() {
                    var t, n = we.get(this), i = n[e + "queue"], r = n[e + "queueHooks"], o = ie.timers, a = i ? i.length : 0;
                    for (n.finish = !0,
                    ie.queue(this, e, []),
                    r && r.stop && r.stop.call(this, !0),
                    t = o.length; t--; )
                        o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0),
                        o.splice(t, 1));
                    for (t = 0; a > t; t++)
                        i[t] && i[t].finish && i[t].finish.call(this);
                    delete n.finish
                })
            }
        }),
        ie.each(["toggle", "show", "hide"], function(e, t) {
            var n = ie.fn[t];
            ie.fn[t] = function(e, i, r) {
                return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(F(t, !0), e, i, r)
            }
        }),
        ie.each({
            slideDown: F("show"),
            slideUp: F("hide"),
            slideToggle: F("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(e, t) {
            ie.fn[e] = function(e, n, i) {
                return this.animate(t, e, n, i)
            }
        }),
        ie.timers = [],
        ie.fx.tick = function() {
            var e, t = 0, n = ie.timers;
            for (et = ie.now(); t < n.length; t++)
                e = n[t],
                e() || n[t] !== e || n.splice(t--, 1);
            n.length || ie.fx.stop(),
            et = void 0
        }
        ,
        ie.fx.timer = function(e) {
            ie.timers.push(e),
            e() ? ie.fx.start() : ie.timers.pop()
        }
        ,
        ie.fx.interval = 13,
        ie.fx.start = function() {
            tt || (tt = setInterval(ie.fx.tick, ie.fx.interval))
        }
        ,
        ie.fx.stop = function() {
            clearInterval(tt),
            tt = null
        }
        ,
        ie.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        },
        ie.fn.delay = function(e, t) {
            return e = ie.fx ? ie.fx.speeds[e] || e : e,
            t = t || "fx",
            this.queue(t, function(t, n) {
                var i = setTimeout(t, e);
                n.stop = function() {
                    clearTimeout(i)
                }
            })
        }
        ,
        function() {
            var e = te.createElement("input")
              , t = te.createElement("select")
              , n = t.appendChild(te.createElement("option"));
            e.type = "checkbox",
            ee.checkOn = "" !== e.value,
            ee.optSelected = n.selected,
            t.disabled = !0,
            ee.optDisabled = !n.disabled,
            e = te.createElement("input"),
            e.value = "t",
            e.type = "radio",
            ee.radioValue = "t" === e.value
        }();
        var st, lt, ct = ie.expr.attrHandle;
        ie.fn.extend({
            attr: function(e, t) {
                return xe(this, ie.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each(function() {
                    ie.removeAttr(this, e)
                })
            }
        }),
        ie.extend({
            attr: function(e, t, n) {
                var i, r, o = e.nodeType;
                if (e && 3 !== o && 8 !== o && 2 !== o)
                    return typeof e.getAttribute === Ae ? ie.prop(e, t, n) : (1 === o && ie.isXMLDoc(e) || (t = t.toLowerCase(),
                    i = ie.attrHooks[t] || (ie.expr.match.bool.test(t) ? lt : st)),
                    void 0 === n ? i && "get"in i && null !== (r = i.get(e, t)) ? r : (r = ie.find.attr(e, t),
                    null == r ? void 0 : r) : null !== n ? i && "set"in i && void 0 !== (r = i.set(e, n, t)) ? r : (e.setAttribute(t, n + ""),
                    n) : void ie.removeAttr(e, t))
            },
            removeAttr: function(e, t) {
                var n, i, r = 0, o = t && t.match(ge);
                if (o && 1 === e.nodeType)
                    for (; n = o[r++]; )
                        i = ie.propFix[n] || n,
                        ie.expr.match.bool.test(n) && (e[i] = !1),
                        e.removeAttribute(n)
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!ee.radioValue && "radio" === t && ie.nodeName(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t),
                            n && (e.value = n),
                            t
                        }
                    }
                }
            }
        }),
        lt = {
            set: function(e, t, n) {
                return t === !1 ? ie.removeAttr(e, n) : e.setAttribute(n, n),
                n
            }
        },
        ie.each(ie.expr.match.bool.source.match(/\w+/g), function(e, t) {
            var n = ct[t] || ie.find.attr;
            ct[t] = function(e, t, i) {
                var r, o;
                return i || (o = ct[t],
                ct[t] = r,
                r = null != n(e, t, i) ? t.toLowerCase() : null,
                ct[t] = o),
                r
            }
        });
        var ut = /^(?:input|select|textarea|button)$/i;
        ie.fn.extend({
            prop: function(e, t) {
                return xe(this, ie.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return this.each(function() {
                    delete this[ie.propFix[e] || e]
                })
            }
        }),
        ie.extend({
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(e, t, n) {
                var i, r, o, a = e.nodeType;
                if (e && 3 !== a && 8 !== a && 2 !== a)
                    return o = 1 !== a || !ie.isXMLDoc(e),
                    o && (t = ie.propFix[t] || t,
                    r = ie.propHooks[t]),
                    void 0 !== n ? r && "set"in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get"in r && null !== (i = r.get(e, t)) ? i : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        return e.hasAttribute("tabindex") || ut.test(e.nodeName) || e.href ? e.tabIndex : -1
                    }
                }
            }
        }),
        ee.optSelected || (ie.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex,
                null
            }
        }),
        ie.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            ie.propFix[this.toLowerCase()] = this
        });
        var ht = /[\t\r\n\f]/g;
        ie.fn.extend({
            addClass: function(e) {
                var t, n, i, r, o, a, s = "string" == typeof e && e, l = 0, c = this.length;
                if (ie.isFunction(e))
                    return this.each(function(t) {
                        ie(this).addClass(e.call(this, t, this.className))
                    });
                if (s)
                    for (t = (e || "").match(ge) || []; c > l; l++)
                        if (n = this[l],
                        i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(ht, " ") : " ")) {
                            for (o = 0; r = t[o++]; )
                                i.indexOf(" " + r + " ") < 0 && (i += r + " ");
                            a = ie.trim(i),
                            n.className !== a && (n.className = a)
                        }
                return this
            },
            removeClass: function(e) {
                var t, n, i, r, o, a, s = 0 === arguments.length || "string" == typeof e && e, l = 0, c = this.length;
                if (ie.isFunction(e))
                    return this.each(function(t) {
                        ie(this).removeClass(e.call(this, t, this.className))
                    });
                if (s)
                    for (t = (e || "").match(ge) || []; c > l; l++)
                        if (n = this[l],
                        i = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(ht, " ") : "")) {
                            for (o = 0; r = t[o++]; )
                                for (; i.indexOf(" " + r + " ") >= 0; )
                                    i = i.replace(" " + r + " ", " ");
                            a = e ? ie.trim(i) : "",
                            n.className !== a && (n.className = a)
                        }
                return this
            },
            toggleClass: function(e, t) {
                var n = typeof e;
                return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : ie.isFunction(e) ? this.each(function(n) {
                    ie(this).toggleClass(e.call(this, n, this.className, t), t)
                }) : this.each(function() {
                    if ("string" === n)
                        for (var t, i = 0, r = ie(this), o = e.match(ge) || []; t = o[i++]; )
                            r.hasClass(t) ? r.removeClass(t) : r.addClass(t);
                    else
                        (n === Ae || "boolean" === n) && (this.className && we.set(this, "__className__", this.className),
                        this.className = this.className || e === !1 ? "" : we.get(this, "__className__") || "")
                })
            },
            hasClass: function(e) {
                for (var t = " " + e + " ", n = 0, i = this.length; i > n; n++)
                    if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(ht, " ").indexOf(t) >= 0)
                        return !0;
                return !1
            }
        });
        var dt = /\r/g;
        ie.fn.extend({
            val: function(e) {
                var t, n, i, r = this[0];
                {
                    if (arguments.length)
                        return i = ie.isFunction(e),
                        this.each(function(n) {
                            var r;
                            1 === this.nodeType && (r = i ? e.call(this, n, ie(this).val()) : e,
                            null == r ? r = "" : "number" == typeof r ? r += "" : ie.isArray(r) && (r = ie.map(r, function(e) {
                                return null == e ? "" : e + ""
                            })),
                            t = ie.valHooks[this.type] || ie.valHooks[this.nodeName.toLowerCase()],
                            t && "set"in t && void 0 !== t.set(this, r, "value") || (this.value = r))
                        });
                    if (r)
                        return t = ie.valHooks[r.type] || ie.valHooks[r.nodeName.toLowerCase()],
                        t && "get"in t && void 0 !== (n = t.get(r, "value")) ? n : (n = r.value,
                        "string" == typeof n ? n.replace(dt, "") : null == n ? "" : n)
                }
            }
        }),
        ie.extend({
            valHooks: {
                option: {
                    get: function(e) {
                        var t = ie.find.attr(e, "value");
                        return null != t ? t : ie.trim(ie.text(e))
                    }
                },
                select: {
                    get: function(e) {
                        for (var t, n, i = e.options, r = e.selectedIndex, o = "select-one" === e.type || 0 > r, a = o ? null : [], s = o ? r + 1 : i.length, l = 0 > r ? s : o ? r : 0; s > l; l++)
                            if (n = i[l],
                            (n.selected || l === r) && (ee.optDisabled ? !n.disabled : null === n.getAttribute("disabled")) && (!n.parentNode.disabled || !ie.nodeName(n.parentNode, "optgroup"))) {
                                if (t = ie(n).val(),
                                o)
                                    return t;
                                a.push(t)
                            }
                        return a
                    },
                    set: function(e, t) {
                        for (var n, i, r = e.options, o = ie.makeArray(t), a = r.length; a--; )
                            i = r[a],
                            (i.selected = ie.inArray(i.value, o) >= 0) && (n = !0);
                        return n || (e.selectedIndex = -1),
                        o
                    }
                }
            }
        }),
        ie.each(["radio", "checkbox"], function() {
            ie.valHooks[this] = {
                set: function(e, t) {
                    return ie.isArray(t) ? e.checked = ie.inArray(ie(e).val(), t) >= 0 : void 0
                }
            },
            ee.checkOn || (ie.valHooks[this].get = function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            }
            )
        }),
        ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
            ie.fn[t] = function(e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }),
        ie.fn.extend({
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            },
            bind: function(e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, n, i) {
                return this.on(t, e, n, i)
            },
            undelegate: function(e, t, n) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
            }
        });
        var ft = ie.now()
          , pt = /\?/;
        ie.parseJSON = function(e) {
            return JSON.parse(e + "")
        }
        ,
        ie.parseXML = function(e) {
            var t, n;
            if (!e || "string" != typeof e)
                return null;
            try {
                n = new DOMParser,
                t = n.parseFromString(e, "text/xml")
            } catch (i) {
                t = void 0
            }
            return (!t || t.getElementsByTagName("parsererror").length) && ie.error("Invalid XML: " + e),
            t
        }
        ;
        var mt = /#.*$/
          , vt = /([?&])_=[^&]*/
          , gt = /^(.*?):[ \t]*([^\r\n]*)$/gm
          , yt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/
          , bt = /^(?:GET|HEAD)$/
          , xt = /^\/\//
          , wt = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/
          , _t = {}
          , St = {}
          , Mt = "*/".concat("*")
          , Ct = n.location.href
          , Tt = wt.exec(Ct.toLowerCase()) || [];
        ie.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Ct,
                type: "GET",
                isLocal: yt.test(Tt[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": Mt,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": ie.parseJSON,
                    "text xml": ie.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? z(z(e, ie.ajaxSettings), t) : z(ie.ajaxSettings, e)
            },
            ajaxPrefilter: j(_t),
            ajaxTransport: j(St),
            ajax: function(e, t) {
                function n(e, t, n, a) {
                    var l, u, g, y, x, _ = t;
                    2 !== b && (b = 2,
                    s && clearTimeout(s),
                    i = void 0,
                    o = a || "",
                    w.readyState = e > 0 ? 4 : 0,
                    l = e >= 200 && 300 > e || 304 === e,
                    n && (y = U(h, w, n)),
                    y = H(h, y, w, l),
                    l ? (h.ifModified && (x = w.getResponseHeader("Last-Modified"),
                    x && (ie.lastModified[r] = x),
                    x = w.getResponseHeader("etag"),
                    x && (ie.etag[r] = x)),
                    204 === e || "HEAD" === h.type ? _ = "nocontent" : 304 === e ? _ = "notmodified" : (_ = y.state,
                    u = y.data,
                    g = y.error,
                    l = !g)) : (g = _,
                    (e || !_) && (_ = "error",
                    0 > e && (e = 0))),
                    w.status = e,
                    w.statusText = (t || _) + "",
                    l ? p.resolveWith(d, [u, _, w]) : p.rejectWith(d, [w, _, g]),
                    w.statusCode(v),
                    v = void 0,
                    c && f.trigger(l ? "ajaxSuccess" : "ajaxError", [w, h, l ? u : g]),
                    m.fireWith(d, [w, _]),
                    c && (f.trigger("ajaxComplete", [w, h]),
                    --ie.active || ie.event.trigger("ajaxStop")))
                }
                "object" == typeof e && (t = e,
                e = void 0),
                t = t || {};
                var i, r, o, a, s, l, c, u, h = ie.ajaxSetup({}, t), d = h.context || h, f = h.context && (d.nodeType || d.jquery) ? ie(d) : ie.event, p = ie.Deferred(), m = ie.Callbacks("once memory"), v = h.statusCode || {}, g = {}, y = {}, b = 0, x = "canceled", w = {
                    readyState: 0,
                    getResponseHeader: function(e) {
                        var t;
                        if (2 === b) {
                            if (!a)
                                for (a = {}; t = gt.exec(o); )
                                    a[t[1].toLowerCase()] = t[2];
                            t = a[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function() {
                        return 2 === b ? o : null
                    },
                    setRequestHeader: function(e, t) {
                        var n = e.toLowerCase();
                        return b || (e = y[n] = y[n] || e,
                        g[e] = t),
                        this
                    },
                    overrideMimeType: function(e) {
                        return b || (h.mimeType = e),
                        this
                    },
                    statusCode: function(e) {
                        var t;
                        if (e)
                            if (2 > b)
                                for (t in e)
                                    v[t] = [v[t], e[t]];
                            else
                                w.always(e[w.status]);
                        return this
                    },
                    abort: function(e) {
                        var t = e || x;
                        return i && i.abort(t),
                        n(0, t),
                        this
                    }
                };
                if (p.promise(w).complete = m.add,
                w.success = w.done,
                w.error = w.fail,
                h.url = ((e || h.url || Ct) + "").replace(mt, "").replace(xt, Tt[1] + "//"),
                h.type = t.method || t.type || h.method || h.type,
                h.dataTypes = ie.trim(h.dataType || "*").toLowerCase().match(ge) || [""],
                null == h.crossDomain && (l = wt.exec(h.url.toLowerCase()),
                h.crossDomain = !(!l || l[1] === Tt[1] && l[2] === Tt[2] && (l[3] || ("http:" === l[1] ? "80" : "443")) === (Tt[3] || ("http:" === Tt[1] ? "80" : "443")))),
                h.data && h.processData && "string" != typeof h.data && (h.data = ie.param(h.data, h.traditional)),
                V(_t, h, t, w),
                2 === b)
                    return w;
                c = ie.event && h.global,
                c && 0 === ie.active++ && ie.event.trigger("ajaxStart"),
                h.type = h.type.toUpperCase(),
                h.hasContent = !bt.test(h.type),
                r = h.url,
                h.hasContent || (h.data && (r = h.url += (pt.test(r) ? "&" : "?") + h.data,
                delete h.data),
                h.cache === !1 && (h.url = vt.test(r) ? r.replace(vt, "$1_=" + ft++) : r + (pt.test(r) ? "&" : "?") + "_=" + ft++)),
                h.ifModified && (ie.lastModified[r] && w.setRequestHeader("If-Modified-Since", ie.lastModified[r]),
                ie.etag[r] && w.setRequestHeader("If-None-Match", ie.etag[r])),
                (h.data && h.hasContent && h.contentType !== !1 || t.contentType) && w.setRequestHeader("Content-Type", h.contentType),
                w.setRequestHeader("Accept", h.dataTypes[0] && h.accepts[h.dataTypes[0]] ? h.accepts[h.dataTypes[0]] + ("*" !== h.dataTypes[0] ? ", " + Mt + "; q=0.01" : "") : h.accepts["*"]);
                for (u in h.headers)
                    w.setRequestHeader(u, h.headers[u]);
                if (h.beforeSend && (h.beforeSend.call(d, w, h) === !1 || 2 === b))
                    return w.abort();
                x = "abort";
                for (u in {
                    success: 1,
                    error: 1,
                    complete: 1
                })
                    w[u](h[u]);
                if (i = V(St, h, t, w)) {
                    w.readyState = 1,
                    c && f.trigger("ajaxSend", [w, h]),
                    h.async && h.timeout > 0 && (s = setTimeout(function() {
                        w.abort("timeout")
                    }, h.timeout));
                    try {
                        b = 1,
                        i.send(g, n)
                    } catch (_) {
                        if (!(2 > b))
                            throw _;
                        n(-1, _)
                    }
                } else
                    n(-1, "No Transport");
                return w
            },
            getJSON: function(e, t, n) {
                return ie.get(e, t, n, "json")
            },
            getScript: function(e, t) {
                return ie.get(e, void 0, t, "script")
            }
        }),
        ie.each(["get", "post"], function(e, t) {
            ie[t] = function(e, n, i, r) {
                return ie.isFunction(n) && (r = r || i,
                i = n,
                n = void 0),
                ie.ajax({
                    url: e,
                    type: t,
                    dataType: r,
                    data: n,
                    success: i
                })
            }
        }),
        ie._evalUrl = function(e) {
            return ie.ajax({
                url: e,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            })
        }
        ,
        ie.fn.extend({
            wrapAll: function(e) {
                var t;
                return ie.isFunction(e) ? this.each(function(t) {
                    ie(this).wrapAll(e.call(this, t))
                }) : (this[0] && (t = ie(e, this[0].ownerDocument).eq(0).clone(!0),
                this[0].parentNode && t.insertBefore(this[0]),
                t.map(function() {
                    for (var e = this; e.firstElementChild; )
                        e = e.firstElementChild;
                    return e
                }).append(this)),
                this)
            },
            wrapInner: function(e) {
                return ie.isFunction(e) ? this.each(function(t) {
                    ie(this).wrapInner(e.call(this, t))
                }) : this.each(function() {
                    var t = ie(this)
                      , n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                })
            },
            wrap: function(e) {
                var t = ie.isFunction(e);
                return this.each(function(n) {
                    ie(this).wrapAll(t ? e.call(this, n) : e);
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    ie.nodeName(this, "body") || ie(this).replaceWith(this.childNodes)
                }).end()
            }
        }),
        ie.expr.filters.hidden = function(e) {
            return e.offsetWidth <= 0 && e.offsetHeight <= 0
        }
        ,
        ie.expr.filters.visible = function(e) {
            return !ie.expr.filters.hidden(e)
        }
        ;
        var Et = /%20/g
          , kt = /\[\]$/
          , At = /\r?\n/g
          , Pt = /^(?:submit|button|image|reset|file)$/i
          , Lt = /^(?:input|select|textarea|keygen)/i;
        ie.param = function(e, t) {
            var n, i = [], r = function(e, t) {
                t = ie.isFunction(t) ? t() : null == t ? "" : t,
                i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
            if (void 0 === t && (t = ie.ajaxSettings && ie.ajaxSettings.traditional),
            ie.isArray(e) || e.jquery && !ie.isPlainObject(e))
                ie.each(e, function() {
                    r(this.name, this.value)
                });
            else
                for (n in e)
                    G(n, e[n], t, r);
            return i.join("&").replace(Et, "+")
        }
        ,
        ie.fn.extend({
            serialize: function() {
                return ie.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var e = ie.prop(this, "elements");
                    return e ? ie.makeArray(e) : this
                }).filter(function() {
                    var e = this.type;
                    return this.name && !ie(this).is(":disabled") && Lt.test(this.nodeName) && !Pt.test(e) && (this.checked || !ke.test(e))
                }).map(function(e, t) {
                    var n = ie(this).val();
                    return null == n ? null : ie.isArray(n) ? ie.map(n, function(e) {
                        return {
                            name: t.name,
                            value: e.replace(At, "\r\n")
                        }
                    }) : {
                        name: t.name,
                        value: n.replace(At, "\r\n")
                    }
                }).get()
            }
        }),
        ie.ajaxSettings.xhr = function() {
            try {
                return new XMLHttpRequest
            } catch (e) {}
        }
        ;
        var Ot = 0
          , Rt = {}
          , Ft = {
            0: 200,
            1223: 204
        }
          , Bt = ie.ajaxSettings.xhr();
        n.attachEvent && n.attachEvent("onunload", function() {
            for (var e in Rt)
                Rt[e]()
        }),
        ee.cors = !!Bt && "withCredentials"in Bt,
        ee.ajax = Bt = !!Bt,
        ie.ajaxTransport(function(e) {
            var t;
            return ee.cors || Bt && !e.crossDomain ? {
                send: function(n, i) {
                    var r, o = e.xhr(), a = ++Ot;
                    if (o.open(e.type, e.url, e.async, e.username, e.password),
                    e.xhrFields)
                        for (r in e.xhrFields)
                            o[r] = e.xhrFields[r];
                    e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType),
                    e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                    for (r in n)
                        o.setRequestHeader(r, n[r]);
                    t = function(e) {
                        return function() {
                            t && (delete Rt[a],
                            t = o.onload = o.onerror = null,
                            "abort" === e ? o.abort() : "error" === e ? i(o.status, o.statusText) : i(Ft[o.status] || o.status, o.statusText, "string" == typeof o.responseText ? {
                                text: o.responseText
                            } : void 0, o.getAllResponseHeaders()))
                        }
                    }
                    ,
                    o.onload = t(),
                    o.onerror = t("error"),
                    t = Rt[a] = t("abort");
                    try {
                        o.send(e.hasContent && e.data || null)
                    } catch (s) {
                        if (t)
                            throw s
                    }
                },
                abort: function() {
                    t && t()
                }
            } : void 0
        }),
        ie.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(e) {
                    return ie.globalEval(e),
                    e
                }
            }
        }),
        ie.ajaxPrefilter("script", function(e) {
            void 0 === e.cache && (e.cache = !1),
            e.crossDomain && (e.type = "GET")
        }),
        ie.ajaxTransport("script", function(e) {
            if (e.crossDomain) {
                var t, n;
                return {
                    send: function(i, r) {
                        t = ie("<script>").prop({
                            async: !0,
                            charset: e.scriptCharset,
                            src: e.url
                        }).on("load error", n = function(e) {
                            t.remove(),
                            n = null,
                            e && r("error" === e.type ? 404 : 200, e.type)
                        }
                        ),
                        te.head.appendChild(t[0])
                    },
                    abort: function() {
                        n && n()
                    }
                }
            }
        });
        var Dt = []
          , It = /(=)\?(?=&|$)|\?\?/;
        ie.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = Dt.pop() || ie.expando + "_" + ft++;
                return this[e] = !0,
                e
            }
        }),
        ie.ajaxPrefilter("json jsonp", function(e, t, i) {
            var r, o, a, s = e.jsonp !== !1 && (It.test(e.url) ? "url" : "string" == typeof e.data && !(e.contentType || "").indexOf("application/x-www-form-urlencoded") && It.test(e.data) && "data");
            return s || "jsonp" === e.dataTypes[0] ? (r = e.jsonpCallback = ie.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback,
            s ? e[s] = e[s].replace(It, "$1" + r) : e.jsonp !== !1 && (e.url += (pt.test(e.url) ? "&" : "?") + e.jsonp + "=" + r),
            e.converters["script json"] = function() {
                return a || ie.error(r + " was not called"),
                a[0]
            }
            ,
            e.dataTypes[0] = "json",
            o = n[r],
            n[r] = function() {
                a = arguments
            }
            ,
            i.always(function() {
                n[r] = o,
                e[r] && (e.jsonpCallback = t.jsonpCallback,
                Dt.push(r)),
                a && ie.isFunction(o) && o(a[0]),
                a = o = void 0
            }),
            "script") : void 0
        }),
        ie.parseHTML = function(e, t, n) {
            if (!e || "string" != typeof e)
                return null;
            "boolean" == typeof t && (n = t,
            t = !1),
            t = t || te;
            var i = ue.exec(e)
              , r = !n && [];
            return i ? [t.createElement(i[1])] : (i = ie.buildFragment([e], t, r),
            r && r.length && ie(r).remove(),
            ie.merge([], i.childNodes))
        }
        ;
        var Nt = ie.fn.load;
        ie.fn.load = function(e, t, n) {
            if ("string" != typeof e && Nt)
                return Nt.apply(this, arguments);
            var i, r, o, a = this, s = e.indexOf(" ");
            return s >= 0 && (i = ie.trim(e.slice(s)),
            e = e.slice(0, s)),
            ie.isFunction(t) ? (n = t,
            t = void 0) : t && "object" == typeof t && (r = "POST"),
            a.length > 0 && ie.ajax({
                url: e,
                type: r,
                dataType: "html",
                data: t
            }).done(function(e) {
                o = arguments,
                a.html(i ? ie("<div>").append(ie.parseHTML(e)).find(i) : e)
            }).complete(n && function(e, t) {
                a.each(n, o || [e.responseText, t, e])
            }
            ),
            this
        }
        ,
        ie.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
            ie.fn[t] = function(e) {
                return this.on(t, e)
            }
        }),
        ie.expr.filters.animated = function(e) {
            return ie.grep(ie.timers, function(t) {
                return e === t.elem
            }).length
        }
        ;
        var jt = n.document.documentElement;
        ie.offset = {
            setOffset: function(e, t, n) {
                var i, r, o, a, s, l, c, u = ie.css(e, "position"), h = ie(e), d = {};
                "static" === u && (e.style.position = "relative"),
                s = h.offset(),
                o = ie.css(e, "top"),
                l = ie.css(e, "left"),
                c = ("absolute" === u || "fixed" === u) && (o + l).indexOf("auto") > -1,
                c ? (i = h.position(),
                a = i.top,
                r = i.left) : (a = parseFloat(o) || 0,
                r = parseFloat(l) || 0),
                ie.isFunction(t) && (t = t.call(e, n, s)),
                null != t.top && (d.top = t.top - s.top + a),
                null != t.left && (d.left = t.left - s.left + r),
                "using"in t ? t.using.call(e, d) : h.css(d)
            }
        },
        ie.fn.extend({
            offset: function(e) {
                if (arguments.length)
                    return void 0 === e ? this : this.each(function(t) {
                        ie.offset.setOffset(this, e, t)
                    });
                var t, n, i = this[0], r = {
                    top: 0,
                    left: 0
                }, o = i && i.ownerDocument;
                if (o)
                    return t = o.documentElement,
                    ie.contains(t, i) ? (typeof i.getBoundingClientRect !== Ae && (r = i.getBoundingClientRect()),
                    n = W(o),
                    {
                        top: r.top + n.pageYOffset - t.clientTop,
                        left: r.left + n.pageXOffset - t.clientLeft
                    }) : r
            },
            position: function() {
                if (this[0]) {
                    var e, t, n = this[0], i = {
                        top: 0,
                        left: 0
                    };
                    return "fixed" === ie.css(n, "position") ? t = n.getBoundingClientRect() : (e = this.offsetParent(),
                    t = this.offset(),
                    ie.nodeName(e[0], "html") || (i = e.offset()),
                    i.top += ie.css(e[0], "borderTopWidth", !0),
                    i.left += ie.css(e[0], "borderLeftWidth", !0)),
                    {
                        top: t.top - i.top - ie.css(n, "marginTop", !0),
                        left: t.left - i.left - ie.css(n, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var e = this.offsetParent || jt; e && !ie.nodeName(e, "html") && "static" === ie.css(e, "position"); )
                        e = e.offsetParent;
                    return e || jt
                })
            }
        }),
        ie.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(e, t) {
            var i = "pageYOffset" === t;
            ie.fn[e] = function(r) {
                return xe(this, function(e, r, o) {
                    var a = W(e);
                    return void 0 === o ? a ? a[t] : e[r] : void (a ? a.scrollTo(i ? n.pageXOffset : o, i ? o : n.pageYOffset) : e[r] = o)
                }, e, r, arguments.length, null)
            }
        }),
        ie.each(["top", "left"], function(e, t) {
            ie.cssHooks[t] = T(ee.pixelPosition, function(e, n) {
                return n ? (n = C(e, t),
                qe.test(n) ? ie(e).position()[t] + "px" : n) : void 0
            })
        }),
        ie.each({
            Height: "height",
            Width: "width"
        }, function(e, t) {
            ie.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, function(n, i) {
                ie.fn[i] = function(i, r) {
                    var o = arguments.length && (n || "boolean" != typeof i)
                      , a = n || (i === !0 || r === !0 ? "margin" : "border");
                    return xe(this, function(t, n, i) {
                        var r;
                        return ie.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (r = t.documentElement,
                        Math.max(t.body["scroll" + e], r["scroll" + e], t.body["offset" + e], r["offset" + e], r["client" + e])) : void 0 === i ? ie.css(t, n, a) : ie.style(t, n, i, a)
                    }, t, o ? i : void 0, o, null)
                }
            })
        }),
        ie.fn.size = function() {
            return this.length
        }
        ,
        ie.fn.andSelf = ie.fn.addBack,
        i = [],
        r = function() {
            return ie
        }
        .apply(t, i),
        !(void 0 !== r && (e.exports = r));
        var Vt = n.jQuery
          , zt = n.$;
        return ie.noConflict = function(e) {
            return n.$ === ie && (n.$ = zt),
            e && n.jQuery === ie && (n.jQuery = Vt),
            ie
        }
        ,
        typeof o === Ae && (n.jQuery = n.$ = ie),
        ie
    })
}
, function(e, t, n) {
    var i, r;
    !function(o, a) {
        i = [n(75), n(76), n(79), n(80)],
        r = function(e, t) {
            return o.Marionette = o.Mn = a(o, e, t)
        }
        .apply(t, i),
        !(void 0 !== r && (e.exports = r))
    }(this, function(e, t, n) {
        "use strict";
        var i = e.Marionette
          , r = e.Mn
          , o = t.Marionette = {};
        o.VERSION = "2.4.7",
        o.noConflict = function() {
            return e.Marionette = i,
            e.Mn = r,
            this
        }
        ,
        o.Deferred = t.$.Deferred,
        o.FEATURES = {},
        o.isEnabled = function(e) {
            return !!o.FEATURES[e]
        }
        ,
        o.extend = t.Model.extend,
        o.isNodeAttached = function(e) {
            return t.$.contains(document.documentElement, e)
        }
        ,
        o.mergeOptions = function(e, t) {
            e && n.extend(this, n.pick(e, t))
        }
        ,
        o.getOption = function(e, t) {
            return e && t ? e.options && void 0 !== e.options[t] ? e.options[t] : e[t] : void 0
        }
        ,
        o.proxyGetOption = function(e) {
            return o.getOption(this, e)
        }
        ,
        o._getValue = function(e, t, i) {
            return n.isFunction(e) && (e = i ? e.apply(t, i) : e.call(t)),
            e
        }
        ,
        o.normalizeMethods = function(e) {
            return n.reduce(e, function(e, t, i) {
                return n.isFunction(t) || (t = this[t]),
                t && (e[i] = t),
                e
            }, {}, this)
        }
        ,
        o.normalizeUIString = function(e, t) {
            return e.replace(/@ui\.[a-zA-Z-_$0-9]*/g, function(e) {
                return t[e.slice(4)]
            })
        }
        ,
        o.normalizeUIKeys = function(e, t) {
            return n.reduce(e, function(e, n, i) {
                var r = o.normalizeUIString(i, t);
                return e[r] = n,
                e
            }, {})
        }
        ,
        o.normalizeUIValues = function(e, t, i) {
            return n.each(e, function(r, a) {
                n.isString(r) ? e[a] = o.normalizeUIString(r, t) : n.isObject(r) && n.isArray(i) && (n.extend(r, o.normalizeUIValues(n.pick(r, i), t)),
                n.each(i, function(e) {
                    var i = r[e];
                    n.isString(i) && (r[e] = o.normalizeUIString(i, t))
                }))
            }),
            e
        }
        ,
        o.actAsCollection = function(e, t) {
            var i = ["forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck"];
            n.each(i, function(i) {
                e[i] = function() {
                    var e = n.values(n.result(this, t))
                      , r = [e].concat(n.toArray(arguments));
                    return n[i].apply(n, r)
                }
            })
        }
        ;
        var a = o.deprecate = function(e, t) {
            n.isObject(e) && (e = e.prev + " is going to be removed in the future. Please use " + e.next + " instead." + (e.url ? " See: " + e.url : "")),
            void 0 !== t && t || a._cache[e] || (a._warn("Deprecation warning: " + e),
            a._cache[e] = !0)
        }
        ;
        a._console = "undefined" != typeof console ? console : {},
        a._warn = function() {
            var e = a._console.warn || a._console.log || function() {}
            ;
            return e.apply(a._console, arguments)
        }
        ,
        a._cache = {},
        o._triggerMethod = function() {
            function e(e, t, n) {
                return n.toUpperCase()
            }
            var t = /(^|:)(\w)/gi;
            return function(i, r, o) {
                var a = arguments.length < 3;
                a && (o = r,
                r = o[0]);
                var s, l = "on" + r.replace(t, e), c = i[l];
                return n.isFunction(c) && (s = c.apply(i, a ? n.rest(o) : o)),
                n.isFunction(i.trigger) && (a + o.length > 1 ? i.trigger.apply(i, a ? o : [r].concat(n.drop(o, 0))) : i.trigger(r)),
                s
            }
        }(),
        o.triggerMethod = function(e) {
            return o._triggerMethod(this, arguments)
        }
        ,
        o.triggerMethodOn = function(e) {
            var t = n.isFunction(e.triggerMethod) ? e.triggerMethod : o.triggerMethod;
            return t.apply(e, n.rest(arguments))
        }
        ,
        o.MonitorDOMRefresh = function(e) {
            function t() {
                e._isShown = !0,
                i()
            }
            function n() {
                e._isRendered = !0,
                i()
            }
            function i() {
                e._isShown && e._isRendered && o.isNodeAttached(e.el) && o.triggerMethodOn(e, "dom:refresh", e)
            }
            e._isDomRefreshMonitored || (e._isDomRefreshMonitored = !0,
            e.on({
                show: t,
                render: n
            }))
        }
        ,
        function(e) {
            function t(t, i, r, o) {
                var a = o.split(/\s+/);
                n.each(a, function(n) {
                    var o = t[n];
                    if (!o)
                        throw new e.Error('Method "' + n + '" was configured as an event handler, but does not exist.');
                    t.listenTo(i, r, o)
                })
            }
            function i(e, t, n, i) {
                e.listenTo(t, n, i)
            }
            function r(e, t, i, r) {
                var o = r.split(/\s+/);
                n.each(o, function(n) {
                    var r = e[n];
                    e.stopListening(t, i, r)
                })
            }
            function o(e, t, n, i) {
                e.stopListening(t, n, i)
            }
            function a(t, i, r, o, a) {
                if (i && r) {
                    if (!n.isObject(r))
                        throw new e.Error({
                            message: "Bindings must be an object or function.",
                            url: "marionette.functions.html#marionettebindentityevents"
                        });
                    r = e._getValue(r, t),
                    n.each(r, function(e, r) {
                        n.isFunction(e) ? o(t, i, r, e) : a(t, i, r, e)
                    })
                }
            }
            e.bindEntityEvents = function(e, n, r) {
                a(e, n, r, i, t)
            }
            ,
            e.unbindEntityEvents = function(e, t, n) {
                a(e, t, n, o, r)
            }
            ,
            e.proxyBindEntityEvents = function(t, n) {
                return e.bindEntityEvents(this, t, n)
            }
            ,
            e.proxyUnbindEntityEvents = function(t, n) {
                return e.unbindEntityEvents(this, t, n)
            }
        }(o);
        var s = ["description", "fileName", "lineNumber", "name", "message", "number"];
        return o.Error = o.extend.call(Error, {
            urlRoot: "http://marionettejs.com/docs/v" + o.VERSION + "/",
            constructor: function(e, t) {
                n.isObject(e) ? (t = e,
                e = t.message) : t || (t = {});
                var i = Error.call(this, e);
                n.extend(this, n.pick(i, s), n.pick(t, s)),
                this.captureStackTrace(),
                t.url && (this.url = this.urlRoot + t.url)
            },
            captureStackTrace: function() {
                Error.captureStackTrace && Error.captureStackTrace(this, o.Error)
            },
            toString: function() {
                return this.name + ": " + this.message + (this.url ? " See: " + this.url : "")
            }
        }),
        o.Error.extend = o.extend,
        o.Callbacks = function() {
            this._deferred = o.Deferred(),
            this._callbacks = []
        }
        ,
        n.extend(o.Callbacks.prototype, {
            add: function(e, t) {
                var i = n.result(this._deferred, "promise");
                this._callbacks.push({
                    cb: e,
                    ctx: t
                }),
                i.then(function(n) {
                    t && (n.context = t),
                    e.call(n.context, n.options)
                })
            },
            run: function(e, t) {
                this._deferred.resolve({
                    options: e,
                    context: t
                })
            },
            reset: function() {
                var e = this._callbacks;
                this._deferred = o.Deferred(),
                this._callbacks = [],
                n.each(e, function(e) {
                    this.add(e.cb, e.ctx)
                }, this)
            }
        }),
        o.Controller = function(e) {
            this.options = e || {},
            n.isFunction(this.initialize) && this.initialize(this.options)
        }
        ,
        o.Controller.extend = o.extend,
        n.extend(o.Controller.prototype, t.Events, {
            destroy: function() {
                return o._triggerMethod(this, "before:destroy", arguments),
                o._triggerMethod(this, "destroy", arguments),
                this.stopListening(),
                this.off(),
                this
            },
            triggerMethod: o.triggerMethod,
            mergeOptions: o.mergeOptions,
            getOption: o.proxyGetOption
        }),
        o.Object = function(e) {
            this.options = n.extend({}, n.result(this, "options"), e),
            this.initialize.apply(this, arguments)
        }
        ,
        o.Object.extend = o.extend,
        n.extend(o.Object.prototype, t.Events, {
            initialize: function() {},
            destroy: function(e) {
                return e = e || {},
                this.triggerMethod("before:destroy", e),
                this.triggerMethod("destroy", e),
                this.stopListening(),
                this
            },
            triggerMethod: o.triggerMethod,
            mergeOptions: o.mergeOptions,
            getOption: o.proxyGetOption,
            bindEntityEvents: o.proxyBindEntityEvents,
            unbindEntityEvents: o.proxyUnbindEntityEvents
        }),
        o.Region = o.Object.extend({
            constructor: function(e) {
                if (this.options = e || {},
                this.el = this.getOption("el"),
                this.el = this.el instanceof t.$ ? this.el[0] : this.el,
                !this.el)
                    throw new o.Error({
                        name: "NoElError",
                        message: 'An "el" must be specified for a region.'
                    });
                this.$el = this.getEl(this.el),
                o.Object.call(this, e)
            },
            show: function(e, t) {
                if (this._ensureElement()) {
                    this._ensureViewIsIntact(e),
                    o.MonitorDOMRefresh(e);
                    var i = t || {}
                      , r = e !== this.currentView
                      , a = !!i.preventDestroy
                      , s = !!i.forceShow
                      , l = !!this.currentView
                      , c = r && !a
                      , u = r || s;
                    if (l && this.triggerMethod("before:swapOut", this.currentView, this, t),
                    this.currentView && r && delete this.currentView._parent,
                    c ? this.empty() : l && u && this.currentView.off("destroy", this.empty, this),
                    u) {
                        e.once("destroy", this.empty, this),
                        e._parent = this,
                        this._renderView(e),
                        l && this.triggerMethod("before:swap", e, this, t),
                        this.triggerMethod("before:show", e, this, t),
                        o.triggerMethodOn(e, "before:show", e, this, t),
                        l && this.triggerMethod("swapOut", this.currentView, this, t);
                        var h = o.isNodeAttached(this.el)
                          , d = []
                          , f = n.extend({
                            triggerBeforeAttach: this.triggerBeforeAttach,
                            triggerAttach: this.triggerAttach
                        }, i);
                        return h && f.triggerBeforeAttach && (d = this._displayedViews(e),
                        this._triggerAttach(d, "before:")),
                        this.attachHtml(e),
                        this.currentView = e,
                        h && f.triggerAttach && (d = this._displayedViews(e),
                        this._triggerAttach(d)),
                        l && this.triggerMethod("swap", e, this, t),
                        this.triggerMethod("show", e, this, t),
                        o.triggerMethodOn(e, "show", e, this, t),
                        this
                    }
                    return this
                }
            },
            triggerBeforeAttach: !0,
            triggerAttach: !0,
            _triggerAttach: function(e, t) {
                var i = (t || "") + "attach";
                n.each(e, function(e) {
                    o.triggerMethodOn(e, i, e, this)
                }, this)
            },
            _displayedViews: function(e) {
                return n.union([e], n.result(e, "_getNestedViews") || [])
            },
            _renderView: function(e) {
                e.supportsRenderLifecycle || o.triggerMethodOn(e, "before:render", e),
                e.render(),
                e.supportsRenderLifecycle || o.triggerMethodOn(e, "render", e)
            },
            _ensureElement: function() {
                if (n.isObject(this.el) || (this.$el = this.getEl(this.el),
                this.el = this.$el[0]),
                !this.$el || 0 === this.$el.length) {
                    if (this.getOption("allowMissingEl"))
                        return !1;
                    throw new o.Error('An "el" ' + this.$el.selector + " must exist in DOM")
                }
                return !0
            },
            _ensureViewIsIntact: function(e) {
                if (!e)
                    throw new o.Error({
                        name: "ViewNotValid",
                        message: "The view passed is undefined and therefore invalid. You must pass a view instance to show."
                    });
                if (e.isDestroyed)
                    throw new o.Error({
                        name: "ViewDestroyedError",
                        message: 'View (cid: "' + e.cid + '") has already been destroyed and cannot be used.'
                    })
            },
            getEl: function(e) {
                return t.$(e, o._getValue(this.options.parentEl, this))
            },
            attachHtml: function(e) {
                this.$el.contents().detach(),
                this.el.appendChild(e.el)
            },
            empty: function(e) {
                var t = this.currentView
                  , n = e || {}
                  , i = !!n.preventDestroy;
                return t ? (t.off("destroy", this.empty, this),
                this.triggerMethod("before:empty", t),
                i || this._destroyView(),
                this.triggerMethod("empty", t),
                delete this.currentView,
                i && this.$el.contents().detach(),
                this) : this
            },
            _destroyView: function() {
                var e = this.currentView;
                e.isDestroyed || (e.supportsDestroyLifecycle || o.triggerMethodOn(e, "before:destroy", e),
                e.destroy ? e.destroy() : (e.remove(),
                e.isDestroyed = !0),
                e.supportsDestroyLifecycle || o.triggerMethodOn(e, "destroy", e))
            },
            attachView: function(e) {
                return this.currentView && delete this.currentView._parent,
                e._parent = this,
                this.currentView = e,
                this
            },
            hasView: function() {
                return !!this.currentView
            },
            reset: function() {
                return this.empty(),
                this.$el && (this.el = this.$el.selector),
                delete this.$el,
                this
            }
        }, {
            buildRegion: function(e, t) {
                if (n.isString(e))
                    return this._buildRegionFromSelector(e, t);
                if (e.selector || e.el || e.regionClass)
                    return this._buildRegionFromObject(e, t);
                if (n.isFunction(e))
                    return this._buildRegionFromRegionClass(e);
                throw new o.Error({
                    message: "Improper region configuration type.",
                    url: "marionette.region.html#region-configuration-types"
                })
            },
            _buildRegionFromSelector: function(e, t) {
                return new t({
                    el: e
                })
            },
            _buildRegionFromObject: function(e, t) {
                var i = e.regionClass || t
                  , r = n.omit(e, "selector", "regionClass");
                return e.selector && !r.el && (r.el = e.selector),
                new i(r)
            },
            _buildRegionFromRegionClass: function(e) {
                return new e
            }
        }),
        o.RegionManager = o.Controller.extend({
            constructor: function(e) {
                this._regions = {},
                this.length = 0,
                o.Controller.call(this, e),
                this.addRegions(this.getOption("regions"))
            },
            addRegions: function(e, t) {
                return e = o._getValue(e, this, arguments),
                n.reduce(e, function(e, i, r) {
                    return n.isString(i) && (i = {
                        selector: i
                    }),
                    i.selector && (i = n.defaults({}, i, t)),
                    e[r] = this.addRegion(r, i),
                    e
                }, {}, this)
            },
            addRegion: function(e, t) {
                var n;
                return n = t instanceof o.Region ? t : o.Region.buildRegion(t, o.Region),
                this.triggerMethod("before:add:region", e, n),
                n._parent = this,
                this._store(e, n),
                this.triggerMethod("add:region", e, n),
                n
            },
            get: function(e) {
                return this._regions[e]
            },
            getRegions: function() {
                return n.clone(this._regions)
            },
            removeRegion: function(e) {
                var t = this._regions[e];
                return this._remove(e, t),
                t
            },
            removeRegions: function() {
                var e = this.getRegions();
                return n.each(this._regions, function(e, t) {
                    this._remove(t, e)
                }, this),
                e
            },
            emptyRegions: function() {
                var e = this.getRegions();
                return n.invoke(e, "empty"),
                e
            },
            destroy: function() {
                return this.removeRegions(),
                o.Controller.prototype.destroy.apply(this, arguments)
            },
            _store: function(e, t) {
                this._regions[e] || this.length++,
                this._regions[e] = t
            },
            _remove: function(e, t) {
                this.triggerMethod("before:remove:region", e, t),
                t.empty(),
                t.stopListening(),
                delete t._parent,
                delete this._regions[e],
                this.length--,
                this.triggerMethod("remove:region", e, t)
            }
        }),
        o.actAsCollection(o.RegionManager.prototype, "_regions"),
        o.TemplateCache = function(e) {
            this.templateId = e
        }
        ,
        n.extend(o.TemplateCache, {
            templateCaches: {},
            get: function(e, t) {
                var n = this.templateCaches[e];
                return n || (n = new o.TemplateCache(e),
                this.templateCaches[e] = n),
                n.load(t)
            },
            clear: function() {
                var e, t = n.toArray(arguments), i = t.length;
                if (i > 0)
                    for (e = 0; i > e; e++)
                        delete this.templateCaches[t[e]];
                else
                    this.templateCaches = {}
            }
        }),
        n.extend(o.TemplateCache.prototype, {
            load: function(e) {
                if (this.compiledTemplate)
                    return this.compiledTemplate;
                var t = this.loadTemplate(this.templateId, e);
                return this.compiledTemplate = this.compileTemplate(t, e),
                this.compiledTemplate
            },
            loadTemplate: function(e, n) {
                var i = t.$(e);
                if (!i.length)
                    throw new o.Error({
                        name: "NoTemplateError",
                        message: 'Could not find template: "' + e + '"'
                    });
                return i.html()
            },
            compileTemplate: function(e, t) {
                return n.template(e, t)
            }
        }),
        o.Renderer = {
            render: function(e, t) {
                if (!e)
                    throw new o.Error({
                        name: "TemplateNotFoundError",
                        message: "Cannot render the template since its false, null or undefined."
                    });
                var i = n.isFunction(e) ? e : o.TemplateCache.get(e);
                return i(t)
            }
        },
        o.View = t.View.extend({
            isDestroyed: !1,
            supportsRenderLifecycle: !0,
            supportsDestroyLifecycle: !0,
            constructor: function(e) {
                this.render = n.bind(this.render, this),
                e = o._getValue(e, this),
                this.options = n.extend({}, n.result(this, "options"), e),
                this._behaviors = o.Behaviors(this),
                t.View.call(this, this.options),
                o.MonitorDOMRefresh(this)
            },
            getTemplate: function() {
                return this.getOption("template")
            },
            serializeModel: function(e) {
                return e.toJSON.apply(e, n.rest(arguments))
            },
            mixinTemplateHelpers: function(e) {
                e = e || {};
                var t = this.getOption("templateHelpers");
                return t = o._getValue(t, this),
                n.extend(e, t)
            },
            normalizeUIKeys: function(e) {
                var t = n.result(this, "_uiBindings");
                return o.normalizeUIKeys(e, t || n.result(this, "ui"))
            },
            normalizeUIValues: function(e, t) {
                var i = n.result(this, "ui")
                  , r = n.result(this, "_uiBindings");
                return o.normalizeUIValues(e, r || i, t)
            },
            configureTriggers: function() {
                if (this.triggers) {
                    var e = this.normalizeUIKeys(n.result(this, "triggers"));
                    return n.reduce(e, function(e, t, n) {
                        return e[n] = this._buildViewTrigger(t),
                        e
                    }, {}, this)
                }
            },
            delegateEvents: function(e) {
                return this._delegateDOMEvents(e),
                this.bindEntityEvents(this.model, this.getOption("modelEvents")),
                this.bindEntityEvents(this.collection, this.getOption("collectionEvents")),
                n.each(this._behaviors, function(e) {
                    e.bindEntityEvents(this.model, e.getOption("modelEvents")),
                    e.bindEntityEvents(this.collection, e.getOption("collectionEvents"))
                }, this),
                this
            },
            _delegateDOMEvents: function(e) {
                var i = o._getValue(e || this.events, this);
                i = this.normalizeUIKeys(i),
                n.isUndefined(e) && (this.events = i);
                var r = {}
                  , a = n.result(this, "behaviorEvents") || {}
                  , s = this.configureTriggers()
                  , l = n.result(this, "behaviorTriggers") || {};
                n.extend(r, a, i, s, l),
                t.View.prototype.delegateEvents.call(this, r)
            },
            undelegateEvents: function() {
                return t.View.prototype.undelegateEvents.apply(this, arguments),
                this.unbindEntityEvents(this.model, this.getOption("modelEvents")),
                this.unbindEntityEvents(this.collection, this.getOption("collectionEvents")),
                n.each(this._behaviors, function(e) {
                    e.unbindEntityEvents(this.model, e.getOption("modelEvents")),
                    e.unbindEntityEvents(this.collection, e.getOption("collectionEvents"))
                }, this),
                this
            },
            _ensureViewIsIntact: function() {
                if (this.isDestroyed)
                    throw new o.Error({
                        name: "ViewDestroyedError",
                        message: 'View (cid: "' + this.cid + '") has already been destroyed and cannot be used.'
                    })
            },
            destroy: function() {
                if (this.isDestroyed)
                    return this;
                var e = n.toArray(arguments);
                return this.triggerMethod.apply(this, ["before:destroy"].concat(e)),
                this.isDestroyed = !0,
                this.triggerMethod.apply(this, ["destroy"].concat(e)),
                this.unbindUIElements(),
                this.isRendered = !1,
                this.remove(),
                n.invoke(this._behaviors, "destroy", e),
                this
            },
            bindUIElements: function() {
                this._bindUIElements(),
                n.invoke(this._behaviors, this._bindUIElements)
            },
            _bindUIElements: function() {
                if (this.ui) {
                    this._uiBindings || (this._uiBindings = this.ui);
                    var e = n.result(this, "_uiBindings");
                    this.ui = {},
                    n.each(e, function(e, t) {
                        this.ui[t] = this.$(e)
                    }, this)
                }
            },
            unbindUIElements: function() {
                this._unbindUIElements(),
                n.invoke(this._behaviors, this._unbindUIElements)
            },
            _unbindUIElements: function() {
                this.ui && this._uiBindings && (n.each(this.ui, function(e, t) {
                    delete this.ui[t]
                }, this),
                this.ui = this._uiBindings,
                delete this._uiBindings)
            },
            _buildViewTrigger: function(e) {
                var t = n.defaults({}, e, {
                    preventDefault: !0,
                    stopPropagation: !0
                })
                  , i = n.isObject(e) ? t.event : e;
                return function(e) {
                    e && (e.preventDefault && t.preventDefault && e.preventDefault(),
                    e.stopPropagation && t.stopPropagation && e.stopPropagation());
                    var n = {
                        view: this,
                        model: this.model,
                        collection: this.collection
                    };
                    this.triggerMethod(i, n)
                }
            },
            setElement: function() {
                var e = t.View.prototype.setElement.apply(this, arguments);
                return n.invoke(this._behaviors, "proxyViewProperties", this),
                e
            },
            triggerMethod: function() {
                var e = o._triggerMethod(this, arguments);
                return this._triggerEventOnBehaviors(arguments),
                this._triggerEventOnParentLayout(arguments[0], n.rest(arguments)),
                e
            },
            _triggerEventOnBehaviors: function(e) {
                for (var t = o._triggerMethod, n = this._behaviors, i = 0, r = n && n.length; r > i; i++)
                    t(n[i], e)
            },
            _triggerEventOnParentLayout: function(e, t) {
                var i = this._parentLayoutView();
                if (i) {
                    var r = o.getOption(i, "childViewEventPrefix")
                      , a = r + ":" + e
                      , s = [this].concat(t);
                    o._triggerMethod(i, a, s);
                    var l = o.getOption(i, "childEvents");
                    l = o._getValue(l, i);
                    var c = i.normalizeMethods(l);
                    c && n.isFunction(c[e]) && c[e].apply(i, s)
                }
            },
            _getImmediateChildren: function() {
                return []
            },
            _getNestedViews: function() {
                var e = this._getImmediateChildren();
                return e.length ? n.reduce(e, function(e, t) {
                    return t._getNestedViews ? e.concat(t._getNestedViews()) : e
                }, e) : e
            },
            _parentLayoutView: function() {
                for (var e = this._parent; e; ) {
                    if (e instanceof o.LayoutView)
                        return e;
                    e = e._parent
                }
            },
            normalizeMethods: o.normalizeMethods,
            mergeOptions: o.mergeOptions,
            getOption: o.proxyGetOption,
            bindEntityEvents: o.proxyBindEntityEvents,
            unbindEntityEvents: o.proxyUnbindEntityEvents
        }),
        o.ItemView = o.View.extend({
            constructor: function() {
                o.View.apply(this, arguments)
            },
            serializeData: function() {
                if (!this.model && !this.collection)
                    return {};
                var e = [this.model || this.collection];
                return arguments.length && e.push.apply(e, arguments),
                this.model ? this.serializeModel.apply(this, e) : {
                    items: this.serializeCollection.apply(this, e)
                }
            },
            serializeCollection: function(e) {
                return e.toJSON.apply(e, n.rest(arguments))
            },
            render: function() {
                return this._ensureViewIsIntact(),
                this.triggerMethod("before:render", this),
                this._renderTemplate(),
                this.isRendered = !0,
                this.bindUIElements(),
                this.triggerMethod("render", this),
                this
            },
            _renderTemplate: function() {
                var e = this.getTemplate();
                if (e !== !1) {
                    if (!e)
                        throw new o.Error({
                            name: "UndefinedTemplateError",
                            message: "Cannot render the template since it is null or undefined."
                        });
                    var t = this.mixinTemplateHelpers(this.serializeData())
                      , n = o.Renderer.render(e, t, this);
                    return this.attachElContent(n),
                    this
                }
            },
            attachElContent: function(e) {
                return this.$el.html(e),
                this
            }
        }),
        o.CollectionView = o.View.extend({
            childViewEventPrefix: "childview",
            sort: !0,
            constructor: function(e) {
                this.once("render", this._initialEvents),
                this._initChildViewStorage(),
                o.View.apply(this, arguments),
                this.on({
                    "before:show": this._onBeforeShowCalled,
                    show: this._onShowCalled,
                    "before:attach": this._onBeforeAttachCalled,
                    attach: this._onAttachCalled
                }),
                this.initRenderBuffer()
            },
            initRenderBuffer: function() {
                this._bufferedChildren = []
            },
            startBuffering: function() {
                this.initRenderBuffer(),
                this.isBuffering = !0
            },
            endBuffering: function() {
                var e, t = this._isShown && o.isNodeAttached(this.el);
                this.isBuffering = !1,
                this._isShown && this._triggerMethodMany(this._bufferedChildren, this, "before:show"),
                t && this._triggerBeforeAttach && (e = this._getNestedViews(),
                this._triggerMethodMany(e, this, "before:attach")),
                this.attachBuffer(this, this._createBuffer()),
                t && this._triggerAttach && (e = this._getNestedViews(),
                this._triggerMethodMany(e, this, "attach")),
                this._isShown && this._triggerMethodMany(this._bufferedChildren, this, "show"),
                this.initRenderBuffer()
            },
            _triggerMethodMany: function(e, t, i) {
                var r = n.drop(arguments, 3);
                n.each(e, function(e) {
                    o.triggerMethodOn.apply(e, [e, i, e, t].concat(r))
                })
            },
            _initialEvents: function() {
                this.collection && (this.listenTo(this.collection, "add", this._onCollectionAdd),
                this.listenTo(this.collection, "remove", this._onCollectionRemove),
                this.listenTo(this.collection, "reset", this.render),
                this.getOption("sort") && this.listenTo(this.collection, "sort", this._sortViews))
            },
            _onCollectionAdd: function(e, t, i) {
                var r = void 0 !== i.at && (i.index || t.indexOf(e));
                if ((this.getOption("filter") || r === !1) && (r = n.indexOf(this._filteredSortedModels(r), e)),
                this._shouldAddChild(e, r)) {
                    this.destroyEmptyView();
                    var o = this.getChildView(e);
                    this.addChild(e, o, r)
                }
            },
            _onCollectionRemove: function(e) {
                var t = this.children.findByModel(e);
                this.removeChildView(t),
                this.checkEmpty()
            },
            _onBeforeShowCalled: function() {
                this._triggerBeforeAttach = this._triggerAttach = !1,
                this.children.each(function(e) {
                    o.triggerMethodOn(e, "before:show", e)
                })
            },
            _onShowCalled: function() {
                this.children.each(function(e) {
                    o.triggerMethodOn(e, "show", e)
                })
            },
            _onBeforeAttachCalled: function() {
                this._triggerBeforeAttach = !0
            },
            _onAttachCalled: function() {
                this._triggerAttach = !0
            },
            render: function() {
                return this._ensureViewIsIntact(),
                this.triggerMethod("before:render", this),
                this._renderChildren(),
                this.isRendered = !0,
                this.triggerMethod("render", this),
                this
            },
            reorder: function() {
                var e = this.children
                  , t = this._filteredSortedModels();
                if (!t.length && this._showingEmptyView)
                    return this;
                var i = n.some(t, function(t) {
                    return !e.findByModel(t)
                });
                if (i)
                    this.render();
                else {
                    var r = n.map(t, function(t, n) {
                        var i = e.findByModel(t);
                        return i._index = n,
                        i.el
                    })
                      , o = e.filter(function(e) {
                        return !n.contains(r, e.el)
                    });
                    this.triggerMethod("before:reorder"),
                    this._appendReorderedChildren(r),
                    n.each(o, this.removeChildView, this),
                    this.checkEmpty(),
                    this.triggerMethod("reorder")
                }
            },
            resortView: function() {
                o.getOption(this, "reorderOnSort") ? this.reorder() : this.render()
            },
            _sortViews: function() {
                var e = this._filteredSortedModels()
                  , t = n.find(e, function(e, t) {
                    var n = this.children.findByModel(e);
                    return !n || n._index !== t
                }, this);
                t && this.resortView()
            },
            _emptyViewIndex: -1,
            _appendReorderedChildren: function(e) {
                this.$el.append(e)
            },
            _renderChildren: function() {
                this.destroyEmptyView(),
                this.destroyChildren({
                    checkEmpty: !1
                }),
                this.isEmpty(this.collection) ? this.showEmptyView() : (this.triggerMethod("before:render:collection", this),
                this.startBuffering(),
                this.showCollection(),
                this.endBuffering(),
                this.triggerMethod("render:collection", this),
                this.children.isEmpty() && this.getOption("filter") && this.showEmptyView())
            },
            showCollection: function() {
                var e, t = this._filteredSortedModels();
                n.each(t, function(t, n) {
                    e = this.getChildView(t),
                    this.addChild(t, e, n)
                }, this)
            },
            _filteredSortedModels: function(e) {
                var t = this.getViewComparator()
                  , i = this.collection.models;
                if (e = Math.min(Math.max(e, 0), i.length - 1),
                t) {
                    var r;
                    e && (r = i[e],
                    i = i.slice(0, e).concat(i.slice(e + 1))),
                    i = this._sortModelsBy(i, t),
                    r && i.splice(e, 0, r)
                }
                return this.getOption("filter") && (i = n.filter(i, function(e, t) {
                    return this._shouldAddChild(e, t)
                }, this)),
                i
            },
            _sortModelsBy: function(e, t) {
                return "string" == typeof t ? n.sortBy(e, function(e) {
                    return e.get(t)
                }, this) : 1 === t.length ? n.sortBy(e, t, this) : e.sort(n.bind(t, this))
            },
            showEmptyView: function() {
                var e = this.getEmptyView();
                if (e && !this._showingEmptyView) {
                    this.triggerMethod("before:render:empty"),
                    this._showingEmptyView = !0;
                    var n = new t.Model;
                    this.addEmptyView(n, e),
                    this.triggerMethod("render:empty")
                }
            },
            destroyEmptyView: function() {
                this._showingEmptyView && (this.triggerMethod("before:remove:empty"),
                this.destroyChildren(),
                delete this._showingEmptyView,
                this.triggerMethod("remove:empty"))
            },
            getEmptyView: function() {
                return this.getOption("emptyView")
            },
            addEmptyView: function(e, t) {
                var i, r = this._isShown && !this.isBuffering && o.isNodeAttached(this.el), a = this.getOption("emptyViewOptions") || this.getOption("childViewOptions");
                n.isFunction(a) && (a = a.call(this, e, this._emptyViewIndex));
                var s = this.buildChildView(e, t, a);
                s._parent = this,
                this.proxyChildEvents(s),
                s.once("render", function() {
                    this._isShown && o.triggerMethodOn(s, "before:show", s),
                    r && this._triggerBeforeAttach && (i = this._getViewAndNested(s),
                    this._triggerMethodMany(i, this, "before:attach"))
                }, this),
                this.children.add(s),
                this.renderChildView(s, this._emptyViewIndex),
                r && this._triggerAttach && (i = this._getViewAndNested(s),
                this._triggerMethodMany(i, this, "attach")),
                this._isShown && o.triggerMethodOn(s, "show", s)
            },
            getChildView: function(e) {
                var t = this.getOption("childView");
                if (!t)
                    throw new o.Error({
                        name: "NoChildViewError",
                        message: 'A "childView" must be specified'
                    });
                return t
            },
            addChild: function(e, t, n) {
                var i = this.getOption("childViewOptions");
                i = o._getValue(i, this, [e, n]);
                var r = this.buildChildView(e, t, i);
                return this._updateIndices(r, !0, n),
                this.triggerMethod("before:add:child", r),
                this._addChildView(r, n),
                this.triggerMethod("add:child", r),
                r._parent = this,
                r
            },
            _updateIndices: function(e, t, n) {
                this.getOption("sort") && (t && (e._index = n),
                this.children.each(function(n) {
                    n._index >= e._index && (n._index += t ? 1 : -1)
                }))
            },
            _addChildView: function(e, t) {
                var n, i = this._isShown && !this.isBuffering && o.isNodeAttached(this.el);
                this.proxyChildEvents(e),
                e.once("render", function() {
                    this._isShown && !this.isBuffering && o.triggerMethodOn(e, "before:show", e),
                    i && this._triggerBeforeAttach && (n = this._getViewAndNested(e),
                    this._triggerMethodMany(n, this, "before:attach"))
                }, this),
                this.children.add(e),
                this.renderChildView(e, t),
                i && this._triggerAttach && (n = this._getViewAndNested(e),
                this._triggerMethodMany(n, this, "attach")),
                this._isShown && !this.isBuffering && o.triggerMethodOn(e, "show", e)
            },
            renderChildView: function(e, t) {
                return e.supportsRenderLifecycle || o.triggerMethodOn(e, "before:render", e),
                e.render(),
                e.supportsRenderLifecycle || o.triggerMethodOn(e, "render", e),
                this.attachHtml(this, e, t),
                e
            },
            buildChildView: function(e, t, i) {
                var r = n.extend({
                    model: e
                }, i)
                  , a = new t(r);
                return o.MonitorDOMRefresh(a),
                a
            },
            removeChildView: function(e) {
                return e ? (this.triggerMethod("before:remove:child", e),
                e.supportsDestroyLifecycle || o.triggerMethodOn(e, "before:destroy", e),
                e.destroy ? e.destroy() : e.remove(),
                e.supportsDestroyLifecycle || o.triggerMethodOn(e, "destroy", e),
                delete e._parent,
                this.stopListening(e),
                this.children.remove(e),
                this.triggerMethod("remove:child", e),
                this._updateIndices(e, !1),
                e) : e
            },
            isEmpty: function() {
                return !this.collection || 0 === this.collection.length
            },
            checkEmpty: function() {
                this.isEmpty(this.collection) && this.showEmptyView()
            },
            attachBuffer: function(e, t) {
                e.$el.append(t)
            },
            _createBuffer: function() {
                var e = document.createDocumentFragment();
                return n.each(this._bufferedChildren, function(t) {
                    e.appendChild(t.el)
                }),
                e
            },
            attachHtml: function(e, t, n) {
                e.isBuffering ? e._bufferedChildren.splice(n, 0, t) : e._insertBefore(t, n) || e._insertAfter(t)
            },
            _insertBefore: function(e, t) {
                var n, i = this.getOption("sort") && t < this.children.length - 1;
                return i && (n = this.children.find(function(e) {
                    return e._index === t + 1
                })),
                n ? (n.$el.before(e.el),
                !0) : !1
            },
            _insertAfter: function(e) {
                this.$el.append(e.el)
            },
            _initChildViewStorage: function() {
                this.children = new t.ChildViewContainer
            },
            destroy: function() {
                return this.isDestroyed ? this : (this.triggerMethod("before:destroy:collection"),
                this.destroyChildren({
                    checkEmpty: !1
                }),
                this.triggerMethod("destroy:collection"),
                o.View.prototype.destroy.apply(this, arguments))
            },
            destroyChildren: function(e) {
                var t = e || {}
                  , i = !0
                  , r = this.children.map(n.identity);
                return n.isUndefined(t.checkEmpty) || (i = t.checkEmpty),
                this.children.each(this.removeChildView, this),
                i && this.checkEmpty(),
                r
            },
            _shouldAddChild: function(e, t) {
                var i = this.getOption("filter");
                return !n.isFunction(i) || i.call(this, e, t, this.collection)
            },
            proxyChildEvents: function(e) {
                var t = this.getOption("childViewEventPrefix");
                this.listenTo(e, "all", function() {
                    var i = n.toArray(arguments)
                      , r = i[0]
                      , o = this.normalizeMethods(n.result(this, "childEvents"));
                    i[0] = t + ":" + r,
                    i.splice(1, 0, e),
                    "undefined" != typeof o && n.isFunction(o[r]) && o[r].apply(this, i.slice(1)),
                    this.triggerMethod.apply(this, i)
                })
            },
            _getImmediateChildren: function() {
                return n.values(this.children._views)
            },
            _getViewAndNested: function(e) {
                return [e].concat(n.result(e, "_getNestedViews") || [])
            },
            getViewComparator: function() {
                return this.getOption("viewComparator")
            }
        }),
        o.CompositeView = o.CollectionView.extend({
            constructor: function() {
                o.CollectionView.apply(this, arguments)
            },
            _initialEvents: function() {
                this.collection && (this.listenTo(this.collection, "add", this._onCollectionAdd),
                this.listenTo(this.collection, "remove", this._onCollectionRemove),
                this.listenTo(this.collection, "reset", this._renderChildren),
                this.getOption("sort") && this.listenTo(this.collection, "sort", this._sortViews))
            },
            getChildView: function(e) {
                var t = this.getOption("childView") || this.constructor;
                return t
            },
            serializeData: function() {
                var e = {};
                return this.model && (e = n.partial(this.serializeModel, this.model).apply(this, arguments)),
                e
            },
            render: function() {
                return this._ensureViewIsIntact(),
                this._isRendering = !0,
                this.resetChildViewContainer(),
                this.triggerMethod("before:render", this),
                this._renderTemplate(),
                this._renderChildren(),
                this._isRendering = !1,
                this.isRendered = !0,
                this.triggerMethod("render", this),
                this
            },
            _renderChildren: function() {
                (this.isRendered || this._isRendering) && o.CollectionView.prototype._renderChildren.call(this)
            },
            _renderTemplate: function() {
                var e = {};
                e = this.serializeData(),
                e = this.mixinTemplateHelpers(e),
                this.triggerMethod("before:render:template");
                var t = this.getTemplate()
                  , n = o.Renderer.render(t, e, this);
                this.attachElContent(n),
                this.bindUIElements(),
                this.triggerMethod("render:template")
            },
            attachElContent: function(e) {
                return this.$el.html(e),
                this
            },
            attachBuffer: function(e, t) {
                var n = this.getChildViewContainer(e);
                n.append(t)
            },
            _insertAfter: function(e) {
                var t = this.getChildViewContainer(this, e);
                t.append(e.el)
            },
            _appendReorderedChildren: function(e) {
                var t = this.getChildViewContainer(this);
                t.append(e)
            },
            getChildViewContainer: function(e, t) {
                if (e.$childViewContainer)
                    return e.$childViewContainer;
                var n, i = o.getOption(e, "childViewContainer");
                if (i) {
                    var r = o._getValue(i, e);
                    if (n = "@" === r.charAt(0) && e.ui ? e.ui[r.substr(4)] : e.$(r),
                    n.length <= 0)
                        throw new o.Error({
                            name: "ChildViewContainerMissingError",
                            message: 'The specified "childViewContainer" was not found: ' + e.childViewContainer
                        })
                } else
                    n = e.$el;
                return e.$childViewContainer = n,
                n
            },
            resetChildViewContainer: function() {
                this.$childViewContainer && (this.$childViewContainer = void 0)
            }
        }),
        o.LayoutView = o.ItemView.extend({
            regionClass: o.Region,
            options: {
                destroyImmediate: !1
            },
            childViewEventPrefix: "childview",
            constructor: function(e) {
                e = e || {},
                this._firstRender = !0,
                this._initializeRegions(e),
                o.ItemView.call(this, e)
            },
            render: function() {
                return this._ensureViewIsIntact(),
                this._firstRender ? this._firstRender = !1 : this._reInitializeRegions(),
                o.ItemView.prototype.render.apply(this, arguments)
            },
            destroy: function() {
                return this.isDestroyed ? this : (this.getOption("destroyImmediate") === !0 && this.$el.remove(),
                this.regionManager.destroy(),
                o.ItemView.prototype.destroy.apply(this, arguments))
            },
            showChildView: function(e, t, i) {
                var r = this.getRegion(e);
                return r.show.apply(r, n.rest(arguments))
            },
            getChildView: function(e) {
                return this.getRegion(e).currentView
            },
            addRegion: function(e, t) {
                var n = {};
                return n[e] = t,
                this._buildRegions(n)[e]
            },
            addRegions: function(e) {
                return this.regions = n.extend({}, this.regions, e),
                this._buildRegions(e)
            },
            removeRegion: function(e) {
                return delete this.regions[e],
                this.regionManager.removeRegion(e)
            },
            getRegion: function(e) {
                return this.regionManager.get(e)
            },
            getRegions: function() {
                return this.regionManager.getRegions()
            },
            _buildRegions: function(e) {
                var t = {
                    regionClass: this.getOption("regionClass"),
                    parentEl: n.partial(n.result, this, "el")
                };
                return this.regionManager.addRegions(e, t)
            },
            _initializeRegions: function(e) {
                var t;
                this._initRegionManager(),
                t = o._getValue(this.regions, this, [e]) || {};
                var i = this.getOption.call(e, "regions");
                i = o._getValue(i, this, [e]),
                n.extend(t, i),
                t = this.normalizeUIValues(t, ["selector", "el"]),
                this.addRegions(t)
            },
            _reInitializeRegions: function() {
                this.regionManager.invoke("reset")
            },
            getRegionManager: function() {
                return new o.RegionManager
            },
            _initRegionManager: function() {
                this.regionManager = this.getRegionManager(),
                this.regionManager._parent = this,
                this.listenTo(this.regionManager, "before:add:region", function(e) {
                    this.triggerMethod("before:add:region", e)
                }),
                this.listenTo(this.regionManager, "add:region", function(e, t) {
                    this[e] = t,
                    this.triggerMethod("add:region", e, t)
                }),
                this.listenTo(this.regionManager, "before:remove:region", function(e) {
                    this.triggerMethod("before:remove:region", e)
                }),
                this.listenTo(this.regionManager, "remove:region", function(e, t) {
                    delete this[e],
                    this.triggerMethod("remove:region", e, t)
                })
            },
            _getImmediateChildren: function() {
                return n.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()
            }
        }),
        o.Behavior = o.Object.extend({
            constructor: function(e, t) {
                this.view = t,
                this.defaults = n.result(this, "defaults") || {},
                this.options = n.extend({}, this.defaults, e),
                this.ui = n.extend({}, n.result(t, "ui"), n.result(this, "ui")),
                o.Object.apply(this, arguments)
            },
            $: function() {
                return this.view.$.apply(this.view, arguments)
            },
            destroy: function() {
                return this.stopListening(),
                this
            },
            proxyViewProperties: function(e) {
                this.$el = e.$el,
                this.el = e.el
            }
        }),
        o.Behaviors = function(e, t) {
            function n(e, i) {
                return t.isObject(e.behaviors) ? (i = n.parseBehaviors(e, i || t.result(e, "behaviors")),
                n.wrap(e, i, t.keys(a)),
                i) : {}
            }
            function i(e, t) {
                this._view = e,
                this._behaviors = t,
                this._triggers = {}
            }
            function r(e) {
                return e._uiBindings || e.ui
            }
            var o = /^(\S+)\s*(.*)$/
              , a = {
                behaviorTriggers: function(e, t) {
                    var n = new i(this,t);
                    return n.buildBehaviorTriggers()
                },
                behaviorEvents: function(n, i) {
                    var a = {};
                    return t.each(i, function(n, i) {
                        var s = {}
                          , l = t.clone(t.result(n, "events")) || {};
                        l = e.normalizeUIKeys(l, r(n));
                        var c = 0;
                        t.each(l, function(e, r) {
                            var a = r.match(o)
                              , l = a[1] + "." + [this.cid, i, c++, " "].join("")
                              , u = a[2]
                              , h = l + u
                              , d = t.isFunction(e) ? e : n[e];
                            d && (s[h] = t.bind(d, n))
                        }, this),
                        a = t.extend(a, s)
                    }, this),
                    a
                }
            };
            return t.extend(n, {
                behaviorsLookup: function() {
                    throw new e.Error({
                        message: "You must define where your behaviors are stored.",
                        url: "marionette.behaviors.html#behaviorslookup"
                    })
                },
                getBehaviorClass: function(t, i) {
                    return t.behaviorClass ? t.behaviorClass : e._getValue(n.behaviorsLookup, this, [t, i])[i]
                },
                parseBehaviors: function(e, i) {
                    return t.chain(i).map(function(i, r) {
                        var o = n.getBehaviorClass(i, r)
                          , a = new o(i,e)
                          , s = n.parseBehaviors(e, t.result(a, "behaviors"));
                        return [a].concat(s)
                    }).flatten().value()
                },
                wrap: function(e, n, i) {
                    t.each(i, function(i) {
                        e[i] = t.partial(a[i], e[i], n)
                    })
                }
            }),
            t.extend(i.prototype, {
                buildBehaviorTriggers: function() {
                    return t.each(this._behaviors, this._buildTriggerHandlersForBehavior, this),
                    this._triggers
                },
                _buildTriggerHandlersForBehavior: function(n, i) {
                    var o = t.clone(t.result(n, "triggers")) || {};
                    o = e.normalizeUIKeys(o, r(n)),
                    t.each(o, t.bind(this._setHandlerForBehavior, this, n, i))
                },
                _setHandlerForBehavior: function(e, t, n, i) {
                    var r = i.replace(/^\S+/, function(e) {
                        return e + ".behaviortriggers" + t
                    });
                    this._triggers[r] = this._view._buildViewTrigger(n)
                }
            }),
            n
        }(o, n),
        o.AppRouter = t.Router.extend({
            constructor: function(e) {
                this.options = e || {},
                t.Router.apply(this, arguments);
                var n = this.getOption("appRoutes")
                  , i = this._getController();
                this.processAppRoutes(i, n),
                this.on("route", this._processOnRoute, this)
            },
            appRoute: function(e, t) {
                var n = this._getController();
                this._addAppRoute(n, e, t)
            },
            _processOnRoute: function(e, t) {
                if (n.isFunction(this.onRoute)) {
                    var i = n.invert(this.getOption("appRoutes"))[e];
                    this.onRoute(e, i, t)
                }
            },
            processAppRoutes: function(e, t) {
                if (t) {
                    var i = n.keys(t).reverse();
                    n.each(i, function(n) {
                        this._addAppRoute(e, n, t[n])
                    }, this)
                }
            },
            _getController: function() {
                return this.getOption("controller")
            },
            _addAppRoute: function(e, t, i) {
                var r = e[i];
                if (!r)
                    throw new o.Error('Method "' + i + '" was not found on the controller');
                this.route(t, i, n.bind(r, e))
            },
            mergeOptions: o.mergeOptions,
            getOption: o.proxyGetOption,
            triggerMethod: o.triggerMethod,
            bindEntityEvents: o.proxyBindEntityEvents,
            unbindEntityEvents: o.proxyUnbindEntityEvents
        }),
        o.Application = o.Object.extend({
            constructor: function(e) {
                this._initializeRegions(e),
                this._initCallbacks = new o.Callbacks,
                this.submodules = {},
                n.extend(this, e),
                this._initChannel(),
                o.Object.apply(this, arguments)
            },
            execute: function() {
                this.commands.execute.apply(this.commands, arguments)
            },
            request: function() {
                return this.reqres.request.apply(this.reqres, arguments)
            },
            addInitializer: function(e) {
                this._initCallbacks.add(e)
            },
            start: function(e) {
                this.triggerMethod("before:start", e),
                this._initCallbacks.run(e, this),
                this.triggerMethod("start", e)
            },
            addRegions: function(e) {
                return this._regionManager.addRegions(e)
            },
            emptyRegions: function() {
                return this._regionManager.emptyRegions()
            },
            removeRegion: function(e) {
                return this._regionManager.removeRegion(e)
            },
            getRegion: function(e) {
                return this._regionManager.get(e)
            },
            getRegions: function() {
                return this._regionManager.getRegions()
            },
            module: function(e, t) {
                var i = o.Module.getClass(t)
                  , r = n.toArray(arguments);
                return r.unshift(this),
                i.create.apply(i, r)
            },
            getRegionManager: function() {
                return new o.RegionManager
            },
            _initializeRegions: function(e) {
                var t = n.isFunction(this.regions) ? this.regions(e) : this.regions || {};
                this._initRegionManager();
                var i = o.getOption(e, "regions");
                return n.isFunction(i) && (i = i.call(this, e)),
                n.extend(t, i),
                this.addRegions(t),
                this
            },
            _initRegionManager: function() {
                this._regionManager = this.getRegionManager(),
                this._regionManager._parent = this,
                this.listenTo(this._regionManager, "before:add:region", function() {
                    o._triggerMethod(this, "before:add:region", arguments)
                }),
                this.listenTo(this._regionManager, "add:region", function(e, t) {
                    this[e] = t,
                    o._triggerMethod(this, "add:region", arguments)
                }),
                this.listenTo(this._regionManager, "before:remove:region", function() {
                    o._triggerMethod(this, "before:remove:region", arguments)
                }),
                this.listenTo(this._regionManager, "remove:region", function(e) {
                    delete this[e],
                    o._triggerMethod(this, "remove:region", arguments)
                })
            },
            _initChannel: function() {
                this.channelName = n.result(this, "channelName") || "global",
                this.channel = n.result(this, "channel") || t.Wreqr.radio.channel(this.channelName),
                this.vent = n.result(this, "vent") || this.channel.vent,
                this.commands = n.result(this, "commands") || this.channel.commands,
                this.reqres = n.result(this, "reqres") || this.channel.reqres
            }
        }),
        o.Module = function(e, t, i) {
            this.moduleName = e,
            this.options = n.extend({}, this.options, i),
            this.initialize = i.initialize || this.initialize,
            this.submodules = {},
            this._setupInitializersAndFinalizers(),
            this.app = t,
            n.isFunction(this.initialize) && this.initialize(e, t, this.options)
        }
        ,
        o.Module.extend = o.extend,
        n.extend(o.Module.prototype, t.Events, {
            startWithParent: !0,
            initialize: function() {},
            addInitializer: function(e) {
                this._initializerCallbacks.add(e)
            },
            addFinalizer: function(e) {
                this._finalizerCallbacks.add(e)
            },
            start: function(e) {
                this._isInitialized || (n.each(this.submodules, function(t) {
                    t.startWithParent && t.start(e)
                }),
                this.triggerMethod("before:start", e),
                this._initializerCallbacks.run(e, this),
                this._isInitialized = !0,
                this.triggerMethod("start", e))
            },
            stop: function() {
                this._isInitialized && (this._isInitialized = !1,
                this.triggerMethod("before:stop"),
                n.invoke(this.submodules, "stop"),
                this._finalizerCallbacks.run(void 0, this),
                this._initializerCallbacks.reset(),
                this._finalizerCallbacks.reset(),
                this.triggerMethod("stop"))
            },
            addDefinition: function(e, t) {
                this._runModuleDefinition(e, t)
            },
            _runModuleDefinition: function(e, i) {
                if (e) {
                    var r = n.flatten([this, this.app, t, o, t.$, n, i]);
                    e.apply(this, r)
                }
            },
            _setupInitializersAndFinalizers: function() {
                this._initializerCallbacks = new o.Callbacks,
                this._finalizerCallbacks = new o.Callbacks
            },
            triggerMethod: o.triggerMethod
        }),
        n.extend(o.Module, {
            create: function(e, t, i) {
                var r = e
                  , o = n.drop(arguments, 3);
                t = t.split(".");
                var a = t.length
                  , s = [];
                return s[a - 1] = i,
                n.each(t, function(t, n) {
                    var a = r;
                    r = this._getModule(a, t, e, i),
                    this._addModuleDefinition(a, r, s[n], o)
                }, this),
                r
            },
            _getModule: function(e, t, i, r, o) {
                var a = n.extend({}, r)
                  , s = this.getClass(r)
                  , l = e[t];
                return l || (l = new s(t,i,a),
                e[t] = l,
                e.submodules[t] = l),
                l
            },
            getClass: function(e) {
                var t = o.Module;
                return e ? e.prototype instanceof t ? e : e.moduleClass || t : t
            },
            _addModuleDefinition: function(e, t, n, i) {
                var r = this._getDefine(n)
                  , o = this._getStartWithParent(n, t);
                r && t.addDefinition(r, i),
                this._addStartWithParent(e, t, o)
            },
            _getStartWithParent: function(e, t) {
                var i;
                return n.isFunction(e) && e.prototype instanceof o.Module ? (i = t.constructor.prototype.startWithParent,
                n.isUndefined(i) ? !0 : i) : n.isObject(e) ? (i = e.startWithParent,
                n.isUndefined(i) ? !0 : i) : !0
            },
            _getDefine: function(e) {
                return !n.isFunction(e) || e.prototype instanceof o.Module ? n.isObject(e) ? e.define : null : e
            },
            _addStartWithParent: function(e, t, n) {
                t.startWithParent = t.startWithParent && n,
                t.startWithParent && !t.startWithParentIsConfigured && (t.startWithParentIsConfigured = !0,
                e.addInitializer(function(e) {
                    t.startWithParent && t.start(e)
                }))
            }
        }),
        o
    })
}
, function(e, t, n) {
    var i, r;
    !function(o, a) {
        i = [n(75), n(76)],
        r = function(e, t) {
            return a(e, t)
        }
        .apply(t, i),
        !(void 0 !== r && (e.exports = r))
    }(this, function(e, t) {
        "use strict";
        var n = e.Wreqr
          , i = e.Wreqr = {};
        return e.Wreqr.VERSION = "1.3.6",
        e.Wreqr.noConflict = function() {
            return e.Wreqr = n,
            this
        }
        ,
        i.Handlers = function(e, t) {
            var n = function(e) {
                this.options = e,
                this._wreqrHandlers = {},
                t.isFunction(this.initialize) && this.initialize(e)
            };
            return n.extend = e.Model.extend,
            t.extend(n.prototype, e.Events, {
                setHandlers: function(e) {
                    t.each(e, function(e, n) {
                        var i = null;
                        t.isObject(e) && !t.isFunction(e) && (i = e.context,
                        e = e.callback),
                        this.setHandler(n, e, i)
                    }, this)
                },
                setHandler: function(e, t, n) {
                    var i = {
                        callback: t,
                        context: n
                    };
                    this._wreqrHandlers[e] = i,
                    this.trigger("handler:add", e, t, n)
                },
                hasHandler: function(e) {
                    return !!this._wreqrHandlers[e]
                },
                getHandler: function(e) {
                    var t = this._wreqrHandlers[e];
                    if (t)
                        return function() {
                            return t.callback.apply(t.context, arguments)
                        }
                },
                removeHandler: function(e) {
                    delete this._wreqrHandlers[e]
                },
                removeAllHandlers: function() {
                    this._wreqrHandlers = {}
                }
            }),
            n
        }(e, t),
        i.CommandStorage = function() {
            var n = function(e) {
                this.options = e,
                this._commands = {},
                t.isFunction(this.initialize) && this.initialize(e)
            };
            return t.extend(n.prototype, e.Events, {
                getCommands: function(e) {
                    var t = this._commands[e];
                    return t || (t = {
                        command: e,
                        instances: []
                    },
                    this._commands[e] = t),
                    t
                },
                addCommand: function(e, t) {
                    var n = this.getCommands(e);
                    n.instances.push(t)
                },
                clearCommands: function(e) {
                    var t = this.getCommands(e);
                    t.instances = []
                }
            }),
            n
        }(),
        i.Commands = function(e, t) {
            return e.Handlers.extend({
                storageType: e.CommandStorage,
                constructor: function(t) {
                    this.options = t || {},
                    this._initializeStorage(this.options),
                    this.on("handler:add", this._executeCommands, this),
                    e.Handlers.prototype.constructor.apply(this, arguments)
                },
                execute: function(e) {
                    e = arguments[0];
                    var n = t.rest(arguments);
                    this.hasHandler(e) ? this.getHandler(e).apply(this, n) : this.storage.addCommand(e, n)
                },
                _executeCommands: function(e, n, i) {
                    var r = this.storage.getCommands(e);
                    t.each(r.instances, function(e) {
                        n.apply(i, e)
                    }),
                    this.storage.clearCommands(e)
                },
                _initializeStorage: function(e) {
                    var n, i = e.storageType || this.storageType;
                    n = t.isFunction(i) ? new i : i,
                    this.storage = n
                }
            })
        }(i, t),
        i.RequestResponse = function(e, t) {
            return e.Handlers.extend({
                request: function(e) {
                    return this.hasHandler(e) ? this.getHandler(e).apply(this, t.rest(arguments)) : void 0
                }
            })
        }(i, t),
        i.EventAggregator = function(e, t) {
            var n = function() {};
            return n.extend = e.Model.extend,
            t.extend(n.prototype, e.Events),
            n
        }(e, t),
        i.Channel = function(n) {
            var i = function(t) {
                this.vent = new e.Wreqr.EventAggregator,
                this.reqres = new e.Wreqr.RequestResponse,
                this.commands = new e.Wreqr.Commands,
                this.channelName = t
            };
            return t.extend(i.prototype, {
                reset: function() {
                    return this.vent.off(),
                    this.vent.stopListening(),
                    this.reqres.removeAllHandlers(),
                    this.commands.removeAllHandlers(),
                    this
                },
                connectEvents: function(e, t) {
                    return this._connect("vent", e, t),
                    this
                },
                connectCommands: function(e, t) {
                    return this._connect("commands", e, t),
                    this
                },
                connectRequests: function(e, t) {
                    return this._connect("reqres", e, t),
                    this
                },
                _connect: function(e, n, i) {
                    if (n) {
                        i = i || this;
                        var r = "vent" === e ? "on" : "setHandler";
                        t.each(n, function(n, o) {
                            this[e][r](o, t.bind(n, i))
                        }, this)
                    }
                }
            }),
            i
        }(i),
        i.radio = function(e, t) {
            var n = function() {
                this._channels = {},
                this.vent = {},
                this.commands = {},
                this.reqres = {},
                this._proxyMethods()
            };
            t.extend(n.prototype, {
                channel: function(e) {
                    if (!e)
                        throw new Error("Channel must receive a name");
                    return this._getChannel(e)
                },
                _getChannel: function(t) {
                    var n = this._channels[t];
                    return n || (n = new e.Channel(t),
                    this._channels[t] = n),
                    n
                },
                _proxyMethods: function() {
                    t.each(["vent", "commands", "reqres"], function(e) {
                        t.each(i[e], function(t) {
                            this[e][t] = r(this, e, t)
                        }, this)
                    }, this)
                }
            });
            var i = {
                vent: ["on", "off", "trigger", "once", "stopListening", "listenTo", "listenToOnce"],
                commands: ["execute", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers"],
                reqres: ["request", "setHandler", "setHandlers", "removeHandler", "removeAllHandlers"]
            }
              , r = function(e, n, i) {
                return function(r) {
                    var o = e._getChannel(r)[n];
                    return o[i].apply(o, t.rest(arguments))
                }
            };
            return new n
        }(i, t),
        e.Wreqr
    })
}
, function(e, t, n) {
    var i, r;
    !function(o, a) {
        i = [n(75), n(76)],
        r = function(e, t) {
            return a(e, t)
        }
        .apply(t, i),
        !(void 0 !== r && (e.exports = r))
    }(this, function(e, t) {
        "use strict";
        var n = e.ChildViewContainer;
        return e.ChildViewContainer = function(e, t) {
            var n = function(e) {
                this._views = {},
                this._indexByModel = {},
                this._indexByCustom = {},
                this._updateLength(),
                t.each(e, this.add, this)
            };
            t.extend(n.prototype, {
                add: function(e, t) {
                    var n = e.cid;
                    return this._views[n] = e,
                    e.model && (this._indexByModel[e.model.cid] = n),
                    t && (this._indexByCustom[t] = n),
                    this._updateLength(),
                    this
                },
                findByModel: function(e) {
                    return this.findByModelCid(e.cid)
                },
                findByModelCid: function(e) {
                    var t = this._indexByModel[e];
                    return this.findByCid(t)
                },
                findByCustom: function(e) {
                    var t = this._indexByCustom[e];
                    return this.findByCid(t)
                },
                findByIndex: function(e) {
                    return t.values(this._views)[e]
                },
                findByCid: function(e) {
                    return this._views[e]
                },
                remove: function(e) {
                    var n = e.cid;
                    return e.model && delete this._indexByModel[e.model.cid],
                    t.any(this._indexByCustom, function(e, t) {
                        return e === n ? (delete this._indexByCustom[t],
                        !0) : void 0
                    }, this),
                    delete this._views[n],
                    this._updateLength(),
                    this
                },
                call: function(e) {
                    this.apply(e, t.tail(arguments))
                },
                apply: function(e, n) {
                    t.each(this._views, function(i) {
                        t.isFunction(i[e]) && i[e].apply(i, n || [])
                    })
                },
                _updateLength: function() {
                    this.length = t.size(this._views)
                }
            });
            var i = ["forEach", "each", "map", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "toArray", "first", "initial", "rest", "last", "without", "isEmpty", "pluck", "reduce"];
            return t.each(i, function(e) {
                n.prototype[e] = function() {
                    var n = t.values(this._views)
                      , i = [n].concat(t.toArray(arguments));
                    return t[e].apply(t, i)
                }
            }),
            n
        }(e, t),
        e.ChildViewContainer.VERSION = "0.1.11",
        e.ChildViewContainer.noConflict = function() {
            return e.ChildViewContainer = n,
            this
        }
        ,
        e.ChildViewContainer
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = l(c)
      , h = n(104)
      , d = l(h)
      , f = n(111)
      , p = l(f)
      , m = n(112)
      , v = l(m)
      , g = s("Root Element")
      , y = s("Layout")
      , b = s("Router")
      , x = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this[g] = e.el,
            this[y] = new d["default"],
            this[y].$el.appendTo(this[g]),
            this[b] = new p["default"]({
                controller: new v["default"]({
                    application: this,
                    resourcePath: e.resourcePath,
                    apiBaseURL: e.apiBaseURL
                })
            }),
            this[y].render()
        }
        return r(t, e),
        o(t, [{
            key: "layout",
            get: function() {
                return this[y]
            }
        }, {
            key: "router",
            get: function() {
                return this[b]
            }
        }]),
        t
    }(u["default"].Application);
    t["default"] = x,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(83)["default"];
    t["default"] = function(e, t, n) {
        for (var r = !0; r; ) {
            var o = e
              , a = t
              , s = n;
            r = !1,
            null === o && (o = Function.prototype);
            var l = i(o, a);
            if (void 0 !== l) {
                if ("value"in l)
                    return l.value;
                var c = l.get;
                return void 0 === c ? void 0 : c.call(s)
            }
            var u = Object.getPrototypeOf(o);
            if (null === u)
                return void 0;
            e = u,
            t = a,
            n = s,
            r = !0,
            l = u = void 0
        }
    }
    ,
    t.__esModule = !0
}
, function(e, t, n) {
    e.exports = {
        "default": n(84),
        __esModule: !0
    }
}
, function(e, t, n) {
    var i = n(35);
    n(85),
    e.exports = function(e, t) {
        return i.getDesc(e, t)
    }
}
, [465, 50, 86], [466, 28, 30, 38], function(e, t, n) {
    "use strict";
    var i = n(88)["default"]
      , r = n(90)["default"];
    t["default"] = function(e, t) {
        if ("function" != typeof t && null !== t)
            throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = i(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }),
        t && (r ? r(e, t) : e.__proto__ = t)
    }
    ,
    t.__esModule = !0
}
, function(e, t, n) {
    e.exports = {
        "default": n(89),
        __esModule: !0
    }
}
, function(e, t, n) {
    var i = n(35);
    e.exports = function(e, t) {
        return i.create(e, t)
    }
}
, function(e, t, n) {
    e.exports = {
        "default": n(91),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(92),
    e.exports = n(30).Object.setPrototypeOf
}
, [467, 28, 63], function(e, t, n) {
    "use strict";
    var i = n(94)["default"];
    t["default"] = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                i(e, r.key, r)
            }
        }
        return function(t, n, i) {
            return n && e(t.prototype, n),
            i && e(t, i),
            t
        }
    }(),
    t.__esModule = !0
}
, function(e, t, n) {
    e.exports = {
        "default": n(95),
        __esModule: !0
    }
}
, function(e, t, n) {
    var i = n(35);
    e.exports = function(e, t, n) {
        return i.setDesc(e, t, n)
    }
}
, function(e, t) {
    "use strict";
    t["default"] = function(e, t) {
        if (!(e instanceof t))
            throw new TypeError("Cannot call a class as a function")
    }
    ,
    t.__esModule = !0
}
, function(e, t, n) {
    e.exports = {
        "default": n(98),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(99),
    n(21),
    e.exports = n(30).Symbol
}
, [468, 35, 29, 39, 37, 28, 33, 38, 44, 42, 45, 43, 100, 101, 102, 103, 56, 50, 36, 27], [469, 35, 50], [470, 50, 35], [471, 35], [472, 52], function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(105)
      , h = l(u)
      , d = n(107)
      , f = s("regions")
      , p = s("interactiveUI")
      , m = s("events")
      , v = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this[p] = !0
        }
        return r(t, e),
        o(t, [{
            key: "onLinkClick",
            value: function(e) {
                h["default"].navigateToAbsoluteUrl({
                    url: e.currentTarget.href
                }) && e.preventDefault()
            }
        }, {
            key: "tagName",
            get: function() {
                return "section"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-starmap-application"
            }
        }, {
            key: "template",
            get: function() {
                return d
            }
        }, {
            key: "regions",
            get: function() {
                return this[f] = this[f] || {
                    header: "#sm-header-region",
                    map: "#sm-map-region",
                    controls: "#sm-controls-region",
                    disc: "#sm-disc-region",
                    modal: "#sm-modal-region"
                },
                this[f]
            },
            set: function(e) {
                this[f] = e
            }
        }, {
            key: "interactiveUI",
            get: function() {
                return this[p]
            },
            set: function(e) {
                e ? this.$el.removeClass("sm-non-interactive") : this.$el.addClass("sm-non-interactive"),
                this[p] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[m] = this[m] || {
                    "click a[href]": "onLinkClick"
                }
            },
            set: function(e) {
                this[m] = e
            }
        }]),
        t
    }(c.LayoutView);
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = n(106)
      , s = n(75)
      , l = n(76)
      , c = o(l)
      , u = function() {
        function e() {
            r(this, e)
        }
        return i(e, null, [{
            key: "navigateToAbsoluteUrl",
            value: function(t) {
                var n = t.url
                  , i = t.options;
                i = i || {},
                i.trigger = c["default"].isUndefined(i.trigger) ? !0 : i.trigger;
                var r = e.getFragment({
                    url: n
                });
                return null === r ? !1 : (s.history.navigate(r, i),
                !0)
            }
        }, {
            key: "getFragment",
            value: function(e) {
                var t = e.url
                  , n = e.options;
                n = n || {},
                n.removeHash = c["default"].isUndefined(n.removeHash) ? !0 : n.removeHash,
                t = t || a.location.href;
                var i = t.indexOf("?") > -1;
                n.removeQueryString && i && (t = t.substring(0, t.indexOf("?")));
                var r = t.indexOf("#") > -1;
                n.removeHash && r && (t = t.substring(0, t.indexOf("#")));
                var o = t.substring(t.indexOf(a.location.host) + a.location.host.length)
                  , l = s.history.root.substring(0, s.history.root.length - 1)
                  , u = o === l ? l : s.history.root;
                return 0 !== o.indexOf(u) ? null : o.substring(u.length)
            }
        }]),
        e
    }();
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t) {
    (function(t) {
        "undefined" != typeof window ? e.exports = window : "undefined" != typeof t ? e.exports = t : "undefined" != typeof self ? e.exports = self : e.exports = {}
    }
    ).call(t, function() {
        return this
    }())
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div id="sm-header-region"></div>\n<div id="sm-map-region"></div>\n<div id="sm-controls-region"></div>\n<div id="sm-modal-region"></div>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i;
    !function() {
        var r = {};
        !function() {
            "use strict";
            function e(t, n, i) {
                var r = function() {};
                r.prototype = t.prototype;
                var o = new r
                  , a = /xyz/.test(function() {
                    xyz
                }) ? /\bparent\b/ : /.*/;
                i = i || {};
                for (var s in i) {
                    var l = i[s]
                      , c = o[s];
                    "function" == typeof c && "function" == typeof l && a.test(l) ? o[s] = function(e, t) {
                        return function() {
                            var n = this.parent;
                            this.parent = t;
                            var i = e.apply(this, arguments);
                            return this.parent = n,
                            i
                        }
                    }(l, c) : o[s] = l
                }
                o.typename = n;
                var u = function() {
                    o.init && o.init.apply(this, arguments)
                };
                return u.prototype = o,
                u.prototype.constructor = u,
                u.extend = function(t, n) {
                    return "object" == typeof t && (n = t,
                    t = "anonymous"),
                    e(u, t, n)
                }
                ,
                u
            }
            r.object = e(Object, "Object", {})
        }(),
        function() {
            "use strict";
            var e = Array.prototype
              , t = Object.prototype
              , n = {
                "&": "&amp;",
                '"': "&quot;",
                "'": "&#39;",
                "<": "&lt;",
                ">": "&gt;"
            }
              , i = /[&"'<>]/g
              , o = function(e) {
                return n[e]
            }
              , a = r.lib = {};
            a.withPrettyErrors = function(e, t, n) {
                try {
                    return n()
                } catch (i) {
                    if (i.Update || (i = new a.TemplateError(i)),
                    i.Update(e),
                    !t) {
                        var r = i;
                        i = new Error(r.message),
                        i.name = r.name
                    }
                    throw i
                }
            }
            ,
            a.TemplateError = function(e, t, n) {
                var i = this;
                return e instanceof Error ? (i = e,
                e = e.name + ": " + e.message) : Error.captureStackTrace && Error.captureStackTrace(i),
                i.name = "Template render error",
                i.message = e,
                i.lineno = t,
                i.colno = n,
                i.firstUpdate = !0,
                i.Update = function(e) {
                    var t = "(" + (e || "unknown path") + ")";
                    return this.firstUpdate && (this.lineno && this.colno ? t += " [Line " + this.lineno + ", Column " + this.colno + "]" : this.lineno && (t += " [Line " + this.lineno + "]")),
                    t += "\n ",
                    this.firstUpdate && (t += " "),
                    this.message = t + (this.message || ""),
                    this.firstUpdate = !1,
                    this
                }
                ,
                i
            }
            ,
            a.TemplateError.prototype = Error.prototype,
            a.escape = function(e) {
                return e.replace(i, o)
            }
            ,
            a.isFunction = function(e) {
                return "[object Function]" === t.toString.call(e)
            }
            ,
            a.isArray = Array.isArray || function(e) {
                return "[object Array]" === t.toString.call(e)
            }
            ,
            a.isString = function(e) {
                return "[object String]" === t.toString.call(e)
            }
            ,
            a.isObject = function(e) {
                return "[object Object]" === t.toString.call(e)
            }
            ,
            a.groupBy = function(e, t) {
                for (var n = {}, i = a.isFunction(t) ? t : function(e) {
                    return e[t]
                }
                , r = 0; r < e.length; r++) {
                    var o = e[r]
                      , s = i(o, r);
                    (n[s] || (n[s] = [])).push(o)
                }
                return n
            }
            ,
            a.toArray = function(e) {
                return Array.prototype.slice.call(e)
            }
            ,
            a.without = function(e) {
                var t = [];
                if (!e)
                    return t;
                for (var n = -1, i = e.length, r = a.toArray(arguments).slice(1); ++n < i; )
                    -1 === a.indexOf(r, e[n]) && t.push(e[n]);
                return t
            }
            ,
            a.extend = function(e, t) {
                for (var n in t)
                    e[n] = t[n];
                return e
            }
            ,
            a.repeat = function(e, t) {
                for (var n = "", i = 0; t > i; i++)
                    n += e;
                return n
            }
            ,
            a.each = function(t, n, i) {
                if (null != t)
                    if (e.each && t.each === e.each)
                        t.forEach(n, i);
                    else if (t.length === +t.length)
                        for (var r = 0, o = t.length; o > r; r++)
                            n.call(i, t[r], r, t)
            }
            ,
            a.map = function(t, n) {
                var i = [];
                if (null == t)
                    return i;
                if (e.map && t.map === e.map)
                    return t.map(n);
                for (var r = 0; r < t.length; r++)
                    i[i.length] = n(t[r], r);
                return t.length === +t.length && (i.length = t.length),
                i
            }
            ,
            a.asyncIter = function(e, t, n) {
                function i() {
                    r++,
                    r < e.length ? t(e[r], r, i, n) : n()
                }
                var r = -1;
                i()
            }
            ,
            a.asyncFor = function(e, t, n) {
                function i() {
                    s++;
                    var a = r[s];
                    o > s ? t(a, e[a], s, o, i) : n()
                }
                var r = a.keys(e)
                  , o = r.length
                  , s = -1;
                i()
            }
            ,
            a.indexOf = Array.prototype.indexOf ? function(e, t, n) {
                return Array.prototype.indexOf.call(e, t, n)
            }
            : function(e, t, n) {
                var i = this.length >>> 0;
                for (n = +n || 0,
                Math.abs(n) === 1 / 0 && (n = 0),
                0 > n && (n += i,
                0 > n && (n = 0)); i > n; n++)
                    if (e[n] === t)
                        return n;
                return -1
            }
            ,
            Array.prototype.map || (Array.prototype.map = function() {
                throw new Error("map is unimplemented for this js engine")
            }
            ),
            a.keys = function(e) {
                if (Object.prototype.keys)
                    return e.keys();
                var t = [];
                for (var n in e)
                    e.hasOwnProperty(n) && t.push(n);
                return t
            }
        }(),
        function() {
            "use strict";
            function e(e, t, r) {
                return function() {
                    var o, a = i(arguments), s = n(arguments);
                    if (a > e.length) {
                        o = Array.prototype.slice.call(arguments, 0, e.length);
                        for (var l = Array.prototype.slice.call(arguments, o.length, a), c = 0; c < l.length; c++)
                            c < t.length && (s[t[c]] = l[c]);
                        o.push(s)
                    } else if (a < e.length) {
                        o = Array.prototype.slice.call(arguments, 0, a);
                        for (var c = a; c < e.length; c++) {
                            var u = e[c];
                            o.push(s[u]),
                            delete s[u]
                        }
                        o.push(s)
                    } else
                        o = arguments;
                    return r.apply(this, o)
                }
            }
            function t(e) {
                return e.__keywords = !0,
                e
            }
            function n(e) {
                var t = e.length;
                if (t) {
                    var n = e[t - 1];
                    if (n && n.hasOwnProperty("__keywords"))
                        return n
                }
                return {}
            }
            function i(e) {
                var t = e.length;
                if (0 === t)
                    return 0;
                var n = e[t - 1];
                return n && n.hasOwnProperty("__keywords") ? t - 1 : t
            }
            function o(e) {
                return "string" != typeof e ? e : void (this.val = e)
            }
            function a(e, t) {
                return e instanceof o ? new o(t) : t.toString()
            }
            function s(e) {
                var t = typeof e;
                return "string" === t ? new o(e) : "function" !== t ? e : function() {
                    var t = e.apply(this, arguments);
                    return "string" == typeof t ? new o(t) : t
                }
            }
            function l(e, t) {
                return e = void 0 !== e && null !== e ? e : "",
                t && "string" == typeof e && (e = m.escape(e)),
                e
            }
            function c(e, t) {
                return e = e || {},
                "function" == typeof e[t] ? function() {
                    return e[t].apply(e, arguments)
                }
                : e[t]
            }
            function u(e, t, n) {
                if (!e)
                    throw new Error("Unable to call `" + t + "`, which is undefined or falsey");
                if ("function" != typeof e)
                    throw new Error("Unable to call `" + t + "`, which is not a function");
                return e.apply(this, n)
            }
            function h(e, t, n) {
                var i = t.lookup(n);
                return void 0 !== i && null !== i ? i : e.lookup(n)
            }
            function d(e, t, n) {
                return e.lineno ? e : new m.TemplateError(e,t,n)
            }
            function f(e, t, n, i) {
                if (m.isArray(e)) {
                    var r = e.length;
                    m.asyncIter(e, function(e, i, o) {
                        switch (t) {
                        case 1:
                            n(e, i, r, o);
                            break;
                        case 2:
                            n(e[0], e[1], i, r, o);
                            break;
                        case 3:
                            n(e[0], e[1], e[2], i, r, o);
                            break;
                        default:
                            e.push(i, o),
                            n.apply(this, e)
                        }
                    }, i)
                } else
                    m.asyncFor(e, function(e, t, i, r, o) {
                        n(e, t, i, r, o)
                    }, i)
            }
            function p(e, t, n, i) {
                function r(e, t) {
                    s++,
                    a[e] = t,
                    s === o && i(null, a.join(""))
                }
                var o, a, s = 0;
                if (m.isArray(e))
                    if (o = e.length,
                    a = new Array(o),
                    0 === o)
                        i(null, "");
                    else
                        for (var l = 0; l < e.length; l++) {
                            var c = e[l];
                            switch (t) {
                            case 1:
                                n(c, l, o, r);
                                break;
                            case 2:
                                n(c[0], c[1], l, o, r);
                                break;
                            case 3:
                                n(c[0], c[1], c[2], l, o, r);
                                break;
                            default:
                                c.push(l, r),
                                n.apply(this, c)
                            }
                        }
                else {
                    var u = m.keys(e);
                    if (o = u.length,
                    a = new Array(o),
                    0 === o)
                        i(null, "");
                    else
                        for (var l = 0; l < u.length; l++) {
                            var h = u[l];
                            n(h, e[h], l, o, r)
                        }
                }
            }
            var m = r.lib
              , v = r.object
              , g = v.extend({
                init: function(e) {
                    this.variables = {},
                    this.parent = e
                },
                set: function(e, t, n) {
                    var i = e.split(".")
                      , r = this.variables
                      , o = this;
                    if (n) {
                        if (o = this.resolve(i[0]))
                            return void o.set(e, t);
                        o = this
                    }
                    for (var a = 0; a < i.length - 1; a++) {
                        var s = i[a];
                        r[s] || (r[s] = {}),
                        r = r[s]
                    }
                    r[i[i.length - 1]] = t
                },
                get: function(e) {
                    var t = this.variables[e];
                    return void 0 !== t && null !== t ? t : null
                },
                lookup: function(e) {
                    var t = this.parent
                      , n = this.variables[e];
                    return void 0 !== n && null !== n ? n : t && t.lookup(e)
                },
                resolve: function(e) {
                    var t = this.parent
                      , n = this.variables[e];
                    return void 0 !== n && null !== n ? this : t && t.resolve(e)
                },
                push: function() {
                    return new g(this)
                },
                pop: function() {
                    return this.parent
                }
            });
            o.prototype = Object.create(String.prototype),
            o.prototype.valueOf = function() {
                return this.val
            }
            ,
            o.prototype.toString = function() {
                return this.val
            }
            ,
            r.runtime = {
                Frame: g,
                makeMacro: e,
                makeKeywordArgs: t,
                numArgs: i,
                suppressValue: l,
                memberLookup: c,
                contextOrFrameLookup: h,
                callWrap: u,
                handleError: d,
                isArray: m.isArray,
                keys: m.keys,
                SafeString: o,
                copySafeness: a,
                markSafe: s,
                asyncEach: f,
                asyncAll: p
            }
        }(),
        function() {
            "use strict";
            var e = r.path
              , t = r.object
              , n = r.lib
              , i = t.extend({
                on: function(e, t) {
                    this.listeners = this.listeners || {},
                    this.listeners[e] = this.listeners[e] || [],
                    this.listeners[e].push(t)
                },
                emit: function(e) {
                    var t = Array.prototype.slice.call(arguments, 1);
                    this.listeners && this.listeners[e] && n.each(this.listeners[e], function(e) {
                        e.apply(null, t)
                    })
                },
                resolve: function(t, n) {
                    return e.resolve(e.dirname(t), n)
                },
                isRelative: function(e) {
                    return 0 === e.indexOf("./") || 0 === e.indexOf("../")
                }
            });
            r.loader = i
        }(),
        function() {
            "use strict";
            var e = r.loader
              , t = e.extend({
                init: function(e, t) {
                    this.precompiled = window.nunjucksPrecompiled || {},
                    this.baseURL = e || "",
                    this.neverUpdate = t
                },
                getSource: function(e) {
                    if (this.precompiled[e])
                        return {
                            src: {
                                type: "code",
                                obj: this.precompiled[e]
                            },
                            path: e
                        };
                    var t = this.fetch(this.baseURL + "/" + e);
                    return t ? {
                        src: t,
                        path: e,
                        noCache: !this.neverUpdate
                    } : null
                },
                fetch: function(e, t) {
                    var n, i, r = !0;
                    return window.XMLHttpRequest ? n = new XMLHttpRequest : window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLHTTP")),
                    n.onreadystatechange = function() {
                        4 !== n.readyState || 0 !== n.status && 200 !== n.status || !r || (r = !1,
                        i = n.responseText)
                    }
                    ,
                    e += (-1 === e.indexOf("?") ? "?" : "&") + "s=" + (new Date).getTime(),
                    n.open("GET", e, !1),
                    n.send(),
                    i
                }
            });
            r["web-loaders"] = {
                WebLoader: t
            }
        }(),
        function() {
            "undefined" == typeof window || window !== this ? r.loaders = r["node-loaders"] : r.loaders = r["web-loaders"]
        }(),
        function() {
            "use strict";
            var e = r.lib
              , t = r.runtime
              , n = {
                abs: function(e) {
                    return Math.abs(e)
                },
                batch: function(e, t, n) {
                    for (var i = [], r = [], o = 0; o < e.length; o++)
                        o % t === 0 && r.length && (i.push(r),
                        r = []),
                        r.push(e[o]);
                    if (r.length) {
                        if (n)
                            for (var o = r.length; t > o; o++)
                                r.push(n);
                        i.push(r)
                    }
                    return i
                },
                capitalize: function(e) {
                    var n = e.toLowerCase();
                    return t.copySafeness(e, n.charAt(0).toUpperCase() + n.slice(1))
                },
                center: function(n, i) {
                    if (i = i || 80,
                    n.length >= i)
                        return n;
                    var r = i - n.length
                      , o = e.repeat(" ", r / 2 - r % 2)
                      , a = e.repeat(" ", r / 2);
                    return t.copySafeness(n, o + n + a)
                },
                "default": function(e, t) {
                    return e ? e : t
                },
                dictsort: function(t, n, i) {
                    if (!e.isObject(t))
                        throw new e.TemplateError("dictsort filter: val must be an object");
                    var r = [];
                    for (var o in t)
                        r.push([o, t[o]]);
                    var a;
                    if (void 0 === i || "key" === i)
                        a = 0;
                    else {
                        if ("value" !== i)
                            throw new e.TemplateError("dictsort filter: You can only sort by either key or value");
                        a = 1
                    }
                    return r.sort(function(t, i) {
                        var r = t[a]
                          , o = i[a];
                        return n || (e.isString(r) && (r = r.toUpperCase()),
                        e.isString(o) && (o = o.toUpperCase())),
                        r > o ? 1 : r === o ? 0 : -1
                    }),
                    r
                },
                escape: function(n) {
                    return "string" == typeof n || n instanceof t.SafeString ? e.escape(n) : n
                },
                safe: function(e) {
                    return t.markSafe(e)
                },
                first: function(e) {
                    return e[0]
                },
                groupby: function(t, n) {
                    return e.groupBy(t, n)
                },
                indent: function(n, i, r) {
                    i = i || 4;
                    for (var o = "", a = n.split("\n"), s = e.repeat(" ", i), l = 0; l < a.length; l++)
                        o += 0 !== l || r ? s + a[l] + "\n" : a[l] + "\n";
                    return t.copySafeness(n, o)
                },
                join: function(t, n, i) {
                    return n = n || "",
                    i && (t = e.map(t, function(e) {
                        return e[i]
                    })),
                    t.join(n)
                },
                last: function(e) {
                    return e[e.length - 1]
                },
                length: function(e) {
                    return void 0 !== e ? e.length : 0
                },
                list: function(t) {
                    if (e.isString(t))
                        return t.split("");
                    if (e.isObject(t)) {
                        var n = [];
                        if (Object.keys)
                            n = Object.keys(t);
                        else
                            for (var i in t)
                                n.push(i);
                        return e.map(n, function(e) {
                            return {
                                key: e,
                                value: t[e]
                            }
                        })
                    }
                    if (e.isArray(t))
                        return t;
                    throw new e.TemplateError("list filter: type not iterable")
                },
                lower: function(e) {
                    return e.toLowerCase()
                },
                random: function(e) {
                    return e[Math.floor(Math.random() * e.length)]
                },
                rejectattr: function(e, t) {
                    return e.filter(function(e) {
                        return !e[t]
                    })
                },
                selectattr: function(e, t) {
                    return e.filter(function(e) {
                        return !!e[t]
                    })
                },
                replace: function(e, n, i, r) {
                    if (n instanceof RegExp)
                        return e.replace(n, i);
                    var o = e
                      , a = o
                      , s = 1;
                    for (o = o.replace(n, i); a !== o && !(s >= r); )
                        a = o,
                        o = o.replace(n, i),
                        s++;
                    return t.copySafeness(e, o)
                },
                reverse: function(i) {
                    var r;
                    return r = e.isString(i) ? n.list(i) : e.map(i, function(e) {
                        return e
                    }),
                    r.reverse(),
                    e.isString(i) ? t.copySafeness(i, r.join("")) : r
                },
                round: function(e, t, n) {
                    t = t || 0;
                    var i, r = Math.pow(10, t);
                    return i = "ceil" === n ? Math.ceil : "floor" === n ? Math.floor : Math.round,
                    i(e * r) / r
                },
                slice: function(e, t, n) {
                    for (var i = Math.floor(e.length / t), r = e.length % t, o = 0, a = [], s = 0; t > s; s++) {
                        var l = o + s * i;
                        r > s && o++;
                        var c = o + (s + 1) * i
                          , u = e.slice(l, c);
                        n && s >= r && u.push(n),
                        a.push(u)
                    }
                    return a
                },
                sort: function(t, n, i, r) {
                    return t = e.map(t, function(e) {
                        return e
                    }),
                    t.sort(function(t, o) {
                        var a, s;
                        return r ? (a = t[r],
                        s = o[r]) : (a = t,
                        s = o),
                        !i && e.isString(a) && e.isString(s) && (a = a.toLowerCase(),
                        s = s.toLowerCase()),
                        s > a ? n ? 1 : -1 : a > s ? n ? -1 : 1 : 0
                    }),
                    t
                },
                string: function(e) {
                    return t.copySafeness(e, e)
                },
                title: function(e) {
                    for (var i = e.split(" "), r = 0; r < i.length; r++)
                        i[r] = n.capitalize(i[r]);
                    return t.copySafeness(e, i.join(" "))
                },
                trim: function(e) {
                    return t.copySafeness(e, e.replace(/^\s*|\s*$/g, ""))
                },
                truncate: function(e, n, i, r) {
                    var o = e;
                    if (n = n || 255,
                    e.length <= n)
                        return e;
                    if (i)
                        e = e.substring(0, n);
                    else {
                        var a = e.lastIndexOf(" ", n);
                        -1 === a && (a = n),
                        e = e.substring(0, a)
                    }
                    return e += void 0 !== r && null !== r ? r : "...",
                    t.copySafeness(o, e)
                },
                upper: function(e) {
                    return e.toUpperCase()
                },
                urlencode: function(t) {
                    var n = encodeURIComponent;
                    if (e.isString(t))
                        return n(t);
                    var i;
                    if (e.isArray(t))
                        i = t.map(function(e) {
                            return n(e[0]) + "=" + n(e[1])
                        });
                    else {
                        i = [];
                        for (var r in t)
                            t.hasOwnProperty(r) && i.push(n(r) + "=" + n(t[r]))
                    }
                    return i.join("&")
                },
                urlize: function(e, t, n) {
                    isNaN(t) && (t = 1 / 0);
                    var i = n === !0 ? ' rel="nofollow"' : ""
                      , r = /^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/
                      , o = /^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i
                      , a = /^https?:\/\/.*$/
                      , s = /^www\./
                      , l = /\.(?:org|net|com)(?:\:|\/|$)/
                      , c = e.split(/\s+/).filter(function(e) {
                        return e && e.length
                    }).map(function(e) {
                        var n = e.match(r)
                          , c = n && n[1] || e;
                        return a.test(c) ? '<a href="' + c + '"' + i + ">" + c.substr(0, t) + "</a>" : s.test(c) ? '<a href="http://' + c + '"' + i + ">" + c.substr(0, t) + "</a>" : o.test(c) ? '<a href="mailto:' + c + '">' + c + "</a>" : l.test(c) ? '<a href="http://' + c + '"' + i + ">" + c.substr(0, t) + "</a>" : e
                    });
                    return c.join(" ")
                },
                wordcount: function(e) {
                    var t = e ? e.match(/\w+/g) : null;
                    return t ? t.length : null
                },
                "float": function(e, t) {
                    var n = parseFloat(e);
                    return isNaN(n) ? t : n
                },
                "int": function(e, t) {
                    var n = parseInt(e, 10);
                    return isNaN(n) ? t : n
                }
            };
            n.d = n["default"],
            n.e = n.escape,
            r.filters = n
        }(),
        function() {
            "use strict";
            function e(e) {
                var t = -1;
                return {
                    current: null,
                    reset: function() {
                        t = -1,
                        this.current = null
                    },
                    next: function() {
                        return t++,
                        t >= e.length && (t = 0),
                        this.current = e[t],
                        this.current
                    }
                }
            }
            function t(e) {
                e = e || ",";
                var t = !0;
                return function() {
                    var n = t ? "" : e;
                    return t = !1,
                    n
                }
            }
            var n = {
                range: function(e, t, n) {
                    t ? n || (n = 1) : (t = e,
                    e = 0,
                    n = 1);
                    for (var i = [], r = e; t > r; r += n)
                        i.push(r);
                    return i
                },
                cycler: function() {
                    return e(Array.prototype.slice.call(arguments))
                },
                joiner: function(e) {
                    return t(e)
                }
            };
            r.globals = n
        }(),
        function() {
            "use strict";
            var e = r.path
              , t = r.lib
              , n = r.object
              , i = (r.lexer,
            r.compiler)
              , o = r.filters
              , a = r.loaders
              , s = r.runtime
              , l = r.globals
              , c = s.Frame
              , u = n.extend({
                init: function(e, n) {
                    var n = this.opts = n || {};
                    this.opts.dev = !!n.dev,
                    this.opts.autoescape = !!n.autoescape,
                    this.opts.trimBlocks = !!n.trimBlocks,
                    this.opts.lstripBlocks = !!n.lstripBlocks,
                    e ? this.loaders = t.isArray(e) ? e : [e] : a.FileSystemLoader ? this.loaders = [new a.FileSystemLoader("views")] : this.loaders = [new a.WebLoader("/views")],
                    this.initCache(),
                    this.filters = {},
                    this.asyncFilters = [],
                    this.extensions = {},
                    this.extensionsList = [];
                    for (var i in o)
                        this.addFilter(i, o[i])
                },
                initCache: function() {
                    t.each(this.loaders, function(e) {
                        e.cache = {},
                        "function" == typeof e.on && e.on("update", function(t) {
                            e.cache[t] = null
                        })
                    })
                },
                addExtension: function(e, t) {
                    t._name = e,
                    this.extensions[e] = t,
                    this.extensionsList.push(t)
                },
                getExtension: function(e) {
                    return this.extensions[e]
                },
                addGlobal: function(e, t) {
                    l[e] = t
                },
                addFilter: function(e, t, n) {
                    var i = t;
                    n && this.asyncFilters.push(e),
                    this.filters[e] = i
                },
                getFilter: function(e) {
                    if (!this.filters[e])
                        throw new Error("filter not found: " + e);
                    return this.filters[e]
                },
                resolveTemplate: function(e, t, n) {
                    var i = e.isRelative && t ? e.isRelative(n) : !1;
                    return i && e.resolve ? e.resolve(t, n) : n
                },
                getTemplate: function(e, n, i, r) {
                    var o = this
                      , a = null;
                    if (e && e.raw && (e = e.raw),
                    t.isFunction(i) && (r = i,
                    i = null,
                    n = n || !1),
                    t.isFunction(n) && (r = n,
                    n = !1),
                    "string" != typeof e)
                        throw new Error("template names must be a string: " + e);
                    for (var s = 0; s < this.loaders.length; s++) {
                        var l = this.resolveTemplate(this.loaders[s], i, e);
                        if (a = this.loaders[s].cache[l])
                            break
                    }
                    if (!a) {
                        var c;
                        return t.asyncIter(this.loaders, function(t, n, r, a) {
                            function s(e) {
                                e ? (e.loader = t,
                                a(e)) : r()
                            }
                            e = o.resolveTemplate(t, i, e),
                            t.async ? t.getSource(e, function(e, t) {
                                if (e)
                                    throw e;
                                s(t)
                            }) : s(t.getSource(e))
                        }, function(t) {
                            if (t) {
                                var i = new d(t.src,this,t.path,n);
                                t.noCache || (t.loader.cache[e] = i),
                                r ? r(null, i) : c = i
                            } else {
                                var o = new Error("template not found: " + e);
                                if (!r)
                                    throw o;
                                r(o)
                            }
                        }
                        .bind(this)),
                        c
                    }
                    return n && a.compile(),
                    r ? void r(null, a) : a
                },
                express: function(t) {
                    function n(t, n) {
                        if (this.name = t,
                        this.path = t,
                        this.defaultEngine = n.defaultEngine,
                        this.ext = e.extname(t),
                        !this.ext && !this.defaultEngine)
                            throw new Error("No default engine was specified and no extension was provided.");
                        this.ext || (this.name += this.ext = ("." !== this.defaultEngine[0] ? "." : "") + this.defaultEngine)
                    }
                    var i = this;
                    n.prototype.render = function(e, t) {
                        i.render(this.name, e, t)
                    }
                    ,
                    t.set("view", n)
                },
                render: function(e, n, i) {
                    t.isFunction(n) && (i = n,
                    n = null);
                    var r = null;
                    return this.getTemplate(e, function(e, t) {
                        if (e && i)
                            i(e);
                        else {
                            if (e)
                                throw e;
                            t.render(n, i || function(e, t) {
                                if (e)
                                    throw e;
                                r = t
                            }
                            )
                        }
                    }),
                    r
                },
                renderString: function(e, n, i, r) {
                    t.isFunction(i) && (r = i,
                    i = {}),
                    i = i || {};
                    var o = new d(e,this,i.path);
                    return o.render(n, r)
                }
            })
              , h = n.extend({
                init: function(e, t) {
                    this.ctx = e,
                    this.blocks = {},
                    this.exported = [];
                    for (var n in t)
                        this.addBlock(n, t[n])
                },
                lookup: function(e) {
                    return e in l && !(e in this.ctx) ? l[e] : this.ctx[e]
                },
                setVariable: function(e, t) {
                    this.ctx[e] = t
                },
                getVariables: function() {
                    return this.ctx
                },
                addBlock: function(e, t) {
                    this.blocks[e] = this.blocks[e] || [],
                    this.blocks[e].push(t)
                },
                getBlock: function(e) {
                    if (!this.blocks[e])
                        throw new Error('unknown block "' + e + '"');
                    return this.blocks[e][0]
                },
                getSuper: function(e, n, i, r, o, a) {
                    var s = t.indexOf(this.blocks[n] || [], i)
                      , l = this.blocks[n][s + 1]
                      , c = this;
                    if (-1 === s || !l)
                        throw new Error('no super block available for "' + n + '"');
                    l(e, c, r, o, a)
                },
                addExport: function(e) {
                    this.exported.push(e)
                },
                getExported: function() {
                    for (var e = {}, t = 0; t < this.exported.length; t++) {
                        var n = this.exported[t];
                        e[n] = this.ctx[n]
                    }
                    return e
                }
            })
              , d = n.extend({
                init: function(e, n, i, r) {
                    if (this.env = n || new u,
                    t.isObject(e))
                        switch (e.type) {
                        case "code":
                            this.tmplProps = e.obj;
                            break;
                        case "string":
                            this.tmplStr = e.obj
                        }
                    else {
                        if (!t.isString(e))
                            throw new Error("src must be a string or an object describing the source");
                        this.tmplStr = e
                    }
                    this.path = i,
                    r ? t.withPrettyErrors(this.path, this.env.dev, this._compile.bind(this)) : this.compiled = !1
                },
                render: function(e, n, i) {
                    return "function" == typeof e ? (i = e,
                    e = {}) : "function" == typeof n && (i = n,
                    n = null),
                    t.withPrettyErrors(this.path, this.env.dev, function() {
                        try {
                            this.compile()
                        } catch (t) {
                            if (i)
                                return i(t);
                            throw t
                        }
                        var r = new h(e || {},this.blocks)
                          , o = null;
                        return this.rootRenderFunc(this.env, r, n || new c, s, i || function(e, t) {
                            if (e)
                                throw e;
                            o = t
                        }
                        ),
                        o
                    }
                    .bind(this))
                },
                getExported: function(e, t, n) {
                    "function" == typeof e && (n = e,
                    e = {}),
                    "function" == typeof t && (n = t,
                    t = null);
                    try {
                        this.compile()
                    } catch (i) {
                        if (n)
                            return n(i);
                        throw i
                    }
                    var r = new h(e || {},this.blocks);
                    this.rootRenderFunc(this.env, r, t || new c, s, function() {
                        n(null, r.getExported())
                    })
                },
                compile: function() {
                    this.compiled || this._compile()
                },
                _compile: function() {
                    var e;
                    if (this.tmplProps)
                        e = this.tmplProps;
                    else {
                        var t = i.compile(this.tmplStr, this.env.asyncFilters, this.env.extensionsList, this.path, this.env.opts)
                          , n = new Function(t);
                        e = n()
                    }
                    this.blocks = this._getBlocks(e),
                    this.rootRenderFunc = e.root,
                    this.compiled = !0
                },
                _getBlocks: function(e) {
                    var t = {};
                    for (var n in e)
                        "b_" === n.slice(0, 2) && (t[n.slice(2)] = e[n]);
                    return t
                }
            });
            r.environment = {
                Environment: u,
                Template: d
            }
        }();
        var o, a = r.lib, s = r.environment, l = r.compiler, c = r.parser, u = r.lexer, h = r.runtime, d = r.loader, f = r.loaders, p = r.precompile;
        o = {},
        o.Environment = s.Environment,
        o.Template = s.Template,
        o.Loader = d,
        o.FileSystemLoader = f.FileSystemLoader,
        o.WebLoader = f.WebLoader,
        o.compiler = l,
        o.parser = c,
        o.lexer = u,
        o.runtime = h;
        var m;
        o.configure = function(e, t) {
            t = t || {},
            a.isObject(e) && (t = e,
            e = null);
            var n = "watch"in t ? !t.watch : !1
              , i = f.FileSystemLoader || f.WebLoader;
            return m = new s.Environment(new i(e,n),t),
            t && t.express && m.express(t.express),
            m
        }
        ,
        o.compile = function(e, t, n, i) {
            return m || o.configure(),
            new o.Template(e,t,n,i)
        }
        ,
        o.render = function(e, t, n) {
            return m || o.configure(),
            m.render(e, t, n)
        }
        ,
        o.renderString = function(e, t, n) {
            return m || o.configure(),
            m.renderString(e, t, n)
        }
        ,
        p && (o.precompile = p.precompile,
        o.precompileString = p.precompileString),
        o.require = function(e) {
            return r[e]
        }
        ,
        i = function() {
            return o
        }
        .call(t, n, t, e),
        !(void 0 !== i && (e.exports = i))
    }()
}
, function(e, t) {
    "use strict";
    var n;
    n = function(e) {
        e.addFilter("stringify", function(e) {
            return JSON.stringify(e, null, 2)
        })
    }
    ,
    e.exports = n
}
, function(e, t) {
    e.exports = function(e, t, n, i) {
        var r = n.root;
        n.root = function(e, t, n, o, a) {
            var s = e.getTemplate;
            e.getTemplate = function(e, t, r, o) {
                "function" == typeof t && (o = t,
                t = !1);
                var a = function(e) {
                    try {
                        return i[e]
                    } catch (t) {
                        if (n.get("_require"))
                            return n.get("_require")(e)
                    }
                }
                  , s = a(e);
                n.set("_require", a),
                t && s.compile(),
                o(null, s)
            }
            ,
            r(e, t, n, o, function(t, n) {
                e.getTemplate = s,
                a(t, n)
            })
        }
        ;
        var o = {
            obj: n,
            type: "code"
        };
        return new e.Template(o,t)
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(78)
      , c = n(76)
      , u = s(c)
      , h = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "_parseQueryString",
            value: function(e) {
                return e = e || "",
                u["default"].object(e.split("&").map(function(e) {
                    return e.split("=")
                }))
            }
        }, {
            key: "execute",
            value: function() {
                for (var e = this._getController(), n = !1, r = arguments.length, o = Array(r), a = 0; r > a; a++)
                    o[a] = arguments[a];
                return o[1].push(this._parseQueryString(o[1].pop())),
                e && u["default"].isFunction(e.onBeforeRoute) && (n = e.onBeforeRoute.apply(e, o)),
                n ? !1 : (i(Object.getPrototypeOf(t.prototype), "execute", this).apply(this, o),
                void (e && u["default"].isFunction(e.onAfterRoute) && e.onAfterRoute.apply(e, o)))
            }
        }, {
            key: "appRoutes",
            get: function() {
                return u["default"].invert(t.ROUTES)
            }
        }], [{
            key: "ROUTES",
            get: function() {
                return {
                    display: "",
                    routes: "routes",
                    bookmarks: "bookmarks",
                    search: "search"
                }
            }
        }]),
        t
    }(l.AppRouter);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(19)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(113)
      , d = (c(h),
    n(122))
      , f = c(d)
      , p = n(138)
      , m = c(p)
      , v = n(148)
      , g = c(v)
      , y = n(167)
      , b = c(y)
      , x = n(188)
      , w = c(x)
      , _ = n(399)
      , S = c(_)
      , M = n(432)
      , C = c(M)
      , T = n(76)
      , E = c(T)
      , k = s("Application")
      , A = s("Resource path")
      , P = s("API base URL")
      , L = s("Controller._initialized")
      , O = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this[k] = e.application,
            this[A] = e.resourcePath,
            this[P] = e.apiBaseURL,
            this[L] = !1
        }
        return r(t, e),
        o(t, [{
            key: "onBeforeRoute",
            value: function(e, t, n) {
                this[L] || this._initialize(t)
            }
        }, {
            key: "_initialize",
            value: function(e) {
                var t = this;
                if (!C["default"].webgl)
                    return void this._handleNoWebgl();
                var n = E["default"].last(e);
                this.starmap = new g["default"]({
                    resourcePath: this[A],
                    apiBaseURL: this[P],
                    state: n
                }),
                this.layout.map.show(new w["default"]({
                    model: this.starmap,
                    layout: this.layout
                }));
                var i = new f["default"]({
                    model: this.starmap
                });
                this.listenTo(i, "end", this.onLoadingEnd);
                var r = this.starmap.get("soundFX").get("resourcePath")
                  , o = r + "/sounds"
                  , a = this.starmap.get("soundFX").getSoundService();
                l.all([a.load("loading:logos:1", o + "/SE_LoadingLogo1.wav", "loading:sfx"), a.load("loading:logos:2", o + "/SE_LoadingLogo2.wav", "loading:sfx"), a.load("loading:enter-button:appear", o + "/SE_LoadingEnterButtonAppear.wav", "loading:sfx"), a.load("loading:enter-button:hover", o + "/SE_LoadingEnterButtonHover.wav", "loading:sfx"), a.load("loading:background-music:main", o + "/SE_LoadingBackground_LOOP.wav", "loading:bgm", {
                    loop: !0
                }), a.load("loading:background-music:extra", o + "/SE_LoadingBackgroundExtra_LOOP.wav", "loading:bgm", {
                    loop: !0
                })]).then(function() {
                    return t.layout.modal.show(i)
                }),
                this[L] = !0
            }
        }, {
            key: "_handleNoWebgl",
            value: function() {
                var e = new f["default"]({
                    noWebgl: !0
                });
                this.layout.modal.show(e)
            }
        }, {
            key: "onLoadingEnd",
            value: function() {
                this.layout.modal.empty(),
                this.layout.header.show(new m["default"]({
                    model: this.starmap
                })),
                this.layout.controls.show(new S["default"]({
                    model: this.starmap
                }))
            }
        }, {
            key: "onAfterRoute",
            value: function() {}
        }, {
            key: "display",
            value: function(e) {
                this.starmap.allLoaded.then(function(e) {
                    return setTimeout(function() {
                        e.get("interface").set("tab", b["default"].TABS.display)
                    }),
                    e
                })
            }
        }, {
            key: "routes",
            value: function() {
                this.starmap.allLoaded.then(function(e) {
                    return setTimeout(function() {
                        e.get("interface").set("tab", b["default"].TABS.routes)
                    }),
                    e
                })
            }
        }, {
            key: "bookmarks",
            value: function() {
                this.starmap.allLoaded.then(function(e) {
                    return setTimeout(function() {
                        e.get("interface").set("tab", b["default"].TABS.bookmarks)
                    }),
                    e
                })
            }
        }, {
            key: "search",
            value: function() {
                this.starmap.allLoaded.then(function(e) {
                    return setTimeout(function() {
                        e.get("interface").set("tab", b["default"].TABS.search)
                    }),
                    e
                })
            }
        }, {
            key: "application",
            get: function() {
                return this[k]
            }
        }, {
            key: "router",
            get: function() {
                return this.application.router
            }
        }, {
            key: "layout",
            get: function() {
                return this.application.layout
            }
        }]),
        t
    }(u.Object);
    t["default"] = O,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(19)["default"]
      , a = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(106)
      , l = (a(s),
    n(114))
      , c = a(l)
      , u = n(116)
      , h = a(u)
      , d = n(120)
      , f = a(d)
      , p = (n(121),
    ["selectSystem", "selectBody", "selectJumpPoint", "selectNothing", "hoverSystemIn", "hoverSystemOut", "hoverBodyIn", "hoverBodyOut", "hoverJumpPointIn", "hoverJumpPointOut"])
      , m = {
        LEFT_BUTTON: 0,
        RIGHT_BUTTON: 2
    }
      , v = function() {
        function e(t, n) {
            r(this, e),
            this._core = t,
            this._canvas = c["default"].createDocumentFragment(),
            this._eventTarget = c["default"].createDocumentFragment(),
            this._selectedLocation = null,
            this._longRangeScanner = new f["default"](this),
            this._location = h["default"].Galaxy,
            this._locationIsZoomed = !1,
            this._resourcePath
        }
        return i(e, [{
            key: "start",
            value: function() {
                var e = this;
                return p.forEach(function(t) {
                    var n = "_on" + (t[0].toUpperCase() + t.slice(1));
                    e[n] && e._core.addEventListener(t, e[n].bind(e))
                }),
                this._core.load()
            }
        }, {
            key: "destroy",
            value: function() {
                var e = this;
                p.forEach(function(t) {
                    var n = "_on" + (t[0].toUpperCase() + t.slice(1));
                    e[n] && e._core.removeEventListener(t, e[n].bind(e))
                })
            }
        }, {
            key: "addEventListener",
            value: function(e, t) {
                return this._eventTarget.addEventListener(e, t)
            }
        }, {
            key: "removeEventListener",
            value: function(e, t) {
                return this._eventTarget.removeEventListener(e, t)
            }
        }, {
            key: "goToLocation",
            value: function(e) {
                var t = this
                  , n = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1]
                  , i = o.resolve();
                if (this._location.equals(e) && this._locationIsZoomed)
                    return i;
                var r = this._location.type
                  , a = e.type;
                return r === h["default"].Types.GALAXY ? (i = i.then(function(n) {
                    return t._goToStarSystem(e)
                }),
                (a === h["default"].Types.CELESTIAL_OBJECT || a === h["default"].Types.JUMP_POINT) && (i = i.then(function(i) {
                    return t._goToObject(e, n)
                }))) : r === h["default"].Types.STAR_SYSTEM ? a === h["default"].Types.GALAXY ? i = i.then(function(e) {
                    return t._goToGalaxy()
                }) : a === h["default"].Types.STAR_SYSTEM ? i = i.then(function(e) {
                    return t._goToGalaxy()
                }).then(function(n) {
                    return t._goToStarSystem(e)
                }) : (a === h["default"].Types.CELESTIAL_OBJECT || a === h["default"].Types.JUMP_POINT) && (this._location.starSystemCode !== e.starSystemCode && (i = i.then(function(e) {
                    return t._goToGalaxy()
                }).then(function(n) {
                    return t._goToStarSystem(e)
                })),
                i = i.then(function(i) {
                    return t._goToObject(e, n)
                })) : (r === h["default"].Types.CELESTIAL_OBJECT || r === h["default"].Types.JUMP_POINT) && (a === h["default"].Types.GALAXY ? i = i.then(function(e) {
                    return t._goToGalaxy()
                }) : a === h["default"].Types.STAR_SYSTEM ? (this._location.starSystemCode !== e.starSystemCode && (i = i.then(function(e) {
                    return t._goToGalaxy()
                })),
                i = i.then(function(n) {
                    return t._goToStarSystem(e)
                })) : (a === h["default"].Types.CELESTIAL_OBJECT || a === h["default"].Types.JUMP_POINT) && (this._location.starSystemCode !== e.starSystemCode && (i = i.then(function(e) {
                    return t._goToGalaxy()
                }).then(function(n) {
                    return t._goToStarSystem(e)
                })),
                i = i.then(function(i) {
                    return t._goToObject(e, n)
                }))),
                this._setLocation(e, i),
                i
            }
        }, {
            key: "_setLocation",
            value: function(e, t) {
                this._location = e,
                this._eventTarget.dispatchEvent(new CustomEvent("location:change",{
                    detail: {
                        location: this._location,
                        animation: t
                    }
                }))
            }
        }, {
            key: "goToParentLocation",
            value: function(e) {
                return e.equals(h["default"].Galaxy) ? o.resolve() : e.type === h["default"].Types.STAR_SYSTEM ? this.goToLocation(h["default"].Galaxy) : this.goToLocation(new h["default"](h["default"].Types.STAR_SYSTEM,e.starSystemCode))
            }
        }, {
            key: "selectLocation",
            value: function(e) {
                this._selectedLocation = e,
                e.type == h["default"].Types.STAR_SYSTEM ? this._core.setSystemPivot(e.starSystemCode) : (e.type == h["default"].Types.CELESTIAL_OBJECT || e.type == h["default"].Types.JUMP_POINT) && this._core.setPlanetaryPivot(e.starSystemCode, e.objectCode)
            }
        }, {
            key: "unselectLocation",
            value: function() {
                this._selectedLocation = null,
                this._location.type === h["default"].Types.GALAXY && this._core.releaseSystemPivot()
            }
        }, {
            key: "addStickyHoverLocation",
            value: function(e) {
                e.type == h["default"].Types.STAR_SYSTEM ? this._core.forceSystemHighlight(e.starSystemCode) : (e.type == h["default"].Types.CELESTIAL_OBJECT || e.type == h["default"].Types.JUMP_POINT) && this._core.forcePlanetaryHovered(e.starSystemCode, e.objectCode)
            }
        }, {
            key: "removeStickyHoverLocation",
            value: function(e) {
                e.type == h["default"].Types.STAR_SYSTEM ? this._core.releaseSystemHighlight(e.starSystemCode) : (e.type == h["default"].Types.CELESTIAL_OBJECT || e.type == h["default"].Types.JUMP_POINT) && this._core.releasePlanetaryHovered(e.starSystemCode, e.objectCode)
            }
        }, {
            key: "moveSelectedElementAt",
            value: function(e, t) {
                this._core.setPivotScreenCoord(e, t)
            }
        }, {
            key: "goThroughJumpPoint",
            value: function(e) {
                var t = this
                  , n = o.resolve();
                this._location === h["default"].Types.STAR_SYSTEM && (n = n.then(function(n) {
                    return t._goToObject(e)
                })),
                n = n.then(function(e) {
                    return t._goToStarSystem(i)
                });
                var i = new h["default"](h["default"].Types.STAR_SYSTEM,this._core.getJumpPointDestination(e.objectCode));
                return this._location = i,
                this._eventTarget.dispatchEvent(new CustomEvent("location:change",{
                    detail: {
                        location: this._location,
                        animation: n
                    }
                })),
                n
            }
        }, {
            key: "getJumpTunnelInfo",
            value: function(e) {
                var t = this._core.getInfo()
                  , n = t.systems
                  , i = this._core.getJumpPointInfo(e.objectCode)
                  , r = n.find(function(e) {
                    return e.id === i.entry.star_system_id
                })
                  , o = n.find(function(e) {
                    return e.id === i.exit.star_system_id
                });
                return i.extra = {
                    destination: e.starSystemCode === r.code ? o : r
                },
                i
            }
        }, {
            key: "getLocationInfo",
            value: function(e) {
                if (e.type === h["default"].Types.GALAXY)
                    return null;
                if (e.type === h["default"].Types.STAR_SYSTEM)
                    return this._core.getSystemInfo(e.starSystemCode);
                var t = this._core.getBodyInfo(e.starSystemCode, e.objectCode);
                return e.type === h["default"].Types.JUMP_POINT && (((t || {}).raw || {}).jumpInfo = this.getJumpTunnelInfo(e)),
                t
            }
        }, {
            key: "getLocationCoordinates",
            value: function(e) {
                if (e.type === h["default"].Types.GALAXY)
                    return null;
                var t = void 0;
                return t = e.type === h["default"].Types.STAR_SYSTEM ? this._core.getSystemScreenCoord(e.starSystemCode) : this._core.getPlanetaryScreenCoord(e.starSystemCode, e.objectCode),
                {
                    x: t.x,
                    y: t.y
                }
            }
        }, {
            key: "routingShow",
            value: function(e) {
                this._core.showRouting(e)
            }
        }, {
            key: "routingHide",
            value: function() {
                this._core.showRouting(null)
            }
        }, {
            key: "routingGoToSegment",
            value: function(e) {
                this._core.setCurrentRoutingSystem(e.system_code);
                var t = new h["default"](h["default"].Types.STAR_SYSTEM,e.system_code);
                this._setLocation(t, o.resolve())
            }
        }, {
            key: "landingZoneHighlight",
            value: function(e, t) {
                this._core.setLandingZoneHighlight(e.starSystemCode, e.objectCode, t.code, !0)
            }
        }, {
            key: "landingZoneClear",
            value: function(e, t) {
                this._core.setLandingZoneHighlight(e.starSystemCode, e.objectCode, t.code, !1)
            }
        }, {
            key: "_goToGalaxy",
            value: function() {
                var e = this;
                return new o(function(t) {
                    return e._core.gotoGalacticView().onDone(t)
                }
                )
            }
        }, {
            key: "_goToStarSystem",
            value: function(e) {
                var t = this;
                return new o(function(n) {
                    return t._core.gotoSystemView().setSystemCode(e.starSystemCode).onDone(n)
                }
                )
            }
        }, {
            key: "_goToObject",
            value: function(e) {
                var t = this
                  , n = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];
                return new o(function(i) {
                    var r = t._core.gotoPlanetaryView().setPlanetaryCode(e.objectCode);
                    n.size ? (r = r.setBodyPixelSize(n.size),
                    t._locationIsZoomed = !0) : t._locationIsZoomed = !1,
                    r = r.onDone(i)
                }
                )
            }
        }, {
            key: "_onSelectSystem",
            value: function(e) {
                var t = e.systemCode
                  , n = e.button
                  , i = new h["default"](h["default"].Types.STAR_SYSTEM,t)
                  , r = new CustomEvent("select:starsystem",{
                    detail: {
                        mouseButton: n,
                        location: i
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(r)
            }
        }, {
            key: "_onSelectBody",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.CELESTIAL_OBJECT,t,n)
                  , o = new CustomEvent("select:celestialobject",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "_onSelectJumpPoint",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.JUMP_POINT,t,n)
                  , o = new CustomEvent("select:jumppoint",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "_onSelectNothing",
            value: function(e) {
                var t = new CustomEvent("select:none",{
                    detail: {
                        mouseButton: e.button
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(t)
            }
        }, {
            key: "_onHoverSystemIn",
            value: function(e) {
                var t = e.systemCode
                  , n = e.button
                  , i = new h["default"](h["default"].Types.STAR_SYSTEM,t)
                  , r = new CustomEvent("mouseenter:starsystem",{
                    detail: {
                        mouseButton: n,
                        location: i
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(r)
            }
        }, {
            key: "_onHoverSystemOut",
            value: function(e) {
                var t = e.systemCode
                  , n = e.button
                  , i = new h["default"](h["default"].Types.STAR_SYSTEM,t)
                  , r = new CustomEvent("mouseleave:starsystem",{
                    detail: {
                        mouseButton: n,
                        location: i
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(r)
            }
        }, {
            key: "_onHoverBodyIn",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.CELESTIAL_OBJECT,t,n)
                  , o = new CustomEvent("mouseenter:celestialobject",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "_onHoverBodyOut",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.CELESTIAL_OBJECT,t,n)
                  , o = new CustomEvent("mouseleave:celestialobject",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "_onHoverJumpPointIn",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.JUMP_POINT,t,n)
                  , o = new CustomEvent("mouseenter:jumppoint",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "_onHoverJumpPointOut",
            value: function(e) {
                var t = e.systemCode
                  , n = e.planetaryCode
                  , i = e.button
                  , r = new h["default"](h["default"].Types.JUMP_POINT,t,n)
                  , o = new CustomEvent("mouseleave:jumppoint",{
                    detail: {
                        mouseButton: i,
                        location: r
                    },
                    cancelable: !0
                });
                this._eventTarget.dispatchEvent(o)
            }
        }, {
            key: "showLongRangeScanner",
            value: function() {
                this._core.showLongRangeScanner(!0, .25)
            }
        }, {
            key: "hideLongRangeScanner",
            value: function() {
                this._core.showLongRangeScanner(!1, .25)
            }
        }, {
            key: "setLongRangeScannerValues",
            value: function(e) {
                var t = e.lifeform
                  , n = e.economy
                  , i = e.danger;
                this._core.setLongRangeScannerData(t / 10, n / 10, i / 10)
            }
        }, {
            key: "setLongRangeScannerPosition",
            value: function(e) {
                var t = e.x
                  , n = e.y;
                this._core.setLongRangeScannerPosition(t, n)
            }
        }, {
            key: "setLongRangeScannerSize",
            value: function(e) {
                var t = e.width
                  , n = e.height;
                this._core.setLongRangeScannerSize(t, n)
            }
        }, {
            key: "canvas",
            get: function() {
                return this._canvas
            }
        }, {
            key: "resourcePath",
            get: function() {
                return this._resourcePath
            }
        }, {
            key: "selectedLocation",
            get: function() {
                return this._selectedLocation
            }
        }, {
            key: "longRangeScanner",
            get: function() {
                return this._longRangeScanner
            }
        }, {
            key: "loadingOverlayOpacity",
            get: function() {
                return this._loadingOverlayOpacity
            },
            set: function(e) {
                this._loadingOverlayOpacity = e,
                this._core.showLoadingScreen(e)
            }
        }, {
            key: "location",
            get: function() {
                return this._location
            }
        }, {
            key: "locationZoomed",
            get: function() {
                return this._locationIsZoomed
            }
        }], [{
            key: "Mouse",
            get: function() {
                return m
            }
        }]),
        e
    }();
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    (function(t) {
        var i = "undefined" != typeof t ? t : "undefined" != typeof window ? window : {}
          , r = n(115);
        if ("undefined" != typeof document)
            e.exports = document;
        else {
            var o = i["__GLOBAL_DOCUMENT_CACHE@4"];
            o || (o = i["__GLOBAL_DOCUMENT_CACHE@4"] = r),
            e.exports = o
        }
    }
    ).call(t, function() {
        return this
    }())
}
, function(e, t) {}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(117)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = o({
        GALAXY: "GALAXY",
        STAR_SYSTEM: "STAR_SYSTEM",
        CELESTIAL_OBJECT: "CELESTIAL_OBJECT",
        JUMP_POINT: "JUMP_POINT"
    })
      , s = function() {
        function e() {
            var t = arguments.length <= 0 || void 0 === arguments[0] ? a.GALAXY : arguments[0]
              , n = arguments.length <= 1 || void 0 === arguments[1] ? null : arguments[1]
              , i = arguments.length <= 2 || void 0 === arguments[2] ? null : arguments[2];
            r(this, e),
            this._type = t,
            this._starSystemCode = n,
            this._objectCode = i
        }
        return i(e, [{
            key: "equals",
            value: function(e) {
                return e ? this._type === e._type && this._starSystemCode === e._starSystemCode && this._objectCode === e._objectCode : !1
            }
        }, {
            key: "toURLParams",
            value: function() {
                var e = this.objectCode || this.starSystemCode;
                if (!e)
                    return null;
                var t = "";
                return this.objectCode && (t = "&system=" + this.starSystemCode),
                "" + e + t
            }
        }, {
            key: "type",
            get: function() {
                return this._type
            }
        }, {
            key: "starSystemCode",
            get: function() {
                return this._starSystemCode
            }
        }, {
            key: "objectCode",
            get: function() {
                return this._objectCode
            }
        }], [{
            key: "Galaxy",
            get: function() {
                return new e(a.GALAXY)
            }
        }, {
            key: "Types",
            get: function() {
                return a
            }
        }]),
        e
    }();
    t["default"] = s,
    e.exports = t["default"]
}
, function(e, t, n) {
    e.exports = {
        "default": n(118),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(119),
    e.exports = n(30).Object.freeze
}
, [473, 55, 86], function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
        function e(t) {
            r(this, e),
            this._starmapApi = t,
            this._hidden = !0,
            this._position = {
                x: 0,
                y: 0
            },
            this._size = {
                width: 0,
                height: 0
            }
        }
        return i(e, [{
            key: "setValues",
            value: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? {
                    lifeform: 0,
                    economy: 0,
                    danger: 0
                } : arguments[0];
                this._starmapApi.setLongRangeScannerValues(e)
            }
        }, {
            key: "hidden",
            get: function() {
                return this._hidden
            },
            set: function(e) {
                this._hidden !== e && (e ? this._starmapApi.hideLongRangeScanner() : this._starmapApi.showLongRangeScanner(),
                this._hidden = e)
            }
        }, {
            key: "position",
            get: function() {
                return this._position
            },
            set: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? {
                    x: 0,
                    y: 0
                } : arguments[0];
                this._position = e,
                this._starmapApi.setLongRangeScannerPosition(e)
            }
        }, {
            key: "size",
            get: function() {
                return this._size
            },
            set: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? {
                    width: 0,
                    height: 0
                } : arguments[0];
                this._size = e,
                this._starmapApi.setLongRangeScannerSize(e)
            }
        }]),
        e
    }();
    t["default"] = o,
    e.exports = t["default"]
}
, function(e, n) {
    e.exports = function(e) {
        function t(i) {
            if (n[i])
                return n[i].exports;
            var r = n[i] = {
                exports: {},
                id: i,
                loaded: !1
            };
            return e[i].call(r.exports, r, r.exports, t),
            r.loaded = !0,
            r.exports
        }
        var n = {};
        return t.m = e,
        t.c = n,
        t.p = "",
        t(0)
    }(function(e) {
        for (var t in e)
            if (Object.prototype.hasOwnProperty.call(e, t))
                switch (typeof e[t]) {
                case "function":
                    break;
                case "object":
                    e[t] = function(t) {
                        var n = t.slice(1)
                          , i = e[t[0]];
                        return function(e, t, r) {
                            i.apply(this, [e, t, r].concat(n))
                        }
                    }(e[t]);
                    break;
                default:
                    e[t] = e[e[t]]
                }
        return e
    }([function(e, t, n) {
        function i(e) {
            var n = new a["default"]
              , i = new b["default"](e.rootElement || document.body)
              , C = new g["default"](i.renderer)
              , T = new v["default"](i.renderer.domElement)
              , E = new y["default"](C.camera,i.renderer.domElement,n)
              , k = new l["default"](n,i.renderer,C.scene,C.camera,S.window.innerWidth,S.window.innerHeight,e.resourcePath)
              , A = function() {
                var t = e.getSessionData()
                  , n = {
                    "Content-Type": "application/json"
                };
                return n["X-" + t.sessionName] = t.sessionId,
                n
            }
              , P = new s["default"](C.scene,C.camera,S.window,T.positionInVP,k,n,e.apiBaseURL + "/api/starmap",e.resourcePath,A)
              , L = new c["default"](S.window.innerWidth,S.window.innerHeight,C.camera,i.renderer)
              , O = new _["default"](C.camera,e.resourcePath)
              , R = new M["default"](i.initPostProcessing,T,S.window.innerWidth,S.window.innerHeight,C.camera)
              , F = new x["default"]
              , B = new r["default"](F,i,C,T,E,P,n,L,O,R);
            n.env = B,
            t.theEnvironment = B,
            F.addState("StateGalaxy", new o["default"](F,B)),
            F.addState("StateEnterStarSystem", new u["default"](F,B)),
            F.addState("StateStarSystem", new h["default"](F,B)),
            F.addState("StateLeaveStarSystem", new d["default"](F,B)),
            F.addState("StateCelestialBody", new f["default"](F,B)),
            F.addState("StateEnterJumpPoint", new p["default"](F,B)),
            F.addState("StateSlideJumpPoint", new m["default"](F,B));
            var D = [new w["default"], n, O, E, P, k, L, C, R, F, T];
            return i.init(D, C.camera),
            n
        }
        n(1),
        n(3),
        n(4),
        n(5),
        n(6),
        n(8),
        n(9),
        n(10),
        n(11),
        n(12),
        n(13),
        n(14),
        n(15),
        n(16),
        n(17),
        n(18);
        var r = n(19)
          , o = n(20)
          , a = n(28)
          , s = n(47)
          , l = n(77)
          , c = n(91)
          , u = n(92)
          , h = n(93)
          , d = n(94)
          , f = n(95)
          , p = n(96)
          , m = n(97)
          , v = n(98)
          , g = n(99)
          , y = n(23)
          , b = n(64)
          , x = n(100)
          , w = n(101)
          , _ = n(102)
          , S = n(65)
          , M = (n(103),
        n(104));
        t.starmapMain = i,
        S.window.starmapMain = i
    }
    , function(e, n, i) {
        (function(e) {
            e.ColladaLoader = function() {
                function n(e, t, n, r) {
                    var o = 0;
                    if (document.implementation && document.implementation.createDocument) {
                        var a = new XMLHttpRequest;
                        a.onreadystatechange = function() {
                            if (4 === a.readyState) {
                                if (0 === a.status || 200 === a.status)
                                    if (a.responseXML)
                                        We = t,
                                        i(a.responseXML, void 0, e);
                                    else if (a.responseText) {
                                        We = t;
                                        var s = new DOMParser
                                          , l = s.parseFromString(a.responseText, "application/xml");
                                        i(l, void 0, e)
                                    } else
                                        faillCallback ? r() : console.error("ColladaLoader: Empty or non-existing file (" + e + ")")
                            } else
                                3 === a.readyState && n && (0 === o && (o = a.getResponseHeader("Content-Length")),
                                n({
                                    total: o,
                                    loaded: a.responseText.length
                                }))
                        }
                        ,
                        a.open("GET", e, !0),
                        a.send(null)
                    } else
                        alert("Don't know how to parse XML!")
                }
                function i(t, n, i) {
                    if (He = t,
                    n = n || We,
                    void 0 !== i) {
                        var r = i.split("/");
                        r.pop(),
                        Ve = (r.length < 1 ? "." : r.join("/")) + "/"
                    }
                    a(),
                    Ee(),
                    Xe = l("library_images image", O, "image"),
                    Qe = l("library_materials material", $, "material"),
                    Ke = l("library_effects effect", re, "effect"),
                    Ze = l("library_geometries geometry", H, "geometry"),
                    $e = l("library_cameras camera", ue, "camera"),
                    et = l("library_lights light", de, "light"),
                    Je = l("library_controllers controller", R, "controller"),
                    Ye = l("library_animations animation", ae, "animation"),
                    Ne = l("library_visual_scenes visual_scene", D, "visual_scene"),
                    je = l("library_kinematics_models kinematics_model", pe, "kinematics_model"),
                    ze = [],
                    Ue = [],
                    Fe = c(),
                    Ge = new e.Group;
                    for (var o = 0; o < Fe.nodes.length; o++)
                        Ge.add(S(Fe.nodes[o]));
                    Ge.scale.multiplyScalar(it),
                    h(),
                    Be = u(),
                    _();
                    var s = {
                        scene: Ge,
                        morphs: ze,
                        skins: Ue,
                        animations: De,
                        kinematics: Ie,
                        dae: {
                            images: Xe,
                            materials: Qe,
                            cameras: $e,
                            lights: et,
                            effects: Ke,
                            geometries: Ze,
                            controllers: Je,
                            animations: Ye,
                            visualScenes: Ne,
                            visualScene: Fe,
                            scene: Fe,
                            kinematicsModels: je,
                            kinematicsModel: Be
                        }
                    };
                    return n && n(s),
                    s
                }
                function r(e) {
                    tt = e
                }
                function a() {
                    var e = He.querySelectorAll("asset")
                      , t = e[0];
                    if (t && t.childNodes)
                        for (var n = 0; n < t.childNodes.length; n++) {
                            var i = t.childNodes[n];
                            switch (i.nodeName) {
                            case "unit":
                                var r = i.getAttribute("meter");
                                r && (it = parseFloat(r));
                                break;
                            case "up_axis":
                                rt = i.textContent.charAt(0)
                            }
                        }
                }
                function l(e, t, n) {
                    for (var i = He.querySelectorAll(e), r = {}, o = 0, a = i.length, s = 0; a > s; s++) {
                        var l = i[s]
                          , c = (new t).parse(l);
                        c.id && 0 !== c.id.length || (c.id = n + o++),
                        r[c.id] = c
                    }
                    return r
                }
                function c() {
                    var e = He.querySelectorAll("scene instance_visual_scene")[0];
                    if (e) {
                        var t = e.getAttribute("url").replace(/^#/, "");
                        return Ne[t.length > 0 ? t : "visual_scene0"]
                    }
                    return null
                }
                function u() {
                    var e = He.querySelectorAll("instance_kinematics_model")[0];
                    if (e) {
                        var t = e.getAttribute("url").replace(/^#/, "");
                        return je[t.length > 0 ? t : "kinematics_model0"]
                    }
                    return null
                }
                function h() {
                    De = [],
                    d(Ge)
                }
                function d(e) {
                    var t = Fe.getChildById(e.colladaId, !0)
                      , n = null;
                    if (t && t.keys) {
                        n = {
                            fps: 60,
                            hierarchy: [{
                                node: t,
                                keys: t.keys,
                                sids: t.sids
                            }],
                            node: e,
                            name: "animation_" + e.name,
                            length: 0
                        },
                        De.push(n);
                        for (var i = 0, r = t.keys.length; r > i; i++)
                            n.length = Math.max(n.length, t.keys[i].time)
                    } else
                        n = {
                            hierarchy: [{
                                keys: [],
                                sids: []
                            }]
                        };
                    for (var i = 0, r = e.children.length; r > i; i++)
                        for (var o = d(e.children[i]), a = 0, s = o.hierarchy.length; s > a; a++)
                            n.hierarchy.push({
                                keys: [],
                                sids: []
                            });
                    return n
                }
                function f() {
                    var e, t = 1e6, n = -t, i = 0;
                    for (var r in Ye) {
                        var o = Ye[r];
                        e = e || o.id;
                        for (var a = 0; a < o.sampler.length; a++) {
                            var s = o.sampler[a];
                            s.create(),
                            t = Math.min(t, s.startTime),
                            n = Math.max(n, s.endTime),
                            i = Math.max(i, s.input.length)
                        }
                    }
                    return {
                        start: t,
                        end: n,
                        frames: i,
                        ID: e
                    }
                }
                function p(e, t) {
                    var n = t instanceof V ? Je[t.url] : t;
                    if (!n || !n.morph)
                        return void console.log("could not find morph controller!");
                    for (var i = n.morph, r = 0; r < i.targets.length; r++) {
                        var o = i.targets[r]
                          , a = Ze[o];
                        if (a.mesh && a.mesh.primitives && a.mesh.primitives.length) {
                            var s = a.mesh.primitives[0].geometry;
                            s.vertices.length === e.vertices.length && e.morphTargets.push({
                                name: "target_1",
                                vertices: s.vertices
                            })
                        }
                    }
                    e.morphTargets.push({
                        name: "target_Z",
                        vertices: e.vertices
                    })
                }
                function m(t, n, i, r) {
                    if (t.world = t.world || new e.Matrix4,
                    t.localworld = t.localworld || new e.Matrix4,
                    t.world.copy(t.matrix),
                    t.localworld.copy(t.matrix),
                    t.channels && t.channels.length) {
                        var o = t.channels[0]
                          , a = o.sampler.output[i];
                        a instanceof e.Matrix4 && (t.world.copy(a),
                        t.localworld.copy(a),
                        0 === i && t.matrix.copy(a))
                    }
                    r && t.world.multiplyMatrices(r, t.world),
                    n.push(t);
                    for (var s = 0; s < t.nodes.length; s++)
                        m(t.nodes[s], n, i, t.world)
                }
                function g(t, n) {
                    for (var i = 0; i < t.length; i++) {
                        var r = t[i]
                          , o = -1;
                        if ("JOINT" == r.type) {
                            for (var a = 0; a < n.joints.length; a++)
                                if (r.sid === n.joints[a]) {
                                    o = a;
                                    break
                                }
                            if (o >= 0) {
                                var s = n.invBindMatrices[o];
                                r.invBindMatrix = s,
                                r.skinningMatrix = new e.Matrix4,
                                r.skinningMatrix.multiplyMatrices(r.world, s),
                                r.animatrix = new e.Matrix4,
                                r.animatrix.copy(r.localworld),
                                r.weights = [];
                                for (var a = 0; a < n.weights.length; a++)
                                    for (var l = 0; l < n.weights[a].length; l++) {
                                        var c = n.weights[a][l];
                                        c.joint === o && r.weights.push(c)
                                    }
                            } else
                                console.warn("ColladaLoader: Could not find joint '" + r.sid + "'."),
                                r.skinningMatrix = new e.Matrix4,
                                r.weights = []
                        }
                    }
                }
                function y(t) {
                    var n = []
                      , i = function(t, n, r) {
                        var o = {};
                        o.name = n.sid,
                        o.parent = t,
                        o.matrix = n.matrix;
                        var a = [new e.Vector3, new e.Quaternion, new e.Vector3];
                        o.matrix.decompose(a[0], a[1], a[2]),
                        o.pos = [a[0].x, a[0].y, a[0].z],
                        o.scl = [a[2].x, a[2].y, a[2].z],
                        o.rotq = [a[1].x, a[1].y, a[1].z, a[1].w],
                        r.push(o);
                        for (var s in n.nodes)
                            i(n.sid, n.nodes[s], r)
                    };
                    return i(-1, t, n),
                    n
                }
                function b(t, n, i) {
                    var r = [];
                    m(n, r, -1),
                    g(r, i.skin),
                    v = new e.Vector3;
                    for (var a = [], l = 0; l < t.vertices.length; l++)
                        a.push(new e.Vector3);
                    for (l = 0; l < r.length; l++)
                        if ("JOINT" == r[l].type)
                            for (j = 0; j < r[l].weights.length; j++)
                                w = r[l].weights[j],
                                vidx = w.index,
                                weight = w.weight,
                                o = t.vertices[vidx],
                                s = a[vidx],
                                v.x = o.x,
                                v.y = o.y,
                                v.z = o.z,
                                v.applyMatrix4(r[l].skinningMatrix),
                                s.x += v.x * weight,
                                s.y += v.y * weight,
                                s.z += v.z * weight;
                    for (var l = 0; l < t.vertices.length; l++)
                        t.vertices[l] = a[l]
                }
                function x(t, n, i) {
                    var r = Je[n.url];
                    if (i = void 0 !== i ? i : 40,
                    !r || !r.skin)
                        return void console.log("ColladaLoader: Could not find skin controller.");
                    if (!n.skeleton || !n.skeleton.length)
                        return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");
                    for (var o = f(), a = Fe.getChildById(n.skeleton[0], !0) || Fe.getChildBySid(n.skeleton[0], !0), s = y(a), l = r.skin.joints, c = [], u = 0; u < l.length; u++)
                        for (var h = 0; h < s.length; h++)
                            s[h].name === l[u] && (c[u] = s[h]);
                    for (var u = 0; u < c.length; u++)
                        for (var h = 0; h < c.length; h++)
                            c[u].parent === c[h].name && (c[u].parent = h);
                    var u, h, d;
                    new e.Vector3;
                    for (u = 0; u < t.vertices.length; u++)
                        t.vertices[u].applyMatrix4(r.skin.bindShapeMatrix);
                    for (var p = [], v = [], x = r.skin.weights, u = 0; u < x.length; u++) {
                        var w = new e.Vector4(x[u][0] ? x[u][0].joint : 0,x[u][1] ? x[u][1].joint : 0,x[u][2] ? x[u][2].joint : 0,x[u][3] ? x[u][3].joint : 0)
                          , d = new e.Vector4(x[u][0] ? x[u][0].weight : 0,x[u][1] ? x[u][1].weight : 0,x[u][2] ? x[u][2].weight : 0,x[u][3] ? x[u][3].weight : 0);
                        p.push(w),
                        v.push(d)
                    }
                    t.skinIndices = p,
                    t.skinWeights = v,
                    t.bones = c;
                    for (var _ = {
                        name: o.ID,
                        fps: 30,
                        length: o.frames / 30,
                        hierarchy: []
                    }, h = 0; h < c.length; h++)
                        _.hierarchy.push({
                            parent: c[h].parent,
                            name: c[h].name,
                            keys: []
                        });
                    for (console.log("ColladaLoader:", o.ID + " has " + c.length + " bones."),
                    b(t, a, r),
                    i = 0; i < o.frames; i++) {
                        var S = [];
                        m(a, S, i),
                        g(S, r.skin);
                        for (var u = 0; u < S.length; u++)
                            for (var h = 0; h < _.hierarchy.length; h++)
                                if (_.hierarchy[h].name === S[u].sid) {
                                    var M = {};
                                    M.time = i / 30,
                                    M.matrix = S[u].animatrix,
                                    0 === i && (S[u].matrix = M.matrix);
                                    var C = [new e.Vector3, new e.Quaternion, new e.Vector3];
                                    M.matrix.decompose(C[0], C[1], C[2]),
                                    M.pos = [C[0].x, C[0].y, C[0].z],
                                    M.scl = [C[2].x, C[2].y, C[2].z],
                                    M.rot = C[1],
                                    _.hierarchy[h].keys.push(M)
                                }
                        t.animation = _
                    }
                }
                function _() {
                    if (Be && 0 === Be.joints.length)
                        return void (Ie = void 0);
                    var t = {}
                      , n = function(e, n) {
                        var i = n.getAttribute("id")
                          , r = Fe.getChildById(i, !0)
                          , o = Be.joints[e];
                        Ge.traverse(function(n) {
                            n.colladaId == i && (t[e] = {
                                node: n,
                                transforms: r.transforms,
                                joint: o,
                                position: o.zeroPosition
                            })
                        })
                    };
                    Ie = {
                        joints: Be && Be.joints,
                        getJointValue: function(e) {
                            var n = t[e];
                            return n ? n.position : void console.log("getJointValue: joint " + e + " doesn't exist")
                        },
                        setJointValue: function(n, i) {
                            var o = t[n];
                            if (o) {
                                var a = o.joint;
                                if (i > a.limits.max || i < a.limits.min)
                                    console.log("setJointValue: joint " + n + " value " + i + " outside of limits (min: " + a.limits.min + ", max: " + a.limits.max + ")");
                                else if (a["static"])
                                    console.log("setJointValue: joint " + n + " is static");
                                else {
                                    var s = o.node
                                      , l = a.axis
                                      , c = o.transforms
                                      , u = new e.Matrix4;
                                    for (r = 0; r < c.length; r++) {
                                        var h = c[r];
                                        if (h.sid && -1 !== h.sid.indexOf("joint" + n))
                                            switch (a.type) {
                                            case "revolute":
                                                u.multiply(d.makeRotationAxis(l, e.Math.degToRad(i)));
                                                break;
                                            case "prismatic":
                                                u.multiply(d.makeTranslation(l.x * i, l.y * i, l.z * i));
                                                break;
                                            default:
                                                console.warn("setJointValue: unknown joint type: " + a.type)
                                            }
                                        else {
                                            var d = new e.Matrix4;
                                            switch (h.type) {
                                            case "matrix":
                                                u.multiply(h.obj);
                                                break;
                                            case "translate":
                                                u.multiply(d.makeTranslation(h.obj.x, h.obj.y, h.obj.z));
                                                break;
                                            case "rotate":
                                                u.multiply(d.makeRotationAxis(h.obj, h.angle))
                                            }
                                        }
                                    }
                                    var f = u.elements
                                      , p = Array.prototype.slice.call(f)
                                      , m = [p[0], p[4], p[8], p[12], p[1], p[5], p[9], p[13], p[2], p[6], p[10], p[14], p[3], p[7], p[11], p[15]];
                                    s.matrix.set.apply(s.matrix, m),
                                    s.matrix.decompose(s.position, s.quaternion, s.scale)
                                }
                            } else
                                console.log("setJointValue: joint " + n + " doesn't exist")
                        }
                    };
                    var i = He.querySelector("scene instance_kinematics_scene");
                    if (i)
                        for (var r = 0; r < i.childNodes.length; r++) {
                            var o = i.childNodes[r];
                            if (1 == o.nodeType)
                                switch (o.nodeName) {
                                case "bind_joint_axis":
                                    var a = o.getAttribute("target").split("/").pop()
                                      , s = o.querySelector("axis param").textContent
                                      , l = parseInt(s.split("joint").pop().split(".")[0])
                                      , c = He.querySelector('[sid="' + a + '"]');
                                    if (c) {
                                        var u = c.parentElement;
                                        n(l, u)
                                    }
                                }
                        }
                }
                function S(t, n) {
                    var i, r, o, a, s = new e.Object3D, l = !1;
                    for (o = 0; o < t.controllers.length; o++) {
                        var c = Je[t.controllers[o].url];
                        switch (c.type) {
                        case "skin":
                            if (Ze[c.skin.source]) {
                                var u = new U;
                                u.url = c.skin.source,
                                u.instance_material = t.controllers[o].instance_material,
                                t.geometries.push(u),
                                l = !0,
                                i = t.controllers[o]
                            } else if (Je[c.skin.source]) {
                                var h = Je[c.skin.source];
                                if (r = h,
                                h.morph && Ze[h.morph.source]) {
                                    var u = new U;
                                    u.url = h.morph.source,
                                    u.instance_material = t.controllers[o].instance_material,
                                    t.geometries.push(u)
                                }
                            }
                            break;
                        case "morph":
                            if (Ze[c.morph.source]) {
                                var u = new U;
                                u.url = c.morph.source,
                                u.instance_material = t.controllers[o].instance_material,
                                t.geometries.push(u),
                                r = t.controllers[o]
                            }
                            console.log("ColladaLoader: Morph-controller partially supported.")
                        }
                    }
                    var d = {};
                    for (o = 0; o < t.geometries.length; o++) {
                        var f, m = t.geometries[o], v = m.instance_material, g = Ze[m.url], y = {}, b = [], w = 0;
                        if (g) {
                            if (!g.mesh || !g.mesh.primitives)
                                continue;
                            if (0 === s.name.length && (s.name = g.id),
                            v)
                                for (a = 0; a < v.length; a++) {
                                    var _ = v[a]
                                      , M = Qe[_.target]
                                      , C = M.instance_effect.url
                                      , T = Ke[C].shader
                                      , E = T.material;
                                    if (g.doubleSided) {
                                        if (!(_.symbol in d)) {
                                            var k = E.clone();
                                            k.side = e.DoubleSide,
                                            d[_.symbol] = k
                                        }
                                        E = d[_.symbol]
                                    }
                                    E.opacity = E.opacity ? E.opacity : 1,
                                    y[_.symbol] = w,
                                    b.push(E),
                                    f = E,
                                    f.name = null === M.name || "" === M.name ? M.id : M.name,
                                    w++
                                }
                            var A, P = f || new e.MeshLambertMaterial({
                                color: 14540253,
                                side: g.doubleSided ? e.DoubleSide : e.FrontSide
                            }), L = g.mesh.geometry3js;
                            if (w > 1)
                                for (P = new e.MeshFaceMaterial(b),
                                a = 0; a < L.faces.length; a++) {
                                    var O = L.faces[a];
                                    O.materialIndex = y[O.daeMaterial]
                                }
                            void 0 !== i ? (x(L, i),
                            L.morphTargets.length > 0 ? (P.morphTargets = !0,
                            P.skinning = !1) : (P.morphTargets = !1,
                            P.skinning = !0),
                            A = new e.SkinnedMesh(L,P,!1),
                            A.name = "skin_" + Ue.length,
                            Ue.push(A)) : void 0 !== r ? (p(L, r),
                            P.morphTargets = !0,
                            A = new e.Mesh(L,P),
                            A.name = "morph_" + ze.length,
                            ze.push(A)) : A = L.isLineStrip === !0 ? new e.Line(L) : new e.Mesh(L,P),
                            s.add(A)
                        }
                    }
                    for (o = 0; o < t.cameras.length; o++) {
                        var R = t.cameras[o]
                          , F = $e[R.url]
                          , B = new e.PerspectiveCamera(F.yfov,parseFloat(F.aspect_ratio),parseFloat(F.znear),parseFloat(F.zfar));
                        s.add(B)
                    }
                    for (o = 0; o < t.lights.length; o++) {
                        var D = null
                          , I = t.lights[o]
                          , N = et[I.url];
                        if (N && N.technique) {
                            var j, V = N.color.getHex(), z = N.intensity, H = N.distance, G = N.falloff_angle;
                            switch (N.technique) {
                            case "directional":
                                D = new e.DirectionalLight(V,z,H),
                                D.position.set(0, 0, 1);
                                break;
                            case "point":
                                D = new e.PointLight(V,z,H);
                                break;
                            case "spot":
                                D = new e.SpotLight(V,z,H,G,j),
                                D.position.set(0, 0, 1);
                                break;
                            case "ambient":
                                D = new e.AmbientLight(V)
                            }
                        }
                        D && s.add(D)
                    }
                    if (s.name = t.name || t.id || "",
                    s.colladaId = t.id || "",
                    s.layer = t.layer || "",
                    s.matrix = t.matrix,
                    s.matrix.decompose(s.position, s.quaternion, s.scale),
                    nt.centerGeometry && s.geometry) {
                        var W = s.geometry.center();
                        W.multiply(s.scale),
                        W.applyQuaternion(s.quaternion),
                        s.position.sub(W)
                    }
                    for (o = 0; o < t.nodes.length; o++)
                        s.add(S(t.nodes[o], t));
                    return s
                }
                function M(e) {
                    for (var t = He.querySelectorAll("library_nodes node"), n = 0; n < t.length; n++) {
                        var i = t[n].attributes.getNamedItem("id");
                        if (i && i.value === e)
                            return t[n]
                    }
                    return void 0
                }
                function C(e) {
                    var t = []
                      , n = 1e6
                      , i = -1e6;
                    for (var r in Ye)
                        for (var o = Ye[r], a = 0; a < o.channel.length; a++) {
                            var s = o.channel[a]
                              , l = o.sampler[a]
                              , r = s.target.split("/")[0];
                            r == e.id && (l.create(),
                            s.sampler = l,
                            n = Math.min(n, l.startTime),
                            i = Math.max(i, l.endTime),
                            t.push(s))
                        }
                    return t.length && (e.startTime = n,
                    e.endTime = i),
                    t
                }
                function T(e) {
                    if (e.channels && e.channels.length) {
                        for (var t = [], n = [], i = 0, r = e.channels.length; r > i; i++) {
                            var o, a = e.channels[i], s = a.fullSid, l = a.sampler, c = l.input, u = e.getTransformBySid(a.sid);
                            if (a.arrIndices) {
                                o = [];
                                for (var h = 0, d = a.arrIndices.length; d > h; h++)
                                    o[h] = Oe(a.arrIndices[h])
                            } else
                                o = Re(a.member);
                            if (u) {
                                -1 === n.indexOf(s) && n.push(s);
                                for (var h = 0, d = c.length; d > h; h++) {
                                    var f = c[h]
                                      , p = l.getData(u.type, h, o)
                                      , m = E(t, f);
                                    if (!m) {
                                        m = new ce(f);
                                        var v = k(t, f);
                                        t.splice(-1 === v ? t.length : v, 0, m)
                                    }
                                    m.addTarget(s, u, o, p)
                                }
                            } else
                                console.log('Could not find transform "' + a.sid + '" in node ' + e.id)
                        }
                        for (var i = 0; i < n.length; i++)
                            for (var g = n[i], h = 0; h < t.length; h++) {
                                var m = t[h];
                                m.hasTarget(g) || A(t, m, h, g)
                            }
                        e.keys = t,
                        e.sids = n
                    }
                }
                function E(e, t) {
                    for (var n = null, i = 0, r = e.length; r > i && null === n; i++) {
                        var o = e[i];
                        if (o.time === t)
                            n = o;
                        else if (o.time > t)
                            break
                    }
                    return n
                }
                function k(e, t) {
                    for (var n = -1, i = 0, r = e.length; r > i && -1 === n; i++) {
                        var o = e[i];
                        o.time >= t && (n = i)
                    }
                    return n
                }
                function A(e, t, n, i) {
                    var r = L(e, i, n ? n - 1 : 0)
                      , o = P(e, i, n + 1);
                    if (r && o) {
                        var a, s = (t.time - r.time) / (o.time - r.time), l = r.getTarget(i), c = o.getTarget(i).data, u = l.data;
                        if ("matrix" === l.type)
                            a = u;
                        else if (u.length) {
                            a = [];
                            for (var h = 0; h < u.length; ++h)
                                a[h] = u[h] + (c[h] - u[h]) * s
                        } else
                            a = u + (c - u) * s;
                        t.addTarget(i, l.transform, l.member, a)
                    }
                }
                function P(e, t, n) {
                    for (; n < e.length; n++) {
                        var i = e[n];
                        if (i.hasTarget(t))
                            return i
                    }
                    return null
                }
                function L(e, t, n) {
                    for (n = n >= 0 ? n : n + e.length; n >= 0; n--) {
                        var i = e[n];
                        if (i.hasTarget(t))
                            return i
                    }
                    return null
                }
                function O() {
                    this.id = "",
                    this.init_from = ""
                }
                function R() {
                    this.id = "",
                    this.name = "",
                    this.type = "",
                    this.skin = null,
                    this.morph = null
                }
                function F() {
                    this.method = null,
                    this.source = null,
                    this.targets = null,
                    this.weights = null
                }
                function B() {
                    this.source = "",
                    this.bindShapeMatrix = null,
                    this.invBindMatrices = [],
                    this.joints = [],
                    this.weights = []
                }
                function D() {
                    this.id = "",
                    this.name = "",
                    this.nodes = [],
                    this.scene = new e.Group
                }
                function I() {
                    this.id = "",
                    this.name = "",
                    this.sid = "",
                    this.nodes = [],
                    this.controllers = [],
                    this.transforms = [],
                    this.geometries = [],
                    this.channels = [],
                    this.matrix = new e.Matrix4
                }
                function N() {
                    this.sid = "",
                    this.type = "",
                    this.data = [],
                    this.obj = null
                }
                function V() {
                    this.url = "",
                    this.skeleton = [],
                    this.instance_material = []
                }
                function z() {
                    this.symbol = "",
                    this.target = ""
                }
                function U() {
                    this.url = "",
                    this.instance_material = []
                }
                function H() {
                    this.id = "",
                    this.mesh = null
                }
                function G(e) {
                    this.geometry = e.id,
                    this.primitives = [],
                    this.vertices = null,
                    this.geometry3js = null
                }
                function W() {
                    this.material = "",
                    this.count = 0,
                    this.inputs = [],
                    this.vcount = null,
                    this.p = [],
                    this.geometry = new e.Geometry
                }
                function q() {
                    W.call(this),
                    this.vcount = []
                }
                function X() {
                    W.call(this),
                    this.vcount = 1
                }
                function Y() {
                    W.call(this),
                    this.vcount = 3
                }
                function J() {
                    this.source = "",
                    this.count = 0,
                    this.stride = 0,
                    this.params = []
                }
                function Z() {
                    this.input = {}
                }
                function Q() {
                    this.semantic = "",
                    this.offset = 0,
                    this.source = "",
                    this.set = 0
                }
                function K(e) {
                    this.id = e,
                    this.type = null
                }
                function $() {
                    this.id = "",
                    this.name = "",
                    this.instance_effect = null
                }
                function ee() {
                    this.color = new e.Color,
                    this.color.setRGB(Math.random(), Math.random(), Math.random()),
                    this.color.a = 1,
                    this.texture = null,
                    this.texcoord = null,
                    this.texOpts = null
                }
                function te(e, t) {
                    this.type = e,
                    this.effect = t,
                    this.material = null
                }
                function ne(e) {
                    this.effect = e,
                    this.init_from = null,
                    this.format = null
                }
                function ie(e) {
                    this.effect = e,
                    this.source = null,
                    this.wrap_s = null,
                    this.wrap_t = null,
                    this.minfilter = null,
                    this.magfilter = null,
                    this.mipfilter = null
                }
                function re() {
                    this.id = "",
                    this.name = "",
                    this.shader = null,
                    this.surface = {},
                    this.sampler = {}
                }
                function oe() {
                    this.url = ""
                }
                function ae() {
                    this.id = "",
                    this.name = "",
                    this.source = {},
                    this.sampler = [],
                    this.channel = []
                }
                function se(e) {
                    this.animation = e,
                    this.source = "",
                    this.target = "",
                    this.fullSid = null,
                    this.sid = null,
                    this.dotSyntax = null,
                    this.arrSyntax = null,
                    this.arrIndices = null,
                    this.member = null
                }
                function le(e) {
                    this.id = "",
                    this.animation = e,
                    this.inputs = [],
                    this.input = null,
                    this.output = null,
                    this.strideOut = null,
                    this.interpolation = null,
                    this.startTime = null,
                    this.endTime = null,
                    this.duration = 0
                }
                function ce(e) {
                    this.targets = [],
                    this.time = e
                }
                function ue() {
                    this.id = "",
                    this.name = "",
                    this.technique = ""
                }
                function he() {
                    this.url = ""
                }
                function de() {
                    this.id = "",
                    this.name = "",
                    this.technique = ""
                }
                function fe() {
                    this.url = ""
                }
                function pe() {
                    this.id = "",
                    this.name = "",
                    this.joints = [],
                    this.links = []
                }
                function me() {
                    this.sid = "",
                    this.name = "",
                    this.axis = new e.Vector3,
                    this.limits = {
                        min: 0,
                        max: 0
                    },
                    this.type = "",
                    this["static"] = !1,
                    this.zeroPosition = 0,
                    this.middlePosition = 0
                }
                function ve() {
                    this.sid = "",
                    this.name = "",
                    this.transforms = [],
                    this.attachments = []
                }
                function ge() {
                    this.joint = "",
                    this.transforms = [],
                    this.links = []
                }
                function ye(e) {
                    var t = e.getAttribute("id");
                    return void 0 != qe[t] ? qe[t] : (qe[t] = new K(t).parse(e),
                    qe[t])
                }
                function be(e) {
                    for (var t = _e(e), n = [], i = 0, r = t.length; r > i; i++)
                        n.push("true" === t[i] || "1" === t[i] ? !0 : !1);
                    return n
                }
                function xe(e) {
                    for (var t = _e(e), n = [], i = 0, r = t.length; r > i; i++)
                        n.push(parseFloat(t[i]));
                    return n
                }
                function we(e) {
                    for (var t = _e(e), n = [], i = 0, r = t.length; r > i; i++)
                        n.push(parseInt(t[i], 10));
                    return n
                }
                function _e(e) {
                    return e.length > 0 ? Se(e).split(/\s+/) : []
                }
                function Se(e) {
                    return e.replace(/^\s+/, "").replace(/\s+$/, "")
                }
                function Me(e, t, n) {
                    return e.hasAttribute(t) ? parseInt(e.getAttribute(t), 10) : n
                }
                function Ce(t, n) {
                    loader = new e.ImageLoader,
                    loader.load(n, function(e) {
                        t.image = e,
                        t.needsUpdate = !0
                    })
                }
                function Te(e, t) {
                    e.doubleSided = !1;
                    var n = t.querySelectorAll("extra double_sided")[0];
                    n && n && 1 === parseInt(n.textContent, 10) && (e.doubleSided = !0)
                }
                function Ee() {
                    if (nt.convertUpAxis !== !0 || rt === nt.upAxis)
                        ot = null;
                    else
                        switch (rt) {
                        case "X":
                            ot = "Y" === nt.upAxis ? "XtoY" : "XtoZ";
                            break;
                        case "Y":
                            ot = "X" === nt.upAxis ? "YtoX" : "YtoZ";
                            break;
                        case "Z":
                            ot = "X" === nt.upAxis ? "ZtoX" : "ZtoY"
                        }
                }
                function ke(e, t) {
                    if (nt.convertUpAxis === !0 && rt !== nt.upAxis)
                        switch (ot) {
                        case "XtoY":
                            var n = e[0];
                            e[0] = t * e[1],
                            e[1] = n;
                            break;
                        case "XtoZ":
                            var n = e[2];
                            e[2] = e[1],
                            e[1] = e[0],
                            e[0] = n;
                            break;
                        case "YtoX":
                            var n = e[0];
                            e[0] = e[1],
                            e[1] = t * n;
                            break;
                        case "YtoZ":
                            var n = e[1];
                            e[1] = t * e[2],
                            e[2] = n;
                            break;
                        case "ZtoX":
                            var n = e[0];
                            e[0] = e[1],
                            e[1] = e[2],
                            e[2] = n;
                            break;
                        case "ZtoY":
                            var n = e[1];
                            e[1] = e[2],
                            e[2] = t * n
                        }
                }
                function Ae(e, t) {
                    if (nt.convertUpAxis !== !0 || rt === nt.upAxis)
                        return t;
                    switch (e) {
                    case "X":
                        t = "XtoY" === ot ? -1 * t : t;
                        break;
                    case "Y":
                        t = "YtoZ" === ot || "YtoX" === ot ? -1 * t : t;
                        break;
                    case "Z":
                        t = "ZtoY" === ot ? -1 * t : t
                    }
                    return t
                }
                function Pe(t, n) {
                    var i = [t[n], t[n + 1], t[n + 2]];
                    return ke(i, -1),
                    new e.Vector3(i[0],i[1],i[2])
                }
                function Le(t) {
                    if (nt.convertUpAxis) {
                        var n = [t[0], t[4], t[8]];
                        ke(n, -1),
                        t[0] = n[0],
                        t[4] = n[1],
                        t[8] = n[2],
                        n = [t[1], t[5], t[9]],
                        ke(n, -1),
                        t[1] = n[0],
                        t[5] = n[1],
                        t[9] = n[2],
                        n = [t[2], t[6], t[10]],
                        ke(n, -1),
                        t[2] = n[0],
                        t[6] = n[1],
                        t[10] = n[2],
                        n = [t[0], t[1], t[2]],
                        ke(n, -1),
                        t[0] = n[0],
                        t[1] = n[1],
                        t[2] = n[2],
                        n = [t[4], t[5], t[6]],
                        ke(n, -1),
                        t[4] = n[0],
                        t[5] = n[1],
                        t[6] = n[2],
                        n = [t[8], t[9], t[10]],
                        ke(n, -1),
                        t[8] = n[0],
                        t[9] = n[1],
                        t[10] = n[2],
                        n = [t[3], t[7], t[11]],
                        ke(n, -1),
                        t[3] = n[0],
                        t[7] = n[1],
                        t[11] = n[2]
                    }
                    return (new e.Matrix4).set(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8], t[9], t[10], t[11], t[12], t[13], t[14], t[15])
                }
                function Oe(e) {
                    if (e > -1 && 3 > e) {
                        var t = ["X", "Y", "Z"]
                          , n = {
                            X: 0,
                            Y: 1,
                            Z: 2
                        };
                        e = Re(t[e]),
                        e = n[e]
                    }
                    return e
                }
                function Re(e) {
                    if (nt.convertUpAxis)
                        switch (e) {
                        case "X":
                            switch (ot) {
                            case "XtoY":
                            case "XtoZ":
                            case "YtoX":
                                e = "Y";
                                break;
                            case "ZtoX":
                                e = "Z"
                            }
                            break;
                        case "Y":
                            switch (ot) {
                            case "XtoY":
                            case "YtoX":
                            case "ZtoX":
                                e = "X";
                                break;
                            case "XtoZ":
                            case "YtoZ":
                            case "ZtoY":
                                e = "Z"
                            }
                            break;
                        case "Z":
                            switch (ot) {
                            case "XtoZ":
                                e = "X";
                                break;
                            case "YtoZ":
                            case "ZtoX":
                            case "ZtoY":
                                e = "Y"
                            }
                        }
                    return e
                }
                var Fe, Be, De, Ie, Ne, je, Ve, ze, Ue, He = null, Ge = null, We = null, qe = {}, Xe = {}, Ye = {}, Je = {}, Ze = {}, Qe = {}, Ke = {}, $e = {}, et = {}, tt = e.SmoothShading, nt = {
                    centerGeometry: !1,
                    convertUpAxis: !1,
                    subdivideFaces: !0,
                    upAxis: "Y",
                    defaultEnvMap: null
                }, it = 1, rt = "Y", ot = null;
                return O.prototype.parse = function(e) {
                    this.id = e.getAttribute("id");
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        "init_from" === n.nodeName && (this.init_from = n.textContent)
                    }
                    return this
                }
                ,
                R.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name"),
                    this.type = "none";
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "skin":
                            this.skin = (new B).parse(n),
                            this.type = n.nodeName;
                            break;
                        case "morph":
                            this.morph = (new F).parse(n),
                            this.type = n.nodeName
                        }
                    }
                    return this
                }
                ,
                F.prototype.parse = function(e) {
                    var t, n = {}, i = [];
                    for (this.method = e.getAttribute("method"),
                    this.source = e.getAttribute("source").replace(/^#/, ""),
                    t = 0; t < e.childNodes.length; t++) {
                        var r = e.childNodes[t];
                        if (1 == r.nodeType)
                            switch (r.nodeName) {
                            case "source":
                                var o = (new K).parse(r);
                                n[o.id] = o;
                                break;
                            case "targets":
                                i = this.parseInputs(r);
                                break;
                            default:
                                console.log(r.nodeName)
                            }
                    }
                    for (t = 0; t < i.length; t++) {
                        var a = i[t]
                          , o = n[a.source];
                        switch (a.semantic) {
                        case "MORPH_TARGET":
                            this.targets = o.read();
                            break;
                        case "MORPH_WEIGHT":
                            this.weights = o.read()
                        }
                    }
                    return this
                }
                ,
                F.prototype.parseInputs = function(e) {
                    for (var t = [], n = 0; n < e.childNodes.length; n++) {
                        var i = e.childNodes[n];
                        if (1 == i.nodeType)
                            switch (i.nodeName) {
                            case "input":
                                t.push((new Q).parse(i))
                            }
                    }
                    return t
                }
                ,
                B.prototype.parse = function(e) {
                    var t, n, i = {};
                    this.source = e.getAttribute("source").replace(/^#/, ""),
                    this.invBindMatrices = [],
                    this.joints = [],
                    this.weights = [];
                    for (var r = 0; r < e.childNodes.length; r++) {
                        var o = e.childNodes[r];
                        if (1 == o.nodeType)
                            switch (o.nodeName) {
                            case "bind_shape_matrix":
                                var a = xe(o.textContent);
                                this.bindShapeMatrix = Le(a);
                                break;
                            case "source":
                                var s = (new K).parse(o);
                                i[s.id] = s;
                                break;
                            case "joints":
                                t = o;
                                break;
                            case "vertex_weights":
                                n = o;
                                break;
                            default:
                                console.log(o.nodeName)
                            }
                    }
                    return this.parseJoints(t, i),
                    this.parseWeights(n, i),
                    this
                }
                ,
                B.prototype.parseJoints = function(e, t) {
                    for (var n = 0; n < e.childNodes.length; n++) {
                        var i = e.childNodes[n];
                        if (1 == i.nodeType)
                            switch (i.nodeName) {
                            case "input":
                                var r = (new Q).parse(i)
                                  , o = t[r.source];
                                "JOINT" === r.semantic ? this.joints = o.read() : "INV_BIND_MATRIX" === r.semantic && (this.invBindMatrices = o.read())
                            }
                    }
                }
                ,
                B.prototype.parseWeights = function(e, t) {
                    for (var n, i, r = [], o = 0; o < e.childNodes.length; o++) {
                        var a = e.childNodes[o];
                        if (1 == a.nodeType)
                            switch (a.nodeName) {
                            case "input":
                                r.push((new Q).parse(a));
                                break;
                            case "v":
                                n = we(a.textContent);
                                break;
                            case "vcount":
                                i = we(a.textContent)
                            }
                    }
                    for (var s = 0, o = 0; o < i.length; o++) {
                        for (var l = i[o], c = [], u = 0; l > u; u++) {
                            for (var h = {}, d = 0; d < r.length; d++) {
                                var f = r[d]
                                  , p = n[s + f.offset];
                                switch (f.semantic) {
                                case "JOINT":
                                    h.joint = p;
                                    break;
                                case "WEIGHT":
                                    h.weight = t[f.source].data[p]
                                }
                            }
                            c.push(h),
                            s += r.length
                        }
                        for (var u = 0; u < c.length; u++)
                            c[u].index = o;
                        this.weights.push(c)
                    }
                }
                ,
                D.prototype.getChildById = function(e, t) {
                    for (var n = 0; n < this.nodes.length; n++) {
                        var i = this.nodes[n].getChildById(e, t);
                        if (i)
                            return i
                    }
                    return null
                }
                ,
                D.prototype.getChildBySid = function(e, t) {
                    for (var n = 0; n < this.nodes.length; n++) {
                        var i = this.nodes[n].getChildBySid(e, t);
                        if (i)
                            return i
                    }
                    return null
                }
                ,
                D.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name"),
                    this.nodes = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "node":
                                this.nodes.push((new I).parse(n))
                            }
                    }
                    return this
                }
                ,
                I.prototype.getChannelForTransform = function(e) {
                    for (var t = 0; t < this.channels.length; t++) {
                        var n, i, r = this.channels[t], o = r.target.split("/"), a = (o.shift(),
                        o.shift()), s = a.indexOf(".") >= 0, l = a.indexOf("(") >= 0;
                        if (s)
                            o = a.split("."),
                            a = o.shift(),
                            i = o.shift();
                        else if (l) {
                            n = a.split("("),
                            a = n.shift();
                            for (var c = 0; c < n.length; c++)
                                n[c] = parseInt(n[c].replace(/\)/, ""))
                        }
                        if (a === e)
                            return r.info = {
                                sid: a,
                                dotSyntax: s,
                                arrSyntax: l,
                                arrIndices: n
                            },
                            r
                    }
                    return null
                }
                ,
                I.prototype.getChildById = function(e, t) {
                    if (this.id === e)
                        return this;
                    if (t)
                        for (var n = 0; n < this.nodes.length; n++) {
                            var i = this.nodes[n].getChildById(e, t);
                            if (i)
                                return i
                        }
                    return null
                }
                ,
                I.prototype.getChildBySid = function(e, t) {
                    if (this.sid === e)
                        return this;
                    if (t)
                        for (var n = 0; n < this.nodes.length; n++) {
                            var i = this.nodes[n].getChildBySid(e, t);
                            if (i)
                                return i
                        }
                    return null
                }
                ,
                I.prototype.getTransformBySid = function(e) {
                    for (var t = 0; t < this.transforms.length; t++)
                        if (this.transforms[t].sid === e)
                            return this.transforms[t];
                    return null
                }
                ,
                I.prototype.parse = function(t) {
                    var n;
                    this.id = t.getAttribute("id"),
                    this.sid = t.getAttribute("sid"),
                    this.name = t.getAttribute("name"),
                    this.type = t.getAttribute("type"),
                    this.layer = t.getAttribute("layer"),
                    this.type = "JOINT" === this.type ? this.type : "NODE",
                    this.nodes = [],
                    this.transforms = [],
                    this.geometries = [],
                    this.cameras = [],
                    this.lights = [],
                    this.controllers = [],
                    this.matrix = new e.Matrix4;
                    for (var i = 0; i < t.childNodes.length; i++) {
                        var r = t.childNodes[i];
                        if (1 == r.nodeType)
                            switch (r.nodeName) {
                            case "node":
                                this.nodes.push((new I).parse(r));
                                break;
                            case "instance_camera":
                                this.cameras.push((new he).parse(r));
                                break;
                            case "instance_controller":
                                this.controllers.push((new V).parse(r));
                                break;
                            case "instance_geometry":
                                this.geometries.push((new U).parse(r));
                                break;
                            case "instance_light":
                                this.lights.push((new fe).parse(r));
                                break;
                            case "instance_node":
                                n = r.getAttribute("url").replace(/^#/, "");
                                var o = M(n);
                                o && this.nodes.push((new I).parse(o));
                                break;
                            case "rotate":
                            case "translate":
                            case "scale":
                            case "matrix":
                            case "lookat":
                            case "skew":
                                this.transforms.push((new N).parse(r));
                                break;
                            case "extra":
                                break;
                            default:
                                console.log(r.nodeName)
                            }
                    }
                    return this.channels = C(this),
                    T(this),
                    this.updateMatrix(),
                    this
                }
                ,
                I.prototype.updateMatrix = function() {
                    this.matrix.identity();
                    for (var e = 0; e < this.transforms.length; e++)
                        this.transforms[e].apply(this.matrix)
                }
                ,
                N.prototype.clone = function() {
                    return t = new N,
                    t.sid = this.sid,
                    t.type = this.type,
                    t.data = this.data,
                    t.angle = this.angle,
                    this.obj && (t.obj = this.obj.clone()),
                    t
                }
                ,
                N.prototype.parse = function(e) {
                    return this.sid = e.getAttribute("sid"),
                    this.type = e.nodeName,
                    this.data = xe(e.textContent),
                    this.convert(),
                    this
                }
                ,
                N.prototype.convert = function() {
                    switch (this.type) {
                    case "matrix":
                        this.obj = Le(this.data);
                        break;
                    case "rotate":
                        this.angle = e.Math.degToRad(this.data[3]);
                    case "translate":
                        ke(this.data, -1),
                        this.obj = new e.Vector3(this.data[0],this.data[1],this.data[2]);
                        break;
                    case "scale":
                        ke(this.data, 1),
                        this.obj = new e.Vector3(this.data[0],this.data[1],this.data[2]);
                        break;
                    default:
                        console.log("Can not convert Transform of type " + this.type)
                    }
                }
                ,
                N.prototype.apply = function() {
                    var t = new e.Matrix4;
                    return function(e) {
                        switch (this.type) {
                        case "matrix":
                            e.multiply(this.obj);
                            break;
                        case "translate":
                            e.multiply(t.makeTranslation(this.obj.x, this.obj.y, this.obj.z));
                            break;
                        case "rotate":
                            e.multiply(t.makeRotationAxis(this.obj, this.angle));
                            break;
                        case "scale":
                            e.scale(this.obj)
                        }
                    }
                }(),
                N.prototype.update = function(t, n) {
                    var i = ["X", "Y", "Z", "ANGLE"];
                    switch (this.type) {
                    case "matrix":
                        if (n)
                            if (1 === n.length)
                                switch (n[0]) {
                                case 0:
                                    this.obj.n11 = t[0],
                                    this.obj.n21 = t[1],
                                    this.obj.n31 = t[2],
                                    this.obj.n41 = t[3];
                                    break;
                                case 1:
                                    this.obj.n12 = t[0],
                                    this.obj.n22 = t[1],
                                    this.obj.n32 = t[2],
                                    this.obj.n42 = t[3];
                                    break;
                                case 2:
                                    this.obj.n13 = t[0],
                                    this.obj.n23 = t[1],
                                    this.obj.n33 = t[2],
                                    this.obj.n43 = t[3];
                                    break;
                                case 3:
                                    this.obj.n14 = t[0],
                                    this.obj.n24 = t[1],
                                    this.obj.n34 = t[2],
                                    this.obj.n44 = t[3]
                                }
                            else if (2 === n.length) {
                                var r = "n" + (n[0] + 1) + (n[1] + 1);
                                this.obj[r] = t
                            } else
                                console.log("Incorrect addressing of matrix in transform.");
                        else
                            this.obj.copy(t);
                        break;
                    case "translate":
                    case "scale":
                        switch ("[object Array]" === Object.prototype.toString.call(n) && (n = i[n[0]]),
                        n) {
                        case "X":
                            this.obj.x = t;
                            break;
                        case "Y":
                            this.obj.y = t;
                            break;
                        case "Z":
                            this.obj.z = t;
                            break;
                        default:
                            this.obj.x = t[0],
                            this.obj.y = t[1],
                            this.obj.z = t[2]
                        }
                        break;
                    case "rotate":
                        switch ("[object Array]" === Object.prototype.toString.call(n) && (n = i[n[0]]),
                        n) {
                        case "X":
                            this.obj.x = t;
                            break;
                        case "Y":
                            this.obj.y = t;
                            break;
                        case "Z":
                            this.obj.z = t;
                            break;
                        case "ANGLE":
                            this.angle = e.Math.degToRad(t);
                            break;
                        default:
                            this.obj.x = t[0],
                            this.obj.y = t[1],
                            this.obj.z = t[2],
                            this.angle = e.Math.degToRad(t[3])
                        }
                    }
                }
                ,
                V.prototype.parse = function(e) {
                    this.url = e.getAttribute("url").replace(/^#/, ""),
                    this.skeleton = [],
                    this.instance_material = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 === n.nodeType)
                            switch (n.nodeName) {
                            case "skeleton":
                                this.skeleton.push(n.textContent.replace(/^#/, ""));
                                break;
                            case "bind_material":
                                for (var i = n.querySelectorAll("instance_material"), r = 0; r < i.length; r++) {
                                    var o = i[r];
                                    this.instance_material.push((new z).parse(o))
                                }
                                break;
                            case "extra":
                            }
                    }
                    return this
                }
                ,
                z.prototype.parse = function(e) {
                    return this.symbol = e.getAttribute("symbol"),
                    this.target = e.getAttribute("target").replace(/^#/, ""),
                    this
                }
                ,
                U.prototype.parse = function(e) {
                    this.url = e.getAttribute("url").replace(/^#/, ""),
                    this.instance_material = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType && "bind_material" === n.nodeName) {
                            for (var i = n.querySelectorAll("instance_material"), r = 0; r < i.length; r++) {
                                var o = i[r];
                                this.instance_material.push((new z).parse(o))
                            }
                            break
                        }
                    }
                    return this
                }
                ,
                H.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    Te(this, e);
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "mesh":
                            this.mesh = new G(this).parse(n);
                            break;
                        case "extra":
                        }
                    }
                    return this
                }
                ,
                G.prototype.parse = function(t) {
                    this.primitives = [];
                    for (var n = 0; n < t.childNodes.length; n++) {
                        var i = t.childNodes[n];
                        switch (i.nodeName) {
                        case "source":
                            ye(i);
                            break;
                        case "vertices":
                            this.vertices = (new Z).parse(i);
                            break;
                        case "linestrips":
                            this.primitives.push((new X).parse(i));
                            break;
                        case "triangles":
                            this.primitives.push((new Y).parse(i));
                            break;
                        case "polygons":
                            this.primitives.push((new W).parse(i));
                            break;
                        case "polylist":
                            this.primitives.push((new q).parse(i))
                        }
                    }
                    if (this.geometry3js = new e.Geometry,
                    null === this.vertices)
                        return this;
                    for (var r = qe[this.vertices.input.POSITION.source].data, n = 0; n < r.length; n += 3)
                        this.geometry3js.vertices.push(Pe(r, n).clone());
                    for (var n = 0; n < this.primitives.length; n++) {
                        var o = this.primitives[n];
                        o.setVertices(this.vertices),
                        this.handlePrimitive(o, this.geometry3js)
                    }
                    return this.geometry3js.calcNormals && (this.geometry3js.computeVertexNormals(),
                    delete this.geometry3js.calcNormals),
                    this
                }
                ,
                G.prototype.handlePrimitive = function(t, n) {
                    if (t instanceof X)
                        return void (n.isLineStrip = !0);
                    var i, r, o, a, s, l, c, u = t.p, h = t.inputs, d = 0, f = 3, p = 0, m = [];
                    for (i = 0; i < h.length; i++) {
                        o = h[i];
                        var v = o.offset + 1;
                        switch (p = v > p ? v : p,
                        o.semantic) {
                        case "TEXCOORD":
                            m.push(o.set)
                        }
                    }
                    for (var g = 0; g < u.length; ++g)
                        for (var y = u[g], b = 0; b < y.length; ) {
                            var x = []
                              , w = []
                              , _ = null
                              , S = [];
                            for (f = t.vcount ? t.vcount.length ? t.vcount[d++] : t.vcount : y.length / p,
                            i = 0; f > i; i++)
                                for (r = 0; r < h.length; r++)
                                    switch (o = h[r],
                                    l = qe[o.source],
                                    a = y[b + i * p + o.offset],
                                    c = l.accessor.params.length,
                                    s = a * c,
                                    o.semantic) {
                                    case "VERTEX":
                                        x.push(a);
                                        break;
                                    case "NORMAL":
                                        w.push(Pe(l.data, s));
                                        break;
                                    case "TEXCOORD":
                                        _ = _ || {},
                                        void 0 === _[o.set] && (_[o.set] = []),
                                        _[o.set].push(new e.Vector2(l.data[s],l.data[s + 1]));
                                        break;
                                    case "COLOR":
                                        S.push((new e.Color).setRGB(l.data[s], l.data[s + 1], l.data[s + 2]))
                                    }
                            if (0 === w.length)
                                if (o = this.vertices.input.NORMAL) {
                                    l = qe[o.source],
                                    c = l.accessor.params.length;
                                    for (var M = 0, C = x.length; C > M; M++)
                                        w.push(Pe(l.data, x[M] * c))
                                } else
                                    n.calcNormals = !0;
                            if (!_ && (_ = {},
                            o = this.vertices.input.TEXCOORD)) {
                                m.push(o.set),
                                l = qe[o.source],
                                c = l.accessor.params.length;
                                for (var M = 0, C = x.length; C > M; M++)
                                    s = x[M] * c,
                                    void 0 === _[o.set] && (_[o.set] = []),
                                    _[o.set].push(new e.Vector2(l.data[s],1 - l.data[s + 1]))
                            }
                            if (0 === S.length && (o = this.vertices.input.COLOR)) {
                                l = qe[o.source],
                                c = l.accessor.params.length;
                                for (var M = 0, C = x.length; C > M; M++)
                                    s = x[M] * c,
                                    S.push((new e.Color).setRGB(l.data[s], l.data[s + 1], l.data[s + 2]))
                            }
                            var T, E, k = null, A = [];
                            if (3 === f)
                                A.push(new e.Face3(x[0],x[1],x[2],w,S.length ? S : new e.Color));
                            else if (4 === f)
                                A.push(new e.Face3(x[0],x[1],x[3],[w[0].clone(), w[1].clone(), w[3].clone()],S.length ? [S[0], S[1], S[3]] : new e.Color)),
                                A.push(new e.Face3(x[1],x[2],x[3],[w[1].clone(), w[2].clone(), w[3].clone()],S.length ? [S[1], S[2], S[3]] : new e.Color));
                            else if (f > 4 && nt.subdivideFaces) {
                                var P = S.length ? S : new e.Color;
                                for (r = 1; f - 1 > r; )
                                    A.push(new e.Face3(x[0],x[r],x[r + 1],[w[0].clone(), w[r++].clone(), w[r].clone()],P))
                            }
                            if (A.length)
                                for (var M = 0, C = A.length; C > M; M++)
                                    for (k = A[M],
                                    k.daeMaterial = t.material,
                                    n.faces.push(k),
                                    r = 0; r < m.length; r++)
                                        T = _[m[r]],
                                        E = f > 4 ? [T[0], T[M + 1], T[M + 2]] : 4 === f ? 0 === M ? [T[0], T[1], T[3]] : [T[1].clone(), T[2], T[3].clone()] : [T[0], T[1], T[2]],
                                        void 0 === n.faceVertexUvs[r] && (n.faceVertexUvs[r] = []),
                                        n.faceVertexUvs[r].push(E);
                            else
                                console.log("dropped face with vcount " + f + " for geometry with id: " + n.id);
                            b += p * f
                        }
                }
                ,
                W.prototype.setVertices = function(e) {
                    for (var t = 0; t < this.inputs.length; t++)
                        this.inputs[t].source === e.id && (this.inputs[t].source = e.input.POSITION.source)
                }
                ,
                W.prototype.parse = function(e) {
                    this.material = e.getAttribute("material"),
                    this.count = Me(e, "count", 0);
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "input":
                            this.inputs.push((new Q).parse(e.childNodes[t]));
                            break;
                        case "vcount":
                            this.vcount = we(n.textContent);
                            break;
                        case "p":
                            this.p.push(we(n.textContent));
                            break;
                        case "ph":
                            console.warn("polygon holes not yet supported!")
                        }
                    }
                    return this
                }
                ,
                q.prototype = Object.create(W.prototype),
                q.prototype.constructor = q,
                X.prototype = Object.create(W.prototype),
                X.prototype.constructor = X,
                Y.prototype = Object.create(W.prototype),
                Y.prototype.constructor = Y,
                J.prototype.parse = function(e) {
                    this.params = [],
                    this.source = e.getAttribute("source"),
                    this.count = Me(e, "count", 0),
                    this.stride = Me(e, "stride", 0);
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if ("param" === n.nodeName) {
                            var i = {};
                            i.name = n.getAttribute("name"),
                            i.type = n.getAttribute("type"),
                            this.params.push(i)
                        }
                    }
                    return this
                }
                ,
                Z.prototype.parse = function(e) {
                    this.id = e.getAttribute("id");
                    for (var t = 0; t < e.childNodes.length; t++)
                        if ("input" === e.childNodes[t].nodeName) {
                            var n = (new Q).parse(e.childNodes[t]);
                            this.input[n.semantic] = n
                        }
                    return this
                }
                ,
                Q.prototype.parse = function(e) {
                    return this.semantic = e.getAttribute("semantic"),
                    this.source = e.getAttribute("source").replace(/^#/, ""),
                    this.set = Me(e, "set", -1),
                    this.offset = Me(e, "offset", 0),
                    "TEXCOORD" === this.semantic && this.set < 0 && (this.set = 0),
                    this
                }
                ,
                K.prototype.parse = function(e) {
                    this.id = e.getAttribute("id");
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "bool_array":
                            this.data = be(n.textContent),
                            this.type = n.nodeName;
                            break;
                        case "float_array":
                            this.data = xe(n.textContent),
                            this.type = n.nodeName;
                            break;
                        case "int_array":
                            this.data = we(n.textContent),
                            this.type = n.nodeName;
                            break;
                        case "IDREF_array":
                        case "Name_array":
                            this.data = _e(n.textContent),
                            this.type = n.nodeName;
                            break;
                        case "technique_common":
                            for (var i = 0; i < n.childNodes.length; i++)
                                if ("accessor" === n.childNodes[i].nodeName) {
                                    this.accessor = (new J).parse(n.childNodes[i]);
                                    break
                                }
                        }
                    }
                    return this
                }
                ,
                K.prototype.read = function() {
                    var e = []
                      , t = this.accessor.params[0];
                    switch (t.type) {
                    case "IDREF":
                    case "Name":
                    case "name":
                    case "float":
                        return this.data;
                    case "float4x4":
                        for (var n = 0; n < this.data.length; n += 16) {
                            var i = this.data.slice(n, n + 16)
                              , r = Le(i);
                            e.push(r)
                        }
                        break;
                    default:
                        console.log("ColladaLoader: Source: Read dont know how to read " + t.type + ".")
                    }
                    return e
                }
                ,
                $.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name");
                    for (var t = 0; t < e.childNodes.length; t++)
                        if ("instance_effect" === e.childNodes[t].nodeName) {
                            this.instance_effect = (new oe).parse(e.childNodes[t]);
                            break
                        }
                    return this
                }
                ,
                ee.prototype.isColor = function() {
                    return null === this.texture
                }
                ,
                ee.prototype.isTexture = function() {
                    return null != this.texture
                }
                ,
                ee.prototype.parse = function(t) {
                    "transparent" === t.nodeName && (this.opaque = t.getAttribute("opaque"));
                    for (var n = 0; n < t.childNodes.length; n++) {
                        var i = t.childNodes[n];
                        if (1 == i.nodeType)
                            switch (i.nodeName) {
                            case "color":
                                var r = xe(i.textContent);
                                this.color = new e.Color,
                                this.color.setRGB(r[0], r[1], r[2]),
                                this.color.a = r[3];
                                break;
                            case "texture":
                                this.texture = i.getAttribute("texture"),
                                this.texcoord = i.getAttribute("texcoord"),
                                this.texOpts = {
                                    offsetU: 0,
                                    offsetV: 0,
                                    repeatU: 1,
                                    repeatV: 1,
                                    wrapU: 1,
                                    wrapV: 1
                                },
                                this.parseTexture(i)
                            }
                    }
                    return this
                }
                ,
                ee.prototype.parseTexture = function(e) {
                    if (!e.childNodes)
                        return this;
                    e.childNodes[1] && "extra" === e.childNodes[1].nodeName && (e = e.childNodes[1],
                    e.childNodes[1] && "technique" === e.childNodes[1].nodeName && (e = e.childNodes[1]));
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "offsetU":
                        case "offsetV":
                        case "repeatU":
                        case "repeatV":
                            this.texOpts[n.nodeName] = parseFloat(n.textContent);
                            break;
                        case "wrapU":
                        case "wrapV":
                            "TRUE" === n.textContent.toUpperCase() ? this.texOpts[n.nodeName] = 1 : this.texOpts[n.nodeName] = parseInt(n.textContent);
                            break;
                        default:
                            this.texOpts[n.nodeName] = n.textContent
                        }
                    }
                    return this
                }
                ,
                te.prototype.parse = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "emission":
                            case "diffuse":
                            case "specular":
                            case "transparent":
                                this[n.nodeName] = (new ee).parse(n);
                                break;
                            case "bump":
                                var i = n.getAttribute("bumptype");
                                i ? "heightfield" === i.toLowerCase() ? this.bump = (new ee).parse(n) : "normalmap" === i.toLowerCase() ? this.normal = (new ee).parse(n) : (console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' (" + i + ") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),
                                this.bump = (new ee).parse(n)) : (console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),
                                this.bump = (new ee).parse(n));
                                break;
                            case "shininess":
                            case "reflectivity":
                            case "index_of_refraction":
                            case "transparency":
                                var r = n.querySelectorAll("float");
                                r.length > 0 && (this[n.nodeName] = parseFloat(r[0].textContent))
                            }
                    }
                    return this.create(),
                    this
                }
                ,
                te.prototype.create = function() {
                    var t = {}
                      , n = !1;
                    if (void 0 !== this.transparency && void 0 !== this.transparent) {
                        var i = (this.transparent,
                        (this.transparent.color.r + this.transparent.color.g + this.transparent.color.b) / 3 * this.transparency);
                        i > 0 && (n = !0,
                        t.transparent = !0,
                        t.opacity = 1 - i)
                    }
                    var r = {
                        diffuse: "map",
                        ambient: "lightMap",
                        specular: "specularMap",
                        emission: "emissionMap",
                        bump: "bumpMap",
                        normal: "normalMap"
                    };
                    for (var o in this)
                        switch (o) {
                        case "ambient":
                        case "emission":
                        case "diffuse":
                        case "specular":
                        case "bump":
                        case "normal":
                            var a = this[o];
                            if (a instanceof ee)
                                if (a.isTexture()) {
                                    var s = a.texture
                                      , l = this.effect.sampler[s];
                                    if (void 0 !== l && void 0 !== l.source) {
                                        var c = this.effect.surface[l.source];
                                        if (void 0 !== c) {
                                            var u = Xe[c.init_from];
                                            if (u) {
                                                var h, d = Ve + u.init_from, f = e.Loader.Handlers.get(d);
                                                null !== f ? h = f.load(d) : (h = new e.Texture,
                                                Ce(h, d)),
                                                h.wrapS = a.texOpts.wrapU ? e.RepeatWrapping : e.ClampToEdgeWrapping,
                                                h.wrapT = a.texOpts.wrapV ? e.RepeatWrapping : e.ClampToEdgeWrapping,
                                                h.offset.x = a.texOpts.offsetU,
                                                h.offset.y = a.texOpts.offsetV,
                                                h.repeat.x = a.texOpts.repeatU,
                                                h.repeat.y = a.texOpts.repeatV,
                                                t[r[o]] = h,
                                                "emission" === o && (t.emissive = 16777215)
                                            }
                                        }
                                    }
                                } else
                                    "diffuse" !== o && n || ("emission" === o ? t.emissive = a.color.getHex() : t[o] = a.color.getHex());
                            break;
                        case "shininess":
                            t[o] = this[o];
                            break;
                        case "reflectivity":
                            t[o] = this[o],
                            t[o] > 0 && (t.envMap = nt.defaultEnvMap),
                            t.combine = e.MixOperation;
                            break;
                        case "index_of_refraction":
                            t.refractionRatio = this[o],
                            1 !== this[o] && (t.envMap = nt.defaultEnvMap);
                            break;
                        case "transparency":
                        }
                    switch (t.shading = tt,
                    t.side = this.effect.doubleSided ? e.DoubleSide : e.FrontSide,
                    this.type) {
                    case "constant":
                        void 0 != t.emissive && (t.color = t.emissive),
                        this.material = new e.MeshBasicMaterial(t);
                        break;
                    case "phong":
                    case "blinn":
                        void 0 != t.diffuse && (t.color = t.diffuse),
                        this.material = new e.MeshPhongMaterial(t);
                        break;
                    case "lambert":
                    default:
                        void 0 != t.diffuse && (t.color = t.diffuse),
                        this.material = new e.MeshLambertMaterial(t)
                    }
                    return this.material
                }
                ,
                ne.prototype.parse = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "init_from":
                                this.init_from = n.textContent;
                                break;
                            case "format":
                                this.format = n.textContent;
                                break;
                            default:
                                console.log("unhandled Surface prop: " + n.nodeName)
                            }
                    }
                    return this
                }
                ,
                ie.prototype.parse = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "source":
                                this.source = n.textContent;
                                break;
                            case "minfilter":
                                this.minfilter = n.textContent;
                                break;
                            case "magfilter":
                                this.magfilter = n.textContent;
                                break;
                            case "mipfilter":
                                this.mipfilter = n.textContent;
                                break;
                            case "wrap_s":
                                this.wrap_s = n.textContent;
                                break;
                            case "wrap_t":
                                this.wrap_t = n.textContent;
                                break;
                            default:
                                console.log("unhandled Sampler2D prop: " + n.nodeName)
                            }
                    }
                    return this
                }
                ,
                re.prototype.create = function() {
                    return null === this.shader ? null : void 0
                }
                ,
                re.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name"),
                    Te(this, e),
                    this.shader = null;
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "profile_COMMON":
                                this.parseTechnique(this.parseProfileCOMMON(n))
                            }
                    }
                    return this
                }
                ,
                re.prototype.parseNewparam = function(e) {
                    for (var t = e.getAttribute("sid"), n = 0; n < e.childNodes.length; n++) {
                        var i = e.childNodes[n];
                        if (1 == i.nodeType)
                            switch (i.nodeName) {
                            case "surface":
                                this.surface[t] = new ne(this).parse(i);
                                break;
                            case "sampler2D":
                                this.sampler[t] = new ie(this).parse(i);
                                break;
                            case "extra":
                                break;
                            default:
                                console.log(i.nodeName)
                            }
                    }
                }
                ,
                re.prototype.parseProfileCOMMON = function(e) {
                    for (var t, n = 0; n < e.childNodes.length; n++) {
                        var i = e.childNodes[n];
                        if (1 == i.nodeType)
                            switch (i.nodeName) {
                            case "profile_COMMON":
                                this.parseProfileCOMMON(i);
                                break;
                            case "technique":
                                t = i;
                                break;
                            case "newparam":
                                this.parseNewparam(i);
                                break;
                            case "image":
                                var r = (new O).parse(i);
                                Xe[r.id] = r;
                                break;
                            case "extra":
                                break;
                            default:
                                console.log(i.nodeName)
                            }
                    }
                    return t
                }
                ,
                re.prototype.parseTechnique = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "constant":
                            case "lambert":
                            case "blinn":
                            case "phong":
                                this.shader = new te(n.nodeName,this).parse(n);
                                break;
                            case "extra":
                                this.parseExtra(n)
                            }
                    }
                }
                ,
                re.prototype.parseExtra = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "technique":
                                this.parseExtraTechnique(n)
                            }
                    }
                }
                ,
                re.prototype.parseExtraTechnique = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "bump":
                                this.shader.parse(e)
                            }
                    }
                }
                ,
                oe.prototype.parse = function(e) {
                    return this.url = e.getAttribute("url").replace(/^#/, ""),
                    this
                }
                ,
                ae.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name"),
                    this.source = {};
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "animation":
                                var i = (new ae).parse(n);
                                for (var r in i.source)
                                    this.source[r] = i.source[r];
                                for (var o = 0; o < i.channel.length; o++)
                                    this.channel.push(i.channel[o]),
                                    this.sampler.push(i.sampler[o]);
                                break;
                            case "source":
                                var r = (new K).parse(n);
                                this.source[r.id] = r;
                                break;
                            case "sampler":
                                this.sampler.push(new le(this).parse(n));
                                break;
                            case "channel":
                                this.channel.push(new se(this).parse(n))
                            }
                    }
                    return this
                }
                ,
                se.prototype.parse = function(e) {
                    this.source = e.getAttribute("source").replace(/^#/, ""),
                    this.target = e.getAttribute("target");
                    var t = this.target.split("/")
                      , n = (t.shift(),
                    t.shift())
                      , i = n.indexOf(".") >= 0
                      , r = n.indexOf("(") >= 0;
                    if (i)
                        t = n.split("."),
                        this.sid = t.shift(),
                        this.member = t.shift();
                    else if (r) {
                        var o = n.split("(");
                        this.sid = o.shift();
                        for (var a = 0; a < o.length; a++)
                            o[a] = parseInt(o[a].replace(/\)/, ""));
                        this.arrIndices = o
                    } else
                        this.sid = n;
                    return this.fullSid = n,
                    this.dotSyntax = i,
                    this.arrSyntax = r,
                    this
                }
                ,
                le.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.inputs = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "input":
                                this.inputs.push((new Q).parse(n))
                            }
                    }
                    return this
                }
                ,
                le.prototype.create = function() {
                    for (var e = 0; e < this.inputs.length; e++) {
                        var t = this.inputs[e]
                          , n = this.animation.source[t.source];
                        switch (t.semantic) {
                        case "INPUT":
                            this.input = n.read();
                            break;
                        case "OUTPUT":
                            this.output = n.read(),
                            this.strideOut = n.accessor.stride;
                            break;
                        case "INTERPOLATION":
                            this.interpolation = n.read();
                            break;
                        case "IN_TANGENT":
                            break;
                        case "OUT_TANGENT":
                            break;
                        default:
                            console.log(t.semantic)
                        }
                    }
                    if (this.startTime = 0,
                    this.endTime = 0,
                    this.duration = 0,
                    this.input.length) {
                        this.startTime = 1e8,
                        this.endTime = -1e8;
                        for (var e = 0; e < this.input.length; e++)
                            this.startTime = Math.min(this.startTime, this.input[e]),
                            this.endTime = Math.max(this.endTime, this.input[e]);
                        this.duration = this.endTime - this.startTime
                    }
                }
                ,
                le.prototype.getData = function(e, t, n) {
                    var i;
                    if ("matrix" === e && 16 === this.strideOut)
                        i = this.output[t];
                    else if (this.strideOut > 1) {
                        i = [],
                        t *= this.strideOut;
                        for (var r = 0; r < this.strideOut; ++r)
                            i[r] = this.output[t + r];
                        if (3 === this.strideOut)
                            switch (e) {
                            case "rotate":
                            case "translate":
                                ke(i, -1);
                                break;
                            case "scale":
                                ke(i, 1)
                            }
                        else
                            4 === this.strideOut && "matrix" === e && ke(i, -1)
                    } else
                        i = this.output[t],
                        n && "translate" === e && (i = Ae(n, i));
                    return i
                }
                ,
                ce.prototype.addTarget = function(e, t, n, i) {
                    this.targets.push({
                        sid: e,
                        member: n,
                        transform: t,
                        data: i
                    })
                }
                ,
                ce.prototype.apply = function(e) {
                    for (var t = 0; t < this.targets.length; ++t) {
                        var n = this.targets[t];
                        e && n.sid !== e || n.transform.update(n.data, n.member)
                    }
                }
                ,
                ce.prototype.getTarget = function(e) {
                    for (var t = 0; t < this.targets.length; ++t)
                        if (this.targets[t].sid === e)
                            return this.targets[t];
                    return null
                }
                ,
                ce.prototype.hasTarget = function(e) {
                    for (var t = 0; t < this.targets.length; ++t)
                        if (this.targets[t].sid === e)
                            return !0;
                    return !1
                }
                ,
                ce.prototype.interpolate = function(e, t) {
                    for (var n = 0, i = this.targets.length; i > n; n++) {
                        var r, o = this.targets[n], a = e.getTarget(o.sid);
                        if ("matrix" !== o.transform.type && a) {
                            var s = (t - this.time) / (e.time - this.time)
                              , l = a.data
                              , c = o.data;
                            if (0 > s && (s = 0),
                            s > 1 && (s = 1),
                            c.length) {
                                r = [];
                                for (var u = 0; u < c.length; ++u)
                                    r[u] = c[u] + (l[u] - c[u]) * s
                            } else
                                r = c + (l - c) * s
                        } else
                            r = o.data;
                        o.transform.update(r, o.member)
                    }
                }
                ,
                ue.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name");
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "optics":
                                this.parseOptics(n)
                            }
                    }
                    return this
                }
                ,
                ue.prototype.parseOptics = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++)
                        if ("technique_common" === e.childNodes[t].nodeName)
                            for (var n = e.childNodes[t], i = 0; i < n.childNodes.length; i++)
                                if (this.technique = n.childNodes[i].nodeName,
                                "perspective" === this.technique)
                                    for (var r = n.childNodes[i], o = 0; o < r.childNodes.length; o++) {
                                        var a = r.childNodes[o];
                                        switch (a.nodeName) {
                                        case "yfov":
                                            this.yfov = a.textContent;
                                            break;
                                        case "xfov":
                                            this.xfov = a.textContent;
                                            break;
                                        case "znear":
                                            this.znear = a.textContent;
                                            break;
                                        case "zfar":
                                            this.zfar = a.textContent;
                                            break;
                                        case "aspect_ratio":
                                            this.aspect_ratio = a.textContent
                                        }
                                    }
                                else if ("orthographic" === this.technique)
                                    for (var s = n.childNodes[i], o = 0; o < s.childNodes.length; o++) {
                                        var a = s.childNodes[o];
                                        switch (a.nodeName) {
                                        case "xmag":
                                            this.xmag = a.textContent;
                                            break;
                                        case "ymag":
                                            this.ymag = a.textContent;
                                            break;
                                        case "znear":
                                            this.znear = a.textContent;
                                            break;
                                        case "zfar":
                                            this.zfar = a.textContent;
                                            break;
                                        case "aspect_ratio":
                                            this.aspect_ratio = a.textContent
                                        }
                                    }
                    return this
                }
                ,
                he.prototype.parse = function(e) {
                    return this.url = e.getAttribute("url").replace(/^#/, ""),
                    this
                }
                ,
                de.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name");
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "technique_common":
                                this.parseCommon(n);
                                break;
                            case "technique":
                                this.parseTechnique(n)
                            }
                    }
                    return this
                }
                ,
                de.prototype.parseCommon = function(t) {
                    for (var n = 0; n < t.childNodes.length; n++)
                        switch (t.childNodes[n].nodeName) {
                        case "directional":
                        case "point":
                        case "spot":
                        case "ambient":
                            this.technique = t.childNodes[n].nodeName;
                            for (var i = t.childNodes[n], r = 0; r < i.childNodes.length; r++) {
                                var o = i.childNodes[r];
                                switch (o.nodeName) {
                                case "color":
                                    var a = xe(o.textContent);
                                    this.color = new e.Color(0),
                                    this.color.setRGB(a[0], a[1], a[2]),
                                    this.color.a = a[3];
                                    break;
                                case "falloff_angle":
                                    this.falloff_angle = parseFloat(o.textContent);
                                    break;
                                case "quadratic_attenuation":
                                    var s = parseFloat(o.textContent);
                                    this.distance = s ? Math.sqrt(1 / s) : 0
                                }
                            }
                        }
                    return this
                }
                ,
                de.prototype.parseTechnique = function(e) {
                    this.profile = e.getAttribute("profile");
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        switch (n.nodeName) {
                        case "intensity":
                            this.intensity = parseFloat(n.textContent)
                        }
                    }
                    return this
                }
                ,
                fe.prototype.parse = function(e) {
                    return this.url = e.getAttribute("url").replace(/^#/, ""),
                    this
                }
                ,
                pe.prototype.parse = function(e) {
                    this.id = e.getAttribute("id"),
                    this.name = e.getAttribute("name"),
                    this.joints = [],
                    this.links = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "technique_common":
                                this.parseCommon(n)
                            }
                    }
                    return this
                }
                ,
                pe.prototype.parseCommon = function(e) {
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (e.childNodes[t].nodeName) {
                            case "joint":
                                this.joints.push((new me).parse(n));
                                break;
                            case "link":
                                this.links.push((new ve).parse(n))
                            }
                    }
                    return this
                }
                ,
                me.prototype.parse = function(t) {
                    this.sid = t.getAttribute("sid"),
                    this.name = t.getAttribute("name"),
                    this.axis = new e.Vector3,
                    this.limits = {
                        min: 0,
                        max: 0
                    },
                    this.type = "",
                    this["static"] = !1,
                    this.zeroPosition = 0,
                    this.middlePosition = 0;
                    var n = t.querySelector("axis")
                      , i = xe(n.textContent);
                    this.axis = Pe(i, 0);
                    var r = t.querySelector("limits min") ? parseFloat(t.querySelector("limits min").textContent) : -360
                      , o = t.querySelector("limits max") ? parseFloat(t.querySelector("limits max").textContent) : 360;
                    this.limits = {
                        min: r,
                        max: o
                    };
                    for (var a = ["prismatic", "revolute"], s = 0; s < a.length; s++) {
                        var l = a[s]
                          , c = t.querySelector(l);
                        c && (this.type = l)
                    }
                    return this.limits.min >= this.limits.max && (this["static"] = !0),
                    this.middlePosition = (this.limits.min + this.limits.max) / 2,
                    this
                }
                ,
                ve.prototype.parse = function(e) {
                    this.sid = e.getAttribute("sid"),
                    this.name = e.getAttribute("name"),
                    this.transforms = [],
                    this.attachments = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "attachment_full":
                                this.attachments.push((new ge).parse(n));
                                break;
                            case "rotate":
                            case "translate":
                            case "matrix":
                                this.transforms.push((new N).parse(n))
                            }
                    }
                    return this
                }
                ,
                ge.prototype.parse = function(e) {
                    this.joint = e.getAttribute("joint").split("/").pop(),
                    this.links = [];
                    for (var t = 0; t < e.childNodes.length; t++) {
                        var n = e.childNodes[t];
                        if (1 == n.nodeType)
                            switch (n.nodeName) {
                            case "link":
                                this.links.push((new ve).parse(n));
                                break;
                            case "rotate":
                            case "translate":
                            case "matrix":
                                this.transforms.push((new N).parse(n))
                            }
                    }
                    return this
                }
                ,
                {
                    load: n,
                    parse: i,
                    setPreferredShading: r,
                    applySkin: x,
                    geometries: Ze,
                    options: nt
                }
            }
        }
        ).call(n, i(2))
    }
    , function(e, t, n) {
        var i = i || {}
          , r = {
            REVISION: "71"
        };
        e.exports = r,
        void 0 === Math.sign && (Math.sign = function(e) {
            return 0 > e ? -1 : e > 0 ? 1 : +e
        }
        ),
        r.log = function() {
            console.log.apply(console, arguments)
        }
        ,
        r.warn = function() {
            console.warn.apply(console, arguments)
        }
        ,
        r.error = function() {
            console.error.apply(console, arguments)
        }
        ,
        r.MOUSE = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2
        },
        r.CullFaceNone = 0,
        r.CullFaceBack = 1,
        r.CullFaceFront = 2,
        r.CullFaceFrontBack = 3,
        r.FrontFaceDirectionCW = 0,
        r.FrontFaceDirectionCCW = 1,
        r.BasicShadowMap = 0,
        r.PCFShadowMap = 1,
        r.PCFSoftShadowMap = 2,
        r.FrontSide = 0,
        r.BackSide = 1,
        r.DoubleSide = 2,
        r.NoShading = 0,
        r.FlatShading = 1,
        r.SmoothShading = 2,
        r.NoColors = 0,
        r.FaceColors = 1,
        r.VertexColors = 2,
        r.NoBlending = 0,
        r.NormalBlending = 1,
        r.AdditiveBlending = 2,
        r.SubtractiveBlending = 3,
        r.MultiplyBlending = 4,
        r.CustomBlending = 5,
        r.AddEquation = 100,
        r.SubtractEquation = 101,
        r.ReverseSubtractEquation = 102,
        r.MinEquation = 103,
        r.MaxEquation = 104,
        r.ZeroFactor = 200,
        r.OneFactor = 201,
        r.SrcColorFactor = 202,
        r.OneMinusSrcColorFactor = 203,
        r.SrcAlphaFactor = 204,
        r.OneMinusSrcAlphaFactor = 205,
        r.DstAlphaFactor = 206,
        r.OneMinusDstAlphaFactor = 207,
        r.DstColorFactor = 208,
        r.OneMinusDstColorFactor = 209,
        r.SrcAlphaSaturateFactor = 210,
        r.MultiplyOperation = 0,
        r.MixOperation = 1,
        r.AddOperation = 2,
        r.UVMapping = 300,
        r.CubeReflectionMapping = 301,
        r.CubeRefractionMapping = 302,
        r.EquirectangularReflectionMapping = 303,
        r.EquirectangularRefractionMapping = 304,
        r.SphericalReflectionMapping = 305,
        r.RepeatWrapping = 1e3,
        r.ClampToEdgeWrapping = 1001,
        r.MirroredRepeatWrapping = 1002,
        r.NearestFilter = 1003,
        r.NearestMipMapNearestFilter = 1004,
        r.NearestMipMapLinearFilter = 1005,
        r.LinearFilter = 1006,
        r.LinearMipMapNearestFilter = 1007,
        r.LinearMipMapLinearFilter = 1008,
        r.UnsignedByteType = 1009,
        r.ByteType = 1010,
        r.ShortType = 1011,
        r.UnsignedShortType = 1012,
        r.IntType = 1013,
        r.UnsignedIntType = 1014,
        r.FloatType = 1015,
        r.HalfFloatType = 1025,
        r.UnsignedShort4444Type = 1016,
        r.UnsignedShort5551Type = 1017,
        r.UnsignedShort565Type = 1018,
        r.AlphaFormat = 1019,
        r.RGBFormat = 1020,
        r.RGBAFormat = 1021,
        r.LuminanceFormat = 1022,
        r.LuminanceAlphaFormat = 1023,
        r.RGBEFormat = r.RGBAFormat,
        r.RGB_S3TC_DXT1_Format = 2001,
        r.RGBA_S3TC_DXT1_Format = 2002,
        r.RGBA_S3TC_DXT3_Format = 2003,
        r.RGBA_S3TC_DXT5_Format = 2004,
        r.RGB_PVRTC_4BPPV1_Format = 2100,
        r.RGB_PVRTC_2BPPV1_Format = 2101,
        r.RGBA_PVRTC_4BPPV1_Format = 2102,
        r.RGBA_PVRTC_2BPPV1_Format = 2103,
        r.Projector = function() {
            r.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),
            this.projectVector = function(e, t) {
                r.warn("THREE.Projector: .projectVector() is now vector.project()."),
                e.project(t)
            }
            ,
            this.unprojectVector = function(e, t) {
                r.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),
                e.unproject(t)
            }
            ,
            this.pickingRay = function(e, t) {
                r.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
            }
        }
        ,
        r.CanvasRenderer = function() {
            r.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),
            this.domElement = document.createElement("canvas"),
            this.clear = function() {}
            ,
            this.render = function() {}
            ,
            this.setClearColor = function() {}
            ,
            this.setSize = function() {}
        }
        ,
        r.Color = function(e) {
            return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(e)
        }
        ,
        r.Color.prototype = {
            constructor: r.Color,
            r: 1,
            g: 1,
            b: 1,
            set: function(e) {
                return e instanceof r.Color ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e),
                this
            },
            setHex: function(e) {
                return e = Math.floor(e),
                this.r = (e >> 16 & 255) / 255,
                this.g = (e >> 8 & 255) / 255,
                this.b = (255 & e) / 255,
                this
            },
            setRGB: function(e, t, n) {
                return this.r = e,
                this.g = t,
                this.b = n,
                this
            },
            setHSL: function(e, t, n) {
                if (0 === t)
                    this.r = this.g = this.b = n;
                else {
                    var i = function(e, t, n) {
                        return 0 > n && (n += 1),
                        n > 1 && (n -= 1),
                        1 / 6 > n ? e + 6 * (t - e) * n : .5 > n ? t : 2 / 3 > n ? e + 6 * (t - e) * (2 / 3 - n) : e
                    }
                      , r = .5 >= n ? n * (1 + t) : n + t - n * t
                      , o = 2 * n - r;
                    this.r = i(o, r, e + 1 / 3),
                    this.g = i(o, r, e),
                    this.b = i(o, r, e - 1 / 3)
                }
                return this
            },
            setStyle: function(e) {
                if (/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)) {
                    var t = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);
                    return this.r = Math.min(255, parseInt(t[1], 10)) / 255,
                    this.g = Math.min(255, parseInt(t[2], 10)) / 255,
                    this.b = Math.min(255, parseInt(t[3], 10)) / 255,
                    this
                }
                if (/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)) {
                    var t = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);
                    return this.r = Math.min(100, parseInt(t[1], 10)) / 100,
                    this.g = Math.min(100, parseInt(t[2], 10)) / 100,
                    this.b = Math.min(100, parseInt(t[3], 10)) / 100,
                    this
                }
                if (/^\#([0-9a-f]{6})$/i.test(e)) {
                    var t = /^\#([0-9a-f]{6})$/i.exec(e);
                    return this.setHex(parseInt(t[1], 16)),
                    this
                }
                if (/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)) {
                    var t = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);
                    return this.setHex(parseInt(t[1] + t[1] + t[2] + t[2] + t[3] + t[3], 16)),
                    this
                }
                return /^(\w+)$/i.test(e) ? (this.setHex(r.ColorKeywords[e]),
                this) : void 0
            },
            copy: function(e) {
                return this.r = e.r,
                this.g = e.g,
                this.b = e.b,
                this
            },
            copyGammaToLinear: function(e, t) {
                return void 0 === t && (t = 2),
                this.r = Math.pow(e.r, t),
                this.g = Math.pow(e.g, t),
                this.b = Math.pow(e.b, t),
                this
            },
            copyLinearToGamma: function(e, t) {
                void 0 === t && (t = 2);
                var n = t > 0 ? 1 / t : 1;
                return this.r = Math.pow(e.r, n),
                this.g = Math.pow(e.g, n),
                this.b = Math.pow(e.b, n),
                this
            },
            convertGammaToLinear: function() {
                var e = this.r
                  , t = this.g
                  , n = this.b;
                return this.r = e * e,
                this.g = t * t,
                this.b = n * n,
                this
            },
            convertLinearToGamma: function() {
                return this.r = Math.sqrt(this.r),
                this.g = Math.sqrt(this.g),
                this.b = Math.sqrt(this.b),
                this
            },
            getHex: function() {
                return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
            },
            getHexString: function() {
                return ("000000" + this.getHex().toString(16)).slice(-6)
            },
            getHSL: function(e) {
                var t, n, i = e || {
                    h: 0,
                    s: 0,
                    l: 0
                }, r = this.r, o = this.g, a = this.b, s = Math.max(r, o, a), l = Math.min(r, o, a), c = (l + s) / 2;
                if (l === s)
                    t = 0,
                    n = 0;
                else {
                    var u = s - l;
                    switch (n = .5 >= c ? u / (s + l) : u / (2 - s - l),
                    s) {
                    case r:
                        t = (o - a) / u + (a > o ? 6 : 0);
                        break;
                    case o:
                        t = (a - r) / u + 2;
                        break;
                    case a:
                        t = (r - o) / u + 4
                    }
                    t /= 6
                }
                return i.h = t,
                i.s = n,
                i.l = c,
                i
            },
            getStyle: function() {
                return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
            },
            offsetHSL: function(e, t, n) {
                var i = this.getHSL();
                return i.h += e,
                i.s += t,
                i.l += n,
                this.setHSL(i.h, i.s, i.l),
                this
            },
            add: function(e) {
                return this.r += e.r,
                this.g += e.g,
                this.b += e.b,
                this
            },
            addColors: function(e, t) {
                return this.r = e.r + t.r,
                this.g = e.g + t.g,
                this.b = e.b + t.b,
                this
            },
            addScalar: function(e) {
                return this.r += e,
                this.g += e,
                this.b += e,
                this
            },
            multiply: function(e) {
                return this.r *= e.r,
                this.g *= e.g,
                this.b *= e.b,
                this
            },
            multiplyScalar: function(e) {
                return this.r *= e,
                this.g *= e,
                this.b *= e,
                this
            },
            lerp: function(e, t) {
                return this.r += (e.r - this.r) * t,
                this.g += (e.g - this.g) * t,
                this.b += (e.b - this.b) * t,
                this
            },
            equals: function(e) {
                return e.r === this.r && e.g === this.g && e.b === this.b
            },
            fromArray: function(e) {
                return this.r = e[0],
                this.g = e[1],
                this.b = e[2],
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this.r,
                e[t + 1] = this.g,
                e[t + 2] = this.b,
                e
            },
            clone: function() {
                return (new r.Color).setRGB(this.r, this.g, this.b)
            }
        },
        r.ColorKeywords = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        },
        r.Quaternion = function(e, t, n, i) {
            this._x = e || 0,
            this._y = t || 0,
            this._z = n || 0,
            this._w = void 0 !== i ? i : 1
        }
        ,
        r.Quaternion.prototype = {
            constructor: r.Quaternion,
            _x: 0,
            _y: 0,
            _z: 0,
            _w: 0,
            get x() {
                return this._x
            },
            set x(e) {
                this._x = e,
                this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(e) {
                this._y = e,
                this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(e) {
                this._z = e,
                this.onChangeCallback()
            },
            get w() {
                return this._w
            },
            set w(e) {
                this._w = e,
                this.onChangeCallback()
            },
            set: function(e, t, n, i) {
                return this._x = e,
                this._y = t,
                this._z = n,
                this._w = i,
                this.onChangeCallback(),
                this
            },
            copy: function(e) {
                return this._x = e.x,
                this._y = e.y,
                this._z = e.z,
                this._w = e.w,
                this.onChangeCallback(),
                this
            },
            setFromEuler: function(e, t) {
                if (e instanceof r.Euler == !1)
                    throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var n = Math.cos(e._x / 2)
                  , i = Math.cos(e._y / 2)
                  , o = Math.cos(e._z / 2)
                  , a = Math.sin(e._x / 2)
                  , s = Math.sin(e._y / 2)
                  , l = Math.sin(e._z / 2);
                return "XYZ" === e.order ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o - a * s * l) : "YXZ" === e.order ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o + a * s * l) : "ZXY" === e.order ? (this._x = a * i * o - n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o - a * s * l) : "ZYX" === e.order ? (this._x = a * i * o - n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o + a * s * l) : "YZX" === e.order ? (this._x = a * i * o + n * s * l,
                this._y = n * s * o + a * i * l,
                this._z = n * i * l - a * s * o,
                this._w = n * i * o - a * s * l) : "XZY" === e.order && (this._x = a * i * o - n * s * l,
                this._y = n * s * o - a * i * l,
                this._z = n * i * l + a * s * o,
                this._w = n * i * o + a * s * l),
                t !== !1 && this.onChangeCallback(),
                this
            },
            setFromAxisAngle: function(e, t) {
                var n = t / 2
                  , i = Math.sin(n);
                return this._x = e.x * i,
                this._y = e.y * i,
                this._z = e.z * i,
                this._w = Math.cos(n),
                this.onChangeCallback(),
                this
            },
            setFromRotationMatrix: function(e) {
                var t, n = e.elements, i = n[0], r = n[4], o = n[8], a = n[1], s = n[5], l = n[9], c = n[2], u = n[6], h = n[10], d = i + s + h;
                return d > 0 ? (t = .5 / Math.sqrt(d + 1),
                this._w = .25 / t,
                this._x = (u - l) * t,
                this._y = (o - c) * t,
                this._z = (a - r) * t) : i > s && i > h ? (t = 2 * Math.sqrt(1 + i - s - h),
                this._w = (u - l) / t,
                this._x = .25 * t,
                this._y = (r + a) / t,
                this._z = (o + c) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - i - h),
                this._w = (o - c) / t,
                this._x = (r + a) / t,
                this._y = .25 * t,
                this._z = (l + u) / t) : (t = 2 * Math.sqrt(1 + h - i - s),
                this._w = (a - r) / t,
                this._x = (o + c) / t,
                this._y = (l + u) / t,
                this._z = .25 * t),
                this.onChangeCallback(),
                this
            },
            setFromUnitVectors: function() {
                var e, t, n = 1e-6;
                return function(i, o) {
                    return void 0 === e && (e = new r.Vector3),
                    t = i.dot(o) + 1,
                    n > t ? (t = 0,
                    Math.abs(i.x) > Math.abs(i.z) ? e.set(-i.y, i.x, 0) : e.set(0, -i.z, i.y)) : e.crossVectors(i, o),
                    this._x = e.x,
                    this._y = e.y,
                    this._z = e.z,
                    this._w = t,
                    this.normalize(),
                    this
                }
            }(),
            inverse: function() {
                return this.conjugate().normalize(),
                this
            },
            conjugate: function() {
                return this._x *= -1,
                this._y *= -1,
                this._z *= -1,
                this.onChangeCallback(),
                this
            },
            dot: function(e) {
                return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
            },
            lengthSq: function() {
                return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
            },
            length: function() {
                return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
            },
            normalize: function() {
                var e = this.length();
                return 0 === e ? (this._x = 0,
                this._y = 0,
                this._z = 0,
                this._w = 1) : (e = 1 / e,
                this._x = this._x * e,
                this._y = this._y * e,
                this._z = this._z * e,
                this._w = this._w * e),
                this.onChangeCallback(),
                this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
                this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
            },
            multiplyQuaternions: function(e, t) {
                var n = e._x
                  , i = e._y
                  , r = e._z
                  , o = e._w
                  , a = t._x
                  , s = t._y
                  , l = t._z
                  , c = t._w;
                return this._x = n * c + o * a + i * l - r * s,
                this._y = i * c + o * s + r * a - n * l,
                this._z = r * c + o * l + n * s - i * a,
                this._w = o * c - n * a - i * s - r * l,
                this.onChangeCallback(),
                this
            },
            multiplyVector3: function(e) {
                return r.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),
                e.applyQuaternion(this)
            },
            slerp: function(e, t) {
                if (0 === t)
                    return this;
                if (1 === t)
                    return this.copy(e);
                var n = this._x
                  , i = this._y
                  , r = this._z
                  , o = this._w
                  , a = o * e._w + n * e._x + i * e._y + r * e._z;
                if (0 > a ? (this._w = -e._w,
                this._x = -e._x,
                this._y = -e._y,
                this._z = -e._z,
                a = -a) : this.copy(e),
                a >= 1)
                    return this._w = o,
                    this._x = n,
                    this._y = i,
                    this._z = r,
                    this;
                var s = Math.acos(a)
                  , l = Math.sqrt(1 - a * a);
                if (Math.abs(l) < .001)
                    return this._w = .5 * (o + this._w),
                    this._x = .5 * (n + this._x),
                    this._y = .5 * (i + this._y),
                    this._z = .5 * (r + this._z),
                    this;
                var c = Math.sin((1 - t) * s) / l
                  , u = Math.sin(t * s) / l;
                return this._w = o * c + this._w * u,
                this._x = n * c + this._x * u,
                this._y = i * c + this._y * u,
                this._z = r * c + this._z * u,
                this.onChangeCallback(),
                this
            },
            equals: function(e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0),
                this._x = e[t],
                this._y = e[t + 1],
                this._z = e[t + 2],
                this._w = e[t + 3],
                this.onChangeCallback(),
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this._x,
                e[t + 1] = this._y,
                e[t + 2] = this._z,
                e[t + 3] = this._w,
                e
            },
            onChange: function(e) {
                return this.onChangeCallback = e,
                this
            },
            onChangeCallback: function() {},
            clone: function() {
                return new r.Quaternion(this._x,this._y,this._z,this._w)
            }
        },
        r.Quaternion.slerp = function(e, t, n, i) {
            return n.copy(e).slerp(t, i)
        }
        ,
        r.Vector2 = function(e, t) {
            this.x = e || 0,
            this.y = t || 0
        }
        ,
        r.Vector2.prototype = {
            constructor: r.Vector2,
            set: function(e, t) {
                return this.x = e,
                this.y = t,
                this
            },
            setX: function(e) {
                return this.x = e,
                this
            },
            setY: function(e) {
                return this.y = e,
                this
            },
            setComponent: function(e, t) {
                switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            copy: function(e) {
                return this.x = e.x,
                this.y = e.y,
                this
            },
            add: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(e, t)) : (this.x += e.x,
                this.y += e.y,
                this)
            },
            addScalar: function(e) {
                return this.x += e,
                this.y += e,
                this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x,
                this.y = e.y + t.y,
                this
            },
            sub: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(e, t)) : (this.x -= e.x,
                this.y -= e.y,
                this)
            },
            subScalar: function(e) {
                return this.x -= e,
                this.y -= e,
                this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x,
                this.y = e.y - t.y,
                this
            },
            multiply: function(e) {
                return this.x *= e.x,
                this.y *= e.y,
                this
            },
            multiplyScalar: function(e) {
                return this.x *= e,
                this.y *= e,
                this
            },
            divide: function(e) {
                return this.x /= e.x,
                this.y /= e.y,
                this
            },
            divideScalar: function(e) {
                if (0 !== e) {
                    var t = 1 / e;
                    this.x *= t,
                    this.y *= t
                } else
                    this.x = 0,
                    this.y = 0;
                return this
            },
            min: function(e) {
                return this.x > e.x && (this.x = e.x),
                this.y > e.y && (this.y = e.y),
                this
            },
            max: function(e) {
                return this.x < e.x && (this.x = e.x),
                this.y < e.y && (this.y = e.y),
                this
            },
            clamp: function(e, t) {
                return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x),
                this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y),
                this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new r.Vector2,
                    t = new r.Vector2),
                    e.set(n, n),
                    t.set(i, i),
                    this.clamp(e, t)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x
                  , n = this.y - e.y;
                return t * t + n * n
            },
            setLength: function(e) {
                var t = this.length();
                return 0 !== t && e !== t && this.multiplyScalar(e / t),
                this
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t,
                this.y += (e.y - this.y) * t,
                this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e),
                this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0),
                this.x = e[t],
                this.y = e[t + 1],
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this.x,
                e[t + 1] = this.y,
                e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0),
                t = t * e.itemSize + n,
                this.x = e.array[t],
                this.y = e.array[t + 1],
                this
            },
            clone: function() {
                return new r.Vector2(this.x,this.y)
            }
        },
        r.Vector3 = function(e, t, n) {
            this.x = e || 0,
            this.y = t || 0,
            this.z = n || 0
        }
        ,
        r.Vector3.prototype = {
            constructor: r.Vector3,
            set: function(e, t, n) {
                return this.x = e,
                this.y = t,
                this.z = n,
                this
            },
            setX: function(e) {
                return this.x = e,
                this
            },
            setY: function(e) {
                return this.y = e,
                this
            },
            setZ: function(e) {
                return this.z = e,
                this
            },
            setComponent: function(e, t) {
                switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                case 2:
                    this.z = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            copy: function(e) {
                return this.x = e.x,
                this.y = e.y,
                this.z = e.z,
                this
            },
            add: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(e, t)) : (this.x += e.x,
                this.y += e.y,
                this.z += e.z,
                this)
            },
            addScalar: function(e) {
                return this.x += e,
                this.y += e,
                this.z += e,
                this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x,
                this.y = e.y + t.y,
                this.z = e.z + t.z,
                this
            },
            sub: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(e, t)) : (this.x -= e.x,
                this.y -= e.y,
                this.z -= e.z,
                this)
            },
            subScalar: function(e) {
                return this.x -= e,
                this.y -= e,
                this.z -= e,
                this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x,
                this.y = e.y - t.y,
                this.z = e.z - t.z,
                this
            },
            multiply: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
                this.multiplyVectors(e, t)) : (this.x *= e.x,
                this.y *= e.y,
                this.z *= e.z,
                this)
            },
            multiplyScalar: function(e) {
                return this.x *= e,
                this.y *= e,
                this.z *= e,
                this
            },
            multiplyVectors: function(e, t) {
                return this.x = e.x * t.x,
                this.y = e.y * t.y,
                this.z = e.z * t.z,
                this
            },
            applyEuler: function() {
                var e;
                return function(t) {
                    return t instanceof r.Euler == !1 && r.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),
                    void 0 === e && (e = new r.Quaternion),
                    this.applyQuaternion(e.setFromEuler(t)),
                    this
                }
            }(),
            applyAxisAngle: function() {
                var e;
                return function(t, n) {
                    return void 0 === e && (e = new r.Quaternion),
                    this.applyQuaternion(e.setFromAxisAngle(t, n)),
                    this
                }
            }(),
            applyMatrix3: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = e.elements;
                return this.x = r[0] * t + r[3] * n + r[6] * i,
                this.y = r[1] * t + r[4] * n + r[7] * i,
                this.z = r[2] * t + r[5] * n + r[8] * i,
                this
            },
            applyMatrix4: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = e.elements;
                return this.x = r[0] * t + r[4] * n + r[8] * i + r[12],
                this.y = r[1] * t + r[5] * n + r[9] * i + r[13],
                this.z = r[2] * t + r[6] * n + r[10] * i + r[14],
                this
            },
            applyProjection: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = e.elements
                  , o = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
                return this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * o,
                this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * o,
                this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * o,
                this
            },
            applyQuaternion: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = e.x
                  , o = e.y
                  , a = e.z
                  , s = e.w
                  , l = s * t + o * i - a * n
                  , c = s * n + a * t - r * i
                  , u = s * i + r * n - o * t
                  , h = -r * t - o * n - a * i;
                return this.x = l * s + h * -r + c * -a - u * -o,
                this.y = c * s + h * -o + u * -r - l * -a,
                this.z = u * s + h * -a + l * -o - c * -r,
                this
            },
            project: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new r.Matrix4),
                    e.multiplyMatrices(t.projectionMatrix, e.getInverse(t.matrixWorld)),
                    this.applyProjection(e)
                }
            }(),
            unproject: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new r.Matrix4),
                    e.multiplyMatrices(t.matrixWorld, e.getInverse(t.projectionMatrix)),
                    this.applyProjection(e)
                }
            }(),
            transformDirection: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = e.elements;
                return this.x = r[0] * t + r[4] * n + r[8] * i,
                this.y = r[1] * t + r[5] * n + r[9] * i,
                this.z = r[2] * t + r[6] * n + r[10] * i,
                this.normalize(),
                this
            },
            divide: function(e) {
                return this.x /= e.x,
                this.y /= e.y,
                this.z /= e.z,
                this
            },
            divideScalar: function(e) {
                if (0 !== e) {
                    var t = 1 / e;
                    this.x *= t,
                    this.y *= t,
                    this.z *= t
                } else
                    this.x = 0,
                    this.y = 0,
                    this.z = 0;
                return this
            },
            min: function(e) {
                return this.x > e.x && (this.x = e.x),
                this.y > e.y && (this.y = e.y),
                this.z > e.z && (this.z = e.z),
                this
            },
            max: function(e) {
                return this.x < e.x && (this.x = e.x),
                this.y < e.y && (this.y = e.y),
                this.z < e.z && (this.z = e.z),
                this
            },
            clamp: function(e, t) {
                return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x),
                this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y),
                this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z),
                this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new r.Vector3,
                    t = new r.Vector3),
                    e.set(n, n, n),
                    t.set(i, i, i),
                    this.clamp(e, t)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this.z = Math.floor(this.z),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this.z = Math.ceil(this.z),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this.z = Math.round(this.z),
                this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this.z = -this.z,
                this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y + this.z * e.z
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(e) {
                var t = this.length();
                return 0 !== t && e !== t && this.multiplyScalar(e / t),
                this
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t,
                this.y += (e.y - this.y) * t,
                this.z += (e.z - this.z) * t,
                this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e),
                this
            },
            cross: function(e, t) {
                if (void 0 !== t)
                    return r.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
                    this.crossVectors(e, t);
                var n = this.x
                  , i = this.y
                  , o = this.z;
                return this.x = i * e.z - o * e.y,
                this.y = o * e.x - n * e.z,
                this.z = n * e.y - i * e.x,
                this
            },
            crossVectors: function(e, t) {
                var n = e.x
                  , i = e.y
                  , r = e.z
                  , o = t.x
                  , a = t.y
                  , s = t.z;
                return this.x = i * s - r * a,
                this.y = r * o - n * s,
                this.z = n * a - i * o,
                this
            },
            projectOnVector: function() {
                var e, t;
                return function(n) {
                    return void 0 === e && (e = new r.Vector3),
                    e.copy(n).normalize(),
                    t = this.dot(e),
                    this.copy(e).multiplyScalar(t)
                }
            }(),
            projectOnPlane: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new r.Vector3),
                    e.copy(this).projectOnVector(t),
                    this.sub(e)
                }
            }(),
            reflect: function() {
                var e;
                return function(t) {
                    return void 0 === e && (e = new r.Vector3),
                    this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)))
                }
            }(),
            angleTo: function(e) {
                var t = this.dot(e) / (this.length() * e.length());
                return Math.acos(r.Math.clamp(t, -1, 1))
            },
            distanceTo: function(e) {
                return Math.sqrt(this.distanceToSquared(e))
            },
            distanceToSquared: function(e) {
                var t = this.x - e.x
                  , n = this.y - e.y
                  , i = this.z - e.z;
                return t * t + n * n + i * i
            },
            setEulerFromRotationMatrix: function(e, t) {
                r.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
            },
            setEulerFromQuaternion: function(e, t) {
                r.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
            },
            getPositionFromMatrix: function(e) {
                return r.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),
                this.setFromMatrixPosition(e)
            },
            getScaleFromMatrix: function(e) {
                return r.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),
                this.setFromMatrixScale(e)
            },
            getColumnFromMatrix: function(e, t) {
                return r.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),
                this.setFromMatrixColumn(e, t)
            },
            setFromMatrixPosition: function(e) {
                return this.x = e.elements[12],
                this.y = e.elements[13],
                this.z = e.elements[14],
                this
            },
            setFromMatrixScale: function(e) {
                var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length()
                  , n = this.set(e.elements[4], e.elements[5], e.elements[6]).length()
                  , i = this.set(e.elements[8], e.elements[9], e.elements[10]).length();
                return this.x = t,
                this.y = n,
                this.z = i,
                this
            },
            setFromMatrixColumn: function(e, t) {
                var n = 4 * e
                  , i = t.elements;
                return this.x = i[n],
                this.y = i[n + 1],
                this.z = i[n + 2],
                this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y && e.z === this.z
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0),
                this.x = e[t],
                this.y = e[t + 1],
                this.z = e[t + 2],
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this.x,
                e[t + 1] = this.y,
                e[t + 2] = this.z,
                e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0),
                t = t * e.itemSize + n,
                this.x = e.array[t],
                this.y = e.array[t + 1],
                this.z = e.array[t + 2],
                this
            },
            clone: function() {
                return new r.Vector3(this.x,this.y,this.z)
            }
        },
        r.Vector4 = function(e, t, n, i) {
            this.x = e || 0,
            this.y = t || 0,
            this.z = n || 0,
            this.w = void 0 !== i ? i : 1
        }
        ,
        r.Vector4.prototype = {
            constructor: r.Vector4,
            set: function(e, t, n, i) {
                return this.x = e,
                this.y = t,
                this.z = n,
                this.w = i,
                this
            },
            setX: function(e) {
                return this.x = e,
                this
            },
            setY: function(e) {
                return this.y = e,
                this
            },
            setZ: function(e) {
                return this.z = e,
                this
            },
            setW: function(e) {
                return this.w = e,
                this
            },
            setComponent: function(e, t) {
                switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                case 2:
                    this.z = t;
                    break;
                case 3:
                    this.w = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            getComponent: function(e) {
                switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw new Error("index is out of range: " + e)
                }
            },
            copy: function(e) {
                return this.x = e.x,
                this.y = e.y,
                this.z = e.z,
                this.w = void 0 !== e.w ? e.w : 1,
                this
            },
            add: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),
                this.addVectors(e, t)) : (this.x += e.x,
                this.y += e.y,
                this.z += e.z,
                this.w += e.w,
                this)
            },
            addScalar: function(e) {
                return this.x += e,
                this.y += e,
                this.z += e,
                this.w += e,
                this
            },
            addVectors: function(e, t) {
                return this.x = e.x + t.x,
                this.y = e.y + t.y,
                this.z = e.z + t.z,
                this.w = e.w + t.w,
                this
            },
            sub: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
                this.subVectors(e, t)) : (this.x -= e.x,
                this.y -= e.y,
                this.z -= e.z,
                this.w -= e.w,
                this)
            },
            subScalar: function(e) {
                return this.x -= e,
                this.y -= e,
                this.z -= e,
                this.w -= e,
                this
            },
            subVectors: function(e, t) {
                return this.x = e.x - t.x,
                this.y = e.y - t.y,
                this.z = e.z - t.z,
                this.w = e.w - t.w,
                this
            },
            multiplyScalar: function(e) {
                return this.x *= e,
                this.y *= e,
                this.z *= e,
                this.w *= e,
                this
            },
            applyMatrix4: function(e) {
                var t = this.x
                  , n = this.y
                  , i = this.z
                  , r = this.w
                  , o = e.elements;
                return this.x = o[0] * t + o[4] * n + o[8] * i + o[12] * r,
                this.y = o[1] * t + o[5] * n + o[9] * i + o[13] * r,
                this.z = o[2] * t + o[6] * n + o[10] * i + o[14] * r,
                this.w = o[3] * t + o[7] * n + o[11] * i + o[15] * r,
                this
            },
            divideScalar: function(e) {
                if (0 !== e) {
                    var t = 1 / e;
                    this.x *= t,
                    this.y *= t,
                    this.z *= t,
                    this.w *= t
                } else
                    this.x = 0,
                    this.y = 0,
                    this.z = 0,
                    this.w = 1;
                return this
            },
            setAxisAngleFromQuaternion: function(e) {
                this.w = 2 * Math.acos(e.w);
                var t = Math.sqrt(1 - e.w * e.w);
                return 1e-4 > t ? (this.x = 1,
                this.y = 0,
                this.z = 0) : (this.x = e.x / t,
                this.y = e.y / t,
                this.z = e.z / t),
                this
            },
            setAxisAngleFromRotationMatrix: function(e) {
                var t, n, i, r, o = .01, a = .1, s = e.elements, l = s[0], c = s[4], u = s[8], h = s[1], d = s[5], f = s[9], p = s[2], m = s[6], v = s[10];
                if (Math.abs(c - h) < o && Math.abs(u - p) < o && Math.abs(f - m) < o) {
                    if (Math.abs(c + h) < a && Math.abs(u + p) < a && Math.abs(f + m) < a && Math.abs(l + d + v - 3) < a)
                        return this.set(1, 0, 0, 0),
                        this;
                    t = Math.PI;
                    var g = (l + 1) / 2
                      , y = (d + 1) / 2
                      , b = (v + 1) / 2
                      , x = (c + h) / 4
                      , w = (u + p) / 4
                      , _ = (f + m) / 4;
                    return g > y && g > b ? o > g ? (n = 0,
                    i = .707106781,
                    r = .707106781) : (n = Math.sqrt(g),
                    i = x / n,
                    r = w / n) : y > b ? o > y ? (n = .707106781,
                    i = 0,
                    r = .707106781) : (i = Math.sqrt(y),
                    n = x / i,
                    r = _ / i) : o > b ? (n = .707106781,
                    i = .707106781,
                    r = 0) : (r = Math.sqrt(b),
                    n = w / r,
                    i = _ / r),
                    this.set(n, i, r, t),
                    this
                }
                var S = Math.sqrt((m - f) * (m - f) + (u - p) * (u - p) + (h - c) * (h - c));
                return Math.abs(S) < .001 && (S = 1),
                this.x = (m - f) / S,
                this.y = (u - p) / S,
                this.z = (h - c) / S,
                this.w = Math.acos((l + d + v - 1) / 2),
                this
            },
            min: function(e) {
                return this.x > e.x && (this.x = e.x),
                this.y > e.y && (this.y = e.y),
                this.z > e.z && (this.z = e.z),
                this.w > e.w && (this.w = e.w),
                this
            },
            max: function(e) {
                return this.x < e.x && (this.x = e.x),
                this.y < e.y && (this.y = e.y),
                this.z < e.z && (this.z = e.z),
                this.w < e.w && (this.w = e.w),
                this
            },
            clamp: function(e, t) {
                return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x),
                this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y),
                this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z),
                this.w < e.w ? this.w = e.w : this.w > t.w && (this.w = t.w),
                this
            },
            clampScalar: function() {
                var e, t;
                return function(n, i) {
                    return void 0 === e && (e = new r.Vector4,
                    t = new r.Vector4),
                    e.set(n, n, n, n),
                    t.set(i, i, i, i),
                    this.clamp(e, t)
                }
            }(),
            floor: function() {
                return this.x = Math.floor(this.x),
                this.y = Math.floor(this.y),
                this.z = Math.floor(this.z),
                this.w = Math.floor(this.w),
                this
            },
            ceil: function() {
                return this.x = Math.ceil(this.x),
                this.y = Math.ceil(this.y),
                this.z = Math.ceil(this.z),
                this.w = Math.ceil(this.w),
                this
            },
            round: function() {
                return this.x = Math.round(this.x),
                this.y = Math.round(this.y),
                this.z = Math.round(this.z),
                this.w = Math.round(this.w),
                this
            },
            roundToZero: function() {
                return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x),
                this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y),
                this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z),
                this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w),
                this
            },
            negate: function() {
                return this.x = -this.x,
                this.y = -this.y,
                this.z = -this.z,
                this.w = -this.w,
                this
            },
            dot: function(e) {
                return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
            },
            lengthSq: function() {
                return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
            },
            length: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
            },
            lengthManhattan: function() {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
            },
            normalize: function() {
                return this.divideScalar(this.length())
            },
            setLength: function(e) {
                var t = this.length();
                return 0 !== t && e !== t && this.multiplyScalar(e / t),
                this
            },
            lerp: function(e, t) {
                return this.x += (e.x - this.x) * t,
                this.y += (e.y - this.y) * t,
                this.z += (e.z - this.z) * t,
                this.w += (e.w - this.w) * t,
                this
            },
            lerpVectors: function(e, t, n) {
                return this.subVectors(t, e).multiplyScalar(n).add(e),
                this
            },
            equals: function(e) {
                return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
            },
            fromArray: function(e, t) {
                return void 0 === t && (t = 0),
                this.x = e[t],
                this.y = e[t + 1],
                this.z = e[t + 2],
                this.w = e[t + 3],
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this.x,
                e[t + 1] = this.y,
                e[t + 2] = this.z,
                e[t + 3] = this.w,
                e
            },
            fromAttribute: function(e, t, n) {
                return void 0 === n && (n = 0),
                t = t * e.itemSize + n,
                this.x = e.array[t],
                this.y = e.array[t + 1],
                this.z = e.array[t + 2],
                this.w = e.array[t + 3],
                this
            },
            clone: function() {
                return new r.Vector4(this.x,this.y,this.z,this.w)
            }
        },
        r.Euler = function(e, t, n, i) {
            this._x = e || 0,
            this._y = t || 0,
            this._z = n || 0,
            this._order = i || r.Euler.DefaultOrder
        }
        ,
        r.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"],
        r.Euler.DefaultOrder = "XYZ",
        r.Euler.prototype = {
            constructor: r.Euler,
            _x: 0,
            _y: 0,
            _z: 0,
            _order: r.Euler.DefaultOrder,
            get x() {
                return this._x
            },
            set x(e) {
                this._x = e,
                this.onChangeCallback()
            },
            get y() {
                return this._y
            },
            set y(e) {
                this._y = e,
                this.onChangeCallback()
            },
            get z() {
                return this._z
            },
            set z(e) {
                this._z = e,
                this.onChangeCallback()
            },
            get order() {
                return this._order
            },
            set order(e) {
                this._order = e,
                this.onChangeCallback()
            },
            set: function(e, t, n, i) {
                return this._x = e,
                this._y = t,
                this._z = n,
                this._order = i || this._order,
                this.onChangeCallback(),
                this
            },
            copy: function(e) {
                return this._x = e._x,
                this._y = e._y,
                this._z = e._z,
                this._order = e._order,
                this.onChangeCallback(),
                this
            },
            setFromRotationMatrix: function(e, t, n) {
                var i = r.Math.clamp
                  , o = e.elements
                  , a = o[0]
                  , s = o[4]
                  , l = o[8]
                  , c = o[1]
                  , u = o[5]
                  , h = o[9]
                  , d = o[2]
                  , f = o[6]
                  , p = o[10];
                return t = t || this._order,
                "XYZ" === t ? (this._y = Math.asin(i(l, -1, 1)),
                Math.abs(l) < .99999 ? (this._x = Math.atan2(-h, p),
                this._z = Math.atan2(-s, a)) : (this._x = Math.atan2(f, u),
                this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-i(h, -1, 1)),
                Math.abs(h) < .99999 ? (this._y = Math.atan2(l, p),
                this._z = Math.atan2(c, u)) : (this._y = Math.atan2(-d, a),
                this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(i(f, -1, 1)),
                Math.abs(f) < .99999 ? (this._y = Math.atan2(-d, p),
                this._z = Math.atan2(-s, u)) : (this._y = 0,
                this._z = Math.atan2(c, a))) : "ZYX" === t ? (this._y = Math.asin(-i(d, -1, 1)),
                Math.abs(d) < .99999 ? (this._x = Math.atan2(f, p),
                this._z = Math.atan2(c, a)) : (this._x = 0,
                this._z = Math.atan2(-s, u))) : "YZX" === t ? (this._z = Math.asin(i(c, -1, 1)),
                Math.abs(c) < .99999 ? (this._x = Math.atan2(-h, u),
                this._y = Math.atan2(-d, a)) : (this._x = 0,
                this._y = Math.atan2(l, p))) : "XZY" === t ? (this._z = Math.asin(-i(s, -1, 1)),
                Math.abs(s) < .99999 ? (this._x = Math.atan2(f, u),
                this._y = Math.atan2(l, a)) : (this._x = Math.atan2(-h, p),
                this._y = 0)) : r.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t),
                this._order = t,
                n !== !1 && this.onChangeCallback(),
                this
            },
            setFromQuaternion: function() {
                var e;
                return function(t, n, i) {
                    return void 0 === e && (e = new r.Matrix4),
                    e.makeRotationFromQuaternion(t),
                    this.setFromRotationMatrix(e, n, i),
                    this
                }
            }(),
            setFromVector3: function(e, t) {
                return this.set(e.x, e.y, e.z, t || this._order)
            },
            reorder: function() {
                var e = new r.Quaternion;
                return function(t) {
                    e.setFromEuler(this),
                    this.setFromQuaternion(e, t)
                }
            }(),
            equals: function(e) {
                return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
            },
            fromArray: function(e) {
                return this._x = e[0],
                this._y = e[1],
                this._z = e[2],
                void 0 !== e[3] && (this._order = e[3]),
                this.onChangeCallback(),
                this
            },
            toArray: function(e, t) {
                return void 0 === e && (e = []),
                void 0 === t && (t = 0),
                e[t] = this._x,
                e[t + 1] = this._y,
                e[t + 2] = this._z,
                e[t + 3] = this._order,
                e
            },
            toVector3: function(e) {
                return e ? e.set(this._x, this._y, this._z) : new r.Vector3(this._x,this._y,this._z)
            },
            onChange: function(e) {
                return this.onChangeCallback = e,
                this
            },
            onChangeCallback: function() {},
            clone: function() {
                return new r.Euler(this._x,this._y,this._z,this._order)
            }
        },
        r.Line3 = function(e, t) {
            this.start = void 0 !== e ? e : new r.Vector3,
            this.end = void 0 !== t ? t : new r.Vector3
        }
        ,
        r.Line3.prototype = {
            constructor: r.Line3,
            set: function(e, t) {
                return this.start.copy(e),
                this.end.copy(t),
                this
            },
            copy: function(e) {
                return this.start.copy(e.start),
                this.end.copy(e.end),
                this
            },
            center: function(e) {
                var t = e || new r.Vector3;
                return t.addVectors(this.start, this.end).multiplyScalar(.5)
            },
            delta: function(e) {
                var t = e || new r.Vector3;
                return t.subVectors(this.end, this.start)
            },
            distanceSq: function() {
                return this.start.distanceToSquared(this.end)
            },
            distance: function() {
                return this.start.distanceTo(this.end)
            },
            at: function(e, t) {
                var n = t || new r.Vector3;
                return this.delta(n).multiplyScalar(e).add(this.start)
            },
            closestPointToPointParameter: function() {
                var e = new r.Vector3
                  , t = new r.Vector3;
                return function(n, i) {
                    e.subVectors(n, this.start),
                    t.subVectors(this.end, this.start);
                    var o = t.dot(t)
                      , a = t.dot(e)
                      , s = a / o;
                    return i && (s = r.Math.clamp(s, 0, 1)),
                    s
                }
            }(),
            closestPointToPoint: function(e, t, n) {
                var i = this.closestPointToPointParameter(e, t)
                  , o = n || new r.Vector3;
                return this.delta(o).multiplyScalar(i).add(this.start)
            },
            applyMatrix4: function(e) {
                return this.start.applyMatrix4(e),
                this.end.applyMatrix4(e),
                this
            },
            equals: function(e) {
                return e.start.equals(this.start) && e.end.equals(this.end)
            },
            clone: function() {
                return (new r.Line3).copy(this)
            }
        },
        r.Box2 = function(e, t) {
            this.min = void 0 !== e ? e : new r.Vector2(1 / 0,1 / 0),
            this.max = void 0 !== t ? t : new r.Vector2(-(1 / 0),-(1 / 0))
        }
        ,
        r.Box2.prototype = {
            constructor: r.Box2,
            set: function(e, t) {
                return this.min.copy(e),
                this.max.copy(t),
                this
            },
            setFromPoints: function(e) {
                this.makeEmpty();
                for (var t = 0, n = e.length; n > t; t++)
                    this.expandByPoint(e[t]);
                return this
            },
            setFromCenterAndSize: function() {
                var e = new r.Vector2;
                return function(t, n) {
                    var i = e.copy(n).multiplyScalar(.5);
                    return this.min.copy(t).sub(i),
                    this.max.copy(t).add(i),
                    this
                }
            }(),
            copy: function(e) {
                return this.min.copy(e.min),
                this.max.copy(e.max),
                this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = 1 / 0,
                this.max.x = this.max.y = -(1 / 0),
                this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y
            },
            center: function(e) {
                var t = e || new r.Vector2;
                return t.addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(e) {
                var t = e || new r.Vector2;
                return t.subVectors(this.max, this.min)
            },
            expandByPoint: function(e) {
                return this.min.min(e),
                this.max.max(e),
                this
            },
            expandByVector: function(e) {
                return this.min.sub(e),
                this.max.add(e),
                this
            },
            expandByScalar: function(e) {
                return this.min.addScalar(-e),
                this.max.addScalar(e),
                this
            },
            containsPoint: function(e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y ? !1 : !0
            },
            containsBox: function(e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y ? !0 : !1
            },
            getParameter: function(e, t) {
                var n = t || new r.Vector2;
                return n.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
            },
            isIntersectionBox: function(e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y ? !1 : !0
            },
            clampPoint: function(e, t) {
                var n = t || new r.Vector2;
                return n.copy(e).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var e = new r.Vector2;
                return function(t) {
                    var n = e.copy(t).clamp(this.min, this.max);
                    return n.sub(t).length()
                }
            }(),
            intersect: function(e) {
                return this.min.max(e.min),
                this.max.min(e.max),
                this
            },
            union: function(e) {
                return this.min.min(e.min),
                this.max.max(e.max),
                this
            },
            translate: function(e) {
                return this.min.add(e),
                this.max.add(e),
                this
            },
            equals: function(e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            },
            clone: function() {
                return (new r.Box2).copy(this)
            }
        },
        r.Box3 = function(e, t) {
            this.min = void 0 !== e ? e : new r.Vector3(1 / 0,1 / 0,1 / 0),
            this.max = void 0 !== t ? t : new r.Vector3(-(1 / 0),-(1 / 0),-(1 / 0))
        }
        ,
        r.Box3.prototype = {
            constructor: r.Box3,
            set: function(e, t) {
                return this.min.copy(e),
                this.max.copy(t),
                this
            },
            setFromPoints: function(e) {
                this.makeEmpty();
                for (var t = 0, n = e.length; n > t; t++)
                    this.expandByPoint(e[t]);
                return this
            },
            setFromCenterAndSize: function() {
                var e = new r.Vector3;
                return function(t, n) {
                    var i = e.copy(n).multiplyScalar(.5);
                    return this.min.copy(t).sub(i),
                    this.max.copy(t).add(i),
                    this
                }
            }(),
            setFromObject: function() {
                var e = new r.Vector3;
                return function(t) {
                    var n = this;
                    return t.updateMatrixWorld(!0),
                    this.makeEmpty(),
                    t.traverse(function(t) {
                        var i = t.geometry;
                        if (void 0 !== i)
                            if (i instanceof r.Geometry)
                                for (var o = i.vertices, a = 0, s = o.length; s > a; a++)
                                    e.copy(o[a]),
                                    e.applyMatrix4(t.matrixWorld),
                                    n.expandByPoint(e);
                            else if (i instanceof r.BufferGeometry && void 0 !== i.attributes.position)
                                for (var l = i.attributes.position.array, a = 0, s = l.length; s > a; a += 3)
                                    e.set(l[a], l[a + 1], l[a + 2]),
                                    e.applyMatrix4(t.matrixWorld),
                                    n.expandByPoint(e)
                    }),
                    this
                }
            }(),
            copy: function(e) {
                return this.min.copy(e.min),
                this.max.copy(e.max),
                this
            },
            makeEmpty: function() {
                return this.min.x = this.min.y = this.min.z = 1 / 0,
                this.max.x = this.max.y = this.max.z = -(1 / 0),
                this
            },
            empty: function() {
                return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
            },
            center: function(e) {
                var t = e || new r.Vector3;
                return t.addVectors(this.min, this.max).multiplyScalar(.5)
            },
            size: function(e) {
                var t = e || new r.Vector3;
                return t.subVectors(this.max, this.min)
            },
            expandByPoint: function(e) {
                return this.min.min(e),
                this.max.max(e),
                this
            },
            expandByVector: function(e) {
                return this.min.sub(e),
                this.max.add(e),
                this
            },
            expandByScalar: function(e) {
                return this.min.addScalar(-e),
                this.max.addScalar(e),
                this
            },
            containsPoint: function(e) {
                return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z ? !1 : !0
            },
            containsBox: function(e) {
                return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z ? !0 : !1
            },
            getParameter: function(e, t) {
                var n = t || new r.Vector3;
                return n.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
            },
            isIntersectionBox: function(e) {
                return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z ? !1 : !0
            },
            clampPoint: function(e, t) {
                var n = t || new r.Vector3;
                return n.copy(e).clamp(this.min, this.max)
            },
            distanceToPoint: function() {
                var e = new r.Vector3;
                return function(t) {
                    var n = e.copy(t).clamp(this.min, this.max);
                    return n.sub(t).length()
                }
            }(),
            getBoundingSphere: function() {
                var e = new r.Vector3;
                return function(t) {
                    var n = t || new r.Sphere;
                    return n.center = this.center(),
                    n.radius = .5 * this.size(e).length(),
                    n
                }
            }(),
            intersect: function(e) {
                return this.min.max(e.min),
                this.max.min(e.max),
                this
            },
            union: function(e) {
                return this.min.min(e.min),
                this.max.max(e.max),
                this
            },
            applyMatrix4: function() {
                var e = [new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3, new r.Vector3];
                return function(t) {
                    return e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
                    e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
                    e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
                    e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
                    e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
                    e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
                    e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
                    e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
                    this.makeEmpty(),
                    this.setFromPoints(e),
                    this
                }
            }(),
            translate: function(e) {
                return this.min.add(e),
                this.max.add(e),
                this
            },
            equals: function(e) {
                return e.min.equals(this.min) && e.max.equals(this.max)
            },
            clone: function() {
                return (new r.Box3).copy(this)
            }
        },
        r.Matrix3 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]),
            arguments.length > 0 && r.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
        }
        ,
        r.Matrix3.prototype = {
            constructor: r.Matrix3,
            set: function(e, t, n, i, r, o, a, s, l) {
                var c = this.elements;
                return c[0] = e,
                c[3] = t,
                c[6] = n,
                c[1] = i,
                c[4] = r,
                c[7] = o,
                c[2] = a,
                c[5] = s,
                c[8] = l,
                this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1),
                this
            },
            copy: function(e) {
                var t = e.elements;
                return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]),
                this
            },
            multiplyVector3: function(e) {
                return r.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),
                e.applyMatrix3(this)
            },
            multiplyVector3Array: function(e) {
                return r.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                this.applyToVector3Array(e)
            },
            applyToVector3Array: function() {
                var e = new r.Vector3;
                return function(t, n, i) {
                    void 0 === n && (n = 0),
                    void 0 === i && (i = t.length);
                    for (var r = 0, o = n; i > r; r += 3,
                    o += 3)
                        e.x = t[o],
                        e.y = t[o + 1],
                        e.z = t[o + 2],
                        e.applyMatrix3(this),
                        t[o] = e.x,
                        t[o + 1] = e.y,
                        t[o + 2] = e.z;
                    return t
                }
            }(),
            multiplyScalar: function(e) {
                var t = this.elements;
                return t[0] *= e,
                t[3] *= e,
                t[6] *= e,
                t[1] *= e,
                t[4] *= e,
                t[7] *= e,
                t[2] *= e,
                t[5] *= e,
                t[8] *= e,
                this
            },
            determinant: function() {
                var e = this.elements
                  , t = e[0]
                  , n = e[1]
                  , i = e[2]
                  , r = e[3]
                  , o = e[4]
                  , a = e[5]
                  , s = e[6]
                  , l = e[7]
                  , c = e[8];
                return t * o * c - t * a * l - n * r * c + n * a * s + i * r * l - i * o * s
            },
            getInverse: function(e, t) {
                var n = e.elements
                  , i = this.elements;
                i[0] = n[10] * n[5] - n[6] * n[9],
                i[1] = -n[10] * n[1] + n[2] * n[9],
                i[2] = n[6] * n[1] - n[2] * n[5],
                i[3] = -n[10] * n[4] + n[6] * n[8],
                i[4] = n[10] * n[0] - n[2] * n[8],
                i[5] = -n[6] * n[0] + n[2] * n[4],
                i[6] = n[9] * n[4] - n[5] * n[8],
                i[7] = -n[9] * n[0] + n[1] * n[8],
                i[8] = n[5] * n[0] - n[1] * n[4];
                var o = n[0] * i[0] + n[1] * i[3] + n[2] * i[6];
                if (0 === o) {
                    var a = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
                    if (t)
                        throw new Error(a);
                    return r.warn(a),
                    this.identity(),
                    this
                }
                return this.multiplyScalar(1 / o),
                this
            },
            transpose: function() {
                var e, t = this.elements;
                return e = t[1],
                t[1] = t[3],
                t[3] = e,
                e = t[2],
                t[2] = t[6],
                t[6] = e,
                e = t[5],
                t[5] = t[7],
                t[7] = e,
                this
            },
            flattenToArrayOffset: function(e, t) {
                var n = this.elements;
                return e[t] = n[0],
                e[t + 1] = n[1],
                e[t + 2] = n[2],
                e[t + 3] = n[3],
                e[t + 4] = n[4],
                e[t + 5] = n[5],
                e[t + 6] = n[6],
                e[t + 7] = n[7],
                e[t + 8] = n[8],
                e
            },
            getNormalMatrix: function(e) {
                return this.getInverse(e).transpose(),
                this
            },
            transposeIntoArray: function(e) {
                var t = this.elements;
                return e[0] = t[0],
                e[1] = t[3],
                e[2] = t[6],
                e[3] = t[1],
                e[4] = t[4],
                e[5] = t[7],
                e[6] = t[2],
                e[7] = t[5],
                e[8] = t[8],
                this
            },
            fromArray: function(e) {
                return this.elements.set(e),
                this
            },
            toArray: function() {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]]
            },
            clone: function() {
                return (new r.Matrix3).fromArray(this.elements)
            }
        },
        r.Matrix4 = function() {
            this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
            arguments.length > 0 && r.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
        }
        ,
        r.Matrix4.prototype = {
            constructor: r.Matrix4,
            set: function(e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m) {
                var v = this.elements;
                return v[0] = e,
                v[4] = t,
                v[8] = n,
                v[12] = i,
                v[1] = r,
                v[5] = o,
                v[9] = a,
                v[13] = s,
                v[2] = l,
                v[6] = c,
                v[10] = u,
                v[14] = h,
                v[3] = d,
                v[7] = f,
                v[11] = p,
                v[15] = m,
                this
            },
            identity: function() {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                this
            },
            copy: function(e) {
                return this.elements.set(e.elements),
                this
            },
            extractPosition: function(e) {
                return r.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),
                this.copyPosition(e)
            },
            copyPosition: function(e) {
                var t = this.elements
                  , n = e.elements;
                return t[12] = n[12],
                t[13] = n[13],
                t[14] = n[14],
                this
            },
            extractBasis: function(e, t, n) {
                var i = this.elements;
                return e.set(i[0], i[1], i[2]),
                t.set(i[4], i[5], i[6]),
                n.set(i[8], i[9], i[10]),
                this
            },
            makeBasis: function(e, t, n) {
                return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1),
                this
            },
            extractRotation: function() {
                var e = new r.Vector3;
                return function(t) {
                    var n = this.elements
                      , i = t.elements
                      , r = 1 / e.set(i[0], i[1], i[2]).length()
                      , o = 1 / e.set(i[4], i[5], i[6]).length()
                      , a = 1 / e.set(i[8], i[9], i[10]).length();
                    return n[0] = i[0] * r,
                    n[1] = i[1] * r,
                    n[2] = i[2] * r,
                    n[4] = i[4] * o,
                    n[5] = i[5] * o,
                    n[6] = i[6] * o,
                    n[8] = i[8] * a,
                    n[9] = i[9] * a,
                    n[10] = i[10] * a,
                    this
                }
            }(),
            makeRotationFromEuler: function(e) {
                e instanceof r.Euler == !1 && r.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
                var t = this.elements
                  , n = e.x
                  , i = e.y
                  , o = e.z
                  , a = Math.cos(n)
                  , s = Math.sin(n)
                  , l = Math.cos(i)
                  , c = Math.sin(i)
                  , u = Math.cos(o)
                  , h = Math.sin(o);
                if ("XYZ" === e.order) {
                    var d = a * u
                      , f = a * h
                      , p = s * u
                      , m = s * h;
                    t[0] = l * u,
                    t[4] = -l * h,
                    t[8] = c,
                    t[1] = f + p * c,
                    t[5] = d - m * c,
                    t[9] = -s * l,
                    t[2] = m - d * c,
                    t[6] = p + f * c,
                    t[10] = a * l
                } else if ("YXZ" === e.order) {
                    var v = l * u
                      , g = l * h
                      , y = c * u
                      , b = c * h;
                    t[0] = v + b * s,
                    t[4] = y * s - g,
                    t[8] = a * c,
                    t[1] = a * h,
                    t[5] = a * u,
                    t[9] = -s,
                    t[2] = g * s - y,
                    t[6] = b + v * s,
                    t[10] = a * l
                } else if ("ZXY" === e.order) {
                    var v = l * u
                      , g = l * h
                      , y = c * u
                      , b = c * h;
                    t[0] = v - b * s,
                    t[4] = -a * h,
                    t[8] = y + g * s,
                    t[1] = g + y * s,
                    t[5] = a * u,
                    t[9] = b - v * s,
                    t[2] = -a * c,
                    t[6] = s,
                    t[10] = a * l
                } else if ("ZYX" === e.order) {
                    var d = a * u
                      , f = a * h
                      , p = s * u
                      , m = s * h;
                    t[0] = l * u,
                    t[4] = p * c - f,
                    t[8] = d * c + m,
                    t[1] = l * h,
                    t[5] = m * c + d,
                    t[9] = f * c - p,
                    t[2] = -c,
                    t[6] = s * l,
                    t[10] = a * l
                } else if ("YZX" === e.order) {
                    var x = a * l
                      , w = a * c
                      , _ = s * l
                      , S = s * c;
                    t[0] = l * u,
                    t[4] = S - x * h,
                    t[8] = _ * h + w,
                    t[1] = h,
                    t[5] = a * u,
                    t[9] = -s * u,
                    t[2] = -c * u,
                    t[6] = w * h + _,
                    t[10] = x - S * h
                } else if ("XZY" === e.order) {
                    var x = a * l
                      , w = a * c
                      , _ = s * l
                      , S = s * c;
                    t[0] = l * u,
                    t[4] = -h,
                    t[8] = c * u,
                    t[1] = x * h + S,
                    t[5] = a * u,
                    t[9] = w * h - _,
                    t[2] = _ * h - w,
                    t[6] = s * u,
                    t[10] = S * h + x
                }
                return t[3] = 0,
                t[7] = 0,
                t[11] = 0,
                t[12] = 0,
                t[13] = 0,
                t[14] = 0,
                t[15] = 1,
                this
            },
            setRotationFromQuaternion: function(e) {
                return r.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),
                this.makeRotationFromQuaternion(e)
            },
            makeRotationFromQuaternion: function(e) {
                var t = this.elements
                  , n = e.x
                  , i = e.y
                  , r = e.z
                  , o = e.w
                  , a = n + n
                  , s = i + i
                  , l = r + r
                  , c = n * a
                  , u = n * s
                  , h = n * l
                  , d = i * s
                  , f = i * l
                  , p = r * l
                  , m = o * a
                  , v = o * s
                  , g = o * l;
                return t[0] = 1 - (d + p),
                t[4] = u - g,
                t[8] = h + v,
                t[1] = u + g,
                t[5] = 1 - (c + p),
                t[9] = f - m,
                t[2] = h - v,
                t[6] = f + m,
                t[10] = 1 - (c + d),
                t[3] = 0,
                t[7] = 0,
                t[11] = 0,
                t[12] = 0,
                t[13] = 0,
                t[14] = 0,
                t[15] = 1,
                this
            },
            lookAt: function() {
                var e = new r.Vector3
                  , t = new r.Vector3
                  , n = new r.Vector3;
                return function(i, r, o) {
                    var a = this.elements;
                    return n.subVectors(i, r).normalize(),
                    0 === n.length() && (n.z = 1),
                    e.crossVectors(o, n).normalize(),
                    0 === e.length() && (n.x += 1e-4,
                    e.crossVectors(o, n).normalize()),
                    t.crossVectors(n, e),
                    a[0] = e.x,
                    a[4] = t.x,
                    a[8] = n.x,
                    a[1] = e.y,
                    a[5] = t.y,
                    a[9] = n.y,
                    a[2] = e.z,
                    a[6] = t.z,
                    a[10] = n.z,
                    this
                }
            }(),
            multiply: function(e, t) {
                return void 0 !== t ? (r.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),
                this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
            },
            multiplyMatrices: function(e, t) {
                var n = e.elements
                  , i = t.elements
                  , r = this.elements
                  , o = n[0]
                  , a = n[4]
                  , s = n[8]
                  , l = n[12]
                  , c = n[1]
                  , u = n[5]
                  , h = n[9]
                  , d = n[13]
                  , f = n[2]
                  , p = n[6]
                  , m = n[10]
                  , v = n[14]
                  , g = n[3]
                  , y = n[7]
                  , b = n[11]
                  , x = n[15]
                  , w = i[0]
                  , _ = i[4]
                  , S = i[8]
                  , M = i[12]
                  , C = i[1]
                  , T = i[5]
                  , E = i[9]
                  , k = i[13]
                  , A = i[2]
                  , P = i[6]
                  , L = i[10]
                  , O = i[14]
                  , R = i[3]
                  , F = i[7]
                  , B = i[11]
                  , D = i[15];
                return r[0] = o * w + a * C + s * A + l * R,
                r[4] = o * _ + a * T + s * P + l * F,
                r[8] = o * S + a * E + s * L + l * B,
                r[12] = o * M + a * k + s * O + l * D,
                r[1] = c * w + u * C + h * A + d * R,
                r[5] = c * _ + u * T + h * P + d * F,
                r[9] = c * S + u * E + h * L + d * B,
                r[13] = c * M + u * k + h * O + d * D,
                r[2] = f * w + p * C + m * A + v * R,
                r[6] = f * _ + p * T + m * P + v * F,
                r[10] = f * S + p * E + m * L + v * B,
                r[14] = f * M + p * k + m * O + v * D,
                r[3] = g * w + y * C + b * A + x * R,
                r[7] = g * _ + y * T + b * P + x * F,
                r[11] = g * S + y * E + b * L + x * B,
                r[15] = g * M + y * k + b * O + x * D,
                this
            },
            multiplyToArray: function(e, t, n) {
                var i = this.elements;
                return this.multiplyMatrices(e, t),
                n[0] = i[0],
                n[1] = i[1],
                n[2] = i[2],
                n[3] = i[3],
                n[4] = i[4],
                n[5] = i[5],
                n[6] = i[6],
                n[7] = i[7],
                n[8] = i[8],
                n[9] = i[9],
                n[10] = i[10],
                n[11] = i[11],
                n[12] = i[12],
                n[13] = i[13],
                n[14] = i[14],
                n[15] = i[15],
                this
            },
            multiplyScalar: function(e) {
                var t = this.elements;
                return t[0] *= e,
                t[4] *= e,
                t[8] *= e,
                t[12] *= e,
                t[1] *= e,
                t[5] *= e,
                t[9] *= e,
                t[13] *= e,
                t[2] *= e,
                t[6] *= e,
                t[10] *= e,
                t[14] *= e,
                t[3] *= e,
                t[7] *= e,
                t[11] *= e,
                t[15] *= e,
                this
            },
            multiplyVector3: function(e) {
                return r.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),
                e.applyProjection(this)
            },
            multiplyVector4: function(e) {
                return r.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                e.applyMatrix4(this)
            },
            multiplyVector3Array: function(e) {
                return r.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
                this.applyToVector3Array(e)
            },
            applyToVector3Array: function() {
                var e = new r.Vector3;
                return function(t, n, i) {
                    void 0 === n && (n = 0),
                    void 0 === i && (i = t.length);
                    for (var r = 0, o = n; i > r; r += 3,
                    o += 3)
                        e.x = t[o],
                        e.y = t[o + 1],
                        e.z = t[o + 2],
                        e.applyMatrix4(this),
                        t[o] = e.x,
                        t[o + 1] = e.y,
                        t[o + 2] = e.z;
                    return t
                }
            }(),
            rotateAxis: function(e) {
                r.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),
                e.transformDirection(this)
            },
            crossVector: function(e) {
                return r.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),
                e.applyMatrix4(this)
            },
            determinant: function() {
                var e = this.elements
                  , t = e[0]
                  , n = e[4]
                  , i = e[8]
                  , r = e[12]
                  , o = e[1]
                  , a = e[5]
                  , s = e[9]
                  , l = e[13]
                  , c = e[2]
                  , u = e[6]
                  , h = e[10]
                  , d = e[14]
                  , f = e[3]
                  , p = e[7]
                  , m = e[11]
                  , v = e[15];
                return f * (+r * s * u - i * l * u - r * a * h + n * l * h + i * a * d - n * s * d) + p * (+t * s * d - t * l * h + r * o * h - i * o * d + i * l * c - r * s * c) + m * (+t * l * u - t * a * d - r * o * u + n * o * d + r * a * c - n * l * c) + v * (-i * a * c - t * s * u + t * a * h + i * o * u - n * o * h + n * s * c)
            },
            transpose: function() {
                var e, t = this.elements;
                return e = t[1],
                t[1] = t[4],
                t[4] = e,
                e = t[2],
                t[2] = t[8],
                t[8] = e,
                e = t[6],
                t[6] = t[9],
                t[9] = e,
                e = t[3],
                t[3] = t[12],
                t[12] = e,
                e = t[7],
                t[7] = t[13],
                t[13] = e,
                e = t[11],
                t[11] = t[14],
                t[14] = e,
                this
            },
            flattenToArrayOffset: function(e, t) {
                var n = this.elements;
                return e[t] = n[0],
                e[t + 1] = n[1],
                e[t + 2] = n[2],
                e[t + 3] = n[3],
                e[t + 4] = n[4],
                e[t + 5] = n[5],
                e[t + 6] = n[6],
                e[t + 7] = n[7],
                e[t + 8] = n[8],
                e[t + 9] = n[9],
                e[t + 10] = n[10],
                e[t + 11] = n[11],
                e[t + 12] = n[12],
                e[t + 13] = n[13],
                e[t + 14] = n[14],
                e[t + 15] = n[15],
                e
            },
            getPosition: function() {
                var e = new r.Vector3;
                return function() {
                    r.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
                    var t = this.elements;
                    return e.set(t[12], t[13], t[14])
                }
            }(),
            setPosition: function(e) {
                var t = this.elements;
                return t[12] = e.x,
                t[13] = e.y,
                t[14] = e.z,
                this
            },
            getInverse: function(e, t) {
                var n = this.elements
                  , i = e.elements
                  , o = i[0]
                  , a = i[4]
                  , s = i[8]
                  , l = i[12]
                  , c = i[1]
                  , u = i[5]
                  , h = i[9]
                  , d = i[13]
                  , f = i[2]
                  , p = i[6]
                  , m = i[10]
                  , v = i[14]
                  , g = i[3]
                  , y = i[7]
                  , b = i[11]
                  , x = i[15];
                n[0] = h * v * y - d * m * y + d * p * b - u * v * b - h * p * x + u * m * x,
                n[4] = l * m * y - s * v * y - l * p * b + a * v * b + s * p * x - a * m * x,
                n[8] = s * d * y - l * h * y + l * u * b - a * d * b - s * u * x + a * h * x,
                n[12] = l * h * p - s * d * p - l * u * m + a * d * m + s * u * v - a * h * v,
                n[1] = d * m * g - h * v * g - d * f * b + c * v * b + h * f * x - c * m * x,
                n[5] = s * v * g - l * m * g + l * f * b - o * v * b - s * f * x + o * m * x,
                n[9] = l * h * g - s * d * g - l * c * b + o * d * b + s * c * x - o * h * x,
                n[13] = s * d * f - l * h * f + l * c * m - o * d * m - s * c * v + o * h * v,
                n[2] = u * v * g - d * p * g + d * f * y - c * v * y - u * f * x + c * p * x,
                n[6] = l * p * g - a * v * g - l * f * y + o * v * y + a * f * x - o * p * x,
                n[10] = a * d * g - l * u * g + l * c * y - o * d * y - a * c * x + o * u * x,
                n[14] = l * u * f - a * d * f - l * c * p + o * d * p + a * c * v - o * u * v,
                n[3] = h * p * g - u * m * g - h * f * y + c * m * y + u * f * b - c * p * b,
                n[7] = a * m * g - s * p * g + s * f * y - o * m * y - a * f * b + o * p * b,
                n[11] = s * u * g - a * h * g - s * c * y + o * h * y + a * c * b - o * u * b,
                n[15] = a * h * f - s * u * f + s * c * p - o * h * p - a * c * m + o * u * m;
                var w = o * n[0] + c * n[4] + f * n[8] + g * n[12];
                if (0 == w) {
                    var _ = "THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";
                    if (t)
                        throw new Error(_);
                    return r.warn(_),
                    this.identity(),
                    this
                }
                return this.multiplyScalar(1 / w),
                this
            },
            translate: function(e) {
                r.error("THREE.Matrix4: .translate() has been removed.")
            },
            rotateX: function(e) {
                r.error("THREE.Matrix4: .rotateX() has been removed.")
            },
            rotateY: function(e) {
                r.error("THREE.Matrix4: .rotateY() has been removed.")
            },
            rotateZ: function(e) {
                r.error("THREE.Matrix4: .rotateZ() has been removed.")
            },
            rotateByAxis: function(e, t) {
                r.error("THREE.Matrix4: .rotateByAxis() has been removed.")
            },
            scale: function(e) {
                var t = this.elements
                  , n = e.x
                  , i = e.y
                  , r = e.z;
                return t[0] *= n,
                t[4] *= i,
                t[8] *= r,
                t[1] *= n,
                t[5] *= i,
                t[9] *= r,
                t[2] *= n,
                t[6] *= i,
                t[10] *= r,
                t[3] *= n,
                t[7] *= i,
                t[11] *= r,
                this
            },
            getMaxScaleOnAxis: function() {
                var e = this.elements
                  , t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2]
                  , n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6]
                  , i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
                return Math.sqrt(Math.max(t, Math.max(n, i)))
            },
            makeTranslation: function(e, t, n) {
                return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1),
                this
            },
            makeRotationX: function(e) {
                var t = Math.cos(e)
                  , n = Math.sin(e);
                return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1),
                this
            },
            makeRotationY: function(e) {
                var t = Math.cos(e)
                  , n = Math.sin(e);
                return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1),
                this
            },
            makeRotationZ: function(e) {
                var t = Math.cos(e)
                  , n = Math.sin(e);
                return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
                this
            },
            makeRotationAxis: function(e, t) {
                var n = Math.cos(t)
                  , i = Math.sin(t)
                  , r = 1 - n
                  , o = e.x
                  , a = e.y
                  , s = e.z
                  , l = r * o
                  , c = r * a;
                return this.set(l * o + n, l * a - i * s, l * s + i * a, 0, l * a + i * s, c * a + n, c * s - i * o, 0, l * s - i * a, c * s + i * o, r * s * s + n, 0, 0, 0, 0, 1),
                this
            },
            makeScale: function(e, t, n) {
                return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1),
                this
            },
            compose: function(e, t, n) {
                return this.makeRotationFromQuaternion(t),
                this.scale(n),
                this.setPosition(e),
                this
            },
            decompose: function() {
                var e = new r.Vector3
                  , t = new r.Matrix4;
                return function(n, i, r) {
                    var o = this.elements
                      , a = e.set(o[0], o[1], o[2]).length()
                      , s = e.set(o[4], o[5], o[6]).length()
                      , l = e.set(o[8], o[9], o[10]).length()
                      , c = this.determinant();
                    0 > c && (a = -a),
                    n.x = o[12],
                    n.y = o[13],
                    n.z = o[14],
                    t.elements.set(this.elements);
                    var u = 1 / a
                      , h = 1 / s
                      , d = 1 / l;
                    return t.elements[0] *= u,
                    t.elements[1] *= u,
                    t.elements[2] *= u,
                    t.elements[4] *= h,
                    t.elements[5] *= h,
                    t.elements[6] *= h,
                    t.elements[8] *= d,
                    t.elements[9] *= d,
                    t.elements[10] *= d,
                    i.setFromRotationMatrix(t),
                    r.x = a,
                    r.y = s,
                    r.z = l,
                    this
                }
            }(),
            makeFrustum: function(e, t, n, i, r, o) {
                var a = this.elements
                  , s = 2 * r / (t - e)
                  , l = 2 * r / (i - n)
                  , c = (t + e) / (t - e)
                  , u = (i + n) / (i - n)
                  , h = -(o + r) / (o - r)
                  , d = -2 * o * r / (o - r);
                return a[0] = s,
                a[4] = 0,
                a[8] = c,
                a[12] = 0,
                a[1] = 0,
                a[5] = l,
                a[9] = u,
                a[13] = 0,
                a[2] = 0,
                a[6] = 0,
                a[10] = h,
                a[14] = d,
                a[3] = 0,
                a[7] = 0,
                a[11] = -1,
                a[15] = 0,
                this
            },
            makePerspective: function(e, t, n, i) {
                var o = n * Math.tan(r.Math.degToRad(.5 * e))
                  , a = -o
                  , s = a * t
                  , l = o * t;
                return this.makeFrustum(s, l, a, o, n, i)
            },
            makeOrthographic: function(e, t, n, i, r, o) {
                var a = this.elements
                  , s = t - e
                  , l = n - i
                  , c = o - r
                  , u = (t + e) / s
                  , h = (n + i) / l
                  , d = (o + r) / c;
                return a[0] = 2 / s,
                a[4] = 0,
                a[8] = 0,
                a[12] = -u,
                a[1] = 0,
                a[5] = 2 / l,
                a[9] = 0,
                a[13] = -h,
                a[2] = 0,
                a[6] = 0,
                a[10] = -2 / c,
                a[14] = -d,
                a[3] = 0,
                a[7] = 0,
                a[11] = 0,
                a[15] = 1,
                this
            },
            fromArray: function(e) {
                return this.elements.set(e),
                this
            },
            toArray: function() {
                var e = this.elements;
                return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
            },
            clone: function() {
                return (new r.Matrix4).fromArray(this.elements)
            }
        },
        r.Ray = function(e, t) {
            this.origin = void 0 !== e ? e : new r.Vector3,
            this.direction = void 0 !== t ? t : new r.Vector3
        }
        ,
        r.Ray.prototype = {
            constructor: r.Ray,
            set: function(e, t) {
                return this.origin.copy(e),
                this.direction.copy(t),
                this
            },
            copy: function(e) {
                return this.origin.copy(e.origin),
                this.direction.copy(e.direction),
                this
            },
            at: function(e, t) {
                var n = t || new r.Vector3;
                return n.copy(this.direction).multiplyScalar(e).add(this.origin)
            },
            recast: function() {
                var e = new r.Vector3;
                return function(t) {
                    return this.origin.copy(this.at(t, e)),
                    this
                }
            }(),
            closestPointToPoint: function(e, t) {
                var n = t || new r.Vector3;
                n.subVectors(e, this.origin);
                var i = n.dot(this.direction);
                return 0 > i ? n.copy(this.origin) : n.copy(this.direction).multiplyScalar(i).add(this.origin)
            },
            distanceToPoint: function() {
                var e = new r.Vector3;
                return function(t) {
                    var n = e.subVectors(t, this.origin).dot(this.direction);
                    return 0 > n ? this.origin.distanceTo(t) : (e.copy(this.direction).multiplyScalar(n).add(this.origin),
                    e.distanceTo(t))
                }
            }(),
            distanceSqToSegment: function() {
                var e = new r.Vector3
                  , t = new r.Vector3
                  , n = new r.Vector3;
                return function(i, r, o, a) {
                    e.copy(i).add(r).multiplyScalar(.5),
                    t.copy(r).sub(i).normalize(),
                    n.copy(this.origin).sub(e);
                    var s, l, c, u, h = .5 * i.distanceTo(r), d = -this.direction.dot(t), f = n.dot(this.direction), p = -n.dot(t), m = n.lengthSq(), v = Math.abs(1 - d * d);
                    if (v > 0)
                        if (s = d * p - f,
                        l = d * f - p,
                        u = h * v,
                        s >= 0)
                            if (l >= -u)
                                if (u >= l) {
                                    var g = 1 / v;
                                    s *= g,
                                    l *= g,
                                    c = s * (s + d * l + 2 * f) + l * (d * s + l + 2 * p) + m
                                } else
                                    l = h,
                                    s = Math.max(0, -(d * l + f)),
                                    c = -s * s + l * (l + 2 * p) + m;
                            else
                                l = -h,
                                s = Math.max(0, -(d * l + f)),
                                c = -s * s + l * (l + 2 * p) + m;
                        else
                            -u >= l ? (s = Math.max(0, -(-d * h + f)),
                            l = s > 0 ? -h : Math.min(Math.max(-h, -p), h),
                            c = -s * s + l * (l + 2 * p) + m) : u >= l ? (s = 0,
                            l = Math.min(Math.max(-h, -p), h),
                            c = l * (l + 2 * p) + m) : (s = Math.max(0, -(d * h + f)),
                            l = s > 0 ? h : Math.min(Math.max(-h, -p), h),
                            c = -s * s + l * (l + 2 * p) + m);
                    else
                        l = d > 0 ? -h : h,
                        s = Math.max(0, -(d * l + f)),
                        c = -s * s + l * (l + 2 * p) + m;
                    return o && o.copy(this.direction).multiplyScalar(s).add(this.origin),
                    a && a.copy(t).multiplyScalar(l).add(e),
                    c
                }
            }(),
            isIntersectionSphere: function(e) {
                return this.distanceToPoint(e.center) <= e.radius
            },
            intersectSphere: function() {
                var e = new r.Vector3;
                return function(t, n) {
                    e.subVectors(t.center, this.origin);
                    var i = e.dot(this.direction)
                      , r = e.dot(e) - i * i
                      , o = t.radius * t.radius;
                    if (r > o)
                        return null;
                    var a = Math.sqrt(o - r)
                      , s = i - a
                      , l = i + a;
                    return 0 > s && 0 > l ? null : 0 > s ? this.at(l, n) : this.at(s, n)
                }
            }(),
            isIntersectionPlane: function(e) {
                var t = e.distanceToPoint(this.origin);
                if (0 === t)
                    return !0;
                var n = e.normal.dot(this.direction);
                return 0 > n * t ? !0 : !1
            },
            distanceToPlane: function(e) {
                var t = e.normal.dot(this.direction);
                if (0 == t)
                    return 0 == e.distanceToPoint(this.origin) ? 0 : null;
                var n = -(this.origin.dot(e.normal) + e.constant) / t;
                return n >= 0 ? n : null
            },
            intersectPlane: function(e, t) {
                var n = this.distanceToPlane(e);
                return null === n ? null : this.at(n, t)
            },
            isIntersectionBox: function() {
                var e = new r.Vector3;
                return function(t) {
                    return null !== this.intersectBox(t, e)
                }
            }(),
            intersectBox: function(e, t) {
                var n, i, r, o, a, s, l = 1 / this.direction.x, c = 1 / this.direction.y, u = 1 / this.direction.z, h = this.origin;
                return l >= 0 ? (n = (e.min.x - h.x) * l,
                i = (e.max.x - h.x) * l) : (n = (e.max.x - h.x) * l,
                i = (e.min.x - h.x) * l),
                c >= 0 ? (r = (e.min.y - h.y) * c,
                o = (e.max.y - h.y) * c) : (r = (e.max.y - h.y) * c,
                o = (e.min.y - h.y) * c),
                n > o || r > i ? null : ((r > n || n !== n) && (n = r),
                (i > o || i !== i) && (i = o),
                u >= 0 ? (a = (e.min.z - h.z) * u,
                s = (e.max.z - h.z) * u) : (a = (e.max.z - h.z) * u,
                s = (e.min.z - h.z) * u),
                n > s || a > i ? null : ((a > n || n !== n) && (n = a),
                (i > s || i !== i) && (i = s),
                0 > i ? null : this.at(n >= 0 ? n : i, t)))
            },
            intersectTriangle: function() {
                var e = new r.Vector3
                  , t = new r.Vector3
                  , n = new r.Vector3
                  , i = new r.Vector3;
                return function(r, o, a, s, l) {
                    t.subVectors(o, r),
                    n.subVectors(a, r),
                    i.crossVectors(t, n);
                    var c, u = this.direction.dot(i);
                    if (u > 0) {
                        if (s)
                            return null;
                        c = 1
                    } else {
                        if (!(0 > u))
                            return null;
                        c = -1,
                        u = -u
                    }
                    e.subVectors(this.origin, r);
                    var h = c * this.direction.dot(n.crossVectors(e, n));
                    if (0 > h)
                        return null;
                    var d = c * this.direction.dot(t.cross(e));
                    if (0 > d)
                        return null;
                    if (h + d > u)
                        return null;
                    var f = -c * e.dot(i);
                    return 0 > f ? null : this.at(f / u, l)
                }
            }(),
            applyMatrix4: function(e) {
                return this.direction.add(this.origin).applyMatrix4(e),
                this.origin.applyMatrix4(e),
                this.direction.sub(this.origin),
                this.direction.normalize(),
                this
            },
            equals: function(e) {
                return e.origin.equals(this.origin) && e.direction.equals(this.direction)
            },
            clone: function() {
                return (new r.Ray).copy(this)
            }
        },
        r.Sphere = function(e, t) {
            this.center = void 0 !== e ? e : new r.Vector3,
            this.radius = void 0 !== t ? t : 0
        }
        ,
        r.Sphere.prototype = {
            constructor: r.Sphere,
            set: function(e, t) {
                return this.center.copy(e),
                this.radius = t,
                this
            },
            setFromPoints: function() {
                var e = new r.Box3;
                return function(t, n) {
                    var i = this.center;
                    void 0 !== n ? i.copy(n) : e.setFromPoints(t).center(i);
                    for (var r = 0, o = 0, a = t.length; a > o; o++)
                        r = Math.max(r, i.distanceToSquared(t[o]));
                    return this.radius = Math.sqrt(r),
                    this
                }
            }(),
            copy: function(e) {
                return this.center.copy(e.center),
                this.radius = e.radius,
                this
            },
            empty: function() {
                return this.radius <= 0
            },
            containsPoint: function(e) {
                return e.distanceToSquared(this.center) <= this.radius * this.radius
            },
            distanceToPoint: function(e) {
                return e.distanceTo(this.center) - this.radius
            },
            intersectsSphere: function(e) {
                var t = this.radius + e.radius;
                return e.center.distanceToSquared(this.center) <= t * t
            },
            clampPoint: function(e, t) {
                var n = this.center.distanceToSquared(e)
                  , i = t || new r.Vector3;
                return i.copy(e),
                n > this.radius * this.radius && (i.sub(this.center).normalize(),
                i.multiplyScalar(this.radius).add(this.center)),
                i
            },
            getBoundingBox: function(e) {
                var t = e || new r.Box3;
                return t.set(this.center, this.center),
                t.expandByScalar(this.radius),
                t
            },
            applyMatrix4: function(e) {
                return this.center.applyMatrix4(e),
                this.radius = this.radius * e.getMaxScaleOnAxis(),
                this
            },
            translate: function(e) {
                return this.center.add(e),
                this
            },
            equals: function(e) {
                return e.center.equals(this.center) && e.radius === this.radius
            },
            clone: function() {
                return (new r.Sphere).copy(this)
            }
        },
        r.Frustum = function(e, t, n, i, o, a) {
            this.planes = [void 0 !== e ? e : new r.Plane, void 0 !== t ? t : new r.Plane, void 0 !== n ? n : new r.Plane, void 0 !== i ? i : new r.Plane, void 0 !== o ? o : new r.Plane, void 0 !== a ? a : new r.Plane]
        }
        ,
        r.Frustum.prototype = {
            constructor: r.Frustum,
            set: function(e, t, n, i, r, o) {
                var a = this.planes;
                return a[0].copy(e),
                a[1].copy(t),
                a[2].copy(n),
                a[3].copy(i),
                a[4].copy(r),
                a[5].copy(o),
                this
            },
            copy: function(e) {
                for (var t = this.planes, n = 0; 6 > n; n++)
                    t[n].copy(e.planes[n]);
                return this
            },
            setFromMatrix: function(e) {
                var t = this.planes
                  , n = e.elements
                  , i = n[0]
                  , r = n[1]
                  , o = n[2]
                  , a = n[3]
                  , s = n[4]
                  , l = n[5]
                  , c = n[6]
                  , u = n[7]
                  , h = n[8]
                  , d = n[9]
                  , f = n[10]
                  , p = n[11]
                  , m = n[12]
                  , v = n[13]
                  , g = n[14]
                  , y = n[15];
                return t[0].setComponents(a - i, u - s, p - h, y - m).normalize(),
                t[1].setComponents(a + i, u + s, p + h, y + m).normalize(),
                t[2].setComponents(a + r, u + l, p + d, y + v).normalize(),
                t[3].setComponents(a - r, u - l, p - d, y - v).normalize(),
                t[4].setComponents(a - o, u - c, p - f, y - g).normalize(),
                t[5].setComponents(a + o, u + c, p + f, y + g).normalize(),
                this
            },
            intersectsObject: function() {
                var e = new r.Sphere;
                return function(t) {
                    var n = t.geometry;
                    return null === n.boundingSphere && n.computeBoundingSphere(),
                    e.copy(n.boundingSphere),
                    e.applyMatrix4(t.matrixWorld),
                    this.intersectsSphere(e)
                }
            }(),
            intersectsSphere: function(e) {
                for (var t = this.planes, n = e.center, i = -e.radius, r = 0; 6 > r; r++) {
                    var o = t[r].distanceToPoint(n);
                    if (i > o)
                        return !1
                }
                return !0
            },
            intersectsBox: function() {
                var e = new r.Vector3
                  , t = new r.Vector3;
                return function(n) {
                    for (var i = this.planes, r = 0; 6 > r; r++) {
                        var o = i[r];
                        e.x = o.normal.x > 0 ? n.min.x : n.max.x,
                        t.x = o.normal.x > 0 ? n.max.x : n.min.x,
                        e.y = o.normal.y > 0 ? n.min.y : n.max.y,
                        t.y = o.normal.y > 0 ? n.max.y : n.min.y,
                        e.z = o.normal.z > 0 ? n.min.z : n.max.z,
                        t.z = o.normal.z > 0 ? n.max.z : n.min.z;
                        var a = o.distanceToPoint(e)
                          , s = o.distanceToPoint(t);
                        if (0 > a && 0 > s)
                            return !1
                    }
                    return !0
                }
            }(),
            containsPoint: function(e) {
                for (var t = this.planes, n = 0; 6 > n; n++)
                    if (t[n].distanceToPoint(e) < 0)
                        return !1;
                return !0
            },
            clone: function() {
                return (new r.Frustum).copy(this)
            }
        },
        r.Plane = function(e, t) {
            this.normal = void 0 !== e ? e : new r.Vector3(1,0,0),
            this.constant = void 0 !== t ? t : 0
        }
        ,
        r.Plane.prototype = {
            constructor: r.Plane,
            set: function(e, t) {
                return this.normal.copy(e),
                this.constant = t,
                this
            },
            setComponents: function(e, t, n, i) {
                return this.normal.set(e, t, n),
                this.constant = i,
                this
            },
            setFromNormalAndCoplanarPoint: function(e, t) {
                return this.normal.copy(e),
                this.constant = -t.dot(this.normal),
                this
            },
            setFromCoplanarPoints: function() {
                var e = new r.Vector3
                  , t = new r.Vector3;
                return function(n, i, r) {
                    var o = e.subVectors(r, i).cross(t.subVectors(n, i)).normalize();
                    return this.setFromNormalAndCoplanarPoint(o, n),
                    this
                }
            }(),
            copy: function(e) {
                return this.normal.copy(e.normal),
                this.constant = e.constant,
                this
            },
            normalize: function() {
                var e = 1 / this.normal.length();
                return this.normal.multiplyScalar(e),
                this.constant *= e,
                this
            },
            negate: function() {
                return this.constant *= -1,
                this.normal.negate(),
                this
            },
            distanceToPoint: function(e) {
                return this.normal.dot(e) + this.constant
            },
            distanceToSphere: function(e) {
                return this.distanceToPoint(e.center) - e.radius
            },
            projectPoint: function(e, t) {
                return this.orthoPoint(e, t).sub(e).negate()
            },
            orthoPoint: function(e, t) {
                var n = this.distanceToPoint(e)
                  , i = t || new r.Vector3;
                return i.copy(this.normal).multiplyScalar(n)
            },
            isIntersectionLine: function(e) {
                var t = this.distanceToPoint(e.start)
                  , n = this.distanceToPoint(e.end);
                return 0 > t && n > 0 || 0 > n && t > 0
            },
            intersectLine: function() {
                var e = new r.Vector3;
                return function(t, n) {
                    var i = n || new r.Vector3
                      , o = t.delta(e)
                      , a = this.normal.dot(o);
                    if (0 == a)
                        return 0 == this.distanceToPoint(t.start) ? i.copy(t.start) : void 0;
                    var s = -(t.start.dot(this.normal) + this.constant) / a;
                    return 0 > s || s > 1 ? void 0 : i.copy(o).multiplyScalar(s).add(t.start)
                }
            }(),
            coplanarPoint: function(e) {
                var t = e || new r.Vector3;
                return t.copy(this.normal).multiplyScalar(-this.constant)
            },
            applyMatrix4: function() {
                var e = new r.Vector3
                  , t = new r.Vector3
                  , n = new r.Matrix3;
                return function(i, r) {
                    var o = r || n.getNormalMatrix(i)
                      , a = e.copy(this.normal).applyMatrix3(o)
                      , s = this.coplanarPoint(t);
                    return s.applyMatrix4(i),
                    this.setFromNormalAndCoplanarPoint(a, s),
                    this
                }
            }(),
            translate: function(e) {
                return this.constant = this.constant - e.dot(this.normal),
                this
            },
            equals: function(e) {
                return e.normal.equals(this.normal) && e.constant == this.constant
            },
            clone: function() {
                return (new r.Plane).copy(this)
            }
        },
        r.Math = {
            generateUUID: function() {
                var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), n = new Array(36), i = 0;
                return function() {
                    for (var r = 0; 36 > r; r++)
                        8 == r || 13 == r || 18 == r || 23 == r ? n[r] = "-" : 14 == r ? n[r] = "4" : (2 >= i && (i = 33554432 + 16777216 * Math.random() | 0),
                        e = 15 & i,
                        i >>= 4,
                        n[r] = t[19 == r ? 3 & e | 8 : e]);
                    return n.join("")
                }
            }(),
            clamp: function(e, t, n) {
                return t > e ? t : e > n ? n : e
            },
            clampBottom: function(e, t) {
                return t > e ? t : e
            },
            mapLinear: function(e, t, n, i, r) {
                return i + (e - t) * (r - i) / (n - t)
            },
            smoothstep: function(e, t, n) {
                return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t),
                e * e * (3 - 2 * e))
            },
            smootherstep: function(e, t, n) {
                return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t),
                e * e * e * (e * (6 * e - 15) + 10))
            },
            random16: function() {
                return (65280 * Math.random() + 255 * Math.random()) / 65535
            },
            randInt: function(e, t) {
                return Math.floor(this.randFloat(e, t))
            },
            randFloat: function(e, t) {
                return e + Math.random() * (t - e)
            },
            randFloatSpread: function(e) {
                return e * (.5 - Math.random())
            },
            degToRad: function() {
                var e = Math.PI / 180;
                return function(t) {
                    return t * e
                }
            }(),
            radToDeg: function() {
                var e = 180 / Math.PI;
                return function(t) {
                    return t * e
                }
            }(),
            isPowerOfTwo: function(e) {
                return 0 === (e & e - 1) && 0 !== e
            },
            nextPowerOfTwo: function(e) {
                return e--,
                e |= e >> 1,
                e |= e >> 2,
                e |= e >> 4,
                e |= e >> 8,
                e |= e >> 16,
                e++,
                e
            }
        },
        r.Spline = function(e) {
            function t(e, t, n, i, r, o, a) {
                var s = .5 * (n - e)
                  , l = .5 * (i - t);
                return (2 * (t - n) + s + l) * a + (-3 * (t - n) - 2 * s - l) * o + s * r + t
            }
            this.points = e;
            var n, i, o, a, s, l, c, u, h, d = [], f = {
                x: 0,
                y: 0,
                z: 0
            };
            this.initFromArray = function(e) {
                this.points = [];
                for (var t = 0; t < e.length; t++)
                    this.points[t] = {
                        x: e[t][0],
                        y: e[t][1],
                        z: e[t][2]
                    }
            }
            ,
            this.getPoint = function(e) {
                return n = (this.points.length - 1) * e,
                i = Math.floor(n),
                o = n - i,
                d[0] = 0 === i ? i : i - 1,
                d[1] = i,
                d[2] = i > this.points.length - 2 ? this.points.length - 1 : i + 1,
                d[3] = i > this.points.length - 3 ? this.points.length - 1 : i + 2,
                l = this.points[d[0]],
                c = this.points[d[1]],
                u = this.points[d[2]],
                h = this.points[d[3]],
                a = o * o,
                s = o * a,
                f.x = t(l.x, c.x, u.x, h.x, o, a, s),
                f.y = t(l.y, c.y, u.y, h.y, o, a, s),
                f.z = t(l.z, c.z, u.z, h.z, o, a, s),
                f
            }
            ,
            this.getControlPointsArray = function() {
                var e, t, n = this.points.length, i = [];
                for (e = 0; n > e; e++)
                    t = this.points[e],
                    i[e] = [t.x, t.y, t.z];
                return i
            }
            ,
            this.getLength = function(e) {
                var t, n, i, o, a = 0, s = 0, l = 0, c = new r.Vector3, u = new r.Vector3, h = [], d = 0;
                for (h[0] = 0,
                e || (e = 100),
                i = this.points.length * e,
                c.copy(this.points[0]),
                t = 1; i > t; t++)
                    n = t / i,
                    o = this.getPoint(n),
                    u.copy(o),
                    d += u.distanceTo(c),
                    c.copy(o),
                    a = (this.points.length - 1) * n,
                    s = Math.floor(a),
                    s != l && (h[s] = d,
                    l = s);
                return h[h.length] = d,
                {
                    chunks: h,
                    total: d
                }
            }
            ,
            this.reparametrizeByArcLength = function(e) {
                var t, n, i, o, a, s, l, c, u = [], h = new r.Vector3, d = this.getLength();
                for (u.push(h.copy(this.points[0]).clone()),
                t = 1; t < this.points.length; t++) {
                    for (s = d.chunks[t] - d.chunks[t - 1],
                    l = Math.ceil(e * s / d.total),
                    o = (t - 1) / (this.points.length - 1),
                    a = t / (this.points.length - 1),
                    n = 1; l - 1 > n; n++)
                        i = o + n * (1 / l) * (a - o),
                        c = this.getPoint(i),
                        u.push(h.copy(c).clone());
                    u.push(h.copy(this.points[t]).clone())
                }
                this.points = u
            }
        }
        ,
        r.Triangle = function(e, t, n) {
            this.a = void 0 !== e ? e : new r.Vector3,
            this.b = void 0 !== t ? t : new r.Vector3,
            this.c = void 0 !== n ? n : new r.Vector3
        }
        ,
        r.Triangle.normal = function() {
            var e = new r.Vector3;
            return function(t, n, i, o) {
                var a = o || new r.Vector3;
                a.subVectors(i, n),
                e.subVectors(t, n),
                a.cross(e);
                var s = a.lengthSq();
                return s > 0 ? a.multiplyScalar(1 / Math.sqrt(s)) : a.set(0, 0, 0)
            }
        }(),
        r.Triangle.barycoordFromPoint = function() {
            var e = new r.Vector3
              , t = new r.Vector3
              , n = new r.Vector3;
            return function(i, o, a, s, l) {
                e.subVectors(s, o),
                t.subVectors(a, o),
                n.subVectors(i, o);
                var c = e.dot(e)
                  , u = e.dot(t)
                  , h = e.dot(n)
                  , d = t.dot(t)
                  , f = t.dot(n)
                  , p = c * d - u * u
                  , m = l || new r.Vector3;
                if (0 == p)
                    return m.set(-2, -1, -1);
                var v = 1 / p
                  , g = (d * h - u * f) * v
                  , y = (c * f - u * h) * v;
                return m.set(1 - g - y, y, g)
            }
        }(),
        r.Triangle.containsPoint = function() {
            var e = new r.Vector3;
            return function(t, n, i, o) {
                var a = r.Triangle.barycoordFromPoint(t, n, i, o, e);
                return a.x >= 0 && a.y >= 0 && a.x + a.y <= 1
            }
        }(),
        r.Triangle.prototype = {
            constructor: r.Triangle,
            set: function(e, t, n) {
                return this.a.copy(e),
                this.b.copy(t),
                this.c.copy(n),
                this
            },
            setFromPointsAndIndices: function(e, t, n, i) {
                return this.a.copy(e[t]),
                this.b.copy(e[n]),
                this.c.copy(e[i]),
                this
            },
            copy: function(e) {
                return this.a.copy(e.a),
                this.b.copy(e.b),
                this.c.copy(e.c),
                this
            },
            area: function() {
                var e = new r.Vector3
                  , t = new r.Vector3;
                return function() {
                    return e.subVectors(this.c, this.b),
                    t.subVectors(this.a, this.b),
                    .5 * e.cross(t).length()
                }
            }(),
            midpoint: function(e) {
                var t = e || new r.Vector3;
                return t.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
            },
            normal: function(e) {
                return r.Triangle.normal(this.a, this.b, this.c, e)
            },
            plane: function(e) {
                var t = e || new r.Plane;
                return t.setFromCoplanarPoints(this.a, this.b, this.c)
            },
            barycoordFromPoint: function(e, t) {
                return r.Triangle.barycoordFromPoint(e, this.a, this.b, this.c, t)
            },
            containsPoint: function(e) {
                return r.Triangle.containsPoint(e, this.a, this.b, this.c)
            },
            equals: function(e) {
                return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
            },
            clone: function() {
                return (new r.Triangle).copy(this)
            }
        },
        r.Clock = function(e) {
            this.autoStart = void 0 !== e ? e : !0,
            this.startTime = 0,
            this.oldTime = 0,
            this.elapsedTime = 0,
            this.running = !1
        }
        ,
        r.Clock.prototype = {
            constructor: r.Clock,
            start: function() {
                this.startTime = void 0 !== i.performance && void 0 !== i.performance.now ? i.performance.now() : Date.now(),
                this.oldTime = this.startTime,
                this.running = !0
            },
            stop: function() {
                this.getElapsedTime(),
                this.running = !1
            },
            getElapsedTime: function() {
                return this.getDelta(),
                this.elapsedTime
            },
            getDelta: function() {
                var e = 0;
                if (this.autoStart && !this.running && this.start(),
                this.running) {
                    var t = void 0 !== i.performance && void 0 !== i.performance.now ? i.performance.now() : Date.now();
                    e = .001 * (t - this.oldTime),
                    this.oldTime = t,
                    this.elapsedTime += e
                }
                return e
            }
        },
        r.EventDispatcher = function() {}
        ,
        r.EventDispatcher.prototype = {
            constructor: r.EventDispatcher,
            apply: function(e) {
                e.addEventListener = r.EventDispatcher.prototype.addEventListener,
                e.hasEventListener = r.EventDispatcher.prototype.hasEventListener,
                e.removeEventListener = r.EventDispatcher.prototype.removeEventListener,
                e.dispatchEvent = r.EventDispatcher.prototype.dispatchEvent
            },
            addEventListener: function(e, t) {
                void 0 === this._listeners && (this._listeners = {});
                var n = this._listeners;
                void 0 === n[e] && (n[e] = []),
                -1 === n[e].indexOf(t) && n[e].push(t)
            },
            hasEventListener: function(e, t) {
                if (void 0 === this._listeners)
                    return !1;
                var n = this._listeners;
                return void 0 !== n[e] && -1 !== n[e].indexOf(t) ? !0 : !1
            },
            removeEventListener: function(e, t) {
                if (void 0 !== this._listeners) {
                    var n = this._listeners
                      , i = n[e];
                    if (void 0 !== i) {
                        var r = i.indexOf(t);
                        -1 !== r && i.splice(r, 1)
                    }
                }
            },
            dispatchEvent: function(e) {
                if (void 0 !== this._listeners) {
                    var t = this._listeners
                      , n = t[e.type];
                    if (void 0 !== n) {
                        e.target = this;
                        for (var i = [], r = n.length, o = 0; r > o; o++)
                            i[o] = n[o];
                        for (var o = 0; r > o; o++)
                            i[o].call(this, e)
                    }
                }
            }
        },
        function(e) {
            e.Raycaster = function(t, n, i, r) {
                this.ray = new e.Ray(t,n),
                this.near = i || 0,
                this.far = r || 1 / 0,
                this.params = {
                    Sprite: {},
                    Mesh: {},
                    PointCloud: {
                        threshold: 1
                    },
                    LOD: {},
                    Line: {}
                }
            }
            ;
            var t = function(e, t) {
                return e.distance - t.distance
            }
              , n = function(e, t, i, r) {
                if (e.raycast(t, i),
                r === !0)
                    for (var o = e.children, a = 0, s = o.length; s > a; a++)
                        n(o[a], t, i, !0)
            };
            e.Raycaster.prototype = {
                constructor: e.Raycaster,
                precision: 1e-4,
                linePrecision: 1,
                set: function(e, t) {
                    this.ray.set(e, t)
                },
                setFromCamera: function(t, n) {
                    n instanceof e.PerspectiveCamera ? (this.ray.origin.copy(n.position),
                    this.ray.direction.set(t.x, t.y, .5).unproject(n).sub(n.position).normalize()) : n instanceof e.OrthographicCamera ? (this.ray.origin.set(t.x, t.y, -1).unproject(n),
                    this.ray.direction.set(0, 0, -1).transformDirection(n.matrixWorld)) : e.error("THREE.Raycaster: Unsupported camera type.")
                },
                intersectObject: function(e, i) {
                    var r = [];
                    return n(e, this, r, i),
                    r.sort(t),
                    r
                },
                intersectObjects: function(i, r) {
                    var o = [];
                    if (i instanceof Array == !1)
                        return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),
                        o;
                    for (var a = 0, s = i.length; s > a; a++)
                        n(i[a], this, o, r);
                    return o.sort(t),
                    o
                }
            }
        }(r),
        r.Object3D = function() {
            Object.defineProperty(this, "id", {
                value: r.Object3DIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Object3D",
            this.parent = void 0,
            this.children = [],
            this.up = r.Object3D.DefaultUp.clone();
            var e = new r.Vector3
              , t = new r.Euler
              , n = new r.Quaternion
              , i = new r.Vector3(1,1,1)
              , o = function() {
                n.setFromEuler(t, !1)
            }
              , a = function() {
                t.setFromQuaternion(n, void 0, !1)
            };
            t.onChange(o),
            n.onChange(a),
            Object.defineProperties(this, {
                position: {
                    enumerable: !0,
                    value: e
                },
                rotation: {
                    enumerable: !0,
                    value: t
                },
                quaternion: {
                    enumerable: !0,
                    value: n
                },
                scale: {
                    enumerable: !0,
                    value: i
                }
            }),
            this.rotationAutoUpdate = !0,
            this.matrix = new r.Matrix4,
            this.matrixWorld = new r.Matrix4,
            this.matrixAutoUpdate = !0,
            this.matrixWorldNeedsUpdate = !1,
            this.visible = !0,
            this.castShadow = !1,
            this.receiveShadow = !1,
            this.frustumCulled = !0,
            this.renderOrder = 0,
            this.userData = {}
        }
        ,
        r.Object3D.DefaultUp = new r.Vector3(0,1,0),
        r.Object3D.prototype = {
            constructor: r.Object3D,
            get eulerOrder() {
                return r.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),
                this.rotation.order
            },
            set eulerOrder(e) {
                r.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),
                this.rotation.order = e
            },
            get useQuaternion() {
                r.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set useQuaternion(e) {
                r.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            applyMatrix: function(e) {
                this.matrix.multiplyMatrices(e, this.matrix),
                this.matrix.decompose(this.position, this.quaternion, this.scale)
            },
            setRotationFromAxisAngle: function(e, t) {
                this.quaternion.setFromAxisAngle(e, t)
            },
            setRotationFromEuler: function(e) {
                this.quaternion.setFromEuler(e, !0)
            },
            setRotationFromMatrix: function(e) {
                this.quaternion.setFromRotationMatrix(e)
            },
            setRotationFromQuaternion: function(e) {
                this.quaternion.copy(e)
            },
            rotateOnAxis: function() {
                var e = new r.Quaternion;
                return function(t, n) {
                    return e.setFromAxisAngle(t, n),
                    this.quaternion.multiply(e),
                    this
                }
            }(),
            rotateX: function() {
                var e = new r.Vector3(1,0,0);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            rotateY: function() {
                var e = new r.Vector3(0,1,0);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            rotateZ: function() {
                var e = new r.Vector3(0,0,1);
                return function(t) {
                    return this.rotateOnAxis(e, t)
                }
            }(),
            translateOnAxis: function() {
                var e = new r.Vector3;
                return function(t, n) {
                    return e.copy(t).applyQuaternion(this.quaternion),
                    this.position.add(e.multiplyScalar(n)),
                    this
                }
            }(),
            translate: function(e, t) {
                return r.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),
                this.translateOnAxis(t, e)
            },
            translateX: function() {
                var e = new r.Vector3(1,0,0);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            translateY: function() {
                var e = new r.Vector3(0,1,0);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            translateZ: function() {
                var e = new r.Vector3(0,0,1);
                return function(t) {
                    return this.translateOnAxis(e, t)
                }
            }(),
            localToWorld: function(e) {
                return e.applyMatrix4(this.matrixWorld)
            },
            worldToLocal: function() {
                var e = new r.Matrix4;
                return function(t) {
                    return t.applyMatrix4(e.getInverse(this.matrixWorld))
                }
            }(),
            lookAt: function() {
                var e = new r.Matrix4;
                return function(t) {
                    e.lookAt(t, this.position, this.up),
                    this.quaternion.setFromRotationMatrix(e)
                }
            }(),
            add: function(e) {
                if (arguments.length > 1) {
                    for (var t = 0; t < arguments.length; t++)
                        this.add(arguments[t]);
                    return this
                }
                return e === this ? (r.error("THREE.Object3D.add: object can't be added as a child of itself.", e),
                this) : (e instanceof r.Object3D ? (void 0 !== e.parent && e.parent.remove(e),
                e.parent = this,
                e.dispatchEvent({
                    type: "added"
                }),
                this.children.push(e)) : r.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e),
                this)
            },
            remove: function(e) {
                if (arguments.length > 1)
                    for (var t = 0; t < arguments.length; t++)
                        this.remove(arguments[t]);
                var n = this.children.indexOf(e);
                -1 !== n && (e.parent = void 0,
                e.dispatchEvent({
                    type: "removed"
                }),
                this.children.splice(n, 1))
            },
            getChildByName: function(e) {
                return r.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),
                this.getObjectByName(e)
            },
            getObjectById: function(e) {
                return this.getObjectByProperty("id", e)
            },
            getObjectByName: function(e) {
                return this.getObjectByProperty("name", e)
            },
            getObjectByProperty: function(e, t) {
                if (this[e] === t)
                    return this;
                for (var n = 0, i = this.children.length; i > n; n++) {
                    var r = this.children[n]
                      , o = r.getObjectByProperty(e, t);
                    if (void 0 !== o)
                        return o
                }
                return void 0
            },
            getWorldPosition: function(e) {
                var t = e || new r.Vector3;
                return this.updateMatrixWorld(!0),
                t.setFromMatrixPosition(this.matrixWorld)
            },
            getWorldQuaternion: function() {
                var e = new r.Vector3
                  , t = new r.Vector3;
                return function(n) {
                    var i = n || new r.Quaternion;
                    return this.updateMatrixWorld(!0),
                    this.matrixWorld.decompose(e, i, t),
                    i
                }
            }(),
            getWorldRotation: function() {
                var e = new r.Quaternion;
                return function(t) {
                    var n = t || new r.Euler;
                    return this.getWorldQuaternion(e),
                    n.setFromQuaternion(e, this.rotation.order, !1)
                }
            }(),
            getWorldScale: function() {
                var e = new r.Vector3
                  , t = new r.Quaternion;
                return function(n) {
                    var i = n || new r.Vector3;
                    return this.updateMatrixWorld(!0),
                    this.matrixWorld.decompose(e, t, i),
                    i
                }
            }(),
            getWorldDirection: function() {
                var e = new r.Quaternion;
                return function(t) {
                    var n = t || new r.Vector3;
                    return this.getWorldQuaternion(e),
                    n.set(0, 0, 1).applyQuaternion(e)
                }
            }(),
            raycast: function() {},
            traverse: function(e) {
                e(this);
                for (var t = 0, n = this.children.length; n > t; t++)
                    this.children[t].traverse(e)
            },
            traverseVisible: function(e) {
                if (this.visible !== !1) {
                    e(this);
                    for (var t = 0, n = this.children.length; n > t; t++)
                        this.children[t].traverseVisible(e)
                }
            },
            traverseAncestors: function(e) {
                this.parent && (e(this.parent),
                this.parent.traverseAncestors(e));
            },
            updateMatrix: function() {
                this.matrix.compose(this.position, this.quaternion, this.scale),
                this.matrixWorldNeedsUpdate = !0
            },
            updateMatrixWorld: function(e) {
                this.matrixAutoUpdate === !0 && this.updateMatrix(),
                (this.matrixWorldNeedsUpdate === !0 || e === !0) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                this.matrixWorldNeedsUpdate = !1,
                e = !0);
                for (var t = 0, n = this.children.length; n > t; t++)
                    this.children[t].updateMatrixWorld(e)
            },
            toJSON: function() {
                var e = {
                    metadata: {
                        version: 4.3,
                        type: "Object",
                        generator: "ObjectExporter"
                    }
                }
                  , t = {}
                  , n = function(n) {
                    if (void 0 === e.geometries && (e.geometries = []),
                    void 0 === t[n.uuid]) {
                        var i = n.toJSON();
                        delete i.metadata,
                        t[n.uuid] = i,
                        e.geometries.push(i)
                    }
                    return n.uuid
                }
                  , i = {}
                  , o = function(t) {
                    if (void 0 === e.materials && (e.materials = []),
                    void 0 === i[t.uuid]) {
                        var n = t.toJSON();
                        delete n.metadata,
                        i[t.uuid] = n,
                        e.materials.push(n)
                    }
                    return t.uuid
                }
                  , a = function(e) {
                    var t = {};
                    if (t.uuid = e.uuid,
                    t.type = e.type,
                    "" !== e.name && (t.name = e.name),
                    "{}" !== JSON.stringify(e.userData) && (t.userData = e.userData),
                    e.visible !== !0 && (t.visible = e.visible),
                    e instanceof r.PerspectiveCamera ? (t.fov = e.fov,
                    t.aspect = e.aspect,
                    t.near = e.near,
                    t.far = e.far) : e instanceof r.OrthographicCamera ? (t.left = e.left,
                    t.right = e.right,
                    t.top = e.top,
                    t.bottom = e.bottom,
                    t.near = e.near,
                    t.far = e.far) : e instanceof r.AmbientLight ? t.color = e.color.getHex() : e instanceof r.DirectionalLight ? (t.color = e.color.getHex(),
                    t.intensity = e.intensity) : e instanceof r.PointLight ? (t.color = e.color.getHex(),
                    t.intensity = e.intensity,
                    t.distance = e.distance,
                    t.decay = e.decay) : e instanceof r.SpotLight ? (t.color = e.color.getHex(),
                    t.intensity = e.intensity,
                    t.distance = e.distance,
                    t.angle = e.angle,
                    t.exponent = e.exponent,
                    t.decay = e.decay) : e instanceof r.HemisphereLight ? (t.color = e.color.getHex(),
                    t.groundColor = e.groundColor.getHex()) : e instanceof r.Mesh || e instanceof r.Line || e instanceof r.PointCloud ? (t.geometry = n(e.geometry),
                    t.material = o(e.material),
                    e instanceof r.Line && (t.mode = e.mode)) : e instanceof r.Sprite && (t.material = o(e.material)),
                    t.matrix = e.matrix.toArray(),
                    e.children.length > 0) {
                        t.children = [];
                        for (var i = 0; i < e.children.length; i++)
                            t.children.push(a(e.children[i]))
                    }
                    return t
                };
                return e.object = a(this),
                e
            },
            clone: function(e, t) {
                if (void 0 === e && (e = new r.Object3D),
                void 0 === t && (t = !0),
                e.name = this.name,
                e.up.copy(this.up),
                e.position.copy(this.position),
                e.quaternion.copy(this.quaternion),
                e.scale.copy(this.scale),
                e.rotationAutoUpdate = this.rotationAutoUpdate,
                e.matrix.copy(this.matrix),
                e.matrixWorld.copy(this.matrixWorld),
                e.matrixAutoUpdate = this.matrixAutoUpdate,
                e.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate,
                e.visible = this.visible,
                e.castShadow = this.castShadow,
                e.receiveShadow = this.receiveShadow,
                e.frustumCulled = this.frustumCulled,
                e.userData = JSON.parse(JSON.stringify(this.userData)),
                t === !0)
                    for (var n = 0; n < this.children.length; n++) {
                        var i = this.children[n];
                        e.add(i.clone())
                    }
                return e
            }
        },
        r.EventDispatcher.prototype.apply(r.Object3D.prototype),
        r.Object3DIdCount = 0,
        r.Face3 = function(e, t, n, i, o, a) {
            this.a = e,
            this.b = t,
            this.c = n,
            this.normal = i instanceof r.Vector3 ? i : new r.Vector3,
            this.vertexNormals = i instanceof Array ? i : [],
            this.color = o instanceof r.Color ? o : new r.Color,
            this.vertexColors = o instanceof Array ? o : [],
            this.vertexTangents = [],
            this.materialIndex = void 0 !== a ? a : 0
        }
        ,
        r.Face3.prototype = {
            constructor: r.Face3,
            clone: function() {
                var e = new r.Face3(this.a,this.b,this.c);
                e.normal.copy(this.normal),
                e.color.copy(this.color),
                e.materialIndex = this.materialIndex;
                for (var t = 0, n = this.vertexNormals.length; n > t; t++)
                    e.vertexNormals[t] = this.vertexNormals[t].clone();
                for (var t = 0, n = this.vertexColors.length; n > t; t++)
                    e.vertexColors[t] = this.vertexColors[t].clone();
                for (var t = 0, n = this.vertexTangents.length; n > t; t++)
                    e.vertexTangents[t] = this.vertexTangents[t].clone();
                return e
            }
        },
        r.Face4 = function(e, t, n, i, o, a, s) {
            return r.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),
            new r.Face3(e,t,n,o,a,s)
        }
        ,
        r.BufferAttribute = function(e, t) {
            this.array = e,
            this.itemSize = t,
            this.needsUpdate = !1
        }
        ,
        r.BufferAttribute.prototype = {
            constructor: r.BufferAttribute,
            get length() {
                return this.array.length
            },
            copyAt: function(e, t, n) {
                e *= this.itemSize,
                n *= t.itemSize;
                for (var i = 0, r = this.itemSize; r > i; i++)
                    this.array[e + i] = t.array[n + i];
                return this
            },
            set: function(e, t) {
                return void 0 === t && (t = 0),
                this.array.set(e, t),
                this
            },
            setX: function(e, t) {
                return this.array[e * this.itemSize] = t,
                this
            },
            setY: function(e, t) {
                return this.array[e * this.itemSize + 1] = t,
                this
            },
            setZ: function(e, t) {
                return this.array[e * this.itemSize + 2] = t,
                this
            },
            setXY: function(e, t, n) {
                return e *= this.itemSize,
                this.array[e] = t,
                this.array[e + 1] = n,
                this
            },
            setXYZ: function(e, t, n, i) {
                return e *= this.itemSize,
                this.array[e] = t,
                this.array[e + 1] = n,
                this.array[e + 2] = i,
                this
            },
            setXYZW: function(e, t, n, i, r) {
                return e *= this.itemSize,
                this.array[e] = t,
                this.array[e + 1] = n,
                this.array[e + 2] = i,
                this.array[e + 3] = r,
                this
            },
            clone: function() {
                return new r.BufferAttribute(new this.array.constructor(this.array),this.itemSize)
            }
        },
        r.Int8Attribute = function(e, t) {
            return r.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Uint8Attribute = function(e, t) {
            return r.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Uint8ClampedAttribute = function(e, t) {
            return r.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Int16Attribute = function(e, t) {
            return r.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Uint16Attribute = function(e, t) {
            return r.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Int32Attribute = function(e, t) {
            return r.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Uint32Attribute = function(e, t) {
            return r.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Float32Attribute = function(e, t) {
            return r.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.Float64Attribute = function(e, t) {
            return r.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),
            new r.BufferAttribute(e,t)
        }
        ,
        r.DynamicBufferAttribute = function(e, t) {
            r.BufferAttribute.call(this, e, t),
            this.updateRange = {
                offset: 0,
                count: -1
            }
        }
        ,
        r.DynamicBufferAttribute.prototype = Object.create(r.BufferAttribute.prototype),
        r.DynamicBufferAttribute.prototype.constructor = r.DynamicBufferAttribute,
        r.DynamicBufferAttribute.prototype.clone = function() {
            return new r.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)
        }
        ,
        r.BufferGeometry = function() {
            Object.defineProperty(this, "id", {
                value: r.GeometryIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "BufferGeometry",
            this.attributes = {},
            this.attributesKeys = [],
            this.drawcalls = [],
            this.offsets = this.drawcalls,
            this.boundingBox = null,
            this.boundingSphere = null
        }
        ,
        r.BufferGeometry.prototype = {
            constructor: r.BufferGeometry,
            addAttribute: function(e, t) {
                return t instanceof r.BufferAttribute == !1 ? (r.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),
                void (this.attributes[e] = {
                    array: arguments[1],
                    itemSize: arguments[2]
                })) : (this.attributes[e] = t,
                void (this.attributesKeys = Object.keys(this.attributes)))
            },
            getAttribute: function(e) {
                return this.attributes[e]
            },
            addDrawCall: function(e, t, n) {
                this.drawcalls.push({
                    start: e,
                    count: t,
                    index: void 0 !== n ? n : 0
                })
            },
            applyMatrix: function(e) {
                var t = this.attributes.position;
                void 0 !== t && (e.applyToVector3Array(t.array),
                t.needsUpdate = !0);
                var n = this.attributes.normal;
                if (void 0 !== n) {
                    var i = (new r.Matrix3).getNormalMatrix(e);
                    i.applyToVector3Array(n.array),
                    n.needsUpdate = !0
                }
                null !== this.boundingBox && this.computeBoundingBox(),
                null !== this.boundingSphere && this.computeBoundingSphere()
            },
            center: function() {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.applyMatrix((new r.Matrix4).setPosition(e)),
                e
            },
            fromGeometry: function(e, t) {
                t = t || {
                    vertexColors: r.NoColors
                };
                var n = e.vertices
                  , i = e.faces
                  , o = e.faceVertexUvs
                  , a = t.vertexColors
                  , s = o[0].length > 0
                  , l = 3 == i[0].vertexNormals.length
                  , c = new Float32Array(3 * i.length * 3);
                this.addAttribute("position", new r.BufferAttribute(c,3));
                var u = new Float32Array(3 * i.length * 3);
                if (this.addAttribute("normal", new r.BufferAttribute(u,3)),
                a !== r.NoColors) {
                    var h = new Float32Array(3 * i.length * 3);
                    this.addAttribute("color", new r.BufferAttribute(h,3))
                }
                if (s === !0) {
                    var d = new Float32Array(3 * i.length * 2);
                    this.addAttribute("uv", new r.BufferAttribute(d,2))
                }
                for (var f = 0, p = 0, m = 0; f < i.length; f++,
                p += 6,
                m += 9) {
                    var v = i[f]
                      , g = n[v.a]
                      , y = n[v.b]
                      , b = n[v.c];
                    if (c[m] = g.x,
                    c[m + 1] = g.y,
                    c[m + 2] = g.z,
                    c[m + 3] = y.x,
                    c[m + 4] = y.y,
                    c[m + 5] = y.z,
                    c[m + 6] = b.x,
                    c[m + 7] = b.y,
                    c[m + 8] = b.z,
                    l === !0) {
                        var x = v.vertexNormals[0]
                          , w = v.vertexNormals[1]
                          , _ = v.vertexNormals[2];
                        u[m] = x.x,
                        u[m + 1] = x.y,
                        u[m + 2] = x.z,
                        u[m + 3] = w.x,
                        u[m + 4] = w.y,
                        u[m + 5] = w.z,
                        u[m + 6] = _.x,
                        u[m + 7] = _.y,
                        u[m + 8] = _.z
                    } else {
                        var S = v.normal;
                        u[m] = S.x,
                        u[m + 1] = S.y,
                        u[m + 2] = S.z,
                        u[m + 3] = S.x,
                        u[m + 4] = S.y,
                        u[m + 5] = S.z,
                        u[m + 6] = S.x,
                        u[m + 7] = S.y,
                        u[m + 8] = S.z
                    }
                    if (a === r.FaceColors) {
                        var M = v.color;
                        h[m] = M.r,
                        h[m + 1] = M.g,
                        h[m + 2] = M.b,
                        h[m + 3] = M.r,
                        h[m + 4] = M.g,
                        h[m + 5] = M.b,
                        h[m + 6] = M.r,
                        h[m + 7] = M.g,
                        h[m + 8] = M.b
                    } else if (a === r.VertexColors) {
                        var C = v.vertexColors[0]
                          , T = v.vertexColors[1]
                          , E = v.vertexColors[2];
                        h[m] = C.r,
                        h[m + 1] = C.g,
                        h[m + 2] = C.b,
                        h[m + 3] = T.r,
                        h[m + 4] = T.g,
                        h[m + 5] = T.b,
                        h[m + 6] = E.r,
                        h[m + 7] = E.g,
                        h[m + 8] = E.b
                    }
                    if (s === !0) {
                        var k = o[0][f][0]
                          , A = o[0][f][1]
                          , P = o[0][f][2];
                        d[p] = k.x,
                        d[p + 1] = k.y,
                        d[p + 2] = A.x,
                        d[p + 3] = A.y,
                        d[p + 4] = P.x,
                        d[p + 5] = P.y
                    }
                }
                return this.computeBoundingSphere(),
                this
            },
            computeBoundingBox: function() {
                var e = new r.Vector3;
                return function() {
                    null === this.boundingBox && (this.boundingBox = new r.Box3);
                    var t = this.attributes.position.array;
                    if (t) {
                        var n = this.boundingBox;
                        n.makeEmpty();
                        for (var i = 0, o = t.length; o > i; i += 3)
                            e.set(t[i], t[i + 1], t[i + 2]),
                            n.expandByPoint(e)
                    }
                    (void 0 === t || 0 === t.length) && (this.boundingBox.min.set(0, 0, 0),
                    this.boundingBox.max.set(0, 0, 0)),
                    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && r.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')
                }
            }(),
            computeBoundingSphere: function() {
                var e = new r.Box3
                  , t = new r.Vector3;
                return function() {
                    null === this.boundingSphere && (this.boundingSphere = new r.Sphere);
                    var n = this.attributes.position.array;
                    if (n) {
                        e.makeEmpty();
                        for (var i = this.boundingSphere.center, o = 0, a = n.length; a > o; o += 3)
                            t.set(n[o], n[o + 1], n[o + 2]),
                            e.expandByPoint(t);
                        e.center(i);
                        for (var s = 0, o = 0, a = n.length; a > o; o += 3)
                            t.set(n[o], n[o + 1], n[o + 2]),
                            s = Math.max(s, i.distanceToSquared(t));
                        this.boundingSphere.radius = Math.sqrt(s),
                        isNaN(this.boundingSphere.radius) && r.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
                    }
                }
            }(),
            computeFaceNormals: function() {},
            computeVertexNormals: function() {
                var e = this.attributes;
                if (e.position) {
                    var t = e.position.array;
                    if (void 0 === e.normal)
                        this.addAttribute("normal", new r.BufferAttribute(new Float32Array(t.length),3));
                    else
                        for (var n = e.normal.array, i = 0, o = n.length; o > i; i++)
                            n[i] = 0;
                    var a, s, l, n = e.normal.array, c = new r.Vector3, u = new r.Vector3, h = new r.Vector3, d = new r.Vector3, f = new r.Vector3;
                    if (e.index)
                        for (var p = e.index.array, m = this.offsets.length > 0 ? this.offsets : [{
                            start: 0,
                            count: p.length,
                            index: 0
                        }], v = 0, g = m.length; g > v; ++v)
                            for (var y = m[v].start, b = m[v].count, x = m[v].index, i = y, o = y + b; o > i; i += 3)
                                a = 3 * (x + p[i]),
                                s = 3 * (x + p[i + 1]),
                                l = 3 * (x + p[i + 2]),
                                c.fromArray(t, a),
                                u.fromArray(t, s),
                                h.fromArray(t, l),
                                d.subVectors(h, u),
                                f.subVectors(c, u),
                                d.cross(f),
                                n[a] += d.x,
                                n[a + 1] += d.y,
                                n[a + 2] += d.z,
                                n[s] += d.x,
                                n[s + 1] += d.y,
                                n[s + 2] += d.z,
                                n[l] += d.x,
                                n[l + 1] += d.y,
                                n[l + 2] += d.z;
                    else
                        for (var i = 0, o = t.length; o > i; i += 9)
                            c.fromArray(t, i),
                            u.fromArray(t, i + 3),
                            h.fromArray(t, i + 6),
                            d.subVectors(h, u),
                            f.subVectors(c, u),
                            d.cross(f),
                            n[i] = d.x,
                            n[i + 1] = d.y,
                            n[i + 2] = d.z,
                            n[i + 3] = d.x,
                            n[i + 4] = d.y,
                            n[i + 5] = d.z,
                            n[i + 6] = d.x,
                            n[i + 7] = d.y,
                            n[i + 8] = d.z;
                    this.normalizeNormals(),
                    e.normal.needsUpdate = !0
                }
            },
            computeTangents: function() {
                function e(e, t, n) {
                    P.fromArray(i, 3 * e),
                    L.fromArray(i, 3 * t),
                    O.fromArray(i, 3 * n),
                    R.fromArray(a, 2 * e),
                    F.fromArray(a, 2 * t),
                    B.fromArray(a, 2 * n),
                    d = L.x - P.x,
                    f = O.x - P.x,
                    p = L.y - P.y,
                    m = O.y - P.y,
                    v = L.z - P.z,
                    g = O.z - P.z,
                    y = F.x - R.x,
                    b = B.x - R.x,
                    x = F.y - R.y,
                    w = B.y - R.y,
                    _ = 1 / (y * w - b * x),
                    D.set((w * d - x * f) * _, (w * p - x * m) * _, (w * v - x * g) * _),
                    I.set((y * f - b * d) * _, (y * m - b * p) * _, (y * g - b * v) * _),
                    c[e].add(D),
                    c[t].add(D),
                    c[n].add(D),
                    u[e].add(I),
                    u[t].add(I),
                    u[n].add(I)
                }
                function t(e) {
                    X.fromArray(o, 3 * e),
                    Y.copy(X),
                    H = c[e],
                    W.copy(H),
                    W.sub(X.multiplyScalar(X.dot(H))).normalize(),
                    q.crossVectors(Y, H),
                    G = q.dot(u[e]),
                    U = 0 > G ? -1 : 1,
                    l[4 * e] = W.x,
                    l[4 * e + 1] = W.y,
                    l[4 * e + 2] = W.z,
                    l[4 * e + 3] = U
                }
                if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv)
                    return void r.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
                var n = this.attributes.index.array
                  , i = this.attributes.position.array
                  , o = this.attributes.normal.array
                  , a = this.attributes.uv.array
                  , s = i.length / 3;
                void 0 === this.attributes.tangent && this.addAttribute("tangent", new r.BufferAttribute(new Float32Array(4 * s),4));
                for (var l = this.attributes.tangent.array, c = [], u = [], h = 0; s > h; h++)
                    c[h] = new r.Vector3,
                    u[h] = new r.Vector3;
                var d, f, p, m, v, g, y, b, x, w, _, S, M, C, T, E, k, A, P = new r.Vector3, L = new r.Vector3, O = new r.Vector3, R = new r.Vector2, F = new r.Vector2, B = new r.Vector2, D = new r.Vector3, I = new r.Vector3;
                0 === this.drawcalls.length && this.addDrawCall(0, n.length, 0);
                var N = this.drawcalls;
                for (C = 0,
                T = N.length; T > C; ++C) {
                    var j = N[C].start
                      , V = N[C].count
                      , z = N[C].index;
                    for (S = j,
                    M = j + V; M > S; S += 3)
                        E = z + n[S],
                        k = z + n[S + 1],
                        A = z + n[S + 2],
                        e(E, k, A)
                }
                var U, H, G, W = new r.Vector3, q = new r.Vector3, X = new r.Vector3, Y = new r.Vector3;
                for (C = 0,
                T = N.length; T > C; ++C) {
                    var j = N[C].start
                      , V = N[C].count
                      , z = N[C].index;
                    for (S = j,
                    M = j + V; M > S; S += 3)
                        E = z + n[S],
                        k = z + n[S + 1],
                        A = z + n[S + 2],
                        t(E),
                        t(k),
                        t(A)
                }
            },
            computeOffsets: function(e) {
                void 0 === e && (e = 65535);
                for (var t = this.attributes.index.array, n = this.attributes.position.array, i = t.length / 3, r = new Uint16Array(t.length), o = 0, a = 0, s = [{
                    start: 0,
                    count: 0,
                    index: 0
                }], l = s[0], c = 0, u = 0, h = new Int32Array(6), d = new Int32Array(n.length), f = new Int32Array(n.length), p = 0; p < n.length; p++)
                    d[p] = -1,
                    f[p] = -1;
                for (var m = 0; i > m; m++) {
                    u = 0;
                    for (var v = 0; 3 > v; v++) {
                        var g = t[3 * m + v];
                        -1 == d[g] ? (h[2 * v] = g,
                        h[2 * v + 1] = -1,
                        u++) : d[g] < l.index ? (h[2 * v] = g,
                        h[2 * v + 1] = -1,
                        c++) : (h[2 * v] = g,
                        h[2 * v + 1] = d[g])
                    }
                    var y = a + u;
                    if (y > l.index + e) {
                        var b = {
                            start: o,
                            count: 0,
                            index: a
                        };
                        s.push(b),
                        l = b;
                        for (var x = 0; 6 > x; x += 2) {
                            var w = h[x + 1];
                            w > -1 && w < l.index && (h[x + 1] = -1)
                        }
                    }
                    for (var x = 0; 6 > x; x += 2) {
                        var g = h[x]
                          , w = h[x + 1];
                        -1 === w && (w = a++),
                        d[g] = w,
                        f[w] = g,
                        r[o++] = w - l.index,
                        l.count++
                    }
                }
                return this.reorderBuffers(r, f, a),
                this.offsets = s,
                this.drawcalls = s,
                s
            },
            merge: function(e, t) {
                if (e instanceof r.BufferGeometry == !1)
                    return void r.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e);
                void 0 === t && (t = 0);
                var n = this.attributes;
                for (var i in n)
                    if (void 0 !== e.attributes[i])
                        for (var o = n[i], a = o.array, s = e.attributes[i], l = s.array, c = s.itemSize, u = 0, h = c * t; u < l.length; u++,
                        h++)
                            a[h] = l[u];
                return this
            },
            normalizeNormals: function() {
                for (var e, t, n, i, r = this.attributes.normal.array, o = 0, a = r.length; a > o; o += 3)
                    e = r[o],
                    t = r[o + 1],
                    n = r[o + 2],
                    i = 1 / Math.sqrt(e * e + t * t + n * n),
                    r[o] *= i,
                    r[o + 1] *= i,
                    r[o + 2] *= i
            },
            reorderBuffers: function(e, t, n) {
                var i = {};
                for (var r in this.attributes)
                    if ("index" != r) {
                        var o = this.attributes[r].array;
                        i[r] = new o.constructor(this.attributes[r].itemSize * n)
                    }
                for (var a = 0; n > a; a++) {
                    var s = t[a];
                    for (var r in this.attributes)
                        if ("index" != r)
                            for (var l = this.attributes[r].array, c = this.attributes[r].itemSize, u = i[r], h = 0; c > h; h++)
                                u[a * c + h] = l[s * c + h]
                }
                this.attributes.index.array = e;
                for (var r in this.attributes)
                    "index" != r && (this.attributes[r].array = i[r],
                    this.attributes[r].numItems = this.attributes[r].itemSize * n)
            },
            toJSON: function() {
                var e = {
                    metadata: {
                        version: 4,
                        type: "BufferGeometry",
                        generator: "BufferGeometryExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    data: {
                        attributes: {}
                    }
                }
                  , t = this.attributes
                  , n = this.offsets
                  , i = this.boundingSphere;
                for (var r in t) {
                    var o = t[r]
                      , a = Array.prototype.slice.call(o.array);
                    e.data.attributes[r] = {
                        itemSize: o.itemSize,
                        type: o.array.constructor.name,
                        array: a
                    }
                }
                return n.length > 0 && (e.data.offsets = JSON.parse(JSON.stringify(n))),
                null !== i && (e.data.boundingSphere = {
                    center: i.center.toArray(),
                    radius: i.radius
                }),
                e
            },
            clone: function() {
                var e = new r.BufferGeometry;
                for (var t in this.attributes) {
                    var n = this.attributes[t];
                    e.addAttribute(t, n.clone())
                }
                for (var i = 0, o = this.offsets.length; o > i; i++) {
                    var a = this.offsets[i];
                    e.offsets.push({
                        start: a.start,
                        index: a.index,
                        count: a.count
                    })
                }
                return e
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.BufferGeometry.prototype),
        r.Geometry = function() {
            Object.defineProperty(this, "id", {
                value: r.GeometryIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Geometry",
            this.vertices = [],
            this.colors = [],
            this.faces = [],
            this.faceVertexUvs = [[]],
            this.morphTargets = [],
            this.morphColors = [],
            this.morphNormals = [],
            this.skinWeights = [],
            this.skinIndices = [],
            this.lineDistances = [],
            this.boundingBox = null,
            this.boundingSphere = null,
            this.hasTangents = !1,
            this.dynamic = !0,
            this.verticesNeedUpdate = !1,
            this.elementsNeedUpdate = !1,
            this.uvsNeedUpdate = !1,
            this.normalsNeedUpdate = !1,
            this.tangentsNeedUpdate = !1,
            this.colorsNeedUpdate = !1,
            this.lineDistancesNeedUpdate = !1,
            this.groupsNeedUpdate = !1
        }
        ,
        r.Geometry.prototype = {
            constructor: r.Geometry,
            applyMatrix: function(e) {
                for (var t = (new r.Matrix3).getNormalMatrix(e), n = 0, i = this.vertices.length; i > n; n++) {
                    var o = this.vertices[n];
                    o.applyMatrix4(e)
                }
                for (var n = 0, i = this.faces.length; i > n; n++) {
                    var a = this.faces[n];
                    a.normal.applyMatrix3(t).normalize();
                    for (var s = 0, l = a.vertexNormals.length; l > s; s++)
                        a.vertexNormals[s].applyMatrix3(t).normalize()
                }
                null !== this.boundingBox && this.computeBoundingBox(),
                null !== this.boundingSphere && this.computeBoundingSphere(),
                this.verticesNeedUpdate = !0,
                this.normalsNeedUpdate = !0
            },
            fromBufferGeometry: function(e) {
                for (var t = this, n = e.attributes, i = n.position.array, o = void 0 !== n.index ? n.index.array : void 0, a = void 0 !== n.normal ? n.normal.array : void 0, s = void 0 !== n.color ? n.color.array : void 0, l = void 0 !== n.uv ? n.uv.array : void 0, c = [], u = [], h = 0, d = 0; h < i.length; h += 3,
                d += 2)
                    t.vertices.push(new r.Vector3(i[h],i[h + 1],i[h + 2])),
                    void 0 !== a && c.push(new r.Vector3(a[h],a[h + 1],a[h + 2])),
                    void 0 !== s && t.colors.push(new r.Color(s[h],s[h + 1],s[h + 2])),
                    void 0 !== l && u.push(new r.Vector2(l[d],l[d + 1]));
                var f = function(e, n, i) {
                    var o = void 0 !== a ? [c[e].clone(), c[n].clone(), c[i].clone()] : []
                      , h = void 0 !== s ? [t.colors[e].clone(), t.colors[n].clone(), t.colors[i].clone()] : [];
                    t.faces.push(new r.Face3(e,n,i,o,h)),
                    void 0 !== l && t.faceVertexUvs[0].push([u[e].clone(), u[n].clone(), u[i].clone()])
                };
                if (void 0 !== o) {
                    var p = e.drawcalls;
                    if (p.length > 0)
                        for (var h = 0; h < p.length; h++)
                            for (var m = p[h], v = m.start, g = m.count, y = m.index, d = v, b = v + g; b > d; d += 3)
                                f(y + o[d], y + o[d + 1], y + o[d + 2]);
                    else
                        for (var h = 0; h < o.length; h += 3)
                            f(o[h], o[h + 1], o[h + 2])
                } else
                    for (var h = 0; h < i.length / 3; h += 3)
                        f(h, h + 1, h + 2);
                return this.computeFaceNormals(),
                null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
                null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()),
                this
            },
            center: function() {
                this.computeBoundingBox();
                var e = this.boundingBox.center().negate();
                return this.applyMatrix((new r.Matrix4).setPosition(e)),
                e
            },
            computeFaceNormals: function() {
                for (var e = new r.Vector3, t = new r.Vector3, n = 0, i = this.faces.length; i > n; n++) {
                    var o = this.faces[n]
                      , a = this.vertices[o.a]
                      , s = this.vertices[o.b]
                      , l = this.vertices[o.c];
                    e.subVectors(l, s),
                    t.subVectors(a, s),
                    e.cross(t),
                    e.normalize(),
                    o.normal.copy(e)
                }
            },
            computeVertexNormals: function(e) {
                var t, n, i, o, a, s;
                for (s = new Array(this.vertices.length),
                t = 0,
                n = this.vertices.length; n > t; t++)
                    s[t] = new r.Vector3;
                if (e) {
                    var l, c, u, h = new r.Vector3, d = new r.Vector3;
                    for (i = 0,
                    o = this.faces.length; o > i; i++)
                        a = this.faces[i],
                        l = this.vertices[a.a],
                        c = this.vertices[a.b],
                        u = this.vertices[a.c],
                        h.subVectors(u, c),
                        d.subVectors(l, c),
                        h.cross(d),
                        s[a.a].add(h),
                        s[a.b].add(h),
                        s[a.c].add(h)
                } else
                    for (i = 0,
                    o = this.faces.length; o > i; i++)
                        a = this.faces[i],
                        s[a.a].add(a.normal),
                        s[a.b].add(a.normal),
                        s[a.c].add(a.normal);
                for (t = 0,
                n = this.vertices.length; n > t; t++)
                    s[t].normalize();
                for (i = 0,
                o = this.faces.length; o > i; i++)
                    a = this.faces[i],
                    a.vertexNormals[0] = s[a.a].clone(),
                    a.vertexNormals[1] = s[a.b].clone(),
                    a.vertexNormals[2] = s[a.c].clone()
            },
            computeMorphNormals: function() {
                var e, t, n, i, o;
                for (n = 0,
                i = this.faces.length; i > n; n++)
                    for (o = this.faces[n],
                    o.__originalFaceNormal ? o.__originalFaceNormal.copy(o.normal) : o.__originalFaceNormal = o.normal.clone(),
                    o.__originalVertexNormals || (o.__originalVertexNormals = []),
                    e = 0,
                    t = o.vertexNormals.length; t > e; e++)
                        o.__originalVertexNormals[e] ? o.__originalVertexNormals[e].copy(o.vertexNormals[e]) : o.__originalVertexNormals[e] = o.vertexNormals[e].clone();
                var a = new r.Geometry;
                for (a.faces = this.faces,
                e = 0,
                t = this.morphTargets.length; t > e; e++) {
                    if (!this.morphNormals[e]) {
                        this.morphNormals[e] = {},
                        this.morphNormals[e].faceNormals = [],
                        this.morphNormals[e].vertexNormals = [];
                        var s, l, c = this.morphNormals[e].faceNormals, u = this.morphNormals[e].vertexNormals;
                        for (n = 0,
                        i = this.faces.length; i > n; n++)
                            s = new r.Vector3,
                            l = {
                                a: new r.Vector3,
                                b: new r.Vector3,
                                c: new r.Vector3
                            },
                            c.push(s),
                            u.push(l)
                    }
                    var h = this.morphNormals[e];
                    a.vertices = this.morphTargets[e].vertices,
                    a.computeFaceNormals(),
                    a.computeVertexNormals();
                    var s, l;
                    for (n = 0,
                    i = this.faces.length; i > n; n++)
                        o = this.faces[n],
                        s = h.faceNormals[n],
                        l = h.vertexNormals[n],
                        s.copy(o.normal),
                        l.a.copy(o.vertexNormals[0]),
                        l.b.copy(o.vertexNormals[1]),
                        l.c.copy(o.vertexNormals[2])
                }
                for (n = 0,
                i = this.faces.length; i > n; n++)
                    o = this.faces[n],
                    o.normal = o.__originalFaceNormal,
                    o.vertexNormals = o.__originalVertexNormals
            },
            computeTangents: function() {
                function e(e, t, n, i, r, o, a) {
                    u = e.vertices[t],
                    h = e.vertices[n],
                    d = e.vertices[i],
                    f = c[r],
                    p = c[o],
                    m = c[a],
                    v = h.x - u.x,
                    g = d.x - u.x,
                    y = h.y - u.y,
                    b = d.y - u.y,
                    x = h.z - u.z,
                    w = d.z - u.z,
                    _ = p.x - f.x,
                    S = m.x - f.x,
                    M = p.y - f.y,
                    C = m.y - f.y,
                    T = 1 / (_ * C - S * M),
                    O.set((C * v - M * g) * T, (C * y - M * b) * T, (C * x - M * w) * T),
                    R.set((_ * g - S * v) * T, (_ * b - S * y) * T, (_ * w - S * x) * T),
                    P[t].add(O),
                    P[n].add(O),
                    P[i].add(O),
                    L[t].add(R),
                    L[n].add(R),
                    L[i].add(R)
                }
                var t, n, i, o, a, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w, _, S, M, C, T, E, k, A, P = [], L = [], O = new r.Vector3, R = new r.Vector3, F = new r.Vector3, B = new r.Vector3, D = new r.Vector3;
                for (i = 0,
                o = this.vertices.length; o > i; i++)
                    P[i] = new r.Vector3,
                    L[i] = new r.Vector3;
                for (t = 0,
                n = this.faces.length; n > t; t++)
                    l = this.faces[t],
                    c = this.faceVertexUvs[0][t],
                    e(this, l.a, l.b, l.c, 0, 1, 2);
                var I = ["a", "b", "c", "d"];
                for (t = 0,
                n = this.faces.length; n > t; t++)
                    for (l = this.faces[t],
                    a = 0; a < Math.min(l.vertexNormals.length, 3); a++)
                        D.copy(l.vertexNormals[a]),
                        s = l[I[a]],
                        E = P[s],
                        F.copy(E),
                        F.sub(D.multiplyScalar(D.dot(E))).normalize(),
                        B.crossVectors(l.vertexNormals[a], E),
                        k = B.dot(L[s]),
                        A = 0 > k ? -1 : 1,
                        l.vertexTangents[a] = new r.Vector4(F.x,F.y,F.z,A);
                this.hasTangents = !0
            },
            computeLineDistances: function() {
                for (var e = 0, t = this.vertices, n = 0, i = t.length; i > n; n++)
                    n > 0 && (e += t[n].distanceTo(t[n - 1])),
                    this.lineDistances[n] = e
            },
            computeBoundingBox: function() {
                null === this.boundingBox && (this.boundingBox = new r.Box3),
                this.boundingBox.setFromPoints(this.vertices)
            },
            computeBoundingSphere: function() {
                null === this.boundingSphere && (this.boundingSphere = new r.Sphere),
                this.boundingSphere.setFromPoints(this.vertices)
            },
            merge: function(e, t, n) {
                if (e instanceof r.Geometry == !1)
                    return void r.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e);
                var i, o = this.vertices.length, a = this.vertices, s = e.vertices, l = this.faces, c = e.faces, u = this.faceVertexUvs[0], h = e.faceVertexUvs[0];
                void 0 === n && (n = 0),
                void 0 !== t && (i = (new r.Matrix3).getNormalMatrix(t));
                for (var d = 0, f = s.length; f > d; d++) {
                    var p = s[d]
                      , m = p.clone();
                    void 0 !== t && m.applyMatrix4(t),
                    a.push(m)
                }
                for (d = 0,
                f = c.length; f > d; d++) {
                    var v, g, y, b = c[d], x = b.vertexNormals, w = b.vertexColors;
                    v = new r.Face3(b.a + o,b.b + o,b.c + o),
                    v.normal.copy(b.normal),
                    void 0 !== i && v.normal.applyMatrix3(i).normalize();
                    for (var _ = 0, S = x.length; S > _; _++)
                        g = x[_].clone(),
                        void 0 !== i && g.applyMatrix3(i).normalize(),
                        v.vertexNormals.push(g);
                    v.color.copy(b.color);
                    for (var _ = 0, S = w.length; S > _; _++)
                        y = w[_],
                        v.vertexColors.push(y.clone());
                    v.materialIndex = b.materialIndex + n,
                    l.push(v)
                }
                for (d = 0,
                f = h.length; f > d; d++) {
                    var M = h[d]
                      , C = [];
                    if (void 0 !== M) {
                        for (var _ = 0, S = M.length; S > _; _++)
                            C.push(M[_].clone());
                        u.push(C)
                    }
                }
            },
            mergeMesh: function(e) {
                return e instanceof r.Mesh == !1 ? void r.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e) : (e.matrixAutoUpdate && e.updateMatrix(),
                void this.merge(e.geometry, e.matrix))
            },
            mergeVertices: function() {
                var e, t, n, i, r, o, a, s, l = {}, c = [], u = [], h = 4, d = Math.pow(10, h);
                for (n = 0,
                i = this.vertices.length; i > n; n++)
                    e = this.vertices[n],
                    t = Math.round(e.x * d) + "_" + Math.round(e.y * d) + "_" + Math.round(e.z * d),
                    void 0 === l[t] ? (l[t] = n,
                    c.push(this.vertices[n]),
                    u[n] = c.length - 1) : u[n] = u[l[t]];
                var f = [];
                for (n = 0,
                i = this.faces.length; i > n; n++) {
                    r = this.faces[n],
                    r.a = u[r.a],
                    r.b = u[r.b],
                    r.c = u[r.c],
                    o = [r.a, r.b, r.c];
                    for (var p = -1, m = 0; 3 > m; m++)
                        if (o[m] == o[(m + 1) % 3]) {
                            p = m,
                            f.push(n);
                            break
                        }
                }
                for (n = f.length - 1; n >= 0; n--) {
                    var v = f[n];
                    for (this.faces.splice(v, 1),
                    a = 0,
                    s = this.faceVertexUvs.length; s > a; a++)
                        this.faceVertexUvs[a].splice(v, 1)
                }
                var g = this.vertices.length - c.length;
                return this.vertices = c,
                g
            },
            toJSON: function() {
                function e(e, t, n) {
                    return n ? e | 1 << t : e & ~(1 << t)
                }
                function t(e) {
                    var t = e.x.toString() + e.y.toString() + e.z.toString();
                    return void 0 !== d[t] ? d[t] : (d[t] = h.length / 3,
                    h.push(e.x, e.y, e.z),
                    d[t])
                }
                function n(e) {
                    var t = e.r.toString() + e.g.toString() + e.b.toString();
                    return void 0 !== p[t] ? p[t] : (p[t] = f.length,
                    f.push(e.getHex()),
                    p[t])
                }
                function i(e) {
                    var t = e.x.toString() + e.y.toString();
                    return void 0 !== v[t] ? v[t] : (v[t] = m.length / 2,
                    m.push(e.x, e.y),
                    v[t])
                }
                var r = {
                    metadata: {
                        version: 4,
                        type: "BufferGeometry",
                        generator: "BufferGeometryExporter"
                    },
                    uuid: this.uuid,
                    type: this.type
                };
                if ("" !== this.name && (r.name = this.name),
                void 0 !== this.parameters) {
                    var o = this.parameters;
                    for (var a in o)
                        void 0 !== o[a] && (r[a] = o[a]);
                    return r
                }
                for (var s = [], l = 0; l < this.vertices.length; l++) {
                    var c = this.vertices[l];
                    s.push(c.x, c.y, c.z)
                }
                for (var u = [], h = [], d = {}, f = [], p = {}, m = [], v = {}, l = 0; l < this.faces.length; l++) {
                    var g = this.faces[l]
                      , y = !1
                      , b = !1
                      , x = void 0 !== this.faceVertexUvs[0][l]
                      , w = g.normal.length() > 0
                      , _ = g.vertexNormals.length > 0
                      , S = 1 !== g.color.r || 1 !== g.color.g || 1 !== g.color.b
                      , M = g.vertexColors.length > 0
                      , C = 0;
                    if (C = e(C, 0, 0),
                    C = e(C, 1, y),
                    C = e(C, 2, b),
                    C = e(C, 3, x),
                    C = e(C, 4, w),
                    C = e(C, 5, _),
                    C = e(C, 6, S),
                    C = e(C, 7, M),
                    u.push(C),
                    u.push(g.a, g.b, g.c),
                    x) {
                        var T = this.faceVertexUvs[0][l];
                        u.push(i(T[0]), i(T[1]), i(T[2]))
                    }
                    if (w && u.push(t(g.normal)),
                    _) {
                        var E = g.vertexNormals;
                        u.push(t(E[0]), t(E[1]), t(E[2]))
                    }
                    if (S && u.push(n(g.color)),
                    M) {
                        var k = g.vertexColors;
                        u.push(n(k[0]), n(k[1]), n(k[2]))
                    }
                }
                return r.data = {},
                r.data.vertices = s,
                r.data.normals = h,
                f.length > 0 && (r.data.colors = f),
                m.length > 0 && (r.data.uvs = [m]),
                r.data.faces = u,
                r
            },
            clone: function() {
                for (var e = new r.Geometry, t = this.vertices, n = 0, i = t.length; i > n; n++)
                    e.vertices.push(t[n].clone());
                for (var o = this.faces, n = 0, i = o.length; i > n; n++)
                    e.faces.push(o[n].clone());
                for (var n = 0, i = this.faceVertexUvs.length; i > n; n++) {
                    var a = this.faceVertexUvs[n];
                    void 0 === e.faceVertexUvs[n] && (e.faceVertexUvs[n] = []);
                    for (var s = 0, l = a.length; l > s; s++) {
                        for (var c = a[s], u = [], h = 0, d = c.length; d > h; h++) {
                            var f = c[h];
                            u.push(f.clone())
                        }
                        e.faceVertexUvs[n].push(u)
                    }
                }
                return e
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.Geometry.prototype),
        r.GeometryIdCount = 0,
        r.Camera = function() {
            r.Object3D.call(this),
            this.type = "Camera",
            this.matrixWorldInverse = new r.Matrix4,
            this.projectionMatrix = new r.Matrix4
        }
        ,
        r.Camera.prototype = Object.create(r.Object3D.prototype),
        r.Camera.prototype.constructor = r.Camera,
        r.Camera.prototype.getWorldDirection = function() {
            var e = new r.Quaternion;
            return function(t) {
                var n = t || new r.Vector3;
                return this.getWorldQuaternion(e),
                n.set(0, 0, -1).applyQuaternion(e)
            }
        }(),
        r.Camera.prototype.lookAt = function() {
            var e = new r.Matrix4;
            return function(t) {
                e.lookAt(this.position, t, this.up),
                this.quaternion.setFromRotationMatrix(e)
            }
        }(),
        r.Camera.prototype.clone = function(e) {
            return void 0 === e && (e = new r.Camera),
            r.Object3D.prototype.clone.call(this, e),
            e.matrixWorldInverse.copy(this.matrixWorldInverse),
            e.projectionMatrix.copy(this.projectionMatrix),
            e
        }
        ,
        r.CubeCamera = function(e, t, n) {
            r.Object3D.call(this),
            this.type = "CubeCamera";
            var i = 90
              , o = 1
              , a = new r.PerspectiveCamera(i,o,e,t);
            a.up.set(0, -1, 0),
            a.lookAt(new r.Vector3(1,0,0)),
            this.add(a);
            var s = new r.PerspectiveCamera(i,o,e,t);
            s.up.set(0, -1, 0),
            s.lookAt(new r.Vector3(-1,0,0)),
            this.add(s);
            var l = new r.PerspectiveCamera(i,o,e,t);
            l.up.set(0, 0, 1),
            l.lookAt(new r.Vector3(0,1,0)),
            this.add(l);
            var c = new r.PerspectiveCamera(i,o,e,t);
            c.up.set(0, 0, -1),
            c.lookAt(new r.Vector3(0,-1,0)),
            this.add(c);
            var u = new r.PerspectiveCamera(i,o,e,t);
            u.up.set(0, -1, 0),
            u.lookAt(new r.Vector3(0,0,1)),
            this.add(u);
            var h = new r.PerspectiveCamera(i,o,e,t);
            h.up.set(0, -1, 0),
            h.lookAt(new r.Vector3(0,0,-1)),
            this.add(h),
            this.renderTarget = new r.WebGLRenderTargetCube(n,n,{
                format: r.RGBFormat,
                magFilter: r.LinearFilter,
                minFilter: r.LinearFilter
            }),
            this.updateCubeMap = function(e, t) {
                var n = this.renderTarget
                  , i = n.generateMipmaps;
                n.generateMipmaps = !1,
                n.activeCubeFace = 0,
                e.render(t, a, n),
                n.activeCubeFace = 1,
                e.render(t, s, n),
                n.activeCubeFace = 2,
                e.render(t, l, n),
                n.activeCubeFace = 3,
                e.render(t, c, n),
                n.activeCubeFace = 4,
                e.render(t, u, n),
                n.generateMipmaps = i,
                n.activeCubeFace = 5,
                e.render(t, h, n)
            }
        }
        ,
        r.CubeCamera.prototype = Object.create(r.Object3D.prototype),
        r.CubeCamera.prototype.constructor = r.CubeCamera,
        r.OrthographicCamera = function(e, t, n, i, o, a) {
            r.Camera.call(this),
            this.type = "OrthographicCamera",
            this.zoom = 1,
            this.left = e,
            this.right = t,
            this.top = n,
            this.bottom = i,
            this.near = void 0 !== o ? o : .1,
            this.far = void 0 !== a ? a : 2e3,
            this.updateProjectionMatrix()
        }
        ,
        r.OrthographicCamera.prototype = Object.create(r.Camera.prototype),
        r.OrthographicCamera.prototype.constructor = r.OrthographicCamera,
        r.OrthographicCamera.prototype.updateProjectionMatrix = function() {
            var e = (this.right - this.left) / (2 * this.zoom)
              , t = (this.top - this.bottom) / (2 * this.zoom)
              , n = (this.right + this.left) / 2
              , i = (this.top + this.bottom) / 2;
            this.projectionMatrix.makeOrthographic(n - e, n + e, i + t, i - t, this.near, this.far)
        }
        ,
        r.OrthographicCamera.prototype.clone = function() {
            var e = new r.OrthographicCamera;
            return r.Camera.prototype.clone.call(this, e),
            e.zoom = this.zoom,
            e.left = this.left,
            e.right = this.right,
            e.top = this.top,
            e.bottom = this.bottom,
            e.near = this.near,
            e.far = this.far,
            e.projectionMatrix.copy(this.projectionMatrix),
            e
        }
        ,
        r.PerspectiveCamera = function(e, t, n, i) {
            r.Camera.call(this),
            this.type = "PerspectiveCamera",
            this.zoom = 1,
            this.fov = void 0 !== e ? e : 50,
            this.aspect = void 0 !== t ? t : 1,
            this.near = void 0 !== n ? n : .1,
            this.far = void 0 !== i ? i : 2e3,
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype = Object.create(r.Camera.prototype),
        r.PerspectiveCamera.prototype.constructor = r.PerspectiveCamera,
        r.PerspectiveCamera.prototype.setLens = function(e, t) {
            void 0 === t && (t = 24),
            this.fov = 2 * r.Math.radToDeg(Math.atan(t / (2 * e))),
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype.setViewOffset = function(e, t, n, i, r, o) {
            this.fullWidth = e,
            this.fullHeight = t,
            this.x = n,
            this.y = i,
            this.width = r,
            this.height = o,
            this.updateProjectionMatrix()
        }
        ,
        r.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
            var e = r.Math.radToDeg(2 * Math.atan(Math.tan(.5 * r.Math.degToRad(this.fov)) / this.zoom));
            if (this.fullWidth) {
                var t = this.fullWidth / this.fullHeight
                  , n = Math.tan(r.Math.degToRad(.5 * e)) * this.near
                  , i = -n
                  , o = t * i
                  , a = t * n
                  , s = Math.abs(a - o)
                  , l = Math.abs(n - i);
                this.projectionMatrix.makeFrustum(o + this.x * s / this.fullWidth, o + (this.x + this.width) * s / this.fullWidth, n - (this.y + this.height) * l / this.fullHeight, n - this.y * l / this.fullHeight, this.near, this.far)
            } else
                this.projectionMatrix.makePerspective(e, this.aspect, this.near, this.far)
        }
        ,
        r.PerspectiveCamera.prototype.clone = function() {
            var e = new r.PerspectiveCamera;
            return r.Camera.prototype.clone.call(this, e),
            e.zoom = this.zoom,
            e.fov = this.fov,
            e.aspect = this.aspect,
            e.near = this.near,
            e.far = this.far,
            e.projectionMatrix.copy(this.projectionMatrix),
            e
        }
        ,
        r.Light = function(e) {
            r.Object3D.call(this),
            this.type = "Light",
            this.color = new r.Color(e)
        }
        ,
        r.Light.prototype = Object.create(r.Object3D.prototype),
        r.Light.prototype.constructor = r.Light,
        r.Light.prototype.clone = function(e) {
            return void 0 === e && (e = new r.Light),
            r.Object3D.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e
        }
        ,
        r.AmbientLight = function(e) {
            r.Light.call(this, e),
            this.type = "AmbientLight"
        }
        ,
        r.AmbientLight.prototype = Object.create(r.Light.prototype),
        r.AmbientLight.prototype.constructor = r.AmbientLight,
        r.AmbientLight.prototype.clone = function() {
            var e = new r.AmbientLight;
            return r.Light.prototype.clone.call(this, e),
            e
        }
        ,
        r.AreaLight = function(e, t) {
            r.Light.call(this, e),
            this.type = "AreaLight",
            this.normal = new r.Vector3(0,-1,0),
            this.right = new r.Vector3(1,0,0),
            this.intensity = void 0 !== t ? t : 1,
            this.width = 1,
            this.height = 1,
            this.constantAttenuation = 1.5,
            this.linearAttenuation = .5,
            this.quadraticAttenuation = .1
        }
        ,
        r.AreaLight.prototype = Object.create(r.Light.prototype),
        r.AreaLight.prototype.constructor = r.AreaLight,
        r.DirectionalLight = function(e, t) {
            r.Light.call(this, e),
            this.type = "DirectionalLight",
            this.position.set(0, 1, 0),
            this.target = new r.Object3D,
            this.intensity = void 0 !== t ? t : 1,
            this.castShadow = !1,
            this.onlyShadow = !1,
            this.shadowCameraNear = 50,
            this.shadowCameraFar = 5e3,
            this.shadowCameraLeft = -500,
            this.shadowCameraRight = 500,
            this.shadowCameraTop = 500,
            this.shadowCameraBottom = -500,
            this.shadowCameraVisible = !1,
            this.shadowBias = 0,
            this.shadowDarkness = .5,
            this.shadowMapWidth = 512,
            this.shadowMapHeight = 512,
            this.shadowCascade = !1,
            this.shadowCascadeOffset = new r.Vector3(0,0,-1e3),
            this.shadowCascadeCount = 2,
            this.shadowCascadeBias = [0, 0, 0],
            this.shadowCascadeWidth = [512, 512, 512],
            this.shadowCascadeHeight = [512, 512, 512],
            this.shadowCascadeNearZ = [-1, .99, .998],
            this.shadowCascadeFarZ = [.99, .998, 1],
            this.shadowCascadeArray = [],
            this.shadowMap = null,
            this.shadowMapSize = null,
            this.shadowCamera = null,
            this.shadowMatrix = null
        }
        ,
        r.DirectionalLight.prototype = Object.create(r.Light.prototype),
        r.DirectionalLight.prototype.constructor = r.DirectionalLight,
        r.DirectionalLight.prototype.clone = function() {
            var e = new r.DirectionalLight;
            return r.Light.prototype.clone.call(this, e),
            e.target = this.target.clone(),
            e.intensity = this.intensity,
            e.castShadow = this.castShadow,
            e.onlyShadow = this.onlyShadow,
            e.shadowCameraNear = this.shadowCameraNear,
            e.shadowCameraFar = this.shadowCameraFar,
            e.shadowCameraLeft = this.shadowCameraLeft,
            e.shadowCameraRight = this.shadowCameraRight,
            e.shadowCameraTop = this.shadowCameraTop,
            e.shadowCameraBottom = this.shadowCameraBottom,
            e.shadowCameraVisible = this.shadowCameraVisible,
            e.shadowBias = this.shadowBias,
            e.shadowDarkness = this.shadowDarkness,
            e.shadowMapWidth = this.shadowMapWidth,
            e.shadowMapHeight = this.shadowMapHeight,
            e.shadowCascade = this.shadowCascade,
            e.shadowCascadeOffset.copy(this.shadowCascadeOffset),
            e.shadowCascadeCount = this.shadowCascadeCount,
            e.shadowCascadeBias = this.shadowCascadeBias.slice(0),
            e.shadowCascadeWidth = this.shadowCascadeWidth.slice(0),
            e.shadowCascadeHeight = this.shadowCascadeHeight.slice(0),
            e.shadowCascadeNearZ = this.shadowCascadeNearZ.slice(0),
            e.shadowCascadeFarZ = this.shadowCascadeFarZ.slice(0),
            e
        }
        ,
        r.HemisphereLight = function(e, t, n) {
            r.Light.call(this, e),
            this.type = "HemisphereLight",
            this.position.set(0, 100, 0),
            this.groundColor = new r.Color(t),
            this.intensity = void 0 !== n ? n : 1
        }
        ,
        r.HemisphereLight.prototype = Object.create(r.Light.prototype),
        r.HemisphereLight.prototype.constructor = r.HemisphereLight,
        r.HemisphereLight.prototype.clone = function() {
            var e = new r.HemisphereLight;
            return r.Light.prototype.clone.call(this, e),
            e.groundColor.copy(this.groundColor),
            e.intensity = this.intensity,
            e
        }
        ,
        r.PointLight = function(e, t, n, i) {
            r.Light.call(this, e),
            this.type = "PointLight",
            this.intensity = void 0 !== t ? t : 1,
            this.distance = void 0 !== n ? n : 0,
            this.decay = void 0 !== i ? i : 1
        }
        ,
        r.PointLight.prototype = Object.create(r.Light.prototype),
        r.PointLight.prototype.constructor = r.PointLight,
        r.PointLight.prototype.clone = function() {
            var e = new r.PointLight;
            return r.Light.prototype.clone.call(this, e),
            e.intensity = this.intensity,
            e.distance = this.distance,
            e.decay = this.decay,
            e
        }
        ,
        r.SpotLight = function(e, t, n, i, o, a) {
            r.Light.call(this, e),
            this.type = "SpotLight",
            this.position.set(0, 1, 0),
            this.target = new r.Object3D,
            this.intensity = void 0 !== t ? t : 1,
            this.distance = void 0 !== n ? n : 0,
            this.angle = void 0 !== i ? i : Math.PI / 3,
            this.exponent = void 0 !== o ? o : 10,
            this.decay = void 0 !== a ? a : 1,
            this.castShadow = !1,
            this.onlyShadow = !1,
            this.shadowCameraNear = 50,
            this.shadowCameraFar = 5e3,
            this.shadowCameraFov = 50,
            this.shadowCameraVisible = !1,
            this.shadowBias = 0,
            this.shadowDarkness = .5,
            this.shadowMapWidth = 512,
            this.shadowMapHeight = 512,
            this.shadowMap = null,
            this.shadowMapSize = null,
            this.shadowCamera = null,
            this.shadowMatrix = null
        }
        ,
        r.SpotLight.prototype = Object.create(r.Light.prototype),
        r.SpotLight.prototype.constructor = r.SpotLight,
        r.SpotLight.prototype.clone = function() {
            var e = new r.SpotLight;
            return r.Light.prototype.clone.call(this, e),
            e.target = this.target.clone(),
            e.intensity = this.intensity,
            e.distance = this.distance,
            e.angle = this.angle,
            e.exponent = this.exponent,
            e.decay = this.decay,
            e.castShadow = this.castShadow,
            e.onlyShadow = this.onlyShadow,
            e.shadowCameraNear = this.shadowCameraNear,
            e.shadowCameraFar = this.shadowCameraFar,
            e.shadowCameraFov = this.shadowCameraFov,
            e.shadowCameraVisible = this.shadowCameraVisible,
            e.shadowBias = this.shadowBias,
            e.shadowDarkness = this.shadowDarkness,
            e.shadowMapWidth = this.shadowMapWidth,
            e.shadowMapHeight = this.shadowMapHeight,
            e
        }
        ,
        r.Cache = {
            files: {},
            add: function(e, t) {
                this.files[e] = t
            },
            get: function(e) {
                return this.files[e]
            },
            remove: function(e) {
                delete this.files[e]
            },
            clear: function() {
                this.files = {}
            }
        },
        r.Loader = function(e) {
            this.showStatus = e,
            this.statusDomElement = e ? r.Loader.prototype.addStatusElement() : null,
            this.imageLoader = new r.ImageLoader,
            this.onLoadStart = function() {}
            ,
            this.onLoadProgress = function() {}
            ,
            this.onLoadComplete = function() {}
        }
        ,
        r.Loader.prototype = {
            constructor: r.Loader,
            crossOrigin: void 0,
            addStatusElement: function() {
                var e = document.createElement("div");
                return e.style.position = "absolute",
                e.style.right = "0px",
                e.style.top = "0px",
                e.style.fontSize = "0.8em",
                e.style.textAlign = "left",
                e.style.background = "rgba(0,0,0,0.25)",
                e.style.color = "#fff",
                e.style.width = "120px",
                e.style.padding = "0.5em 0.5em 0.5em 0.5em",
                e.style.zIndex = 1e3,
                e.innerHTML = "Loading ...",
                e
            },
            updateProgress: function(e) {
                var t = "Loaded ";
                t += e.total ? (100 * e.loaded / e.total).toFixed(0) + "%" : (e.loaded / 1024).toFixed(2) + " KB",
                this.statusDomElement.innerHTML = t
            },
            extractUrlBase: function(e) {
                var t = e.split("/");
                return 1 === t.length ? "./" : (t.pop(),
                t.join("/") + "/")
            },
            initMaterials: function(e, t) {
                for (var n = [], i = 0; i < e.length; ++i)
                    n[i] = this.createMaterial(e[i], t);
                return n
            },
            needsTangents: function(e) {
                for (var t = 0, n = e.length; n > t; t++) {
                    var i = e[t];
                    if (i instanceof r.ShaderMaterial)
                        return !0
                }
                return !1
            },
            createMaterial: function(e, t) {
                function n(e) {
                    var t = Math.log(e) / Math.LN2;
                    return Math.pow(2, Math.round(t))
                }
                function i(e, i, o, s, l, c, u) {
                    var h, d = t + o, f = r.Loader.Handlers.get(d);
                    if (null !== f ? h = f.load(d) : (h = new r.Texture,
                    f = a.imageLoader,
                    f.crossOrigin = a.crossOrigin,
                    f.load(d, function(e) {
                        if (r.Math.isPowerOfTwo(e.width) === !1 || r.Math.isPowerOfTwo(e.height) === !1) {
                            var t = n(e.width)
                              , i = n(e.height)
                              , o = document.createElement("canvas");
                            o.width = t,
                            o.height = i;
                            var a = o.getContext("2d");
                            a.drawImage(e, 0, 0, t, i),
                            h.image = o
                        } else
                            h.image = e;
                        h.needsUpdate = !0
                    })),
                    h.sourceFile = o,
                    s && (h.repeat.set(s[0], s[1]),
                    1 !== s[0] && (h.wrapS = r.RepeatWrapping),
                    1 !== s[1] && (h.wrapT = r.RepeatWrapping)),
                    l && h.offset.set(l[0], l[1]),
                    c) {
                        var p = {
                            repeat: r.RepeatWrapping,
                            mirror: r.MirroredRepeatWrapping
                        };
                        void 0 !== p[c[0]] && (h.wrapS = p[c[0]]),
                        void 0 !== p[c[1]] && (h.wrapT = p[c[1]])
                    }
                    u && (h.anisotropy = u),
                    e[i] = h
                }
                function o(e) {
                    return (255 * e[0] << 16) + (255 * e[1] << 8) + 255 * e[2]
                }
                var a = this
                  , s = "MeshLambertMaterial"
                  , l = {
                    color: 15658734,
                    opacity: 1,
                    map: null,
                    lightMap: null,
                    normalMap: null,
                    bumpMap: null,
                    wireframe: !1
                };
                if (e.shading) {
                    var c = e.shading.toLowerCase();
                    "phong" === c ? s = "MeshPhongMaterial" : "basic" === c && (s = "MeshBasicMaterial")
                }
                void 0 !== e.blending && void 0 !== r[e.blending] && (l.blending = r[e.blending]),
                void 0 !== e.transparent && (l.transparent = e.transparent),
                void 0 !== e.opacity && e.opacity < 1 && (l.transparent = !0),
                void 0 !== e.depthTest && (l.depthTest = e.depthTest),
                void 0 !== e.depthWrite && (l.depthWrite = e.depthWrite),
                void 0 !== e.visible && (l.visible = e.visible),
                void 0 !== e.flipSided && (l.side = r.BackSide),
                void 0 !== e.doubleSided && (l.side = r.DoubleSide),
                void 0 !== e.wireframe && (l.wireframe = e.wireframe),
                void 0 !== e.vertexColors && ("face" === e.vertexColors ? l.vertexColors = r.FaceColors : e.vertexColors && (l.vertexColors = r.VertexColors)),
                e.colorDiffuse ? l.color = o(e.colorDiffuse) : e.DbgColor && (l.color = e.DbgColor),
                e.colorSpecular && (l.specular = o(e.colorSpecular)),
                e.colorEmissive && (l.emissive = o(e.colorEmissive)),
                void 0 !== e.transparency && (console.warn("THREE.Loader: transparency has been renamed to opacity"),
                e.opacity = e.transparency),
                void 0 !== e.opacity && (l.opacity = e.opacity),
                e.specularCoef && (l.shininess = e.specularCoef),
                e.mapDiffuse && t && i(l, "map", e.mapDiffuse, e.mapDiffuseRepeat, e.mapDiffuseOffset, e.mapDiffuseWrap, e.mapDiffuseAnisotropy),
                e.mapLight && t && i(l, "lightMap", e.mapLight, e.mapLightRepeat, e.mapLightOffset, e.mapLightWrap, e.mapLightAnisotropy),
                e.mapBump && t && i(l, "bumpMap", e.mapBump, e.mapBumpRepeat, e.mapBumpOffset, e.mapBumpWrap, e.mapBumpAnisotropy),
                e.mapNormal && t && i(l, "normalMap", e.mapNormal, e.mapNormalRepeat, e.mapNormalOffset, e.mapNormalWrap, e.mapNormalAnisotropy),
                e.mapSpecular && t && i(l, "specularMap", e.mapSpecular, e.mapSpecularRepeat, e.mapSpecularOffset, e.mapSpecularWrap, e.mapSpecularAnisotropy),
                e.mapAlpha && t && i(l, "alphaMap", e.mapAlpha, e.mapAlphaRepeat, e.mapAlphaOffset, e.mapAlphaWrap, e.mapAlphaAnisotropy),
                e.mapBumpScale && (l.bumpScale = e.mapBumpScale),
                e.mapNormalFactor && (l.normalScale = new r.Vector2(e.mapNormalFactor,e.mapNormalFactor));
                var u = new r[s](l);
                return void 0 !== e.DbgName && (u.name = e.DbgName),
                u
            }
        },
        r.Loader.Handlers = {
            handlers: [],
            add: function(e, t) {
                this.handlers.push(e, t)
            },
            get: function(e) {
                for (var t = 0, n = this.handlers.length; n > t; t += 2) {
                    var i = this.handlers[t]
                      , r = this.handlers[t + 1];
                    if (i.test(e))
                        return r
                }
                return null
            }
        },
        r.XHRLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager
        }
        ,
        r.XHRLoader.prototype = {
            constructor: r.XHRLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = r.Cache.get(e);
                if (void 0 !== a)
                    return void (t && t(a));
                var s = new XMLHttpRequest;
                s.open("GET", e, !0),
                s.addEventListener("load", function(n) {
                    r.Cache.add(e, this.response),
                    t && t(this.response),
                    o.manager.itemEnd(e)
                }, !1),
                void 0 !== n && s.addEventListener("progress", function(e) {
                    n(e)
                }, !1),
                void 0 !== i && s.addEventListener("error", function(e) {
                    i(e)
                }, !1),
                void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
                void 0 !== this.responseType && (s.responseType = this.responseType),
                s.send(null),
                o.manager.itemStart(e)
            },
            setResponseType: function(e) {
                this.responseType = e
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        },
        r.ImageLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager
        }
        ,
        r.ImageLoader.prototype = {
            constructor: r.ImageLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = r.Cache.get(e);
                if (void 0 !== a)
                    return void t(a);
                var s = document.createElement("img");
                return s.addEventListener("load", function(n) {
                    r.Cache.add(e, this),
                    t && t(this),
                    o.manager.itemEnd(e)
                }, !1),
                void 0 !== n && s.addEventListener("progress", function(e) {
                    n(e)
                }, !1),
                void 0 !== i && s.addEventListener("error", function(e) {
                    i(e)
                }, !1),
                void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin),
                s.src = e,
                o.manager.itemStart(e),
                s
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        },
        r.JSONLoader = function(e) {
            r.Loader.call(this, e),
            this.withCredentials = !1
        }
        ,
        r.JSONLoader.prototype = Object.create(r.Loader.prototype),
        r.JSONLoader.prototype.constructor = r.JSONLoader,
        r.JSONLoader.prototype.load = function(e, t, n) {
            n = n && "string" == typeof n ? n : this.extractUrlBase(e),
            this.onLoadStart(),
            this.loadAjaxJSON(this, e, t, n)
        }
        ,
        r.JSONLoader.prototype.loadAjaxJSON = function(e, t, n, i, o) {
            var a = new XMLHttpRequest
              , s = 0;
            a.onreadystatechange = function() {
                if (a.readyState === a.DONE)
                    if (200 === a.status || 0 === a.status) {
                        if (a.responseText) {
                            var l = JSON.parse(a.responseText)
                              , c = l.metadata;
                            if (void 0 !== c) {
                                if ("object" === c.type)
                                    return void r.error("THREE.JSONLoader: " + t + " should be loaded with THREE.ObjectLoader instead.");
                                if ("scene" === c.type)
                                    return void r.error("THREE.JSONLoader: " + t + " seems to be a Scene. Use THREE.SceneLoader instead.")
                            }
                            var u = e.parse(l, i);
                            n(u.geometry, u.materials)
                        } else
                            r.error("THREE.JSONLoader: " + t + " seems to be unreachable or the file is empty.");
                        e.onLoadComplete()
                    } else
                        r.error("THREE.JSONLoader: Couldn't load " + t + " (" + a.status + ")");
                else
                    a.readyState === a.LOADING ? o && (0 === s && (s = a.getResponseHeader("Content-Length")),
                    o({
                        total: s,
                        loaded: a.responseText.length
                    })) : a.readyState === a.HEADERS_RECEIVED && void 0 !== o && (s = a.getResponseHeader("Content-Length"))
            }
            ,
            a.open("GET", t, !0),
            a.withCredentials = this.withCredentials,
            a.send(null)
        }
        ,
        r.JSONLoader.prototype.parse = function(e, t) {
            function n(t) {
                function n(e, t) {
                    return e & 1 << t
                }
                var i, o, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w, _, S, M, C, T, E, k, A, P, L, O = e.faces, R = e.vertices, F = e.normals, B = e.colors, D = 0;
                if (void 0 !== e.uvs) {
                    for (i = 0; i < e.uvs.length; i++)
                        e.uvs[i].length && D++;
                    for (i = 0; D > i; i++)
                        a.faceVertexUvs[i] = []
                }
                for (l = 0,
                c = R.length; c > l; )
                    _ = new r.Vector3,
                    _.x = R[l++] * t,
                    _.y = R[l++] * t,
                    _.z = R[l++] * t,
                    a.vertices.push(_);
                for (l = 0,
                c = O.length; c > l; )
                    if (p = O[l++],
                    m = n(p, 0),
                    v = n(p, 1),
                    g = n(p, 3),
                    y = n(p, 4),
                    b = n(p, 5),
                    x = n(p, 6),
                    w = n(p, 7),
                    m) {
                        if (M = new r.Face3,
                        M.a = O[l],
                        M.b = O[l + 1],
                        M.c = O[l + 3],
                        C = new r.Face3,
                        C.a = O[l + 1],
                        C.b = O[l + 2],
                        C.c = O[l + 3],
                        l += 4,
                        v && (f = O[l++],
                        M.materialIndex = f,
                        C.materialIndex = f),
                        s = a.faces.length,
                        g)
                            for (i = 0; D > i; i++)
                                for (k = e.uvs[i],
                                a.faceVertexUvs[i][s] = [],
                                a.faceVertexUvs[i][s + 1] = [],
                                o = 0; 4 > o; o++)
                                    d = O[l++],
                                    P = k[2 * d],
                                    L = k[2 * d + 1],
                                    A = new r.Vector2(P,L),
                                    2 !== o && a.faceVertexUvs[i][s].push(A),
                                    0 !== o && a.faceVertexUvs[i][s + 1].push(A);
                        if (y && (h = 3 * O[l++],
                        M.normal.set(F[h++], F[h++], F[h]),
                        C.normal.copy(M.normal)),
                        b)
                            for (i = 0; 4 > i; i++)
                                h = 3 * O[l++],
                                E = new r.Vector3(F[h++],F[h++],F[h]),
                                2 !== i && M.vertexNormals.push(E),
                                0 !== i && C.vertexNormals.push(E);
                        if (x && (u = O[l++],
                        T = B[u],
                        M.color.setHex(T),
                        C.color.setHex(T)),
                        w)
                            for (i = 0; 4 > i; i++)
                                u = O[l++],
                                T = B[u],
                                2 !== i && M.vertexColors.push(new r.Color(T)),
                                0 !== i && C.vertexColors.push(new r.Color(T));
                        a.faces.push(M),
                        a.faces.push(C)
                    } else {
                        if (S = new r.Face3,
                        S.a = O[l++],
                        S.b = O[l++],
                        S.c = O[l++],
                        v && (f = O[l++],
                        S.materialIndex = f),
                        s = a.faces.length,
                        g)
                            for (i = 0; D > i; i++)
                                for (k = e.uvs[i],
                                a.faceVertexUvs[i][s] = [],
                                o = 0; 3 > o; o++)
                                    d = O[l++],
                                    P = k[2 * d],
                                    L = k[2 * d + 1],
                                    A = new r.Vector2(P,L),
                                    a.faceVertexUvs[i][s].push(A);
                        if (y && (h = 3 * O[l++],
                        S.normal.set(F[h++], F[h++], F[h])),
                        b)
                            for (i = 0; 3 > i; i++)
                                h = 3 * O[l++],
                                E = new r.Vector3(F[h++],F[h++],F[h]),
                                S.vertexNormals.push(E);
                        if (x && (u = O[l++],
                        S.color.setHex(B[u])),
                        w)
                            for (i = 0; 3 > i; i++)
                                u = O[l++],
                                S.vertexColors.push(new r.Color(B[u]));
                        a.faces.push(S)
                    }
            }
            function i() {
                var t = void 0 !== e.influencesPerVertex ? e.influencesPerVertex : 2;
                if (e.skinWeights)
                    for (var n = 0, i = e.skinWeights.length; i > n; n += t) {
                        var o = e.skinWeights[n]
                          , s = t > 1 ? e.skinWeights[n + 1] : 0
                          , l = t > 2 ? e.skinWeights[n + 2] : 0
                          , c = t > 3 ? e.skinWeights[n + 3] : 0;
                        a.skinWeights.push(new r.Vector4(o,s,l,c))
                    }
                if (e.skinIndices)
                    for (var n = 0, i = e.skinIndices.length; i > n; n += t) {
                        var u = e.skinIndices[n]
                          , h = t > 1 ? e.skinIndices[n + 1] : 0
                          , d = t > 2 ? e.skinIndices[n + 2] : 0
                          , f = t > 3 ? e.skinIndices[n + 3] : 0;
                        a.skinIndices.push(new r.Vector4(u,h,d,f))
                    }
                a.bones = e.bones,
                a.bones && a.bones.length > 0 && (a.skinWeights.length !== a.skinIndices.length || a.skinIndices.length !== a.vertices.length) && r.warn("THREE.JSONLoader: When skinning, number of vertices (" + a.vertices.length + "), skinIndices (" + a.skinIndices.length + "), and skinWeights (" + a.skinWeights.length + ") should match."),
                a.animation = e.animation,
                a.animations = e.animations
            }
            function o(t) {
                if (void 0 !== e.morphTargets) {
                    var n, i, o, s, l, c;
                    for (n = 0,
                    i = e.morphTargets.length; i > n; n++)
                        for (a.morphTargets[n] = {},
                        a.morphTargets[n].name = e.morphTargets[n].name,
                        a.morphTargets[n].vertices = [],
                        l = a.morphTargets[n].vertices,
                        c = e.morphTargets[n].vertices,
                        o = 0,
                        s = c.length; s > o; o += 3) {
                            var u = new r.Vector3;
                            u.x = c[o] * t,
                            u.y = c[o + 1] * t,
                            u.z = c[o + 2] * t,
                            l.push(u)
                        }
                }
                if (void 0 !== e.morphColors) {
                    var n, i, h, d, f, p, m;
                    for (n = 0,
                    i = e.morphColors.length; i > n; n++)
                        for (a.morphColors[n] = {},
                        a.morphColors[n].name = e.morphColors[n].name,
                        a.morphColors[n].colors = [],
                        f = a.morphColors[n].colors,
                        p = e.morphColors[n].colors,
                        h = 0,
                        d = p.length; d > h; h += 3)
                            m = new r.Color(16755200),
                            m.setRGB(p[h], p[h + 1], p[h + 2]),
                            f.push(m)
                }
            }
            var a = new r.Geometry
              , s = void 0 !== e.scale ? 1 / e.scale : 1;
            if (n(s),
            i(),
            o(s),
            a.computeFaceNormals(),
            a.computeBoundingSphere(),
            void 0 === e.materials || 0 === e.materials.length)
                return {
                    geometry: a
                };
            var l = this.initMaterials(e.materials, t);
            return this.needsTangents(l) && a.computeTangents(),
            {
                geometry: a,
                materials: l
            }
        }
        ,
        r.LoadingManager = function(e, t, n) {
            var i = this
              , r = 0
              , o = 0;
            this.onLoad = e,
            this.onProgress = t,
            this.onError = n,
            this.itemStart = function(e) {
                o++
            }
            ,
            this.itemEnd = function(e) {
                r++,
                void 0 !== i.onProgress && i.onProgress(e, r, o),
                r === o && void 0 !== i.onLoad && i.onLoad()
            }
        }
        ,
        r.DefaultLoadingManager = new r.LoadingManager,
        r.BufferGeometryLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager
        }
        ,
        r.BufferGeometryLoader.prototype = {
            constructor: r.BufferGeometryLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(e, function(e) {
                    t(o.parse(JSON.parse(e)))
                }, n, i)
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            parse: function(e) {
                var t = new r.BufferGeometry
                  , n = e.data.attributes;
                for (var o in n) {
                    var a = n[o]
                      , s = new i[a.type](a.array);
                    t.addAttribute(o, new r.BufferAttribute(s,a.itemSize))
                }
                var l = e.data.offsets;
                void 0 !== l && (t.offsets = JSON.parse(JSON.stringify(l)));
                var c = e.data.boundingSphere;
                if (void 0 !== c) {
                    var u = new r.Vector3;
                    void 0 !== c.center && u.fromArray(c.center),
                    t.boundingSphere = new r.Sphere(u,c.radius)
                }
                return t
            }
        },
        r.MaterialLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager
        }
        ,
        r.MaterialLoader.prototype = {
            constructor: r.MaterialLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(e, function(e) {
                    t(o.parse(JSON.parse(e)))
                }, n, i)
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            parse: function(e) {
                var t = new r[e.type];
                if (void 0 !== e.color && t.color.setHex(e.color),
                void 0 !== e.emissive && t.emissive.setHex(e.emissive),
                void 0 !== e.specular && t.specular.setHex(e.specular),
                void 0 !== e.shininess && (t.shininess = e.shininess),
                void 0 !== e.uniforms && (t.uniforms = e.uniforms),
                void 0 !== e.vertexShader && (t.vertexShader = e.vertexShader),
                void 0 !== e.fragmentShader && (t.fragmentShader = e.fragmentShader),
                void 0 !== e.vertexColors && (t.vertexColors = e.vertexColors),
                void 0 !== e.shading && (t.shading = e.shading),
                void 0 !== e.blending && (t.blending = e.blending),
                void 0 !== e.side && (t.side = e.side),
                void 0 !== e.opacity && (t.opacity = e.opacity),
                void 0 !== e.transparent && (t.transparent = e.transparent),
                void 0 !== e.wireframe && (t.wireframe = e.wireframe),
                void 0 !== e.size && (t.size = e.size),
                void 0 !== e.sizeAttenuation && (t.sizeAttenuation = e.sizeAttenuation),
                void 0 !== e.materials)
                    for (var n = 0, i = e.materials.length; i > n; n++)
                        t.materials.push(this.parse(e.materials[n]));
                return t
            }
        },
        r.ObjectLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager,
            this.texturePath = ""
        }
        ,
        r.ObjectLoader.prototype = {
            constructor: r.ObjectLoader,
            load: function(e, t, n, i) {
                "" === this.texturePath && (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
                var o = this
                  , a = new r.XHRLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(e, function(e) {
                    o.parse(JSON.parse(e), t)
                }, n, i)
            },
            setTexturePath: function(e) {
                this.texturePath = e
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            },
            parse: function(e, t) {
                var n = this.parseGeometries(e.geometries)
                  , i = this.parseImages(e.images, function() {
                    void 0 !== t && t(a)
                })
                  , r = this.parseTextures(e.textures, i)
                  , o = this.parseMaterials(e.materials, r)
                  , a = this.parseObject(e.object, n, o);
                return (void 0 === e.images || 0 === e.images.length) && void 0 !== t && t(a),
                a
            },
            parseGeometries: function(e) {
                var t = {};
                if (void 0 !== e)
                    for (var n = new r.JSONLoader, i = new r.BufferGeometryLoader, o = 0, a = e.length; a > o; o++) {
                        var s, l = e[o];
                        switch (l.type) {
                        case "PlaneGeometry":
                        case "PlaneBufferGeometry":
                            s = new r[l.type](l.width,l.height,l.widthSegments,l.heightSegments);
                            break;
                        case "BoxGeometry":
                        case "CubeGeometry":
                            s = new r.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);
                            break;
                        case "CircleGeometry":
                            s = new r.CircleGeometry(l.radius,l.segments);
                            break;
                        case "CylinderGeometry":
                            s = new r.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded);
                            break;
                        case "SphereGeometry":
                            s = new r.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);
                            break;
                        case "IcosahedronGeometry":
                            s = new r.IcosahedronGeometry(l.radius,l.detail);
                            break;
                        case "TorusGeometry":
                            s = new r.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);
                            break;
                        case "TorusKnotGeometry":
                            s = new r.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);
                            break;
                        case "BufferGeometry":
                            s = i.parse(l);
                            break;
                        case "Geometry":
                            s = n.parse(l.data).geometry
                        }
                        s.uuid = l.uuid,
                        void 0 !== l.name && (s.name = l.name),
                        t[l.uuid] = s
                    }
                return t
            },
            parseMaterials: function(e, t) {
                var n = {};
                if (void 0 !== e)
                    for (var i = function(e) {
                        return void 0 === t[e] && r.warn("THREE.ObjectLoader: Undefined texture", e),
                        t[e]
                    }, o = new r.MaterialLoader, a = 0, s = e.length; s > a; a++) {
                        var l = e[a]
                          , c = o.parse(l);
                        c.uuid = l.uuid,
                        void 0 !== l.name && (c.name = l.name),
                        void 0 !== l.map && (c.map = i(l.map)),
                        void 0 !== l.bumpMap && (c.bumpMap = i(l.bumpMap),
                        l.bumpScale && (c.bumpScale = new r.Vector2(l.bumpScale,l.bumpScale))),
                        void 0 !== l.alphaMap && (c.alphaMap = i(l.alphaMap)),
                        void 0 !== l.envMap && (c.envMap = i(l.envMap)),
                        void 0 !== l.normalMap && (c.normalMap = i(l.normalMap),
                        l.normalScale && (c.normalScale = new r.Vector2(l.normalScale,l.normalScale))),
                        void 0 !== l.lightMap && (c.lightMap = i(l.lightMap)),
                        void 0 !== l.specularMap && (c.specularMap = i(l.specularMap)),
                        n[l.uuid] = c
                    }
                return n
            },
            parseImages: function(e, t) {
                var n = this
                  , i = {};
                if (void 0 !== e && e.length > 0) {
                    var o = new r.LoadingManager(t)
                      , a = new r.ImageLoader(o);
                    a.setCrossOrigin(this.crossOrigin);
                    for (var s = function(e) {
                        return n.manager.itemStart(e),
                        a.load(e, function() {
                            n.manager.itemEnd(e)
                        })
                    }, l = 0, c = e.length; c > l; l++) {
                        var u = e[l]
                          , h = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url) ? u.url : n.texturePath + u.url;
                        i[u.uuid] = s(h)
                    }
                }
                return i
            },
            parseTextures: function(e, t) {
                var n = {};
                if (void 0 !== e)
                    for (var i = 0, o = e.length; o > i; i++) {
                        var a = e[i];
                        void 0 === a.image && r.warn('THREE.ObjectLoader: No "image" speficied for', a.uuid),
                        void 0 === t[a.image] && r.warn("THREE.ObjectLoader: Undefined image", a.image);
                        var s = new r.Texture(t[a.image]);
                        s.needsUpdate = !0,
                        s.uuid = a.uuid,
                        void 0 !== a.name && (s.name = a.name),
                        void 0 !== a.repeat && (s.repeat = new r.Vector2(a.repeat[0],a.repeat[1])),
                        void 0 !== a.minFilter && (s.minFilter = r[a.minFilter]),
                        void 0 !== a.magFilter && (s.magFilter = r[a.magFilter]),
                        void 0 !== a.anisotropy && (s.anisotropy = a.anisotropy),
                        a.wrap instanceof Array && (s.wrapS = r[a.wrap[0]],
                        s.wrapT = r[a.wrap[1]]),
                        n[a.uuid] = s
                    }
                return n
            },
            parseObject: function() {
                var e = new r.Matrix4;
                return function(t, n, i) {
                    var o, a = function(e) {
                        return void 0 === n[e] && r.warn("THREE.ObjectLoader: Undefined geometry", e),
                        n[e]
                    }, s = function(e) {
                        return void 0 === i[e] && r.warn("THREE.ObjectLoader: Undefined material", e),
                        i[e]
                    };
                    switch (t.type) {
                    case "Scene":
                        o = new r.Scene;
                        break;
                    case "PerspectiveCamera":
                        o = new r.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);
                        break;
                    case "OrthographicCamera":
                        o = new r.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);
                        break;
                    case "AmbientLight":
                        o = new r.AmbientLight(t.color);
                        break;
                    case "DirectionalLight":
                        o = new r.DirectionalLight(t.color,t.intensity);
                        break;
                    case "PointLight":
                        o = new r.PointLight(t.color,t.intensity,t.distance,t.decay);
                        break;
                    case "SpotLight":
                        o = new r.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);
                        break;
                    case "HemisphereLight":
                        o = new r.HemisphereLight(t.color,t.groundColor,t.intensity);
                        break;
                    case "Mesh":
                        o = new r.Mesh(a(t.geometry),s(t.material));
                        break;
                    case "Line":
                        o = new r.Line(a(t.geometry),s(t.material),t.mode);
                        break;
                    case "PointCloud":
                        o = new r.PointCloud(a(t.geometry),s(t.material));
                        break;
                    case "Sprite":
                        o = new r.Sprite(s(t.material));
                        break;
                    case "Group":
                        o = new r.Group;
                        break;
                    default:
                        o = new r.Object3D
                    }
                    if (o.uuid = t.uuid,
                    void 0 !== t.name && (o.name = t.name),
                    void 0 !== t.matrix ? (e.fromArray(t.matrix),
                    e.decompose(o.position, o.quaternion, o.scale)) : (void 0 !== t.position && o.position.fromArray(t.position),
                    void 0 !== t.rotation && o.rotation.fromArray(t.rotation),
                    void 0 !== t.scale && o.scale.fromArray(t.scale)),
                    void 0 !== t.visible && (o.visible = t.visible),
                    void 0 !== t.userData && (o.userData = t.userData),
                    void 0 !== t.children)
                        for (var l in t.children)
                            o.add(this.parseObject(t.children[l], n, i));
                    return o
                }
            }()
        },
        r.TextureLoader = function(e) {
            this.manager = void 0 !== e ? e : r.DefaultLoadingManager
        }
        ,
        r.TextureLoader.prototype = {
            constructor: r.TextureLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = new r.ImageLoader(o.manager);
                a.setCrossOrigin(this.crossOrigin),
                a.load(e, function(e) {
                    var n = new r.Texture(e);
                    n.needsUpdate = !0,
                    void 0 !== t && t(n)
                }, n, i)
            },
            setCrossOrigin: function(e) {
                this.crossOrigin = e
            }
        },
        r.DataTextureLoader = r.BinaryTextureLoader = function() {
            this._parser = null
        }
        ,
        r.BinaryTextureLoader.prototype = {
            constructor: r.BinaryTextureLoader,
            load: function(e, t, n, i) {
                var o = this
                  , a = new r.DataTexture
                  , s = new r.XHRLoader;
                return s.setResponseType("arraybuffer"),
                s.load(e, function(e) {
                    var n = o._parser(e);
                    n && (void 0 !== n.image ? a.image = n.image : void 0 !== n.data && (a.image.width = n.width,
                    a.image.height = n.height,
                    a.image.data = n.data),
                    a.wrapS = void 0 !== n.wrapS ? n.wrapS : r.ClampToEdgeWrapping,
                    a.wrapT = void 0 !== n.wrapT ? n.wrapT : r.ClampToEdgeWrapping,
                    a.magFilter = void 0 !== n.magFilter ? n.magFilter : r.LinearFilter,
                    a.minFilter = void 0 !== n.minFilter ? n.minFilter : r.LinearMipMapLinearFilter,
                    a.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1,
                    void 0 !== n.format && (a.format = n.format),
                    void 0 !== n.type && (a.type = n.type),
                    void 0 !== n.mipmaps && (a.mipmaps = n.mipmaps),
                    1 === n.mipmapCount && (a.minFilter = r.LinearFilter),
                    a.needsUpdate = !0,
                    t && t(a, n))
                }, n, i),
                a
            }
        },
        r.CompressedTextureLoader = function() {
            this._parser = null
        }
        ,
        r.CompressedTextureLoader.prototype = {
            constructor: r.CompressedTextureLoader,
            load: function(e, t, n) {
                var i = this
                  , o = []
                  , a = new r.CompressedTexture;
                a.image = o;
                var s = new r.XHRLoader;
                if (s.setResponseType("arraybuffer"),
                e instanceof Array)
                    for (var l = 0, c = function(n) {
                        s.load(e[n], function(e) {
                            var s = i._parser(e, !0);
                            o[n] = {
                                width: s.width,
                                height: s.height,
                                format: s.format,
                                mipmaps: s.mipmaps
                            },
                            l += 1,
                            6 === l && (1 == s.mipmapCount && (a.minFilter = r.LinearFilter),
                            a.format = s.format,
                            a.needsUpdate = !0,
                            t && t(a))
                        })
                    }, u = 0, h = e.length; h > u; ++u)
                        c(u);
                else
                    s.load(e, function(e) {
                        var n = i._parser(e, !0);
                        if (n.isCubemap)
                            for (var s = n.mipmaps.length / n.mipmapCount, l = 0; s > l; l++) {
                                o[l] = {
                                    mipmaps: []
                                };
                                for (var c = 0; c < n.mipmapCount; c++)
                                    o[l].mipmaps.push(n.mipmaps[l * n.mipmapCount + c]),
                                    o[l].format = n.format,
                                    o[l].width = n.width,
                                    o[l].height = n.height
                            }
                        else
                            a.image.width = n.width,
                            a.image.height = n.height,
                            a.mipmaps = n.mipmaps;
                        1 === n.mipmapCount && (a.minFilter = r.LinearFilter),
                        a.format = n.format,
                        a.needsUpdate = !0,
                        t && t(a)
                    });
                return a
            }
        },
        r.Material = function() {
            Object.defineProperty(this, "id", {
                value: r.MaterialIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.type = "Material",
            this.side = r.FrontSide,
            this.opacity = 1,
            this.transparent = !1,
            this.blending = r.NormalBlending,
            this.blendSrc = r.SrcAlphaFactor,
            this.blendDst = r.OneMinusSrcAlphaFactor,
            this.blendEquation = r.AddEquation,
            this.blendSrcAlpha = null,
            this.blendDstAlpha = null,
            this.blendEquationAlpha = null,
            this.depthTest = !0,
            this.depthWrite = !0,
            this.colorWrite = !0,
            this.polygonOffset = !1,
            this.polygonOffsetFactor = 0,
            this.polygonOffsetUnits = 0,
            this.alphaTest = 0,
            this.overdraw = 0,
            this.visible = !0,
            this._needsUpdate = !0
        }
        ,
        r.Material.prototype = {
            constructor: r.Material,
            get needsUpdate() {
                return this._needsUpdate
            },
            set needsUpdate(e) {
                e === !0 && this.update(),
                this._needsUpdate = e
            },
            setValues: function(e) {
                if (void 0 !== e)
                    for (var t in e) {
                        var n = e[t];
                        if (void 0 !== n) {
                            if (t in this) {
                                var i = this[t];
                                i instanceof r.Color ? i.set(n) : i instanceof r.Vector3 && n instanceof r.Vector3 ? i.copy(n) : "overdraw" == t ? this[t] = Number(n) : this[t] = n
                            }
                        } else
                            r.warn("THREE.Material: '" + t + "' parameter is undefined.")
                    }
            },
            toJSON: function() {
                var e = {
                    metadata: {
                        version: 4.2,
                        type: "material",
                        generator: "MaterialExporter"
                    },
                    uuid: this.uuid,
                    type: this.type
                };
                return "" !== this.name && (e.name = this.name),
                this instanceof r.MeshBasicMaterial ? (e.color = this.color.getHex(),
                this.vertexColors !== r.NoColors && (e.vertexColors = this.vertexColors),
                this.blending !== r.NormalBlending && (e.blending = this.blending),
                this.side !== r.FrontSide && (e.side = this.side)) : this instanceof r.MeshLambertMaterial ? (e.color = this.color.getHex(),
                e.emissive = this.emissive.getHex(),
                this.vertexColors !== r.NoColors && (e.vertexColors = this.vertexColors),
                this.shading !== r.SmoothShading && (e.shading = this.shading),
                this.blending !== r.NormalBlending && (e.blending = this.blending),
                this.side !== r.FrontSide && (e.side = this.side)) : this instanceof r.MeshPhongMaterial ? (e.color = this.color.getHex(),
                e.emissive = this.emissive.getHex(),
                e.specular = this.specular.getHex(),
                e.shininess = this.shininess,
                this.vertexColors !== r.NoColors && (e.vertexColors = this.vertexColors),
                this.shading !== r.SmoothShading && (e.shading = this.shading),
                this.blending !== r.NormalBlending && (e.blending = this.blending),
                this.side !== r.FrontSide && (e.side = this.side)) : this instanceof r.MeshNormalMaterial ? (this.blending !== r.NormalBlending && (e.blending = this.blending),
                this.side !== r.FrontSide && (e.side = this.side)) : this instanceof r.MeshDepthMaterial ? (this.blending !== r.NormalBlending && (e.blending = this.blending),
                this.side !== r.FrontSide && (e.side = this.side)) : this instanceof r.PointCloudMaterial ? (e.size = this.size,
                e.sizeAttenuation = this.sizeAttenuation,
                e.color = this.color.getHex(),
                this.vertexColors !== r.NoColors && (e.vertexColors = this.vertexColors),
                this.blending !== r.NormalBlending && (e.blending = this.blending)) : this instanceof r.ShaderMaterial ? (e.uniforms = this.uniforms,
                e.vertexShader = this.vertexShader,
                e.fragmentShader = this.fragmentShader) : this instanceof r.SpriteMaterial && (e.color = this.color.getHex()),
                this.opacity < 1 && (e.opacity = this.opacity),
                this.transparent !== !1 && (e.transparent = this.transparent),
                this.wireframe !== !1 && (e.wireframe = this.wireframe),
                e
            },
            clone: function(e) {
                return void 0 === e && (e = new r.Material),
                e.name = this.name,
                e.side = this.side,
                e.opacity = this.opacity,
                e.transparent = this.transparent,
                e.blending = this.blending,
                e.blendSrc = this.blendSrc,
                e.blendDst = this.blendDst,
                e.blendEquation = this.blendEquation,
                e.blendSrcAlpha = this.blendSrcAlpha,
                e.blendDstAlpha = this.blendDstAlpha,
                e.blendEquationAlpha = this.blendEquationAlpha,
                e.depthTest = this.depthTest,
                e.depthWrite = this.depthWrite,
                e.polygonOffset = this.polygonOffset,
                e.polygonOffsetFactor = this.polygonOffsetFactor,
                e.polygonOffsetUnits = this.polygonOffsetUnits,
                e.alphaTest = this.alphaTest,
                e.overdraw = this.overdraw,
                e.visible = this.visible,
                e
            },
            update: function() {
                this.dispatchEvent({
                    type: "update"
                })
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.Material.prototype),
        r.MaterialIdCount = 0,
        r.LineBasicMaterial = function(e) {
            r.Material.call(this),
            this.type = "LineBasicMaterial",
            this.color = new r.Color(16777215),
            this.linewidth = 1,
            this.linecap = "round",
            this.linejoin = "round",
            this.vertexColors = r.NoColors,
            this.fog = !0,
            this.setValues(e)
        }
        ,
        r.LineBasicMaterial.prototype = Object.create(r.Material.prototype),
        r.LineBasicMaterial.prototype.constructor = r.LineBasicMaterial,
        r.LineBasicMaterial.prototype.clone = function() {
            var e = new r.LineBasicMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.linewidth = this.linewidth,
            e.linecap = this.linecap,
            e.linejoin = this.linejoin,
            e.vertexColors = this.vertexColors,
            e.fog = this.fog,
            e
        }
        ,
        r.LineDashedMaterial = function(e) {
            r.Material.call(this),
            this.type = "LineDashedMaterial",
            this.color = new r.Color(16777215),
            this.linewidth = 1,
            this.scale = 1,
            this.dashSize = 3,
            this.gapSize = 1,
            this.vertexColors = !1,
            this.fog = !0,
            this.setValues(e)
        }
        ,
        r.LineDashedMaterial.prototype = Object.create(r.Material.prototype),
        r.LineDashedMaterial.prototype.constructor = r.LineDashedMaterial,
        r.LineDashedMaterial.prototype.clone = function() {
            var e = new r.LineDashedMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.linewidth = this.linewidth,
            e.scale = this.scale,
            e.dashSize = this.dashSize,
            e.gapSize = this.gapSize,
            e.vertexColors = this.vertexColors,
            e.fog = this.fog,
            e
        }
        ,
        r.MeshBasicMaterial = function(e) {
            r.Material.call(this),
            this.type = "MeshBasicMaterial",
            this.color = new r.Color(16777215),
            this.map = null,
            this.lightMap = null,
            this.specularMap = null,
            this.alphaMap = null,
            this.envMap = null,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.shading = r.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinecap = "round",
            this.wireframeLinejoin = "round",
            this.vertexColors = r.NoColors,
            this.skinning = !1,
            this.morphTargets = !1,
            this.setValues(e)
        }
        ,
        r.MeshBasicMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshBasicMaterial.prototype.constructor = r.MeshBasicMaterial,
        r.MeshBasicMaterial.prototype.clone = function() {
            var e = new r.MeshBasicMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.map = this.map,
            e.lightMap = this.lightMap,
            e.specularMap = this.specularMap,
            e.alphaMap = this.alphaMap,
            e.envMap = this.envMap,
            e.combine = this.combine,
            e.reflectivity = this.reflectivity,
            e.refractionRatio = this.refractionRatio,
            e.fog = this.fog,
            e.shading = this.shading,
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e.wireframeLinecap = this.wireframeLinecap,
            e.wireframeLinejoin = this.wireframeLinejoin,
            e.vertexColors = this.vertexColors,
            e.skinning = this.skinning,
            e.morphTargets = this.morphTargets,
            e
        }
        ,
        r.MeshLambertMaterial = function(e) {
            r.Material.call(this),
            this.type = "MeshLambertMaterial",
            this.color = new r.Color(16777215),
            this.emissive = new r.Color(0),
            this.wrapAround = !1,
            this.wrapRGB = new r.Vector3(1,1,1),
            this.map = null,
            this.lightMap = null,
            this.specularMap = null,
            this.alphaMap = null,
            this.envMap = null,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.shading = r.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinecap = "round",
            this.wireframeLinejoin = "round",
            this.vertexColors = r.NoColors,
            this.skinning = !1,
            this.morphTargets = !1,
            this.morphNormals = !1,
            this.setValues(e)
        }
        ,
        r.MeshLambertMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshLambertMaterial.prototype.constructor = r.MeshLambertMaterial,
        r.MeshLambertMaterial.prototype.clone = function() {
            var e = new r.MeshLambertMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.emissive.copy(this.emissive),
            e.wrapAround = this.wrapAround,
            e.wrapRGB.copy(this.wrapRGB),
            e.map = this.map,
            e.lightMap = this.lightMap,
            e.specularMap = this.specularMap,
            e.alphaMap = this.alphaMap,
            e.envMap = this.envMap,
            e.combine = this.combine,
            e.reflectivity = this.reflectivity,
            e.refractionRatio = this.refractionRatio,
            e.fog = this.fog,
            e.shading = this.shading,
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e.wireframeLinecap = this.wireframeLinecap,
            e.wireframeLinejoin = this.wireframeLinejoin,
            e.vertexColors = this.vertexColors,
            e.skinning = this.skinning,
            e.morphTargets = this.morphTargets,
            e.morphNormals = this.morphNormals,
            e
        }
        ,
        r.MeshPhongMaterial = function(e) {
            r.Material.call(this),
            this.type = "MeshPhongMaterial",
            this.color = new r.Color(16777215),
            this.emissive = new r.Color(0),
            this.specular = new r.Color(1118481),
            this.shininess = 30,
            this.metal = !1,
            this.wrapAround = !1,
            this.wrapRGB = new r.Vector3(1,1,1),
            this.map = null,
            this.lightMap = null,
            this.bumpMap = null,
            this.bumpScale = 1,
            this.normalMap = null,
            this.normalScale = new r.Vector2(1,1),
            this.specularMap = null,
            this.alphaMap = null,
            this.envMap = null,
            this.combine = r.MultiplyOperation,
            this.reflectivity = 1,
            this.refractionRatio = .98,
            this.fog = !0,
            this.shading = r.SmoothShading,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.wireframeLinecap = "round",
            this.wireframeLinejoin = "round",
            this.vertexColors = r.NoColors,
            this.skinning = !1,
            this.morphTargets = !1,
            this.morphNormals = !1,
            this.setValues(e)
        }
        ,
        r.MeshPhongMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshPhongMaterial.prototype.constructor = r.MeshPhongMaterial,
        r.MeshPhongMaterial.prototype.clone = function() {
            var e = new r.MeshPhongMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.emissive.copy(this.emissive),
            e.specular.copy(this.specular),
            e.shininess = this.shininess,
            e.metal = this.metal,
            e.wrapAround = this.wrapAround,
            e.wrapRGB.copy(this.wrapRGB),
            e.map = this.map,
            e.lightMap = this.lightMap,
            e.bumpMap = this.bumpMap,
            e.bumpScale = this.bumpScale,
            e.normalMap = this.normalMap,
            e.normalScale.copy(this.normalScale),
            e.specularMap = this.specularMap,
            e.alphaMap = this.alphaMap,
            e.envMap = this.envMap,
            e.combine = this.combine,
            e.reflectivity = this.reflectivity,
            e.refractionRatio = this.refractionRatio,
            e.fog = this.fog,
            e.shading = this.shading,
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e.wireframeLinecap = this.wireframeLinecap,
            e.wireframeLinejoin = this.wireframeLinejoin,
            e.vertexColors = this.vertexColors,
            e.skinning = this.skinning,
            e.morphTargets = this.morphTargets,
            e.morphNormals = this.morphNormals,
            e
        }
        ,
        r.MeshDepthMaterial = function(e) {
            r.Material.call(this),
            this.type = "MeshDepthMaterial",
            this.morphTargets = !1,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.setValues(e)
        }
        ,
        r.MeshDepthMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshDepthMaterial.prototype.constructor = r.MeshDepthMaterial,
        r.MeshDepthMaterial.prototype.clone = function() {
            var e = new r.MeshDepthMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e
        }
        ,
        r.MeshNormalMaterial = function(e) {
            r.Material.call(this, e),
            this.type = "MeshNormalMaterial",
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.morphTargets = !1,
            this.setValues(e)
        }
        ,
        r.MeshNormalMaterial.prototype = Object.create(r.Material.prototype),
        r.MeshNormalMaterial.prototype.constructor = r.MeshNormalMaterial,
        r.MeshNormalMaterial.prototype.clone = function() {
            var e = new r.MeshNormalMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e
        }
        ,
        r.MeshFaceMaterial = function(e) {
            this.uuid = r.Math.generateUUID(),
            this.type = "MeshFaceMaterial",
            this.materials = e instanceof Array ? e : []
        }
        ,
        r.MeshFaceMaterial.prototype = {
            constructor: r.MeshFaceMaterial,
            toJSON: function() {
                for (var e = {
                    metadata: {
                        version: 4.2,
                        type: "material",
                        generator: "MaterialExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    materials: []
                }, t = 0, n = this.materials.length; n > t; t++)
                    e.materials.push(this.materials[t].toJSON());
                return e
            },
            clone: function() {
                for (var e = new r.MeshFaceMaterial, t = 0; t < this.materials.length; t++)
                    e.materials.push(this.materials[t].clone());
                return e
            }
        },
        r.PointCloudMaterial = function(e) {
            r.Material.call(this),
            this.type = "PointCloudMaterial",
            this.color = new r.Color(16777215),
            this.map = null,
            this.size = 1,
            this.sizeAttenuation = !0,
            this.vertexColors = r.NoColors,
            this.fog = !0,
            this.setValues(e)
        }
        ,
        r.PointCloudMaterial.prototype = Object.create(r.Material.prototype),
        r.PointCloudMaterial.prototype.constructor = r.PointCloudMaterial,
        r.PointCloudMaterial.prototype.clone = function() {
            var e = new r.PointCloudMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.map = this.map,
            e.size = this.size,
            e.sizeAttenuation = this.sizeAttenuation,
            e.vertexColors = this.vertexColors,
            e.fog = this.fog,
            e
        }
        ,
        r.ParticleBasicMaterial = function(e) {
            return r.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),
            new r.PointCloudMaterial(e)
        }
        ,
        r.ParticleSystemMaterial = function(e) {
            return r.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),
            new r.PointCloudMaterial(e)
        }
        ,
        r.ShaderMaterial = function(e) {
            r.Material.call(this),
            this.type = "ShaderMaterial",
            this.defines = {},
            this.uniforms = {},
            this.attributes = null,
            this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",
            this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",
            this.shading = r.SmoothShading,
            this.linewidth = 1,
            this.wireframe = !1,
            this.wireframeLinewidth = 1,
            this.fog = !1,
            this.lights = !1,
            this.vertexColors = r.NoColors,
            this.skinning = !1,
            this.morphTargets = !1,
            this.morphNormals = !1,
            this.defaultAttributeValues = {
                color: [1, 1, 1],
                uv: [0, 0],
                uv2: [0, 0]
            },
            this.index0AttributeName = void 0,
            this.setValues(e)
        }
        ,
        r.ShaderMaterial.prototype = Object.create(r.Material.prototype),
        r.ShaderMaterial.prototype.constructor = r.ShaderMaterial,
        r.ShaderMaterial.prototype.clone = function() {
            var e = new r.ShaderMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.fragmentShader = this.fragmentShader,
            e.vertexShader = this.vertexShader,
            e.uniforms = r.UniformsUtils.clone(this.uniforms),
            e.attributes = this.attributes,
            e.defines = this.defines,
            e.shading = this.shading,
            e.wireframe = this.wireframe,
            e.wireframeLinewidth = this.wireframeLinewidth,
            e.fog = this.fog,
            e.lights = this.lights,
            e.vertexColors = this.vertexColors,
            e.skinning = this.skinning,
            e.morphTargets = this.morphTargets,
            e.morphNormals = this.morphNormals,
            e
        }
        ,
        r.RawShaderMaterial = function(e) {
            r.ShaderMaterial.call(this, e),
            this.type = "RawShaderMaterial"
        }
        ,
        r.RawShaderMaterial.prototype = Object.create(r.ShaderMaterial.prototype),
        r.RawShaderMaterial.prototype.constructor = r.RawShaderMaterial,
        r.RawShaderMaterial.prototype.clone = function() {
            var e = new r.RawShaderMaterial;
            return r.ShaderMaterial.prototype.clone.call(this, e),
            e
        }
        ,
        r.SpriteMaterial = function(e) {
            r.Material.call(this),
            this.type = "SpriteMaterial",
            this.color = new r.Color(16777215),
            this.map = null,
            this.rotation = 0,
            this.fog = !1,
            this.setValues(e)
        }
        ,
        r.SpriteMaterial.prototype = Object.create(r.Material.prototype),
        r.SpriteMaterial.prototype.constructor = r.SpriteMaterial,
        r.SpriteMaterial.prototype.clone = function() {
            var e = new r.SpriteMaterial;
            return r.Material.prototype.clone.call(this, e),
            e.color.copy(this.color),
            e.map = this.map,
            e.rotation = this.rotation,
            e.fog = this.fog,
            e
        }
        ,
        r.Texture = function(e, t, n, i, o, a, s, l, c) {
            Object.defineProperty(this, "id", {
                value: r.TextureIdCount++
            }),
            this.uuid = r.Math.generateUUID(),
            this.name = "",
            this.sourceFile = "",
            this.image = void 0 !== e ? e : r.Texture.DEFAULT_IMAGE,
            this.mipmaps = [],
            this.mapping = void 0 !== t ? t : r.Texture.DEFAULT_MAPPING,
            this.wrapS = void 0 !== n ? n : r.ClampToEdgeWrapping,
            this.wrapT = void 0 !== i ? i : r.ClampToEdgeWrapping,
            this.magFilter = void 0 !== o ? o : r.LinearFilter,
            this.minFilter = void 0 !== a ? a : r.LinearMipMapLinearFilter,
            this.anisotropy = void 0 !== c ? c : 1,
            this.format = void 0 !== s ? s : r.RGBAFormat,
            this.type = void 0 !== l ? l : r.UnsignedByteType,
            this.offset = new r.Vector2(0,0),
            this.repeat = new r.Vector2(1,1),
            this.generateMipmaps = !0,
            this.premultiplyAlpha = !1,
            this.flipY = !0,
            this.unpackAlignment = 4,
            this._needsUpdate = !1,
            this.onUpdate = null
        }
        ,
        r.Texture.DEFAULT_IMAGE = void 0,
        r.Texture.DEFAULT_MAPPING = r.UVMapping,
        r.Texture.prototype = {
            constructor: r.Texture,
            get needsUpdate() {
                return this._needsUpdate
            },
            set needsUpdate(e) {
                e === !0 && this.update(),
                this._needsUpdate = e
            },
            clone: function(e) {
                return void 0 === e && (e = new r.Texture),
                e.image = this.image,
                e.mipmaps = this.mipmaps.slice(0),
                e.mapping = this.mapping,
                e.wrapS = this.wrapS,
                e.wrapT = this.wrapT,
                e.magFilter = this.magFilter,
                e.minFilter = this.minFilter,
                e.anisotropy = this.anisotropy,
                e.format = this.format,
                e.type = this.type,
                e.offset.copy(this.offset),
                e.repeat.copy(this.repeat),
                e.generateMipmaps = this.generateMipmaps,
                e.premultiplyAlpha = this.premultiplyAlpha,
                e.flipY = this.flipY,
                e.unpackAlignment = this.unpackAlignment,
                e
            },
            update: function() {
                this.dispatchEvent({
                    type: "update"
                })
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.Texture.prototype),
        r.TextureIdCount = 0,
        r.CubeTexture = function(e, t, n, i, o, a, s, l, c) {
            t = void 0 !== t ? t : r.CubeReflectionMapping,
            r.Texture.call(this, e, t, n, i, o, a, s, l, c),
            this.images = e
        }
        ,
        r.CubeTexture.prototype = Object.create(r.Texture.prototype),
        r.CubeTexture.prototype.constructor = r.CubeTexture,
        r.CubeTexture.clone = function(e) {
            return void 0 === e && (e = new r.CubeTexture),
            r.Texture.prototype.clone.call(this, e),
            e.images = this.images,
            e
        }
        ,
        r.CompressedTexture = function(e, t, n, i, o, a, s, l, c, u, h) {
            r.Texture.call(this, null, a, s, l, c, u, i, o, h),
            this.image = {
                width: t,
                height: n
            },
            this.mipmaps = e,
            this.flipY = !1,
            this.generateMipmaps = !1
        }
        ,
        r.CompressedTexture.prototype = Object.create(r.Texture.prototype),
        r.CompressedTexture.prototype.constructor = r.CompressedTexture,
        r.CompressedTexture.prototype.clone = function() {
            var e = new r.CompressedTexture;
            return r.Texture.prototype.clone.call(this, e),
            e
        }
        ,
        r.DataTexture = function(e, t, n, i, o, a, s, l, c, u, h) {
            r.Texture.call(this, null, a, s, l, c, u, i, o, h),
            this.image = {
                data: e,
                width: t,
                height: n
            }
        }
        ,
        r.DataTexture.prototype = Object.create(r.Texture.prototype),
        r.DataTexture.prototype.constructor = r.DataTexture,
        r.DataTexture.prototype.clone = function() {
            var e = new r.DataTexture;
            return r.Texture.prototype.clone.call(this, e),
            e
        }
        ,
        r.VideoTexture = function(e, t, n, i, o, a, s, l, c) {
            r.Texture.call(this, e, t, n, i, o, a, s, l, c),
            this.generateMipmaps = !1;
            var u = this
              , h = function() {
                requestAnimationFrame(h),
                e.readyState === e.HAVE_ENOUGH_DATA && (u.needsUpdate = !0)
            };
            h()
        }
        ,
        r.VideoTexture.prototype = Object.create(r.Texture.prototype),
        r.VideoTexture.prototype.constructor = r.VideoTexture,
        r.Group = function() {
            r.Object3D.call(this),
            this.type = "Group"
        }
        ,
        r.Group.prototype = Object.create(r.Object3D.prototype),
        r.Group.prototype.constructor = r.Group,
        r.PointCloud = function(e, t) {
            r.Object3D.call(this),
            this.type = "PointCloud",
            this.geometry = void 0 !== e ? e : new r.Geometry,
            this.material = void 0 !== t ? t : new r.PointCloudMaterial({
                color: 16777215 * Math.random()
            })
        }
        ,
        r.PointCloud.prototype = Object.create(r.Object3D.prototype),
        r.PointCloud.prototype.constructor = r.PointCloud,
        r.PointCloud.prototype.raycast = function() {
            var e = new r.Matrix4
              , t = new r.Ray;
            return function(n, i) {
                var o = this
                  , a = o.geometry
                  , s = n.params.PointCloud.threshold;
                if (e.getInverse(this.matrixWorld),
                t.copy(n.ray).applyMatrix4(e),
                null === a.boundingBox || t.isIntersectionBox(a.boundingBox) !== !1) {
                    var l = s / ((this.scale.x + this.scale.y + this.scale.z) / 3)
                      , c = new r.Vector3
                      , u = function(e, r) {
                        var a = t.distanceToPoint(e);
                        if (l > a) {
                            var s = t.closestPointToPoint(e);
                            s.applyMatrix4(o.matrixWorld);
                            var c = n.ray.origin.distanceTo(s);
                            i.push({
                                distance: c,
                                distanceToRay: a,
                                point: s.clone(),
                                index: r,
                                face: null,
                                object: o
                            })
                        }
                    };
                    if (a instanceof r.BufferGeometry) {
                        var h = a.attributes
                          , d = h.position.array;
                        if (void 0 !== h.index) {
                            var f = h.index.array
                              , p = a.offsets;
                            if (0 === p.length) {
                                var m = {
                                    start: 0,
                                    count: f.length,
                                    index: 0
                                };
                                p = [m]
                            }
                            for (var v = 0, g = p.length; g > v; ++v)
                                for (var y = p[v].start, b = p[v].count, x = p[v].index, w = y, _ = y + b; _ > w; w++) {
                                    var S = x + f[w];
                                    c.fromArray(d, 3 * S),
                                    u(c, S)
                                }
                        } else
                            for (var M = d.length / 3, w = 0; M > w; w++)
                                c.set(d[3 * w], d[3 * w + 1], d[3 * w + 2]),
                                u(c, w)
                    } else
                        for (var C = this.geometry.vertices, w = 0; w < C.length; w++)
                            u(C[w], w)
                }
            }
        }(),
        r.PointCloud.prototype.clone = function(e) {
            return void 0 === e && (e = new r.PointCloud(this.geometry,this.material)),
            r.Object3D.prototype.clone.call(this, e),
            e
        }
        ,
        r.ParticleSystem = function(e, t) {
            return r.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),
            new r.PointCloud(e,t)
        }
        ,
        r.Line = function(e, t, n) {
            r.Object3D.call(this),
            this.type = "Line",
            this.geometry = void 0 !== e ? e : new r.Geometry,
            this.material = void 0 !== t ? t : new r.LineBasicMaterial({
                color: 16777215 * Math.random()
            }),
            this.mode = void 0 !== n ? n : r.LineStrip
        }
        ,
        r.LineStrip = 0,
        r.LinePieces = 1,
        r.Line.prototype = Object.create(r.Object3D.prototype),
        r.Line.prototype.constructor = r.Line,
        r.Line.prototype.raycast = function() {
            var e = new r.Matrix4
              , t = new r.Ray
              , n = new r.Sphere;
            return function(i, o) {
                var a = i.linePrecision
                  , s = a * a
                  , l = this.geometry;
                if (null === l.boundingSphere && l.computeBoundingSphere(),
                n.copy(l.boundingSphere),
                n.applyMatrix4(this.matrixWorld),
                i.ray.isIntersectionSphere(n) !== !1) {
                    e.getInverse(this.matrixWorld),
                    t.copy(i.ray).applyMatrix4(e);
                    var c = new r.Vector3
                      , u = new r.Vector3
                      , h = new r.Vector3
                      , d = new r.Vector3
                      , f = this.mode === r.LineStrip ? 1 : 2;
                    if (l instanceof r.BufferGeometry) {
                        var p = l.attributes;
                        if (void 0 !== p.index) {
                            var m = p.index.array
                              , v = p.position.array
                              , g = l.offsets;
                            0 === g.length && (g = [{
                                start: 0,
                                count: m.length,
                                index: 0
                            }]);
                            for (var y = 0; y < g.length; y++)
                                for (var b = g[y].start, x = g[y].count, w = g[y].index, _ = b; b + x - 1 > _; _ += f) {
                                    var S = w + m[_]
                                      , M = w + m[_ + 1];
                                    c.fromArray(v, 3 * S),
                                    u.fromArray(v, 3 * M);
                                    var C = t.distanceSqToSegment(c, u, d, h);
                                    if (!(C > s)) {
                                        var T = t.origin.distanceTo(d);
                                        T < i.near || T > i.far || o.push({
                                            distance: T,
                                            point: h.clone().applyMatrix4(this.matrixWorld),
                                            index: _,
                                            offsetIndex: y,
                                            face: null,
                                            faceIndex: null,
                                            object: this
                                        })
                                    }
                                }
                        } else
                            for (var v = p.position.array, _ = 0; _ < v.length / 3 - 1; _ += f) {
                                c.fromArray(v, 3 * _),
                                u.fromArray(v, 3 * _ + 3);
                                var C = t.distanceSqToSegment(c, u, d, h);
                                if (!(C > s)) {
                                    var T = t.origin.distanceTo(d);
                                    T < i.near || T > i.far || o.push({
                                        distance: T,
                                        point: h.clone().applyMatrix4(this.matrixWorld),
                                        index: _,
                                        face: null,
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else if (l instanceof r.Geometry)
                        for (var E = l.vertices, k = E.length, _ = 0; k - 1 > _; _ += f) {
                            var C = t.distanceSqToSegment(E[_], E[_ + 1], d, h);
                            if (!(C > s)) {
                                var T = t.origin.distanceTo(d);
                                T < i.near || T > i.far || o.push({
                                    distance: T,
                                    point: h.clone().applyMatrix4(this.matrixWorld),
                                    index: _,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                }
            }
        }(),
        r.Line.prototype.clone = function(e) {
            return void 0 === e && (e = new r.Line(this.geometry,this.material,this.mode)),
            r.Object3D.prototype.clone.call(this, e),
            e
        }
        ,
        r.Mesh = function(e, t) {
            r.Object3D.call(this),
            this.type = "Mesh",
            this.geometry = void 0 !== e ? e : new r.Geometry,
            this.material = void 0 !== t ? t : new r.MeshBasicMaterial({
                color: 16777215 * Math.random()
            }),
            this.updateMorphTargets()
        }
        ,
        r.Mesh.prototype = Object.create(r.Object3D.prototype),
        r.Mesh.prototype.constructor = r.Mesh,
        r.Mesh.prototype.updateMorphTargets = function() {
            if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
                this.morphTargetBase = -1,
                this.morphTargetForcedOrder = [],
                this.morphTargetInfluences = [],
                this.morphTargetDictionary = {};
                for (var e = 0, t = this.geometry.morphTargets.length; t > e; e++)
                    this.morphTargetInfluences.push(0),
                    this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
            }
        }
        ,
        r.Mesh.prototype.getMorphTargetIndexByName = function(e) {
            return void 0 !== this.morphTargetDictionary[e] ? this.morphTargetDictionary[e] : (r.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + e + " does not exist. Returning 0."),
            0)
        }
        ,
        r.Mesh.prototype.raycast = function() {
            var e = new r.Matrix4
              , t = new r.Ray
              , n = new r.Sphere
              , i = new r.Vector3
              , o = new r.Vector3
              , a = new r.Vector3;
            return function(s, l) {
                var c = this.geometry;
                if (null === c.boundingSphere && c.computeBoundingSphere(),
                n.copy(c.boundingSphere),
                n.applyMatrix4(this.matrixWorld),
                s.ray.isIntersectionSphere(n) !== !1 && (e.getInverse(this.matrixWorld),
                t.copy(s.ray).applyMatrix4(e),
                null === c.boundingBox || t.isIntersectionBox(c.boundingBox) !== !1))
                    if (c instanceof r.BufferGeometry) {
                        var u = this.material;
                        if (void 0 === u)
                            return;
                        var h, d, f, p = c.attributes, m = s.precision;
                        if (void 0 !== p.index) {
                            var v = p.index.array
                              , g = p.position.array
                              , y = c.offsets;
                            0 === y.length && (y = [{
                                start: 0,
                                count: v.length,
                                index: 0
                            }]);
                            for (var b = 0, x = y.length; x > b; ++b)
                                for (var w = y[b].start, _ = y[b].count, S = y[b].index, M = w, C = w + _; C > M; M += 3) {
                                    if (h = S + v[M],
                                    d = S + v[M + 1],
                                    f = S + v[M + 2],
                                    i.fromArray(g, 3 * h),
                                    o.fromArray(g, 3 * d),
                                    a.fromArray(g, 3 * f),
                                    u.side === r.BackSide)
                                        var T = t.intersectTriangle(a, o, i, !0);
                                    else
                                        var T = t.intersectTriangle(i, o, a, u.side !== r.DoubleSide);
                                    if (null !== T) {
                                        T.applyMatrix4(this.matrixWorld);
                                        var E = s.ray.origin.distanceTo(T);
                                        m > E || E < s.near || E > s.far || l.push({
                                            distance: E,
                                            point: T,
                                            face: new r.Face3(h,d,f,r.Triangle.normal(i, o, a)),
                                            faceIndex: null,
                                            object: this
                                        })
                                    }
                                }
                        } else
                            for (var g = p.position.array, M = 0, k = 0, C = g.length; C > M; M += 3,
                            k += 9) {
                                if (h = M,
                                d = M + 1,
                                f = M + 2,
                                i.fromArray(g, k),
                                o.fromArray(g, k + 3),
                                a.fromArray(g, k + 6),
                                u.side === r.BackSide)
                                    var T = t.intersectTriangle(a, o, i, !0);
                                else
                                    var T = t.intersectTriangle(i, o, a, u.side !== r.DoubleSide);
                                if (null !== T) {
                                    T.applyMatrix4(this.matrixWorld);
                                    var E = s.ray.origin.distanceTo(T);
                                    m > E || E < s.near || E > s.far || l.push({
                                        distance: E,
                                        point: T,
                                        face: new r.Face3(h,d,f,r.Triangle.normal(i, o, a)),
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else if (c instanceof r.Geometry)
                        for (var h, d, f, A = this.material instanceof r.MeshFaceMaterial, P = A === !0 ? this.material.materials : null, m = s.precision, L = c.vertices, O = 0, R = c.faces.length; R > O; O++) {
                            var F = c.faces[O]
                              , u = A === !0 ? P[F.materialIndex] : this.material;
                            if (void 0 !== u) {
                                if (h = L[F.a],
                                d = L[F.b],
                                f = L[F.c],
                                u.morphTargets === !0) {
                                    var B = c.morphTargets
                                      , D = this.morphTargetInfluences;
                                    i.set(0, 0, 0),
                                    o.set(0, 0, 0),
                                    a.set(0, 0, 0);
                                    for (var I = 0, N = B.length; N > I; I++) {
                                        var j = D[I];
                                        if (0 !== j) {
                                            var V = B[I].vertices;
                                            i.x += (V[F.a].x - h.x) * j,
                                            i.y += (V[F.a].y - h.y) * j,
                                            i.z += (V[F.a].z - h.z) * j,
                                            o.x += (V[F.b].x - d.x) * j,
                                            o.y += (V[F.b].y - d.y) * j,
                                            o.z += (V[F.b].z - d.z) * j,
                                            a.x += (V[F.c].x - f.x) * j,
                                            a.y += (V[F.c].y - f.y) * j,
                                            a.z += (V[F.c].z - f.z) * j
                                        }
                                    }
                                    i.add(h),
                                    o.add(d),
                                    a.add(f),
                                    h = i,
                                    d = o,
                                    f = a
                                }
                                if (u.side === r.BackSide)
                                    var T = t.intersectTriangle(f, d, h, !0);
                                else
                                    var T = t.intersectTriangle(h, d, f, u.side !== r.DoubleSide);
                                if (null !== T) {
                                    T.applyMatrix4(this.matrixWorld);
                                    var E = s.ray.origin.distanceTo(T);
                                    m > E || E < s.near || E > s.far || l.push({
                                        distance: E,
                                        point: T,
                                        face: F,
                                        faceIndex: O,
                                        object: this
                                    })
                                }
                            }
                        }
            }
        }(),
        r.Mesh.prototype.clone = function(e, t) {
            return void 0 === e && (e = new r.Mesh(this.geometry,this.material)),
            r.Object3D.prototype.clone.call(this, e, t),
            e
        }
        ,
        r.Bone = function(e) {
            r.Object3D.call(this),
            this.type = "Bone",
            this.skin = e
        }
        ,
        r.Bone.prototype = Object.create(r.Object3D.prototype),
        r.Bone.prototype.constructor = r.Bone,
        r.Skeleton = function(e, t, n) {
            if (this.useVertexTexture = void 0 !== n ? n : !0,
            this.identityMatrix = new r.Matrix4,
            e = e || [],
            this.bones = e.slice(0),
            this.useVertexTexture) {
                var i;
                i = this.bones.length > 256 ? 64 : this.bones.length > 64 ? 32 : this.bones.length > 16 ? 16 : 8,
                this.boneTextureWidth = i,
                this.boneTextureHeight = i,
                this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4),
                this.boneTexture = new r.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,r.RGBAFormat,r.FloatType),
                this.boneTexture.minFilter = r.NearestFilter,
                this.boneTexture.magFilter = r.NearestFilter,
                this.boneTexture.generateMipmaps = !1,
                this.boneTexture.flipY = !1
            } else
                this.boneMatrices = new Float32Array(16 * this.bones.length);
            if (void 0 === t)
                this.calculateInverses();
            else if (this.bones.length === t.length)
                this.boneInverses = t.slice(0);
            else {
                r.warn("THREE.Skeleton bonInverses is the wrong length."),
                this.boneInverses = [];
                for (var o = 0, a = this.bones.length; a > o; o++)
                    this.boneInverses.push(new r.Matrix4)
            }
        }
        ,
        r.Skeleton.prototype.calculateInverses = function() {
            this.boneInverses = [];
            for (var e = 0, t = this.bones.length; t > e; e++) {
                var n = new r.Matrix4;
                this.bones[e] && n.getInverse(this.bones[e].matrixWorld),
                this.boneInverses.push(n)
            }
        }
        ,
        r.Skeleton.prototype.pose = function() {
            for (var e, t = 0, n = this.bones.length; n > t; t++)
                e = this.bones[t],
                e && e.matrixWorld.getInverse(this.boneInverses[t]);
            for (var t = 0, n = this.bones.length; n > t; t++)
                e = this.bones[t],
                e && (e.parent ? (e.matrix.getInverse(e.parent.matrixWorld),
                e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld),
                e.matrix.decompose(e.position, e.quaternion, e.scale))
        }
        ,
        r.Skeleton.prototype.update = function() {
            var e = new r.Matrix4;
            return function() {
                for (var t = 0, n = this.bones.length; n > t; t++) {
                    var i = this.bones[t] ? this.bones[t].matrixWorld : this.identityMatrix;
                    e.multiplyMatrices(i, this.boneInverses[t]),
                    e.flattenToArrayOffset(this.boneMatrices, 16 * t)
                }
                this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
            }
        }(),
        r.SkinnedMesh = function(e, t, n) {
            r.Mesh.call(this, e, t),
            this.type = "SkinnedMesh",
            this.bindMode = "attached",
            this.bindMatrix = new r.Matrix4,
            this.bindMatrixInverse = new r.Matrix4;
            var i = [];
            if (this.geometry && void 0 !== this.geometry.bones) {
                for (var o, a, s, l, c, u = 0, h = this.geometry.bones.length; h > u; ++u)
                    a = this.geometry.bones[u],
                    s = a.pos,
                    l = a.rotq,
                    c = a.scl,
                    o = new r.Bone(this),
                    i.push(o),
                    o.name = a.name,
                    o.position.set(s[0], s[1], s[2]),
                    o.quaternion.set(l[0], l[1], l[2], l[3]),
                    void 0 !== c ? o.scale.set(c[0], c[1], c[2]) : o.scale.set(1, 1, 1);
                for (var u = 0, h = this.geometry.bones.length; h > u; ++u)
                    a = this.geometry.bones[u],
                    -1 !== a.parent ? i[a.parent].add(i[u]) : this.add(i[u])
            }
            this.normalizeSkinWeights(),
            this.updateMatrixWorld(!0),
            this.bind(new r.Skeleton(i,void 0,n))
        }
        ,
        r.SkinnedMesh.prototype = Object.create(r.Mesh.prototype),
        r.SkinnedMesh.prototype.constructor = r.SkinnedMesh,
        r.SkinnedMesh.prototype.bind = function(e, t) {
            this.skeleton = e,
            void 0 === t && (this.updateMatrixWorld(!0),
            t = this.matrixWorld),
            this.bindMatrix.copy(t),
            this.bindMatrixInverse.getInverse(t)
        }
        ,
        r.SkinnedMesh.prototype.pose = function() {
            this.skeleton.pose()
        }
        ,
        r.SkinnedMesh.prototype.normalizeSkinWeights = function() {
            if (this.geometry instanceof r.Geometry)
                for (var e = 0; e < this.geometry.skinIndices.length; e++) {
                    var t = this.geometry.skinWeights[e]
                      , n = 1 / t.lengthManhattan();
                    n !== 1 / 0 ? t.multiplyScalar(n) : t.set(1)
                }
        }
        ,
        r.SkinnedMesh.prototype.updateMatrixWorld = function(e) {
            r.Mesh.prototype.updateMatrixWorld.call(this, !0),
            "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : r.warn("THREE.SkinnedMesh unreckognized bindMode: " + this.bindMode)
        }
        ,
        r.SkinnedMesh.prototype.clone = function(e) {
            return void 0 === e && (e = new r.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),
            r.Mesh.prototype.clone.call(this, e),
            e
        }
        ,
        r.MorphAnimMesh = function(e, t) {
            r.Mesh.call(this, e, t),
            this.type = "MorphAnimMesh",
            this.duration = 1e3,
            this.mirroredLoop = !1,
            this.time = 0,
            this.lastKeyframe = 0,
            this.currentKeyframe = 0,
            this.direction = 1,
            this.directionBackwards = !1,
            this.setFrameRange(0, this.geometry.morphTargets.length - 1)
        }
        ,
        r.MorphAnimMesh.prototype = Object.create(r.Mesh.prototype),
        r.MorphAnimMesh.prototype.constructor = r.MorphAnimMesh,
        r.MorphAnimMesh.prototype.setFrameRange = function(e, t) {
            this.startKeyframe = e,
            this.endKeyframe = t,
            this.length = this.endKeyframe - this.startKeyframe + 1
        }
        ,
        r.MorphAnimMesh.prototype.setDirectionForward = function() {
            this.direction = 1,
            this.directionBackwards = !1
        }
        ,
        r.MorphAnimMesh.prototype.setDirectionBackward = function() {
            this.direction = -1,
            this.directionBackwards = !0
        }
        ,
        r.MorphAnimMesh.prototype.parseAnimations = function() {
            var e = this.geometry;
            e.animations || (e.animations = {});
            for (var t, n = e.animations, i = /([a-z]+)_?(\d+)/, r = 0, o = e.morphTargets.length; o > r; r++) {
                var a = e.morphTargets[r]
                  , s = a.name.match(i);
                if (s && s.length > 1) {
                    var l = s[1];
                    n[l] || (n[l] = {
                        start: 1 / 0,
                        end: -(1 / 0)
                    });
                    var c = n[l];
                    r < c.start && (c.start = r),
                    r > c.end && (c.end = r),
                    t || (t = l)
                }
            }
            e.firstAnimation = t
        }
        ,
        r.MorphAnimMesh.prototype.setAnimationLabel = function(e, t, n) {
            this.geometry.animations || (this.geometry.animations = {}),
            this.geometry.animations[e] = {
                start: t,
                end: n
            }
        }
        ,
        r.MorphAnimMesh.prototype.playAnimation = function(e, t) {
            var n = this.geometry.animations[e];
            n ? (this.setFrameRange(n.start, n.end),
            this.duration = 1e3 * ((n.end - n.start) / t),
            this.time = 0) : r.warn("THREE.MorphAnimMesh: animation[" + e + "] undefined in .playAnimation()")
        }
        ,
        r.MorphAnimMesh.prototype.updateAnimation = function(e) {
            var t = this.duration / this.length;
            this.time += this.direction * e,
            this.mirroredLoop ? (this.time > this.duration || this.time < 0) && (this.direction *= -1,
            this.time > this.duration && (this.time = this.duration,
            this.directionBackwards = !0),
            this.time < 0 && (this.time = 0,
            this.directionBackwards = !1)) : (this.time = this.time % this.duration,
            this.time < 0 && (this.time += this.duration));
            var n = this.startKeyframe + r.Math.clamp(Math.floor(this.time / t), 0, this.length - 1);
            n !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0,
            this.morphTargetInfluences[this.currentKeyframe] = 1,
            this.morphTargetInfluences[n] = 0,
            this.lastKeyframe = this.currentKeyframe,
            this.currentKeyframe = n);
            var i = this.time % t / t;
            this.directionBackwards && (i = 1 - i),
            this.morphTargetInfluences[this.currentKeyframe] = i,
            this.morphTargetInfluences[this.lastKeyframe] = 1 - i
        }
        ,
        r.MorphAnimMesh.prototype.interpolateTargets = function(e, t, n) {
            for (var i = this.morphTargetInfluences, r = 0, o = i.length; o > r; r++)
                i[r] = 0;
            e > -1 && (i[e] = 1 - n),
            t > -1 && (i[t] = n)
        }
        ,
        r.MorphAnimMesh.prototype.clone = function(e) {
            return void 0 === e && (e = new r.MorphAnimMesh(this.geometry,this.material)),
            e.duration = this.duration,
            e.mirroredLoop = this.mirroredLoop,
            e.time = this.time,
            e.lastKeyframe = this.lastKeyframe,
            e.currentKeyframe = this.currentKeyframe,
            e.direction = this.direction,
            e.directionBackwards = this.directionBackwards,
            r.Mesh.prototype.clone.call(this, e),
            e
        }
        ,
        r.LOD = function() {
            r.Object3D.call(this),
            this.objects = []
        }
        ,
        r.LOD.prototype = Object.create(r.Object3D.prototype),
        r.LOD.prototype.constructor = r.LOD,
        r.LOD.prototype.addLevel = function(e, t) {
            void 0 === t && (t = 0),
            t = Math.abs(t);
            for (var n = 0; n < this.objects.length && !(t < this.objects[n].distance); n++)
                ;
            this.objects.splice(n, 0, {
                distance: t,
                object: e
            }),
            this.add(e)
        }
        ,
        r.LOD.prototype.getObjectForDistance = function(e) {
            for (var t = 1, n = this.objects.length; n > t && !(e < this.objects[t].distance); t++)
                ;
            return this.objects[t - 1].object
        }
        ,
        r.LOD.prototype.raycast = function() {
            var e = new r.Vector3;
            return function(t, n) {
                e.setFromMatrixPosition(this.matrixWorld);
                var i = t.ray.origin.distanceTo(e);
                this.getObjectForDistance(i).raycast(t, n)
            }
        }(),
        r.LOD.prototype.update = function() {
            var e = new r.Vector3
              , t = new r.Vector3;
            return function(n) {
                if (this.objects.length > 1) {
                    e.setFromMatrixPosition(n.matrixWorld),
                    t.setFromMatrixPosition(this.matrixWorld);
                    var i = e.distanceTo(t);
                    this.objects[0].object.visible = !0;
                    for (var r = 1, o = this.objects.length; o > r && i >= this.objects[r].distance; r++)
                        this.objects[r - 1].object.visible = !1,
                        this.objects[r].object.visible = !0;
                    for (; o > r; r++)
                        this.objects[r].object.visible = !1
                }
            }
        }(),
        r.LOD.prototype.clone = function(e) {
            void 0 === e && (e = new r.LOD),
            r.Object3D.prototype.clone.call(this, e);
            for (var t = 0, n = this.objects.length; n > t; t++) {
                var i = this.objects[t].object.clone();
                i.visible = 0 === t,
                e.addLevel(i, this.objects[t].distance)
            }
            return e
        }
        ,
        r.Sprite = function() {
            var e = new Uint16Array([0, 1, 2, 0, 2, 3])
              , t = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0])
              , n = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])
              , i = new r.BufferGeometry;
            return i.addAttribute("index", new r.BufferAttribute(e,1)),
            i.addAttribute("position", new r.BufferAttribute(t,3)),
            i.addAttribute("uv", new r.BufferAttribute(n,2)),
            function(e) {
                r.Object3D.call(this),
                this.type = "Sprite",
                this.geometry = i,
                this.material = void 0 !== e ? e : new r.SpriteMaterial
            }
        }(),
        r.Sprite.prototype = Object.create(r.Object3D.prototype),
        r.Sprite.prototype.constructor = r.Sprite,
        r.Sprite.prototype.raycast = function() {
            var e = new r.Vector3;
            return function(t, n) {
                e.setFromMatrixPosition(this.matrixWorld);
                var i = t.ray.distanceToPoint(e);
                i > this.scale.x || n.push({
                    distance: i,
                    point: this.position,
                    face: null,
                    object: this
                })
            }
        }(),
        r.Sprite.prototype.clone = function(e) {
            return void 0 === e && (e = new r.Sprite(this.material)),
            r.Object3D.prototype.clone.call(this, e),
            e
        }
        ,
        r.Particle = r.Sprite,
        r.LensFlare = function(e, t, n, i, o) {
            r.Object3D.call(this),
            this.lensFlares = [],
            this.positionScreen = new r.Vector3,
            this.customUpdateCallback = void 0,
            void 0 !== e && this.add(e, t, n, i, o)
        }
        ,
        r.LensFlare.prototype = Object.create(r.Object3D.prototype),
        r.LensFlare.prototype.constructor = r.LensFlare,
        r.LensFlare.prototype.add = function(e, t, n, i, o, a) {
            void 0 === t && (t = -1),
            void 0 === n && (n = 0),
            void 0 === a && (a = 1),
            void 0 === o && (o = new r.Color(16777215)),
            void 0 === i && (i = r.NormalBlending),
            n = Math.min(n, Math.max(0, n)),
            this.lensFlares.push({
                texture: e,
                size: t,
                distance: n,
                x: 0,
                y: 0,
                z: 0,
                scale: 1,
                rotation: 1,
                opacity: a,
                color: o,
                blending: i
            })
        }
        ,
        r.LensFlare.prototype.updateLensFlares = function() {
            var e, t, n = this.lensFlares.length, i = 2 * -this.positionScreen.x, r = 2 * -this.positionScreen.y;
            for (e = 0; n > e; e++)
                t = this.lensFlares[e],
                t.x = this.positionScreen.x + i * t.distance,
                t.y = this.positionScreen.y + r * t.distance,
                t.wantedRotation = t.x * Math.PI * .25,
                t.rotation += .25 * (t.wantedRotation - t.rotation)
        }
        ,
        r.Scene = function() {
            r.Object3D.call(this),
            this.type = "Scene",
            this.fog = null,
            this.overrideMaterial = null,
            this.autoUpdate = !0
        }
        ,
        r.Scene.prototype = Object.create(r.Object3D.prototype),
        r.Scene.prototype.constructor = r.Scene,
        r.Scene.prototype.clone = function(e) {
            return void 0 === e && (e = new r.Scene),
            r.Object3D.prototype.clone.call(this, e),
            null !== this.fog && (e.fog = this.fog.clone()),
            null !== this.overrideMaterial && (e.overrideMaterial = this.overrideMaterial.clone()),
            e.autoUpdate = this.autoUpdate,
            e.matrixAutoUpdate = this.matrixAutoUpdate,
            e
        }
        ,
        r.Fog = function(e, t, n) {
            this.name = "",
            this.color = new r.Color(e),
            this.near = void 0 !== t ? t : 1,
            this.far = void 0 !== n ? n : 1e3
        }
        ,
        r.Fog.prototype.clone = function() {
            return new r.Fog(this.color.getHex(),this.near,this.far)
        }
        ,
        r.FogExp2 = function(e, t) {
            this.name = "",
            this.color = new r.Color(e),
            this.density = void 0 !== t ? t : 25e-5
        }
        ,
        r.FogExp2.prototype.clone = function() {
            return new r.FogExp2(this.color.getHex(),this.density)
        }
        ,
        r.ShaderChunk = {},
        r.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n	float distance = dot( planeNormal, point-pointOnPlane );\n	return point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n	}\n	return 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n	return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\n",
        r.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",
        r.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n",
        r.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",
        r.ShaderChunk.default_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",
        r.ShaderChunk.map_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",
        r.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",
        r.ShaderChunk.lightmap_pars_vertex = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",
        r.ShaderChunk.lights_phong_fragment = "#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n			// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n",
        r.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",
        r.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",
        r.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",
        r.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",
        r.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",
        r.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",
        r.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",
        r.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",
        r.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif",
        r.ShaderChunk.lightmap_vertex = "#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",
        r.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",
        r.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",
        r.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	vColor.xyz = inputToLinear( color.xyz );\n\n#endif",
        r.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",
        r.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",
        r.ShaderChunk.linear_to_gamma_fragment = "\n	outgoingLight = linearToOutput( outgoingLight );\n",
        r.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",
        r.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",
        r.ShaderChunk.map_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",
        r.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",
        r.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",
        r.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",
        r.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",
        r.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n		fogFactor = whiteCompliment( fogFactor );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",
        r.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",
        r.ShaderChunk.defaultnormal_vertex = "#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",
        r.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",
        r.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",
        r.ShaderChunk.map_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",
        r.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif",
        r.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",
        r.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",
        r.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",
        r.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n	shadowColor = inputToLinear( shadowColor );\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n",
        r.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",
        r.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",
        r.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",
        r.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",
        r.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",
        r.UniformsUtils = {
            merge: function(e) {
                for (var t = {}, n = 0; n < e.length; n++) {
                    var i = this.clone(e[n]);
                    for (var r in i)
                        t[r] = i[r]
                }
                return t
            },
            clone: function(e) {
                var t = {};
                for (var n in e) {
                    t[n] = {};
                    for (var i in e[n]) {
                        var o = e[n][i];
                        o instanceof r.Color || o instanceof r.Vector2 || o instanceof r.Vector3 || o instanceof r.Vector4 || o instanceof r.Matrix4 || o instanceof r.Texture ? t[n][i] = o.clone() : o instanceof Array ? t[n][i] = o.slice() : t[n][i] = o
                    }
                }
                return t
            }
        },
        r.UniformsLib = {
            common: {
                diffuse: {
                    type: "c",
                    value: new r.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new r.Vector4(0,0,1,1)
                },
                lightMap: {
                    type: "t",
                    value: null
                },
                specularMap: {
                    type: "t",
                    value: null
                },
                alphaMap: {
                    type: "t",
                    value: null
                },
                envMap: {
                    type: "t",
                    value: null
                },
                flipEnvMap: {
                    type: "f",
                    value: -1
                },
                reflectivity: {
                    type: "f",
                    value: 1
                },
                refractionRatio: {
                    type: "f",
                    value: .98
                },
                morphTargetInfluences: {
                    type: "f",
                    value: 0
                }
            },
            bump: {
                bumpMap: {
                    type: "t",
                    value: null
                },
                bumpScale: {
                    type: "f",
                    value: 1
                }
            },
            normalmap: {
                normalMap: {
                    type: "t",
                    value: null
                },
                normalScale: {
                    type: "v2",
                    value: new r.Vector2(1,1)
                }
            },
            fog: {
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new r.Color(16777215)
                }
            },
            lights: {
                ambientLightColor: {
                    type: "fv",
                    value: []
                },
                directionalLightDirection: {
                    type: "fv",
                    value: []
                },
                directionalLightColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightDirection: {
                    type: "fv",
                    value: []
                },
                hemisphereLightSkyColor: {
                    type: "fv",
                    value: []
                },
                hemisphereLightGroundColor: {
                    type: "fv",
                    value: []
                },
                pointLightColor: {
                    type: "fv",
                    value: []
                },
                pointLightPosition: {
                    type: "fv",
                    value: []
                },
                pointLightDistance: {
                    type: "fv1",
                    value: []
                },
                pointLightDecay: {
                    type: "fv1",
                    value: []
                },
                spotLightColor: {
                    type: "fv",
                    value: []
                },
                spotLightPosition: {
                    type: "fv",
                    value: []
                },
                spotLightDirection: {
                    type: "fv",
                    value: []
                },
                spotLightDistance: {
                    type: "fv1",
                    value: []
                },
                spotLightAngleCos: {
                    type: "fv1",
                    value: []
                },
                spotLightExponent: {
                    type: "fv1",
                    value: []
                },
                spotLightDecay: {
                    type: "fv1",
                    value: []
                }
            },
            particle: {
                psColor: {
                    type: "c",
                    value: new r.Color(15658734)
                },
                opacity: {
                    type: "f",
                    value: 1
                },
                size: {
                    type: "f",
                    value: 1
                },
                scale: {
                    type: "f",
                    value: 1
                },
                map: {
                    type: "t",
                    value: null
                },
                offsetRepeat: {
                    type: "v4",
                    value: new r.Vector4(0,0,1,1)
                },
                fogDensity: {
                    type: "f",
                    value: 25e-5
                },
                fogNear: {
                    type: "f",
                    value: 1
                },
                fogFar: {
                    type: "f",
                    value: 2e3
                },
                fogColor: {
                    type: "c",
                    value: new r.Color(16777215)
                }
            },
            shadowmap: {
                shadowMap: {
                    type: "tv",
                    value: []
                },
                shadowMapSize: {
                    type: "v2v",
                    value: []
                },
                shadowBias: {
                    type: "fv1",
                    value: []
                },
                shadowDarkness: {
                    type: "fv1",
                    value: []
                },
                shadowMatrix: {
                    type: "m4v",
                    value: []
                }
            }
        },
        r.ShaderLib = {
            basic: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.fog, r.UniformsLib.shadowmap]),
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.map_pars_vertex, r.ShaderChunk.lightmap_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.map_vertex, r.ShaderChunk.lightmap_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, "	#endif", r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.lightmap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, "	outgoingLight = diffuseColor.rgb;", r.ShaderChunk.lightmap_fragment, r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
            },
            lambert: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.fog, r.UniformsLib.lights, r.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new r.Color(0)
                    },
                    wrapRGB: {
                        type: "v3",
                        value: new r.Vector3(1,1,1)
                    }
                }]),
                vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", r.ShaderChunk.common, r.ShaderChunk.map_pars_vertex, r.ShaderChunk.lightmap_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.lights_lambert_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.map_vertex, r.ShaderChunk.lightmap_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinbase_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.lights_lambert_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.lightmap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, "	#ifdef DOUBLE_SIDED", "		if ( gl_FrontFacing )", "			outgoingLight += diffuseColor.rgb * vLightFront + emissive;", "		else", "			outgoingLight += diffuseColor.rgb * vLightBack + emissive;", "	#else", "		outgoingLight += diffuseColor.rgb * vLightFront + emissive;", "	#endif", r.ShaderChunk.lightmap_fragment, r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
            },
            phong: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.bump, r.UniformsLib.normalmap, r.UniformsLib.fog, r.UniformsLib.lights, r.UniformsLib.shadowmap, {
                    emissive: {
                        type: "c",
                        value: new r.Color(0)
                    },
                    specular: {
                        type: "c",
                        value: new r.Color(1118481)
                    },
                    shininess: {
                        type: "f",
                        value: 30
                    },
                    wrapRGB: {
                        type: "v3",
                        value: new r.Vector3(1,1,1)
                    }
                }]),
                vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "#ifndef FLAT_SHADED", "	varying vec3 vNormal;", "#endif", r.ShaderChunk.common, r.ShaderChunk.map_pars_vertex, r.ShaderChunk.lightmap_pars_vertex, r.ShaderChunk.envmap_pars_vertex, r.ShaderChunk.lights_phong_pars_vertex, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.map_vertex, r.ShaderChunk.lightmap_vertex, r.ShaderChunk.color_vertex, r.ShaderChunk.morphnormal_vertex, r.ShaderChunk.skinbase_vertex, r.ShaderChunk.skinnormal_vertex, r.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED", "	vNormal = normalize( transformedNormal );", "#endif", r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = -mvPosition.xyz;", r.ShaderChunk.worldpos_vertex, r.ShaderChunk.envmap_vertex, r.ShaderChunk.lights_phong_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", "uniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.map_pars_fragment, r.ShaderChunk.alphamap_pars_fragment, r.ShaderChunk.lightmap_pars_fragment, r.ShaderChunk.envmap_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.lights_phong_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.bumpmap_pars_fragment, r.ShaderChunk.normalmap_pars_fragment, r.ShaderChunk.specularmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphamap_fragment, r.ShaderChunk.alphatest_fragment, r.ShaderChunk.specularmap_fragment, r.ShaderChunk.lights_phong_fragment, r.ShaderChunk.lightmap_fragment, r.ShaderChunk.envmap_fragment, r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.linear_to_gamma_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
            },
            particle_basic: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.particle, r.UniformsLib.shadowmap]),
                vertexShader: ["uniform float size;", "uniform float scale;", r.ShaderChunk.common, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.shadowmap_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	#ifdef USE_SIZEATTENUATION", "		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "	#else", "		gl_PointSize = size;", "	#endif", "	gl_Position = projectionMatrix * mvPosition;", r.ShaderChunk.logdepthbuf_vertex, r.ShaderChunk.worldpos_vertex, r.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.map_particle_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.shadowmap_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( psColor, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.map_particle_fragment, r.ShaderChunk.color_fragment, r.ShaderChunk.alphatest_fragment, "	outgoingLight = diffuseColor.rgb;", r.ShaderChunk.shadowmap_fragment, r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
            },
            dashed: {
                uniforms: r.UniformsUtils.merge([r.UniformsLib.common, r.UniformsLib.fog, {
                    scale: {
                        type: "f",
                        value: 1
                    },
                    dashSize: {
                        type: "f",
                        value: 1
                    },
                    totalSize: {
                        type: "f",
                        value: 2
                    }
                }]),
                vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", r.ShaderChunk.common, r.ShaderChunk.color_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;", "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	gl_Position = projectionMatrix * mvPosition;", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", r.ShaderChunk.common, r.ShaderChunk.color_pars_fragment, r.ShaderChunk.fog_pars_fragment, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	if ( mod( vLineDistance, totalSize ) > dashSize ) {", "		discard;", "	}", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", r.ShaderChunk.logdepthbuf_fragment, r.ShaderChunk.color_fragment, "	outgoingLight = diffuseColor.rgb;", r.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
            },
            depth: {
                uniforms: {
                    mNear: {
                        type: "f",
                        value: 1
                    },
                    mFar: {
                        type: "f",
                        value: 2e3
                    },
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", r.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		float depth = gl_FragDepthEXT / gl_FragCoord.w;", "	#else", "		float depth = gl_FragCoord.z / gl_FragCoord.w;", "	#endif", "	float color = 1.0 - smoothstep( mNear, mFar, depth );", "	gl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
            },
            normal: {
                uniforms: {
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: ["varying vec3 vNormal;", r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vNormal = normalize( normalMatrix * normal );", r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            cube: {
                uniforms: {
                    tCube: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vWorldPosition = transformDirection( position, modelMatrix );", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            equirect: {
                uniforms: {
                    tEquirect: {
                        type: "t",
                        value: null
                    },
                    tFlip: {
                        type: "f",
                        value: -1
                    }
                },
                vertexShader: ["varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vWorldPosition = transformDirection( position, modelMatrix );", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: ["uniform sampler2D tEquirect;", "uniform float tFlip;", "varying vec3 vWorldPosition;", r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "vec3 direction = normalize( vWorldPosition );", "vec2 sampleUV;", "sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );", "sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "gl_FragColor = texture2D( tEquirect, sampleUV );", r.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
            },
            depthRGBA: {
                uniforms: {},
                vertexShader: [r.ShaderChunk.common, r.ShaderChunk.morphtarget_pars_vertex, r.ShaderChunk.skinning_pars_vertex, r.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", r.ShaderChunk.skinbase_vertex, r.ShaderChunk.morphtarget_vertex, r.ShaderChunk.skinning_vertex, r.ShaderChunk.default_vertex, r.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
                fragmentShader: [r.ShaderChunk.common, r.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {", "	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );", "	res -= res.xxyz * bit_mask;", "	return res;", "}", "void main() {", r.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );", "	#else", "		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "	#endif", "}"].join("\n")
            }
        },
        r.WebGLRenderer = function(e) {
            function t(e) {
                e.__webglVertexBuffer = Le.createBuffer(),
                e.__webglColorBuffer = Le.createBuffer(),
                Oe.info.memory.geometries++
            }
            function n(e) {
                e.__webglVertexBuffer = Le.createBuffer(),
                e.__webglColorBuffer = Le.createBuffer(),
                e.__webglLineDistanceBuffer = Le.createBuffer(),
                Oe.info.memory.geometries++
            }
            function i(e) {
                e.__webglVertexBuffer = Le.createBuffer(),
                e.__webglNormalBuffer = Le.createBuffer(),
                e.__webglTangentBuffer = Le.createBuffer(),
                e.__webglColorBuffer = Le.createBuffer(),
                e.__webglUVBuffer = Le.createBuffer(),
                e.__webglUV2Buffer = Le.createBuffer(),
                e.__webglSkinIndicesBuffer = Le.createBuffer(),
                e.__webglSkinWeightsBuffer = Le.createBuffer(),
                e.__webglFaceBuffer = Le.createBuffer(),
                e.__webglLineBuffer = Le.createBuffer();
                var t = e.numMorphTargets;
                if (t) {
                    e.__webglMorphTargetsBuffers = [];
                    for (var n = 0, i = t; i > n; n++)
                        e.__webglMorphTargetsBuffers.push(Le.createBuffer())
                }
                var r = e.numMorphNormals;
                if (r) {
                    e.__webglMorphNormalsBuffers = [];
                    for (var n = 0, i = r; i > n; n++)
                        e.__webglMorphNormalsBuffers.push(Le.createBuffer())
                }
                Oe.info.memory.geometries++
            }
            function o(e) {
                var t = e.geometry
                  , n = e.material
                  , i = t.vertices.length;
                if (n.attributes) {
                    void 0 === t.__webglCustomAttributesList && (t.__webglCustomAttributesList = []);
                    for (var r in n.attributes) {
                        var o = n.attributes[r];
                        if (!o.__webglInitialized || o.createUniqueBuffers) {
                            o.__webglInitialized = !0;
                            var a = 1;
                            "v2" === o.type ? a = 2 : "v3" === o.type ? a = 3 : "v4" === o.type ? a = 4 : "c" === o.type && (a = 3),
                            o.size = a,
                            o.array = new Float32Array(i * a),
                            o.buffer = Le.createBuffer(),
                            o.buffer.belongsToAttribute = r,
                            o.needsUpdate = !0
                        }
                        t.__webglCustomAttributesList.push(o)
                    }
                }
            }
            function a(e, t) {
                var n = e.vertices.length;
                e.__vertexArray = new Float32Array(3 * n),
                e.__colorArray = new Float32Array(3 * n),
                e.__webglParticleCount = n,
                o(t)
            }
            function s(e, t) {
                var n = e.vertices.length;
                e.__vertexArray = new Float32Array(3 * n),
                e.__colorArray = new Float32Array(3 * n),
                e.__lineDistanceArray = new Float32Array(1 * n),
                e.__webglLineCount = n,
                o(t)
            }
            function l(e, t) {
                var n = t.geometry
                  , i = e.faces3
                  , r = 3 * i.length
                  , o = 1 * i.length
                  , a = 3 * i.length
                  , s = c(t, e);
                e.__vertexArray = new Float32Array(3 * r),
                e.__normalArray = new Float32Array(3 * r),
                e.__colorArray = new Float32Array(3 * r),
                e.__uvArray = new Float32Array(2 * r),
                n.faceVertexUvs.length > 1 && (e.__uv2Array = new Float32Array(2 * r)),
                n.hasTangents && (e.__tangentArray = new Float32Array(4 * r)),
                t.geometry.skinWeights.length && t.geometry.skinIndices.length && (e.__skinIndexArray = new Float32Array(4 * r),
                e.__skinWeightArray = new Float32Array(4 * r));
                var l = null !== tt.get("OES_element_index_uint") && o > 21845 ? Uint32Array : Uint16Array;
                e.__typeArray = l,
                e.__faceArray = new l(3 * o),
                e.__lineArray = new l(2 * a);
                var u = e.numMorphTargets;
                if (u) {
                    e.__morphTargetsArrays = [];
                    for (var h = 0, d = u; d > h; h++)
                        e.__morphTargetsArrays.push(new Float32Array(3 * r))
                }
                var f = e.numMorphNormals;
                if (f) {
                    e.__morphNormalsArrays = [];
                    for (var h = 0, d = f; d > h; h++)
                        e.__morphNormalsArrays.push(new Float32Array(3 * r))
                }
                if (e.__webglFaceCount = 3 * o,
                e.__webglLineCount = 2 * a,
                s.attributes) {
                    void 0 === e.__webglCustomAttributesList && (e.__webglCustomAttributesList = []);
                    for (var p in s.attributes) {
                        var m = s.attributes[p]
                          , v = {};
                        for (var g in m)
                            v[g] = m[g];
                        if (!v.__webglInitialized || v.createUniqueBuffers) {
                            v.__webglInitialized = !0;
                            var y = 1;
                            "v2" === v.type ? y = 2 : "v3" === v.type ? y = 3 : "v4" === v.type ? y = 4 : "c" === v.type && (y = 3),
                            v.size = y,
                            v.array = new Float32Array(r * y),
                            v.buffer = Le.createBuffer(),
                            v.buffer.belongsToAttribute = p,
                            m.needsUpdate = !0,
                            v.__original = m
                        }
                        e.__webglCustomAttributesList.push(v)
                    }
                }
                e.__inittedArrays = !0
            }
            function c(e, t) {
                return e.material instanceof r.MeshFaceMaterial ? e.material.materials[t.materialIndex] : e.material
            }
            function u(e) {
                return e instanceof r.MeshPhongMaterial == !1 && e.shading === r.FlatShading
            }
            function h(e, t, n) {
                var i, r, o, a, s, l, c, u, h, d, f, p = e.vertices, m = p.length, v = e.colors, g = v.length, y = e.__vertexArray, b = e.__colorArray, x = e.verticesNeedUpdate, w = e.colorsNeedUpdate, _ = e.__webglCustomAttributesList;
                if (x) {
                    for (i = 0; m > i; i++)
                        o = p[i],
                        a = 3 * i,
                        y[a] = o.x,
                        y[a + 1] = o.y,
                        y[a + 2] = o.z;
                    Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglVertexBuffer),
                    Le.bufferData(Le.ARRAY_BUFFER, y, t)
                }
                if (w) {
                    for (r = 0; g > r; r++)
                        s = v[r],
                        a = 3 * r,
                        b[a] = s.r,
                        b[a + 1] = s.g,
                        b[a + 2] = s.b;
                    Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglColorBuffer),
                    Le.bufferData(Le.ARRAY_BUFFER, b, t)
                }
                if (_)
                    for (l = 0,
                    c = _.length; c > l; l++) {
                        if (f = _[l],
                        f.needsUpdate && (void 0 === f.boundTo || "vertices" === f.boundTo))
                            if (h = f.value.length,
                            a = 0,
                            1 === f.size)
                                for (u = 0; h > u; u++)
                                    f.array[u] = f.value[u];
                            else if (2 === f.size)
                                for (u = 0; h > u; u++)
                                    d = f.value[u],
                                    f.array[a] = d.x,
                                    f.array[a + 1] = d.y,
                                    a += 2;
                            else if (3 === f.size)
                                if ("c" === f.type)
                                    for (u = 0; h > u; u++)
                                        d = f.value[u],
                                        f.array[a] = d.r,
                                        f.array[a + 1] = d.g,
                                        f.array[a + 2] = d.b,
                                        a += 3;
                                else
                                    for (u = 0; h > u; u++)
                                        d = f.value[u],
                                        f.array[a] = d.x,
                                        f.array[a + 1] = d.y,
                                        f.array[a + 2] = d.z,
                                        a += 3;
                            else if (4 === f.size)
                                for (u = 0; h > u; u++)
                                    d = f.value[u],
                                    f.array[a] = d.x,
                                    f.array[a + 1] = d.y,
                                    f.array[a + 2] = d.z,
                                    f.array[a + 3] = d.w,
                                    a += 4;
                        Le.bindBuffer(Le.ARRAY_BUFFER, f.buffer),
                        Le.bufferData(Le.ARRAY_BUFFER, f.array, t),
                        f.needsUpdate = !1
                    }
            }
            function d(e, t) {
                var n, i, r, o, a, s, l, c, u, h, d, f, p = e.vertices, m = e.colors, v = e.lineDistances, g = p.length, y = m.length, b = v.length, x = e.__vertexArray, w = e.__colorArray, _ = e.__lineDistanceArray, S = e.verticesNeedUpdate, M = e.colorsNeedUpdate, C = e.lineDistancesNeedUpdate, T = e.__webglCustomAttributesList;
                if (S) {
                    for (n = 0; g > n; n++)
                        o = p[n],
                        a = 3 * n,
                        x[a] = o.x,
                        x[a + 1] = o.y,
                        x[a + 2] = o.z;
                    Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglVertexBuffer),
                    Le.bufferData(Le.ARRAY_BUFFER, x, t)
                }
                if (M) {
                    for (i = 0; y > i; i++)
                        s = m[i],
                        a = 3 * i,
                        w[a] = s.r,
                        w[a + 1] = s.g,
                        w[a + 2] = s.b;
                    Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglColorBuffer),
                    Le.bufferData(Le.ARRAY_BUFFER, w, t)
                }
                if (C) {
                    for (r = 0; b > r; r++)
                        _[r] = v[r];
                    Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglLineDistanceBuffer),
                    Le.bufferData(Le.ARRAY_BUFFER, _, t)
                }
                if (T)
                    for (l = 0,
                    c = T.length; c > l; l++)
                        if (f = T[l],
                        f.needsUpdate && (void 0 === f.boundTo || "vertices" === f.boundTo)) {
                            if (a = 0,
                            h = f.value.length,
                            1 === f.size)
                                for (u = 0; h > u; u++)
                                    f.array[u] = f.value[u];
                            else if (2 === f.size)
                                for (u = 0; h > u; u++)
                                    d = f.value[u],
                                    f.array[a] = d.x,
                                    f.array[a + 1] = d.y,
                                    a += 2;
                            else if (3 === f.size)
                                if ("c" === f.type)
                                    for (u = 0; h > u; u++)
                                        d = f.value[u],
                                        f.array[a] = d.r,
                                        f.array[a + 1] = d.g,
                                        f.array[a + 2] = d.b,
                                        a += 3;
                                else
                                    for (u = 0; h > u; u++)
                                        d = f.value[u],
                                        f.array[a] = d.x,
                                        f.array[a + 1] = d.y,
                                        f.array[a + 2] = d.z,
                                        a += 3;
                            else if (4 === f.size)
                                for (u = 0; h > u; u++)
                                    d = f.value[u],
                                    f.array[a] = d.x,
                                    f.array[a + 1] = d.y,
                                    f.array[a + 2] = d.z,
                                    f.array[a + 3] = d.w,
                                    a += 4;
                            Le.bindBuffer(Le.ARRAY_BUFFER, f.buffer),
                            Le.bufferData(Le.ARRAY_BUFFER, f.array, t),
                            f.needsUpdate = !1
                        }
            }
            function f(e, t, n, i, o) {
                if (e.__inittedArrays) {
                    var a, s, l, c, h, d, f, p, m, v, g, y, b, x, w, _, S, M, C, T, E, k, A, P, L, O, R, F, B, D, I, N, j, V, z, U, H, G, W, q, X, Y, J = u(o), Z = 0, Q = 0, K = 0, $ = 0, ee = 0, te = 0, ne = 0, ie = 0, re = 0, oe = 0, ae = 0, se = 0, le = e.__vertexArray, ce = e.__uvArray, ue = e.__uv2Array, he = e.__normalArray, de = e.__tangentArray, fe = e.__colorArray, pe = e.__skinIndexArray, me = e.__skinWeightArray, ve = e.__morphTargetsArrays, ge = e.__morphNormalsArrays, ye = e.__webglCustomAttributesList, be = e.__faceArray, xe = e.__lineArray, we = t.geometry, _e = we.verticesNeedUpdate, Se = we.elementsNeedUpdate, Me = we.uvsNeedUpdate, Ce = we.normalsNeedUpdate, Te = we.tangentsNeedUpdate, Ee = we.colorsNeedUpdate, ke = we.morphTargetsNeedUpdate, Ae = we.vertices, Pe = e.faces3, Oe = we.faces, Re = we.faceVertexUvs[0], Fe = we.faceVertexUvs[1], Be = we.skinIndices, De = we.skinWeights, Ie = we.morphTargets, Ne = we.morphNormals;
                    if (_e) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            c = Oe[Pe[a]],
                            y = Ae[c.a],
                            b = Ae[c.b],
                            x = Ae[c.c],
                            le[Q] = y.x,
                            le[Q + 1] = y.y,
                            le[Q + 2] = y.z,
                            le[Q + 3] = b.x,
                            le[Q + 4] = b.y,
                            le[Q + 5] = b.z,
                            le[Q + 6] = x.x,
                            le[Q + 7] = x.y,
                            le[Q + 8] = x.z,
                            Q += 9;
                        Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglVertexBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, le, n)
                    }
                    if (ke)
                        for (z = 0,
                        U = Ie.length; U > z; z++) {
                            for (ae = 0,
                            a = 0,
                            s = Pe.length; s > a; a++)
                                W = Pe[a],
                                c = Oe[W],
                                y = Ie[z].vertices[c.a],
                                b = Ie[z].vertices[c.b],
                                x = Ie[z].vertices[c.c],
                                H = ve[z],
                                H[ae] = y.x,
                                H[ae + 1] = y.y,
                                H[ae + 2] = y.z,
                                H[ae + 3] = b.x,
                                H[ae + 4] = b.y,
                                H[ae + 5] = b.z,
                                H[ae + 6] = x.x,
                                H[ae + 7] = x.y,
                                H[ae + 8] = x.z,
                                o.morphNormals && (J ? (M = Ne[z].faceNormals[W],
                                C = M,
                                T = M) : (q = Ne[z].vertexNormals[W],
                                M = q.a,
                                C = q.b,
                                T = q.c),
                                G = ge[z],
                                G[ae] = M.x,
                                G[ae + 1] = M.y,
                                G[ae + 2] = M.z,
                                G[ae + 3] = C.x,
                                G[ae + 4] = C.y,
                                G[ae + 5] = C.z,
                                G[ae + 6] = T.x,
                                G[ae + 7] = T.y,
                                G[ae + 8] = T.z),
                                ae += 9;
                            Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglMorphTargetsBuffers[z]),
                            Le.bufferData(Le.ARRAY_BUFFER, ve[z], n),
                            o.morphNormals && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglMorphNormalsBuffers[z]),
                            Le.bufferData(Le.ARRAY_BUFFER, ge[z], n))
                        }
                    if (De.length) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            c = Oe[Pe[a]],
                            P = De[c.a],
                            L = De[c.b],
                            O = De[c.c],
                            me[oe] = P.x,
                            me[oe + 1] = P.y,
                            me[oe + 2] = P.z,
                            me[oe + 3] = P.w,
                            me[oe + 4] = L.x,
                            me[oe + 5] = L.y,
                            me[oe + 6] = L.z,
                            me[oe + 7] = L.w,
                            me[oe + 8] = O.x,
                            me[oe + 9] = O.y,
                            me[oe + 10] = O.z,
                            me[oe + 11] = O.w,
                            R = Be[c.a],
                            F = Be[c.b],
                            B = Be[c.c],
                            pe[oe] = R.x,
                            pe[oe + 1] = R.y,
                            pe[oe + 2] = R.z,
                            pe[oe + 3] = R.w,
                            pe[oe + 4] = F.x,
                            pe[oe + 5] = F.y,
                            pe[oe + 6] = F.z,
                            pe[oe + 7] = F.w,
                            pe[oe + 8] = B.x,
                            pe[oe + 9] = B.y,
                            pe[oe + 10] = B.z,
                            pe[oe + 11] = B.w,
                            oe += 12;
                        oe > 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglSkinIndicesBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, pe, n),
                        Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglSkinWeightsBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, me, n))
                    }
                    if (Ee) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            c = Oe[Pe[a]],
                            f = c.vertexColors,
                            p = c.color,
                            3 === f.length && o.vertexColors === r.VertexColors ? (E = f[0],
                            k = f[1],
                            A = f[2]) : (E = p,
                            k = p,
                            A = p),
                            fe[re] = E.r,
                            fe[re + 1] = E.g,
                            fe[re + 2] = E.b,
                            fe[re + 3] = k.r,
                            fe[re + 4] = k.g,
                            fe[re + 5] = k.b,
                            fe[re + 6] = A.r,
                            fe[re + 7] = A.g,
                            fe[re + 8] = A.b,
                            re += 9;
                        re > 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglColorBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, fe, n))
                    }
                    if (Te && we.hasTangents) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            c = Oe[Pe[a]],
                            m = c.vertexTangents,
                            w = m[0],
                            _ = m[1],
                            S = m[2],
                            de[ne] = w.x,
                            de[ne + 1] = w.y,
                            de[ne + 2] = w.z,
                            de[ne + 3] = w.w,
                            de[ne + 4] = _.x,
                            de[ne + 5] = _.y,
                            de[ne + 6] = _.z,
                            de[ne + 7] = _.w,
                            de[ne + 8] = S.x,
                            de[ne + 9] = S.y,
                            de[ne + 10] = S.z,
                            de[ne + 11] = S.w,
                            ne += 12;
                        Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglTangentBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, de, n)
                    }
                    if (Ce) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            if (c = Oe[Pe[a]],
                            h = c.vertexNormals,
                            d = c.normal,
                            3 === h.length && J === !1)
                                for (D = 0; 3 > D; D++)
                                    N = h[D],
                                    he[te] = N.x,
                                    he[te + 1] = N.y,
                                    he[te + 2] = N.z,
                                    te += 3;
                            else
                                for (D = 0; 3 > D; D++)
                                    he[te] = d.x,
                                    he[te + 1] = d.y,
                                    he[te + 2] = d.z,
                                    te += 3;
                        Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglNormalBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, he, n)
                    }
                    if (Me && Re) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            if (l = Pe[a],
                            v = Re[l],
                            void 0 !== v)
                                for (D = 0; 3 > D; D++)
                                    j = v[D],
                                    ce[K] = j.x,
                                    ce[K + 1] = j.y,
                                    K += 2;
                        K > 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglUVBuffer),
                        Le.bufferData(Le.ARRAY_BUFFER, ce, n))
                    }
                    if (Me && Fe) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            if (l = Pe[a],
                            g = Fe[l],
                            void 0 !== g)
                                for (D = 0; 3 > D; D++)
                                    V = g[D],
                                    ue[$] = V.x,
                                    ue[$ + 1] = V.y,
                                    $ += 2;
                        $ > 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglUV2Buffer),
                        Le.bufferData(Le.ARRAY_BUFFER, ue, n))
                    }
                    if (Se) {
                        for (a = 0,
                        s = Pe.length; s > a; a++)
                            be[ee] = Z,
                            be[ee + 1] = Z + 1,
                            be[ee + 2] = Z + 2,
                            ee += 3,
                            xe[ie] = Z,
                            xe[ie + 1] = Z + 1,
                            xe[ie + 2] = Z,
                            xe[ie + 3] = Z + 2,
                            xe[ie + 4] = Z + 1,
                            xe[ie + 5] = Z + 2,
                            ie += 6,
                            Z += 3;
                        Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer),
                        Le.bufferData(Le.ELEMENT_ARRAY_BUFFER, be, n),
                        Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer),
                        Le.bufferData(Le.ELEMENT_ARRAY_BUFFER, xe, n)
                    }
                    if (ye)
                        for (D = 0,
                        I = ye.length; I > D; D++)
                            if (Y = ye[D],
                            Y.__original.needsUpdate) {
                                if (se = 0,
                                1 === Y.size) {
                                    if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            c = Oe[Pe[a]],
                                            Y.array[se] = Y.value[c.a],
                                            Y.array[se + 1] = Y.value[c.b],
                                            Y.array[se + 2] = Y.value[c.c],
                                            se += 3;
                                    else if ("faces" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            Y.array[se] = X,
                                            Y.array[se + 1] = X,
                                            Y.array[se + 2] = X,
                                            se += 3
                                } else if (2 === Y.size) {
                                    if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            c = Oe[Pe[a]],
                                            y = Y.value[c.a],
                                            b = Y.value[c.b],
                                            x = Y.value[c.c],
                                            Y.array[se] = y.x,
                                            Y.array[se + 1] = y.y,
                                            Y.array[se + 2] = b.x,
                                            Y.array[se + 3] = b.y,
                                            Y.array[se + 4] = x.x,
                                            Y.array[se + 5] = x.y,
                                            se += 6;
                                    else if ("faces" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            y = X,
                                            b = X,
                                            x = X,
                                            Y.array[se] = y.x,
                                            Y.array[se + 1] = y.y,
                                            Y.array[se + 2] = b.x,
                                            Y.array[se + 3] = b.y,
                                            Y.array[se + 4] = x.x,
                                            Y.array[se + 5] = x.y,
                                            se += 6
                                } else if (3 === Y.size) {
                                    var je;
                                    if (je = "c" === Y.type ? ["r", "g", "b"] : ["x", "y", "z"],
                                    void 0 === Y.boundTo || "vertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            c = Oe[Pe[a]],
                                            y = Y.value[c.a],
                                            b = Y.value[c.b],
                                            x = Y.value[c.c],
                                            Y.array[se] = y[je[0]],
                                            Y.array[se + 1] = y[je[1]],
                                            Y.array[se + 2] = y[je[2]],
                                            Y.array[se + 3] = b[je[0]],
                                            Y.array[se + 4] = b[je[1]],
                                            Y.array[se + 5] = b[je[2]],
                                            Y.array[se + 6] = x[je[0]],
                                            Y.array[se + 7] = x[je[1]],
                                            Y.array[se + 8] = x[je[2]],
                                            se += 9;
                                    else if ("faces" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            y = X,
                                            b = X,
                                            x = X,
                                            Y.array[se] = y[je[0]],
                                            Y.array[se + 1] = y[je[1]],
                                            Y.array[se + 2] = y[je[2]],
                                            Y.array[se + 3] = b[je[0]],
                                            Y.array[se + 4] = b[je[1]],
                                            Y.array[se + 5] = b[je[2]],
                                            Y.array[se + 6] = x[je[0]],
                                            Y.array[se + 7] = x[je[1]],
                                            Y.array[se + 8] = x[je[2]],
                                            se += 9;
                                    else if ("faceVertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            y = X[0],
                                            b = X[1],
                                            x = X[2],
                                            Y.array[se] = y[je[0]],
                                            Y.array[se + 1] = y[je[1]],
                                            Y.array[se + 2] = y[je[2]],
                                            Y.array[se + 3] = b[je[0]],
                                            Y.array[se + 4] = b[je[1]],
                                            Y.array[se + 5] = b[je[2]],
                                            Y.array[se + 6] = x[je[0]],
                                            Y.array[se + 7] = x[je[1]],
                                            Y.array[se + 8] = x[je[2]],
                                            se += 9
                                } else if (4 === Y.size)
                                    if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            c = Oe[Pe[a]],
                                            y = Y.value[c.a],
                                            b = Y.value[c.b],
                                            x = Y.value[c.c],
                                            Y.array[se] = y.x,
                                            Y.array[se + 1] = y.y,
                                            Y.array[se + 2] = y.z,
                                            Y.array[se + 3] = y.w,
                                            Y.array[se + 4] = b.x,
                                            Y.array[se + 5] = b.y,
                                            Y.array[se + 6] = b.z,
                                            Y.array[se + 7] = b.w,
                                            Y.array[se + 8] = x.x,
                                            Y.array[se + 9] = x.y,
                                            Y.array[se + 10] = x.z,
                                            Y.array[se + 11] = x.w,
                                            se += 12;
                                    else if ("faces" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            y = X,
                                            b = X,
                                            x = X,
                                            Y.array[se] = y.x,
                                            Y.array[se + 1] = y.y,
                                            Y.array[se + 2] = y.z,
                                            Y.array[se + 3] = y.w,
                                            Y.array[se + 4] = b.x,
                                            Y.array[se + 5] = b.y,
                                            Y.array[se + 6] = b.z,
                                            Y.array[se + 7] = b.w,
                                            Y.array[se + 8] = x.x,
                                            Y.array[se + 9] = x.y,
                                            Y.array[se + 10] = x.z,
                                            Y.array[se + 11] = x.w,
                                            se += 12;
                                    else if ("faceVertices" === Y.boundTo)
                                        for (a = 0,
                                        s = Pe.length; s > a; a++)
                                            X = Y.value[Pe[a]],
                                            y = X[0],
                                            b = X[1],
                                            x = X[2],
                                            Y.array[se] = y.x,
                                            Y.array[se + 1] = y.y,
                                            Y.array[se + 2] = y.z,
                                            Y.array[se + 3] = y.w,
                                            Y.array[se + 4] = b.x,
                                            Y.array[se + 5] = b.y,
                                            Y.array[se + 6] = b.z,
                                            Y.array[se + 7] = b.w,
                                            Y.array[se + 8] = x.x,
                                            Y.array[se + 9] = x.y,
                                            Y.array[se + 10] = x.z,
                                            Y.array[se + 11] = x.w,
                                            se += 12;
                                Le.bindBuffer(Le.ARRAY_BUFFER, Y.buffer),
                                Le.bufferData(Le.ARRAY_BUFFER, Y.array, n)
                            }
                    i && (delete e.__inittedArrays,
                    delete e.__colorArray,
                    delete e.__normalArray,
                    delete e.__tangentArray,
                    delete e.__uvArray,
                    delete e.__uv2Array,
                    delete e.__faceArray,
                    delete e.__vertexArray,
                    delete e.__lineArray,
                    delete e.__skinIndexArray,
                    delete e.__skinWeightArray)
                }
            }
            function p(e, t, n, i) {
                for (var r = n.attributes, o = t.attributes, a = t.attributesKeys, s = 0, l = a.length; l > s; s++) {
                    var c = a[s]
                      , u = o[c];
                    if (u >= 0) {
                        var h = r[c];
                        if (void 0 !== h) {
                            var d = h.itemSize;
                            Le.bindBuffer(Le.ARRAY_BUFFER, h.buffer),
                            et.enableAttribute(u),
                            Le.vertexAttribPointer(u, d, Le.FLOAT, !1, 0, i * d * 4)
                        } else
                            void 0 !== e.defaultAttributeValues && (2 === e.defaultAttributeValues[c].length ? Le.vertexAttrib2fv(u, e.defaultAttributeValues[c]) : 3 === e.defaultAttributeValues[c].length && Le.vertexAttrib3fv(u, e.defaultAttributeValues[c]))
                    }
                }
                et.disableUnusedAttributes()
            }
            function m(e, t, n) {
                var i = e.program.attributes;
                if (-1 !== n.morphTargetBase && i.position >= 0 ? (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[n.morphTargetBase]),
                et.enableAttribute(i.position),
                Le.vertexAttribPointer(i.position, 3, Le.FLOAT, !1, 0, 0)) : i.position >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglVertexBuffer),
                et.enableAttribute(i.position),
                Le.vertexAttribPointer(i.position, 3, Le.FLOAT, !1, 0, 0)),
                n.morphTargetForcedOrder.length)
                    for (var r, o = 0, a = n.morphTargetForcedOrder, s = n.morphTargetInfluences; o < e.numSupportedMorphTargets && o < a.length; )
                        r = i["morphTarget" + o],
                        r >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[a[o]]),
                        et.enableAttribute(r),
                        Le.vertexAttribPointer(r, 3, Le.FLOAT, !1, 0, 0)),
                        r = i["morphNormal" + o],
                        r >= 0 && e.morphNormals && (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[a[o]]),
                        et.enableAttribute(r),
                        Le.vertexAttribPointer(r, 3, Le.FLOAT, !1, 0, 0)),
                        n.__webglMorphTargetInfluences[o] = s[a[o]],
                        o++;
                else {
                    var l = []
                      , s = n.morphTargetInfluences
                      , c = n.geometry.morphTargets;
                    s.length > c.length && (console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),
                    s.length = c.length);
                    for (var u = 0, h = s.length; h > u; u++) {
                        var d = s[u];
                        l.push([d, u])
                    }
                    l.length > e.numSupportedMorphTargets ? (l.sort(y),
                    l.length = e.numSupportedMorphTargets) : l.length > e.numSupportedMorphNormals ? l.sort(y) : 0 === l.length && l.push([0, 0]);
                    for (var r, o = 0, f = e.numSupportedMorphTargets; f > o; o++)
                        if (l[o]) {
                            var p = l[o][1];
                            r = i["morphTarget" + o],
                            r >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[p]),
                            et.enableAttribute(r),
                            Le.vertexAttribPointer(r, 3, Le.FLOAT, !1, 0, 0)),
                            r = i["morphNormal" + o],
                            r >= 0 && e.morphNormals && (Le.bindBuffer(Le.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[p]),
                            et.enableAttribute(r),
                            Le.vertexAttribPointer(r, 3, Le.FLOAT, !1, 0, 0)),
                            n.__webglMorphTargetInfluences[o] = s[p]
                        } else
                            n.__webglMorphTargetInfluences[o] = 0
                }
                null !== e.program.uniforms.morphTargetInfluences && Le.uniform1fv(e.program.uniforms.morphTargetInfluences, n.__webglMorphTargetInfluences)
            }
            function v(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
            }
            function g(e, t) {
                return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
            }
            function y(e, t) {
                return t[0] - e[0]
            }
            function b(e) {
                if (e.visible !== !1) {
                    if (e instanceof r.Scene || e instanceof r.Group)
                        ;
                    else if (M(e),
                    e instanceof r.Light)
                        Me.push(e);
                    else if (e instanceof r.Sprite)
                        Ae.push(e);
                    else if (e instanceof r.LensFlare)
                        Pe.push(e);
                    else {
                        var t = Ce[e.id];
                        if (t && (e.frustumCulled === !1 || qe.intersectsObject(e) === !0))
                            for (var n = 0, i = t.length; i > n; n++) {
                                var o = t[n];
                                S(o),
                                o.render = !0,
                                Oe.sortObjects === !0 && (Ye.setFromMatrixPosition(e.matrixWorld),
                                Ye.applyProjection(Xe),
                                o.z = Ye.z)
                            }
                    }
                    for (var n = 0, i = e.children.length; i > n; n++)
                        b(e.children[n])
                }
            }
            function x(e, t, n, i, o) {
                for (var a, s = 0, l = e.length; l > s; s++) {
                    var c = e[s]
                      , u = c.object
                      , h = c.buffer;
                    if (Z(u, t),
                    o)
                        a = o;
                    else {
                        if (a = c.material,
                        !a)
                            continue;
                        B(a)
                    }
                    Oe.setMaterialFaces(a),
                    h instanceof r.BufferGeometry ? Oe.renderBufferDirect(t, n, i, a, h, u) : Oe.renderBuffer(t, n, i, a, h, u)
                }
            }
            function w(e, t, n, i, r, o) {
                for (var a, s = 0, l = e.length; l > s; s++) {
                    var c = e[s]
                      , u = c.object;
                    if (u.visible) {
                        if (o)
                            a = o;
                        else {
                            if (a = c[t],
                            !a)
                                continue;
                            B(a)
                        }
                        Oe.renderImmediateObject(n, i, r, a, u)
                    }
                }
            }
            function _(e) {
                var t = e.object
                  , n = t.material;
                n.transparent ? (e.transparent = n,
                e.opaque = null) : (e.opaque = n,
                e.transparent = null)
            }
            function S(e) {
                var t = e.object
                  , n = e.buffer
                  , i = t.geometry
                  , o = t.material;
                if (o instanceof r.MeshFaceMaterial) {
                    var a = i instanceof r.BufferGeometry ? 0 : n.materialIndex;
                    o = o.materials[a],
                    e.material = o,
                    o.transparent ? ke.push(e) : Ee.push(e)
                } else
                    o && (e.material = o,
                    o.transparent ? ke.push(e) : Ee.push(e))
            }
            function M(e) {
                void 0 === e.__webglInit && (e.__webglInit = !0,
                e._modelViewMatrix = new r.Matrix4,
                e._normalMatrix = new r.Matrix3,
                e.addEventListener("removed", wt));
                var i = e.geometry;
                if (void 0 === i || void 0 === i.__webglInit && (i.__webglInit = !0,
                i.addEventListener("dispose", _t),
                i instanceof r.BufferGeometry ? Oe.info.memory.geometries++ : e instanceof r.Mesh ? T(e, i) : e instanceof r.Line ? void 0 === i.__webglVertexBuffer && (n(i),
                s(i, e),
                i.verticesNeedUpdate = !0,
                i.colorsNeedUpdate = !0,
                i.lineDistancesNeedUpdate = !0) : e instanceof r.PointCloud && void 0 === i.__webglVertexBuffer && (t(i),
                a(i, e),
                i.verticesNeedUpdate = !0,
                i.colorsNeedUpdate = !0)),
                void 0 === e.__webglActive)
                    if (e.__webglActive = !0,
                    e instanceof r.Mesh) {
                        if (i instanceof r.BufferGeometry)
                            E(Ce, i, e);
                        else if (i instanceof r.Geometry)
                            for (var o = Lt[i.id], l = 0, c = o.length; c > l; l++)
                                E(Ce, o[l], e)
                    } else
                        e instanceof r.Line || e instanceof r.PointCloud ? E(Ce, i, e) : (e instanceof r.ImmediateRenderObject || e.immediateRenderCallback) && k(Te, e)
            }
            function C(e, t) {
                for (var n, i, r = tt.get("OES_element_index_uint") ? 4294967296 : 65535, o = {}, a = e.morphTargets.length, s = e.morphNormals.length, l = {}, c = [], u = 0, h = e.faces.length; h > u; u++) {
                    var d = e.faces[u]
                      , f = t ? d.materialIndex : 0;
                    f in o || (o[f] = {
                        hash: f,
                        counter: 0
                    }),
                    n = o[f].hash + "_" + o[f].counter,
                    n in l || (i = {
                        id: Ot++,
                        faces3: [],
                        materialIndex: f,
                        vertices: 0,
                        numMorphTargets: a,
                        numMorphNormals: s
                    },
                    l[n] = i,
                    c.push(i)),
                    l[n].vertices + 3 > r && (o[f].counter += 1,
                    n = o[f].hash + "_" + o[f].counter,
                    n in l || (i = {
                        id: Ot++,
                        faces3: [],
                        materialIndex: f,
                        vertices: 0,
                        numMorphTargets: a,
                        numMorphNormals: s
                    },
                    l[n] = i,
                    c.push(i))),
                    l[n].faces3.push(u),
                    l[n].vertices += 3
                }
                return c
            }
            function T(e, t) {
                var n = e.material
                  , o = !1;
                (void 0 === Lt[t.id] || t.groupsNeedUpdate === !0) && (delete Ce[e.id],
                Lt[t.id] = C(t, n instanceof r.MeshFaceMaterial),
                t.groupsNeedUpdate = !1);
                for (var a = Lt[t.id], s = 0, c = a.length; c > s; s++) {
                    var u = a[s];
                    void 0 === u.__webglVertexBuffer ? (i(u),
                    l(u, e),
                    t.verticesNeedUpdate = !0,
                    t.morphTargetsNeedUpdate = !0,
                    t.elementsNeedUpdate = !0,
                    t.uvsNeedUpdate = !0,
                    t.normalsNeedUpdate = !0,
                    t.tangentsNeedUpdate = !0,
                    t.colorsNeedUpdate = !0,
                    o = !0) : o = !1,
                    (o || void 0 === e.__webglActive) && E(Ce, u, e)
                }
                e.__webglActive = !0
            }
            function E(e, t, n) {
                var i = n.id;
                e[i] = e[i] || [],
                e[i].push({
                    id: i,
                    buffer: t,
                    object: n,
                    material: null,
                    z: 0
                })
            }
            function k(e, t) {
                e.push({
                    id: null,
                    object: t,
                    opaque: null,
                    transparent: null,
                    z: 0
                })
            }
            function A(e) {
                var t = e.geometry;
                if (t instanceof r.BufferGeometry)
                    for (var n = t.attributes, i = t.attributesKeys, o = 0, a = i.length; a > o; o++) {
                        var s = i[o]
                          , l = n[s]
                          , u = "index" === s ? Le.ELEMENT_ARRAY_BUFFER : Le.ARRAY_BUFFER;
                        void 0 === l.buffer ? (l.buffer = Le.createBuffer(),
                        Le.bindBuffer(u, l.buffer),
                        Le.bufferData(u, l.array, l instanceof r.DynamicBufferAttribute ? Le.DYNAMIC_DRAW : Le.STATIC_DRAW),
                        l.needsUpdate = !1) : l.needsUpdate === !0 && (Le.bindBuffer(u, l.buffer),
                        void 0 === l.updateRange || -1 === l.updateRange.count ? Le.bufferSubData(u, 0, l.array) : 0 === l.updateRange.count ? console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually.") : (Le.bufferSubData(u, l.updateRange.offset * l.array.BYTES_PER_ELEMENT, l.array.subarray(l.updateRange.offset, l.updateRange.offset + l.updateRange.count)),
                        l.updateRange.count = 0),
                        l.needsUpdate = !1)
                    }
                else if (e instanceof r.Mesh) {
                    t.groupsNeedUpdate === !0 && T(e, t);
                    for (var p = Lt[t.id], o = 0, m = p.length; m > o; o++) {
                        var v = p[o]
                          , g = c(e, v)
                          , y = g.attributes && P(g);
                        (t.verticesNeedUpdate || t.morphTargetsNeedUpdate || t.elementsNeedUpdate || t.uvsNeedUpdate || t.normalsNeedUpdate || t.colorsNeedUpdate || t.tangentsNeedUpdate || y) && f(v, e, Le.DYNAMIC_DRAW, !t.dynamic, g)
                    }
                    t.verticesNeedUpdate = !1,
                    t.morphTargetsNeedUpdate = !1,
                    t.elementsNeedUpdate = !1,
                    t.uvsNeedUpdate = !1,
                    t.normalsNeedUpdate = !1,
                    t.colorsNeedUpdate = !1,
                    t.tangentsNeedUpdate = !1,
                    g.attributes && L(g)
                } else if (e instanceof r.Line) {
                    var g = c(e, t)
                      , y = g.attributes && P(g);
                    (t.verticesNeedUpdate || t.colorsNeedUpdate || t.lineDistancesNeedUpdate || y) && d(t, Le.DYNAMIC_DRAW),
                    t.verticesNeedUpdate = !1,
                    t.colorsNeedUpdate = !1,
                    t.lineDistancesNeedUpdate = !1,
                    g.attributes && L(g)
                } else if (e instanceof r.PointCloud) {
                    var g = c(e, t)
                      , y = g.attributes && P(g);
                    (t.verticesNeedUpdate || t.colorsNeedUpdate || y) && h(t, Le.DYNAMIC_DRAW, e),
                    t.verticesNeedUpdate = !1,
                    t.colorsNeedUpdate = !1,
                    g.attributes && L(g)
                }
            }
            function P(e) {
                for (var t in e.attributes)
                    if (e.attributes[t].needsUpdate)
                        return !0;
                return !1
            }
            function L(e) {
                for (var t in e.attributes)
                    e.attributes[t].needsUpdate = !1
            }
            function O(e) {
                e instanceof r.Mesh || e instanceof r.PointCloud || e instanceof r.Line ? delete Ce[e.id] : (e instanceof r.ImmediateRenderObject || e.immediateRenderCallback) && R(Te, e),
                delete e.__webglInit,
                delete e._modelViewMatrix,
                delete e._normalMatrix,
                delete e.__webglActive
            }
            function R(e, t) {
                for (var n = e.length - 1; n >= 0; n--)
                    e[n].object === t && e.splice(n, 1)
            }
            function F(e, t, n, i) {
                e.addEventListener("dispose", Ct);
                var o = Rt[e.type];
                if (o) {
                    var a = r.ShaderLib[o];
                    e.__webglShader = {
                        uniforms: r.UniformsUtils.clone(a.uniforms),
                        vertexShader: a.vertexShader,
                        fragmentShader: a.fragmentShader
                    }
                } else
                    e.__webglShader = {
                        uniforms: e.uniforms,
                        vertexShader: e.vertexShader,
                        fragmentShader: e.fragmentShader
                    };
                var s = ce(t)
                  , l = ue(t)
                  , c = le(i)
                  , u = {
                    precision: pe,
                    supportsVertexTextures: ct,
                    map: !!e.map,
                    envMap: !!e.envMap,
                    envMapMode: e.envMap && e.envMap.mapping,
                    lightMap: !!e.lightMap,
                    bumpMap: !!e.bumpMap,
                    normalMap: !!e.normalMap,
                    specularMap: !!e.specularMap,
                    alphaMap: !!e.alphaMap,
                    combine: e.combine,
                    vertexColors: e.vertexColors,
                    fog: n,
                    useFog: e.fog,
                    fogExp: n instanceof r.FogExp2,
                    flatShading: e.shading === r.FlatShading,
                    sizeAttenuation: e.sizeAttenuation,
                    logarithmicDepthBuffer: we,
                    skinning: e.skinning,
                    maxBones: c,
                    useVertexTexture: ut && i && i.skeleton && i.skeleton.useVertexTexture,
                    morphTargets: e.morphTargets,
                    morphNormals: e.morphNormals,
                    maxMorphTargets: Oe.maxMorphTargets,
                    maxMorphNormals: Oe.maxMorphNormals,
                    maxDirLights: s.directional,
                    maxPointLights: s.point,
                    maxSpotLights: s.spot,
                    maxHemiLights: s.hemi,
                    maxShadows: l,
                    shadowMapEnabled: Oe.shadowMapEnabled && i.receiveShadow && l > 0,
                    shadowMapType: Oe.shadowMapType,
                    shadowMapDebug: Oe.shadowMapDebug,
                    shadowMapCascade: Oe.shadowMapCascade,
                    alphaTest: e.alphaTest,
                    metal: e.metal,
                    wrapAround: e.wrapAround,
                    doubleSided: e.side === r.DoubleSide,
                    flipSided: e.side === r.BackSide
                }
                  , h = [];
                if (o ? h.push(o) : (h.push(e.fragmentShader),
                h.push(e.vertexShader)),
                void 0 !== e.defines)
                    for (var d in e.defines)
                        h.push(d),
                        h.push(e.defines[d]);
                for (var d in u)
                    h.push(d),
                    h.push(u[d]);
                for (var f, p = h.join(), m = 0, v = Re.length; v > m; m++) {
                    var g = Re[m];
                    if (g.code === p) {
                        f = g,
                        f.usedTimes++;
                        break
                    }
                }
                void 0 === f && (f = new r.WebGLProgram(Oe,p,e,u),
                Re.push(f),
                Oe.info.memory.programs = Re.length),
                e.program = f;
                var y = f.attributes;
                if (e.morphTargets) {
                    e.numSupportedMorphTargets = 0;
                    for (var b, x = "morphTarget", w = 0; w < Oe.maxMorphTargets; w++)
                        b = x + w,
                        y[b] >= 0 && e.numSupportedMorphTargets++
                }
                if (e.morphNormals) {
                    e.numSupportedMorphNormals = 0;
                    var b, x = "morphNormal";
                    for (w = 0; w < Oe.maxMorphNormals; w++)
                        b = x + w,
                        y[b] >= 0 && e.numSupportedMorphNormals++
                }
                e.uniformsList = [];
                for (var _ in e.__webglShader.uniforms) {
                    var S = e.program.uniforms[_];
                    S && e.uniformsList.push([e.__webglShader.uniforms[_], S])
                }
            }
            function B(e) {
                e.transparent === !0 ? et.setBlending(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha) : et.setBlending(r.NoBlending),
                et.setDepthTest(e.depthTest),
                et.setDepthWrite(e.depthWrite),
                et.setColorWrite(e.colorWrite),
                et.setPolygonOffset(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
            }
            function D(e, t, n, i, o) {
                je = 0,
                i.needsUpdate && (i.program && Pt(i),
                F(i, t, n, o),
                i.needsUpdate = !1),
                i.morphTargets && (o.__webglMorphTargetInfluences || (o.__webglMorphTargetInfluences = new Float32Array(Oe.maxMorphTargets)));
                var a = !1
                  , s = !1
                  , l = !1
                  , c = i.program
                  , u = c.uniforms
                  , h = i.__webglShader.uniforms;
                if (c.id !== Fe && (Le.useProgram(c.program),
                Fe = c.id,
                a = !0,
                s = !0,
                l = !0),
                i.id !== De && (-1 === De && (l = !0),
                De = i.id,
                s = !0),
                (a || e !== Ne) && (Le.uniformMatrix4fv(u.projectionMatrix, !1, e.projectionMatrix.elements),
                we && Le.uniform1f(u.logDepthBufFC, 2 / (Math.log(e.far + 1) / Math.LN2)),
                e !== Ne && (Ne = e),
                (i instanceof r.ShaderMaterial || i instanceof r.MeshPhongMaterial || i.envMap) && null !== u.cameraPosition && (Ye.setFromMatrixPosition(e.matrixWorld),
                Le.uniform3f(u.cameraPosition, Ye.x, Ye.y, Ye.z)),
                (i instanceof r.MeshPhongMaterial || i instanceof r.MeshLambertMaterial || i instanceof r.MeshBasicMaterial || i instanceof r.ShaderMaterial || i.skinning) && null !== u.viewMatrix && Le.uniformMatrix4fv(u.viewMatrix, !1, e.matrixWorldInverse.elements)),
                i.skinning)
                    if (o.bindMatrix && null !== u.bindMatrix && Le.uniformMatrix4fv(u.bindMatrix, !1, o.bindMatrix.elements),
                    o.bindMatrixInverse && null !== u.bindMatrixInverse && Le.uniformMatrix4fv(u.bindMatrixInverse, !1, o.bindMatrixInverse.elements),
                    ut && o.skeleton && o.skeleton.useVertexTexture) {
                        if (null !== u.boneTexture) {
                            var d = Y();
                            Le.uniform1i(u.boneTexture, d),
                            Oe.setTexture(o.skeleton.boneTexture, d)
                        }
                        null !== u.boneTextureWidth && Le.uniform1i(u.boneTextureWidth, o.skeleton.boneTextureWidth),
                        null !== u.boneTextureHeight && Le.uniform1i(u.boneTextureHeight, o.skeleton.boneTextureHeight)
                    } else
                        o.skeleton && o.skeleton.boneMatrices && null !== u.boneGlobalMatrices && Le.uniformMatrix4fv(u.boneGlobalMatrices, !1, o.skeleton.boneMatrices);
                return s && (n && i.fog && z(h, n),
                (i instanceof r.MeshPhongMaterial || i instanceof r.MeshLambertMaterial || i.lights) && (Ze && (l = !0,
                K(t),
                Ze = !1),
                l ? (G(h, Qe),
                W(h, !0)) : W(h, !1)),
                (i instanceof r.MeshBasicMaterial || i instanceof r.MeshLambertMaterial || i instanceof r.MeshPhongMaterial) && I(h, i),
                i instanceof r.LineBasicMaterial ? N(h, i) : i instanceof r.LineDashedMaterial ? (N(h, i),
                j(h, i)) : i instanceof r.PointCloudMaterial ? V(h, i) : i instanceof r.MeshPhongMaterial ? U(h, i) : i instanceof r.MeshLambertMaterial ? H(h, i) : i instanceof r.MeshDepthMaterial ? (h.mNear.value = e.near,
                h.mFar.value = e.far,
                h.opacity.value = i.opacity) : i instanceof r.MeshNormalMaterial && (h.opacity.value = i.opacity),
                o.receiveShadow && !i._shadowPass && q(h, t),
                J(i.uniformsList)),
                X(u, o),
                null !== u.modelMatrix && Le.uniformMatrix4fv(u.modelMatrix, !1, o.matrixWorld.elements),
                c
            }
            function I(e, t) {
                e.opacity.value = t.opacity,
                e.diffuse.value = t.color,
                e.map.value = t.map,
                e.lightMap.value = t.lightMap,
                e.specularMap.value = t.specularMap,
                e.alphaMap.value = t.alphaMap,
                t.bumpMap && (e.bumpMap.value = t.bumpMap,
                e.bumpScale.value = t.bumpScale),
                t.normalMap && (e.normalMap.value = t.normalMap,
                e.normalScale.value.copy(t.normalScale));
                var n;
                if (t.map ? n = t.map : t.specularMap ? n = t.specularMap : t.normalMap ? n = t.normalMap : t.bumpMap ? n = t.bumpMap : t.alphaMap && (n = t.alphaMap),
                void 0 !== n) {
                    var i = n.offset
                      , o = n.repeat;
                    e.offsetRepeat.value.set(i.x, i.y, o.x, o.y)
                }
                e.envMap.value = t.envMap,
                e.flipEnvMap.value = t.envMap instanceof r.WebGLRenderTargetCube ? 1 : -1,
                e.reflectivity.value = t.reflectivity,
                e.refractionRatio.value = t.refractionRatio
            }
            function N(e, t) {
                e.diffuse.value = t.color,
                e.opacity.value = t.opacity
            }
            function j(e, t) {
                e.dashSize.value = t.dashSize,
                e.totalSize.value = t.dashSize + t.gapSize,
                e.scale.value = t.scale
            }
            function V(e, t) {
                if (e.psColor.value = t.color,
                e.opacity.value = t.opacity,
                e.size.value = t.size,
                e.scale.value = he.height / 2,
                e.map.value = t.map,
                null !== t.map) {
                    var n = t.map.offset
                      , i = t.map.repeat;
                    e.offsetRepeat.value.set(n.x, n.y, i.x, i.y)
                }
            }
            function z(e, t) {
                e.fogColor.value = t.color,
                t instanceof r.Fog ? (e.fogNear.value = t.near,
                e.fogFar.value = t.far) : t instanceof r.FogExp2 && (e.fogDensity.value = t.density)
            }
            function U(e, t) {
                e.shininess.value = t.shininess,
                e.emissive.value = t.emissive,
                e.specular.value = t.specular,
                t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
            }
            function H(e, t) {
                e.emissive.value = t.emissive,
                t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
            }
            function G(e, t) {
                e.ambientLightColor.value = t.ambient,
                e.directionalLightColor.value = t.directional.colors,
                e.directionalLightDirection.value = t.directional.positions,
                e.pointLightColor.value = t.point.colors,
                e.pointLightPosition.value = t.point.positions,
                e.pointLightDistance.value = t.point.distances,
                e.pointLightDecay.value = t.point.decays,
                e.spotLightColor.value = t.spot.colors,
                e.spotLightPosition.value = t.spot.positions,
                e.spotLightDistance.value = t.spot.distances,
                e.spotLightDirection.value = t.spot.directions,
                e.spotLightAngleCos.value = t.spot.anglesCos,
                e.spotLightExponent.value = t.spot.exponents,
                e.spotLightDecay.value = t.spot.decays,
                e.hemisphereLightSkyColor.value = t.hemi.skyColors,
                e.hemisphereLightGroundColor.value = t.hemi.groundColors,
                e.hemisphereLightDirection.value = t.hemi.positions
            }
            function W(e, t) {
                e.ambientLightColor.needsUpdate = t,
                e.directionalLightColor.needsUpdate = t,
                e.directionalLightDirection.needsUpdate = t,
                e.pointLightColor.needsUpdate = t,
                e.pointLightPosition.needsUpdate = t,
                e.pointLightDistance.needsUpdate = t,
                e.pointLightDecay.needsUpdate = t,
                e.spotLightColor.needsUpdate = t,
                e.spotLightPosition.needsUpdate = t,
                e.spotLightDistance.needsUpdate = t,
                e.spotLightDirection.needsUpdate = t,
                e.spotLightAngleCos.needsUpdate = t,
                e.spotLightExponent.needsUpdate = t,
                e.spotLightDecay.needsUpdate = t,
                e.hemisphereLightSkyColor.needsUpdate = t,
                e.hemisphereLightGroundColor.needsUpdate = t,
                e.hemisphereLightDirection.needsUpdate = t
            }
            function q(e, t) {
                if (e.shadowMatrix)
                    for (var n = 0, i = 0, o = t.length; o > i; i++) {
                        var a = t[i];
                        a.castShadow && (a instanceof r.SpotLight || a instanceof r.DirectionalLight && !a.shadowCascade) && (e.shadowMap.value[n] = a.shadowMap,
                        e.shadowMapSize.value[n] = a.shadowMapSize,
                        e.shadowMatrix.value[n] = a.shadowMatrix,
                        e.shadowDarkness.value[n] = a.shadowDarkness,
                        e.shadowBias.value[n] = a.shadowBias,
                        n++)
                    }
            }
            function X(e, t) {
                Le.uniformMatrix4fv(e.modelViewMatrix, !1, t._modelViewMatrix.elements),
                e.normalMatrix && Le.uniformMatrix3fv(e.normalMatrix, !1, t._normalMatrix.elements)
            }
            function Y() {
                var e = je;
                return e >= ot && r.warn("WebGLRenderer: trying to use " + e + " texture units while this GPU supports only " + ot),
                je += 1,
                e
            }
            function J(e) {
                for (var t, n, i, o = 0, a = e.length; a > o; o++) {
                    var s = e[o][0];
                    if (s.needsUpdate !== !1) {
                        var l = s.type
                          , c = s.value
                          , u = e[o][1];
                        switch (l) {
                        case "1i":
                            Le.uniform1i(u, c);
                            break;
                        case "1f":
                            Le.uniform1f(u, c);
                            break;
                        case "2f":
                            Le.uniform2f(u, c[0], c[1]);
                            break;
                        case "3f":
                            Le.uniform3f(u, c[0], c[1], c[2]);
                            break;
                        case "4f":
                            Le.uniform4f(u, c[0], c[1], c[2], c[3]);
                            break;
                        case "1iv":
                            Le.uniform1iv(u, c);
                            break;
                        case "3iv":
                            Le.uniform3iv(u, c);
                            break;
                        case "1fv":
                            Le.uniform1fv(u, c);
                            break;
                        case "2fv":
                            Le.uniform2fv(u, c);
                            break;
                        case "3fv":
                            Le.uniform3fv(u, c);
                            break;
                        case "4fv":
                            Le.uniform4fv(u, c);
                            break;
                        case "Matrix3fv":
                            Le.uniformMatrix3fv(u, !1, c);
                            break;
                        case "Matrix4fv":
                            Le.uniformMatrix4fv(u, !1, c);
                            break;
                        case "i":
                            Le.uniform1i(u, c);
                            break;
                        case "f":
                            Le.uniform1f(u, c);
                            break;
                        case "v2":
                            Le.uniform2f(u, c.x, c.y);
                            break;
                        case "v3":
                            Le.uniform3f(u, c.x, c.y, c.z);
                            break;
                        case "v4":
                            Le.uniform4f(u, c.x, c.y, c.z, c.w);
                            break;
                        case "c":
                            Le.uniform3f(u, c.r, c.g, c.b);
                            break;
                        case "iv1":
                            Le.uniform1iv(u, c);
                            break;
                        case "iv":
                            Le.uniform3iv(u, c);
                            break;
                        case "fv1":
                            Le.uniform1fv(u, c);
                            break;
                        case "fv":
                            Le.uniform3fv(u, c);
                            break;
                        case "v2v":
                            void 0 === s._array && (s._array = new Float32Array(2 * c.length));
                            for (var h = 0, d = c.length; d > h; h++)
                                i = 2 * h,
                                s._array[i] = c[h].x,
                                s._array[i + 1] = c[h].y;
                            Le.uniform2fv(u, s._array);
                            break;
                        case "v3v":
                            void 0 === s._array && (s._array = new Float32Array(3 * c.length));
                            for (var h = 0, d = c.length; d > h; h++)
                                i = 3 * h,
                                s._array[i] = c[h].x,
                                s._array[i + 1] = c[h].y,
                                s._array[i + 2] = c[h].z;
                            Le.uniform3fv(u, s._array);
                            break;
                        case "v4v":
                            void 0 === s._array && (s._array = new Float32Array(4 * c.length));
                            for (var h = 0, d = c.length; d > h; h++)
                                i = 4 * h,
                                s._array[i] = c[h].x,
                                s._array[i + 1] = c[h].y,
                                s._array[i + 2] = c[h].z,
                                s._array[i + 3] = c[h].w;
                            Le.uniform4fv(u, s._array);
                            break;
                        case "m3":
                            Le.uniformMatrix3fv(u, !1, c.elements);
                            break;
                        case "m3v":
                            void 0 === s._array && (s._array = new Float32Array(9 * c.length));
                            for (var h = 0, d = c.length; d > h; h++)
                                c[h].flattenToArrayOffset(s._array, 9 * h);
                            Le.uniformMatrix3fv(u, !1, s._array);
                            break;
                        case "m4":
                            Le.uniformMatrix4fv(u, !1, c.elements);
                            break;
                        case "m4v":
                            void 0 === s._array && (s._array = new Float32Array(16 * c.length));
                            for (var h = 0, d = c.length; d > h; h++)
                                c[h].flattenToArrayOffset(s._array, 16 * h);
                            Le.uniformMatrix4fv(u, !1, s._array);
                            break;
                        case "t":
                            if (t = c,
                            n = Y(),
                            Le.uniform1i(u, n),
                            !t)
                                continue;
                            t instanceof r.CubeTexture || t.image instanceof Array && 6 === t.image.length ? te(t, n) : t instanceof r.WebGLRenderTargetCube ? ne(t, n) : Oe.setTexture(t, n);
                            break;
                        case "tv":
                            void 0 === s._array && (s._array = []);
                            for (var h = 0, d = s.value.length; d > h; h++)
                                s._array[h] = Y();
                            Le.uniform1iv(u, s._array);
                            for (var h = 0, d = s.value.length; d > h; h++)
                                t = s.value[h],
                                n = s._array[h],
                                t && Oe.setTexture(t, n);
                            break;
                        default:
                            r.warn("THREE.WebGLRenderer: Unknown uniform type: " + l)
                        }
                    }
                }
            }
            function Z(e, t) {
                e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, e.matrixWorld),
                e._normalMatrix.getNormalMatrix(e._modelViewMatrix)
            }
            function Q(e, t, n, i) {
                e[t] = n.r * i,
                e[t + 1] = n.g * i,
                e[t + 2] = n.b * i
            }
            function K(e) {
                var t, n, i, o, a, s, l, c, u = 0, h = 0, d = 0, f = Qe, p = f.directional.colors, m = f.directional.positions, v = f.point.colors, g = f.point.positions, y = f.point.distances, b = f.point.decays, x = f.spot.colors, w = f.spot.positions, _ = f.spot.distances, S = f.spot.directions, M = f.spot.anglesCos, C = f.spot.exponents, T = f.spot.decays, E = f.hemi.skyColors, k = f.hemi.groundColors, A = f.hemi.positions, P = 0, L = 0, O = 0, R = 0, F = 0, B = 0, D = 0, I = 0, N = 0, j = 0, V = 0, z = 0;
                for (t = 0,
                n = e.length; n > t; t++)
                    if (i = e[t],
                    !i.onlyShadow)
                        if (o = i.color,
                        l = i.intensity,
                        c = i.distance,
                        i instanceof r.AmbientLight) {
                            if (!i.visible)
                                continue;
                            u += o.r,
                            h += o.g,
                            d += o.b
                        } else if (i instanceof r.DirectionalLight) {
                            if (F += 1,
                            !i.visible)
                                continue;
                            Je.setFromMatrixPosition(i.matrixWorld),
                            Ye.setFromMatrixPosition(i.target.matrixWorld),
                            Je.sub(Ye),
                            Je.normalize(),
                            N = 3 * P,
                            m[N] = Je.x,
                            m[N + 1] = Je.y,
                            m[N + 2] = Je.z,
                            Q(p, N, o, l),
                            P += 1
                        } else if (i instanceof r.PointLight) {
                            if (B += 1,
                            !i.visible)
                                continue;
                            j = 3 * L,
                            Q(v, j, o, l),
                            Ye.setFromMatrixPosition(i.matrixWorld),
                            g[j] = Ye.x,
                            g[j + 1] = Ye.y,
                            g[j + 2] = Ye.z,
                            y[L] = c,
                            b[L] = 0 === i.distance ? 0 : i.decay,
                            L += 1
                        } else if (i instanceof r.SpotLight) {
                            if (D += 1,
                            !i.visible)
                                continue;
                            V = 3 * O,
                            Q(x, V, o, l),
                            Je.setFromMatrixPosition(i.matrixWorld),
                            w[V] = Je.x,
                            w[V + 1] = Je.y,
                            w[V + 2] = Je.z,
                            _[O] = c,
                            Ye.setFromMatrixPosition(i.target.matrixWorld),
                            Je.sub(Ye),
                            Je.normalize(),
                            S[V] = Je.x,
                            S[V + 1] = Je.y,
                            S[V + 2] = Je.z,
                            M[O] = Math.cos(i.angle),
                            C[O] = i.exponent,
                            T[O] = 0 === i.distance ? 0 : i.decay,
                            O += 1
                        } else if (i instanceof r.HemisphereLight) {
                            if (I += 1,
                            !i.visible)
                                continue;
                            Je.setFromMatrixPosition(i.matrixWorld),
                            Je.normalize(),
                            z = 3 * R,
                            A[z] = Je.x,
                            A[z + 1] = Je.y,
                            A[z + 2] = Je.z,
                            a = i.color,
                            s = i.groundColor,
                            Q(E, z, a, l),
                            Q(k, z, s, l),
                            R += 1
                        }
                for (t = 3 * P,
                n = Math.max(p.length, 3 * F); n > t; t++)
                    p[t] = 0;
                for (t = 3 * L,
                n = Math.max(v.length, 3 * B); n > t; t++)
                    v[t] = 0;
                for (t = 3 * O,
                n = Math.max(x.length, 3 * D); n > t; t++)
                    x[t] = 0;
                for (t = 3 * R,
                n = Math.max(E.length, 3 * I); n > t; t++)
                    E[t] = 0;
                for (t = 3 * R,
                n = Math.max(k.length, 3 * I); n > t; t++)
                    k[t] = 0;
                f.directional.length = P,
                f.point.length = L,
                f.spot.length = O,
                f.hemi.length = R,
                f.ambient[0] = u,
                f.ambient[1] = h,
                f.ambient[2] = d
            }
            function $(e, t, n) {
                var i;
                n ? (Le.texParameteri(e, Le.TEXTURE_WRAP_S, se(t.wrapS)),
                Le.texParameteri(e, Le.TEXTURE_WRAP_T, se(t.wrapT)),
                Le.texParameteri(e, Le.TEXTURE_MAG_FILTER, se(t.magFilter)),
                Le.texParameteri(e, Le.TEXTURE_MIN_FILTER, se(t.minFilter))) : (Le.texParameteri(e, Le.TEXTURE_WRAP_S, Le.CLAMP_TO_EDGE),
                Le.texParameteri(e, Le.TEXTURE_WRAP_T, Le.CLAMP_TO_EDGE),
                (t.wrapS !== r.ClampToEdgeWrapping || t.wrapT !== r.ClampToEdgeWrapping) && r.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( " + t.sourceFile + " )"),
                Le.texParameteri(e, Le.TEXTURE_MAG_FILTER, ae(t.magFilter)),
                Le.texParameteri(e, Le.TEXTURE_MIN_FILTER, ae(t.minFilter)),
                t.minFilter !== r.NearestFilter && t.minFilter !== r.LinearFilter && r.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( " + t.sourceFile + " )")),
                i = tt.get("EXT_texture_filter_anisotropic"),
                i && t.type !== r.FloatType && t.type !== r.HalfFloatType && (t.anisotropy > 1 || t.__currentAnisotropy) && (Le.texParameterf(e, i.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(t.anisotropy, Oe.getMaxAnisotropy())),
                t.__currentAnisotropy = t.anisotropy)
            }
            function ee(e, t) {
                if (e.width > t || e.height > t) {
                    var n = t / Math.max(e.width, e.height)
                      , i = document.createElement("canvas");
                    i.width = Math.floor(e.width * n),
                    i.height = Math.floor(e.height * n);
                    var o = i.getContext("2d");
                    return o.drawImage(e, 0, 0, e.width, e.height, 0, 0, i.width, i.height),
                    r.warn("THREE.WebGLRenderer: image is too big (" + e.width + "x" + e.height + "). Resized to " + i.width + "x" + i.height, e),
                    i
                }
                return e
            }
            function te(e, t) {
                if (6 === e.image.length)
                    if (e.needsUpdate) {
                        e.image.__webglTextureCube || (e.addEventListener("dispose", St),
                        e.image.__webglTextureCube = Le.createTexture(),
                        Oe.info.memory.textures++),
                        Le.activeTexture(Le.TEXTURE0 + t),
                        Le.bindTexture(Le.TEXTURE_CUBE_MAP, e.image.__webglTextureCube),
                        Le.pixelStorei(Le.UNPACK_FLIP_Y_WEBGL, e.flipY);
                        for (var n = e instanceof r.CompressedTexture, i = e.image[0]instanceof r.DataTexture, o = [], a = 0; 6 > a; a++)
                            !Oe.autoScaleCubemaps || n || i ? o[a] = i ? e.image[a].image : e.image[a] : o[a] = ee(e.image[a], lt);
                        var s = o[0]
                          , l = r.Math.isPowerOfTwo(s.width) && r.Math.isPowerOfTwo(s.height)
                          , c = se(e.format)
                          , u = se(e.type);
                        $(Le.TEXTURE_CUBE_MAP, e, l);
                        for (var a = 0; 6 > a; a++)
                            if (n)
                                for (var h, d = o[a].mipmaps, f = 0, p = d.length; p > f; f++)
                                    h = d[f],
                                    e.format !== r.RGBAFormat && e.format !== r.RGBFormat ? mt().indexOf(c) > -1 ? Le.compressedTexImage2D(Le.TEXTURE_CUBE_MAP_POSITIVE_X + a, f, c, h.width, h.height, 0, h.data) : r.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : Le.texImage2D(Le.TEXTURE_CUBE_MAP_POSITIVE_X + a, f, c, h.width, h.height, 0, c, u, h.data);
                            else
                                i ? Le.texImage2D(Le.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, c, o[a].width, o[a].height, 0, c, u, o[a].data) : Le.texImage2D(Le.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, c, c, u, o[a]);
                        e.generateMipmaps && l && Le.generateMipmap(Le.TEXTURE_CUBE_MAP),
                        e.needsUpdate = !1,
                        e.onUpdate && e.onUpdate()
                    } else
                        Le.activeTexture(Le.TEXTURE0 + t),
                        Le.bindTexture(Le.TEXTURE_CUBE_MAP, e.image.__webglTextureCube)
            }
            function ne(e, t) {
                Le.activeTexture(Le.TEXTURE0 + t),
                Le.bindTexture(Le.TEXTURE_CUBE_MAP, e.__webglTexture)
            }
            function ie(e, t, n) {
                Le.bindFramebuffer(Le.FRAMEBUFFER, e),
                Le.framebufferTexture2D(Le.FRAMEBUFFER, Le.COLOR_ATTACHMENT0, n, t.__webglTexture, 0)
            }
            function re(e, t) {
                Le.bindRenderbuffer(Le.RENDERBUFFER, e),
                t.depthBuffer && !t.stencilBuffer ? (Le.renderbufferStorage(Le.RENDERBUFFER, Le.DEPTH_COMPONENT16, t.width, t.height),
                Le.framebufferRenderbuffer(Le.FRAMEBUFFER, Le.DEPTH_ATTACHMENT, Le.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (Le.renderbufferStorage(Le.RENDERBUFFER, Le.DEPTH_STENCIL, t.width, t.height),
                Le.framebufferRenderbuffer(Le.FRAMEBUFFER, Le.DEPTH_STENCIL_ATTACHMENT, Le.RENDERBUFFER, e)) : Le.renderbufferStorage(Le.RENDERBUFFER, Le.RGBA4, t.width, t.height)
            }
            function oe(e) {
                e instanceof r.WebGLRenderTargetCube ? (Le.bindTexture(Le.TEXTURE_CUBE_MAP, e.__webglTexture),
                Le.generateMipmap(Le.TEXTURE_CUBE_MAP),
                Le.bindTexture(Le.TEXTURE_CUBE_MAP, null)) : (Le.bindTexture(Le.TEXTURE_2D, e.__webglTexture),
                Le.generateMipmap(Le.TEXTURE_2D),
                Le.bindTexture(Le.TEXTURE_2D, null))
            }
            function ae(e) {
                return e === r.NearestFilter || e === r.NearestMipMapNearestFilter || e === r.NearestMipMapLinearFilter ? Le.NEAREST : Le.LINEAR
            }
            function se(e) {
                var t;
                if (e === r.RepeatWrapping)
                    return Le.REPEAT;
                if (e === r.ClampToEdgeWrapping)
                    return Le.CLAMP_TO_EDGE;
                if (e === r.MirroredRepeatWrapping)
                    return Le.MIRRORED_REPEAT;
                if (e === r.NearestFilter)
                    return Le.NEAREST;
                if (e === r.NearestMipMapNearestFilter)
                    return Le.NEAREST_MIPMAP_NEAREST;
                if (e === r.NearestMipMapLinearFilter)
                    return Le.NEAREST_MIPMAP_LINEAR;
                if (e === r.LinearFilter)
                    return Le.LINEAR;
                if (e === r.LinearMipMapNearestFilter)
                    return Le.LINEAR_MIPMAP_NEAREST;
                if (e === r.LinearMipMapLinearFilter)
                    return Le.LINEAR_MIPMAP_LINEAR;
                if (e === r.UnsignedByteType)
                    return Le.UNSIGNED_BYTE;
                if (e === r.UnsignedShort4444Type)
                    return Le.UNSIGNED_SHORT_4_4_4_4;
                if (e === r.UnsignedShort5551Type)
                    return Le.UNSIGNED_SHORT_5_5_5_1;
                if (e === r.UnsignedShort565Type)
                    return Le.UNSIGNED_SHORT_5_6_5;
                if (e === r.ByteType)
                    return Le.BYTE;
                if (e === r.ShortType)
                    return Le.SHORT;
                if (e === r.UnsignedShortType)
                    return Le.UNSIGNED_SHORT;
                if (e === r.IntType)
                    return Le.INT;
                if (e === r.UnsignedIntType)
                    return Le.UNSIGNED_INT;
                if (e === r.FloatType)
                    return Le.FLOAT;
                if (t = tt.get("OES_texture_half_float"),
                null !== t && e === r.HalfFloatType)
                    return t.HALF_FLOAT_OES;
                if (e === r.AlphaFormat)
                    return Le.ALPHA;
                if (e === r.RGBFormat)
                    return Le.RGB;
                if (e === r.RGBAFormat)
                    return Le.RGBA;
                if (e === r.LuminanceFormat)
                    return Le.LUMINANCE;
                if (e === r.LuminanceAlphaFormat)
                    return Le.LUMINANCE_ALPHA;
                if (e === r.AddEquation)
                    return Le.FUNC_ADD;
                if (e === r.SubtractEquation)
                    return Le.FUNC_SUBTRACT;
                if (e === r.ReverseSubtractEquation)
                    return Le.FUNC_REVERSE_SUBTRACT;
                if (e === r.ZeroFactor)
                    return Le.ZERO;
                if (e === r.OneFactor)
                    return Le.ONE;
                if (e === r.SrcColorFactor)
                    return Le.SRC_COLOR;
                if (e === r.OneMinusSrcColorFactor)
                    return Le.ONE_MINUS_SRC_COLOR;
                if (e === r.SrcAlphaFactor)
                    return Le.SRC_ALPHA;
                if (e === r.OneMinusSrcAlphaFactor)
                    return Le.ONE_MINUS_SRC_ALPHA;
                if (e === r.DstAlphaFactor)
                    return Le.DST_ALPHA;
                if (e === r.OneMinusDstAlphaFactor)
                    return Le.ONE_MINUS_DST_ALPHA;
                if (e === r.DstColorFactor)
                    return Le.DST_COLOR;
                if (e === r.OneMinusDstColorFactor)
                    return Le.ONE_MINUS_DST_COLOR;
                if (e === r.SrcAlphaSaturateFactor)
                    return Le.SRC_ALPHA_SATURATE;
                if (t = tt.get("WEBGL_compressed_texture_s3tc"),
                null !== t) {
                    if (e === r.RGB_S3TC_DXT1_Format)
                        return t.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (e === r.RGBA_S3TC_DXT1_Format)
                        return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (e === r.RGBA_S3TC_DXT3_Format)
                        return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (e === r.RGBA_S3TC_DXT5_Format)
                        return t.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (t = tt.get("WEBGL_compressed_texture_pvrtc"),
                null !== t) {
                    if (e === r.RGB_PVRTC_4BPPV1_Format)
                        return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (e === r.RGB_PVRTC_2BPPV1_Format)
                        return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (e === r.RGBA_PVRTC_4BPPV1_Format)
                        return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (e === r.RGBA_PVRTC_2BPPV1_Format)
                        return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                if (t = tt.get("EXT_blend_minmax"),
                null !== t) {
                    if (e === r.MinEquation)
                        return t.MIN_EXT;
                    if (e === r.MaxEquation)
                        return t.MAX_EXT
                }
                return 0
            }
            function le(e) {
                if (ut && e && e.skeleton && e.skeleton.useVertexTexture)
                    return 1024;
                var t = Le.getParameter(Le.MAX_VERTEX_UNIFORM_VECTORS)
                  , n = Math.floor((t - 20) / 4)
                  , i = n;
                return void 0 !== e && e instanceof r.SkinnedMesh && (i = Math.min(e.skeleton.bones.length, i),
                i < e.skeleton.bones.length && r.warn("WebGLRenderer: too many bones - " + e.skeleton.bones.length + ", this GPU supports just " + i + " (try OpenGL instead of ANGLE)")),
                i
            }
            function ce(e) {
                for (var t = 0, n = 0, i = 0, o = 0, a = 0, s = e.length; s > a; a++) {
                    var l = e[a];
                    l.onlyShadow || l.visible === !1 || (l instanceof r.DirectionalLight && t++,
                    l instanceof r.PointLight && n++,
                    l instanceof r.SpotLight && i++,
                    l instanceof r.HemisphereLight && o++)
                }
                return {
                    directional: t,
                    point: n,
                    spot: i,
                    hemi: o
                }
            }
            function ue(e) {
                for (var t = 0, n = 0, i = e.length; i > n; n++) {
                    var o = e[n];
                    o.castShadow && (o instanceof r.SpotLight && t++,
                    o instanceof r.DirectionalLight && !o.shadowCascade && t++)
                }
                return t
            }
            console.log("THREE.WebGLRenderer", r.REVISION),
            e = e || {};
            var he = void 0 !== e.canvas ? e.canvas : document.createElement("canvas")
              , de = void 0 !== e.context ? e.context : null
              , fe = 1
              , pe = void 0 !== e.precision ? e.precision : "highp"
              , me = void 0 !== e.alpha ? e.alpha : !1
              , ve = void 0 !== e.depth ? e.depth : !0
              , ge = void 0 !== e.stencil ? e.stencil : !0
              , ye = void 0 !== e.antialias ? e.antialias : !1
              , be = void 0 !== e.premultipliedAlpha ? e.premultipliedAlpha : !0
              , xe = void 0 !== e.preserveDrawingBuffer ? e.preserveDrawingBuffer : !1
              , we = void 0 !== e.logarithmicDepthBuffer ? e.logarithmicDepthBuffer : !1
              , _e = new r.Color(0)
              , Se = 0
              , Me = []
              , Ce = {}
              , Te = []
              , Ee = []
              , ke = []
              , Ae = []
              , Pe = [];
            this.domElement = he,
            this.context = null,
            this.autoClear = !0,
            this.autoClearColor = !0,
            this.autoClearDepth = !0,
            this.autoClearStencil = !0,
            this.sortObjects = !0,
            this.gammaFactor = 2,
            this.gammaInput = !1,
            this.gammaOutput = !1,
            this.shadowMapEnabled = !1,
            this.shadowMapType = r.PCFShadowMap,
            this.shadowMapCullFace = r.CullFaceFront,
            this.shadowMapDebug = !1,
            this.shadowMapCascade = !1,
            this.maxMorphTargets = 8,
            this.maxMorphNormals = 4,
            this.autoScaleCubemaps = !0,
            this.info = {
                memory: {
                    programs: 0,
                    geometries: 0,
                    textures: 0
                },
                render: {
                    calls: 0,
                    vertices: 0,
                    faces: 0,
                    points: 0
                }
            };
            var Le, Oe = this, Re = [], Fe = null, Be = null, De = -1, Ie = "", Ne = null, je = 0, Ve = 0, ze = 0, Ue = he.width, He = he.height, Ge = 0, We = 0, qe = new r.Frustum, Xe = new r.Matrix4, Ye = new r.Vector3, Je = new r.Vector3, Ze = !0, Qe = {
                ambient: [0, 0, 0],
                directional: {
                    length: 0,
                    colors: [],
                    positions: []
                },
                point: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    decays: []
                },
                spot: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    directions: [],
                    anglesCos: [],
                    exponents: [],
                    decays: []
                },
                hemi: {
                    length: 0,
                    skyColors: [],
                    groundColors: [],
                    positions: []
                }
            };
            try {
                var Ke = {
                    alpha: me,
                    depth: ve,
                    stencil: ge,
                    antialias: ye,
                    premultipliedAlpha: be,
                    preserveDrawingBuffer: xe
                };
                if (Le = de || he.getContext("webgl", Ke) || he.getContext("experimental-webgl", Ke),
                null === Le)
                    throw null !== he.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
                he.addEventListener("webglcontextlost", function(e) {
                    e.preventDefault(),
                    rt(),
                    it(),
                    Ce = {}
                }, !1)
            } catch ($e) {
                r.error("THREE.WebGLRenderer: " + $e)
            }
            var et = new r.WebGLState(Le,se);
            void 0 === Le.getShaderPrecisionFormat && (Le.getShaderPrecisionFormat = function() {
                return {
                    rangeMin: 1,
                    rangeMax: 1,
                    precision: 1
                }
            }
            );
            var tt = new r.WebGLExtensions(Le);
            tt.get("OES_texture_float"),
            tt.get("OES_texture_float_linear"),
            tt.get("OES_texture_half_float"),
            tt.get("OES_texture_half_float_linear"),
            tt.get("OES_standard_derivatives"),
            we && tt.get("EXT_frag_depth");
            var nt = function(e, t, n, i) {
                be === !0 && (e *= i,
                t *= i,
                n *= i),
                Le.clearColor(e, t, n, i)
            }
              , it = function() {
                Le.clearColor(0, 0, 0, 1),
                Le.clearDepth(1),
                Le.clearStencil(0),
                Le.enable(Le.DEPTH_TEST),
                Le.depthFunc(Le.LEQUAL),
                Le.frontFace(Le.CCW),
                Le.cullFace(Le.BACK),
                Le.enable(Le.CULL_FACE),
                Le.enable(Le.BLEND),
                Le.blendEquation(Le.FUNC_ADD),
                Le.blendFunc(Le.SRC_ALPHA, Le.ONE_MINUS_SRC_ALPHA),
                Le.viewport(Ve, ze, Ue, He),
                nt(_e.r, _e.g, _e.b, Se)
            }
              , rt = function() {
                Fe = null,
                Ne = null,
                Ie = "",
                De = -1,
                Ze = !0,
                et.reset()
            };
            it(),
            this.context = Le,
            this.state = et;
            var ot = Le.getParameter(Le.MAX_TEXTURE_IMAGE_UNITS)
              , at = Le.getParameter(Le.MAX_VERTEX_TEXTURE_IMAGE_UNITS)
              , st = Le.getParameter(Le.MAX_TEXTURE_SIZE)
              , lt = Le.getParameter(Le.MAX_CUBE_MAP_TEXTURE_SIZE)
              , ct = at > 0
              , ut = ct && tt.get("OES_texture_float")
              , ht = Le.getShaderPrecisionFormat(Le.VERTEX_SHADER, Le.HIGH_FLOAT)
              , dt = Le.getShaderPrecisionFormat(Le.VERTEX_SHADER, Le.MEDIUM_FLOAT)
              , ft = Le.getShaderPrecisionFormat(Le.FRAGMENT_SHADER, Le.HIGH_FLOAT)
              , pt = Le.getShaderPrecisionFormat(Le.FRAGMENT_SHADER, Le.MEDIUM_FLOAT)
              , mt = function() {
                var e;
                return function() {
                    if (void 0 !== e)
                        return e;
                    if (e = [],
                    tt.get("WEBGL_compressed_texture_pvrtc") || tt.get("WEBGL_compressed_texture_s3tc"))
                        for (var t = Le.getParameter(Le.COMPRESSED_TEXTURE_FORMATS), n = 0; n < t.length; n++)
                            e.push(t[n]);
                    return e
                }
            }()
              , vt = ht.precision > 0 && ft.precision > 0
              , gt = dt.precision > 0 && pt.precision > 0;
            "highp" !== pe || vt || (gt ? (pe = "mediump",
            r.warn("THREE.WebGLRenderer: highp not supported, using mediump.")) : (pe = "lowp",
            r.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),
            "mediump" !== pe || gt || (pe = "lowp",
            r.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));
            var yt = new r.ShadowMapPlugin(this,Me,Ce,Te)
              , bt = new r.SpritePlugin(this,Ae)
              , xt = new r.LensFlarePlugin(this,Pe);
            this.getContext = function() {
                return Le
            }
            ,
            this.forceContextLoss = function() {
                tt.get("WEBGL_lose_context").loseContext()
            }
            ,
            this.supportsVertexTextures = function() {
                return ct
            }
            ,
            this.supportsFloatTextures = function() {
                return tt.get("OES_texture_float")
            }
            ,
            this.supportsHalfFloatTextures = function() {
                return tt.get("OES_texture_half_float")
            }
            ,
            this.supportsStandardDerivatives = function() {
                return tt.get("OES_standard_derivatives")
            }
            ,
            this.supportsCompressedTextureS3TC = function() {
                return tt.get("WEBGL_compressed_texture_s3tc")
            }
            ,
            this.supportsCompressedTexturePVRTC = function() {
                return tt.get("WEBGL_compressed_texture_pvrtc")
            }
            ,
            this.supportsBlendMinMax = function() {
                return tt.get("EXT_blend_minmax")
            }
            ,
            this.getMaxAnisotropy = function() {
                var e;
                return function() {
                    if (void 0 !== e)
                        return e;
                    var t = tt.get("EXT_texture_filter_anisotropic");
                    return e = null !== t ? Le.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
                }
            }(),
            this.getPrecision = function() {
                return pe
            }
            ,
            this.getPixelRatio = function() {
                return fe
            }
            ,
            this.setPixelRatio = function(e) {
                fe = e
            }
            ,
            this.setSize = function(e, t, n) {
                he.width = e * fe,
                he.height = t * fe,
                n !== !1 && (he.style.width = e + "px",
                he.style.height = t + "px"),
                this.setViewport(0, 0, e, t)
            }
            ,
            this.setViewport = function(e, t, n, i) {
                Ve = e * fe,
                ze = t * fe,
                Ue = n * fe,
                He = i * fe,
                Le.viewport(Ve, ze, Ue, He)
            }
            ,
            this.setScissor = function(e, t, n, i) {
                Le.scissor(e * fe, t * fe, n * fe, i * fe)
            }
            ,
            this.enableScissorTest = function(e) {
                e ? Le.enable(Le.SCISSOR_TEST) : Le.disable(Le.SCISSOR_TEST)
            }
            ,
            this.getClearColor = function() {
                return _e
            }
            ,
            this.setClearColor = function(e, t) {
                _e.set(e),
                Se = void 0 !== t ? t : 1,
                nt(_e.r, _e.g, _e.b, Se)
            }
            ,
            this.getClearAlpha = function() {
                return Se
            }
            ,
            this.setClearAlpha = function(e) {
                Se = e,
                nt(_e.r, _e.g, _e.b, Se)
            }
            ,
            this.clear = function(e, t, n) {
                var i = 0;
                (void 0 === e || e) && (i |= Le.COLOR_BUFFER_BIT),
                (void 0 === t || t) && (i |= Le.DEPTH_BUFFER_BIT),
                (void 0 === n || n) && (i |= Le.STENCIL_BUFFER_BIT),
                Le.clear(i)
            }
            ,
            this.clearColor = function() {
                Le.clear(Le.COLOR_BUFFER_BIT)
            }
            ,
            this.clearDepth = function() {
                Le.clear(Le.DEPTH_BUFFER_BIT)
            }
            ,
            this.clearStencil = function() {
                Le.clear(Le.STENCIL_BUFFER_BIT)
            }
            ,
            this.clearTarget = function(e, t, n, i) {
                this.setRenderTarget(e),
                this.clear(t, n, i)
            }
            ,
            this.resetGLState = rt;
            var wt = function(e) {
                var t = e.target;
                t.traverse(function(e) {
                    e.removeEventListener("remove", wt),
                    O(e)
                })
            }
              , _t = function(e) {
                var t = e.target;
                t.removeEventListener("dispose", _t),
                Et(t)
            }
              , St = function(e) {
                var t = e.target;
                t.removeEventListener("dispose", St),
                kt(t),
                Oe.info.memory.textures--
            }
              , Mt = function(e) {
                var t = e.target;
                t.removeEventListener("dispose", Mt),
                At(t),
                Oe.info.memory.textures--
            }
              , Ct = function(e) {
                var t = e.target;
                t.removeEventListener("dispose", Ct),
                Pt(t)
            }
              , Tt = function(e) {
                for (var t = ["__webglVertexBuffer", "__webglNormalBuffer", "__webglTangentBuffer", "__webglColorBuffer", "__webglUVBuffer", "__webglUV2Buffer", "__webglSkinIndicesBuffer", "__webglSkinWeightsBuffer", "__webglFaceBuffer", "__webglLineBuffer", "__webglLineDistanceBuffer"], n = 0, i = t.length; i > n; n++) {
                    var r = t[n];
                    void 0 !== e[r] && (Le.deleteBuffer(e[r]),
                    delete e[r])
                }
                if (void 0 !== e.__webglCustomAttributesList) {
                    for (var r in e.__webglCustomAttributesList)
                        Le.deleteBuffer(e.__webglCustomAttributesList[r].buffer);
                    delete e.__webglCustomAttributesList
                }
                Oe.info.memory.geometries--
            }
              , Et = function(e) {
                if (delete e.__webglInit,
                e instanceof r.BufferGeometry) {
                    for (var t in e.attributes) {
                        var n = e.attributes[t];
                        void 0 !== n.buffer && (Le.deleteBuffer(n.buffer),
                        delete n.buffer)
                    }
                    Oe.info.memory.geometries--
                } else {
                    var i = Lt[e.id];
                    if (void 0 !== i) {
                        for (var o = 0, a = i.length; a > o; o++) {
                            var s = i[o];
                            if (void 0 !== s.numMorphTargets) {
                                for (var l = 0, c = s.numMorphTargets; c > l; l++)
                                    Le.deleteBuffer(s.__webglMorphTargetsBuffers[l]);
                                delete s.__webglMorphTargetsBuffers
                            }
                            if (void 0 !== s.numMorphNormals) {
                                for (var l = 0, c = s.numMorphNormals; c > l; l++)
                                    Le.deleteBuffer(s.__webglMorphNormalsBuffers[l]);
                                delete s.__webglMorphNormalsBuffers
                            }
                            Tt(s)
                        }
                        delete Lt[e.id]
                    } else
                        Tt(e)
                }
                Ie = ""
            }
              , kt = function(e) {
                if (e.image && e.image.__webglTextureCube)
                    Le.deleteTexture(e.image.__webglTextureCube),
                    delete e.image.__webglTextureCube;
                else {
                    if (void 0 === e.__webglInit)
                        return;
                    Le.deleteTexture(e.__webglTexture),
                    delete e.__webglTexture,
                    delete e.__webglInit
                }
            }
              , At = function(e) {
                if (e && void 0 !== e.__webglTexture) {
                    if (Le.deleteTexture(e.__webglTexture),
                    delete e.__webglTexture,
                    e instanceof r.WebGLRenderTargetCube)
                        for (var t = 0; 6 > t; t++)
                            Le.deleteFramebuffer(e.__webglFramebuffer[t]),
                            Le.deleteRenderbuffer(e.__webglRenderbuffer[t]);
                    else
                        Le.deleteFramebuffer(e.__webglFramebuffer),
                        Le.deleteRenderbuffer(e.__webglRenderbuffer);
                    delete e.__webglFramebuffer,
                    delete e.__webglRenderbuffer
                }
            }
              , Pt = function(e) {
                var t = e.program.program;
                if (void 0 !== t) {
                    e.program = void 0;
                    var n, i, r, o = !1;
                    for (n = 0,
                    i = Re.length; i > n; n++)
                        if (r = Re[n],
                        r.program === t) {
                            r.usedTimes--,
                            0 === r.usedTimes && (o = !0);
                            break
                        }
                    if (o === !0) {
                        var a = [];
                        for (n = 0,
                        i = Re.length; i > n; n++)
                            r = Re[n],
                            r.program !== t && a.push(r);
                        Re = a,
                        Le.deleteProgram(t),
                        Oe.info.memory.programs--
                    }
                }
            };
            this.renderBufferImmediate = function(e, t, n) {
                if (et.initAttributes(),
                e.hasPositions && !e.__webglVertexBuffer && (e.__webglVertexBuffer = Le.createBuffer()),
                e.hasNormals && !e.__webglNormalBuffer && (e.__webglNormalBuffer = Le.createBuffer()),
                e.hasUvs && !e.__webglUvBuffer && (e.__webglUvBuffer = Le.createBuffer()),
                e.hasColors && !e.__webglColorBuffer && (e.__webglColorBuffer = Le.createBuffer()),
                e.hasPositions && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglVertexBuffer),
                Le.bufferData(Le.ARRAY_BUFFER, e.positionArray, Le.DYNAMIC_DRAW),
                et.enableAttribute(t.attributes.position),
                Le.vertexAttribPointer(t.attributes.position, 3, Le.FLOAT, !1, 0, 0)),
                e.hasNormals) {
                    if (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglNormalBuffer),
                    n instanceof r.MeshPhongMaterial == !1 && n.shading === r.FlatShading) {
                        var i, o, a, s, l, c, u, h, d, f, p, m, v, g, y = 3 * e.count;
                        for (g = 0; y > g; g += 9)
                            v = e.normalArray,
                            s = v[g],
                            u = v[g + 1],
                            f = v[g + 2],
                            l = v[g + 3],
                            h = v[g + 4],
                            p = v[g + 5],
                            c = v[g + 6],
                            d = v[g + 7],
                            m = v[g + 8],
                            i = (s + l + c) / 3,
                            o = (u + h + d) / 3,
                            a = (f + p + m) / 3,
                            v[g] = i,
                            v[g + 1] = o,
                            v[g + 2] = a,
                            v[g + 3] = i,
                            v[g + 4] = o,
                            v[g + 5] = a,
                            v[g + 6] = i,
                            v[g + 7] = o,
                            v[g + 8] = a
                    }
                    Le.bufferData(Le.ARRAY_BUFFER, e.normalArray, Le.DYNAMIC_DRAW),
                    et.enableAttribute(t.attributes.normal),
                    Le.vertexAttribPointer(t.attributes.normal, 3, Le.FLOAT, !1, 0, 0)
                }
                e.hasUvs && n.map && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglUvBuffer),
                Le.bufferData(Le.ARRAY_BUFFER, e.uvArray, Le.DYNAMIC_DRAW),
                et.enableAttribute(t.attributes.uv),
                Le.vertexAttribPointer(t.attributes.uv, 2, Le.FLOAT, !1, 0, 0)),
                e.hasColors && n.vertexColors !== r.NoColors && (Le.bindBuffer(Le.ARRAY_BUFFER, e.__webglColorBuffer),
                Le.bufferData(Le.ARRAY_BUFFER, e.colorArray, Le.DYNAMIC_DRAW),
                et.enableAttribute(t.attributes.color),
                Le.vertexAttribPointer(t.attributes.color, 3, Le.FLOAT, !1, 0, 0)),
                et.disableUnusedAttributes(),
                Le.drawArrays(Le.TRIANGLES, 0, e.count),
                e.count = 0
            }
            ,
            this.renderBufferDirect = function(e, t, n, i, o, a) {
                if (i.visible !== !1) {
                    A(a);
                    var s = D(e, t, n, i, a)
                      , l = !1
                      , c = i.wireframe ? 1 : 0
                      , u = "direct_" + o.id + "_" + s.id + "_" + c;
                    if (u !== Ie && (Ie = u,
                    l = !0),
                    l && et.initAttributes(),
                    a instanceof r.Mesh) {
                        var h = i.wireframe === !0 ? Le.LINES : Le.TRIANGLES
                          , d = o.attributes.index;
                        if (d) {
                            var f, m;
                            d.array instanceof Uint32Array && tt.get("OES_element_index_uint") ? (f = Le.UNSIGNED_INT,
                            m = 4) : (f = Le.UNSIGNED_SHORT,
                            m = 2);
                            var v = o.offsets;
                            if (0 === v.length)
                                l && (p(i, s, o, 0),
                                Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                Le.drawElements(h, d.array.length, f, 0),
                                Oe.info.render.calls++,
                                Oe.info.render.vertices += d.array.length,
                                Oe.info.render.faces += d.array.length / 3;
                            else {
                                l = !0;
                                for (var g = 0, y = v.length; y > g; g++) {
                                    var b = v[g].index;
                                    l && (p(i, s, o, b),
                                    Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                    Le.drawElements(h, v[g].count, f, v[g].start * m),
                                    Oe.info.render.calls++,
                                    Oe.info.render.vertices += v[g].count,
                                    Oe.info.render.faces += v[g].count / 3
                                }
                            }
                        } else {
                            l && p(i, s, o, 0);
                            var x = o.attributes.position;
                            Le.drawArrays(h, 0, x.array.length / x.itemSize),
                            Oe.info.render.calls++,
                            Oe.info.render.vertices += x.array.length / x.itemSize,
                            Oe.info.render.faces += x.array.length / (3 * x.itemSize)
                        }
                    } else if (a instanceof r.PointCloud) {
                        var h = Le.POINTS
                          , d = o.attributes.index;
                        if (d) {
                            var f, m;
                            d.array instanceof Uint32Array && tt.get("OES_element_index_uint") ? (f = Le.UNSIGNED_INT,
                            m = 4) : (f = Le.UNSIGNED_SHORT,
                            m = 2);
                            var v = o.offsets;
                            if (0 === v.length)
                                l && (p(i, s, o, 0),
                                Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                Le.drawElements(h, d.array.length, f, 0),
                                Oe.info.render.calls++,
                                Oe.info.render.points += d.array.length;
                            else {
                                v.length > 1 && (l = !0);
                                for (var g = 0, y = v.length; y > g; g++) {
                                    var b = v[g].index;
                                    l && (p(i, s, o, b),
                                    Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                    Le.drawElements(h, v[g].count, f, v[g].start * m),
                                    Oe.info.render.calls++,
                                    Oe.info.render.points += v[g].count
                                }
                            }
                        } else {
                            l && p(i, s, o, 0);
                            var x = o.attributes.position
                              , v = o.offsets;
                            if (0 === v.length)
                                Le.drawArrays(h, 0, x.array.length / 3),
                                Oe.info.render.calls++,
                                Oe.info.render.points += x.array.length / 3;
                            else
                                for (var g = 0, y = v.length; y > g; g++)
                                    Le.drawArrays(h, v[g].index, v[g].count),
                                    Oe.info.render.calls++,
                                    Oe.info.render.points += v[g].count
                        }
                    } else if (a instanceof r.Line) {
                        var h = a.mode === r.LineStrip ? Le.LINE_STRIP : Le.LINES;
                        et.setLineWidth(i.linewidth * fe);
                        var d = o.attributes.index;
                        if (d) {
                            var f, m;
                            d.array instanceof Uint32Array ? (f = Le.UNSIGNED_INT,
                            m = 4) : (f = Le.UNSIGNED_SHORT,
                            m = 2);
                            var v = o.offsets;
                            if (0 === v.length)
                                l && (p(i, s, o, 0),
                                Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                Le.drawElements(h, d.array.length, f, 0),
                                Oe.info.render.calls++,
                                Oe.info.render.vertices += d.array.length;
                            else {
                                v.length > 1 && (l = !0);
                                for (var g = 0, y = v.length; y > g; g++) {
                                    var b = v[g].index;
                                    l && (p(i, s, o, b),
                                    Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, d.buffer)),
                                    Le.drawElements(h, v[g].count, f, v[g].start * m),
                                    Oe.info.render.calls++,
                                    Oe.info.render.vertices += v[g].count
                                }
                            }
                        } else {
                            l && p(i, s, o, 0);
                            var x = o.attributes.position
                              , v = o.offsets;
                            if (0 === v.length)
                                Le.drawArrays(h, 0, x.array.length / 3),
                                Oe.info.render.calls++,
                                Oe.info.render.vertices += x.array.length / 3;
                            else
                                for (var g = 0, y = v.length; y > g; g++)
                                    Le.drawArrays(h, v[g].index, v[g].count),
                                    Oe.info.render.calls++,
                                    Oe.info.render.vertices += v[g].count
                        }
                    }
                }
            }
            ,
            this.renderBuffer = function(e, t, n, i, o, a) {
                if (i.visible !== !1) {
                    A(a);
                    var s = D(e, t, n, i, a)
                      , l = s.attributes
                      , c = !1
                      , u = i.wireframe ? 1 : 0
                      , h = o.id + "_" + s.id + "_" + u;
                    if (h !== Ie && (Ie = h,
                    c = !0),
                    c && et.initAttributes(),
                    !i.morphTargets && l.position >= 0 ? c && (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglVertexBuffer),
                    et.enableAttribute(l.position),
                    Le.vertexAttribPointer(l.position, 3, Le.FLOAT, !1, 0, 0)) : a.morphTargetBase && m(i, o, a),
                    c) {
                        if (o.__webglCustomAttributesList)
                            for (var d = 0, f = o.__webglCustomAttributesList.length; f > d; d++) {
                                var p = o.__webglCustomAttributesList[d];
                                l[p.buffer.belongsToAttribute] >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, p.buffer),
                                et.enableAttribute(l[p.buffer.belongsToAttribute]),
                                Le.vertexAttribPointer(l[p.buffer.belongsToAttribute], p.size, Le.FLOAT, !1, 0, 0))
                            }
                        l.color >= 0 && (a.geometry.colors.length > 0 || a.geometry.faces.length > 0 ? (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglColorBuffer),
                        et.enableAttribute(l.color),
                        Le.vertexAttribPointer(l.color, 3, Le.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && Le.vertexAttrib3fv(l.color, i.defaultAttributeValues.color)),
                        l.normal >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglNormalBuffer),
                        et.enableAttribute(l.normal),
                        Le.vertexAttribPointer(l.normal, 3, Le.FLOAT, !1, 0, 0)),
                        l.tangent >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglTangentBuffer),
                        et.enableAttribute(l.tangent),
                        Le.vertexAttribPointer(l.tangent, 4, Le.FLOAT, !1, 0, 0)),
                        l.uv >= 0 && (a.geometry.faceVertexUvs[0] ? (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglUVBuffer),
                        et.enableAttribute(l.uv),
                        Le.vertexAttribPointer(l.uv, 2, Le.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && Le.vertexAttrib2fv(l.uv, i.defaultAttributeValues.uv)),
                        l.uv2 >= 0 && (a.geometry.faceVertexUvs[1] ? (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglUV2Buffer),
                        et.enableAttribute(l.uv2),
                        Le.vertexAttribPointer(l.uv2, 2, Le.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && Le.vertexAttrib2fv(l.uv2, i.defaultAttributeValues.uv2)),
                        i.skinning && l.skinIndex >= 0 && l.skinWeight >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglSkinIndicesBuffer),
                        et.enableAttribute(l.skinIndex),
                        Le.vertexAttribPointer(l.skinIndex, 4, Le.FLOAT, !1, 0, 0),
                        Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglSkinWeightsBuffer),
                        et.enableAttribute(l.skinWeight),
                        Le.vertexAttribPointer(l.skinWeight, 4, Le.FLOAT, !1, 0, 0)),
                        l.lineDistance >= 0 && (Le.bindBuffer(Le.ARRAY_BUFFER, o.__webglLineDistanceBuffer),
                        et.enableAttribute(l.lineDistance),
                        Le.vertexAttribPointer(l.lineDistance, 1, Le.FLOAT, !1, 0, 0))
                    }
                    if (et.disableUnusedAttributes(),
                    a instanceof r.Mesh) {
                        var v = o.__typeArray === Uint32Array ? Le.UNSIGNED_INT : Le.UNSIGNED_SHORT;
                        i.wireframe ? (et.setLineWidth(i.wireframeLinewidth * fe),
                        c && Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, o.__webglLineBuffer),
                        Le.drawElements(Le.LINES, o.__webglLineCount, v, 0)) : (c && Le.bindBuffer(Le.ELEMENT_ARRAY_BUFFER, o.__webglFaceBuffer),
                        Le.drawElements(Le.TRIANGLES, o.__webglFaceCount, v, 0)),
                        Oe.info.render.calls++,
                        Oe.info.render.vertices += o.__webglFaceCount,
                        Oe.info.render.faces += o.__webglFaceCount / 3
                    } else if (a instanceof r.Line) {
                        var g = a.mode === r.LineStrip ? Le.LINE_STRIP : Le.LINES;
                        et.setLineWidth(i.linewidth * fe),
                        Le.drawArrays(g, 0, o.__webglLineCount),
                        Oe.info.render.calls++
                    } else
                        a instanceof r.PointCloud && (Le.drawArrays(Le.POINTS, 0, o.__webglParticleCount),
                        Oe.info.render.calls++,
                        Oe.info.render.points += o.__webglParticleCount)
                }
            }
            ,
            this.render = function(e, t, n, i) {
                if (t instanceof r.Camera == !1)
                    return void r.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
                var o = e.fog;
                Ie = "",
                De = -1,
                Ne = null,
                Ze = !0,
                e.autoUpdate === !0 && e.updateMatrixWorld(),
                void 0 === t.parent && t.updateMatrixWorld(),
                e.traverse(function(e) {
                    e instanceof r.SkinnedMesh && e.skeleton.update()
                }),
                t.matrixWorldInverse.getInverse(t.matrixWorld),
                Xe.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
                qe.setFromMatrix(Xe),
                Me.length = 0,
                Ee.length = 0,
                ke.length = 0,
                Ae.length = 0,
                Pe.length = 0,
                b(e),
                Oe.sortObjects === !0 && (Ee.sort(v),
                ke.sort(g)),
                yt.render(e, t),
                Oe.info.render.calls = 0,
                Oe.info.render.vertices = 0,
                Oe.info.render.faces = 0,
                Oe.info.render.points = 0,
                this.setRenderTarget(n),
                (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);
                for (var a = 0, s = Te.length; s > a; a++) {
                    var l = Te[a]
                      , c = l.object;
                    c.visible && (Z(c, t),
                    _(l))
                }
                if (e.overrideMaterial) {
                    var u = e.overrideMaterial;
                    B(u),
                    x(Ee, t, Me, o, u),
                    x(ke, t, Me, o, u),
                    w(Te, "", t, Me, o, u)
                } else
                    et.setBlending(r.NoBlending),
                    x(Ee, t, Me, o, null),
                    w(Te, "opaque", t, Me, o, null),
                    x(ke, t, Me, o, null),
                    w(Te, "transparent", t, Me, o, null);
                bt.render(e, t),
                xt.render(e, t, Ge, We),
                n && n.generateMipmaps && n.minFilter !== r.NearestFilter && n.minFilter !== r.LinearFilter && oe(n),
                et.setDepthTest(!0),
                et.setDepthWrite(!0),
                et.setColorWrite(!0)
            }
            ,
            this.renderImmediateObject = function(e, t, n, i, r) {
                var o = D(e, t, n, i, r);
                Ie = "",
                Oe.setMaterialFaces(i),
                r.immediateRenderCallback ? r.immediateRenderCallback(o, Le, qe) : r.render(function(e) {
                    Oe.renderBufferImmediate(e, o, i)
                })
            }
            ;
            var Lt = {}
              , Ot = 0
              , Rt = {
                MeshDepthMaterial: "depth",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointCloudMaterial: "particle_basic"
            };
            this.setFaceCulling = function(e, t) {
                e === r.CullFaceNone ? Le.disable(Le.CULL_FACE) : (t === r.FrontFaceDirectionCW ? Le.frontFace(Le.CW) : Le.frontFace(Le.CCW),
                e === r.CullFaceBack ? Le.cullFace(Le.BACK) : e === r.CullFaceFront ? Le.cullFace(Le.FRONT) : Le.cullFace(Le.FRONT_AND_BACK),
                Le.enable(Le.CULL_FACE))
            }
            ,
            this.setMaterialFaces = function(e) {
                et.setDoubleSided(e.side === r.DoubleSide),
                et.setFlipSided(e.side === r.BackSide)
            }
            ,
            this.uploadTexture = function(e) {
                void 0 === e.__webglInit && (e.__webglInit = !0,
                e.addEventListener("dispose", St),
                e.__webglTexture = Le.createTexture(),
                Oe.info.memory.textures++),
                Le.bindTexture(Le.TEXTURE_2D, e.__webglTexture),
                Le.pixelStorei(Le.UNPACK_FLIP_Y_WEBGL, e.flipY),
                Le.pixelStorei(Le.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.premultiplyAlpha),
                Le.pixelStorei(Le.UNPACK_ALIGNMENT, e.unpackAlignment),
                e.image = ee(e.image, st);
                var t = e.image
                  , n = r.Math.isPowerOfTwo(t.width) && r.Math.isPowerOfTwo(t.height)
                  , i = se(e.format)
                  , o = se(e.type);
                $(Le.TEXTURE_2D, e, n);
                var a, s = e.mipmaps;
                if (e instanceof r.DataTexture)
                    if (s.length > 0 && n) {
                        for (var l = 0, c = s.length; c > l; l++)
                            a = s[l],
                            Le.texImage2D(Le.TEXTURE_2D, l, i, a.width, a.height, 0, i, o, a.data);
                        e.generateMipmaps = !1
                    } else
                        Le.texImage2D(Le.TEXTURE_2D, 0, i, t.width, t.height, 0, i, o, t.data);
                else if (e instanceof r.CompressedTexture)
                    for (var l = 0, c = s.length; c > l; l++)
                        a = s[l],
                        e.format !== r.RGBAFormat && e.format !== r.RGBFormat ? mt().indexOf(i) > -1 ? Le.compressedTexImage2D(Le.TEXTURE_2D, l, i, a.width, a.height, 0, a.data) : r.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Le.texImage2D(Le.TEXTURE_2D, l, i, a.width, a.height, 0, i, o, a.data);
                else if (s.length > 0 && n) {
                    for (var l = 0, c = s.length; c > l; l++)
                        a = s[l],
                        Le.texImage2D(Le.TEXTURE_2D, l, i, i, o, a);
                    e.generateMipmaps = !1
                } else
                    Le.texImage2D(Le.TEXTURE_2D, 0, i, i, o, e.image);
                e.generateMipmaps && n && Le.generateMipmap(Le.TEXTURE_2D),
                e.needsUpdate = !1,
                e.onUpdate && e.onUpdate()
            }
            ,
            this.setTexture = function(e, t) {
                Le.activeTexture(Le.TEXTURE0 + t),
                e.needsUpdate ? Oe.uploadTexture(e) : Le.bindTexture(Le.TEXTURE_2D, e.__webglTexture)
            }
            ,
            this.setRenderTarget = function(e) {
                var t = e instanceof r.WebGLRenderTargetCube;
                if (e && void 0 === e.__webglFramebuffer) {
                    void 0 === e.depthBuffer && (e.depthBuffer = !0),
                    void 0 === e.stencilBuffer && (e.stencilBuffer = !0),
                    e.addEventListener("dispose", Mt),
                    e.__webglTexture = Le.createTexture(),
                    Oe.info.memory.textures++;
                    var n = r.Math.isPowerOfTwo(e.width) && r.Math.isPowerOfTwo(e.height)
                      , i = se(e.format)
                      , o = se(e.type);
                    if (t) {
                        e.__webglFramebuffer = [],
                        e.__webglRenderbuffer = [],
                        Le.bindTexture(Le.TEXTURE_CUBE_MAP, e.__webglTexture),
                        $(Le.TEXTURE_CUBE_MAP, e, n);
                        for (var a = 0; 6 > a; a++)
                            e.__webglFramebuffer[a] = Le.createFramebuffer(),
                            e.__webglRenderbuffer[a] = Le.createRenderbuffer(),
                            Le.texImage2D(Le.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, i, e.width, e.height, 0, i, o, null),
                            ie(e.__webglFramebuffer[a], e, Le.TEXTURE_CUBE_MAP_POSITIVE_X + a),
                            re(e.__webglRenderbuffer[a], e);
                        n && Le.generateMipmap(Le.TEXTURE_CUBE_MAP)
                    } else
                        e.__webglFramebuffer = Le.createFramebuffer(),
                        e.shareDepthFrom ? e.__webglRenderbuffer = e.shareDepthFrom.__webglRenderbuffer : e.__webglRenderbuffer = Le.createRenderbuffer(),
                        Le.bindTexture(Le.TEXTURE_2D, e.__webglTexture),
                        $(Le.TEXTURE_2D, e, n),
                        Le.texImage2D(Le.TEXTURE_2D, 0, i, e.width, e.height, 0, i, o, null),
                        ie(e.__webglFramebuffer, e, Le.TEXTURE_2D),
                        e.shareDepthFrom ? e.depthBuffer && !e.stencilBuffer ? Le.framebufferRenderbuffer(Le.FRAMEBUFFER, Le.DEPTH_ATTACHMENT, Le.RENDERBUFFER, e.__webglRenderbuffer) : e.depthBuffer && e.stencilBuffer && Le.framebufferRenderbuffer(Le.FRAMEBUFFER, Le.DEPTH_STENCIL_ATTACHMENT, Le.RENDERBUFFER, e.__webglRenderbuffer) : re(e.__webglRenderbuffer, e),
                        n && Le.generateMipmap(Le.TEXTURE_2D);
                    t ? Le.bindTexture(Le.TEXTURE_CUBE_MAP, null) : Le.bindTexture(Le.TEXTURE_2D, null),
                    Le.bindRenderbuffer(Le.RENDERBUFFER, null),
                    Le.bindFramebuffer(Le.FRAMEBUFFER, null)
                }
                var s, l, c, u, h;
                e ? (s = t ? e.__webglFramebuffer[e.activeCubeFace] : e.__webglFramebuffer,
                l = e.width,
                c = e.height,
                u = 0,
                h = 0) : (s = null,
                l = Ue,
                c = He,
                u = Ve,
                h = ze),
                s !== Be && (Le.bindFramebuffer(Le.FRAMEBUFFER, s),
                Le.viewport(u, h, l, c),
                Be = s),
                Ge = l,
                We = c
            }
            ,
            this.readRenderTargetPixels = function(e, t, n, i, o, a) {
                if (!(e instanceof r.WebGLRenderTarget))
                    return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
                if (e.__webglFramebuffer) {
                    if (e.format !== r.RGBAFormat)
                        return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");
                    var s = !1;
                    e.__webglFramebuffer !== Be && (Le.bindFramebuffer(Le.FRAMEBUFFER, e.__webglFramebuffer),
                    s = !0),
                    Le.checkFramebufferStatus(Le.FRAMEBUFFER) === Le.FRAMEBUFFER_COMPLETE ? Le.readPixels(t, n, i, o, Le.RGBA, Le.UNSIGNED_BYTE, a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),
                    s && Le.bindFramebuffer(Le.FRAMEBUFFER, Be)
                }
            }
            ,
            this.initMaterial = function() {
                r.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
            }
            ,
            this.addPrePlugin = function() {
                r.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
            }
            ,
            this.addPostPlugin = function() {
                r.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
            }
            ,
            this.updateShadowMap = function() {
                r.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
            }
        }
        ,
        r.WebGLRenderTarget = function(e, t, n) {
            this.width = e,
            this.height = t,
            n = n || {},
            this.wrapS = void 0 !== n.wrapS ? n.wrapS : r.ClampToEdgeWrapping,
            this.wrapT = void 0 !== n.wrapT ? n.wrapT : r.ClampToEdgeWrapping,
            this.magFilter = void 0 !== n.magFilter ? n.magFilter : r.LinearFilter,
            this.minFilter = void 0 !== n.minFilter ? n.minFilter : r.LinearMipMapLinearFilter,
            this.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1,
            this.offset = new r.Vector2(0,0),
            this.repeat = new r.Vector2(1,1),
            this.format = void 0 !== n.format ? n.format : r.RGBAFormat,
            this.type = void 0 !== n.type ? n.type : r.UnsignedByteType,
            this.depthBuffer = void 0 !== n.depthBuffer ? n.depthBuffer : !0,
            this.stencilBuffer = void 0 !== n.stencilBuffer ? n.stencilBuffer : !0,
            this.generateMipmaps = !0,
            this.shareDepthFrom = void 0 !== n.shareDepthFrom ? n.shareDepthFrom : null
        }
        ,
        r.WebGLRenderTarget.prototype = {
            constructor: r.WebGLRenderTarget,
            setSize: function(e, t) {
                this.width = e,
                this.height = t
            },
            clone: function() {
                var e = new r.WebGLRenderTarget(this.width,this.height);
                return e.wrapS = this.wrapS,
                e.wrapT = this.wrapT,
                e.magFilter = this.magFilter,
                e.minFilter = this.minFilter,
                e.anisotropy = this.anisotropy,
                e.offset.copy(this.offset),
                e.repeat.copy(this.repeat),
                e.format = this.format,
                e.type = this.type,
                e.depthBuffer = this.depthBuffer,
                e.stencilBuffer = this.stencilBuffer,
                e.generateMipmaps = this.generateMipmaps,
                e.shareDepthFrom = this.shareDepthFrom,
                e
            },
            dispose: function() {
                this.dispatchEvent({
                    type: "dispose"
                })
            }
        },
        r.EventDispatcher.prototype.apply(r.WebGLRenderTarget.prototype),
        r.WebGLRenderTargetCube = function(e, t, n) {
            r.WebGLRenderTarget.call(this, e, t, n),
            this.activeCubeFace = 0
        }
        ,
        r.WebGLRenderTargetCube.prototype = Object.create(r.WebGLRenderTarget.prototype),
        r.WebGLRenderTargetCube.prototype.constructor = r.WebGLRenderTargetCube,
        r.WebGLExtensions = function(e) {
            var t = {};
            this.get = function(n) {
                if (void 0 !== t[n])
                    return t[n];
                var i;
                switch (n) {
                case "EXT_texture_filter_anisotropic":
                    i = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;
                case "WEBGL_compressed_texture_s3tc":
                    i = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;
                case "WEBGL_compressed_texture_pvrtc":
                    i = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;
                default:
                    i = e.getExtension(n)
                }
                return null === i && r.warn("THREE.WebGLRenderer: " + n + " extension not supported."),
                t[n] = i,
                i
            }
        }
        ,
        r.WebGLProgram = function() {
            var e = 0
              , t = function(e) {
                var t, n, i = [];
                for (var r in e)
                    t = e[r],
                    t !== !1 && (n = "#define " + r + " " + t,
                    i.push(n));
                return i.join("\n")
            }
              , n = function(e, t, n) {
                for (var i = {}, r = 0, o = n.length; o > r; r++) {
                    var a = n[r];
                    i[a] = e.getUniformLocation(t, a)
                }
                return i
            }
              , i = function(e, t, n) {
                for (var i = {}, r = 0, o = n.length; o > r; r++) {
                    var a = n[r];
                    i[a] = e.getAttribLocation(t, a)
                }
                return i
            };
            return function(o, a, s, l) {
                var c = o
                  , u = c.context
                  , h = s.defines
                  , d = s.__webglShader.uniforms
                  , f = s.attributes
                  , p = s.__webglShader.vertexShader
                  , m = s.__webglShader.fragmentShader
                  , v = s.index0AttributeName;
                void 0 === v && l.morphTargets === !0 && (v = "position");
                var g = "SHADOWMAP_TYPE_BASIC";
                l.shadowMapType === r.PCFShadowMap ? g = "SHADOWMAP_TYPE_PCF" : l.shadowMapType === r.PCFSoftShadowMap && (g = "SHADOWMAP_TYPE_PCF_SOFT");
                var y = "ENVMAP_TYPE_CUBE"
                  , b = "ENVMAP_MODE_REFLECTION"
                  , x = "ENVMAP_BLENDING_MULTIPLY";
                if (l.envMap) {
                    switch (s.envMap.mapping) {
                    case r.CubeReflectionMapping:
                    case r.CubeRefractionMapping:
                        y = "ENVMAP_TYPE_CUBE";
                        break;
                    case r.EquirectangularReflectionMapping:
                    case r.EquirectangularRefractionMapping:
                        y = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case r.SphericalReflectionMapping:
                        y = "ENVMAP_TYPE_SPHERE"
                    }
                    switch (s.envMap.mapping) {
                    case r.CubeRefractionMapping:
                    case r.EquirectangularRefractionMapping:
                        b = "ENVMAP_MODE_REFRACTION"
                    }
                    switch (s.combine) {
                    case r.MultiplyOperation:
                        x = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case r.MixOperation:
                        x = "ENVMAP_BLENDING_MIX";
                        break;
                    case r.AddOperation:
                        x = "ENVMAP_BLENDING_ADD"
                    }
                }
                var w, _, S = o.gammaFactor > 0 ? o.gammaFactor : 1, M = t(h), C = u.createProgram();
                s instanceof r.RawShaderMaterial ? (w = "",
                _ = "") : (w = ["precision " + l.precision + " float;", "precision " + l.precision + " int;", M, l.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", c.gammaInput ? "#define GAMMA_INPUT" : "", c.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + S, "#define MAX_DIR_LIGHTS " + l.maxDirLights, "#define MAX_POINT_LIGHTS " + l.maxPointLights, "#define MAX_SPOT_LIGHTS " + l.maxSpotLights, "#define MAX_HEMI_LIGHTS " + l.maxHemiLights, "#define MAX_SHADOWS " + l.maxShadows, "#define MAX_BONES " + l.maxBones, l.map ? "#define USE_MAP" : "", l.envMap ? "#define USE_ENVMAP" : "", l.envMap ? "#define " + b : "", l.lightMap ? "#define USE_LIGHTMAP" : "", l.bumpMap ? "#define USE_BUMPMAP" : "", l.normalMap ? "#define USE_NORMALMAP" : "", l.specularMap ? "#define USE_SPECULARMAP" : "", l.alphaMap ? "#define USE_ALPHAMAP" : "", l.vertexColors ? "#define USE_COLOR" : "", l.flatShading ? "#define FLAT_SHADED" : "", l.skinning ? "#define USE_SKINNING" : "", l.useVertexTexture ? "#define BONE_TEXTURE" : "", l.morphTargets ? "#define USE_MORPHTARGETS" : "", l.morphNormals ? "#define USE_MORPHNORMALS" : "", l.wrapAround ? "#define WRAP_AROUND" : "", l.doubleSided ? "#define DOUBLE_SIDED" : "", l.flipSided ? "#define FLIP_SIDED" : "", l.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", l.shadowMapEnabled ? "#define " + g : "", l.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", l.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", l.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", l.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", ""].join("\n"),
                _ = ["precision " + l.precision + " float;", "precision " + l.precision + " int;", l.bumpMap || l.normalMap || l.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", M, "#define MAX_DIR_LIGHTS " + l.maxDirLights, "#define MAX_POINT_LIGHTS " + l.maxPointLights, "#define MAX_SPOT_LIGHTS " + l.maxSpotLights, "#define MAX_HEMI_LIGHTS " + l.maxHemiLights, "#define MAX_SHADOWS " + l.maxShadows, l.alphaTest ? "#define ALPHATEST " + l.alphaTest : "", c.gammaInput ? "#define GAMMA_INPUT" : "", c.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + S, l.useFog && l.fog ? "#define USE_FOG" : "", l.useFog && l.fogExp ? "#define FOG_EXP2" : "", l.map ? "#define USE_MAP" : "", l.envMap ? "#define USE_ENVMAP" : "", l.envMap ? "#define " + y : "", l.envMap ? "#define " + b : "", l.envMap ? "#define " + x : "", l.lightMap ? "#define USE_LIGHTMAP" : "", l.bumpMap ? "#define USE_BUMPMAP" : "", l.normalMap ? "#define USE_NORMALMAP" : "", l.specularMap ? "#define USE_SPECULARMAP" : "", l.alphaMap ? "#define USE_ALPHAMAP" : "", l.vertexColors ? "#define USE_COLOR" : "", l.flatShading ? "#define FLAT_SHADED" : "", l.metal ? "#define METAL" : "", l.wrapAround ? "#define WRAP_AROUND" : "", l.doubleSided ? "#define DOUBLE_SIDED" : "", l.flipSided ? "#define FLIP_SIDED" : "", l.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", l.shadowMapEnabled ? "#define " + g : "", l.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", l.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", l.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", ""].join("\n"));
                var T = new r.WebGLShader(u,u.VERTEX_SHADER,w + p)
                  , E = new r.WebGLShader(u,u.FRAGMENT_SHADER,_ + m);
                u.attachShader(C, T),
                u.attachShader(C, E),
                void 0 !== v && u.bindAttribLocation(C, 0, v),
                u.linkProgram(C);
                var k = u.getProgramInfoLog(C);
                u.getProgramParameter(C, u.LINK_STATUS) === !1 && r.error("THREE.WebGLProgram: shader error: " + u.getError(), "gl.VALIDATE_STATUS", u.getProgramParameter(C, u.VALIDATE_STATUS), "gl.getPRogramInfoLog", k),
                "" !== k && r.warn("THREE.WebGLProgram: gl.getProgramInfoLog()" + k),
                u.deleteShader(T),
                u.deleteShader(E);
                var A = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "morphTargetInfluences", "bindMatrix", "bindMatrixInverse"];
                l.useVertexTexture ? (A.push("boneTexture"),
                A.push("boneTextureWidth"),
                A.push("boneTextureHeight")) : A.push("boneGlobalMatrices"),
                l.logarithmicDepthBuffer && A.push("logDepthBufFC");
                for (var P in d)
                    A.push(P);
                this.uniforms = n(u, C, A),
                A = ["position", "normal", "uv", "uv2", "tangent", "color", "skinIndex", "skinWeight", "lineDistance"];
                for (var L = 0; L < l.maxMorphTargets; L++)
                    A.push("morphTarget" + L);
                for (var L = 0; L < l.maxMorphNormals; L++)
                    A.push("morphNormal" + L);
                for (var O in f)
                    A.push(O);
                return this.attributes = i(u, C, A),
                this.attributesKeys = Object.keys(this.attributes),
                this.id = e++,
                this.code = a,
                this.usedTimes = 1,
                this.program = C,
                this.vertexShader = T,
                this.fragmentShader = E,
                this
            }
        }(),
        r.WebGLShader = function() {
            var e = function(e) {
                for (var t = e.split("\n"), n = 0; n < t.length; n++)
                    t[n] = n + 1 + ": " + t[n];
                return t.join("\n")
            };
            return function(t, n, i) {
                var o = t.createShader(n);
                return t.shaderSource(o, i),
                t.compileShader(o),
                t.getShaderParameter(o, t.COMPILE_STATUS) === !1 && r.error("THREE.WebGLShader: Shader couldn't compile."),
                "" !== t.getShaderInfoLog(o) && r.warn("THREE.WebGLShader: gl.getShaderInfoLog()", t.getShaderInfoLog(o), e(i)),
                o
            }
        }(),
        r.WebGLState = function(e, t) {
            var n = new Uint8Array(16)
              , i = new Uint8Array(16)
              , o = null
              , a = null
              , s = null
              , l = null
              , c = null
              , u = null
              , h = null
              , d = null
              , f = null
              , p = null
              , m = null
              , v = null
              , g = null
              , y = null
              , b = null
              , x = null;
            this.initAttributes = function() {
                for (var e = 0, t = n.length; t > e; e++)
                    n[e] = 0
            }
            ,
            this.enableAttribute = function(t) {
                n[t] = 1,
                0 === i[t] && (e.enableVertexAttribArray(t),
                i[t] = 1)
            }
            ,
            this.disableUnusedAttributes = function() {
                for (var t = 0, r = i.length; r > t; t++)
                    i[t] !== n[t] && (e.disableVertexAttribArray(t),
                    i[t] = 0)
            }
            ,
            this.setBlending = function(n, i, d, f, p, m, v) {
                n !== o && (n === r.NoBlending ? e.disable(e.BLEND) : n === r.AdditiveBlending ? (e.enable(e.BLEND),
                e.blendEquation(e.FUNC_ADD),
                e.blendFunc(e.SRC_ALPHA, e.ONE)) : n === r.SubtractiveBlending ? (e.enable(e.BLEND),
                e.blendEquation(e.FUNC_ADD),
                e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR)) : n === r.MultiplyBlending ? (e.enable(e.BLEND),
                e.blendEquation(e.FUNC_ADD),
                e.blendFunc(e.ZERO, e.SRC_COLOR)) : n === r.CustomBlending ? e.enable(e.BLEND) : (e.enable(e.BLEND),
                e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                e.blendFuncSeparate(e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA)),
                o = n),
                n === r.CustomBlending ? (p = p || i,
                m = m || d,
                v = v || f,
                (i !== a || p !== c) && (e.blendEquationSeparate(t(i), t(p)),
                a = i,
                c = p),
                (d !== s || f !== l || m !== u || v !== h) && (e.blendFuncSeparate(t(d), t(f), t(m), t(v)),
                s = d,
                l = f,
                u = m,
                h = v)) : (a = null,
                s = null,
                l = null,
                c = null,
                u = null,
                h = null)
            }
            ,
            this.setDepthTest = function(t) {
                d !== t && (t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST),
                d = t)
            }
            ,
            this.setDepthWrite = function(t) {
                f !== t && (e.depthMask(t),
                f = t)
            }
            ,
            this.setColorWrite = function(t) {
                p !== t && (e.colorMask(t, t, t, t),
                p = t)
            }
            ,
            this.setDoubleSided = function(t) {
                m !== t && (t ? e.disable(e.CULL_FACE) : e.enable(e.CULL_FACE),
                m = t)
            }
            ,
            this.setFlipSided = function(t) {
                v !== t && (t ? e.frontFace(e.CW) : e.frontFace(e.CCW),
                v = t)
            }
            ,
            this.setLineWidth = function(t) {
                t !== g && (e.lineWidth(t),
                g = t)
            }
            ,
            this.setPolygonOffset = function(t, n, i) {
                y !== t && (t ? e.enable(e.POLYGON_OFFSET_FILL) : e.disable(e.POLYGON_OFFSET_FILL),
                y = t),
                !t || b === n && x === i || (e.polygonOffset(n, i),
                b = n,
                x = i)
            }
            ,
            this.reset = function() {
                for (var e = 0; e < i.length; e++)
                    i[e] = 0;
                o = null,
                d = null,
                f = null,
                p = null,
                m = null,
                v = null
            }
        }
        ,
        r.LensFlarePlugin = function(e, t) {
            function n(t) {
                var n = d.createProgram()
                  , i = d.createShader(d.FRAGMENT_SHADER)
                  , r = d.createShader(d.VERTEX_SHADER)
                  , o = "precision " + e.getPrecision() + " float;\n";
                return d.shaderSource(i, o + t.fragmentShader),
                d.shaderSource(r, o + t.vertexShader),
                d.compileShader(i),
                d.compileShader(r),
                d.attachShader(n, i),
                d.attachShader(n, r),
                d.linkProgram(n),
                n
            }
            var i, o, a, s, l, c, u, h, d = e.context, f = function() {
                var e = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1])
                  , t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                i = d.createBuffer(),
                o = d.createBuffer(),
                d.bindBuffer(d.ARRAY_BUFFER, i),
                d.bufferData(d.ARRAY_BUFFER, e, d.STATIC_DRAW),
                d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, o),
                d.bufferData(d.ELEMENT_ARRAY_BUFFER, t, d.STATIC_DRAW),
                u = d.createTexture(),
                h = d.createTexture(),
                d.bindTexture(d.TEXTURE_2D, u),
                d.texImage2D(d.TEXTURE_2D, 0, d.RGB, 16, 16, 0, d.RGB, d.UNSIGNED_BYTE, null),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_S, d.CLAMP_TO_EDGE),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_T, d.CLAMP_TO_EDGE),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST),
                d.bindTexture(d.TEXTURE_2D, h),
                d.texImage2D(d.TEXTURE_2D, 0, d.RGBA, 16, 16, 0, d.RGBA, d.UNSIGNED_BYTE, null),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_S, d.CLAMP_TO_EDGE),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_T, d.CLAMP_TO_EDGE),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST),
                c = d.getParameter(d.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
                var r;
                r = c ? {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                } : {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                },
                a = n(r),
                s = {
                    vertex: d.getAttribLocation(a, "position"),
                    uv: d.getAttribLocation(a, "uv")
                },
                l = {
                    renderType: d.getUniformLocation(a, "renderType"),
                    map: d.getUniformLocation(a, "map"),
                    occlusionMap: d.getUniformLocation(a, "occlusionMap"),
                    opacity: d.getUniformLocation(a, "opacity"),
                    color: d.getUniformLocation(a, "color"),
                    scale: d.getUniformLocation(a, "scale"),
                    rotation: d.getUniformLocation(a, "rotation"),
                    screenPosition: d.getUniformLocation(a, "screenPosition")
                }
            };
            this.render = function(n, p, m, v) {
                if (0 !== t.length) {
                    var g = new r.Vector3
                      , y = v / m
                      , b = .5 * m
                      , x = .5 * v
                      , w = 16 / v
                      , _ = new r.Vector2(w * y,w)
                      , S = new r.Vector3(1,1,0)
                      , M = new r.Vector2(1,1);
                    void 0 === a && f(),
                    d.useProgram(a),
                    d.enableVertexAttribArray(s.vertex),
                    d.enableVertexAttribArray(s.uv),
                    d.uniform1i(l.occlusionMap, 0),
                    d.uniform1i(l.map, 1),
                    d.bindBuffer(d.ARRAY_BUFFER, i),
                    d.vertexAttribPointer(s.vertex, 2, d.FLOAT, !1, 16, 0),
                    d.vertexAttribPointer(s.uv, 2, d.FLOAT, !1, 16, 8),
                    d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, o),
                    d.disable(d.CULL_FACE),
                    d.depthMask(!1);
                    for (var C = 0, T = t.length; T > C; C++) {
                        w = 16 / v,
                        _.set(w * y, w);
                        var E = t[C];
                        if (g.set(E.matrixWorld.elements[12], E.matrixWorld.elements[13], E.matrixWorld.elements[14]),
                        g.applyMatrix4(p.matrixWorldInverse),
                        g.applyProjection(p.projectionMatrix),
                        S.copy(g),
                        M.x = S.x * b + b,
                        M.y = S.y * x + x,
                        c || M.x > 0 && M.x < m && M.y > 0 && M.y < v) {
                            d.activeTexture(d.TEXTURE1),
                            d.bindTexture(d.TEXTURE_2D, u),
                            d.copyTexImage2D(d.TEXTURE_2D, 0, d.RGB, M.x - 8, M.y - 8, 16, 16, 0),
                            d.uniform1i(l.renderType, 0),
                            d.uniform2f(l.scale, _.x, _.y),
                            d.uniform3f(l.screenPosition, S.x, S.y, S.z),
                            d.disable(d.BLEND),
                            d.enable(d.DEPTH_TEST),
                            d.drawElements(d.TRIANGLES, 6, d.UNSIGNED_SHORT, 0),
                            d.activeTexture(d.TEXTURE0),
                            d.bindTexture(d.TEXTURE_2D, h),
                            d.copyTexImage2D(d.TEXTURE_2D, 0, d.RGBA, M.x - 8, M.y - 8, 16, 16, 0),
                            d.uniform1i(l.renderType, 1),
                            d.disable(d.DEPTH_TEST),
                            d.activeTexture(d.TEXTURE1),
                            d.bindTexture(d.TEXTURE_2D, u),
                            d.drawElements(d.TRIANGLES, 6, d.UNSIGNED_SHORT, 0),
                            E.positionScreen.copy(S),
                            E.customUpdateCallback ? E.customUpdateCallback(E) : E.updateLensFlares(),
                            d.uniform1i(l.renderType, 2),
                            d.enable(d.BLEND);
                            for (var k = 0, A = E.lensFlares.length; A > k; k++) {
                                var P = E.lensFlares[k];
                                P.opacity > .001 && P.scale > .001 && (S.x = P.x,
                                S.y = P.y,
                                S.z = P.z,
                                w = P.size * P.scale / v,
                                _.x = w * y,
                                _.y = w,
                                d.uniform3f(l.screenPosition, S.x, S.y, S.z),
                                d.uniform2f(l.scale, _.x, _.y),
                                d.uniform1f(l.rotation, P.rotation),
                                d.uniform1f(l.opacity, P.opacity),
                                d.uniform3f(l.color, P.color.r, P.color.g, P.color.b),
                                e.state.setBlending(P.blending, P.blendEquation, P.blendSrc, P.blendDst),
                                e.setTexture(P.texture, 1),
                                d.drawElements(d.TRIANGLES, 6, d.UNSIGNED_SHORT, 0))
                            }
                        }
                    }
                    d.enable(d.CULL_FACE),
                    d.enable(d.DEPTH_TEST),
                    d.depthMask(!0),
                    e.resetGLState()
                }
            }
        }
        ,
        r.ShadowMapPlugin = function(e, t, n, i) {
            function o(e, t, i) {
                if (t.visible) {
                    var r = n[t.id];
                    if (r && t.castShadow && (t.frustumCulled === !1 || m.intersectsObject(t) === !0))
                        for (var a = 0, s = r.length; s > a; a++) {
                            var l = r[a];
                            t._modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, t.matrixWorld),
                            x.push(l)
                        }
                    for (var a = 0, s = t.children.length; s > a; a++)
                        o(e, t.children[a], i)
                }
            }
            function a(e, t) {
                var n = new r.DirectionalLight;
                n.isVirtual = !0,
                n.onlyShadow = !0,
                n.castShadow = !0,
                n.shadowCameraNear = e.shadowCameraNear,
                n.shadowCameraFar = e.shadowCameraFar,
                n.shadowCameraLeft = e.shadowCameraLeft,
                n.shadowCameraRight = e.shadowCameraRight,
                n.shadowCameraBottom = e.shadowCameraBottom,
                n.shadowCameraTop = e.shadowCameraTop,
                n.shadowCameraVisible = e.shadowCameraVisible,
                n.shadowDarkness = e.shadowDarkness,
                n.shadowBias = e.shadowCascadeBias[t],
                n.shadowMapWidth = e.shadowCascadeWidth[t],
                n.shadowMapHeight = e.shadowCascadeHeight[t],
                n.pointsWorld = [],
                n.pointsFrustum = [];
                for (var i = n.pointsWorld, o = n.pointsFrustum, a = 0; 8 > a; a++)
                    i[a] = new r.Vector3,
                    o[a] = new r.Vector3;
                var s = e.shadowCascadeNearZ[t]
                  , l = e.shadowCascadeFarZ[t];
                return o[0].set(-1, -1, s),
                o[1].set(1, -1, s),
                o[2].set(-1, 1, s),
                o[3].set(1, 1, s),
                o[4].set(-1, -1, l),
                o[5].set(1, -1, l),
                o[6].set(-1, 1, l),
                o[7].set(1, 1, l),
                n
            }
            function s(e, t) {
                var n = e.shadowCascadeArray[t];
                n.position.copy(e.position),
                n.target.position.copy(e.target.position),
                n.lookAt(n.target),
                n.shadowCameraVisible = e.shadowCameraVisible,
                n.shadowDarkness = e.shadowDarkness,
                n.shadowBias = e.shadowCascadeBias[t];
                var i = e.shadowCascadeNearZ[t]
                  , r = e.shadowCascadeFarZ[t]
                  , o = n.pointsFrustum;
                o[0].z = i,
                o[1].z = i,
                o[2].z = i,
                o[3].z = i,
                o[4].z = r,
                o[5].z = r,
                o[6].z = r,
                o[7].z = r
            }
            function l(e, t) {
                var n = t.shadowCamera
                  , i = t.pointsFrustum
                  , r = t.pointsWorld;
                g.set(1 / 0, 1 / 0, 1 / 0),
                y.set(-(1 / 0), -(1 / 0), -(1 / 0));
                for (var o = 0; 8 > o; o++) {
                    var a = r[o];
                    a.copy(i[o]),
                    a.unproject(e),
                    a.applyMatrix4(n.matrixWorldInverse),
                    a.x < g.x && (g.x = a.x),
                    a.x > y.x && (y.x = a.x),
                    a.y < g.y && (g.y = a.y),
                    a.y > y.y && (y.y = a.y),
                    a.z < g.z && (g.z = a.z),
                    a.z > y.z && (y.z = a.z)
                }
                n.left = g.x,
                n.right = y.x,
                n.top = y.y,
                n.bottom = g.y,
                n.updateProjectionMatrix()
            }
            function c(e) {
                return e.material instanceof r.MeshFaceMaterial ? e.material.materials[0] : e.material
            }
            var u, h, d, f, p = e.context, m = new r.Frustum, v = new r.Matrix4, g = new r.Vector3, y = new r.Vector3, b = new r.Vector3, x = [], w = r.ShaderLib.depthRGBA, _ = r.UniformsUtils.clone(w.uniforms);
            u = new r.ShaderMaterial({
                uniforms: _,
                vertexShader: w.vertexShader,
                fragmentShader: w.fragmentShader
            }),
            h = new r.ShaderMaterial({
                uniforms: _,
                vertexShader: w.vertexShader,
                fragmentShader: w.fragmentShader,
                morphTargets: !0
            }),
            d = new r.ShaderMaterial({
                uniforms: _,
                vertexShader: w.vertexShader,
                fragmentShader: w.fragmentShader,
                skinning: !0
            }),
            f = new r.ShaderMaterial({
                uniforms: _,
                vertexShader: w.vertexShader,
                fragmentShader: w.fragmentShader,
                morphTargets: !0,
                skinning: !0
            }),
            u._shadowPass = !0,
            h._shadowPass = !0,
            d._shadowPass = !0,
            f._shadowPass = !0,
            this.render = function(n, g) {
                if (e.shadowMapEnabled !== !1) {
                    var y, w, _, S, M, C, T, E, k, A, P, L, O, R = [], F = 0, B = null;
                    for (p.clearColor(1, 1, 1, 1),
                    p.disable(p.BLEND),
                    p.enable(p.CULL_FACE),
                    p.frontFace(p.CCW),
                    e.shadowMapCullFace === r.CullFaceFront ? p.cullFace(p.FRONT) : p.cullFace(p.BACK),
                    e.state.setDepthTest(!0),
                    y = 0,
                    w = t.length; w > y; y++)
                        if (O = t[y],
                        O.castShadow)
                            if (O instanceof r.DirectionalLight && O.shadowCascade)
                                for (M = 0; M < O.shadowCascadeCount; M++) {
                                    var D;
                                    if (O.shadowCascadeArray[M])
                                        D = O.shadowCascadeArray[M];
                                    else {
                                        D = a(O, M),
                                        D.originalCamera = g;
                                        var I = new r.Gyroscope;
                                        I.position.copy(O.shadowCascadeOffset),
                                        I.add(D),
                                        I.add(D.target),
                                        g.add(I),
                                        O.shadowCascadeArray[M] = D
                                    }
                                    s(O, M),
                                    R[F] = D,
                                    F++
                                }
                            else
                                R[F] = O,
                                F++;
                    for (y = 0,
                    w = R.length; w > y; y++) {
                        if (O = R[y],
                        !O.shadowMap) {
                            var N = r.LinearFilter;
                            e.shadowMapType === r.PCFSoftShadowMap && (N = r.NearestFilter);
                            var j = {
                                minFilter: N,
                                magFilter: N,
                                format: r.RGBAFormat
                            };
                            O.shadowMap = new r.WebGLRenderTarget(O.shadowMapWidth,O.shadowMapHeight,j),
                            O.shadowMapSize = new r.Vector2(O.shadowMapWidth,O.shadowMapHeight),
                            O.shadowMatrix = new r.Matrix4
                        }
                        if (!O.shadowCamera) {
                            if (O instanceof r.SpotLight)
                                O.shadowCamera = new r.PerspectiveCamera(O.shadowCameraFov,O.shadowMapWidth / O.shadowMapHeight,O.shadowCameraNear,O.shadowCameraFar);
                            else {
                                if (!(O instanceof r.DirectionalLight)) {
                                    r.error("THREE.ShadowMapPlugin: Unsupported light type for shadow", O);
                                    continue
                                }
                                O.shadowCamera = new r.OrthographicCamera(O.shadowCameraLeft,O.shadowCameraRight,O.shadowCameraTop,O.shadowCameraBottom,O.shadowCameraNear,O.shadowCameraFar)
                            }
                            n.add(O.shadowCamera),
                            n.autoUpdate === !0 && n.updateMatrixWorld()
                        }
                        O.shadowCameraVisible && !O.cameraHelper && (O.cameraHelper = new r.CameraHelper(O.shadowCamera),
                        n.add(O.cameraHelper)),
                        O.isVirtual && D.originalCamera == g && l(g, O),
                        C = O.shadowMap,
                        T = O.shadowMatrix,
                        E = O.shadowCamera,
                        E.position.setFromMatrixPosition(O.matrixWorld),
                        b.setFromMatrixPosition(O.target.matrixWorld),
                        E.lookAt(b),
                        E.updateMatrixWorld(),
                        E.matrixWorldInverse.getInverse(E.matrixWorld),
                        O.cameraHelper && (O.cameraHelper.visible = O.shadowCameraVisible),
                        O.shadowCameraVisible && O.cameraHelper.update(),
                        T.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1),
                        T.multiply(E.projectionMatrix),
                        T.multiply(E.matrixWorldInverse),
                        v.multiplyMatrices(E.projectionMatrix, E.matrixWorldInverse),
                        m.setFromMatrix(v),
                        e.setRenderTarget(C),
                        e.clear(),
                        x.length = 0,
                        o(n, n, E);
                        var V, z, U;
                        for (_ = 0,
                        S = x.length; S > _; _++)
                            P = x[_],
                            L = P.object,
                            k = P.buffer,
                            V = c(L),
                            z = void 0 !== L.geometry.morphTargets && L.geometry.morphTargets.length > 0 && V.morphTargets,
                            U = L instanceof r.SkinnedMesh && V.skinning,
                            A = L.customDepthMaterial ? L.customDepthMaterial : U ? z ? f : d : z ? h : u,
                            e.setMaterialFaces(V),
                            k instanceof r.BufferGeometry ? e.renderBufferDirect(E, t, B, A, k, L) : e.renderBuffer(E, t, B, A, k, L);
                        for (_ = 0,
                        S = i.length; S > _; _++)
                            P = i[_],
                            L = P.object,
                            L.visible && L.castShadow && (L._modelViewMatrix.multiplyMatrices(E.matrixWorldInverse, L.matrixWorld),
                            e.renderImmediateObject(E, t, B, u, L))
                    }
                    var H = e.getClearColor()
                      , G = e.getClearAlpha();
                    p.clearColor(H.r, H.g, H.b, G),
                    p.enable(p.BLEND),
                    e.shadowMapCullFace === r.CullFaceFront && p.cullFace(p.BACK),
                    e.resetGLState()
                }
            }
        }
        ,
        r.SpritePlugin = function(e, t) {
            function n() {
                var t = h.createProgram()
                  , n = h.createShader(h.VERTEX_SHADER)
                  , i = h.createShader(h.FRAGMENT_SHADER);
                return h.shaderSource(n, ["precision " + e.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")),
                h.shaderSource(i, ["precision " + e.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")),
                h.compileShader(n),
                h.compileShader(i),
                h.attachShader(t, n),
                h.attachShader(t, i),
                h.linkProgram(t),
                t
            }
            function i(e, t) {
                return e.z !== t.z ? t.z - e.z : t.id - e.id
            }
            var o, a, s, l, c, u, h = e.context, d = new r.Vector3, f = new r.Quaternion, p = new r.Vector3, m = function() {
                var e = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1])
                  , t = new Uint16Array([0, 1, 2, 0, 2, 3]);
                o = h.createBuffer(),
                a = h.createBuffer(),
                h.bindBuffer(h.ARRAY_BUFFER, o),
                h.bufferData(h.ARRAY_BUFFER, e, h.STATIC_DRAW),
                h.bindBuffer(h.ELEMENT_ARRAY_BUFFER, a),
                h.bufferData(h.ELEMENT_ARRAY_BUFFER, t, h.STATIC_DRAW),
                s = n(),
                l = {
                    position: h.getAttribLocation(s, "position"),
                    uv: h.getAttribLocation(s, "uv")
                },
                c = {
                    uvOffset: h.getUniformLocation(s, "uvOffset"),
                    uvScale: h.getUniformLocation(s, "uvScale"),
                    rotation: h.getUniformLocation(s, "rotation"),
                    scale: h.getUniformLocation(s, "scale"),
                    color: h.getUniformLocation(s, "color"),
                    map: h.getUniformLocation(s, "map"),
                    opacity: h.getUniformLocation(s, "opacity"),
                    modelViewMatrix: h.getUniformLocation(s, "modelViewMatrix"),
                    projectionMatrix: h.getUniformLocation(s, "projectionMatrix"),
                    fogType: h.getUniformLocation(s, "fogType"),
                    fogDensity: h.getUniformLocation(s, "fogDensity"),
                    fogNear: h.getUniformLocation(s, "fogNear"),
                    fogFar: h.getUniformLocation(s, "fogFar"),
                    fogColor: h.getUniformLocation(s, "fogColor"),
                    alphaTest: h.getUniformLocation(s, "alphaTest")
                };
                var i = document.createElement("canvas");
                i.width = 8,
                i.height = 8;
                var d = i.getContext("2d");
                d.fillStyle = "white",
                d.fillRect(0, 0, 8, 8),
                u = new r.Texture(i),
                u.needsUpdate = !0
            };
            this.render = function(n, v) {
                if (0 !== t.length) {
                    void 0 === s && m(),
                    h.useProgram(s),
                    h.enableVertexAttribArray(l.position),
                    h.enableVertexAttribArray(l.uv),
                    h.disable(h.CULL_FACE),
                    h.enable(h.BLEND),
                    h.bindBuffer(h.ARRAY_BUFFER, o),
                    h.vertexAttribPointer(l.position, 2, h.FLOAT, !1, 16, 0),
                    h.vertexAttribPointer(l.uv, 2, h.FLOAT, !1, 16, 8),
                    h.bindBuffer(h.ELEMENT_ARRAY_BUFFER, a),
                    h.uniformMatrix4fv(c.projectionMatrix, !1, v.projectionMatrix.elements),
                    h.activeTexture(h.TEXTURE0),
                    h.uniform1i(c.map, 0);
                    var g = 0
                      , y = 0
                      , b = n.fog;
                    b ? (h.uniform3f(c.fogColor, b.color.r, b.color.g, b.color.b),
                    b instanceof r.Fog ? (h.uniform1f(c.fogNear, b.near),
                    h.uniform1f(c.fogFar, b.far),
                    h.uniform1i(c.fogType, 1),
                    g = 1,
                    y = 1) : b instanceof r.FogExp2 && (h.uniform1f(c.fogDensity, b.density),
                    h.uniform1i(c.fogType, 2),
                    g = 2,
                    y = 2)) : (h.uniform1i(c.fogType, 0),
                    g = 0,
                    y = 0);
                    for (var x = 0, w = t.length; w > x; x++) {
                        var _ = t[x];
                        _._modelViewMatrix.multiplyMatrices(v.matrixWorldInverse, _.matrixWorld),
                        _.z = -_._modelViewMatrix.elements[14]
                    }
                    t.sort(i);
                    for (var S = [], x = 0, w = t.length; w > x; x++) {
                        var _ = t[x]
                          , M = _.material;
                        h.uniform1f(c.alphaTest, M.alphaTest),
                        h.uniformMatrix4fv(c.modelViewMatrix, !1, _._modelViewMatrix.elements),
                        _.matrixWorld.decompose(d, f, p),
                        S[0] = p.x,
                        S[1] = p.y;
                        var C = 0;
                        n.fog && M.fog && (C = y),
                        g !== C && (h.uniform1i(c.fogType, C),
                        g = C),
                        null !== M.map ? (h.uniform2f(c.uvOffset, M.map.offset.x, M.map.offset.y),
                        h.uniform2f(c.uvScale, M.map.repeat.x, M.map.repeat.y)) : (h.uniform2f(c.uvOffset, 0, 0),
                        h.uniform2f(c.uvScale, 1, 1)),
                        h.uniform1f(c.opacity, M.opacity),
                        h.uniform3f(c.color, M.color.r, M.color.g, M.color.b),
                        h.uniform1f(c.rotation, M.rotation),
                        h.uniform2fv(c.scale, S),
                        e.state.setBlending(M.blending, M.blendEquation, M.blendSrc, M.blendDst),
                        e.state.setDepthTest(M.depthTest),
                        e.state.setDepthWrite(M.depthWrite),
                        M.map && M.map.image && M.map.image.width ? e.setTexture(M.map, 0) : e.setTexture(u, 0),
                        h.drawElements(h.TRIANGLES, 6, h.UNSIGNED_SHORT, 0)
                    }
                    h.enable(h.CULL_FACE),
                    e.resetGLState()
                }
            }
        }
        ,
        r.GeometryUtils = {
            merge: function(e, t, n) {
                r.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
                var i;
                t instanceof r.Mesh && (t.matrixAutoUpdate && t.updateMatrix(),
                i = t.matrix,
                t = t.geometry),
                e.merge(t, i, n)
            },
            center: function(e) {
                return r.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),
                e.center()
            }
        },
        r.ImageUtils = {
            crossOrigin: void 0,
            loadTexture: function(e, t, n, i) {
                var o = new r.ImageLoader;
                o.crossOrigin = this.crossOrigin;
                var a = new r.Texture(void 0,t);
                return o.load(e, function(e) {
                    a.image = e,
                    a.needsUpdate = !0,
                    n && n(a)
                }, void 0, function(e) {
                    i && i(e)
                }),
                a.sourceFile = e,
                a
            },
            loadTextureCube: function(e, t, n, i) {
                var o = []
                  , a = new r.ImageLoader;
                a.crossOrigin = this.crossOrigin;
                var s = new r.CubeTexture(o,t);
                s.flipY = !1;
                for (var l = 0, c = function(t) {
                    a.load(e[t], function(e) {
                        s.images[t] = e,
                        l += 1,
                        6 === l && (s.needsUpdate = !0,
                        n && n(s))
                    }, void 0, i)
                }, u = 0, h = e.length; h > u; ++u)
                    c(u);
                return s
            },
            loadCompressedTexture: function() {
                r.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
            },
            loadCompressedTextureCube: function() {
                r.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
            },
            getNormalMap: function(e, t) {
                var n = function(e, t) {
                    return [e[1] * t[2] - e[2] * t[1], e[2] * t[0] - e[0] * t[2], e[0] * t[1] - e[1] * t[0]]
                }
                  , i = function(e, t) {
                    return [e[0] - t[0], e[1] - t[1], e[2] - t[2]]
                }
                  , r = function(e) {
                    var t = Math.sqrt(e[0] * e[0] + e[1] * e[1] + e[2] * e[2]);
                    return [e[0] / t, e[1] / t, e[2] / t]
                };
                t = 1 | t;
                var o = e.width
                  , a = e.height
                  , s = document.createElement("canvas");
                s.width = o,
                s.height = a;
                var l = s.getContext("2d");
                l.drawImage(e, 0, 0);
                for (var c = l.getImageData(0, 0, o, a).data, u = l.createImageData(o, a), h = u.data, d = 0; o > d; d++)
                    for (var f = 0; a > f; f++) {
                        var p = 0 > f - 1 ? 0 : f - 1
                          , m = f + 1 > a - 1 ? a - 1 : f + 1
                          , v = 0 > d - 1 ? 0 : d - 1
                          , g = d + 1 > o - 1 ? o - 1 : d + 1
                          , y = []
                          , b = [0, 0, c[4 * (f * o + d)] / 255 * t];
                        y.push([-1, 0, c[4 * (f * o + v)] / 255 * t]),
                        y.push([-1, -1, c[4 * (p * o + v)] / 255 * t]),
                        y.push([0, -1, c[4 * (p * o + d)] / 255 * t]),
                        y.push([1, -1, c[4 * (p * o + g)] / 255 * t]),
                        y.push([1, 0, c[4 * (f * o + g)] / 255 * t]),
                        y.push([1, 1, c[4 * (m * o + g)] / 255 * t]),
                        y.push([0, 1, c[4 * (m * o + d)] / 255 * t]),
                        y.push([-1, 1, c[4 * (m * o + v)] / 255 * t]);
                        for (var x = [], w = y.length, _ = 0; w > _; _++) {
                            var S = y[_]
                              , M = y[(_ + 1) % w];
                            S = i(S, b),
                            M = i(M, b),
                            x.push(r(n(S, M)))
                        }
                        for (var C = [0, 0, 0], _ = 0; _ < x.length; _++)
                            C[0] += x[_][0],
                            C[1] += x[_][1],
                            C[2] += x[_][2];
                        C[0] /= x.length,
                        C[1] /= x.length,
                        C[2] /= x.length;
                        var T = 4 * (f * o + d);
                        h[T] = (C[0] + 1) / 2 * 255 | 0,
                        h[T + 1] = (C[1] + 1) / 2 * 255 | 0,
                        h[T + 2] = 255 * C[2] | 0,
                        h[T + 3] = 255
                    }
                return l.putImageData(u, 0, 0),
                s
            },
            generateDataTexture: function(e, t, n) {
                for (var i = e * t, o = new Uint8Array(3 * i), a = Math.floor(255 * n.r), s = Math.floor(255 * n.g), l = Math.floor(255 * n.b), c = 0; i > c; c++)
                    o[3 * c] = a,
                    o[3 * c + 1] = s,
                    o[3 * c + 2] = l;
                var u = new r.DataTexture(o,e,t,r.RGBFormat);
                return u.needsUpdate = !0,
                u
            }
        },
        r.SceneUtils = {
            createMultiMaterialObject: function(e, t) {
                for (var n = new r.Object3D, i = 0, o = t.length; o > i; i++)
                    n.add(new r.Mesh(e,t[i]));
                return n
            },
            detach: function(e, t, n) {
                e.applyMatrix(t.matrixWorld),
                t.remove(e),
                n.add(e)
            },
            attach: function(e, t, n) {
                var i = new r.Matrix4;
                i.getInverse(n.matrixWorld),
                e.applyMatrix(i),
                t.remove(e),
                n.add(e)
            }
        },
        r.FontUtils = {
            faces: {},
            face: "helvetiker",
            weight: "normal",
            style: "normal",
            size: 150,
            divisions: 10,
            getFace: function() {
                try {
                    return this.faces[this.face][this.weight][this.style]
                } catch (e) {
                    throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                }
            },
            loadFace: function(e) {
                var t = e.familyName.toLowerCase()
                  , n = this;
                return n.faces[t] = n.faces[t] || {},
                n.faces[t][e.cssFontWeight] = n.faces[t][e.cssFontWeight] || {},
                n.faces[t][e.cssFontWeight][e.cssFontStyle] = e,
                n.faces[t][e.cssFontWeight][e.cssFontStyle] = e,
                e
            },
            drawText: function(e) {
                var t, n = this.getFace(), i = this.size / n.resolution, o = 0, a = String(e).split(""), s = a.length, l = [];
                for (t = 0; s > t; t++) {
                    var c = new r.Path
                      , u = this.extractGlyphPoints(a[t], n, i, o, c);
                    o += u.offset,
                    l.push(u.path)
                }
                var h = o / 2;
                return {
                    paths: l,
                    offset: h
                }
            },
            extractGlyphPoints: function(e, t, n, i, o) {
                var a, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w, _, S, M, C = [], T = t.glyphs[e] || t.glyphs["?"];
                if (T) {
                    if (T.o)
                        for (c = T._cachedOutline || (T._cachedOutline = T.o.split(" ")),
                        h = c.length,
                        d = n,
                        f = n,
                        a = 0; h > a; )
                            switch (u = c[a++]) {
                            case "m":
                                p = c[a++] * d + i,
                                m = c[a++] * f,
                                o.moveTo(p, m);
                                break;
                            case "l":
                                p = c[a++] * d + i,
                                m = c[a++] * f,
                                o.lineTo(p, m);
                                break;
                            case "q":
                                if (v = c[a++] * d + i,
                                g = c[a++] * f,
                                x = c[a++] * d + i,
                                w = c[a++] * f,
                                o.quadraticCurveTo(x, w, v, g),
                                M = C[C.length - 1])
                                    for (y = M.x,
                                    b = M.y,
                                    s = 1,
                                    l = this.divisions; l >= s; s++) {
                                        var E = s / l;
                                        r.Shape.Utils.b2(E, y, x, v),
                                        r.Shape.Utils.b2(E, b, w, g)
                                    }
                                break;
                            case "b":
                                if (v = c[a++] * d + i,
                                g = c[a++] * f,
                                x = c[a++] * d + i,
                                w = c[a++] * f,
                                _ = c[a++] * d + i,
                                S = c[a++] * f,
                                o.bezierCurveTo(x, w, _, S, v, g),
                                M = C[C.length - 1])
                                    for (y = M.x,
                                    b = M.y,
                                    s = 1,
                                    l = this.divisions; l >= s; s++) {
                                        var E = s / l;
                                        r.Shape.Utils.b3(E, y, x, _, v),
                                        r.Shape.Utils.b3(E, b, w, S, g)
                                    }
                            }
                    return {
                        offset: T.ha * n,
                        path: o
                    }
                }
            }
        },
        r.FontUtils.generateShapes = function(e, t) {
            t = t || {};
            var n = void 0 !== t.size ? t.size : 100
              , i = void 0 !== t.curveSegments ? t.curveSegments : 4
              , o = void 0 !== t.font ? t.font : "helvetiker"
              , a = void 0 !== t.weight ? t.weight : "normal"
              , s = void 0 !== t.style ? t.style : "normal";
            r.FontUtils.size = n,
            r.FontUtils.divisions = i,
            r.FontUtils.face = o,
            r.FontUtils.weight = a,
            r.FontUtils.style = s;
            for (var l = r.FontUtils.drawText(e), c = l.paths, u = [], h = 0, d = c.length; d > h; h++)
                Array.prototype.push.apply(u, c[h].toShapes());
            return u
        }
        ,
        function(e) {
            var t = 1e-10
              , n = function(e, t) {
                var n = e.length;
                if (3 > n)
                    return null;
                var a, s, l, c = [], u = [], h = [];
                if (i(e) > 0)
                    for (s = 0; n > s; s++)
                        u[s] = s;
                else
                    for (s = 0; n > s; s++)
                        u[s] = n - 1 - s;
                var d = n
                  , f = 2 * d;
                for (s = d - 1; d > 2; ) {
                    if (f-- <= 0)
                        return r.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"),
                        t ? h : c;
                    if (a = s,
                    a >= d && (a = 0),
                    s = a + 1,
                    s >= d && (s = 0),
                    l = s + 1,
                    l >= d && (l = 0),
                    o(e, a, s, l, d, u)) {
                        var p, m, v, g, y;
                        for (p = u[a],
                        m = u[s],
                        v = u[l],
                        c.push([e[p], e[m], e[v]]),
                        h.push([u[a], u[s], u[l]]),
                        g = s,
                        y = s + 1; d > y; g++,
                        y++)
                            u[g] = u[y];
                        d--,
                        f = 2 * d
                    }
                }
                return t ? h : c
            }
              , i = function(e) {
                for (var t = e.length, n = 0, i = t - 1, r = 0; t > r; i = r++)
                    n += e[i].x * e[r].y - e[r].x * e[i].y;
                return .5 * n
            }
              , o = function(e, n, i, r, o, a) {
                var s, l, c, u, h, d, f, p, m;
                if (l = e[a[n]].x,
                c = e[a[n]].y,
                u = e[a[i]].x,
                h = e[a[i]].y,
                d = e[a[r]].x,
                f = e[a[r]].y,
                t > (u - l) * (f - c) - (h - c) * (d - l))
                    return !1;
                var v, g, y, b, x, w, _, S, M, C, T, E, k, A, P;
                for (v = d - u,
                g = f - h,
                y = l - d,
                b = c - f,
                x = u - l,
                w = h - c,
                s = 0; o > s; s++)
                    if (p = e[a[s]].x,
                    m = e[a[s]].y,
                    !(p === l && m === c || p === u && m === h || p === d && m === f) && (_ = p - l,
                    S = m - c,
                    M = p - u,
                    C = m - h,
                    T = p - d,
                    E = m - f,
                    P = v * C - g * M,
                    k = x * S - w * _,
                    A = y * E - b * T,
                    P >= -t && A >= -t && k >= -t))
                        return !1;
                return !0
            };
            return e.Triangulate = n,
            e.Triangulate.area = i,
            e
        }(r.FontUtils),
        i._typeface_js = {
            faces: r.FontUtils.faces,
            loadFace: r.FontUtils.loadFace
        },
        r.typeface_js = i._typeface_js,
        r.Audio = function(e) {
            r.Object3D.call(this),
            this.type = "Audio",
            this.context = e.context,
            this.source = this.context.createBufferSource(),
            this.source.onended = this.onEnded.bind(this),
            this.gain = this.context.createGain(),
            this.gain.connect(this.context.destination),
            this.panner = this.context.createPanner(),
            this.panner.connect(this.gain),
            this.autoplay = !1,
            this.startTime = 0,
            this.isPlaying = !1
        }
        ,
        r.Audio.prototype = Object.create(r.Object3D.prototype),
        r.Audio.prototype.constructor = r.Audio,
        r.Audio.prototype.load = function(e) {
            var t = this
              , n = new XMLHttpRequest;
            return n.open("GET", e, !0),
            n.responseType = "arraybuffer",
            n.onload = function(e) {
                t.context.decodeAudioData(this.response, function(e) {
                    t.source.buffer = e,
                    t.autoplay && t.play()
                })
            }
            ,
            n.send(),
            this
        }
        ,
        r.Audio.prototype.play = function() {
            if (this.isPlaying === !0)
                return void r.warn("THREE.Audio: Audio is already playing.");
            var e = this.context.createBufferSource();
            e.buffer = this.source.buffer,
            e.loop = this.source.loop,
            e.onended = this.source.onended,
            e.connect(this.panner),
            e.start(0, this.startTime),
            this.isPlaying = !0,
            this.source = e
        }
        ,
        r.Audio.prototype.pause = function() {
            this.source.stop(),
            this.startTime = this.context.currentTime
        }
        ,
        r.Audio.prototype.stop = function() {
            this.source.stop(),
            this.startTime = 0
        }
        ,
        r.Audio.prototype.onEnded = function() {
            this.isPlaying = !1
        }
        ,
        r.Audio.prototype.setLoop = function(e) {
            this.source.loop = e
        }
        ,
        r.Audio.prototype.setRefDistance = function(e) {
            this.panner.refDistance = e
        }
        ,
        r.Audio.prototype.setRolloffFactor = function(e) {
            this.panner.rolloffFactor = e
        }
        ,
        r.Audio.prototype.setVolume = function(e) {
            this.gain.gain.value = e
        }
        ,
        r.Audio.prototype.updateMatrixWorld = function() {
            var e = new r.Vector3;
            return function(t) {
                r.Object3D.prototype.updateMatrixWorld.call(this, t),
                e.setFromMatrixPosition(this.matrixWorld),
                this.panner.setPosition(e.x, e.y, e.z)
            }
        }(),
        r.AudioListener = function() {
            r.Object3D.call(this),
            this.type = "AudioListener",
            this.context = new (window.AudioContext || window.webkitAudioContext)
        }
        ,
        r.AudioListener.prototype = Object.create(r.Object3D.prototype),
        r.AudioListener.prototype.constructor = r.AudioListener,
        r.AudioListener.prototype.updateMatrixWorld = function() {
            var e = new r.Vector3
              , t = new r.Quaternion
              , n = new r.Vector3
              , i = new r.Vector3
              , o = new r.Vector3
              , a = new r.Vector3;
            return function(s) {
                r.Object3D.prototype.updateMatrixWorld.call(this, s);
                var l = this.context.listener
                  , c = this.up;
                this.matrixWorld.decompose(e, t, n),
                i.set(0, 0, -1).applyQuaternion(t),
                o.subVectors(e, a),
                l.setPosition(e.x, e.y, e.z),
                l.setOrientation(i.x, i.y, i.z, c.x, c.y, c.z),
                l.setVelocity(o.x, o.y, o.z),
                a.copy(e)
            }
        }(),
        r.Curve = function() {}
        ,
        r.Curve.prototype.getPoint = function(e) {
            return r.warn("THREE.Curve: Warning, getPoint() not implemented!"),
            null
        }
        ,
        r.Curve.prototype.getPointAt = function(e) {
            var t = this.getUtoTmapping(e);
            return this.getPoint(t)
        }
        ,
        r.Curve.prototype.getPoints = function(e) {
            e || (e = 5);
            var t, n = [];
            for (t = 0; e >= t; t++)
                n.push(this.getPoint(t / e));
            return n
        }
        ,
        r.Curve.prototype.getSpacedPoints = function(e) {
            e || (e = 5);
            var t, n = [];
            for (t = 0; e >= t; t++)
                n.push(this.getPointAt(t / e));
            return n
        }
        ,
        r.Curve.prototype.getLength = function() {
            var e = this.getLengths();
            return e[e.length - 1]
        }
        ,
        r.Curve.prototype.getLengths = function(e) {
            if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200),
            this.cacheArcLengths && this.cacheArcLengths.length == e + 1 && !this.needsUpdate)
                return this.cacheArcLengths;
            this.needsUpdate = !1;
            var t, n, i = [], r = this.getPoint(0), o = 0;
            for (i.push(0),
            n = 1; e >= n; n++)
                t = this.getPoint(n / e),
                o += t.distanceTo(r),
                i.push(o),
                r = t;
            return this.cacheArcLengths = i,
            i
        }
        ,
        r.Curve.prototype.updateArcLengths = function() {
            this.needsUpdate = !0,
            this.getLengths()
        }
        ,
        r.Curve.prototype.getUtoTmapping = function(e, t) {
            var n, i = this.getLengths(), r = 0, o = i.length;
            n = t ? t : e * i[o - 1];
            for (var a, s = 0, l = o - 1; l >= s; )
                if (r = Math.floor(s + (l - s) / 2),
                a = i[r] - n,
                0 > a)
                    s = r + 1;
                else {
                    if (!(a > 0)) {
                        l = r;
                        break
                    }
                    l = r - 1
                }
            if (r = l,
            i[r] == n) {
                var c = r / (o - 1);
                return c
            }
            var u = i[r]
              , h = i[r + 1]
              , d = h - u
              , f = (n - u) / d
              , c = (r + f) / (o - 1);
            return c
        }
        ,
        r.Curve.prototype.getTangent = function(e) {
            var t = 1e-4
              , n = e - t
              , i = e + t;
            0 > n && (n = 0),
            i > 1 && (i = 1);
            var r = this.getPoint(n)
              , o = this.getPoint(i)
              , a = o.clone().sub(r);
            return a.normalize()
        }
        ,
        r.Curve.prototype.getTangentAt = function(e) {
            var t = this.getUtoTmapping(e);
            return this.getTangent(t)
        }
        ,
        r.Curve.Utils = {
            tangentQuadraticBezier: function(e, t, n, i) {
                return 2 * (1 - e) * (n - t) + 2 * e * (i - n)
            },
            tangentCubicBezier: function(e, t, n, i, r) {
                return -3 * t * (1 - e) * (1 - e) + 3 * n * (1 - e) * (1 - e) - 6 * e * n * (1 - e) + 6 * e * i * (1 - e) - 3 * e * e * i + 3 * e * e * r
            },
            tangentSpline: function(e, t, n, i, r) {
                var o = 6 * e * e - 6 * e
                  , a = 3 * e * e - 4 * e + 1
                  , s = -6 * e * e + 6 * e
                  , l = 3 * e * e - 2 * e;
                return o + a + s + l
            },
            interpolate: function(e, t, n, i, r) {
                var o = .5 * (n - e)
                  , a = .5 * (i - t)
                  , s = r * r
                  , l = r * s;
                return (2 * t - 2 * n + o + a) * l + (-3 * t + 3 * n - 2 * o - a) * s + o * r + t
            }
        },
        r.Curve.create = function(e, t) {
            return e.prototype = Object.create(r.Curve.prototype),
            e.prototype.constructor = e,
            e.prototype.getPoint = t,
            e
        }
        ,
        r.CurvePath = function() {
            this.curves = [],
            this.bends = [],
            this.autoClose = !1
        }
        ,
        r.CurvePath.prototype = Object.create(r.Curve.prototype),
        r.CurvePath.prototype.constructor = r.CurvePath,
        r.CurvePath.prototype.add = function(e) {
            this.curves.push(e)
        }
        ,
        r.CurvePath.prototype.checkConnection = function() {}
        ,
        r.CurvePath.prototype.closePath = function() {
            var e = this.curves[0].getPoint(0)
              , t = this.curves[this.curves.length - 1].getPoint(1);
            e.equals(t) || this.curves.push(new r.LineCurve(t,e))
        }
        ,
        r.CurvePath.prototype.getPoint = function(e) {
            for (var t, n, i = e * this.getLength(), r = this.getCurveLengths(), o = 0; o < r.length; ) {
                if (r[o] >= i) {
                    t = r[o] - i,
                    n = this.curves[o];
                    var a = 1 - t / n.getLength();
                    return n.getPointAt(a)
                }
                o++
            }
            return null
        }
        ,
        r.CurvePath.prototype.getLength = function() {
            var e = this.getCurveLengths();
            return e[e.length - 1]
        }
        ,
        r.CurvePath.prototype.getCurveLengths = function() {
            if (this.cacheLengths && this.cacheLengths.length == this.curves.length)
                return this.cacheLengths;
            var e, t = [], n = 0, i = this.curves.length;
            for (e = 0; i > e; e++)
                n += this.curves[e].getLength(),
                t.push(n);
            return this.cacheLengths = t,
            t
        }
        ,
        r.CurvePath.prototype.getBoundingBox = function() {
            var e, t, n, i, o, a, s = this.getPoints();
            e = t = Number.NEGATIVE_INFINITY,
            i = o = Number.POSITIVE_INFINITY;
            var l, c, u, h, d = s[0]instanceof r.Vector3;
            for (h = d ? new r.Vector3 : new r.Vector2,
            c = 0,
            u = s.length; u > c; c++)
                l = s[c],
                l.x > e ? e = l.x : l.x < i && (i = l.x),
                l.y > t ? t = l.y : l.y < o && (o = l.y),
                d && (l.z > n ? n = l.z : l.z < a && (a = l.z)),
                h.add(l);
            var f = {
                minX: i,
                minY: o,
                maxX: e,
                maxY: t
            };
            return d && (f.maxZ = n,
            f.minZ = a),
            f
        }
        ,
        r.CurvePath.prototype.createPointsGeometry = function(e) {
            var t = this.getPoints(e, !0);
            return this.createGeometry(t)
        }
        ,
        r.CurvePath.prototype.createSpacedPointsGeometry = function(e) {
            var t = this.getSpacedPoints(e, !0);
            return this.createGeometry(t)
        }
        ,
        r.CurvePath.prototype.createGeometry = function(e) {
            for (var t = new r.Geometry, n = 0; n < e.length; n++)
                t.vertices.push(new r.Vector3(e[n].x,e[n].y,e[n].z || 0));
            return t
        }
        ,
        r.CurvePath.prototype.addWrapPath = function(e) {
            this.bends.push(e)
        }
        ,
        r.CurvePath.prototype.getTransformedPoints = function(e, t) {
            var n, i, r = this.getPoints(e);
            for (t || (t = this.bends),
            n = 0,
            i = t.length; i > n; n++)
                r = this.getWrapPoints(r, t[n]);
            return r
        }
        ,
        r.CurvePath.prototype.getTransformedSpacedPoints = function(e, t) {
            var n, i, r = this.getSpacedPoints(e);
            for (t || (t = this.bends),
            n = 0,
            i = t.length; i > n; n++)
                r = this.getWrapPoints(r, t[n]);
            return r
        }
        ,
        r.CurvePath.prototype.getWrapPoints = function(e, t) {
            var n, i, r, o, a, s, l = this.getBoundingBox();
            for (n = 0,
            i = e.length; i > n; n++) {
                r = e[n],
                o = r.x,
                a = r.y,
                s = o / l.maxX,
                s = t.getUtoTmapping(s, o);
                var c = t.getPoint(s)
                  , u = t.getTangent(s);
                u.set(-u.y, u.x).multiplyScalar(a),
                r.x = c.x + u.x,
                r.y = c.y + u.y
            }
            return e
        }
        ,
        r.Gyroscope = function() {
            r.Object3D.call(this)
        }
        ,
        r.Gyroscope.prototype = Object.create(r.Object3D.prototype),
        r.Gyroscope.prototype.constructor = r.Gyroscope,
        r.Gyroscope.prototype.updateMatrixWorld = function() {
            var e = new r.Vector3
              , t = new r.Quaternion
              , n = new r.Vector3
              , i = new r.Vector3
              , o = new r.Quaternion
              , a = new r.Vector3;
            return function(r) {
                this.matrixAutoUpdate && this.updateMatrix(),
                (this.matrixWorldNeedsUpdate || r) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix),
                this.matrixWorld.decompose(i, o, a),
                this.matrix.decompose(e, t, n),
                this.matrixWorld.compose(i, t, a)) : this.matrixWorld.copy(this.matrix),
                this.matrixWorldNeedsUpdate = !1,
                r = !0);
                for (var s = 0, l = this.children.length; l > s; s++)
                    this.children[s].updateMatrixWorld(r)
            }
        }(),
        r.Path = function(e) {
            r.CurvePath.call(this),
            this.actions = [],
            e && this.fromPoints(e)
        }
        ,
        r.Path.prototype = Object.create(r.CurvePath.prototype),
        r.Path.prototype.constructor = r.Path,
        r.PathActions = {
            MOVE_TO: "moveTo",
            LINE_TO: "lineTo",
            QUADRATIC_CURVE_TO: "quadraticCurveTo",
            BEZIER_CURVE_TO: "bezierCurveTo",
            CSPLINE_THRU: "splineThru",
            ARC: "arc",
            ELLIPSE: "ellipse"
        },
        r.Path.prototype.fromPoints = function(e) {
            this.moveTo(e[0].x, e[0].y);
            for (var t = 1, n = e.length; n > t; t++)
                this.lineTo(e[t].x, e[t].y)
        }
        ,
        r.Path.prototype.moveTo = function(e, t) {
            var n = Array.prototype.slice.call(arguments);
            this.actions.push({
                action: r.PathActions.MOVE_TO,
                args: n
            })
        }
        ,
        r.Path.prototype.lineTo = function(e, t) {
            var n = Array.prototype.slice.call(arguments)
              , i = this.actions[this.actions.length - 1].args
              , o = i[i.length - 2]
              , a = i[i.length - 1]
              , s = new r.LineCurve(new r.Vector2(o,a),new r.Vector2(e,t));
            this.curves.push(s),
            this.actions.push({
                action: r.PathActions.LINE_TO,
                args: n
            })
        }
        ,
        r.Path.prototype.quadraticCurveTo = function(e, t, n, i) {
            var o = Array.prototype.slice.call(arguments)
              , a = this.actions[this.actions.length - 1].args
              , s = a[a.length - 2]
              , l = a[a.length - 1]
              , c = new r.QuadraticBezierCurve(new r.Vector2(s,l),new r.Vector2(e,t),new r.Vector2(n,i));
            this.curves.push(c),
            this.actions.push({
                action: r.PathActions.QUADRATIC_CURVE_TO,
                args: o
            })
        }
        ,
        r.Path.prototype.bezierCurveTo = function(e, t, n, i, o, a) {
            var s = Array.prototype.slice.call(arguments)
              , l = this.actions[this.actions.length - 1].args
              , c = l[l.length - 2]
              , u = l[l.length - 1]
              , h = new r.CubicBezierCurve(new r.Vector2(c,u),new r.Vector2(e,t),new r.Vector2(n,i),new r.Vector2(o,a));
            this.curves.push(h),
            this.actions.push({
                action: r.PathActions.BEZIER_CURVE_TO,
                args: s
            })
        }
        ,
        r.Path.prototype.splineThru = function(e) {
            var t = Array.prototype.slice.call(arguments)
              , n = this.actions[this.actions.length - 1].args
              , i = n[n.length - 2]
              , o = n[n.length - 1]
              , a = [new r.Vector2(i,o)];
            Array.prototype.push.apply(a, e);
            var s = new r.SplineCurve(a);
            this.curves.push(s),
            this.actions.push({
                action: r.PathActions.CSPLINE_THRU,
                args: t
            })
        }
        ,
        r.Path.prototype.arc = function(e, t, n, i, r, o) {
            var a = this.actions[this.actions.length - 1].args
              , s = a[a.length - 2]
              , l = a[a.length - 1];
            this.absarc(e + s, t + l, n, i, r, o)
        }
        ,
        r.Path.prototype.absarc = function(e, t, n, i, r, o) {
            this.absellipse(e, t, n, n, i, r, o)
        }
        ,
        r.Path.prototype.ellipse = function(e, t, n, i, r, o, a) {
            var s = this.actions[this.actions.length - 1].args
              , l = s[s.length - 2]
              , c = s[s.length - 1];
            this.absellipse(e + l, t + c, n, i, r, o, a)
        }
        ,
        r.Path.prototype.absellipse = function(e, t, n, i, o, a, s) {
            var l = Array.prototype.slice.call(arguments)
              , c = new r.EllipseCurve(e,t,n,i,o,a,s);
            this.curves.push(c);
            var u = c.getPoint(1);
            l.push(u.x),
            l.push(u.y),
            this.actions.push({
                action: r.PathActions.ELLIPSE,
                args: l
            })
        }
        ,
        r.Path.prototype.getSpacedPoints = function(e, t) {
            e || (e = 40);
            for (var n = [], i = 0; e > i; i++)
                n.push(this.getPoint(i / e));
            return n
        }
        ,
        r.Path.prototype.getPoints = function(e, t) {
            if (this.useSpacedPoints)
                return console.log("tata"),
                this.getSpacedPoints(e, t);
            e = e || 12;
            var n, i, o, a, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w = [];
            for (n = 0,
            i = this.actions.length; i > n; n++)
                switch (o = this.actions[n],
                a = o.action,
                s = o.args,
                a) {
                case r.PathActions.MOVE_TO:
                    w.push(new r.Vector2(s[0],s[1]));
                    break;
                case r.PathActions.LINE_TO:
                    w.push(new r.Vector2(s[0],s[1]));
                    break;
                case r.PathActions.QUADRATIC_CURVE_TO:
                    for (l = s[2],
                    c = s[3],
                    d = s[0],
                    f = s[1],
                    w.length > 0 ? (v = w[w.length - 1],
                    p = v.x,
                    m = v.y) : (v = this.actions[n - 1].args,
                    p = v[v.length - 2],
                    m = v[v.length - 1]),
                    g = 1; e >= g; g++)
                        y = g / e,
                        b = r.Shape.Utils.b2(y, p, d, l),
                        x = r.Shape.Utils.b2(y, m, f, c),
                        w.push(new r.Vector2(b,x));
                    break;
                case r.PathActions.BEZIER_CURVE_TO:
                    for (l = s[4],
                    c = s[5],
                    d = s[0],
                    f = s[1],
                    u = s[2],
                    h = s[3],
                    w.length > 0 ? (v = w[w.length - 1],
                    p = v.x,
                    m = v.y) : (v = this.actions[n - 1].args,
                    p = v[v.length - 2],
                    m = v[v.length - 1]),
                    g = 1; e >= g; g++)
                        y = g / e,
                        b = r.Shape.Utils.b3(y, p, d, u, l),
                        x = r.Shape.Utils.b3(y, m, f, h, c),
                        w.push(new r.Vector2(b,x));
                    break;
                case r.PathActions.CSPLINE_THRU:
                    v = this.actions[n - 1].args;
                    var _ = new r.Vector2(v[v.length - 2],v[v.length - 1])
                      , S = [_]
                      , M = e * s[0].length;
                    S = S.concat(s[0]);
                    var C = new r.SplineCurve(S);
                    for (g = 1; M >= g; g++)
                        w.push(C.getPointAt(g / M));
                    break;
                case r.PathActions.ARC:
                    var T, E = s[0], k = s[1], A = s[2], P = s[3], L = s[4], O = !!s[5], R = L - P, F = 2 * e;
                    for (g = 1; F >= g; g++)
                        y = g / F,
                        O || (y = 1 - y),
                        T = P + y * R,
                        b = E + A * Math.cos(T),
                        x = k + A * Math.sin(T),
                        w.push(new r.Vector2(b,x));
                    break;
                case r.PathActions.ELLIPSE:
                    var T, E = s[0], k = s[1], B = s[2], D = s[3], P = s[4], L = s[5], O = !!s[6], R = L - P, F = 2 * e;
                    for (g = 1; F >= g; g++)
                        y = g / F,
                        O || (y = 1 - y),
                        T = P + y * R,
                        b = E + B * Math.cos(T),
                        x = k + D * Math.sin(T),
                        w.push(new r.Vector2(b,x))
                }
            var I = w[w.length - 1]
              , N = 1e-10;
            return Math.abs(I.x - w[0].x) < N && Math.abs(I.y - w[0].y) < N && w.splice(w.length - 1, 1),
            t && w.push(w[0]),
            w
        }
        ,
        r.Path.prototype.toShapes = function(e, t) {
            function n(e) {
                var t, n, i, o, a, s = [], l = new r.Path;
                for (t = 0,
                n = e.length; n > t; t++)
                    i = e[t],
                    a = i.args,
                    o = i.action,
                    o == r.PathActions.MOVE_TO && 0 != l.actions.length && (s.push(l),
                    l = new r.Path),
                    l[o].apply(l, a);
                return 0 != l.actions.length && s.push(l),
                s
            }
            function i(e) {
                for (var t = [], n = 0, i = e.length; i > n; n++) {
                    var o = e[n]
                      , a = new r.Shape;
                    a.actions = o.actions,
                    a.curves = o.curves,
                    t.push(a)
                }
                return t
            }
            function o(e, t) {
                for (var n = 1e-10, i = t.length, r = !1, o = i - 1, a = 0; i > a; o = a++) {
                    var s = t[o]
                      , l = t[a]
                      , c = l.x - s.x
                      , u = l.y - s.y;
                    if (Math.abs(u) > n) {
                        if (0 > u && (s = t[a],
                        c = -c,
                        l = t[o],
                        u = -u),
                        e.y < s.y || e.y > l.y)
                            continue;
                        if (e.y == s.y) {
                            if (e.x == s.x)
                                return !0
                        } else {
                            var h = u * (e.x - s.x) - c * (e.y - s.y);
                            if (0 == h)
                                return !0;
                            if (0 > h)
                                continue;
                            r = !r
                        }
                    } else {
                        if (e.y != s.y)
                            continue;
                        if (l.x <= e.x && e.x <= s.x || s.x <= e.x && e.x <= l.x)
                            return !0
                    }
                }
                return r
            }
            var a = n(this.actions);
            if (0 == a.length)
                return [];
            if (t === !0)
                return i(a);
            var s, l, c, u = [];
            if (1 == a.length)
                return l = a[0],
                c = new r.Shape,
                c.actions = l.actions,
                c.curves = l.curves,
                u.push(c),
                u;
            var h = !r.Shape.Utils.isClockWise(a[0].getPoints());
            h = e ? !h : h;
            var d, f = [], p = [], m = [], v = 0;
            p[v] = void 0,
            m[v] = [];
            var g, y;
            for (g = 0,
            y = a.length; y > g; g++)
                l = a[g],
                d = l.getPoints(),
                s = r.Shape.Utils.isClockWise(d),
                s = e ? !s : s,
                s ? (!h && p[v] && v++,
                p[v] = {
                    s: new r.Shape,
                    p: d
                },
                p[v].s.actions = l.actions,
                p[v].s.curves = l.curves,
                h && v++,
                m[v] = []) : m[v].push({
                    h: l,
                    p: d[0]
                });
            if (!p[0])
                return i(a);
            if (p.length > 1) {
                for (var b = !1, x = [], w = 0, _ = p.length; _ > w; w++)
                    f[w] = [];
                for (var w = 0, _ = p.length; _ > w; w++)
                    for (var S = m[w], M = 0; M < S.length; M++) {
                        for (var C = S[M], T = !0, E = 0; E < p.length; E++)
                            o(C.p, p[E].p) && (w != E && x.push({
                                froms: w,
                                tos: E,
                                hole: M
                            }),
                            T ? (T = !1,
                            f[E].push(C)) : b = !0);
                        T && f[w].push(C)
                    }
                x.length > 0 && (b || (m = f))
            }
            var k, A, P;
            for (g = 0,
            y = p.length; y > g; g++)
                for (c = p[g].s,
                u.push(c),
                k = m[g],
                A = 0,
                P = k.length; P > A; A++)
                    c.holes.push(k[A].h);
            return u
        }
        ,
        r.Shape = function() {
            r.Path.apply(this, arguments),
            this.holes = []
        }
        ,
        r.Shape.prototype = Object.create(r.Path.prototype),
        r.Shape.prototype.constructor = r.Shape,
        r.Shape.prototype.extrude = function(e) {
            var t = new r.ExtrudeGeometry(this,e);
            return t
        }
        ,
        r.Shape.prototype.makeGeometry = function(e) {
            var t = new r.ShapeGeometry(this,e);
            return t
        }
        ,
        r.Shape.prototype.getPointsHoles = function(e) {
            var t, n = this.holes.length, i = [];
            for (t = 0; n > t; t++)
                i[t] = this.holes[t].getTransformedPoints(e, this.bends);
            return i
        }
        ,
        r.Shape.prototype.getSpacedPointsHoles = function(e) {
            var t, n = this.holes.length, i = [];
            for (t = 0; n > t; t++)
                i[t] = this.holes[t].getTransformedSpacedPoints(e, this.bends);
            return i
        }
        ,
        r.Shape.prototype.extractAllPoints = function(e) {
            return {
                shape: this.getTransformedPoints(e),
                holes: this.getPointsHoles(e)
            }
        }
        ,
        r.Shape.prototype.extractPoints = function(e) {
            return this.useSpacedPoints ? this.extractAllSpacedPoints(e) : this.extractAllPoints(e)
        }
        ,
        r.Shape.prototype.extractAllSpacedPoints = function(e) {
            return {
                shape: this.getTransformedSpacedPoints(e),
                holes: this.getSpacedPointsHoles(e)
            }
        }
        ,
        r.Shape.Utils = {
            triangulateShape: function(e, t) {
                function n(e, t, n) {
                    return e.x != t.x ? e.x < t.x ? e.x <= n.x && n.x <= t.x : t.x <= n.x && n.x <= e.x : e.y < t.y ? e.y <= n.y && n.y <= t.y : t.y <= n.y && n.y <= e.y
                }
                function i(e, t, i, r, o) {
                    var a = 1e-10
                      , s = t.x - e.x
                      , l = t.y - e.y
                      , c = r.x - i.x
                      , u = r.y - i.y
                      , h = e.x - i.x
                      , d = e.y - i.y
                      , f = l * c - s * u
                      , p = l * h - s * d;
                    if (Math.abs(f) > a) {
                        var m;
                        if (f > 0) {
                            if (0 > p || p > f)
                                return [];
                            if (m = u * h - c * d,
                            0 > m || m > f)
                                return []
                        } else {
                            if (p > 0 || f > p)
                                return [];
                            if (m = u * h - c * d,
                            m > 0 || f > m)
                                return []
                        }
                        if (0 == m)
                            return !o || 0 != p && p != f ? [e] : [];
                        if (m == f)
                            return !o || 0 != p && p != f ? [t] : [];
                        if (0 == p)
                            return [i];
                        if (p == f)
                            return [r];
                        var v = m / f;
                        return [{
                            x: e.x + v * s,
                            y: e.y + v * l
                        }]
                    }
                    if (0 != p || u * h != c * d)
                        return [];
                    var g = 0 == s && 0 == l
                      , y = 0 == c && 0 == u;
                    if (g && y)
                        return e.x != i.x || e.y != i.y ? [] : [e];
                    if (g)
                        return n(i, r, e) ? [e] : [];
                    if (y)
                        return n(e, t, i) ? [i] : [];
                    var b, x, w, _, S, M, C, T;
                    return 0 != s ? (e.x < t.x ? (b = e,
                    w = e.x,
                    x = t,
                    _ = t.x) : (b = t,
                    w = t.x,
                    x = e,
                    _ = e.x),
                    i.x < r.x ? (S = i,
                    C = i.x,
                    M = r,
                    T = r.x) : (S = r,
                    C = r.x,
                    M = i,
                    T = i.x)) : (e.y < t.y ? (b = e,
                    w = e.y,
                    x = t,
                    _ = t.y) : (b = t,
                    w = t.y,
                    x = e,
                    _ = e.y),
                    i.y < r.y ? (S = i,
                    C = i.y,
                    M = r,
                    T = r.y) : (S = r,
                    C = r.y,
                    M = i,
                    T = i.y)),
                    C >= w ? C > _ ? [] : _ == C ? o ? [] : [S] : T >= _ ? [S, x] : [S, M] : w > T ? [] : w == T ? o ? [] : [b] : T >= _ ? [b, x] : [b, M]
                }
                function o(e, t, n, i) {
                    var r = 1e-10
                      , o = t.x - e.x
                      , a = t.y - e.y
                      , s = n.x - e.x
                      , l = n.y - e.y
                      , c = i.x - e.x
                      , u = i.y - e.y
                      , h = o * l - a * s
                      , d = o * u - a * c;
                    if (Math.abs(h) > r) {
                        var f = c * l - u * s;
                        return h > 0 ? d >= 0 && f >= 0 : d >= 0 || f >= 0
                    }
                    return d > 0
                }
                function a(e, t) {
                    function n(e, t) {
                        var n = y.length - 1
                          , i = e - 1;
                        0 > i && (i = n);
                        var r = e + 1;
                        r > n && (r = 0);
                        var a = o(y[e], y[i], y[r], s[t]);
                        if (!a)
                            return !1;
                        var l = s.length - 1
                          , c = t - 1;
                        0 > c && (c = l);
                        var u = t + 1;
                        return u > l && (u = 0),
                        a = o(s[t], s[c], s[u], y[e]),
                        a ? !0 : !1
                    }
                    function r(e, t) {
                        var n, r, o;
                        for (n = 0; n < y.length; n++)
                            if (r = n + 1,
                            r %= y.length,
                            o = i(e, t, y[n], y[r], !0),
                            o.length > 0)
                                return !0;
                        return !1
                    }
                    function a(e, n) {
                        var r, o, a, s, l;
                        for (r = 0; r < b.length; r++)
                            for (o = t[b[r]],
                            a = 0; a < o.length; a++)
                                if (s = a + 1,
                                s %= o.length,
                                l = i(e, n, o[a], o[s], !0),
                                l.length > 0)
                                    return !0;
                        return !1
                    }
                    for (var s, l, c, u, h, d, f, p, m, v, g, y = e.concat(), b = [], x = [], w = 0, _ = t.length; _ > w; w++)
                        b.push(w);
                    for (var S = 0, M = 2 * b.length; b.length > 0; ) {
                        if (M--,
                        0 > M) {
                            console.log("Infinite Loop! Holes left:" + b.length + ", Probably Hole outside Shape!");
                            break
                        }
                        for (c = S; c < y.length; c++) {
                            u = y[c],
                            l = -1;
                            for (var w = 0; w < b.length; w++)
                                if (d = b[w],
                                f = u.x + ":" + u.y + ":" + d,
                                void 0 === x[f]) {
                                    s = t[d];
                                    for (var C = 0; C < s.length; C++)
                                        if (h = s[C],
                                        n(c, C) && !r(u, h) && !a(u, h)) {
                                            l = C,
                                            b.splice(w, 1),
                                            p = y.slice(0, c + 1),
                                            m = y.slice(c),
                                            v = s.slice(l),
                                            g = s.slice(0, l + 1),
                                            y = p.concat(v).concat(g).concat(m),
                                            S = c;
                                            break
                                        }
                                    if (l >= 0)
                                        break;
                                    x[f] = !0
                                }
                            if (l >= 0)
                                break
                        }
                    }
                    return y
                }
                for (var s, l, c, u, h, d, f = {}, p = e.concat(), m = 0, v = t.length; v > m; m++)
                    Array.prototype.push.apply(p, t[m]);
                for (s = 0,
                l = p.length; l > s; s++)
                    h = p[s].x + ":" + p[s].y,
                    void 0 !== f[h] && r.warn("THREE.Shape: Duplicate point", h),
                    f[h] = s;
                var g = a(e, t)
                  , y = r.FontUtils.Triangulate(g, !1);
                for (s = 0,
                l = y.length; l > s; s++)
                    for (u = y[s],
                    c = 0; 3 > c; c++)
                        h = u[c].x + ":" + u[c].y,
                        d = f[h],
                        void 0 !== d && (u[c] = d);
                return y.concat()
            },
            isClockWise: function(e) {
                return r.FontUtils.Triangulate.area(e) < 0
            },
            b2p0: function(e, t) {
                var n = 1 - e;
                return n * n * t
            },
            b2p1: function(e, t) {
                return 2 * (1 - e) * e * t
            },
            b2p2: function(e, t) {
                return e * e * t
            },
            b2: function(e, t, n, i) {
                return this.b2p0(e, t) + this.b2p1(e, n) + this.b2p2(e, i)
            },
            b3p0: function(e, t) {
                var n = 1 - e;
                return n * n * n * t
            },
            b3p1: function(e, t) {
                var n = 1 - e;
                return 3 * n * n * e * t
            },
            b3p2: function(e, t) {
                var n = 1 - e;
                return 3 * n * e * e * t
            },
            b3p3: function(e, t) {
                return e * e * e * t
            },
            b3: function(e, t, n, i, r) {
                return this.b3p0(e, t) + this.b3p1(e, n) + this.b3p2(e, i) + this.b3p3(e, r)
            }
        },
        r.LineCurve = function(e, t) {
            this.v1 = e,
            this.v2 = t
        }
        ,
        r.LineCurve.prototype = Object.create(r.Curve.prototype),
        r.LineCurve.prototype.constructor = r.LineCurve,
        r.LineCurve.prototype.getPoint = function(e) {
            var t = this.v2.clone().sub(this.v1);
            return t.multiplyScalar(e).add(this.v1),
            t
        }
        ,
        r.LineCurve.prototype.getPointAt = function(e) {
            return this.getPoint(e)
        }
        ,
        r.LineCurve.prototype.getTangent = function(e) {
            var t = this.v2.clone().sub(this.v1);
            return t.normalize()
        }
        ,
        r.QuadraticBezierCurve = function(e, t, n) {
            this.v0 = e,
            this.v1 = t,
            this.v2 = n
        }
        ,
        r.QuadraticBezierCurve.prototype = Object.create(r.Curve.prototype),
        r.QuadraticBezierCurve.prototype.constructor = r.QuadraticBezierCurve,
        r.QuadraticBezierCurve.prototype.getPoint = function(e) {
            var t = new r.Vector2;
            return t.x = r.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x),
            t.y = r.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y),
            t
        }
        ,
        r.QuadraticBezierCurve.prototype.getTangent = function(e) {
            var t = new r.Vector2;
            return t.x = r.Curve.Utils.tangentQuadraticBezier(e, this.v0.x, this.v1.x, this.v2.x),
            t.y = r.Curve.Utils.tangentQuadraticBezier(e, this.v0.y, this.v1.y, this.v2.y),
            t.normalize()
        }
        ,
        r.CubicBezierCurve = function(e, t, n, i) {
            this.v0 = e,
            this.v1 = t,
            this.v2 = n,
            this.v3 = i
        }
        ,
        r.CubicBezierCurve.prototype = Object.create(r.Curve.prototype),
        r.CubicBezierCurve.prototype.constructor = r.CubicBezierCurve,
        r.CubicBezierCurve.prototype.getPoint = function(e) {
            var t, n;
            return t = r.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            n = r.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            new r.Vector2(t,n)
        }
        ,
        r.CubicBezierCurve.prototype.getTangent = function(e) {
            var t, n;
            t = r.Curve.Utils.tangentCubicBezier(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            n = r.Curve.Utils.tangentCubicBezier(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
            var i = new r.Vector2(t,n);
            return i.normalize(),
            i
        }
        ,
        r.SplineCurve = function(e) {
            this.points = void 0 == e ? [] : e
        }
        ,
        r.SplineCurve.prototype = Object.create(r.Curve.prototype),
        r.SplineCurve.prototype.constructor = r.SplineCurve,
        r.SplineCurve.prototype.getPoint = function(e) {
            var t = this.points
              , n = (t.length - 1) * e
              , i = Math.floor(n)
              , o = n - i
              , a = t[0 == i ? i : i - 1]
              , s = t[i]
              , l = t[i > t.length - 2 ? t.length - 1 : i + 1]
              , c = t[i > t.length - 3 ? t.length - 1 : i + 2]
              , u = new r.Vector2;
            return u.x = r.Curve.Utils.interpolate(a.x, s.x, l.x, c.x, o),
            u.y = r.Curve.Utils.interpolate(a.y, s.y, l.y, c.y, o),
            u
        }
        ,
        r.EllipseCurve = function(e, t, n, i, r, o, a) {
            this.aX = e,
            this.aY = t,
            this.xRadius = n,
            this.yRadius = i,
            this.aStartAngle = r,
            this.aEndAngle = o,
            this.aClockwise = a
        }
        ,
        r.EllipseCurve.prototype = Object.create(r.Curve.prototype),
        r.EllipseCurve.prototype.constructor = r.EllipseCurve,
        r.EllipseCurve.prototype.getPoint = function(e) {
            var t = this.aEndAngle - this.aStartAngle;
            0 > t && (t += 2 * Math.PI),
            t > 2 * Math.PI && (t -= 2 * Math.PI);
            var n;
            n = this.aClockwise === !0 ? this.aEndAngle + (1 - e) * (2 * Math.PI - t) : this.aStartAngle + e * t;
            var i = new r.Vector2;
            return i.x = this.aX + this.xRadius * Math.cos(n),
            i.y = this.aY + this.yRadius * Math.sin(n),
            i
        }
        ,
        r.ArcCurve = function(e, t, n, i, o, a) {
            r.EllipseCurve.call(this, e, t, n, n, i, o, a)
        }
        ,
        r.ArcCurve.prototype = Object.create(r.EllipseCurve.prototype),
        r.ArcCurve.prototype.constructor = r.ArcCurve,
        r.LineCurve3 = r.Curve.create(function(e, t) {
            this.v1 = e,
            this.v2 = t
        }, function(e) {
            var t = new r.Vector3;
            return t.subVectors(this.v2, this.v1),
            t.multiplyScalar(e),
            t.add(this.v1),
            t
        }),
        r.QuadraticBezierCurve3 = r.Curve.create(function(e, t, n) {
            this.v0 = e,
            this.v1 = t,
            this.v2 = n
        }, function(e) {
            var t = new r.Vector3;
            return t.x = r.Shape.Utils.b2(e, this.v0.x, this.v1.x, this.v2.x),
            t.y = r.Shape.Utils.b2(e, this.v0.y, this.v1.y, this.v2.y),
            t.z = r.Shape.Utils.b2(e, this.v0.z, this.v1.z, this.v2.z),
            t
        }),
        r.CubicBezierCurve3 = r.Curve.create(function(e, t, n, i) {
            this.v0 = e,
            this.v1 = t,
            this.v2 = n,
            this.v3 = i
        }, function(e) {
            var t = new r.Vector3;
            return t.x = r.Shape.Utils.b3(e, this.v0.x, this.v1.x, this.v2.x, this.v3.x),
            t.y = r.Shape.Utils.b3(e, this.v0.y, this.v1.y, this.v2.y, this.v3.y),
            t.z = r.Shape.Utils.b3(e, this.v0.z, this.v1.z, this.v2.z, this.v3.z),
            t
        }),
        r.SplineCurve3 = r.Curve.create(function(e) {
            this.points = void 0 == e ? [] : e
        }, function(e) {
            var t = this.points
              , n = (t.length - 1) * e
              , i = Math.floor(n)
              , o = n - i
              , a = t[0 == i ? i : i - 1]
              , s = t[i]
              , l = t[i > t.length - 2 ? t.length - 1 : i + 1]
              , c = t[i > t.length - 3 ? t.length - 1 : i + 2]
              , u = new r.Vector3;
            return u.x = r.Curve.Utils.interpolate(a.x, s.x, l.x, c.x, o),
            u.y = r.Curve.Utils.interpolate(a.y, s.y, l.y, c.y, o),
            u.z = r.Curve.Utils.interpolate(a.z, s.z, l.z, c.z, o),
            u
        }),
        r.ClosedSplineCurve3 = r.Curve.create(function(e) {
            this.points = void 0 == e ? [] : e
        }, function(e) {
            var t = this.points
              , n = (t.length - 0) * e
              , i = Math.floor(n)
              , o = n - i;
            i += i > 0 ? 0 : (Math.floor(Math.abs(i) / t.length) + 1) * t.length;
            var a = t[(i - 1) % t.length]
              , s = t[i % t.length]
              , l = t[(i + 1) % t.length]
              , c = t[(i + 2) % t.length]
              , u = new r.Vector3;
            return u.x = r.Curve.Utils.interpolate(a.x, s.x, l.x, c.x, o),
            u.y = r.Curve.Utils.interpolate(a.y, s.y, l.y, c.y, o),
            u.z = r.Curve.Utils.interpolate(a.z, s.z, l.z, c.z, o),
            u
        }),
        r.AnimationHandler = {
            LINEAR: 0,
            CATMULLROM: 1,
            CATMULLROM_FORWARD: 2,
            add: function() {
                r.warn("THREE.AnimationHandler.add() has been deprecated.")
            },
            get: function() {
                r.warn("THREE.AnimationHandler.get() has been deprecated.")
            },
            remove: function() {
                r.warn("THREE.AnimationHandler.remove() has been deprecated.")
            },
            animations: [],
            init: function(e) {
                if (e.initialized === !0)
                    return e;
                for (var t = 0; t < e.hierarchy.length; t++) {
                    for (var n = 0; n < e.hierarchy[t].keys.length; n++)
                        if (e.hierarchy[t].keys[n].time < 0 && (e.hierarchy[t].keys[n].time = 0),
                        void 0 !== e.hierarchy[t].keys[n].rot && !(e.hierarchy[t].keys[n].rot instanceof r.Quaternion)) {
                            var i = e.hierarchy[t].keys[n].rot;
                            e.hierarchy[t].keys[n].rot = (new r.Quaternion).fromArray(i)
                        }
                    if (e.hierarchy[t].keys.length && void 0 !== e.hierarchy[t].keys[0].morphTargets) {
                        for (var o = {}, n = 0; n < e.hierarchy[t].keys.length; n++)
                            for (var a = 0; a < e.hierarchy[t].keys[n].morphTargets.length; a++) {
                                var s = e.hierarchy[t].keys[n].morphTargets[a];
                                o[s] = -1
                            }
                        e.hierarchy[t].usedMorphTargets = o;
                        for (var n = 0; n < e.hierarchy[t].keys.length; n++) {
                            var l = {};
                            for (var s in o) {
                                for (var a = 0; a < e.hierarchy[t].keys[n].morphTargets.length; a++)
                                    if (e.hierarchy[t].keys[n].morphTargets[a] === s) {
                                        l[s] = e.hierarchy[t].keys[n].morphTargetsInfluences[a];
                                        break
                                    }
                                a === e.hierarchy[t].keys[n].morphTargets.length && (l[s] = 0)
                            }
                            e.hierarchy[t].keys[n].morphTargetsInfluences = l
                        }
                    }
                    for (var n = 1; n < e.hierarchy[t].keys.length; n++)
                        e.hierarchy[t].keys[n].time === e.hierarchy[t].keys[n - 1].time && (e.hierarchy[t].keys.splice(n, 1),
                        n--);
                    for (var n = 0; n < e.hierarchy[t].keys.length; n++)
                        e.hierarchy[t].keys[n].index = n
                }
                return e.initialized = !0,
                e
            },
            parse: function(e) {
                var t = function(e, n) {
                    n.push(e);
                    for (var i = 0; i < e.children.length; i++)
                        t(e.children[i], n)
                }
                  , n = [];
                if (e instanceof r.SkinnedMesh)
                    for (var i = 0; i < e.skeleton.bones.length; i++)
                        n.push(e.skeleton.bones[i]);
                else
                    t(e, n);
                return n
            },
            play: function(e) {
                -1 === this.animations.indexOf(e) && this.animations.push(e)
            },
            stop: function(e) {
                var t = this.animations.indexOf(e);
                -1 !== t && this.animations.splice(t, 1)
            },
            update: function(e) {
                for (var t = 0; t < this.animations.length; t++)
                    this.animations[t].resetBlendWeights();
                for (var t = 0; t < this.animations.length; t++)
                    this.animations[t].update(e)
            }
        },
        r.Animation = function(e, t) {
            this.root = e,
            this.data = r.AnimationHandler.init(t),
            this.hierarchy = r.AnimationHandler.parse(e),
            this.currentTime = 0,
            this.timeScale = 1,
            this.isPlaying = !1,
            this.loop = !0,
            this.weight = 0,
            this.interpolationType = r.AnimationHandler.LINEAR
        }
        ,
        r.Animation.prototype = {
            constructor: r.Animation,
            keyTypes: ["pos", "rot", "scl"],
            play: function(e, t) {
                this.currentTime = void 0 !== e ? e : 0,
                this.weight = void 0 !== t ? t : 1,
                this.isPlaying = !0,
                this.reset(),
                r.AnimationHandler.play(this)
            },
            stop: function() {
                this.isPlaying = !1,
                r.AnimationHandler.stop(this)
            },
            reset: function() {
                for (var e = 0, t = this.hierarchy.length; t > e; e++) {
                    var n = this.hierarchy[e];
                    void 0 === n.animationCache && (n.animationCache = {
                        animations: {},
                        blending: {
                            positionWeight: 0,
                            quaternionWeight: 0,
                            scaleWeight: 0
                        }
                    });
                    var i = this.data.name
                      , r = n.animationCache.animations
                      , o = r[i];
                    void 0 === o && (o = {
                        prevKey: {
                            pos: 0,
                            rot: 0,
                            scl: 0
                        },
                        nextKey: {
                            pos: 0,
                            rot: 0,
                            scl: 0
                        },
                        originalMatrix: n.matrix
                    },
                    r[i] = o);
                    for (var a = 0; 3 > a; a++) {
                        for (var s = this.keyTypes[a], l = this.data.hierarchy[e].keys[0], c = this.getNextKeyWith(s, e, 1); c.time < this.currentTime && c.index > l.index; )
                            l = c,
                            c = this.getNextKeyWith(s, e, c.index + 1);
                        o.prevKey[s] = l,
                        o.nextKey[s] = c
                    }
                }
            },
            resetBlendWeights: function() {
                for (var e = 0, t = this.hierarchy.length; t > e; e++) {
                    var n = this.hierarchy[e]
                      , i = n.animationCache;
                    if (void 0 !== i) {
                        var r = i.blending;
                        r.positionWeight = 0,
                        r.quaternionWeight = 0,
                        r.scaleWeight = 0
                    }
                }
            },
            update: function() {
                var e = []
                  , t = new r.Vector3
                  , n = new r.Vector3
                  , i = new r.Quaternion
                  , o = function(e, t) {
                    var n, i, r, o, s, l, c, u, h, d = [], f = [];
                    return n = (e.length - 1) * t,
                    i = Math.floor(n),
                    r = n - i,
                    d[0] = 0 === i ? i : i - 1,
                    d[1] = i,
                    d[2] = i > e.length - 2 ? i : i + 1,
                    d[3] = i > e.length - 3 ? i : i + 2,
                    l = e[d[0]],
                    c = e[d[1]],
                    u = e[d[2]],
                    h = e[d[3]],
                    o = r * r,
                    s = r * o,
                    f[0] = a(l[0], c[0], u[0], h[0], r, o, s),
                    f[1] = a(l[1], c[1], u[1], h[1], r, o, s),
                    f[2] = a(l[2], c[2], u[2], h[2], r, o, s),
                    f
                }
                  , a = function(e, t, n, i, r, o, a) {
                    var s = .5 * (n - e)
                      , l = .5 * (i - t);
                    return (2 * (t - n) + s + l) * a + (-3 * (t - n) - 2 * s - l) * o + s * r + t
                };
                return function(a) {
                    if (this.isPlaying !== !1 && (this.currentTime += a * this.timeScale,
                    0 !== this.weight)) {
                        var s = this.data.length;
                        (this.currentTime > s || this.currentTime < 0) && (this.loop ? (this.currentTime %= s,
                        this.currentTime < 0 && (this.currentTime += s),
                        this.reset()) : this.stop());
                        for (var l = 0, c = this.hierarchy.length; c > l; l++)
                            for (var u = this.hierarchy[l], h = u.animationCache.animations[this.data.name], d = u.animationCache.blending, f = 0; 3 > f; f++) {
                                var p = this.keyTypes[f]
                                  , m = h.prevKey[p]
                                  , v = h.nextKey[p];
                                if (this.timeScale > 0 && v.time <= this.currentTime || this.timeScale < 0 && m.time >= this.currentTime) {
                                    for (m = this.data.hierarchy[l].keys[0],
                                    v = this.getNextKeyWith(p, l, 1); v.time < this.currentTime && v.index > m.index; )
                                        m = v,
                                        v = this.getNextKeyWith(p, l, v.index + 1);
                                    h.prevKey[p] = m,
                                    h.nextKey[p] = v
                                }
                                var g = (this.currentTime - m.time) / (v.time - m.time)
                                  , y = m[p]
                                  , b = v[p];
                                if (0 > g && (g = 0),
                                g > 1 && (g = 1),
                                "pos" === p) {
                                    if (this.interpolationType === r.AnimationHandler.LINEAR) {
                                        n.x = y[0] + (b[0] - y[0]) * g,
                                        n.y = y[1] + (b[1] - y[1]) * g,
                                        n.z = y[2] + (b[2] - y[2]) * g;
                                        var x = this.weight / (this.weight + d.positionWeight);
                                        u.position.lerp(n, x),
                                        d.positionWeight += this.weight
                                    } else if (this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD) {
                                        e[0] = this.getPrevKeyWith("pos", l, m.index - 1).pos,
                                        e[1] = y,
                                        e[2] = b,
                                        e[3] = this.getNextKeyWith("pos", l, v.index + 1).pos,
                                        g = .33 * g + .33;
                                        var w = o(e, g)
                                          , x = this.weight / (this.weight + d.positionWeight);
                                        d.positionWeight += this.weight;
                                        var _ = u.position;
                                        if (_.x = _.x + (w[0] - _.x) * x,
                                        _.y = _.y + (w[1] - _.y) * x,
                                        _.z = _.z + (w[2] - _.z) * x,
                                        this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD) {
                                            var S = o(e, 1.01 * g);
                                            t.set(S[0], S[1], S[2]),
                                            t.sub(_),
                                            t.y = 0,
                                            t.normalize();
                                            var M = Math.atan2(t.x, t.z);
                                            u.rotation.set(0, M, 0)
                                        }
                                    }
                                } else if ("rot" === p)
                                    if (r.Quaternion.slerp(y, b, i, g),
                                    0 === d.quaternionWeight)
                                        u.quaternion.copy(i),
                                        d.quaternionWeight = this.weight;
                                    else {
                                        var x = this.weight / (this.weight + d.quaternionWeight);
                                        r.Quaternion.slerp(u.quaternion, i, u.quaternion, x),
                                        d.quaternionWeight += this.weight
                                    }
                                else if ("scl" === p) {
                                    n.x = y[0] + (b[0] - y[0]) * g,
                                    n.y = y[1] + (b[1] - y[1]) * g,
                                    n.z = y[2] + (b[2] - y[2]) * g;
                                    var x = this.weight / (this.weight + d.scaleWeight);
                                    u.scale.lerp(n, x),
                                    d.scaleWeight += this.weight
                                }
                            }
                        return !0
                    }
                }
            }(),
            getNextKeyWith: function(e, t, n) {
                var i = this.data.hierarchy[t].keys;
                for (this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD ? n = n < i.length - 1 ? n : i.length - 1 : n %= i.length; n < i.length; n++)
                    if (void 0 !== i[n][e])
                        return i[n];
                return this.data.hierarchy[t].keys[0]
            },
            getPrevKeyWith: function(e, t, n) {
                var i = this.data.hierarchy[t].keys;
                for (n = this.interpolationType === r.AnimationHandler.CATMULLROM || this.interpolationType === r.AnimationHandler.CATMULLROM_FORWARD ? n > 0 ? n : 0 : n >= 0 ? n : n + i.length; n >= 0; n--)
                    if (void 0 !== i[n][e])
                        return i[n];
                return this.data.hierarchy[t].keys[i.length - 1]
            }
        },
        r.KeyFrameAnimation = function(e) {
            this.root = e.node,
            this.data = r.AnimationHandler.init(e),
            this.hierarchy = r.AnimationHandler.parse(this.root),
            this.currentTime = 0,
            this.timeScale = .001,
            this.isPlaying = !1,
            this.isPaused = !0,
            this.loop = !0;
            for (var t = 0, n = this.hierarchy.length; n > t; t++) {
                var i = this.data.hierarchy[t].keys
                  , o = this.data.hierarchy[t].sids
                  , a = this.hierarchy[t];
                if (i.length && o) {
                    for (var s = 0; s < o.length; s++) {
                        var l = o[s]
                          , c = this.getNextKeyWith(l, t, 0);
                        c && c.apply(l)
                    }
                    a.matrixAutoUpdate = !1,
                    this.data.hierarchy[t].node.updateMatrix(),
                    a.matrixWorldNeedsUpdate = !0
                }
            }
        }
        ,
        r.KeyFrameAnimation.prototype = {
            constructor: r.KeyFrameAnimation,
            play: function(e) {
                if (this.currentTime = void 0 !== e ? e : 0,
                this.isPlaying === !1) {
                    this.isPlaying = !0;
                    var t, n, i, o = this.hierarchy.length;
                    for (t = 0; o > t; t++) {
                        n = this.hierarchy[t],
                        i = this.data.hierarchy[t],
                        void 0 === i.animationCache && (i.animationCache = {},
                        i.animationCache.prevKey = null,
                        i.animationCache.nextKey = null,
                        i.animationCache.originalMatrix = n.matrix);
                        var a = this.data.hierarchy[t].keys;
                        a.length && (i.animationCache.prevKey = a[0],
                        i.animationCache.nextKey = a[1],
                        this.startTime = Math.min(a[0].time, this.startTime),
                        this.endTime = Math.max(a[a.length - 1].time, this.endTime))
                    }
                    this.update(0)
                }
                this.isPaused = !1,
                r.AnimationHandler.play(this)
            },
            stop: function() {
                this.isPlaying = !1,
                this.isPaused = !1,
                r.AnimationHandler.stop(this);
                for (var e = 0; e < this.data.hierarchy.length; e++) {
                    var t = this.hierarchy[e]
                      , n = this.data.hierarchy[e];
                    if (void 0 !== n.animationCache) {
                        var i = n.animationCache.originalMatrix;
                        i.copy(t.matrix),
                        t.matrix = i,
                        delete n.animationCache
                    }
                }
            },
            update: function(e) {
                if (this.isPlaying !== !1) {
                    this.currentTime += e * this.timeScale;
                    var t = this.data.length;
                    this.loop === !0 && this.currentTime > t && (this.currentTime %= t),
                    this.currentTime = Math.min(this.currentTime, t);
                    for (var n = 0, i = this.hierarchy.length; i > n; n++) {
                        var r = this.hierarchy[n]
                          , o = this.data.hierarchy[n]
                          , a = o.keys
                          , s = o.animationCache;
                        if (a.length) {
                            var l = s.prevKey
                              , c = s.nextKey;
                            if (c.time <= this.currentTime) {
                                for (; c.time < this.currentTime && c.index > l.index; )
                                    l = c,
                                    c = a[l.index + 1];
                                s.prevKey = l,
                                s.nextKey = c
                            }
                            c.time >= this.currentTime ? l.interpolate(c, this.currentTime) : l.interpolate(c, c.time),
                            this.data.hierarchy[n].node.updateMatrix(),
                            r.matrixWorldNeedsUpdate = !0
                        }
                    }
                }
            },
            getNextKeyWith: function(e, t, n) {
                var i = this.data.hierarchy[t].keys;
                for (n %= i.length; n < i.length; n++)
                    if (i[n].hasTarget(e))
                        return i[n];
                return i[0]
            },
            getPrevKeyWith: function(e, t, n) {
                var i = this.data.hierarchy[t].keys;
                for (n = n >= 0 ? n : n + i.length; n >= 0; n--)
                    if (i[n].hasTarget(e))
                        return i[n];
                return i[i.length - 1]
            }
        },
        r.MorphAnimation = function(e) {
            this.mesh = e,
            this.frames = e.morphTargetInfluences.length,
            this.currentTime = 0,
            this.duration = 1e3,
            this.loop = !0,
            this.lastFrame = 0,
            this.currentFrame = 0,
            this.isPlaying = !1
        }
        ,
        r.MorphAnimation.prototype = {
            constructor: r.MorphAnimation,
            play: function() {
                this.isPlaying = !0
            },
            pause: function() {
                this.isPlaying = !1
            },
            update: function(e) {
                if (this.isPlaying !== !1) {
                    this.currentTime += e,
                    this.loop === !0 && this.currentTime > this.duration && (this.currentTime %= this.duration),
                    this.currentTime = Math.min(this.currentTime, this.duration);
                    var t = this.duration / this.frames
                      , n = Math.floor(this.currentTime / t)
                      , i = this.mesh.morphTargetInfluences;
                    n != this.currentFrame && (i[this.lastFrame] = 0,
                    i[this.currentFrame] = 1,
                    i[n] = 0,
                    this.lastFrame = this.currentFrame,
                    this.currentFrame = n),
                    i[n] = this.currentTime % t / t,
                    i[this.lastFrame] = 1 - i[n]
                }
            }
        },
        r.BoxGeometry = function(e, t, n, i, o, a) {
            function s(e, t, n, i, o, a, s, c) {
                var u, h, d, f = l.widthSegments, p = l.heightSegments, m = o / 2, v = a / 2, g = l.vertices.length;
                "x" === e && "y" === t || "y" === e && "x" === t ? u = "z" : "x" === e && "z" === t || "z" === e && "x" === t ? (u = "y",
                p = l.depthSegments) : ("z" === e && "y" === t || "y" === e && "z" === t) && (u = "x",
                f = l.depthSegments);
                var y = f + 1
                  , b = p + 1
                  , x = o / f
                  , w = a / p
                  , _ = new r.Vector3;
                for (_[u] = s > 0 ? 1 : -1,
                d = 0; b > d; d++)
                    for (h = 0; y > h; h++) {
                        var S = new r.Vector3;
                        S[e] = (h * x - m) * n,
                        S[t] = (d * w - v) * i,
                        S[u] = s,
                        l.vertices.push(S)
                    }
                for (d = 0; p > d; d++)
                    for (h = 0; f > h; h++) {
                        var M = h + y * d
                          , C = h + y * (d + 1)
                          , T = h + 1 + y * (d + 1)
                          , E = h + 1 + y * d
                          , k = new r.Vector2(h / f,1 - d / p)
                          , A = new r.Vector2(h / f,1 - (d + 1) / p)
                          , P = new r.Vector2((h + 1) / f,1 - (d + 1) / p)
                          , L = new r.Vector2((h + 1) / f,1 - d / p)
                          , O = new r.Face3(M + g,C + g,E + g);
                        O.normal.copy(_),
                        O.vertexNormals.push(_.clone(), _.clone(), _.clone()),
                        O.materialIndex = c,
                        l.faces.push(O),
                        l.faceVertexUvs[0].push([k, A, L]),
                        O = new r.Face3(C + g,T + g,E + g),
                        O.normal.copy(_),
                        O.vertexNormals.push(_.clone(), _.clone(), _.clone()),
                        O.materialIndex = c,
                        l.faces.push(O),
                        l.faceVertexUvs[0].push([A.clone(), P, L.clone()])
                    }
            }
            r.Geometry.call(this),
            this.type = "BoxGeometry",
            this.parameters = {
                width: e,
                height: t,
                depth: n,
                widthSegments: i,
                heightSegments: o,
                depthSegments: a
            },
            this.widthSegments = i || 1,
            this.heightSegments = o || 1,
            this.depthSegments = a || 1;
            var l = this
              , c = e / 2
              , u = t / 2
              , h = n / 2;
            s("z", "y", -1, -1, n, t, c, 0),
            s("z", "y", 1, -1, n, t, -c, 1),
            s("x", "z", 1, 1, e, n, u, 2),
            s("x", "z", 1, -1, e, n, -u, 3),
            s("x", "y", 1, -1, e, t, h, 4),
            s("x", "y", -1, -1, e, t, -h, 5),
            this.mergeVertices()
        }
        ,
        r.BoxGeometry.prototype = Object.create(r.Geometry.prototype),
        r.BoxGeometry.prototype.constructor = r.BoxGeometry,
        r.CircleGeometry = function(e, t, n, i) {
            r.Geometry.call(this),
            this.type = "CircleGeometry",
            this.parameters = {
                radius: e,
                segments: t,
                thetaStart: n,
                thetaLength: i
            },
            e = e || 50,
            t = void 0 !== t ? Math.max(3, t) : 8,
            n = void 0 !== n ? n : 0,
            i = void 0 !== i ? i : 2 * Math.PI;
            var o, a = [], s = new r.Vector3, l = new r.Vector2(.5,.5);
            for (this.vertices.push(s),
            a.push(l),
            o = 0; t >= o; o++) {
                var c = new r.Vector3
                  , u = n + o / t * i;
                c.x = e * Math.cos(u),
                c.y = e * Math.sin(u),
                this.vertices.push(c),
                a.push(new r.Vector2((c.x / e + 1) / 2,(c.y / e + 1) / 2))
            }
            var h = new r.Vector3(0,0,1);
            for (o = 1; t >= o; o++)
                this.faces.push(new r.Face3(o,o + 1,0,[h.clone(), h.clone(), h.clone()])),
                this.faceVertexUvs[0].push([a[o].clone(), a[o + 1].clone(), l.clone()]);
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,e)
        }
        ,
        r.CircleGeometry.prototype = Object.create(r.Geometry.prototype),
        r.CircleGeometry.prototype.constructor = r.CircleGeometry,
        r.CubeGeometry = function(e, t, n, i, o, a) {
            return r.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),
            new r.BoxGeometry(e,t,n,i,o,a)
        }
        ,
        r.CylinderGeometry = function(e, t, n, i, o, a, s, l) {
            r.Geometry.call(this),
            this.type = "CylinderGeometry",
            this.parameters = {
                radiusTop: e,
                radiusBottom: t,
                height: n,
                radialSegments: i,
                heightSegments: o,
                openEnded: a,
                thetaStart: s,
                thetaLength: l
            },
            e = void 0 !== e ? e : 20,
            t = void 0 !== t ? t : 20,
            n = void 0 !== n ? n : 100,
            i = i || 8,
            o = o || 1,
            a = void 0 !== a ? a : !1,
            s = void 0 !== s ? s : 0,
            l = void 0 !== l ? l : 2 * Math.PI;
            var c, u, h = n / 2, d = [], f = [];
            for (u = 0; o >= u; u++) {
                var p = []
                  , m = []
                  , v = u / o
                  , g = v * (t - e) + e;
                for (c = 0; i >= c; c++) {
                    var y = c / i
                      , b = new r.Vector3;
                    b.x = g * Math.sin(y * l + s),
                    b.y = -v * n + h,
                    b.z = g * Math.cos(y * l + s),
                    this.vertices.push(b),
                    p.push(this.vertices.length - 1),
                    m.push(new r.Vector2(y,1 - v))
                }
                d.push(p),
                f.push(m)
            }
            var x, w, _ = (t - e) / n;
            for (c = 0; i > c; c++)
                for (0 !== e ? (x = this.vertices[d[0][c]].clone(),
                w = this.vertices[d[0][c + 1]].clone()) : (x = this.vertices[d[1][c]].clone(),
                w = this.vertices[d[1][c + 1]].clone()),
                x.setY(Math.sqrt(x.x * x.x + x.z * x.z) * _).normalize(),
                w.setY(Math.sqrt(w.x * w.x + w.z * w.z) * _).normalize(),
                u = 0; o > u; u++) {
                    var S = d[u][c]
                      , M = d[u + 1][c]
                      , C = d[u + 1][c + 1]
                      , T = d[u][c + 1]
                      , E = x.clone()
                      , k = x.clone()
                      , A = w.clone()
                      , P = w.clone()
                      , L = f[u][c].clone()
                      , O = f[u + 1][c].clone()
                      , R = f[u + 1][c + 1].clone()
                      , F = f[u][c + 1].clone();
                    this.faces.push(new r.Face3(S,M,T,[E, k, P])),
                    this.faceVertexUvs[0].push([L, O, F]),
                    this.faces.push(new r.Face3(M,C,T,[k.clone(), A, P.clone()])),
                    this.faceVertexUvs[0].push([O.clone(), R, F.clone()])
                }
            if (a === !1 && e > 0)
                for (this.vertices.push(new r.Vector3(0,h,0)),
                c = 0; i > c; c++) {
                    var S = d[0][c]
                      , M = d[0][c + 1]
                      , C = this.vertices.length - 1
                      , E = new r.Vector3(0,1,0)
                      , k = new r.Vector3(0,1,0)
                      , A = new r.Vector3(0,1,0)
                      , L = f[0][c].clone()
                      , O = f[0][c + 1].clone()
                      , R = new r.Vector2(O.x,0);
                    this.faces.push(new r.Face3(S,M,C,[E, k, A])),
                    this.faceVertexUvs[0].push([L, O, R])
                }
            if (a === !1 && t > 0)
                for (this.vertices.push(new r.Vector3(0,-h,0)),
                c = 0; i > c; c++) {
                    var S = d[o][c + 1]
                      , M = d[o][c]
                      , C = this.vertices.length - 1
                      , E = new r.Vector3(0,-1,0)
                      , k = new r.Vector3(0,-1,0)
                      , A = new r.Vector3(0,-1,0)
                      , L = f[o][c + 1].clone()
                      , O = f[o][c].clone()
                      , R = new r.Vector2(O.x,1);
                    this.faces.push(new r.Face3(S,M,C,[E, k, A])),
                    this.faceVertexUvs[0].push([L, O, R])
                }
            this.computeFaceNormals()
        }
        ,
        r.CylinderGeometry.prototype = Object.create(r.Geometry.prototype),
        r.CylinderGeometry.prototype.constructor = r.CylinderGeometry,
        r.ExtrudeGeometry = function(e, t) {
            return "undefined" == typeof e ? void (e = []) : (r.Geometry.call(this),
            this.type = "ExtrudeGeometry",
            e = e instanceof Array ? e : [e],
            this.addShapeList(e, t),
            void this.computeFaceNormals())
        }
        ,
        r.ExtrudeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ExtrudeGeometry.prototype.constructor = r.ExtrudeGeometry,
        r.ExtrudeGeometry.prototype.addShapeList = function(e, t) {
            for (var n = e.length, i = 0; n > i; i++) {
                var r = e[i];
                this.addShape(r, t)
            }
        }
        ,
        r.ExtrudeGeometry.prototype.addShape = function(e, t) {
            function n(e, t, n) {
                return t || r.error("THREE.ExtrudeGeometry: vec does not exist"),
                t.clone().multiplyScalar(n).add(e)
            }
            function i(e, t, n) {
                var i, o, a = 1e-10, s = 1, l = e.x - t.x, c = e.y - t.y, u = n.x - e.x, h = n.y - e.y, d = l * l + c * c, f = l * h - c * u;
                if (Math.abs(f) > a) {
                    var p = Math.sqrt(d)
                      , m = Math.sqrt(u * u + h * h)
                      , v = t.x - c / p
                      , g = t.y + l / p
                      , y = n.x - h / m
                      , b = n.y + u / m
                      , x = ((y - v) * h - (b - g) * u) / (l * h - c * u);
                    i = v + l * x - e.x,
                    o = g + c * x - e.y;
                    var w = i * i + o * o;
                    if (2 >= w)
                        return new r.Vector2(i,o);
                    s = Math.sqrt(w / 2)
                } else {
                    var _ = !1;
                    l > a ? u > a && (_ = !0) : -a > l ? -a > u && (_ = !0) : Math.sign(c) == Math.sign(h) && (_ = !0),
                    _ ? (i = -c,
                    o = l,
                    s = Math.sqrt(d)) : (i = l,
                    o = c,
                    s = Math.sqrt(d / 2))
                }
                return new r.Vector2(i / s,o / s)
            }
            function o() {
                if (x) {
                    var e = 0
                      , t = W * e;
                    for (Y = 0; q > Y; Y++)
                        G = I[Y],
                        c(G[2] + t, G[1] + t, G[0] + t);
                    for (e = _ + 2 * b,
                    t = W * e,
                    Y = 0; q > Y; Y++)
                        G = I[Y],
                        c(G[0] + t, G[1] + t, G[2] + t)
                } else {
                    for (Y = 0; q > Y; Y++)
                        G = I[Y],
                        c(G[2], G[1], G[0]);
                    for (Y = 0; q > Y; Y++)
                        G = I[Y],
                        c(G[0] + W * _, G[1] + W * _, G[2] + W * _)
                }
            }
            function a() {
                var e = 0;
                for (s(N, e),
                e += N.length,
                A = 0,
                P = B.length; P > A; A++)
                    k = B[A],
                    s(k, e),
                    e += k.length
            }
            function s(e, t) {
                var n, i;
                for (Y = e.length; --Y >= 0; ) {
                    n = Y,
                    i = Y - 1,
                    0 > i && (i = e.length - 1);
                    var r = 0
                      , o = _ + 2 * b;
                    for (r = 0; o > r; r++) {
                        var a = W * r
                          , s = W * (r + 1)
                          , l = t + n + a
                          , c = t + i + a
                          , h = t + i + s
                          , d = t + n + s;
                        u(l, c, h, d, e, r, o, n, i)
                    }
                }
            }
            function l(e, t, n) {
                L.vertices.push(new r.Vector3(e,t,n))
            }
            function c(e, t, n) {
                e += O,
                t += O,
                n += O,
                L.faces.push(new r.Face3(e,t,n,null,null,C));
                var i = E.generateTopUV(L, e, t, n);
                L.faceVertexUvs[0].push(i)
            }
            function u(e, t, n, i, o, a, s, l, c) {
                e += O,
                t += O,
                n += O,
                i += O,
                L.faces.push(new r.Face3(e,t,i,null,null,T)),
                L.faces.push(new r.Face3(t,n,i,null,null,T));
                var u = E.generateSideWallUV(L, e, t, n, i);
                L.faceVertexUvs[0].push([u[0], u[1], u[3]]),
                L.faceVertexUvs[0].push([u[1], u[2], u[3]])
            }
            var h, d, f, p, m, v = void 0 !== t.amount ? t.amount : 100, g = void 0 !== t.bevelThickness ? t.bevelThickness : 6, y = void 0 !== t.bevelSize ? t.bevelSize : g - 2, b = void 0 !== t.bevelSegments ? t.bevelSegments : 3, x = void 0 !== t.bevelEnabled ? t.bevelEnabled : !0, w = void 0 !== t.curveSegments ? t.curveSegments : 12, _ = void 0 !== t.steps ? t.steps : 1, S = t.extrudePath, M = !1, C = t.material, T = t.extrudeMaterial, E = void 0 !== t.UVGenerator ? t.UVGenerator : r.ExtrudeGeometry.WorldUVGenerator;
            S && (h = S.getSpacedPoints(_),
            M = !0,
            x = !1,
            d = void 0 !== t.frames ? t.frames : new r.TubeGeometry.FrenetFrames(S,_,!1),
            f = new r.Vector3,
            p = new r.Vector3,
            m = new r.Vector3),
            x || (b = 0,
            g = 0,
            y = 0);
            var k, A, P, L = this, O = this.vertices.length, R = e.extractPoints(w), F = R.shape, B = R.holes, D = !r.Shape.Utils.isClockWise(F);
            if (D) {
                for (F = F.reverse(),
                A = 0,
                P = B.length; P > A; A++)
                    k = B[A],
                    r.Shape.Utils.isClockWise(k) && (B[A] = k.reverse());
                D = !1
            }
            var I = r.Shape.Utils.triangulateShape(F, B)
              , N = F;
            for (A = 0,
            P = B.length; P > A; A++)
                k = B[A],
                F = F.concat(k);
            for (var j, V, z, U, H, G, W = F.length, q = I.length, X = [], Y = 0, J = N.length, Z = J - 1, Q = Y + 1; J > Y; Y++,
            Z++,
            Q++)
                Z === J && (Z = 0),
                Q === J && (Q = 0),
                X[Y] = i(N[Y], N[Z], N[Q]);
            var K, $ = [], ee = X.concat();
            for (A = 0,
            P = B.length; P > A; A++) {
                for (k = B[A],
                K = [],
                Y = 0,
                J = k.length,
                Z = J - 1,
                Q = Y + 1; J > Y; Y++,
                Z++,
                Q++)
                    Z === J && (Z = 0),
                    Q === J && (Q = 0),
                    K[Y] = i(k[Y], k[Z], k[Q]);
                $.push(K),
                ee = ee.concat(K)
            }
            for (j = 0; b > j; j++) {
                for (z = j / b,
                U = g * (1 - z),
                V = y * Math.sin(z * Math.PI / 2),
                Y = 0,
                J = N.length; J > Y; Y++)
                    H = n(N[Y], X[Y], V),
                    l(H.x, H.y, -U);
                for (A = 0,
                P = B.length; P > A; A++)
                    for (k = B[A],
                    K = $[A],
                    Y = 0,
                    J = k.length; J > Y; Y++)
                        H = n(k[Y], K[Y], V),
                        l(H.x, H.y, -U)
            }
            for (V = y,
            Y = 0; W > Y; Y++)
                H = x ? n(F[Y], ee[Y], V) : F[Y],
                M ? (p.copy(d.normals[0]).multiplyScalar(H.x),
                f.copy(d.binormals[0]).multiplyScalar(H.y),
                m.copy(h[0]).add(p).add(f),
                l(m.x, m.y, m.z)) : l(H.x, H.y, 0);
            var te;
            for (te = 1; _ >= te; te++)
                for (Y = 0; W > Y; Y++)
                    H = x ? n(F[Y], ee[Y], V) : F[Y],
                    M ? (p.copy(d.normals[te]).multiplyScalar(H.x),
                    f.copy(d.binormals[te]).multiplyScalar(H.y),
                    m.copy(h[te]).add(p).add(f),
                    l(m.x, m.y, m.z)) : l(H.x, H.y, v / _ * te);
            for (j = b - 1; j >= 0; j--) {
                for (z = j / b,
                U = g * (1 - z),
                V = y * Math.sin(z * Math.PI / 2),
                Y = 0,
                J = N.length; J > Y; Y++)
                    H = n(N[Y], X[Y], V),
                    l(H.x, H.y, v + U);
                for (A = 0,
                P = B.length; P > A; A++)
                    for (k = B[A],
                    K = $[A],
                    Y = 0,
                    J = k.length; J > Y; Y++)
                        H = n(k[Y], K[Y], V),
                        M ? l(H.x, H.y + h[_ - 1].y, h[_ - 1].x + U) : l(H.x, H.y, v + U)
            }
            o(),
            a()
        }
        ,
        r.ExtrudeGeometry.WorldUVGenerator = {
            generateTopUV: function(e, t, n, i) {
                var o = e.vertices
                  , a = o[t]
                  , s = o[n]
                  , l = o[i];
                return [new r.Vector2(a.x,a.y), new r.Vector2(s.x,s.y), new r.Vector2(l.x,l.y)]
            },
            generateSideWallUV: function(e, t, n, i, o) {
                var a = e.vertices
                  , s = a[t]
                  , l = a[n]
                  , c = a[i]
                  , u = a[o];
                return Math.abs(s.y - l.y) < .01 ? [new r.Vector2(s.x,1 - s.z), new r.Vector2(l.x,1 - l.z), new r.Vector2(c.x,1 - c.z), new r.Vector2(u.x,1 - u.z)] : [new r.Vector2(s.y,1 - s.z), new r.Vector2(l.y,1 - l.z), new r.Vector2(c.y,1 - c.z), new r.Vector2(u.y,1 - u.z)]
            }
        },
        r.ShapeGeometry = function(e, t) {
            r.Geometry.call(this),
            this.type = "ShapeGeometry",
            e instanceof Array == !1 && (e = [e]),
            this.addShapeList(e, t),
            this.computeFaceNormals()
        }
        ,
        r.ShapeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ShapeGeometry.prototype.constructor = r.ShapeGeometry,
        r.ShapeGeometry.prototype.addShapeList = function(e, t) {
            for (var n = 0, i = e.length; i > n; n++)
                this.addShape(e[n], t);
            return this
        }
        ,
        r.ShapeGeometry.prototype.addShape = function(e, t) {
            void 0 === t && (t = {});
            var n, i, o, a = void 0 !== t.curveSegments ? t.curveSegments : 12, s = t.material, l = void 0 === t.UVGenerator ? r.ExtrudeGeometry.WorldUVGenerator : t.UVGenerator, c = this.vertices.length, u = e.extractPoints(a), h = u.shape, d = u.holes, f = !r.Shape.Utils.isClockWise(h);
            if (f) {
                for (h = h.reverse(),
                n = 0,
                i = d.length; i > n; n++)
                    o = d[n],
                    r.Shape.Utils.isClockWise(o) && (d[n] = o.reverse());
                f = !1
            }
            var p = r.Shape.Utils.triangulateShape(h, d);
            for (n = 0,
            i = d.length; i > n; n++)
                o = d[n],
                h = h.concat(o);
            var m, v, g = h.length, y = p.length;
            for (n = 0; g > n; n++)
                m = h[n],
                this.vertices.push(new r.Vector3(m.x,m.y,0));
            for (n = 0; y > n; n++) {
                v = p[n];
                var b = v[0] + c
                  , x = v[1] + c
                  , w = v[2] + c;
                this.faces.push(new r.Face3(b,x,w,null,null,s)),
                this.faceVertexUvs[0].push(l.generateTopUV(this, b, x, w))
            }
        }
        ,
        r.LatheGeometry = function(e, t, n, i) {
            r.Geometry.call(this),
            this.type = "LatheGeometry",
            this.parameters = {
                points: e,
                segments: t,
                phiStart: n,
                phiLength: i
            },
            t = t || 12,
            n = n || 0,
            i = i || 2 * Math.PI;
            for (var o = 1 / (e.length - 1), a = 1 / t, s = 0, l = t; l >= s; s++)
                for (var c = n + s * a * i, u = Math.cos(c), h = Math.sin(c), d = 0, f = e.length; f > d; d++) {
                    var p = e[d]
                      , m = new r.Vector3;
                    m.x = u * p.x - h * p.y,
                    m.y = h * p.x + u * p.y,
                    m.z = p.z,
                    this.vertices.push(m)
                }
            for (var v = e.length, s = 0, l = t; l > s; s++)
                for (var d = 0, f = e.length - 1; f > d; d++) {
                    var g = d + v * s
                      , y = g
                      , b = g + v
                      , u = g + 1 + v
                      , x = g + 1
                      , w = s * a
                      , _ = d * o
                      , S = w + a
                      , M = _ + o;
                    this.faces.push(new r.Face3(y,b,x)),
                    this.faceVertexUvs[0].push([new r.Vector2(w,_), new r.Vector2(S,_), new r.Vector2(w,M)]),
                    this.faces.push(new r.Face3(b,u,x)),
                    this.faceVertexUvs[0].push([new r.Vector2(S,_), new r.Vector2(S,M), new r.Vector2(w,M)])
                }
            this.mergeVertices(),
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.LatheGeometry.prototype = Object.create(r.Geometry.prototype),
        r.LatheGeometry.prototype.constructor = r.LatheGeometry,
        r.PlaneGeometry = function(e, t, n, i) {
            console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),
            r.Geometry.call(this),
            this.type = "PlaneGeometry",
            this.parameters = {
                width: e,
                height: t,
                widthSegments: n,
                heightSegments: i
            },
            this.fromBufferGeometry(new r.PlaneBufferGeometry(e,t,n,i))
        }
        ,
        r.PlaneGeometry.prototype = Object.create(r.Geometry.prototype),
        r.PlaneGeometry.prototype.constructor = r.PlaneGeometry,
        r.PlaneBufferGeometry = function(e, t, n, i) {
            r.BufferGeometry.call(this),
            this.type = "PlaneBufferGeometry",
            this.parameters = {
                width: e,
                height: t,
                widthSegments: n,
                heightSegments: i
            };
            for (var o = e / 2, a = t / 2, s = n || 1, l = i || 1, c = s + 1, u = l + 1, h = e / s, d = t / l, f = new Float32Array(c * u * 3), p = new Float32Array(c * u * 3), m = new Float32Array(c * u * 2), v = 0, g = 0, y = 0; u > y; y++)
                for (var b = y * d - a, x = 0; c > x; x++) {
                    var w = x * h - o;
                    f[v] = w,
                    f[v + 1] = -b,
                    p[v + 2] = 1,
                    m[g] = x / s,
                    m[g + 1] = 1 - y / l,
                    v += 3,
                    g += 2
                }
            v = 0;
            for (var _ = new (f.length / 3 > 65535 ? Uint32Array : Uint16Array)(s * l * 6), y = 0; l > y; y++)
                for (var x = 0; s > x; x++) {
                    var S = x + c * y
                      , M = x + c * (y + 1)
                      , C = x + 1 + c * (y + 1)
                      , T = x + 1 + c * y;
                    _[v] = S,
                    _[v + 1] = M,
                    _[v + 2] = T,
                    _[v + 3] = M,
                    _[v + 4] = C,
                    _[v + 5] = T,
                    v += 6
                }
            this.addAttribute("index", new r.BufferAttribute(_,1)),
            this.addAttribute("position", new r.BufferAttribute(f,3)),
            this.addAttribute("normal", new r.BufferAttribute(p,3)),
            this.addAttribute("uv", new r.BufferAttribute(m,2))
        }
        ,
        r.PlaneBufferGeometry.prototype = Object.create(r.BufferGeometry.prototype),
        r.PlaneBufferGeometry.prototype.constructor = r.PlaneBufferGeometry,
        r.RingGeometry = function(e, t, n, i, o, a) {
            r.Geometry.call(this),
            this.type = "RingGeometry",
            this.parameters = {
                innerRadius: e,
                outerRadius: t,
                thetaSegments: n,
                phiSegments: i,
                thetaStart: o,
                thetaLength: a
            },
            e = e || 0,
            t = t || 50,
            o = void 0 !== o ? o : 0,
            a = void 0 !== a ? a : 2 * Math.PI,
            n = void 0 !== n ? Math.max(3, n) : 8,
            i = void 0 !== i ? Math.max(1, i) : 8;
            var s, l, c = [], u = e, h = (t - e) / i;
            for (s = 0; i + 1 > s; s++) {
                for (l = 0; n + 1 > l; l++) {
                    var d = new r.Vector3
                      , f = o + l / n * a;
                    d.x = u * Math.cos(f),
                    d.y = u * Math.sin(f),
                    this.vertices.push(d),
                    c.push(new r.Vector2((d.x / t + 1) / 2,(d.y / t + 1) / 2))
                }
                u += h
            }
            var p = new r.Vector3(0,0,1);
            for (s = 0; i > s; s++) {
                var m = s * (n + 1);
                for (l = 0; n > l; l++) {
                    var f = l + m
                      , v = f
                      , g = f + n + 1
                      , y = f + n + 2;
                    this.faces.push(new r.Face3(v,g,y,[p.clone(), p.clone(), p.clone()])),
                    this.faceVertexUvs[0].push([c[v].clone(), c[g].clone(), c[y].clone()]),
                    v = f,
                    g = f + n + 2,
                    y = f + 1,
                    this.faces.push(new r.Face3(v,g,y,[p.clone(), p.clone(), p.clone()])),
                    this.faceVertexUvs[0].push([c[v].clone(), c[g].clone(), c[y].clone()])
                }
            }
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,u)
        }
        ,
        r.RingGeometry.prototype = Object.create(r.Geometry.prototype),
        r.RingGeometry.prototype.constructor = r.RingGeometry,
        r.SphereGeometry = function(e, t, n, i, o, a, s) {
            r.Geometry.call(this),
            this.type = "SphereGeometry",
            this.parameters = {
                radius: e,
                widthSegments: t,
                heightSegments: n,
                phiStart: i,
                phiLength: o,
                thetaStart: a,
                thetaLength: s
            },
            e = e || 50,
            t = Math.max(3, Math.floor(t) || 8),
            n = Math.max(2, Math.floor(n) || 6),
            i = void 0 !== i ? i : 0,
            o = void 0 !== o ? o : 2 * Math.PI,
            a = void 0 !== a ? a : 0,
            s = void 0 !== s ? s : Math.PI;
            var l, c, u = [], h = [];
            for (c = 0; n >= c; c++) {
                var d = []
                  , f = [];
                for (l = 0; t >= l; l++) {
                    var p = l / t
                      , m = c / n
                      , v = new r.Vector3;
                    v.x = -e * Math.cos(i + p * o) * Math.sin(a + m * s),
                    v.y = e * Math.cos(a + m * s),
                    v.z = e * Math.sin(i + p * o) * Math.sin(a + m * s),
                    this.vertices.push(v),
                    d.push(this.vertices.length - 1),
                    f.push(new r.Vector2(p,1 - m))
                }
                u.push(d),
                h.push(f)
            }
            for (c = 0; n > c; c++)
                for (l = 0; t > l; l++) {
                    var g = u[c][l + 1]
                      , y = u[c][l]
                      , b = u[c + 1][l]
                      , x = u[c + 1][l + 1]
                      , w = this.vertices[g].clone().normalize()
                      , _ = this.vertices[y].clone().normalize()
                      , S = this.vertices[b].clone().normalize()
                      , M = this.vertices[x].clone().normalize()
                      , C = h[c][l + 1].clone()
                      , T = h[c][l].clone()
                      , E = h[c + 1][l].clone()
                      , k = h[c + 1][l + 1].clone();
                    Math.abs(this.vertices[g].y) === e ? (C.x = (C.x + T.x) / 2,
                    this.faces.push(new r.Face3(g,b,x,[w, S, M])),
                    this.faceVertexUvs[0].push([C, E, k])) : Math.abs(this.vertices[b].y) === e ? (E.x = (E.x + k.x) / 2,
                    this.faces.push(new r.Face3(g,y,b,[w, _, S])),
                    this.faceVertexUvs[0].push([C, T, E])) : (this.faces.push(new r.Face3(g,y,x,[w, _, M])),
                    this.faceVertexUvs[0].push([C, T, k]),
                    this.faces.push(new r.Face3(y,b,x,[_.clone(), S, M.clone()])),
                    this.faceVertexUvs[0].push([T.clone(), E, k.clone()]))
                }
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,e)
        }
        ,
        r.SphereGeometry.prototype = Object.create(r.Geometry.prototype),
        r.SphereGeometry.prototype.constructor = r.SphereGeometry,
        r.TextGeometry = function(e, t) {
            t = t || {};
            var n = r.FontUtils.generateShapes(e, t);
            t.amount = void 0 !== t.height ? t.height : 50,
            void 0 === t.bevelThickness && (t.bevelThickness = 10),
            void 0 === t.bevelSize && (t.bevelSize = 8),
            void 0 === t.bevelEnabled && (t.bevelEnabled = !1),
            r.ExtrudeGeometry.call(this, n, t),
            this.type = "TextGeometry"
        }
        ,
        r.TextGeometry.prototype = Object.create(r.ExtrudeGeometry.prototype),
        r.TextGeometry.prototype.constructor = r.TextGeometry,
        r.TorusGeometry = function(e, t, n, i, o) {
            r.Geometry.call(this),
            this.type = "TorusGeometry",
            this.parameters = {
                radius: e,
                tube: t,
                radialSegments: n,
                tubularSegments: i,
                arc: o
            },
            e = e || 100,
            t = t || 40,
            n = n || 8,
            i = i || 6,
            o = o || 2 * Math.PI;
            for (var a = new r.Vector3, s = [], l = [], c = 0; n >= c; c++)
                for (var u = 0; i >= u; u++) {
                    var h = u / i * o
                      , d = c / n * Math.PI * 2;
                    a.x = e * Math.cos(h),
                    a.y = e * Math.sin(h);
                    var f = new r.Vector3;
                    f.x = (e + t * Math.cos(d)) * Math.cos(h),
                    f.y = (e + t * Math.cos(d)) * Math.sin(h),
                    f.z = t * Math.sin(d),
                    this.vertices.push(f),
                    s.push(new r.Vector2(u / i,c / n)),
                    l.push(f.clone().sub(a).normalize())
                }
            for (var c = 1; n >= c; c++)
                for (var u = 1; i >= u; u++) {
                    var p = (i + 1) * c + u - 1
                      , m = (i + 1) * (c - 1) + u - 1
                      , v = (i + 1) * (c - 1) + u
                      , g = (i + 1) * c + u
                      , y = new r.Face3(p,m,g,[l[p].clone(), l[m].clone(), l[g].clone()]);
                    this.faces.push(y),
                    this.faceVertexUvs[0].push([s[p].clone(), s[m].clone(), s[g].clone()]),
                    y = new r.Face3(m,v,g,[l[m].clone(), l[v].clone(), l[g].clone()]),
                    this.faces.push(y),
                    this.faceVertexUvs[0].push([s[m].clone(), s[v].clone(), s[g].clone()])
                }
            this.computeFaceNormals()
        }
        ,
        r.TorusGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TorusGeometry.prototype.constructor = r.TorusGeometry,
        r.TorusKnotGeometry = function(e, t, n, i, o, a, s) {
            function l(e, t, n, i, o) {
                var a = Math.cos(e)
                  , s = Math.sin(e)
                  , l = t / n * e
                  , c = Math.cos(l)
                  , u = i * (2 + c) * .5 * a
                  , h = i * (2 + c) * s * .5
                  , d = o * i * Math.sin(l) * .5;
                return new r.Vector3(u,h,d)
            }
            r.Geometry.call(this),
            this.type = "TorusKnotGeometry",
            this.parameters = {
                radius: e,
                tube: t,
                radialSegments: n,
                tubularSegments: i,
                p: o,
                q: a,
                heightScale: s
            },
            e = e || 100,
            t = t || 40,
            n = n || 64,
            i = i || 8,
            o = o || 2,
            a = a || 3,
            s = s || 1;
            for (var c = new Array(n), u = new r.Vector3, h = new r.Vector3, d = new r.Vector3, f = 0; n > f; ++f) {
                c[f] = new Array(i);
                var p = f / n * 2 * o * Math.PI
                  , m = l(p, a, o, e, s)
                  , v = l(p + .01, a, o, e, s);
                u.subVectors(v, m),
                h.addVectors(v, m),
                d.crossVectors(u, h),
                h.crossVectors(d, u),
                d.normalize(),
                h.normalize();
                for (var g = 0; i > g; ++g) {
                    var y = g / i * 2 * Math.PI
                      , b = -t * Math.cos(y)
                      , x = t * Math.sin(y)
                      , w = new r.Vector3;
                    w.x = m.x + b * h.x + x * d.x,
                    w.y = m.y + b * h.y + x * d.y,
                    w.z = m.z + b * h.z + x * d.z,
                    c[f][g] = this.vertices.push(w) - 1
                }
            }
            for (var f = 0; n > f; ++f)
                for (var g = 0; i > g; ++g) {
                    var _ = (f + 1) % n
                      , S = (g + 1) % i
                      , M = c[f][g]
                      , C = c[_][g]
                      , T = c[_][S]
                      , E = c[f][S]
                      , k = new r.Vector2(f / n,g / i)
                      , A = new r.Vector2((f + 1) / n,g / i)
                      , P = new r.Vector2((f + 1) / n,(g + 1) / i)
                      , L = new r.Vector2(f / n,(g + 1) / i);
                    this.faces.push(new r.Face3(M,C,E)),
                    this.faceVertexUvs[0].push([k, A, L]),
                    this.faces.push(new r.Face3(C,T,E)),
                    this.faceVertexUvs[0].push([A.clone(), P, L.clone()])
                }
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.TorusKnotGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TorusKnotGeometry.prototype.constructor = r.TorusKnotGeometry,
        r.TubeGeometry = function(e, t, n, i, o, a) {
            function s(e, t, n) {
                return P.vertices.push(new r.Vector3(e,t,n)) - 1
            }
            r.Geometry.call(this),
            this.type = "TubeGeometry",
            this.parameters = {
                path: e,
                segments: t,
                radius: n,
                radialSegments: i,
                closed: o
            },
            t = t || 64,
            n = n || 1,
            i = i || 8,
            o = o || !1,
            a = a || r.TubeGeometry.NoTaper;
            var l, c, u, h, d, f, p, m, v, g, y, b, x, w, _, S, M, C, T, E, k, A = [], P = this, L = t + 1, O = new r.Vector3, R = new r.TubeGeometry.FrenetFrames(e,t,o), F = R.tangents, B = R.normals, D = R.binormals;
            for (this.tangents = F,
            this.normals = B,
            this.binormals = D,
            g = 0; L > g; g++)
                for (A[g] = [],
                h = g / (L - 1),
                v = e.getPointAt(h),
                l = F[g],
                c = B[g],
                u = D[g],
                f = n * a(h),
                y = 0; i > y; y++)
                    d = y / i * 2 * Math.PI,
                    p = -f * Math.cos(d),
                    m = f * Math.sin(d),
                    O.copy(v),
                    O.x += p * c.x + m * u.x,
                    O.y += p * c.y + m * u.y,
                    O.z += p * c.z + m * u.z,
                    A[g][y] = s(O.x, O.y, O.z);
            for (g = 0; t > g; g++)
                for (y = 0; i > y; y++)
                    b = o ? (g + 1) % t : g + 1,
                    x = (y + 1) % i,
                    w = A[g][y],
                    _ = A[b][y],
                    S = A[b][x],
                    M = A[g][x],
                    C = new r.Vector2(g / t,y / i),
                    T = new r.Vector2((g + 1) / t,y / i),
                    E = new r.Vector2((g + 1) / t,(y + 1) / i),
                    k = new r.Vector2(g / t,(y + 1) / i),
                    this.faces.push(new r.Face3(w,_,M)),
                    this.faceVertexUvs[0].push([C, T, k]),
                    this.faces.push(new r.Face3(_,S,M)),
                    this.faceVertexUvs[0].push([T.clone(), E, k.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.TubeGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TubeGeometry.prototype.constructor = r.TubeGeometry,
        r.TubeGeometry.NoTaper = function(e) {
            return 1
        }
        ,
        r.TubeGeometry.SinusoidalTaper = function(e) {
            return Math.sin(Math.PI * e)
        }
        ,
        r.TubeGeometry.FrenetFrames = function(e, t, n) {
            function i() {
                p[0] = new r.Vector3,
                m[0] = new r.Vector3,
                a = Number.MAX_VALUE,
                s = Math.abs(f[0].x),
                l = Math.abs(f[0].y),
                c = Math.abs(f[0].z),
                a >= s && (a = s,
                d.set(1, 0, 0)),
                a >= l && (a = l,
                d.set(0, 1, 0)),
                a >= c && d.set(0, 0, 1),
                v.crossVectors(f[0], d).normalize(),
                p[0].crossVectors(f[0], v),
                m[0].crossVectors(f[0], p[0])
            }
            var o, a, s, l, c, u, h, d = new r.Vector3, f = [], p = [], m = [], v = new r.Vector3, g = new r.Matrix4, y = t + 1, b = 1e-4;
            for (this.tangents = f,
            this.normals = p,
            this.binormals = m,
            u = 0; y > u; u++)
                h = u / (y - 1),
                f[u] = e.getTangentAt(h),
                f[u].normalize();
            for (i(),
            u = 1; y > u; u++)
                p[u] = p[u - 1].clone(),
                m[u] = m[u - 1].clone(),
                v.crossVectors(f[u - 1], f[u]),
                v.length() > b && (v.normalize(),
                o = Math.acos(r.Math.clamp(f[u - 1].dot(f[u]), -1, 1)),
                p[u].applyMatrix4(g.makeRotationAxis(v, o))),
                m[u].crossVectors(f[u], p[u]);
            if (n)
                for (o = Math.acos(r.Math.clamp(p[0].dot(p[y - 1]), -1, 1)),
                o /= y - 1,
                f[0].dot(v.crossVectors(p[0], p[y - 1])) > 0 && (o = -o),
                u = 1; y > u; u++)
                    p[u].applyMatrix4(g.makeRotationAxis(f[u], o * u)),
                    m[u].crossVectors(f[u], p[u])
        }
        ,
        r.PolyhedronGeometry = function(e, t, n, i) {
            function o(e) {
                var t = e.normalize().clone();
                t.index = h.vertices.push(t) - 1;
                var n = l(e) / 2 / Math.PI + .5
                  , i = c(e) / Math.PI + .5;
                return t.uv = new r.Vector2(n,1 - i),
                t
            }
            function a(e, t, n) {
                var i = new r.Face3(e.index,t.index,n.index,[e.clone(), t.clone(), n.clone()]);
                h.faces.push(i),
                x.copy(e).add(t).add(n).divideScalar(3);
                var o = l(x);
                h.faceVertexUvs[0].push([u(e.uv, e, o), u(t.uv, t, o), u(n.uv, n, o)])
            }
            function s(e, t) {
                for (var n = Math.pow(2, t), i = o(h.vertices[e.a]), r = o(h.vertices[e.b]), s = o(h.vertices[e.c]), l = [], c = 0; n >= c; c++) {
                    l[c] = [];
                    for (var u = o(i.clone().lerp(s, c / n)), d = o(r.clone().lerp(s, c / n)), f = n - c, p = 0; f >= p; p++)
                        0 == p && c == n ? l[c][p] = u : l[c][p] = o(u.clone().lerp(d, p / f))
                }
                for (var c = 0; n > c; c++)
                    for (var p = 0; 2 * (n - c) - 1 > p; p++) {
                        var m = Math.floor(p / 2);
                        p % 2 == 0 ? a(l[c][m + 1], l[c + 1][m], l[c][m]) : a(l[c][m + 1], l[c + 1][m + 1], l[c + 1][m])
                    }
            }
            function l(e) {
                return Math.atan2(e.z, -e.x)
            }
            function c(e) {
                return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
            }
            function u(e, t, n) {
                return 0 > n && 1 === e.x && (e = new r.Vector2(e.x - 1,e.y)),
                0 === t.x && 0 === t.z && (e = new r.Vector2(n / 2 / Math.PI + .5,e.y)),
                e.clone()
            }
            r.Geometry.call(this),
            this.type = "PolyhedronGeometry",
            this.parameters = {
                vertices: e,
                indices: t,
                radius: n,
                detail: i
            },
            n = n || 1,
            i = i || 0;
            for (var h = this, d = 0, f = e.length; f > d; d += 3)
                o(new r.Vector3(e[d],e[d + 1],e[d + 2]));
            for (var p = this.vertices, m = [], d = 0, v = 0, f = t.length; f > d; d += 3,
            v++) {
                var g = p[t[d]]
                  , y = p[t[d + 1]]
                  , b = p[t[d + 2]];
                m[v] = new r.Face3(g.index,y.index,b.index,[g.clone(), y.clone(), b.clone()])
            }
            for (var x = new r.Vector3, d = 0, f = m.length; f > d; d++)
                s(m[d], i);
            for (var d = 0, f = this.faceVertexUvs[0].length; f > d; d++) {
                var w = this.faceVertexUvs[0][d]
                  , _ = w[0].x
                  , S = w[1].x
                  , M = w[2].x
                  , C = Math.max(_, Math.max(S, M))
                  , T = Math.min(_, Math.min(S, M));
                C > .9 && .1 > T && (.2 > _ && (w[0].x += 1),
                .2 > S && (w[1].x += 1),
                .2 > M && (w[2].x += 1))
            }
            for (var d = 0, f = this.vertices.length; f > d; d++)
                this.vertices[d].multiplyScalar(n);
            this.mergeVertices(),
            this.computeFaceNormals(),
            this.boundingSphere = new r.Sphere(new r.Vector3,n)
        }
        ,
        r.PolyhedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.PolyhedronGeometry.prototype.constructor = r.PolyhedronGeometry,
        r.DodecahedronGeometry = function(e, t) {
            this.parameters = {
                radius: e,
                detail: t
            };
            var n = (1 + Math.sqrt(5)) / 2
              , i = 1 / n
              , o = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i]
              , a = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
            r.PolyhedronGeometry.call(this, o, a, e, t)
        }
        ,
        r.DodecahedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.DodecahedronGeometry.prototype.constructor = r.DodecahedronGeometry,
        r.IcosahedronGeometry = function(e, t) {
            var n = (1 + Math.sqrt(5)) / 2
              , i = [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1]
              , o = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
            r.PolyhedronGeometry.call(this, i, o, e, t),
            this.type = "IcosahedronGeometry",
            this.parameters = {
                radius: e,
                detail: t
            }
        }
        ,
        r.IcosahedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.IcosahedronGeometry.prototype.constructor = r.IcosahedronGeometry,
        r.OctahedronGeometry = function(e, t) {
            this.parameters = {
                radius: e,
                detail: t
            };
            var n = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1]
              , i = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
            r.PolyhedronGeometry.call(this, n, i, e, t),
            this.type = "OctahedronGeometry",
            this.parameters = {
                radius: e,
                detail: t
            }
        }
        ,
        r.OctahedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.OctahedronGeometry.prototype.constructor = r.OctahedronGeometry,
        r.TetrahedronGeometry = function(e, t) {
            var n = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1]
              , i = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
            r.PolyhedronGeometry.call(this, n, i, e, t),
            this.type = "TetrahedronGeometry",
            this.parameters = {
                radius: e,
                detail: t
            }
        }
        ,
        r.TetrahedronGeometry.prototype = Object.create(r.Geometry.prototype),
        r.TetrahedronGeometry.prototype.constructor = r.TetrahedronGeometry,
        r.ParametricGeometry = function(e, t, n) {
            r.Geometry.call(this),
            this.type = "ParametricGeometry",
            this.parameters = {
                func: e,
                slices: t,
                stacks: n
            };
            var i, o, a, s, l, c = this.vertices, u = this.faces, h = this.faceVertexUvs[0], d = t + 1;
            for (i = 0; n >= i; i++)
                for (l = i / n,
                o = 0; t >= o; o++)
                    s = o / t,
                    a = e(s, l),
                    c.push(a);
            var f, p, m, v, g, y, b, x;
            for (i = 0; n > i; i++)
                for (o = 0; t > o; o++)
                    f = i * d + o,
                    p = i * d + o + 1,
                    m = (i + 1) * d + o + 1,
                    v = (i + 1) * d + o,
                    g = new r.Vector2(o / t,i / n),
                    y = new r.Vector2((o + 1) / t,i / n),
                    b = new r.Vector2((o + 1) / t,(i + 1) / n),
                    x = new r.Vector2(o / t,(i + 1) / n),
                    u.push(new r.Face3(f,p,v)),
                    h.push([g, y, x]),
                    u.push(new r.Face3(p,m,v)),
                    h.push([y.clone(), b, x.clone()]);
            this.computeFaceNormals(),
            this.computeVertexNormals()
        }
        ,
        r.ParametricGeometry.prototype = Object.create(r.Geometry.prototype),
        r.ParametricGeometry.prototype.constructor = r.ParametricGeometry,
        r.AxisHelper = function(e) {
            e = e || 1;
            var t = new Float32Array([0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e])
              , n = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1])
              , i = new r.BufferGeometry;
            i.addAttribute("position", new r.BufferAttribute(t,3)),
            i.addAttribute("color", new r.BufferAttribute(n,3));
            var o = new r.LineBasicMaterial({
                vertexColors: r.VertexColors
            });
            r.Line.call(this, i, o, r.LinePieces)
        }
        ,
        r.AxisHelper.prototype = Object.create(r.Line.prototype),
        r.AxisHelper.prototype.constructor = r.AxisHelper,
        r.ArrowHelper = function() {
            var e = new r.Geometry;
            e.vertices.push(new r.Vector3(0,0,0), new r.Vector3(0,1,0));
            var t = new r.CylinderGeometry(0,.5,1,5,1);
            return t.applyMatrix((new r.Matrix4).makeTranslation(0, -.5, 0)),
            function(n, i, o, a, s, l) {
                r.Object3D.call(this),
                void 0 === a && (a = 16776960),
                void 0 === o && (o = 1),
                void 0 === s && (s = .2 * o),
                void 0 === l && (l = .2 * s),
                this.position.copy(i),
                this.line = new r.Line(e,new r.LineBasicMaterial({
                    color: a
                })),
                this.line.matrixAutoUpdate = !1,
                this.add(this.line),
                this.cone = new r.Mesh(t,new r.MeshBasicMaterial({
                    color: a
                })),
                this.cone.matrixAutoUpdate = !1,
                this.add(this.cone),
                this.setDirection(n),
                this.setLength(o, s, l)
            }
        }(),
        r.ArrowHelper.prototype = Object.create(r.Object3D.prototype),
        r.ArrowHelper.prototype.constructor = r.ArrowHelper,
        r.ArrowHelper.prototype.setDirection = function() {
            var e, t = new r.Vector3;
            return function(n) {
                n.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : n.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (t.set(n.z, 0, -n.x).normalize(),
                e = Math.acos(n.y),
                this.quaternion.setFromAxisAngle(t, e))
            }
        }(),
        r.ArrowHelper.prototype.setLength = function(e, t, n) {
            void 0 === t && (t = .2 * e),
            void 0 === n && (n = .2 * t),
            this.line.scale.set(1, e - t, 1),
            this.line.updateMatrix(),
            this.cone.scale.set(n, t, n),
            this.cone.position.y = e,
            this.cone.updateMatrix()
        }
        ,
        r.ArrowHelper.prototype.setColor = function(e) {
            this.line.material.color.set(e),
            this.cone.material.color.set(e)
        }
        ,
        r.BoxHelper = function(e) {
            var t = new r.BufferGeometry;
            t.addAttribute("position", new r.BufferAttribute(new Float32Array(72),3)),
            r.Line.call(this, t, new r.LineBasicMaterial({
                color: 16776960
            }), r.LinePieces),
            void 0 !== e && this.update(e)
        }
        ,
        r.BoxHelper.prototype = Object.create(r.Line.prototype),
        r.BoxHelper.prototype.constructor = r.BoxHelper,
        r.BoxHelper.prototype.update = function(e) {
            var t = e.geometry;
            null === t.boundingBox && t.computeBoundingBox();
            var n = t.boundingBox.min
              , i = t.boundingBox.max
              , r = this.geometry.attributes.position.array;
            r[0] = i.x,
            r[1] = i.y,
            r[2] = i.z,
            r[3] = n.x,
            r[4] = i.y,
            r[5] = i.z,
            r[6] = n.x,
            r[7] = i.y,
            r[8] = i.z,
            r[9] = n.x,
            r[10] = n.y,
            r[11] = i.z,
            r[12] = n.x,
            r[13] = n.y,
            r[14] = i.z,
            r[15] = i.x,
            r[16] = n.y,
            r[17] = i.z,
            r[18] = i.x,
            r[19] = n.y,
            r[20] = i.z,
            r[21] = i.x,
            r[22] = i.y,
            r[23] = i.z,
            r[24] = i.x,
            r[25] = i.y,
            r[26] = n.z,
            r[27] = n.x,
            r[28] = i.y,
            r[29] = n.z,
            r[30] = n.x,
            r[31] = i.y,
            r[32] = n.z,
            r[33] = n.x,
            r[34] = n.y,
            r[35] = n.z,
            r[36] = n.x,
            r[37] = n.y,
            r[38] = n.z,
            r[39] = i.x,
            r[40] = n.y,
            r[41] = n.z,
            r[42] = i.x,
            r[43] = n.y,
            r[44] = n.z,
            r[45] = i.x,
            r[46] = i.y,
            r[47] = n.z,
            r[48] = i.x,
            r[49] = i.y,
            r[50] = i.z,
            r[51] = i.x,
            r[52] = i.y,
            r[53] = n.z,
            r[54] = n.x,
            r[55] = i.y,
            r[56] = i.z,
            r[57] = n.x,
            r[58] = i.y,
            r[59] = n.z,
            r[60] = n.x,
            r[61] = n.y,
            r[62] = i.z,
            r[63] = n.x,
            r[64] = n.y,
            r[65] = n.z,
            r[66] = i.x,
            r[67] = n.y,
            r[68] = i.z,
            r[69] = i.x,
            r[70] = n.y,
            r[71] = n.z,
            this.geometry.attributes.position.needsUpdate = !0,
            this.geometry.computeBoundingSphere(),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.BoundingBoxHelper = function(e, t) {
            var n = void 0 !== t ? t : 8947848;
            this.object = e,
            this.box = new r.Box3,
            r.Mesh.call(this, new r.BoxGeometry(1,1,1), new r.MeshBasicMaterial({
                color: n,
                wireframe: !0
            }))
        }
        ,
        r.BoundingBoxHelper.prototype = Object.create(r.Mesh.prototype),
        r.BoundingBoxHelper.prototype.constructor = r.BoundingBoxHelper,
        r.BoundingBoxHelper.prototype.update = function() {
            this.box.setFromObject(this.object),
            this.box.size(this.scale),
            this.box.center(this.position)
        }
        ,
        r.CameraHelper = function(e) {
            function t(e, t, i) {
                n(e, i),
                n(t, i)
            }
            function n(e, t) {
                i.vertices.push(new r.Vector3),
                i.colors.push(new r.Color(t)),
                void 0 === a[e] && (a[e] = []),
                a[e].push(i.vertices.length - 1)
            }
            var i = new r.Geometry
              , o = new r.LineBasicMaterial({
                color: 16777215,
                vertexColors: r.FaceColors
            })
              , a = {}
              , s = 16755200
              , l = 16711680
              , c = 43775
              , u = 16777215
              , h = 3355443;
            t("n1", "n2", s),
            t("n2", "n4", s),
            t("n4", "n3", s),
            t("n3", "n1", s),
            t("f1", "f2", s),
            t("f2", "f4", s),
            t("f4", "f3", s),
            t("f3", "f1", s),
            t("n1", "f1", s),
            t("n2", "f2", s),
            t("n3", "f3", s),
            t("n4", "f4", s),
            t("p", "n1", l),
            t("p", "n2", l),
            t("p", "n3", l),
            t("p", "n4", l),
            t("u1", "u2", c),
            t("u2", "u3", c),
            t("u3", "u1", c),
            t("c", "t", u),
            t("p", "c", h),
            t("cn1", "cn2", h),
            t("cn3", "cn4", h),
            t("cf1", "cf2", h),
            t("cf3", "cf4", h),
            r.Line.call(this, i, o, r.LinePieces),
            this.camera = e,
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.pointMap = a,
            this.update()
        }
        ,
        r.CameraHelper.prototype = Object.create(r.Line.prototype),
        r.CameraHelper.prototype.constructor = r.CameraHelper,
        r.CameraHelper.prototype.update = function() {
            var e, t, n = new r.Vector3, i = new r.Camera, o = function(r, o, a, s) {
                n.set(o, a, s).unproject(i);
                var l = t[r];
                if (void 0 !== l)
                    for (var c = 0, u = l.length; u > c; c++)
                        e.vertices[l[c]].copy(n)
            };
            return function() {
                e = this.geometry,
                t = this.pointMap;
                var n = 1
                  , r = 1;
                i.projectionMatrix.copy(this.camera.projectionMatrix),
                o("c", 0, 0, -1),
                o("t", 0, 0, 1),
                o("n1", -n, -r, -1),
                o("n2", n, -r, -1),
                o("n3", -n, r, -1),
                o("n4", n, r, -1),
                o("f1", -n, -r, 1),
                o("f2", n, -r, 1),
                o("f3", -n, r, 1),
                o("f4", n, r, 1),
                o("u1", .7 * n, 1.1 * r, -1),
                o("u2", .7 * -n, 1.1 * r, -1),
                o("u3", 0, 2 * r, -1),
                o("cf1", -n, 0, 1),
                o("cf2", n, 0, 1),
                o("cf3", 0, -r, 1),
                o("cf4", 0, r, 1),
                o("cn1", -n, 0, -1),
                o("cn2", n, 0, -1),
                o("cn3", 0, -r, -1),
                o("cn4", 0, r, -1),
                e.verticesNeedUpdate = !0
            }
        }(),
        r.DirectionalLightHelper = function(e, t) {
            r.Object3D.call(this),
            this.light = e,
            this.light.updateMatrixWorld(),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1,
            t = t || 1;
            var n = new r.Geometry;
            n.vertices.push(new r.Vector3(-t,t,0), new r.Vector3(t,t,0), new r.Vector3(t,-t,0), new r.Vector3(-t,-t,0), new r.Vector3(-t,t,0));
            var i = new r.LineBasicMaterial({
                fog: !1
            });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            this.lightPlane = new r.Line(n,i),
            this.add(this.lightPlane),
            n = new r.Geometry,
            n.vertices.push(new r.Vector3, new r.Vector3),
            i = new r.LineBasicMaterial({
                fog: !1
            }),
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            this.targetLine = new r.Line(n,i),
            this.add(this.targetLine),
            this.update()
        }
        ,
        r.DirectionalLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.DirectionalLightHelper.prototype.constructor = r.DirectionalLightHelper,
        r.DirectionalLightHelper.prototype.dispose = function() {
            this.lightPlane.geometry.dispose(),
            this.lightPlane.material.dispose(),
            this.targetLine.geometry.dispose(),
            this.targetLine.material.dispose()
        }
        ,
        r.DirectionalLightHelper.prototype.update = function() {
            var e = new r.Vector3
              , t = new r.Vector3
              , n = new r.Vector3;
            return function() {
                e.setFromMatrixPosition(this.light.matrixWorld),
                t.setFromMatrixPosition(this.light.target.matrixWorld),
                n.subVectors(t, e),
                this.lightPlane.lookAt(n),
                this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),
                this.targetLine.geometry.vertices[1].copy(n),
                this.targetLine.geometry.verticesNeedUpdate = !0,
                this.targetLine.material.color.copy(this.lightPlane.material.color)
            }
        }(),
        r.EdgesHelper = function(e, t, n) {
            var i = void 0 !== t ? t : 16777215;
            n = void 0 !== n ? n : 1;
            var o, a = Math.cos(r.Math.degToRad(n)), s = [0, 0], l = {}, c = function(e, t) {
                return e - t
            }, u = ["a", "b", "c"], h = new r.BufferGeometry;
            e.geometry instanceof r.BufferGeometry ? (o = new r.Geometry,
            o.fromBufferGeometry(e.geometry)) : o = e.geometry.clone(),
            o.mergeVertices(),
            o.computeFaceNormals();
            for (var d = o.vertices, f = o.faces, p = 0, m = 0, v = f.length; v > m; m++)
                for (var g = f[m], y = 0; 3 > y; y++) {
                    s[0] = g[u[y]],
                    s[1] = g[u[(y + 1) % 3]],
                    s.sort(c);
                    var b = s.toString();
                    void 0 === l[b] ? (l[b] = {
                        vert1: s[0],
                        vert2: s[1],
                        face1: m,
                        face2: void 0
                    },
                    p++) : l[b].face2 = m
                }
            var x = new Float32Array(2 * p * 3)
              , w = 0;
            for (var b in l) {
                var _ = l[b];
                if (void 0 === _.face2 || f[_.face1].normal.dot(f[_.face2].normal) <= a) {
                    var S = d[_.vert1];
                    x[w++] = S.x,
                    x[w++] = S.y,
                    x[w++] = S.z,
                    S = d[_.vert2],
                    x[w++] = S.x,
                    x[w++] = S.y,
                    x[w++] = S.z
                }
            }
            h.addAttribute("position", new r.BufferAttribute(x,3)),
            r.Line.call(this, h, new r.LineBasicMaterial({
                color: i
            }), r.LinePieces),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.EdgesHelper.prototype = Object.create(r.Line.prototype),
        r.EdgesHelper.prototype.constructor = r.EdgesHelper,
        r.FaceNormalsHelper = function(e, t, n, i) {
            this.object = e,
            this.size = void 0 !== t ? t : 1;
            for (var o = void 0 !== n ? n : 16776960, a = void 0 !== i ? i : 1, s = new r.Geometry, l = this.object.geometry.faces, c = 0, u = l.length; u > c; c++)
                s.vertices.push(new r.Vector3, new r.Vector3);
            r.Line.call(this, s, new r.LineBasicMaterial({
                color: o,
                linewidth: a
            }), r.LinePieces),
            this.matrixAutoUpdate = !1,
            this.normalMatrix = new r.Matrix3,
            this.update()
        }
        ,
        r.FaceNormalsHelper.prototype = Object.create(r.Line.prototype),
        r.FaceNormalsHelper.prototype.constructor = r.FaceNormalsHelper,
        r.FaceNormalsHelper.prototype.update = function() {
            var e = this.geometry.vertices
              , t = this.object
              , n = t.geometry.vertices
              , i = t.geometry.faces
              , r = t.matrixWorld;
            t.updateMatrixWorld(!0),
            this.normalMatrix.getNormalMatrix(r);
            for (var o = 0, a = 0, s = i.length; s > o; o++,
            a += 2) {
                var l = i[o];
                e[a].copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(r),
                e[a + 1].copy(l.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])
            }
            return this.geometry.verticesNeedUpdate = !0,
            this
        }
        ,
        r.GridHelper = function(e, t) {
            var n = new r.Geometry
              , i = new r.LineBasicMaterial({
                vertexColors: r.VertexColors
            });
            this.color1 = new r.Color(4473924),
            this.color2 = new r.Color(8947848);
            for (var o = -e; e >= o; o += t) {
                n.vertices.push(new r.Vector3(-e,0,o), new r.Vector3(e,0,o), new r.Vector3(o,0,-e), new r.Vector3(o,0,e));
                var a = 0 === o ? this.color1 : this.color2;
                n.colors.push(a, a, a, a)
            }
            r.Line.call(this, n, i, r.LinePieces)
        }
        ,
        r.GridHelper.prototype = Object.create(r.Line.prototype),
        r.GridHelper.prototype.constructor = r.GridHelper,
        r.GridHelper.prototype.setColors = function(e, t) {
            this.color1.set(e),
            this.color2.set(t),
            this.geometry.colorsNeedUpdate = !0
        }
        ,
        r.HemisphereLightHelper = function(e, t) {
            r.Object3D.call(this),
            this.light = e,
            this.light.updateMatrixWorld(),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.colors = [new r.Color, new r.Color];
            var n = new r.SphereGeometry(t,4,2);
            n.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI / 2));
            for (var i = 0, o = 8; o > i; i++)
                n.faces[i].color = this.colors[4 > i ? 0 : 1];
            var a = new r.MeshBasicMaterial({
                vertexColors: r.FaceColors,
                wireframe: !0
            });
            this.lightSphere = new r.Mesh(n,a),
            this.add(this.lightSphere),
            this.update()
        }
        ,
        r.HemisphereLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.HemisphereLightHelper.prototype.constructor = r.HemisphereLightHelper,
        r.HemisphereLightHelper.prototype.dispose = function() {
            this.lightSphere.geometry.dispose(),
            this.lightSphere.material.dispose()
        }
        ,
        r.HemisphereLightHelper.prototype.update = function() {
            var e = new r.Vector3;
            return function() {
                this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),
                this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),
                this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),
                this.lightSphere.geometry.colorsNeedUpdate = !0
            }
        }(),
        r.PointLightHelper = function(e, t) {
            this.light = e,
            this.light.updateMatrixWorld();
            var n = new r.SphereGeometry(t,4,2)
              , i = new r.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
            i.color.copy(this.light.color).multiplyScalar(this.light.intensity),
            r.Mesh.call(this, n, i),
            this.matrix = this.light.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.PointLightHelper.prototype = Object.create(r.Mesh.prototype),
        r.PointLightHelper.prototype.constructor = r.PointLightHelper,
        r.PointLightHelper.prototype.dispose = function() {
            this.geometry.dispose(),
            this.material.dispose()
        }
        ,
        r.PointLightHelper.prototype.update = function() {
            this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }
        ,
        r.SkeletonHelper = function(e) {
            this.bones = this.getBoneList(e);
            for (var t = new r.Geometry, n = 0; n < this.bones.length; n++) {
                var i = this.bones[n];
                i.parent instanceof r.Bone && (t.vertices.push(new r.Vector3),
                t.vertices.push(new r.Vector3),
                t.colors.push(new r.Color(0,0,1)),
                t.colors.push(new r.Color(0,1,0)))
            }
            var o = new r.LineBasicMaterial({
                vertexColors: r.VertexColors,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            });
            r.Line.call(this, t, o, r.LinePieces),
            this.root = e,
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1,
            this.update()
        }
        ,
        r.SkeletonHelper.prototype = Object.create(r.Line.prototype),
        r.SkeletonHelper.prototype.constructor = r.SkeletonHelper,
        r.SkeletonHelper.prototype.getBoneList = function(e) {
            var t = [];
            e instanceof r.Bone && t.push(e);
            for (var n = 0; n < e.children.length; n++)
                t.push.apply(t, this.getBoneList(e.children[n]));
            return t
        }
        ,
        r.SkeletonHelper.prototype.update = function() {
            for (var e = this.geometry, t = (new r.Matrix4).getInverse(this.root.matrixWorld), n = new r.Matrix4, i = 0, o = 0; o < this.bones.length; o++) {
                var a = this.bones[o];
                a.parent instanceof r.Bone && (n.multiplyMatrices(t, a.matrixWorld),
                e.vertices[i].setFromMatrixPosition(n),
                n.multiplyMatrices(t, a.parent.matrixWorld),
                e.vertices[i + 1].setFromMatrixPosition(n),
                i += 2)
            }
            e.verticesNeedUpdate = !0,
            e.computeBoundingSphere()
        }
        ,
        r.SpotLightHelper = function(e) {
            r.Object3D.call(this),
            this.light = e,
            this.light.updateMatrixWorld(),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1;
            var t = new r.CylinderGeometry(0,1,1,8,1,!0);
            t.applyMatrix((new r.Matrix4).makeTranslation(0, -.5, 0)),
            t.applyMatrix((new r.Matrix4).makeRotationX(-Math.PI / 2));
            var n = new r.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
            this.cone = new r.Mesh(t,n),
            this.add(this.cone),
            this.update()
        }
        ,
        r.SpotLightHelper.prototype = Object.create(r.Object3D.prototype),
        r.SpotLightHelper.prototype.constructor = r.SpotLightHelper,
        r.SpotLightHelper.prototype.dispose = function() {
            this.cone.geometry.dispose(),
            this.cone.material.dispose()
        }
        ,
        r.SpotLightHelper.prototype.update = function() {
            var e = new r.Vector3
              , t = new r.Vector3;
            return function() {
                var n = this.light.distance ? this.light.distance : 1e4
                  , i = n * Math.tan(this.light.angle);
                this.cone.scale.set(i, i, n),
                e.setFromMatrixPosition(this.light.matrixWorld),
                t.setFromMatrixPosition(this.light.target.matrixWorld),
                this.cone.lookAt(t.sub(e)),
                this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
            }
        }(),
        r.VertexNormalsHelper = function(e, t, n, i) {
            this.object = e,
            this.size = void 0 !== t ? t : 1;
            for (var o = void 0 !== n ? n : 16711680, a = void 0 !== i ? i : 1, s = new r.Geometry, l = e.geometry.faces, c = 0, u = l.length; u > c; c++)
                for (var h = l[c], d = 0, f = h.vertexNormals.length; f > d; d++)
                    s.vertices.push(new r.Vector3, new r.Vector3);
            r.Line.call(this, s, new r.LineBasicMaterial({
                color: o,
                linewidth: a
            }), r.LinePieces),
            this.matrixAutoUpdate = !1,
            this.normalMatrix = new r.Matrix3,
            this.update()
        }
        ,
        r.VertexNormalsHelper.prototype = Object.create(r.Line.prototype),
        r.VertexNormalsHelper.prototype.constructor = r.VertexNormalsHelper,
        r.VertexNormalsHelper.prototype.update = function(e) {
            var t = new r.Vector3;
            return function(e) {
                var n = ["a", "b", "c", "d"];
                this.object.updateMatrixWorld(!0),
                this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
                for (var i = this.geometry.vertices, r = this.object.geometry.vertices, o = this.object.geometry.faces, a = this.object.matrixWorld, s = 0, l = 0, c = o.length; c > l; l++)
                    for (var u = o[l], h = 0, d = u.vertexNormals.length; d > h; h++) {
                        var f = u[n[h]]
                          , p = r[f]
                          , m = u.vertexNormals[h];
                        i[s].copy(p).applyMatrix4(a),
                        t.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),
                        t.add(i[s]),
                        s += 1,
                        i[s].copy(t),
                        s += 1
                    }
                return this.geometry.verticesNeedUpdate = !0,
                this
            }
        }(),
        r.VertexTangentsHelper = function(e, t, n, i) {
            this.object = e,
            this.size = void 0 !== t ? t : 1;
            for (var o = void 0 !== n ? n : 255, a = void 0 !== i ? i : 1, s = new r.Geometry, l = e.geometry.faces, c = 0, u = l.length; u > c; c++)
                for (var h = l[c], d = 0, f = h.vertexTangents.length; f > d; d++)
                    s.vertices.push(new r.Vector3),
                    s.vertices.push(new r.Vector3);
            r.Line.call(this, s, new r.LineBasicMaterial({
                color: o,
                linewidth: a
            }), r.LinePieces),
            this.matrixAutoUpdate = !1,
            this.update()
        }
        ,
        r.VertexTangentsHelper.prototype = Object.create(r.Line.prototype),
        r.VertexTangentsHelper.prototype.constructor = r.VertexTangentsHelper,
        r.VertexTangentsHelper.prototype.update = function(e) {
            var t = new r.Vector3;
            return function(e) {
                var n = ["a", "b", "c", "d"];
                this.object.updateMatrixWorld(!0);
                for (var i = this.geometry.vertices, r = this.object.geometry.vertices, o = this.object.geometry.faces, a = this.object.matrixWorld, s = 0, l = 0, c = o.length; c > l; l++)
                    for (var u = o[l], h = 0, d = u.vertexTangents.length; d > h; h++) {
                        var f = u[n[h]]
                          , p = r[f]
                          , m = u.vertexTangents[h];
                        i[s].copy(p).applyMatrix4(a),
                        t.copy(m).transformDirection(a).multiplyScalar(this.size),
                        t.add(i[s]),
                        s += 1,
                        i[s].copy(t),
                        s += 1
                    }
                return this.geometry.verticesNeedUpdate = !0,
                this
            }
        }(),
        r.WireframeHelper = function(e, t) {
            var n = void 0 !== t ? t : 16777215
              , i = [0, 0]
              , o = {}
              , a = function(e, t) {
                return e - t
            }
              , s = ["a", "b", "c"]
              , l = new r.BufferGeometry;
            if (e.geometry instanceof r.Geometry) {
                for (var c = e.geometry.vertices, u = e.geometry.faces, h = 0, d = new Uint32Array(6 * u.length), f = 0, p = u.length; p > f; f++)
                    for (var m = u[f], v = 0; 3 > v; v++) {
                        i[0] = m[s[v]],
                        i[1] = m[s[(v + 1) % 3]],
                        i.sort(a);
                        var g = i.toString();
                        void 0 === o[g] && (d[2 * h] = i[0],
                        d[2 * h + 1] = i[1],
                        o[g] = !0,
                        h++)
                    }
                for (var y = new Float32Array(2 * h * 3), f = 0, p = h; p > f; f++)
                    for (var v = 0; 2 > v; v++) {
                        var b = c[d[2 * f + v]]
                          , x = 6 * f + 3 * v;
                        y[x + 0] = b.x,
                        y[x + 1] = b.y,
                        y[x + 2] = b.z
                    }
                l.addAttribute("position", new r.BufferAttribute(y,3))
            } else if (e.geometry instanceof r.BufferGeometry)
                if (void 0 !== e.geometry.attributes.index) {
                    var c = e.geometry.attributes.position.array
                      , w = e.geometry.attributes.index.array
                      , _ = e.geometry.drawcalls
                      , h = 0;
                    0 === _.length && (_ = [{
                        count: w.length,
                        index: 0,
                        start: 0
                    }]);
                    for (var d = new Uint32Array(2 * w.length), S = 0, M = _.length; M > S; ++S)
                        for (var C = _[S].start, T = _[S].count, x = _[S].index, f = C, E = C + T; E > f; f += 3)
                            for (var v = 0; 3 > v; v++) {
                                i[0] = x + w[f + v],
                                i[1] = x + w[f + (v + 1) % 3],
                                i.sort(a);
                                var g = i.toString();
                                void 0 === o[g] && (d[2 * h] = i[0],
                                d[2 * h + 1] = i[1],
                                o[g] = !0,
                                h++)
                            }
                    for (var y = new Float32Array(2 * h * 3), f = 0, p = h; p > f; f++)
                        for (var v = 0; 2 > v; v++) {
                            var x = 6 * f + 3 * v
                              , k = 3 * d[2 * f + v];
                            y[x + 0] = c[k],
                            y[x + 1] = c[k + 1],
                            y[x + 2] = c[k + 2]
                        }
                    l.addAttribute("position", new r.BufferAttribute(y,3))
                } else {
                    for (var c = e.geometry.attributes.position.array, h = c.length / 3, A = h / 3, y = new Float32Array(2 * h * 3), f = 0, p = A; p > f; f++)
                        for (var v = 0; 3 > v; v++) {
                            var x = 18 * f + 6 * v
                              , P = 9 * f + 3 * v;
                            y[x + 0] = c[P],
                            y[x + 1] = c[P + 1],
                            y[x + 2] = c[P + 2];
                            var k = 9 * f + 3 * ((v + 1) % 3);
                            y[x + 3] = c[k],
                            y[x + 4] = c[k + 1],
                            y[x + 5] = c[k + 2]
                        }
                    l.addAttribute("position", new r.BufferAttribute(y,3))
                }
            r.Line.call(this, l, new r.LineBasicMaterial({
                color: n
            }), r.LinePieces),
            this.matrix = e.matrixWorld,
            this.matrixAutoUpdate = !1
        }
        ,
        r.WireframeHelper.prototype = Object.create(r.Line.prototype),
        r.WireframeHelper.prototype.constructor = r.WireframeHelper,
        r.ImmediateRenderObject = function() {
            r.Object3D.call(this),
            this.render = function(e) {}
        }
        ,
        r.ImmediateRenderObject.prototype = Object.create(r.Object3D.prototype),
        r.ImmediateRenderObject.prototype.constructor = r.ImmediateRenderObject,
        r.MorphBlendMesh = function(e, t) {
            r.Mesh.call(this, e, t),
            this.animationsMap = {},
            this.animationsList = [];
            var n = this.geometry.morphTargets.length
              , i = "__default"
              , o = 0
              , a = n - 1
              , s = n / 1;
            this.createAnimation(i, o, a, s),
            this.setAnimationWeight(i, 1)
        }
        ,
        r.MorphBlendMesh.prototype = Object.create(r.Mesh.prototype),
        r.MorphBlendMesh.prototype.constructor = r.MorphBlendMesh,
        r.MorphBlendMesh.prototype.createAnimation = function(e, t, n, i) {
            var r = {
                startFrame: t,
                endFrame: n,
                length: n - t + 1,
                fps: i,
                duration: (n - t) / i,
                lastFrame: 0,
                currentFrame: 0,
                active: !1,
                time: 0,
                direction: 1,
                weight: 1,
                directionBackwards: !1,
                mirroredLoop: !1
            };
            this.animationsMap[e] = r,
            this.animationsList.push(r)
        }
        ,
        r.MorphBlendMesh.prototype.autoCreateAnimations = function(e) {
            for (var t, n = /([a-z]+)_?(\d+)/, i = {}, r = this.geometry, o = 0, a = r.morphTargets.length; a > o; o++) {
                var s = r.morphTargets[o]
                  , l = s.name.match(n);
                if (l && l.length > 1) {
                    var c = l[1];
                    i[c] || (i[c] = {
                        start: 1 / 0,
                        end: -(1 / 0)
                    });
                    var u = i[c];
                    o < u.start && (u.start = o),
                    o > u.end && (u.end = o),
                    t || (t = c)
                }
            }
            for (var c in i) {
                var u = i[c];
                this.createAnimation(c, u.start, u.end, e)
            }
            this.firstAnimation = t
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDirectionForward = function(e) {
            var t = this.animationsMap[e];
            t && (t.direction = 1,
            t.directionBackwards = !1)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(e) {
            var t = this.animationsMap[e];
            t && (t.direction = -1,
            t.directionBackwards = !0)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationFPS = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.fps = t,
            n.duration = (n.end - n.start) / n.fps)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationDuration = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.duration = t,
            n.fps = (n.end - n.start) / n.duration)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationWeight = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.weight = t)
        }
        ,
        r.MorphBlendMesh.prototype.setAnimationTime = function(e, t) {
            var n = this.animationsMap[e];
            n && (n.time = t)
        }
        ,
        r.MorphBlendMesh.prototype.getAnimationTime = function(e) {
            var t = 0
              , n = this.animationsMap[e];
            return n && (t = n.time),
            t
        }
        ,
        r.MorphBlendMesh.prototype.getAnimationDuration = function(e) {
            var t = -1
              , n = this.animationsMap[e];
            return n && (t = n.duration),
            t
        }
        ,
        r.MorphBlendMesh.prototype.playAnimation = function(e) {
            var t = this.animationsMap[e];
            t ? (t.time = 0,
            t.active = !0) : r.warn("THREE.MorphBlendMesh: animation[" + e + "] undefined in .playAnimation()")
        }
        ,
        r.MorphBlendMesh.prototype.stopAnimation = function(e) {
            var t = this.animationsMap[e];
            t && (t.active = !1)
        }
        ,
        r.MorphBlendMesh.prototype.update = function(e) {
            for (var t = 0, n = this.animationsList.length; n > t; t++) {
                var i = this.animationsList[t];
                if (i.active) {
                    var o = i.duration / i.length;
                    i.time += i.direction * e,
                    i.mirroredLoop ? (i.time > i.duration || i.time < 0) && (i.direction *= -1,
                    i.time > i.duration && (i.time = i.duration,
                    i.directionBackwards = !0),
                    i.time < 0 && (i.time = 0,
                    i.directionBackwards = !1)) : (i.time = i.time % i.duration,
                    i.time < 0 && (i.time += i.duration));
                    var a = i.startFrame + r.Math.clamp(Math.floor(i.time / o), 0, i.length - 1)
                      , s = i.weight;
                    a !== i.currentFrame && (this.morphTargetInfluences[i.lastFrame] = 0,
                    this.morphTargetInfluences[i.currentFrame] = 1 * s,
                    this.morphTargetInfluences[a] = 0,
                    i.lastFrame = i.currentFrame,
                    i.currentFrame = a);
                    var l = i.time % o / o;
                    i.directionBackwards && (l = 1 - l),
                    this.morphTargetInfluences[i.currentFrame] = l * s,
                    this.morphTargetInfluences[i.lastFrame] = (1 - l) * s
                }
            }
        }
        ,
        "undefined" != typeof e && e.exports && (t = e.exports = r),
        t.THREE = r
    }
    , function(e, t, n) {
        window;
        !function(t, n) {
            n(e.exports)
        }(this, function(e) {
            "use strict";
            var t = ["buffers", "bufferViews", "images", "videos", "samplers", "textures", "shaders", "programs", "techniques", "materials", "accessors", "meshes", "cameras", "lights", "skins", "nodes", "scenes", "animations"]
              , n = Object.create(Object.prototype, {
                _rootDescription: {
                    value: null,
                    writable: !0
                },
                rootDescription: {
                    set: function(e) {
                        this._rootDescription = e
                    },
                    get: function() {
                        return this._rootDescription
                    }
                },
                baseURL: {
                    value: null,
                    writable: !0
                },
                _isAbsolutePath: {
                    value: function(e) {
                        var t = new RegExp("^" + window.location.protocol,"i");
                        return e.match(t) ? !0 : !1
                    }
                },
                resolvePathIfNeeded: {
                    value: function(e) {
                        return this._isAbsolutePath(e) ? e : this.baseURL + e
                    }
                },
                _resolvePathsForCategories: {
                    value: function(e) {
                        e.forEach(function(e) {
                            var t = this.json[e];
                            if (t) {
                                var n = Object.keys(t);
                                n.forEach(function(e) {
                                    var n = t[e];
                                    n.uri = this.resolvePathIfNeeded(n.uri)
                                }, this)
                            }
                        }, this)
                    }
                },
                _json: {
                    value: null,
                    writable: !0
                },
                json: {
                    enumerable: !0,
                    get: function() {
                        return this._json
                    },
                    set: function(e) {
                        this._json !== e && (this._json = e,
                        this._resolvePathsForCategories(["buffers", "shaders", "images", "videos"]))
                    }
                },
                _path: {
                    value: null,
                    writable: !0
                },
                getEntryDescription: {
                    value: function(e, t) {
                        var n = null
                          , i = t;
                        return n = this.rootDescription[i],
                        n ? n ? n[e] : null : (console.log("ERROR:CANNOT find expected category named:" + i),
                        null)
                    }
                },
                _stepToNextCategory: {
                    value: function() {
                        return this._state.categoryIndex = this.getNextCategoryIndex(this._state.categoryIndex + 1),
                        -1 !== this._state.categoryIndex ? (this._state.categoryState.index = 0,
                        !0) : !1
                    }
                },
                _stepToNextDescription: {
                    enumerable: !1,
                    value: function() {
                        var e = this._state.categoryState
                          , t = e.keys;
                        return t ? (e.index++,
                        e.keys = null,
                        e.index >= t.length ? this._stepToNextCategory() : !1) : (console.log("INCONSISTENCY ERROR"),
                        !1)
                    }
                },
                hasCategory: {
                    value: function(e) {
                        return this.rootDescription[e] ? !0 : !1
                    }
                },
                _handleState: {
                    value: function() {
                        for (var e = {
                            buffers: this.handleBuffer,
                            bufferViews: this.handleBufferView,
                            shaders: this.handleShader,
                            programs: this.handleProgram,
                            techniques: this.handleTechnique,
                            materials: this.handleMaterial,
                            meshes: this.handleMesh,
                            cameras: this.handleCamera,
                            lights: this.handleLight,
                            nodes: this.handleNode,
                            scenes: this.handleScene,
                            images: this.handleImage,
                            animations: this.handleAnimation,
                            accessors: this.handleAccessor,
                            skins: this.handleSkin,
                            samplers: this.handleSampler,
                            textures: this.handleTexture,
                            videos: this.handleVideo
                        }, n = !0; -1 !== this._state.categoryIndex; ) {
                            var i = t[this._state.categoryIndex]
                              , r = this._state.categoryState
                              , o = r.keys;
                            if (o || (r.keys = o = Object.keys(this.rootDescription[i]),
                            !o || 0 != o.length)) {
                                var a = i
                                  , s = o[r.index]
                                  , l = this.getEntryDescription(s, a);
                                if (l) {
                                    if (e[a] && e[a].call(this, s, l, this._state.userInfo) === !1) {
                                        n = !1;
                                        break
                                    }
                                    this._stepToNextDescription()
                                } else if (this.handleError) {
                                    this.handleError("INCONSISTENCY ERROR: no description found for entry " + s),
                                    n = !1;
                                    break
                                }
                            } else
                                this._stepToNextDescription()
                        }
                        this.handleLoadCompleted && this.handleLoadCompleted(n)
                    }
                },
                _loadJSONIfNeeded: {
                    enumerable: !0,
                    value: function(e) {
                        var t = this;
                        if (this._json)
                            e && e(this.json);
                        else {
                            var n = this._path
                              , i = n.lastIndexOf("/");
                            this.baseURL = 0 !== i ? n.substring(0, i + 1) : "";
                            var r = new XMLHttpRequest;
                            r.open("GET", n, !0),
                            r.onreadystatechange = function() {
                                4 == r.readyState && (200 == r.status || 0 == r.status) && (t.json = JSON.parse(r.responseText),
                                e && e(t.json))
                            }
                            ,
                            r.send(null)
                        }
                    }
                },
                _buildLoader: {
                    value: function(e) {
                        function t(t) {
                            n.rootDescription = t,
                            e && e(this)
                        }
                        var n = this;
                        this._loadJSONIfNeeded(t)
                    }
                },
                _state: {
                    value: null,
                    writable: !0
                },
                _getEntryType: {
                    value: function(e) {
                        for (var n = t, i = 0; i < n.length; i++) {
                            var r = this.rootDescription[n[i]];
                            if (r)
                                return n[i]
                        }
                        return null
                    }
                },
                getNextCategoryIndex: {
                    value: function(e) {
                        for (var n = e; n < t.length; n++)
                            if (this.hasCategory(t[n]))
                                return n;
                        return -1
                    }
                },
                load: {
                    enumerable: !0,
                    value: function(e, t) {
                        var n = this;
                        this._buildLoader(function(i) {
                            var r = n.getNextCategoryIndex.call(n, 0);
                            -1 !== r && (n._state = {
                                userInfo: e,
                                options: t,
                                categoryIndex: r,
                                categoryState: {
                                    index: "0"
                                }
                            },
                            n._handleState())
                        })
                    }
                },
                initWithPath: {
                    value: function(e) {
                        return this._path = e,
                        this._json = null,
                        this
                    }
                },
                _knownURLs: {
                    writable: !0,
                    value: {}
                },
                loaderContext: {
                    value: function() {
                        return "undefined" == typeof this._knownURLs[this._path] && (this._knownURLs[this._path] = Object.keys(this._knownURLs).length),
                        "__" + this._knownURLs[this._path]
                    }
                },
                initWithJSON: {
                    value: function(e, t) {
                        return this.json = e,
                        this.baseURL = t,
                        t || console.log("WARNING: no base URL passed to Reader:initWithJSON"),
                        this
                    }
                }
            });
            return e && (e.glTFParser = n),
            n
        })
    }
    , function(e, t, n) {
        (function(e) {
            e.glTFAnimator = function() {
                var e = [];
                return {
                    add: function(t) {
                        e.push(t)
                    },
                    remove: function(t) {
                        var n = e.indexOf(t);
                        -1 !== n && e.splice(n, 1)
                    },
                    update: function() {
                        for (i = 0; i < e.length; i++)
                            e[i].update()
                    }
                }
            }(),
            e.glTFAnimation = function(e) {
                this.running = !1,
                this.loop = !1,
                this.duration = 0,
                this.startTime = 0,
                this.interps = [],
                e && this.createInterpolators(e)
            }
            ,
            e.glTFAnimation.prototype.createInterpolators = function(t) {
                var n, i = t.length;
                for (n = 0; i > n; n++) {
                    var r = new e.glTFInterpolator(t[n]);
                    this.interps.push(r),
                    this.duration = Math.max(this.duration, r.duration)
                }
            }
            ,
            e.glTFAnimation.prototype.play = function() {
                this.running || (this.startTime = Date.now(),
                this.running = !0,
                e.glTFAnimator.add(this))
            }
            ,
            e.glTFAnimation.prototype.stop = function() {
                this.running = !1,
                e.glTFAnimator.remove(this)
            }
            ,
            e.glTFAnimation.prototype.update = function() {
                if (this.running) {
                    var e = Date.now()
                      , t = (e - this.startTime) / 1e3
                      , n = t % this.duration
                      , i = Math.floor(t / this.duration);
                    if (i >= 1 && !this.loop) {
                        this.running = !1;
                        var r, o = this.interps.length;
                        for (r = 0; o > r; r++)
                            this.interps[r].interp(this.duration);
                        return void this.stop()
                    }
                    var r, o = this.interps.length;
                    for (r = 0; o > r; r++)
                        this.interps[r].interp(n)
                }
            }
            ,
            e.glTFInterpolator = function(t) {
                this.keys = t.keys,
                this.values = t.values,
                this.count = t.count,
                this.type = t.type,
                this.path = t.path,
                this.isRot = !1;
                var n = t.target;
                switch (n.updateMatrix(),
                n.matrixAutoUpdate = !0,
                this.targetNode = n,
                t.path) {
                case "translation":
                    this.target = n.position,
                    this.originalValue = n.position.clone();
                    break;
                case "rotation":
                    this.target = n.quaternion,
                    this.originalValue = n.quaternion.clone(),
                    this.isRot = !0;
                    break;
                case "scale":
                    this.target = n.scale,
                    this.originalValue = n.scale.clone()
                }
                this.duration = this.keys[this.count - 1],
                this.vec1 = new e.Vector3,
                this.vec2 = new e.Vector3,
                this.vec3 = new e.Vector3,
                this.quat1 = new e.Quaternion,
                this.quat2 = new e.Quaternion,
                this.quat3 = new e.Quaternion
            }
            ,
            e.glTFInterpolator.prototype.interp = function(t) {
                var n;
                if (t == this.keys[0])
                    this.isRot ? this.quat3.set(this.values[0], this.values[1], this.values[2], this.values[3]) : this.vec3.set(this.values[0], this.values[1], this.values[2]);
                else if (t < this.keys[0])
                    this.isRot ? (this.quat1.set(this.originalValue.x, this.originalValue.y, this.originalValue.z, this.originalValue.w),
                    this.quat2.set(this.values[0], this.values[1], this.values[2], this.values[3]),
                    e.Quaternion.slerp(this.quat1, this.quat2, this.quat3, t / this.keys[0])) : (this.vec3.set(this.originalValue.x, this.originalValue.y, this.originalValue.z),
                    this.vec2.set(this.values[0], this.values[1], this.values[2]),
                    this.vec3.lerp(this.vec2, t / this.keys[0]));
                else if (t >= this.keys[this.count - 1])
                    this.isRot ? this.quat3.set(this.values[4 * (this.count - 1)], this.values[4 * (this.count - 1) + 1], this.values[4 * (this.count - 1) + 2], this.values[4 * (this.count - 1) + 3]) : this.vec3.set(this.values[3 * (this.count - 1)], this.values[3 * (this.count - 1) + 1], this.values[3 * (this.count - 1) + 2]);
                else
                    for (n = 0; n < this.count - 1; n++) {
                        var i = this.keys[n]
                          , r = this.keys[n + 1];
                        t >= i && r >= t && (this.isRot ? (this.quat1.set(this.values[4 * n], this.values[4 * n + 1], this.values[4 * n + 2], this.values[4 * n + 3]),
                        this.quat2.set(this.values[4 * (n + 1)], this.values[4 * (n + 1) + 1], this.values[4 * (n + 1) + 2], this.values[4 * (n + 1) + 3]),
                        e.Quaternion.slerp(this.quat1, this.quat2, this.quat3, (t - i) / (r - i))) : (this.vec3.set(this.values[3 * n], this.values[3 * n + 1], this.values[3 * n + 2]),
                        this.vec2.set(this.values[3 * (n + 1)], this.values[3 * (n + 1) + 1], this.values[3 * (n + 1) + 2]),
                        this.vec3.lerp(this.vec2, (t - i) / (r - i))))
                    }
                this.target && this.copyValue(this.target)
            }
            ,
            e.glTFInterpolator.prototype.copyValue = function(e) {
                this.isRot ? e.copy(this.quat3) : e.copy(this.vec3)
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.GLTFLoaderUtils = Object.create(Object, {
                MISSING_DESCRIPTION: {
                    value: "MISSING_DESCRIPTION"
                },
                INVALID_PATH: {
                    value: "INVALID_PATH"
                },
                INVALID_TYPE: {
                    value: "INVALID_TYPE"
                },
                XMLHTTPREQUEST_STATUS_ERROR: {
                    value: "XMLHTTPREQUEST_STATUS_ERROR"
                },
                NOT_FOUND: {
                    value: "NOT_FOUND"
                },
                ARRAY_BUFFER: {
                    value: "ArrayBuffer"
                },
                _streams: {
                    value: {},
                    writable: !0
                },
                _streamsStatus: {
                    value: {},
                    writable: !0
                },
                _resources: {
                    value: {},
                    writable: !0
                },
                _resourcesStatus: {
                    value: {},
                    writable: !0
                },
                init: {
                    value: function() {
                        this._streams = {},
                        this._streamsStatus = {},
                        this._resources = {},
                        this._resourcesStatus = {}
                    }
                },
                _containsResource: {
                    enumerable: !1,
                    value: function(e) {
                        return this._resources[e] ? !0 : !1
                    }
                },
                _storeResource: {
                    enumerable: !1,
                    value: function(e, t) {
                        return e ? (this._containsResource[e] && console.log("WARNING: resource:" + e + " is already stored, overriding"),
                        void (this._resources[e] = t)) : void console.log("ERROR: entry does not contain id, cannot store")
                    }
                },
                _getResource: {
                    enumerable: !1,
                    value: function(e) {
                        return this._resources[e]
                    }
                },
                _loadStream: {
                    value: function(t, n, i) {
                        if (!n)
                            return void i.handleError(e.GLTFLoaderUtils.INVALID_TYPE, null);
                        if (!t)
                            return void i.handleError(e.GLTFLoaderUtils.INVALID_PATH);
                        var r = new XMLHttpRequest;
                        r.open("GET", t, !0),
                        r.responseType = n === this.ARRAY_BUFFER ? "arraybuffer" : "text",
                        r.setRequestHeader("If-Modified-Since", "Sat, 01 Jan 1970 00:00:00 GMT"),
                        r.onload = function(n) {
                            0 == r.status || 200 == r.status || 206 == r.status ? i.streamAvailable(t, r.response) : i.handleError(e.GLTFLoaderUtils.XMLHTTPREQUEST_STATUS_ERROR, this.status)
                        }
                        ,
                        r.send(null)
                    }
                },
                send: {
                    value: 0,
                    writable: !0
                },
                requested: {
                    value: 0,
                    writable: !0
                },
                _handleRequest: {
                    value: function(e) {
                        var t = this._resourcesStatus[e.id];
                        t ? this._resourcesStatus[e.id]++ : this._resourcesStatus[e.id] = 1;
                        var n = this._streamsStatus[e.uri];
                        if (n && "loading" === n.status)
                            return void n.requests.push(e);
                        this._streamsStatus[e.uri] = {
                            status: "loading",
                            requests: [e]
                        };
                        var i = this
                          , r = {};
                        r.streamAvailable = function(e, t) {
                            var n = i._streamsStatus[e]
                              , r = n.requests;
                            r.forEach(function(e) {
                                var n = t.slice(e.range[0], e.range[1])
                                  , r = e.delegate.convert(n, e.ctx);
                                i._storeResource(e.id, r),
                                e.delegate.resourceAvailable(r, e.ctx),
                                --i._resourcesStatus[e.id]
                            }, this),
                            delete i._streamsStatus[e]
                        }
                        ,
                        r.handleError = function(t, n) {
                            e.delegate.handleError(t, n)
                        }
                        ,
                        this._loadStream(e.uri, e.type, r)
                    }
                },
                _elementSizeForGLType: {
                    value: function(e, t) {
                        var n = 0;
                        switch (t) {
                        case "SCALAR":
                            n = 1;
                            break;
                        case "VEC2":
                            n = 2;
                            break;
                        case "VEC3":
                            n = 3;
                            break;
                        case "VEC4":
                            n = 4;
                            break;
                        case "MAT2":
                            n = 4;
                            break;
                        case "MAT3":
                            n = 9;
                            break;
                        case "MAT4":
                            n = 16
                        }
                        switch (e) {
                        case WebGLRenderingContext.FLOAT:
                            return Float32Array.BYTES_PER_ELEMENT * n;
                        case WebGLRenderingContext.UNSIGNED_BYTE:
                            return Uint8Array.BYTES_PER_ELEMENT * n;
                        case WebGLRenderingContext.UNSIGNED_SHORT:
                            return Uint16Array.BYTES_PER_ELEMENT * n;
                        default:
                            return null
                        }
                    }
                },
                _handleWrappedBufferViewResourceLoading: {
                    value: function(e, t, n) {
                        var i = e.bufferView
                          , r = i.buffer
                          , o = e.byteOffset + i.description.byteOffset
                          , a = [o, this._elementSizeForGLType(e.componentType, e.type) * e.count + o];
                        this._handleRequest({
                            id: e.id,
                            range: a,
                            type: r.description.type,
                            uri: r.description.uri,
                            delegate: t,
                            ctx: n
                        }, null)
                    }
                },
                getBuffer: {
                    value: function(e, t, n) {
                        var i = this._getResource(e.id);
                        return i ? i : (this._handleWrappedBufferViewResourceLoading(e, t, n),
                        null)
                    }
                },
                getFile: {
                    value: function(e, t, n) {
                        return e.delegate = t,
                        e.ctx = n,
                        this._handleRequest({
                            id: e.id,
                            uri: e.uri,
                            range: [0],
                            type: "text",
                            delegate: t,
                            ctx: n
                        }, null),
                        null
                    }
                }
            })
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e, t) {
            e.glTFLoader = function(t) {
                this.useBufferGeometry = void 0 !== e.glTFLoader.useBufferGeometry ? e.glTFLoader.useBufferGeometry : !0,
                this.meshesRequested = 0,
                this.meshesLoaded = 0,
                this.pendingMeshes = [],
                this.animationsRequested = 0,
                this.animationsLoaded = 0,
                this.animations = [],
                this.shadersRequested = 0,
                this.shadersLoaded = 0,
                this.shaders = {},
                e.Loader.call(this, t)
            }
            ,
            e.glTFLoader.prototype = new e.Loader,
            e.glTFLoader.prototype.constructor = e.glTFLoader,
            e.glTFLoader.prototype.load = function(n, i) {
                function r(e) {
                    if (!e)
                        return 4294967295;
                    var t = Math.floor(255 * e[0])
                      , n = Math.floor(255 * e[1])
                      , i = Math.floor(255 * e[2])
                      , r = 255
                      , o = (r << 24) + (t << 16) + (n << 8) + i;
                    return o
                }
                function o(t, n) {
                    var i, r = new e.Quaternion, o = new e.Vector3;
                    new e.Vector3;
                    for (i = 0; n > i; i++) {
                        o.set(t[4 * i], t[4 * i + 1], t[4 * i + 2]).normalize();
                        var a = t[4 * i + 3];
                        r.setFromAxisAngle(o, a),
                        t[4 * i] = r.x,
                        t[4 * i + 1] = r.y,
                        t[4 * i + 2] = r.z,
                        t[4 * i + 3] = r.w
                    }
                }
                function a(e) {
                    switch (e) {
                    case "SCALAR":
                        nElements = 1;
                        break;
                    case "VEC2":
                        nElements = 2;
                        break;
                    case "VEC3":
                        nElements = 3;
                        break;
                    case "VEC4":
                        nElements = 4;
                        break;
                    case "MAT2":
                        nElements = 4;
                        break;
                    case "MAT3":
                        nElements = 9;
                        break;
                    case "MAT4":
                        nElements = 16
                    }
                    return nElements
                }
                function s(t) {
                    return t ? e.ImageUtils.loadTexture(t) : null
                }
                var l = this
                  , c = function() {
                    l.useBufferGeometry ? this.geometry = new e.BufferGeometry : this.geometry = new e.Geometry,
                    this.totalAttributes = 0,
                    this.loadedAttributes = 0,
                    this.indicesLoaded = !1,
                    this.finished = !1,
                    this.onload = null,
                    this.uvs = null,
                    this.indexArray = null
                };
                c.prototype.constructor = c,
                c.prototype.buildArrayGeometry = function() {
                    var t, n, i, r, o, a = this.geometry, s = a.normals, l = this.indexArray, c = this.uvs, u = null;
                    for (r = 0,
                    o = this.indexArray.length; o > r; r += 3)
                        t = l[r],
                        n = l[r + 1],
                        i = l[r + 2],
                        s && (u = [s[t], s[n], s[i]]),
                        a.faces.push(new e.Face3(t,n,i,u,null,null)),
                        c && a.faceVertexUvs[0].push([c[t], c[n], c[i]]);
                    a.computeBoundingBox(),
                    a.computeBoundingSphere(),
                    a.computeFaceNormals(),
                    s || a.computeVertexNormals()
                }
                ,
                c.prototype.buildBufferGeometry = function() {
                    var t = this.geometry;
                    t.addAttribute("index", new e.BufferAttribute(this.indexArray,1));
                    var n = {
                        start: 0,
                        index: 0,
                        count: this.indexArray.length
                    };
                    t.offsets.push(n),
                    t.computeBoundingSphere()
                }
                ,
                c.prototype.checkFinished = function() {
                    this.indexArray && this.loadedAttributes === this.totalAttributes && (l.useBufferGeometry ? this.buildBufferGeometry() : this.buildArrayGeometry(),
                    this.finished = !0,
                    this.onload && this.onload())
                }
                ;
                var u = function() {};
                u.prototype.handleError = function(e, t) {
                    console.log("ERROR(IndicesDelegate):" + e + ":" + t)
                }
                ,
                u.prototype.convert = function(e, t) {
                    return new Uint16Array(e,0,t.indices.count)
                }
                ,
                u.prototype.resourceAvailable = function(e, t) {
                    var n = t.geometry;
                    return n.indexArray = e,
                    n.checkFinished(),
                    !0
                }
                ;
                var h = new u
                  , d = function(e, t) {
                    this.indices = e,
                    this.geometry = t
                }
                  , f = function() {};
                f.prototype.handleError = function(e, t) {
                    console.log("ERROR(VertexAttributeDelegate):" + e + ":" + t)
                }
                ,
                f.prototype.convert = function(e, t) {
                    return e
                }
                ,
                f.prototype.arrayResourceAvailable = function(t, n) {
                    var i, r, o, s = n.geometry, l = n.attribute, c = n.semantic;
                    if ("POSITION" == c)
                        for (i = new Float32Array(t,0,l.count * a(l.type)),
                        r = 0,
                        o = i.length; o > r; r += 3)
                            s.geometry.vertices.push(new e.Vector3(i[r],i[r + 1],i[r + 2]));
                    else if ("NORMAL" == c)
                        for (s.geometry.normals = [],
                        i = new Float32Array(t,0,l.count * a(l.type)),
                        r = 0,
                        o = i.length; o > r; r += 3)
                            s.geometry.normals.push(new e.Vector3(i[r],i[r + 1],i[r + 2]));
                    else if ("TEXCOORD_0" == c || "TEXCOORD" == c)
                        for (s.uvs = [],
                        i = new Float32Array(t,0,l.count * a(l.type)),
                        r = 0,
                        o = i.length; o > r; r += 2)
                            s.uvs.push(new e.Vector2(i[r],1 - i[r + 1]));
                    else if ("WEIGHT" == c)
                        for (nComponents = a(l.type),
                        i = new Float32Array(t,0,l.count * nComponents),
                        r = 0,
                        o = i.length; o > r; r += 4)
                            s.geometry.skinWeights.push(new e.Vector4(i[r],i[r + 1],i[r + 2],i[r + 3]));
                    else if ("JOINT" == c)
                        for (nComponents = a(l.type),
                        i = new Float32Array(t,0,l.count * nComponents),
                        r = 0,
                        o = i.length; o > r; r += 4)
                            s.geometry.skinIndices.push(new e.Vector4(i[r],i[r + 1],i[r + 2],i[r + 3]))
                }
                ,
                f.prototype.bufferResourceAvailable = function(t, n) {
                    var i, r, o, s = n.geometry, l = n.attribute, c = n.semantic;
                    if ("POSITION" == c)
                        i = new Float32Array(t,0,l.count * a(l.type)),
                        s.geometry.addAttribute("position", new e.BufferAttribute(i,3));
                    else if ("NORMAL" == c)
                        o = a(l.type),
                        i = new Float32Array(t,0,l.count * o),
                        s.geometry.addAttribute("normal", new e.BufferAttribute(i,3));
                    else if ("TEXCOORD_0" == c || "TEXCOORD" == c) {
                        for (o = a(l.type),
                        i = new Float32Array(t,0,l.count * o),
                        r = 0; r < i.length / 2; r++)
                            i[2 * r + 1] = 1 - i[2 * r + 1];
                        s.geometry.addAttribute("uv", new e.BufferAttribute(i,o))
                    } else
                        "WEIGHT" == c ? (o = a(l.type),
                        i = new Float32Array(t,0,l.count * o),
                        s.geometry.addAttribute("skinWeight", new e.BufferAttribute(i,o))) : "JOINT" == c && (o = a(l.type),
                        i = new Float32Array(t,0,l.count * o),
                        s.geometry.addAttribute("skinIndex", new e.BufferAttribute(i,o)))
                }
                ,
                f.prototype.resourceAvailable = function(e, t) {
                    l.useBufferGeometry ? this.bufferResourceAvailable(e, t) : this.arrayResourceAvailable(e, t);
                    var n = t.geometry;
                    return n.loadedAttributes++,
                    n.checkFinished(),
                    !0
                }
                ;
                var p = new f
                  , m = function(e, t, n) {
                    this.attribute = e,
                    this.semantic = t,
                    this.geometry = n
                }
                  , v = function() {
                    this.primitives = [],
                    this.materialsPending = [],
                    this.loadedGeometry = 0,
                    this.onCompleteCallbacks = []
                };
                v.prototype.addPrimitive = function(e, t) {
                    var n = this;
                    e.onload = function() {
                        n.loadedGeometry++,
                        n.checkComplete()
                    }
                    ,
                    this.primitives.push({
                        geometry: e,
                        material: t,
                        mesh: null
                    })
                }
                ,
                v.prototype.onComplete = function(e) {
                    this.onCompleteCallbacks.push(e),
                    this.checkComplete()
                }
                ,
                v.prototype.checkComplete = function() {
                    var e = this;
                    this.onCompleteCallbacks.length && this.primitives.length == this.loadedGeometry && (this.onCompleteCallbacks.forEach(function(t) {
                        t(e)
                    }),
                    this.onCompleteCallbacks = [])
                }
                ,
                v.prototype.attachToNode = function(t) {
                    this.primitives.forEach(function(n) {
                        var i = n.material;
                        i instanceof e.Material || (i = l.createShaderMaterial(i));
                        var r = new e.Mesh(n.geometry.geometry,i);
                        r.castShadow = !0,
                        t.add(r)
                    })
                }
                ;
                var g = function(e) {
                    this.params = e
                }
                  , y = function() {};
                y.prototype.handleError = function(e, t) {
                    console.log("ERROR(AnimationParameterDelegate):" + e + ":" + t)
                }
                ,
                y.prototype.convert = function(e, t) {
                    var n = t.parameter
                      , i = null;
                    switch (n.type) {
                    case "SCALAR":
                    case "VEC2":
                    case "VEC3":
                    case "VEC4":
                        i = new Float32Array(e,0,n.count * a(n.type))
                    }
                    return i
                }
                ,
                y.prototype.resourceAvailable = function(e, t) {
                    var n = t.animation
                      , i = t.parameter;
                    return i.data = e,
                    n.handleParameterLoaded(i),
                    !0
                }
                ;
                var b = new y
                  , x = function(e, t) {
                    this.parameter = e,
                    this.animation = t
                }
                  , w = function() {
                    this.totalParameters = 0,
                    this.loadedParameters = 0,
                    this.parameters = {},
                    this.finishedLoading = !1,
                    this.onload = null
                };
                w.prototype.constructor = w,
                w.prototype.handleParameterLoaded = function(e) {
                    this.parameters[e.name] = e,
                    this.loadedParameters++,
                    this.checkFinished()
                }
                ,
                w.prototype.checkFinished = function() {
                    this.loadedParameters === this.totalParameters && (this.finishedLoading = !0,
                    this.onload && this.onload())
                }
                ;
                var _ = function() {};
                _.prototype.handleError = function(e, t) {
                    console.log("ERROR(InverseBindMatricesDelegate):" + e + ":" + t)
                }
                ,
                _.prototype.convert = function(e, t) {
                    var n = t.parameter
                      , i = null;
                    switch (n.type) {
                    case "MAT4":
                        i = new Float32Array(e,0,n.count * a(n.type))
                    }
                    return i
                }
                ,
                _.prototype.resourceAvailable = function(e, t) {
                    var n = t.skin;
                    return n.inverseBindMatrices = e,
                    !0
                }
                ;
                var S = new _
                  , M = function(e, t) {
                    this.parameter = e,
                    this.skin = t
                }
                  , C = function() {};
                C.prototype.handleError = function(e, t) {
                    console.log("ERROR(ShaderDelegate):" + e + ":" + t)
                }
                ,
                C.prototype.convert = function(e, t) {
                    return e
                }
                ,
                C.prototype.resourceAvailable = function(e, t) {
                    return l.shadersLoaded++,
                    l.shaders[t.id] = e,
                    l.checkComplete(),
                    !0
                }
                ;
                var T = new C
                  , E = function(e, t) {
                    this.id = e,
                    this.uri = t
                }
                  , k = function(e, t, n) {
                    this.entryID = e,
                    this.object = t,
                    this.description = n
                }
                  , A = function() {
                    this._entries = {}
                };
                A.prototype.setEntry = function(e, t, n) {
                    return e ? (this._entries[e] && console.warn("entry[" + e + "] is being overwritten"),
                    void (this._entries[e] = new k(e,t,n))) : void console.error("No EntryID provided, cannot store", n)
                }
                ,
                A.prototype.getEntry = function(e) {
                    return this._entries[e]
                }
                ,
                A.prototype.clearEntries = function() {
                    this._entries = {}
                }
                ;
                var P = function() {};
                P.prototype.loadCompleted = function(e, t) {
                    e.call(Window, t)
                }
                ;
                var L = Object.create(e.GLTFLoaderUtils)
                  , O = Object.create(t, {
                    load: {
                        enumerable: !0,
                        value: function(e, n) {
                            this.resources = new A,
                            this.cameras = [],
                            this.lights = [],
                            this.animations = [],
                            this.joints = {},
                            this.skeltons = {},
                            L.init(),
                            t.load.call(this, e, n)
                        }
                    },
                    cameras: {
                        enumerable: !0,
                        writable: !0,
                        value: []
                    },
                    lights: {
                        enumerable: !0,
                        writable: !0,
                        value: []
                    },
                    animations: {
                        enumerable: !0,
                        writable: !0,
                        value: []
                    },
                    handleBuffer: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, null, t),
                            t.type = "ArrayBuffer",
                            !0
                        }
                    },
                    handleBufferView: {
                        value: function(e, t, n) {
                            this.resources.setEntry(e, null, t);
                            var i = this.resources.getEntry(t.buffer);
                            t.type = "ArrayBufferView";
                            var r = this.resources.getEntry(e);
                            return r.buffer = i,
                            !0
                        }
                    },
                    handleShader: {
                        value: function(e, t, n) {
                            this.resources.setEntry(e, null, t);
                            var i = {
                                id: e,
                                uri: t.uri
                            }
                              , r = new E(e,t.uri);
                            return l.shadersRequested++,
                            L.getFile(i, T, r),
                            !0
                        }
                    },
                    handleProgram: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, null, t),
                            !0
                        }
                    },
                    handleTechnique: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, null, t),
                            !0
                        }
                    },
                    createShaderMaterial: {
                        value: function(t) {
                            var n = l.shaders[t.params.fragmentShader];
                            if (!n)
                                return console.log("ERROR: Missing fragment shader definition:", t.params.fragmentShader),
                                new e.MeshPhongMaterial;
                            var i = l.shaders[t.params.vertexShader];
                            if (!n)
                                return console.log("ERROR: Missing vertex shader definition:", t.params.vertexShader),
                                new e.MeshPhongMaterial;
                            var r = {};
                            new e.ShaderMaterial({
                                fragmentShader: n,
                                vertexShader: i,
                                uniforms: r
                            });
                            return new e.MeshPhongMaterial(t.params)
                        }
                    },
                    createShaderParams: {
                        value: function(e, t, n, i) {
                            var r = this.resources.getEntry(i.program);
                            r && (n.fragmentShader = r.description.fragmentShader,
                            n.vertexShader = r.description.vertexShader,
                            n.attributes = i.attributes,
                            n.uniforms = i.uniforms)
                        }
                    },
                    threeJSMaterialType: {
                        value: function(t, n, i, o) {
                            var a = e.MeshPhongMaterial
                              , l = null;
                            if (n && n.description && n.description.passes && (l = n.description.passes.defaultPass),
                            l)
                                if (l.details && l.details.commonProfile) {
                                    var c = n.description.passes.defaultPass.details.commonProfile;
                                    if (c) {
                                        switch (c.lightingModel) {
                                        case "Blinn":
                                        case "Phong":
                                            a = e.MeshPhongMaterial;
                                            break;
                                        case "Lambert":
                                            a = e.MeshLambertMaterial;
                                            break;
                                        default:
                                            a = e.MeshBasicMaterial
                                        }
                                        c.extras && c.extras.doubleSided && (o.side = e.DoubleSide)
                                    }
                                } else if (l.instanceProgram) {
                                    var u = l.instanceProgram;
                                    this.createShaderParams(t, i, o, u);
                                    var h = !0;
                                    h && (a = g)
                                }
                            var d = null
                              , f = null
                              , p = i.diffuse;
                            if (p) {
                                var m = p;
                                if (m) {
                                    var v = this.resources.getEntry(m);
                                    if (v) {
                                        var y = this.resources.getEntry(v.description.source);
                                        y && (d = y.description.uri);
                                        var b = this.resources.getEntry(v.description.sampler);
                                        b && (f = b.description)
                                    }
                                }
                            }
                            var m = s(d);
                            m && f && (f.wrapS == WebGLRenderingContext.REPEAT && (m.wrapS = e.RepeatWrapping),
                            f.wrapT == WebGLRenderingContext.REPEAT && (m.wrapT = e.RepeatWrapping),
                            f.magFilter == WebGLRenderingContext.LINEAR && (m.magFilter = e.LinearFilter),
                            o.map = m);
                            var x = null
                              , w = null
                              , _ = i.reflective;
                            if (_) {
                                var m = _;
                                if (m) {
                                    var v = this.resources.getEntry(m);
                                    if (v) {
                                        var y = this.resources.getEntry(v.description.source);
                                        y && (x = y.description.uri);
                                        var b = this.resources.getEntry(v.description.sampler);
                                        b && (w = b.description)
                                    }
                                }
                            }
                            var m = s(x);
                            m && w && (w.wrapS == WebGLRenderingContext.REPEAT && (m.wrapS = e.RepeatWrapping),
                            w.wrapT == WebGLRenderingContext.REPEAT && (m.wrapT = e.RepeatWrapping),
                            w.magFilter == WebGLRenderingContext.LINEAR && (m.magFilter = e.LinearFilter),
                            o.envMap = m);
                            var S = i.shininesss || i.shininess;
                            S && (S = S);
                            var M = d ? null : p
                              , C = 1;
                            if (i.hasOwnProperty("transparency")) {
                                var T = !0;
                                C = T ? i.transparency : 1 - i.transparency
                            }
                            return o.color = r(M),
                            o.opacity = C,
                            o.transparent = 1 > C,
                            void 0 !== S && (o.shininess = S),
                            void 0 !== i.ambient && "string" != typeof i.ambient && (o.ambient = r(i.ambient)),
                            void 0 !== i.emission && (o.emissive = r(i.emission)),
                            void 0 !== i.specular && (o.specular = r(i.specular)),
                            a
                        }
                    },
                    handleMaterial: {
                        value: function(e, t, n) {
                            var i = this.resources.getEntry(t.instanceTechnique.technique)
                              , r = {}
                              , o = t.instanceTechnique.values
                              , a = this.threeJSMaterialType(e, i, o, r)
                              , s = new a(r);
                            return s.name = e,
                            this.resources.setEntry(e, s, t),
                            !0
                        }
                    },
                    handleMesh: {
                        value: function(e, t, n) {
                            var i = new v;
                            i.name = e,
                            this.resources.setEntry(e, i, t);
                            var r = t.primitives;
                            if (!r)
                                return console.log("MISSING_PRIMITIVES for mesh:" + e),
                                !1;
                            for (var o = 0; o < r.length; o++) {
                                var a = r[o];
                                if (a.primitive === WebGLRenderingContext.TRIANGLES) {
                                    var s = new c
                                      , l = this.resources.getEntry(a.material);
                                    i.addPrimitive(s, l.object);
                                    var u = this.resources.getEntry(a.indices)
                                      , f = this.resources.getEntry(u.description.bufferView)
                                      , g = {
                                        bufferView: f,
                                        byteOffset: u.description.byteOffset,
                                        count: u.description.count,
                                        id: u.entryID,
                                        componentType: u.description.componentType,
                                        type: u.description.type
                                    }
                                      , y = new d(g,s)
                                      , b = (L.getBuffer(g, h, y),
                                    Object.keys(a.attributes));
                                    b.forEach(function(e) {
                                        s.totalAttributes++;
                                        var n, i = a.attributes[e], r = this.resources.getEntry(i);
                                        if (r) {
                                            n = r.object,
                                            n.id = i;
                                            var o = this.resources.getEntry(n.bufferView)
                                        } else {
                                            n = t.attributes[i],
                                            n.id = i,
                                            this.resources.setEntry(i, n, n);
                                            var o = this.resources.getEntry(n.bufferView);
                                            r = this.resources.getEntry(i)
                                        }
                                        var l = {
                                            bufferView: o,
                                            byteOffset: n.byteOffset,
                                            byteStride: n.byteStride,
                                            count: n.count,
                                            max: n.max,
                                            min: n.min,
                                            componentType: n.componentType,
                                            type: n.type,
                                            id: i
                                        }
                                          , c = new m(l,e,s);
                                        L.getBuffer(l, p, c)
                                    }, this)
                                }
                            }
                            return !0
                        }
                    },
                    handleCamera: {
                        value: function(t, n, i) {
                            var r;
                            if ("perspective" == n.type) {
                                var o = n.perspective.znear
                                  , a = n.perspective.zfar
                                  , s = n.perspective.yfov
                                  , l = n.perspective.xfov
                                  , c = n.perspective.aspect_ratio;
                                c || (c = 1),
                                void 0 === s && l && (s = l / c),
                                s && (r = new e.PerspectiveCamera(s,c,o,a))
                            } else
                                r = new e.OrthographicCamera(window.innerWidth / -2,window.innerWidth / 2,window.innerHeight / 2,window.innerHeight / -2,o,a);
                            return r && this.resources.setEntry(t, r, n),
                            !0
                        }
                    },
                    handleLight: {
                        value: function(t, n, i) {
                            var o = null
                              , a = n.type;
                            if (a && n[a]) {
                                var s = n[a]
                                  , l = r(s.color);
                                switch (a) {
                                case "directional":
                                    o = new e.DirectionalLight(l),
                                    o.position.set(0, 0, 1);
                                    break;
                                case "point":
                                    o = new e.PointLight(l);
                                    break;
                                case "spot ":
                                    o = new e.SpotLight(l),
                                    o.position.set(0, 0, 1);
                                    break;
                                case "ambient":
                                    o = new e.AmbientLight(l)
                                }
                            }
                            return o && this.resources.setEntry(t, o, n),
                            !0
                        }
                    },
                    addPendingMesh: {
                        value: function(e, t) {
                            l.pendingMeshes.push({
                                mesh: e,
                                node: t
                            })
                        }
                    },
                    handleNode: {
                        value: function(t, n, i) {
                            var r = null;
                            n.jointName ? (r = new e.Bone,
                            r.jointName = n.jointName,
                            this.joints[n.jointName] = t) : r = new e.Object3D,
                            r.name = n.name,
                            this.resources.setEntry(t, r, n);
                            var a = n.matrix;
                            if (a)
                                r.matrixAutoUpdate = !1,
                                r.applyMatrix((new e.Matrix4).set(a[0], a[4], a[8], a[12], a[1], a[5], a[9], a[13], a[2], a[6], a[10], a[14], a[3], a[7], a[11], a[15]));
                            else {
                                var s = n.translation
                                  , c = n.rotation
                                  , u = n.scale
                                  , h = s ? new e.Vector3(s[0],s[1],s[2]) : new e.Vector3;
                                c && o(c, 1);
                                var d = c ? new e.Quaternion(c[0],c[1],c[2],c[3]) : new e.Quaternion
                                  , f = u ? new e.Vector3(u[0],u[1],u[2]) : new e.Vector3(1,1,1)
                                  , p = new e.Matrix4;
                                p.compose(h, d, f),
                                r.matrixAutoUpdate = !1,
                                r.applyMatrix(p)
                            }
                            var m, v = this;
                            if (n.mesh && (m = this.resources.getEntry(n.mesh),
                            l.meshesRequested++,
                            m.object.onComplete(function(e) {
                                v.addPendingMesh(e, r),
                                l.meshesLoaded++,
                                l.checkComplete()
                            })),
                            n.meshes && n.meshes.forEach(function(e) {
                                m = this.resources.getEntry(e),
                                l.meshesRequested++,
                                m.object.onComplete(function(e) {
                                    v.addPendingMesh(e, r),
                                    l.meshesLoaded++,
                                    l.checkComplete()
                                })
                            }, this),
                            n.instanceSkin) {
                                var g = this.resources.getEntry(n.instanceSkin.skin);
                                if (g) {
                                    var y = g.object;
                                    n.instanceSkin.skin = y,
                                    r.instanceSkin = n.instanceSkin;
                                    var b = n.instanceSkin.meshes;
                                    y.meshes = [],
                                    b.forEach(function(t) {
                                        m = this.resources.getEntry(t),
                                        l.meshesRequested++,
                                        e.glTFLoader.totalMeshesRequested++,
                                        m.object.onComplete(function(t) {
                                            y.meshes.push(t),
                                            l.meshesLoaded++,
                                            e.glTFLoader.totalMeshesLoaded++,
                                            l.checkComplete()
                                        })
                                    }, this)
                                }
                            }
                            if (n.camera) {
                                var x = this.resources.getEntry(n.camera);
                                x && (r.add(x.object),
                                this.cameras.push(x.object))
                            }
                            if (n.light) {
                                var w = this.resources.getEntry(n.light);
                                w && (r.add(w.object),
                                this.lights.push(w.object))
                            }
                            return !0
                        }
                    },
                    buildNodeHirerachy: {
                        value: function(e, t) {
                            var n = this.resources.getEntry(e)
                              , i = n.object;
                            t.add(i);
                            var r = n.description.children;
                            return r && r.forEach(function(e) {
                                this.buildNodeHirerachy(e, i)
                            }, this),
                            i
                        }
                    },
                    buildSkin: {
                        value: function(t) {
                            var n = t.instanceSkin.skin;
                            n && t.instanceSkin.skeletons.forEach(function(i) {
                                var r = this.resources.getEntry(i);
                                if (r) {
                                    var o, a = r.object, s = !0, l = n.meshes.length;
                                    for (o = 0; l > o; o++) {
                                        var c = n.meshes[o]
                                          , u = null;
                                        c.primitives.forEach(function(r) {
                                            var o = r.material;
                                            o instanceof e.Material || (o = this.createShaderMaterial(o)),
                                            u = new e.SkinnedMesh(r.geometry.geometry,o,!1),
                                            u.add(a);
                                            var l, c = r.geometry.geometry;
                                            if (c.vertices)
                                                for (l = 0; l < c.vertices.length; l++)
                                                    c.vertices[l].applyMatrix4(n.bindShapeMatrix);
                                            else if (c.attributes.position) {
                                                var h = c.attributes.position.array
                                                  , d = new e.Vector3;
                                                for (l = 0; l < h.length / 3; l++)
                                                    d.set(h[3 * l], h[3 * l + 1], h[3 * l + 2]),
                                                    d.applyMatrix4(n.bindShapeMatrix),
                                                    h[3 * l] = d.x,
                                                    h[3 * l + 1] = d.y,
                                                    h[3 * l + 2] = d.z
                                            }
                                            if (u && s) {
                                                o.skinning = !0;
                                                var f = n.jointNames
                                                  , p = [];
                                                u.skeleton.bones = [],
                                                u.skeleton.boneInverses = [],
                                                u.skeleton.boneMatrices = new Float32Array(16 * f.length);
                                                var m, v = f.length;
                                                for (m = 0; v > m; m++) {
                                                    var g = f[m]
                                                      , y = this.joints[g]
                                                      , b = this.resources.getEntry(y).object;
                                                    if (b) {
                                                        b.skin = u,
                                                        p.push(b),
                                                        u.skeleton.bones.push(b);
                                                        var x = n.inverseBindMatrices
                                                          , w = (new e.Matrix4).set(x[16 * m + 0], x[16 * m + 4], x[16 * m + 8], x[16 * m + 12], x[16 * m + 1], x[16 * m + 5], x[16 * m + 9], x[16 * m + 13], x[16 * m + 2], x[16 * m + 6], x[16 * m + 10], x[16 * m + 14], x[16 * m + 3], x[16 * m + 7], x[16 * m + 11], x[16 * m + 15]);
                                                        u.skeleton.boneInverses.push(w),
                                                        u.skeleton.pose()
                                                    } else
                                                        console.log("WARNING: jointName:" + g + " cannot be found in skeleton:" + i)
                                                }
                                            }
                                            u && (u.castShadow = !0,
                                            t.add(u))
                                        }, this)
                                    }
                                }
                            }, this)
                        }
                    },
                    buildSkins: {
                        value: function(e) {
                            e.instanceSkin && this.buildSkin(e);
                            var t = e.children;
                            t && t.forEach(function(e) {
                                this.buildSkins(e)
                            }, this)
                        }
                    },
                    createMeshAnimations: {
                        value: function(e) {
                            this.buildSkins(e)
                        }
                    },
                    handleScene: {
                        value: function(e, t, n) {
                            return t.nodes ? (t.nodes.forEach(function(e) {
                                this.buildNodeHirerachy(e, n.rootObj)
                            }, this),
                            this.delegate && this.delegate.loadCompleted(n.callback, n.rootObj),
                            !0) : (console.log("ERROR: invalid file required nodes property is missing from scene"),
                            !1)
                        }
                    },
                    handleImage: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, null, t),
                            !0
                        }
                    },
                    addNodeAnimationChannel: {
                        value: function(e, t, n) {
                            this.nodeAnimationChannels || (this.nodeAnimationChannels = {}),
                            this.nodeAnimationChannels[e] || (this.nodeAnimationChannels[e] = []),
                            this.nodeAnimationChannels[e].push(n)
                        }
                    },
                    createAnimations: {
                        value: function() {
                            for (var t in this.nodeAnimationChannels) {
                                var n = this.nodeAnimationChannels[t]
                                  , i = (n.length,
                                new e.glTFAnimation(n));
                                i.name = "animation_" + t,
                                this.animations.push(i)
                            }
                        }
                    },
                    buildAnimation: {
                        value: function(e) {
                            var t, n = [], i = e.channels.length;
                            for (t = 0; i > t; t++) {
                                var r = e.channels[t]
                                  , a = e.samplers[r.sampler];
                                if (a) {
                                    var s = e.parameters[a.input];
                                    if (s && s.data) {
                                        var l = e.parameters[a.output];
                                        if (l && l.data) {
                                            var c = r.target
                                              , u = this.resources.getEntry(c.id);
                                            if (u) {
                                                var h = c.path;
                                                "rotation" == h && o(l.data, l.count);
                                                var d = {
                                                    keys: s.data,
                                                    values: l.data,
                                                    count: s.count,
                                                    target: u.object,
                                                    path: h,
                                                    type: a.interpolation
                                                };
                                                this.addNodeAnimationChannel(c.id, r, d),
                                                n.push(d)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    handleAnimation: {
                        value: function(e, t, n) {
                            l.animationsRequested++;
                            var i = new w;
                            i.name = e,
                            i.onload = function() {
                                l.animationsLoaded++,
                                l.animations.push(i),
                                l.checkComplete()
                            }
                            ,
                            i.channels = t.channels,
                            i.samplers = t.samplers,
                            this.resources.setEntry(e, i, t);
                            var r = t.parameters;
                            if (!r)
                                return console.log("MISSING_PARAMETERS for animation:" + e),
                                !1;
                            var o = Object.keys(r);
                            return o.forEach(function(e) {
                                i.totalParameters++;
                                var t = r[e]
                                  , n = this.resources.getEntry(t);
                                n = n.object;
                                var o = this.resources.getEntry(n.bufferView)
                                  , a = {
                                    bufferView: o,
                                    byteOffset: n.byteOffset,
                                    count: n.count,
                                    componentType: n.componentType,
                                    type: n.type,
                                    id: n.bufferView,
                                    name: e
                                }
                                  , s = new x(a,i);
                                L.getBuffer(a, b, s)
                            }, this),
                            !0
                        }
                    },
                    handleAccessor: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, t, t),
                            !0
                        }
                    },
                    handleSkin: {
                        value: function(t, n, i) {
                            var r = {}
                              , o = n.bindShapeMatrix;
                            r.bindShapeMatrix = (new e.Matrix4).set(o[0], o[4], o[8], o[12], o[1], o[5], o[9], o[13], o[2], o[6], o[10], o[14], o[3], o[7], o[11], o[15]),
                            r.jointNames = n.jointNames;
                            var a = this.resources.getEntry(n.inverseBindMatrices);
                            a = a.description,
                            r.inverseBindMatricesDescription = a,
                            r.inverseBindMatricesDescription.id = n.inverseBindMatrices;
                            var s = this.resources.getEntry(a.bufferView)
                              , l = {
                                bufferView: s,
                                byteOffset: a.byteOffset,
                                count: a.count,
                                componentType: a.componentType,
                                type: a.type,
                                id: a.bufferView,
                                name: r.inverseBindMatricesDescription.id
                            }
                              , c = new M(l,r)
                              , u = (L.getBuffer(l, S, c),
                            this.resources.getEntry(r.inverseBindMatricesDescription.bufferView));
                            return r.inverseBindMatricesDescription.bufferView = u.object,
                            this.resources.setEntry(t, r, n),
                            !0
                        }
                    },
                    handleSampler: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, t, t),
                            !0
                        }
                    },
                    handleTexture: {
                        value: function(e, t, n) {
                            return this.resources.setEntry(e, null, t),
                            !0
                        }
                    },
                    handleError: {
                        value: function(e) {
                            throw new Error(e)
                        }
                    },
                    _delegate: {
                        value: new P,
                        writable: !0
                    },
                    delegate: {
                        enumerable: !0,
                        get: function() {
                            return this._delegate
                        },
                        set: function(e) {
                            this._delegate = e
                        }
                    }
                })
                  , R = function(e, t) {
                    this.rootObj = e,
                    this.callback = t
                }
                  , F = new e.Object3D
                  , B = Object.create(O);
                return B.initWithPath(n),
                B.load(new R(F,function(e) {}
                ), null),
                this.loader = B,
                this.callback = i,
                this.rootObj = F,
                F
            }
            ,
            e.glTFLoader.prototype.callLoadedCallback = function() {
                var e = {
                    scene: this.rootObj,
                    cameras: this.loader.cameras,
                    animations: this.loader.animations
                };
                this.callback(e)
            }
            ,
            e.glTFLoader.prototype.checkComplete = function() {
                if (this.meshesLoaded == this.meshesRequested && this.shadersLoaded == this.shadersRequested && this.animationsLoaded == this.animationsRequested) {
                    for (var e = 0; e < this.pendingMeshes.length; e++) {
                        var t = this.pendingMeshes[e];
                        t.mesh.attachToNode(t.node)
                    }
                    for (var e = 0; e < this.animationsLoaded; e++) {
                        var n = this.animations[e];
                        this.loader.buildAnimation(n)
                    }
                    this.loader.createAnimations(),
                    this.loader.createMeshAnimations(this.rootObj),
                    this.callLoadedCallback()
                }
            }
        }
        ).call(t, n(2), n(7))
    }
    , function(e, t, n) {
        var i, r, t = !1;
        (function() {
            window;
            !function(n, o) {
                "object" == typeof t ? o(e.exports) : (i = [],
                r = function() {
                    return o(n)
                }
                .apply(t, i),
                !(void 0 !== r && (e.exports = r)))
            }(this, function(e) {
                "use strict";
                var t = ["buffers", "bufferViews", "images", "videos", "samplers", "textures", "shaders", "programs", "techniques", "materials", "accessors", "meshes", "cameras", "lights", "skins", "nodes", "scenes", "animations"]
                  , n = Object.create(Object.prototype, {
                    _rootDescription: {
                        value: null,
                        writable: !0
                    },
                    rootDescription: {
                        set: function(e) {
                            this._rootDescription = e
                        },
                        get: function() {
                            return this._rootDescription
                        }
                    },
                    baseURL: {
                        value: null,
                        writable: !0
                    },
                    _isAbsolutePath: {
                        value: function(e) {
                            var t = new RegExp("^" + window.location.protocol,"i");
                            return e.match(t) ? !0 : !1
                        }
                    },
                    resolvePathIfNeeded: {
                        value: function(e) {
                            return this._isAbsolutePath(e) ? e : this.baseURL + e
                        }
                    },
                    _resolvePathsForCategories: {
                        value: function(e) {
                            e.forEach(function(e) {
                                var t = this.json[e];
                                if (t) {
                                    var n = Object.keys(t);
                                    n.forEach(function(e) {
                                        var n = t[e];
                                        n.uri = this.resolvePathIfNeeded(n.uri)
                                    }, this)
                                }
                            }, this)
                        }
                    },
                    _json: {
                        value: null,
                        writable: !0
                    },
                    json: {
                        enumerable: !0,
                        get: function() {
                            return this._json
                        },
                        set: function(e) {
                            this._json !== e && (this._json = e,
                            this._resolvePathsForCategories(["buffers", "shaders", "images", "videos"]))
                        }
                    },
                    _path: {
                        value: null,
                        writable: !0
                    },
                    getEntryDescription: {
                        value: function(e, t) {
                            var n = null
                              , i = t;
                            return n = this.rootDescription[i],
                            n ? n ? n[e] : null : (console.log("ERROR:CANNOT find expected category named:" + i),
                            null)
                        }
                    },
                    _stepToNextCategory: {
                        value: function() {
                            return this._state.categoryIndex = this.getNextCategoryIndex(this._state.categoryIndex + 1),
                            -1 !== this._state.categoryIndex ? (this._state.categoryState.index = 0,
                            !0) : !1
                        }
                    },
                    _stepToNextDescription: {
                        enumerable: !1,
                        value: function() {
                            var e = this._state.categoryState
                              , t = e.keys;
                            return t ? (e.index++,
                            e.keys = null,
                            e.index >= t.length ? this._stepToNextCategory() : !1) : (console.log("INCONSISTENCY ERROR"),
                            !1)
                        }
                    },
                    hasCategory: {
                        value: function(e) {
                            return this.rootDescription[e] ? !0 : !1
                        }
                    },
                    _handleState: {
                        value: function() {
                            for (var e = {
                                buffers: this.handleBuffer,
                                bufferViews: this.handleBufferView,
                                shaders: this.handleShader,
                                programs: this.handleProgram,
                                techniques: this.handleTechnique,
                                materials: this.handleMaterial,
                                meshes: this.handleMesh,
                                cameras: this.handleCamera,
                                lights: this.handleLight,
                                nodes: this.handleNode,
                                scenes: this.handleScene,
                                images: this.handleImage,
                                animations: this.handleAnimation,
                                accessors: this.handleAccessor,
                                skins: this.handleSkin,
                                samplers: this.handleSampler,
                                textures: this.handleTexture,
                                videos: this.handleVideo
                            }, n = !0; -1 !== this._state.categoryIndex; ) {
                                var i = t[this._state.categoryIndex]
                                  , r = this._state.categoryState
                                  , o = r.keys;
                                if (o || (r.keys = o = Object.keys(this.rootDescription[i]),
                                !o || 0 != o.length)) {
                                    var a = i
                                      , s = o[r.index]
                                      , l = this.getEntryDescription(s, a);
                                    if (l) {
                                        if (e[a] && e[a].call(this, s, l, this._state.userInfo) === !1) {
                                            n = !1;
                                            break
                                        }
                                        this._stepToNextDescription()
                                    } else if (this.handleError) {
                                        this.handleError("INCONSISTENCY ERROR: no description found for entry " + s),
                                        n = !1;
                                        break
                                    }
                                } else
                                    this._stepToNextDescription()
                            }
                            this.handleLoadCompleted && this.handleLoadCompleted(n)
                        }
                    },
                    _loadJSONIfNeeded: {
                        enumerable: !0,
                        value: function(e) {
                            var t = this;
                            if (this._json)
                                e && e(this.json);
                            else {
                                var n = this._path
                                  , i = n.lastIndexOf("/");
                                this.baseURL = 0 !== i ? n.substring(0, i + 1) : "";
                                var r = new XMLHttpRequest;
                                r.open("GET", n, !0),
                                r.onreadystatechange = function() {
                                    4 == r.readyState && (200 == r.status || 0 == r.status) && (t.json = JSON.parse(r.responseText),
                                    e && e(t.json))
                                }
                                ,
                                r.send(null)
                            }
                        }
                    },
                    _buildLoader: {
                        value: function(e) {
                            function t(t) {
                                n.rootDescription = t,
                                e && e(this)
                            }
                            var n = this;
                            this._loadJSONIfNeeded(t)
                        }
                    },
                    _state: {
                        value: null,
                        writable: !0
                    },
                    _getEntryType: {
                        value: function(e) {
                            for (var n = t, i = 0; i < n.length; i++) {
                                var r = this.rootDescription[n[i]];
                                if (r)
                                    return n[i]
                            }
                            return null
                        }
                    },
                    getNextCategoryIndex: {
                        value: function(e) {
                            for (var n = e; n < t.length; n++)
                                if (this.hasCategory(t[n]))
                                    return n;
                            return -1
                        }
                    },
                    load: {
                        enumerable: !0,
                        value: function(e, t) {
                            var n = this;
                            this._buildLoader(function(i) {
                                var r = n.getNextCategoryIndex.call(n, 0);
                                -1 !== r && (n._state = {
                                    userInfo: e,
                                    options: t,
                                    categoryIndex: r,
                                    categoryState: {
                                        index: "0"
                                    }
                                },
                                n._handleState())
                            })
                        }
                    },
                    initWithPath: {
                        value: function(e) {
                            return this._path = e,
                            this._json = null,
                            this
                        }
                    },
                    _knownURLs: {
                        writable: !0,
                        value: {}
                    },
                    loaderContext: {
                        value: function() {
                            return "undefined" == typeof this._knownURLs[this._path] && (this._knownURLs[this._path] = Object.keys(this._knownURLs).length),
                            "__" + this._knownURLs[this._path]
                        }
                    },
                    initWithJSON: {
                        value: function(e, t) {
                            return this.json = e,
                            this.baseURL = t,
                            t || console.log("WARNING: no base URL passed to Reader:initWithJSON"),
                            this
                        }
                    }
                });
                return e && (e.glTFParser = n),
                n
            }),
            e.exports = window.glTFParser
        }
        ).call(window)
    }
    , function(e, t, n) {
        (function(e) {
            e.CopyShader = {
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    opacity: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
                fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.ConvolutionShader = {
                defines: {
                    KERNEL_SIZE_FLOAT: "25.0",
                    KERNEL_SIZE_INT: "25"
                },
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    uImageIncrement: {
                        type: "v2",
                        value: new e.Vector2(.001953125,0)
                    },
                    cKernel: {
                        type: "fv1",
                        value: []
                    }
                },
                vertexShader: ["uniform vec2 uImageIncrement;", "varying vec2 vUv;", "void main() {", "vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
                fragmentShader: ["uniform float cKernel[ KERNEL_SIZE_INT ];", "uniform sampler2D tDiffuse;", "uniform vec2 uImageIncrement;", "varying vec2 vUv;", "void main() {", "vec2 imageCoord = vUv;", "vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );", "for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {", "sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];", "imageCoord += uImageIncrement;", "}", "gl_FragColor = sum;", "}"].join("\n"),
                buildKernel: function(e) {
                    function t(e, t) {
                        return Math.exp(-(e * e) / (2 * t * t))
                    }
                    var n, i, r, o, a = 25, s = 2 * Math.ceil(3 * e) + 1;
                    for (s > a && (s = a),
                    o = .5 * (s - 1),
                    i = new Array(s),
                    r = 0,
                    n = 0; s > n; ++n)
                        i[n] = t(n - o, e),
                        r += i[n];
                    for (n = 0; s > n; ++n)
                        i[n] /= r;
                    return i
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.DotScreenShader = {
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    tSize: {
                        type: "v2",
                        value: new e.Vector2(256,256)
                    },
                    center: {
                        type: "v2",
                        value: new e.Vector2(.5,.5)
                    },
                    angle: {
                        type: "f",
                        value: 1.57
                    },
                    scale: {
                        type: "f",
                        value: 1
                    }
                },
                vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
                fragmentShader: ["uniform vec2 center;", "uniform float angle;", "uniform float scale;", "uniform vec2 tSize;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "float pattern() {", "float s = sin( angle ), c = cos( angle );", "vec2 tex = vUv * tSize - center;", "vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;", "return ( sin( point.x ) * sin( point.y ) ) * 4.0;", "}", "void main() {", "vec4 color = texture2D( tDiffuse, vUv );", "float average = ( color.r + color.g + color.b ) / 3.0;", "gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );", "}"].join("\n")
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.FilmShader = {
                uniforms: {
                    tDiffuse: {
                        type: "t",
                        value: null
                    },
                    time: {
                        type: "f",
                        value: 0
                    },
                    nIntensity: {
                        type: "f",
                        value: .5
                    },
                    sIntensity: {
                        type: "f",
                        value: .05
                    },
                    sCount: {
                        type: "f",
                        value: 4096
                    },
                    grayscale: {
                        type: "i",
                        value: 1
                    }
                },
                vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
                fragmentShader: ["uniform float time;", "uniform bool grayscale;", "uniform float nIntensity;", "uniform float sIntensity;", "uniform float sCount;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 cTextureScreen = texture2D( tDiffuse, vUv );", "float x = vUv.x * vUv.y * time *  1000.0;", "x = mod( x, 13.0 ) * mod( x, 123.0 );", "float dx = mod( x, 0.01 );", "vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );", "vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );", "cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;", "cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );", "if( grayscale ) {", "cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );", "}", "gl_FragColor =  vec4( cResult, cTextureScreen.a );", "}"].join("\n")
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.EffectComposer = function(t, n) {
                if (this.renderer = t,
                void 0 === n) {
                    var i = t.getPixelRatio()
                      , r = Math.floor(t.context.canvas.width / i) || 1
                      , o = Math.floor(t.context.canvas.height / i) || 1
                      , a = {
                        minFilter: e.LinearFilter,
                        magFilter: e.LinearFilter,
                        format: e.RGBAFormat,
                        stencilBuffer: !1
                    };
                    n = new e.WebGLRenderTarget(r,o,a)
                }
                this.renderTarget1 = n,
                this.renderTarget2 = n.clone(),
                this.writeBuffer = this.renderTarget1,
                this.readBuffer = this.renderTarget2,
                this.passes = [],
                void 0 === e.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"),
                this.copyPass = new e.ShaderPass(e.CopyShader)
            }
            ,
            e.EffectComposer.prototype = {
                swapBuffers: function() {
                    var e = this.readBuffer;
                    this.readBuffer = this.writeBuffer,
                    this.writeBuffer = e
                },
                addPass: function(e) {
                    this.passes.push(e)
                },
                insertPass: function(e, t) {
                    this.passes.splice(t, 0, e)
                },
                render: function(t) {
                    this.writeBuffer = this.renderTarget1,
                    this.readBuffer = this.renderTarget2;
                    var n, i, r = !1, o = this.passes.length;
                    for (i = 0; o > i; i++)
                        if (n = this.passes[i],
                        n.enabled) {
                            if (n.render(this.renderer, this.writeBuffer, this.readBuffer, t, r),
                            n.needsSwap) {
                                if (r) {
                                    var a = this.renderer.context;
                                    a.stencilFunc(a.NOTEQUAL, 1, 4294967295),
                                    this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, t),
                                    a.stencilFunc(a.EQUAL, 1, 4294967295)
                                }
                                this.swapBuffers()
                            }
                            n instanceof e.MaskPass ? r = !0 : n instanceof e.ClearMaskPass && (r = !1)
                        }
                },
                reset: function(e) {
                    if (void 0 === e) {
                        e = this.renderTarget1.clone();
                        var t = this.renderer.getPixelRatio();
                        e.width = Math.floor(this.renderer.context.canvas.width / t),
                        e.height = Math.floor(this.renderer.context.canvas.height / t)
                    }
                    this.renderTarget1 = e,
                    this.renderTarget2 = e.clone(),
                    this.writeBuffer = this.renderTarget1,
                    this.readBuffer = this.renderTarget2
                },
                setSize: function(e, t) {
                    var n = this.renderTarget1.clone();
                    n.width = e,
                    n.height = t,
                    this.reset(n)
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.ShaderPass = function(t, n) {
                this.textureID = void 0 !== n ? n : "tDiffuse",
                this.uniforms = e.UniformsUtils.clone(t.uniforms),
                this.material = new e.ShaderMaterial({
                    defines: t.defines || {},
                    uniforms: this.uniforms,
                    vertexShader: t.vertexShader,
                    fragmentShader: t.fragmentShader
                }),
                this.renderToScreen = !1,
                this.enabled = !0,
                this.needsSwap = !0,
                this.clear = !1,
                this.camera = new e.OrthographicCamera(-1,1,1,-1,0,1),
                this.scene = new e.Scene,
                this.quad = new e.Mesh(new e.PlaneBufferGeometry(2,2),null),
                this.scene.add(this.quad)
            }
            ,
            e.ShaderPass.prototype = {
                render: function(e, t, n, i) {
                    this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = n),
                    this.quad.material = this.material,
                    this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, this.clear)
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.MaskPass = function(e, t) {
                this.scene = e,
                this.camera = t,
                this.enabled = !0,
                this.clear = !0,
                this.needsSwap = !1,
                this.inverse = !1
            }
            ,
            e.MaskPass.prototype = {
                render: function(e, t, n, i) {
                    var r = e.context;
                    r.colorMask(!1, !1, !1, !1),
                    r.depthMask(!1);
                    var o, a;
                    this.inverse ? (o = 0,
                    a = 1) : (o = 1,
                    a = 0),
                    r.enable(r.STENCIL_TEST),
                    r.stencilOp(r.REPLACE, r.REPLACE, r.REPLACE),
                    r.stencilFunc(r.ALWAYS, o, 4294967295),
                    r.clearStencil(a),
                    e.render(this.scene, this.camera, n, this.clear),
                    e.render(this.scene, this.camera, t, this.clear),
                    r.colorMask(!0, !0, !0, !0),
                    r.depthMask(!0),
                    r.stencilFunc(r.EQUAL, 1, 4294967295),
                    r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
                }
            },
            e.ClearMaskPass = function() {
                this.enabled = !0
            }
            ,
            e.ClearMaskPass.prototype = {
                render: function(e, t, n, i) {
                    var r = e.context;
                    r.disable(r.STENCIL_TEST)
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.RenderPass = function(t, n, i, r, o) {
                this.scene = t,
                this.camera = n,
                this.overrideMaterial = i,
                this.clearColor = r,
                this.clearAlpha = void 0 !== o ? o : 1,
                this.oldClearColor = new e.Color,
                this.oldClearAlpha = 1,
                this.enabled = !0,
                this.clear = !0,
                this.needsSwap = !1
            }
            ,
            e.RenderPass.prototype = {
                render: function(e, t, n, i) {
                    this.scene.overrideMaterial = this.overrideMaterial,
                    this.clearColor && (this.oldClearColor.copy(e.getClearColor()),
                    this.oldClearAlpha = e.getClearAlpha(),
                    e.setClearColor(this.clearColor, this.clearAlpha)),
                    e.render(this.scene, this.camera, n, this.clear),
                    this.clearColor && e.setClearColor(this.oldClearColor, this.oldClearAlpha),
                    this.scene.overrideMaterial = null
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.BloomPass = function(t, n, i, r) {
                t = void 0 !== t ? t : 1,
                n = void 0 !== n ? n : 25,
                i = void 0 !== i ? i : 4,
                r = void 0 !== r ? r : 256;
                var o = {
                    minFilter: e.LinearFilter,
                    magFilter: e.LinearFilter,
                    format: e.RGBFormat
                };
                this.renderTargetX = new e.WebGLRenderTarget(r,r,o),
                this.renderTargetY = new e.WebGLRenderTarget(r,r,o),
                void 0 === e.CopyShader && console.error("THREE.BloomPass relies on THREE.CopyShader");
                var a = e.CopyShader;
                this.copyUniforms = e.UniformsUtils.clone(a.uniforms),
                this.copyUniforms.opacity.value = t,
                this.materialCopy = new e.ShaderMaterial({
                    uniforms: this.copyUniforms,
                    vertexShader: a.vertexShader,
                    fragmentShader: a.fragmentShader,
                    blending: e.AdditiveBlending,
                    transparent: !0
                }),
                void 0 === e.ConvolutionShader && console.error("THREE.BloomPass relies on THREE.ConvolutionShader");
                var s = e.ConvolutionShader;
                this.convolutionUniforms = e.UniformsUtils.clone(s.uniforms),
                this.convolutionUniforms.uImageIncrement.value = e.BloomPass.blurX,
                this.convolutionUniforms.cKernel.value = e.ConvolutionShader.buildKernel(i),
                this.materialConvolution = new e.ShaderMaterial({
                    uniforms: this.convolutionUniforms,
                    vertexShader: s.vertexShader,
                    fragmentShader: s.fragmentShader,
                    defines: {
                        KERNEL_SIZE_FLOAT: n.toFixed(1),
                        KERNEL_SIZE_INT: n.toFixed(0)
                    }
                }),
                this.enabled = !0,
                this.needsSwap = !1,
                this.clear = !1,
                this.camera = new e.OrthographicCamera(-1,1,1,-1,0,1),
                this.scene = new e.Scene,
                this.quad = new e.Mesh(new e.PlaneBufferGeometry(2,2),null),
                this.scene.add(this.quad)
            }
            ,
            e.BloomPass.prototype = {
                render: function(t, n, i, r, o) {
                    o && t.context.disable(t.context.STENCIL_TEST),
                    this.quad.material = this.materialConvolution,
                    this.convolutionUniforms.tDiffuse.value = i,
                    this.convolutionUniforms.uImageIncrement.value = e.BloomPass.blurX,
                    t.render(this.scene, this.camera, this.renderTargetX, !0),
                    this.convolutionUniforms.tDiffuse.value = this.renderTargetX,
                    this.convolutionUniforms.uImageIncrement.value = e.BloomPass.blurY,
                    t.render(this.scene, this.camera, this.renderTargetY, !0),
                    this.quad.material = this.materialCopy,
                    this.copyUniforms.tDiffuse.value = this.renderTargetY,
                    o && t.context.enable(t.context.STENCIL_TEST),
                    t.render(this.scene, this.camera, i, this.clear)
                }
            },
            e.BloomPass.blurX = new e.Vector2(.001953125,0),
            e.BloomPass.blurY = new e.Vector2(0,.001953125)
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.FilmPass = function(t, n, i, r) {
                void 0 === e.FilmShader && console.error("THREE.FilmPass relies on THREE.FilmShader");
                var o = e.FilmShader;
                this.uniforms = e.UniformsUtils.clone(o.uniforms),
                this.material = new e.ShaderMaterial({
                    uniforms: this.uniforms,
                    vertexShader: o.vertexShader,
                    fragmentShader: o.fragmentShader
                }),
                void 0 !== r && (this.uniforms.grayscale.value = r),
                void 0 !== t && (this.uniforms.nIntensity.value = t),
                void 0 !== n && (this.uniforms.sIntensity.value = n),
                void 0 !== i && (this.uniforms.sCount.value = i),
                this.enabled = !0,
                this.renderToScreen = !1,
                this.needsSwap = !0,
                this.camera = new e.OrthographicCamera(-1,1,1,-1,0,1),
                this.scene = new e.Scene,
                this.quad = new e.Mesh(new e.PlaneBufferGeometry(2,2),null),
                this.scene.add(this.quad)
            }
            ,
            e.FilmPass.prototype = {
                render: function(e, t, n, i) {
                    this.uniforms.tDiffuse.value = n,
                    this.uniforms.time.value += i,
                    this.quad.material = this.material,
                    this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, !1)
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            e.DotScreenPass = function(t, n, i) {
                void 0 === e.DotScreenShader && console.error("THREE.DotScreenPass relies on THREE.DotScreenShader");
                var r = e.DotScreenShader;
                this.uniforms = e.UniformsUtils.clone(r.uniforms),
                void 0 !== t && this.uniforms.center.value.copy(t),
                void 0 !== n && (this.uniforms.angle.value = n),
                void 0 !== i && (this.uniforms.scale.value = i),
                this.material = new e.ShaderMaterial({
                    uniforms: this.uniforms,
                    vertexShader: r.vertexShader,
                    fragmentShader: r.fragmentShader
                }),
                this.enabled = !0,
                this.renderToScreen = !1,
                this.needsSwap = !0,
                this.camera = new e.OrthographicCamera(-1,1,1,-1,0,1),
                this.scene = new e.Scene,
                this.quad = new e.Mesh(new e.PlaneBufferGeometry(2,2),null),
                this.scene.add(this.quad)
            }
            ,
            e.DotScreenPass.prototype = {
                render: function(e, t, n, i) {
                    this.uniforms.tDiffuse.value = n,
                    this.uniforms.tSize.value.set(n.width, n.height),
                    this.quad.material = this.material,
                    this.renderToScreen ? e.render(this.scene, this.camera) : e.render(this.scene, this.camera, t, !1)
                }
            }
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        var n = function() {
            function e(e, t, n, i, r, o, a, s, l, c) {
                this.sm = e,
                this.gameLoop = t,
                this.stage = n,
                this.mouse = i,
                this.camctl = r,
                this.galaxy = o,
                this.controlAPI = a,
                this.fullscreenEffect = s,
                this.skybox = l,
                this.postProcess = c
            }
            return Object.defineProperty(e.prototype, "camera", {
                get: function() {
                    return this.stage.camera
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.setLightColor = function(e) {
                this.stage.setLightColor(e),
                this.skybox.setLightColor(e)
            }
            ,
            Object.defineProperty(e.prototype, "lightColor", {
                get: function() {
                    return this.stage.lightColor
                },
                enumerable: !0,
                configurable: !0
            }),
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(21)
          , o = n(22)
          , a = n(23)
          , s = function(e) {
            function t(t, n) {
                e.call(this),
                this.sm = t,
                this.env = n
            }
            return i(t, e),
            t.zoom = function(e) {
                return e ? .5 : .05
            }
            ,
            t.zoomMin = function(e) {
                return e ? .3 : .005
            }
            ,
            t.zoomMax = function(e) {
                return e ? 1.1 : 1
            }
            ,
            t.prototype.becomeActive = function(e) {
                var n = e && e.firstTime;
                this.env.galaxy.view = o.ViewEnum.galaxy,
                this.env.camctl.setTargetZoom(n ? .4 : t.zoom(this.env.camctl.controls2D)),
                this.env.camctl.setZoomLimit(t.zoomMin(this.env.camctl.controls2D), t.zoomMax(this.env.camctl.controls2D)),
                this.env.camctl.setPitch(this.env.camctl.controls2D ? 0 : t.pitch),
                this.env.camctl.previous3dPitch = t.pitch,
                this.env.camctl.resetPan(),
                this.env.camctl.useCumulativePan = !1,
                this.env.camctl.setSmoothDamp(a["default"].smoothDampNormal)
            }
            ,
            t.prototype.becomeInactive = function() {
                this.env.controlAPI.dispatchHoverOut()
            }
            ,
            t.prototype.update = function(e, n) {
                var i = this.env.galaxy.findNearestStar(this.env.mouse.positionInVP, this.env.camera)
                  , r = i && i.shellDistanceFromCursor(this.env.mouse.positionInVP, this.env.camera) <= 0;
                this.env.galaxy.highlightedStarSticky || (this.env.galaxy.highlightedStar = r ? i : null),
                i && r ? (this.env.galaxy.highlightedStarSticky || (this.env.mouse.mouseB ? this.env.controlAPI.dispatchHoverOut() : this.env.controlAPI.dispatchHoverSystem(i.code)),
                this.env.mouse.mouseClick && this.env.galaxy.ready && this.env.controlAPI.dispatchSelectSystem(i.code, this.env.mouse.clickButton)) : (this.env.mouse.mouseClick && this.env.controlAPI.dispatchSelectNothing(this.env.mouse.clickButton),
                this.env.galaxy.highlightedStarSticky || this.env.controlAPI.dispatchHoverOut()),
                this.env.camctl.controls2D && this.env.camctl.set2dView(),
                this.env.camctl.setZoomLimit(t.zoomMin(this.env.camctl.controls2D), t.zoomMax(this.env.camctl.controls2D));
                var o = this.env.controlAPI.goal;
                if (!o.done)
                    if (o.isGalacticView) {
                        if (o.camInfo)
                            this.env.camctl.cameraInfo = o.camInfo;
                        else if (o.bodyPixelSize) {
                            var a = 180 / o.bodyPixelSize;
                            this.env.camctl.setTargetZoom(a),
                            this.env.camctl.setZoomLimit(a, a)
                        }
                        if (o.setSystemCode) {
                            var s = this.env.galaxy.getStar(o.systemCode);
                            s && this.env.camctl.setTargetPosition(s.obj3d.position)
                        }
                        o.setDone()
                    } else if (o.isPlanetaryView || o.isSystemView) {
                        var s = this.env.galaxy.getStar(o.systemCode);
                        s && (o.routeInView ? this.sm.changeState("StateSlideJumpPoint", {
                            oldStar: null,
                            newStar: s
                        }) : this.sm.changeState("StateEnterStarSystem", s))
                    }
            }
            ,
            t.pitch = 10,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = s
    }
    , function(e, t) {
        var n = function() {
            function e() {}
            return e.prototype.becomeActive = function(e) {}
            ,
            e.prototype.becomeInactive = function() {}
            ,
            e.prototype.update = function(e, t) {}
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t) {
        !function(e) {
            e[e.lifeforms = 0] = "lifeforms",
            e[e.economy = 1] = "economy",
            e[e.crime = 2] = "crime"
        }(t.HeatmapEnum || (t.HeatmapEnum = {}));
        t.HeatmapEnum;
        !function(e) {
            e[e.galaxy = 0] = "galaxy",
            e[e.system = 1] = "system"
        }(t.ViewEnum || (t.ViewEnum = {}));
        t.ViewEnum
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(24)
          , o = n(25)
          , a = function(e) {
            function t(t, n, i) {
                e.call(this),
                this.locked = !1,
                this.timeLocked = 0,
                this.camParams = {
                    width: 1,
                    height: 1,
                    widthFreq: 1,
                    heightFreq: 1,
                    phiCorrection: .5
                };
                var r = this._controls = new o["default"](t,n,this.camParams,i);
                r.maxDistance = 5e3,
                r.maxPolarAngle = .95 * Math.PI,
                r.target.set(0, 0, 0)
            }
            return i(t, e),
            t.prototype.update = function(e, t) {
                this.locked ? this.timeLocked += t : this._controls.update(e - this.timeLocked, t)
            }
            ,
            t.prototype.addToGUI = function(e) {
                var t = e.addFolder("Camera Drift");
                t.add(this.camParams, "width", 0, 20),
                t.add(this.camParams, "height", 0, 20),
                t.add(this.camParams, "widthFreq", 0, 10),
                t.add(this.camParams, "heightFreq", 0, 10),
                t.add(this.camParams, "phiCorrection", 0, 1)
            }
            ,
            t.prototype.changedParam = function() {}
            ,
            t.prototype.setTargetPosition = function(e) {
                this._controls.target.copy(e)
            }
            ,
            t.prototype.setTargetZoom = function(e) {
                this._controls.targetRadius = e
            }
            ,
            Object.defineProperty(t.prototype, "targetZoom", {
                get: function() {
                    return this._controls.targetRadius
                },
                enumerable: !0,
                configurable: !0
            }),
            t.prototype.setZoomLimit = function(e, t) {
                this._controls.minDistance = e,
                this._controls.maxDistance = t
            }
            ,
            t.prototype.setPitch = function(e) {
                this._controls.targetPhi = e * Math.PI / 180
            }
            ,
            t.prototype.getPitch = function() {
                return 180 * this._controls.targetPhi / Math.PI
            }
            ,
            t.prototype.setTheta = function(e) {
                this._controls.targetTheta = e * Math.PI / 180
            }
            ,
            t.prototype.getTheta = function() {
                return 180 * this._controls.targetTheta / Math.PI
            }
            ,
            t.prototype.setSmoothDamp = function(e) {
                this._controls.smoothDamp = e
            }
            ,
            t.prototype.cutToCameraPosition = function(e) {
                this._controls.cutToCameraPosition(e)
            }
            ,
            t.prototype.resetPan = function() {
                this._controls.targetPan.set(0, 0, 0)
            }
            ,
            t.prototype.seamlessChangeTargetPosition = function(e) {
                this._controls.target.copy(e),
                this._controls.resetTargetsToCurrentPosition()
            }
            ,
            t.prototype.setTargetScreenCoord = function(e) {
                this._controls.setTargetScreenCoord(e)
            }
            ,
            t.prototype.set2dView = function() {
                this.setPitch(5)
            }
            ,
            t.prototype.augmentTargetZoomToSee = function(e) {
                this._controls.augmentTargetZoomToSee(e)
            }
            ,
            Object.defineProperty(t.prototype, "useCumulativePan", {
                set: function(e) {
                    e ? this._controls.setCumulativePan() : this._controls.resetCumulativePan()
                },
                enumerable: !0,
                configurable: !0
            }),
            t.prototype.setThetaPhiTargetToLookThroughTargetTowardsObjective = function(e) {
                this._controls.setThetaPhiTargetToLookThroughTargetTowardsObjective(e)
            }
            ,
            Object.defineProperty(t.prototype, "controls2D", {
                get: function() {
                    return this._controls.controls2D
                },
                set: function(e) {
                    e != this._controls.controls2D && (this._controls.controls2D = e,
                    e ? this.previous3dPitch = this.getPitch() : this.setPitch(this.previous3dPitch))
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(t.prototype, "cameraInfo", {
                get: function() {
                    return {
                        pitch: this.getPitch(),
                        tetha: this.getTheta(),
                        radius: this._controls.targetRadius,
                        target: {
                            x: this._controls.target.x,
                            y: this._controls.target.y,
                            z: this._controls.target.z
                        },
                        pan: {
                            x: this._controls.targetPan.x,
                            y: this._controls.targetPan.y
                        }
                    }
                },
                set: function(e) {
                    this.setPitch(e.pitch),
                    this.setTheta(e.tetha),
                    this.setTargetZoom(e.radius),
                    this._controls.target.set(e.target.x, e.target.y, e.target.z),
                    this._controls.targetPan.set(e.pan.x, e.pan.y, 0)
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(t.prototype, "bottomGuardBand", {
                get: function() {
                    return this._controls.bottomGuardBand
                },
                set: function(e) {
                    this._controls.bottomGuardBand = e
                },
                enumerable: !0,
                configurable: !0
            }),
            t.prototype.translateWorld = function(e) {
                this._controls.translateWorld(e)
            }
            ,
            t.smoothDampNormal = {
                delay: .3,
                panDelay: .1,
                radiusDelay: .1,
                targetDelay: .1
            },
            t.smoothDampSlidel = {
                delay: .05,
                panDelay: .05,
                radiusDelay: .05,
                targetDelay: .05
            },
            t.smoothDampTransition = {
                delay: .3,
                panDelay: .3,
                radiusDelay: .3,
                targetDelay: .3
            },
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = a
    }
    , function(e, t, n) {
        (function(e) {
            var n = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , i = function(e) {
                function t() {
                    e.apply(this, arguments)
                }
                return n(t, e),
                t.prototype.render = function(e) {}
                ,
                t.prototype.initPostProcessing = function(e) {}
                ,
                t.prototype.addToGUI = function(e, t) {}
                ,
                t.prototype.onWindowResize = function(e, t) {}
                ,
                t.prototype.update = function(e, t) {}
                ,
                t.prototype.lateUpdate = function(e, t) {}
                ,
                t.prototype.afterPreload = function() {}
                ,
                t.prototype.start = function() {}
                ,
                t.prototype.preload = function() {
                    return null
                }
                ,
                t
            }(e.EventDispatcher);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = i
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(26)
              , o = n(27)
              , a = function(t) {
                function n(n, i, r, o) {
                    var a = this;
                    t.call(this),
                    this.camera = n,
                    this.domElement = i,
                    this.camParams = r,
                    this.enabled = !0,
                    this.target = new e.Vector3,
                    this.dampedTarget = new e.Vector3,
                    this.targetPan = new e.Vector3,
                    this.targetRadius = 5,
                    this.targetPhi = 1,
                    this.targetTheta = 0,
                    this.cumulativePan = new e.Vector3,
                    this.noZoom = !1,
                    this.zoomSpeed = 1,
                    this.minDistance = 0,
                    this.maxDistance = 1 / 0,
                    this.minZoom = 0,
                    this.maxZoom = 1 / 0,
                    this.noRotate = !1,
                    this.rotateSpeed = 1,
                    this.noPan = !1,
                    this.keyPanSpeed = 7,
                    this.autoRotate = !1,
                    this.autoRotateSpeed = 2,
                    this.minPolarAngle = 0,
                    this.maxPolarAngle = Math.PI,
                    this.smoothDamp = {
                        delay: .3,
                        panDelay: .3,
                        radiusDelay: .3,
                        targetDelay: .3
                    },
                    this.noKeys = !1,
                    this.keys = {
                        LEFT: 37,
                        UP: 38,
                        RIGHT: 39,
                        BOTTOM: 40
                    },
                    this.mouseButtons = {
                        ORBIT: e.MOUSE.LEFT,
                        ZOOM: e.MOUSE.MIDDLE,
                        PAN: e.MOUSE.RIGHT
                    },
                    this.bottomGuardBand = 130,
                    this.controls2D = !1,
                    this.lastTime = 0,
                    this.lastResetTime = 0,
                    this.EPS = .1,
                    this.rotateStart = new e.Vector2,
                    this.rotateEnd = new e.Vector2,
                    this.panStart = new e.Vector2,
                    this.panEnd = new e.Vector2,
                    this.panDelta = new e.Vector2,
                    this.panOffset = new e.Vector3,
                    this.offset = new e.Vector3,
                    this.dollyStart = new e.Vector2,
                    this.dollyEnd = new e.Vector2,
                    this.dollyDelta = new e.Vector2,
                    this.theta = 0,
                    this.phi = 0,
                    this.smoothDampVel = {
                        phi: 0,
                        theta: 0,
                        radius: 0,
                        pan: new e.Vector3(0,0,0),
                        target: new e.Vector3(0,0,0)
                    },
                    this.scale = 1,
                    this.lastPosition = new e.Vector3,
                    this.lastQuaternion = new e.Quaternion,
                    this.STATE = {
                        NONE: -1,
                        ROTATE: 0,
                        DOLLY: 1,
                        PAN: 2,
                        TOUCH_ROTATE: 3,
                        TOUCH_DOLLY: 4,
                        TOUCH_PAN: 5
                    },
                    this.useCumulativePan = !0,
                    this.changeEvent = {
                        type: "change"
                    },
                    this.startEvent = {
                        type: "start"
                    },
                    this.endEvent = {
                        type: "end"
                    },
                    this.cutToCameraPosition = function(e) {
                        this.update(0, 0, e)
                    }
                    ,
                    this.setThetaPhiTargetToLookThroughTargetTowardsObjective = function(e) {
                        var t = this.dampedTarget.clone().sub(e);
                        this.targetTheta = Math.atan2(t.x, t.z),
                        this.targetPhi = Math.atan2(Math.sqrt(t.x * t.x + t.z * t.z), t.y)
                    }
                    ,
                    this.onMouseDown = function(e) {
                        if (a.enabled !== !1) {
                            if (e.preventDefault(),
                            e.button === a.mouseButtons.ORBIT)
                                if (a.controls2D) {
                                    if (a.noPan === !0)
                                        return;
                                    a.state = a.STATE.PAN,
                                    a.panStart.set(e.clientX, e.clientY)
                                } else {
                                    if (a.noRotate === !0)
                                        return;
                                    a.state = a.STATE.ROTATE,
                                    a.rotateStart.set(e.clientX, e.clientY)
                                }
                            else if (e.button === a.mouseButtons.ZOOM) {
                                if (a.noZoom === !0)
                                    return;
                                a.state = a.STATE.DOLLY,
                                a.dollyStart.set(e.clientX, e.clientY)
                            } else if (e.button === a.mouseButtons.PAN)
                                if (a.controls2D) {
                                    if (a.noRotate === !0)
                                        return;
                                    a.state = a.STATE.ROTATE,
                                    a.rotateStart.set(e.clientX, e.clientY)
                                } else {
                                    if (a.noPan === !0)
                                        return;
                                    a.state = a.STATE.PAN,
                                    a.panStart.set(e.clientX, e.clientY)
                                }
                            a.state !== a.STATE.NONE && (a.domElement.addEventListener("mousemove", a.onMouseMove, !1),
                            a.domElement.addEventListener("mouseup", a.onMouseUp, !1),
                            a.domElement.addEventListener("mouseout", a.onMouseUp, !1),
                            a.dispatchEvent(a.startEvent))
                        }
                    }
                    ,
                    this.soundRotate = function(e) {
                        a.controlAPI.dispatchCameraRotationSoundEvent(e.length())
                    }
                    ,
                    this.soundDolly = function(e) {
                        a.controlAPI.dispatchCameraDollySoundEvent(e)
                    }
                    ,
                    this.soundPan = function(e) {
                        a.controlAPI.dispatchCameraPanSoundEvent(e.length())
                    }
                    ,
                    this.onMouseMove = function(t) {
                        if (a.enabled !== !1) {
                            t.preventDefault();
                            var n = a.domElement === document ? a.domElement.body : a.domElement;
                            if (a.state === a.STATE.ROTATE) {
                                if (a.noRotate === !0)
                                    return;
                                if (a.rotateEnd.set(t.clientX, t.clientY),
                                a.controls2D) {
                                    var i = a.getScreenRotationCenter()
                                      , r = a.rotateStart.clone().sub(i).normalize()
                                      , o = a.rotateEnd.clone().sub(i).normalize()
                                      , s = Math.asin(r.x * o.y - r.y * o.x);
                                    a.rotateLeft(-s),
                                    a.soundRotate(new e.Vector2(-s,0))
                                } else {
                                    var l = a.rotateEnd.clone().sub(a.rotateStart)
                                      , c = 2 * Math.PI * l.x / n.clientWidth * a.rotateSpeed
                                      , u = 2 * Math.PI * l.y / n.clientHeight * a.rotateSpeed;
                                    a.rotateLeft(c),
                                    a.rotateUp(u),
                                    a.soundRotate(new e.Vector2(c,u))
                                }
                                a.rotateStart.copy(a.rotateEnd)
                            } else if (a.state === a.STATE.DOLLY) {
                                if (a.noZoom === !0)
                                    return;
                                a.dollyEnd.set(t.clientX, t.clientY),
                                a.dollyDelta.subVectors(a.dollyEnd, a.dollyStart),
                                a.dollyDelta.y > 0 ? a.dollyIn() : a.dollyDelta.y < 0 && a.dollyOut(),
                                a.dollyStart.copy(a.dollyEnd)
                            } else if (a.state === a.STATE.PAN) {
                                if (a.noPan === !0)
                                    return;
                                a.panEnd.set(t.clientX, t.clientY),
                                a.panDelta.subVectors(a.panEnd, a.panStart),
                                a.pan(a.panDelta.x, a.panDelta.y),
                                a.panStart.copy(a.panEnd)
                            }
                        }
                    }
                    ,
                    this.onMouseUp = function() {
                        a.enabled !== !1 && (a.domElement.removeEventListener("mousemove", a.onMouseMove, !1),
                        a.domElement.removeEventListener("mouseup", a.onMouseUp, !1),
                        a.domElement.removeEventListener("mouseout", a.onMouseUp, !1),
                        a.dispatchEvent(a.endEvent),
                        a.state = a.STATE.NONE)
                    }
                    ,
                    this.onMouseWheel = function(e) {
                        if (a.enabled !== !1 && a.noZoom !== !0 && a.state === a.STATE.NONE) {
                            e.preventDefault(),
                            e.stopPropagation();
                            var t = 0;
                            void 0 !== e.wheelDelta ? t = e.wheelDelta : void 0 !== e.detail && (t = -e.detail),
                            t > 0 ? a.dollyOut() : 0 > t && a.dollyIn(),
                            a.dispatchEvent(a.startEvent),
                            a.dispatchEvent(a.endEvent)
                        }
                    }
                    ,
                    this.onKeyDown = function(e) {
                        if (a.enabled !== !1 && a.noKeys !== !0 && a.noPan !== !0)
                            switch (e.keyCode) {
                            case a.keys.UP:
                                a.pan(0, a.keyPanSpeed);
                                break;
                            case a.keys.BOTTOM:
                                a.pan(0, -a.keyPanSpeed);
                                break;
                            case a.keys.LEFT:
                                a.pan(a.keyPanSpeed, 0);
                                break;
                            case a.keys.RIGHT:
                                a.pan(-a.keyPanSpeed, 0)
                            }
                    }
                    ,
                    this.touchstart = function(e) {
                        if (a.enabled !== !1) {
                            switch (e.touches.length) {
                            case 1:
                                if (a.noRotate === !0)
                                    return;
                                a.state = a.STATE.TOUCH_ROTATE,
                                a.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);
                                break;
                            case 2:
                                if (a.noZoom === !0)
                                    return;
                                a.state = a.STATE.TOUCH_DOLLY;
                                var t = e.touches[0].pageX - e.touches[1].pageX
                                  , n = e.touches[0].pageY - e.touches[1].pageY
                                  , i = Math.sqrt(t * t + n * n);
                                a.dollyStart.set(0, i);
                                break;
                            case 3:
                                if (a.noPan === !0)
                                    return;
                                a.state = a.STATE.TOUCH_PAN,
                                a.panStart.set(e.touches[0].pageX, e.touches[0].pageY);
                                break;
                            default:
                                a.state = a.STATE.NONE
                            }
                            a.state !== a.STATE.NONE && a.dispatchEvent(a.startEvent)
                        }
                    }
                    ,
                    this.touchmove = function(t) {
                        if (a.enabled !== !1)
                            switch (t.preventDefault(),
                            t.stopPropagation(),
                            t.touches.length) {
                            case 1:
                                if (a.noRotate === !0)
                                    return;
                                if (a.state !== a.STATE.TOUCH_ROTATE)
                                    return;
                                a.rotateEnd.set(t.touches[0].pageX, t.touches[0].pageY);
                                var n = a.rotateEnd.clone().sub(a.rotateStart)
                                  , i = 2 * Math.PI * n.x / a.element.clientWidth * a.rotateSpeed
                                  , r = 2 * Math.PI * n.y / a.element.clientHeight * a.rotateSpeed;
                                a.rotateLeft(i),
                                a.rotateUp(r),
                                a.soundRotate(new e.Vector2(i,r)),
                                a.rotateStart.copy(a.rotateEnd);
                                break;
                            case 2:
                                if (a.noZoom === !0)
                                    return;
                                if (a.state !== a.STATE.TOUCH_DOLLY)
                                    return;
                                var o = t.touches[0].pageX - t.touches[1].pageX
                                  , s = t.touches[0].pageY - t.touches[1].pageY
                                  , l = Math.sqrt(o * o + s * s);
                                a.dollyEnd.set(0, l),
                                a.dollyDelta.subVectors(a.dollyEnd, a.dollyStart),
                                a.dollyDelta.y > 0 ? a.dollyOut() : a.dollyDelta.y < 0 && a.dollyIn(),
                                a.dollyStart.copy(a.dollyEnd);
                                break;
                            case 3:
                                if (a.noPan === !0)
                                    return;
                                if (a.state !== a.STATE.TOUCH_PAN)
                                    return;
                                a.panEnd.set(t.touches[0].pageX, t.touches[0].pageY),
                                a.panDelta.subVectors(a.panEnd, a.panStart),
                                a.pan(a.panDelta.x, a.panDelta.y),
                                a.panStart.copy(a.panEnd);
                                break;
                            default:
                                a.state = a.STATE.NONE
                            }
                    }
                    ,
                    this.touchend = function() {
                        a.enabled !== !1 && (a.dispatchEvent(a.endEvent),
                        a.state = a.STATE.NONE)
                    }
                    ,
                    this.controlAPI = o,
                    this.domElement = void 0 !== i ? i : document,
                    this.element = this.domElement === document ? this.domElement.body : this.domElement,
                    this.state = this.STATE.NONE,
                    this.target0 = this.target.clone(),
                    this.position0 = this.camera.position.clone(),
                    this.zoom0 = this.camera.zoom,
                    this.domElement.addEventListener("contextmenu", function(e) {
                        e.preventDefault()
                    }, !1),
                    this.domElement.addEventListener("mousedown", this.onMouseDown, !1),
                    this.domElement.addEventListener("mousewheel", this.onMouseWheel, !1),
                    this.domElement.addEventListener("DOMMouseScroll", this.onMouseWheel, !1),
                    this.domElement.addEventListener("touchstart", this.touchstart, !1),
                    this.domElement.addEventListener("touchend", this.touchend, !1),
                    this.domElement.addEventListener("touchmove", this.touchmove, !1),
                    this.update()
                }
                return i(n, t),
                n.prototype.rotateLeft = function(e) {
                    void 0 === e && (e = this.getAutoRotationAngle()),
                    this.targetTheta -= e
                }
                ,
                n.prototype.rotateUp = function(e) {
                    void 0 === e && (e = this.getAutoRotationAngle()),
                    this.targetPhi -= e
                }
                ,
                n.prototype.panLeft = function(e) {
                    this.targetPan.x -= e
                }
                ,
                n.prototype.panUp = function(e) {
                    this.targetPan.y += e
                }
                ,
                n.prototype.getPanFactor = function() {
                    return 2 * this.camera.position.distanceTo(this.target) * Math.tan(this.camera.fov / 2 * Math.PI / 180) / this.element.clientHeight
                }
                ,
                n.prototype.pan = function(t, n) {
                    if (this.camera instanceof e.PerspectiveCamera) {
                        var i = this.getPanFactor();
                        this.panLeft(t * i),
                        this.panUp(n * i),
                        this.soundPan(new e.Vector2(t * i,n * i))
                    } else
                        console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")
                }
                ,
                n.prototype.getScreenRotationCenter = function() {
                    return new e.Vector2(-this.targetPan.x,this.targetPan.y).multiplyScalar(1 / this.getPanFactor()).add(new e.Vector2(.5 * this.element.clientWidth,.5 * this.element.clientHeight))
                }
                ,
                n.prototype.dollyIn = function(t) {
                    void 0 === t && (t = this.getZoomScale()),
                    this.camera instanceof e.PerspectiveCamera ? (this.targetRadius /= t,
                    this.targetRadius >= this.minDistance && this.targetRadius <= this.maxDistance && this.soundDolly(1 / t)) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")
                }
                ,
                n.prototype.dollyOut = function(t) {
                    void 0 === t && (t = this.getZoomScale()),
                    this.camera instanceof e.PerspectiveCamera ? (this.targetRadius *= t,
                    this.targetRadius >= this.minDistance && this.targetRadius <= this.maxDistance && this.soundDolly(t)) : console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")
                }
                ,
                n.prototype.resetTargetsToCurrentPosition = function() {
                    var e = this.target.clone().applyMatrix4(this.camera.matrixWorldInverse);
                    this.cumulativePan.x = -e.x,
                    this.cumulativePan.y = -e.y,
                    this.targetPan.copy(this.cumulativePan),
                    this.dampedTarget.copy(this.target),
                    this.camera.translateOnAxis(this.cumulativePan, -1);
                    var t = this.camera.position;
                    this.offset.copy(t).sub(this.dampedTarget),
                    this.controls2D || (this.targetTheta = this.theta = Math.atan2(this.offset.x, this.offset.z),
                    this.phi = Math.atan2(Math.sqrt(this.offset.x * this.offset.x + this.offset.z * this.offset.z), this.offset.y),
                    this.targetPhi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this.phi)),
                    this.targetPhi = Math.max(this.EPS, Math.min(Math.PI - this.EPS, this.targetPhi)));
                    var n = this.offset.length();
                    this.targetRadius = Math.max(this.minDistance, Math.min(this.maxDistance, n)),
                    this.camera.translateOnAxis(this.cumulativePan, 1),
                    this.lastResetTime = this.lastTime
                }
                ,
                n.prototype.setTargetScreenCoord = function(t) {
                    var n = this.target.clone().applyMatrix4(this.camera.matrixWorldInverse)
                      , i = new e.Vector3
                      , r = Math.tan(.5 * this.camera.fov * Math.PI / 180) * Math.abs(n.z);
                    i.set(r * this.camera.aspect * (t.x / this.element.clientWidth * 2 - 1), r * (2 * -(t.y / this.element.clientHeight) + 1), 0),
                    this.targetPan.set(this.cumulativePan.x + n.x - i.x, this.cumulativePan.y + n.y - i.y, 0)
                }
                ,
                n.prototype.augmentTargetZoomToSee = function(t) {
                    var n = new e.Vector3;
                    n.x = this.targetRadius * Math.sin(this.targetPhi) * Math.sin(this.targetTheta),
                    n.y = this.targetRadius * Math.cos(this.targetPhi),
                    n.z = this.targetRadius * Math.sin(this.targetPhi) * Math.cos(this.targetTheta);
                    var i = this.camera.clone();
                    i.position.copy(this.target).add(n),
                    i.lookAt(this.target),
                    i.translateOnAxis(this.targetPan, 1),
                    i.updateMatrixWorld(!0),
                    i.updateProjectionMatrix();
                    var r = t.clone().project(i)
                      , o = i.worldToLocal(t.clone())
                      , a = -o.z
                      , s = r.y < 0 ? r.y * this.element.clientHeight / (this.element.clientHeight - 2 * this.bottomGuardBand) : r.y
                      , l = Math.max(Math.abs(r.x), Math.abs(s))
                      , c = .8;
                    (l > c || 0 > a) && (a > 0 ? this.targetRadius += (l / c - 1) * a : this.targetRadius -= a + l * a / c)
                }
                ,
                n.prototype.updateTargetCamera = function() {}
                ,
                n.prototype.resetCumulativePan = function() {
                    this.useCumulativePan = !1,
                    this.cumulativePan.applyQuaternion(this.camera.quaternion),
                    this.dampedTarget.add(this.cumulativePan),
                    this.cumulativePan.set(0, 0, 0),
                    this.targetPan.applyQuaternion(this.camera.quaternion),
                    this.target.add(this.targetPan),
                    this.targetPan.set(0, 0, 0)
                }
                ,
                n.prototype.setCumulativePan = function() {
                    this.useCumulativePan = !0
                }
                ,
                n.prototype.translateWorld = function(e) {
                    this.camera.position.add(e),
                    this.camera.updateMatrixWorld(!0),
                    this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),
                    this.target.add(e),
                    this.dampedTarget.add(e)
                }
                ,
                n.prototype.update = function(e, t, n) {
                    this.lastTime = e,
                    this.camera.translateOnAxis(this.cumulativePan, -1);
                    var i = this.camera.position;
                    n && i.copy(n),
                    this.offset.copy(i).sub(this.dampedTarget),
                    this.theta = Math.atan2(this.offset.x, this.offset.z),
                    this.phi = Math.atan2(Math.sqrt(this.offset.x * this.offset.x + this.offset.z * this.offset.z), this.offset.y),
                    this.autoRotate && this.state === this.STATE.NONE && this.rotateLeft(this.getAutoRotationAngle()),
                    this.targetRadius = Math.max(this.minDistance, Math.min(this.maxDistance, this.targetRadius)),
                    this.targetPhi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this.targetPhi)),
                    this.targetPhi = Math.max(this.EPS, Math.min(Math.PI - this.EPS, this.targetPhi));
                    var a = this.offset.length();
                    if (n)
                        this.targetTheta = this.theta,
                        this.targetPhi = this.phi,
                        this.targetRadius = a;
                    else if (t) {
                        for (; this.targetTheta - this.theta > Math.PI; )
                            this.targetTheta -= 2 * Math.PI;
                        for (; this.targetTheta - this.theta < -Math.PI; )
                            this.targetTheta += 2 * Math.PI;
                        var s = this.targetPhi
                          , l = this.targetTheta;
                        if (!this.controls2D) {
                            var c = r["default"].clamp01(e - this.lastResetTime)
                              , u = this.camParams.phiCorrection * Math.sin(this.targetPhi) + 1 * (1 - this.camParams.phiCorrection);
                            for (s = this.targetPhi + c * u * this.camParams.height * .01 * Math.sin(.2 * e * this.camParams.heightFreq),
                            l = this.targetTheta + c * u * this.camParams.width * .05 * Math.cos(.2 * e * this.camParams.widthFreq),
                            s = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, s)); l - this.theta > Math.PI; )
                                l -= 2 * Math.PI;
                            for (; l - this.theta < -Math.PI; )
                                l += 2 * Math.PI
                        }
                        this.theta = r["default"].smoothDamp(this.theta, l, this.smoothDampVel, "theta", this.smoothDamp.delay, t),
                        this.phi = r["default"].smoothDamp(this.phi, s, this.smoothDampVel, "phi", this.smoothDamp.delay, t),
                        this.useCumulativePan ? this.cumulativePan.copy(o["default"].smoothDamp(this.cumulativePan, this.targetPan, this.smoothDampVel.pan, this.smoothDamp.panDelay, t)) : (this.cumulativePan.set(0, 0, 0),
                        this.targetPan.applyQuaternion(this.camera.quaternion),
                        this.target.add(this.targetPan),
                        this.targetPan.set(0, 0, 0)),
                        this.dampedTarget.copy(o["default"].smoothDamp(this.dampedTarget, this.target, this.smoothDampVel.target, this.smoothDamp.targetDelay, t));
                        var h = a;
                        a = r["default"].smoothDamp(a, this.targetRadius, this.smoothDampVel, "radius", this.smoothDamp.radiusDelay, t);
                        var d = a / h;
                        this.cumulativePan.multiplyScalar(d),
                        this.targetPan.multiplyScalar(d)
                    } else
                        this.theta = this.targetTheta,
                        this.phi = this.targetPhi,
                        a = this.targetRadius,
                        this.cumulativePan.copy(this.targetPan),
                        this.dampedTarget.copy(this.target);
                    this.offset.x = a * Math.sin(this.phi) * Math.sin(this.theta),
                    this.offset.y = a * Math.cos(this.phi),
                    this.offset.z = a * Math.sin(this.phi) * Math.cos(this.theta),
                    i.copy(this.dampedTarget).add(this.offset),
                    this.camera.lookAt(this.dampedTarget),
                    this.camera.translateOnAxis(this.cumulativePan, 1),
                    this.camera.updateMatrixWorld(!0);
                    var f = function(e, t) {
                        return e.x * t.x + e.y * t.y + e.z * t.z + e.w * t.w
                    };
                    (this.lastPosition.distanceToSquared(this.camera.position) > this.EPS || 8 * (1 - f(this.lastQuaternion, this.camera.quaternion)) > this.EPS) && (this.dispatchEvent(this.changeEvent),
                    this.lastPosition.copy(this.camera.position),
                    this.lastQuaternion.copy(this.camera.quaternion))
                }
                ,
                n.prototype.reset = function() {
                    this.state = this.STATE.NONE,
                    this.target.copy(this.target0),
                    this.camera.position.copy(this.position0),
                    this.camera.zoom = this.zoom0,
                    this.camera.updateProjectionMatrix(),
                    this.dispatchEvent(this.changeEvent),
                    this.update()
                }
                ,
                n.prototype.getPolarAngle = function() {
                    return this.phi
                }
                ,
                n.prototype.getAzimuthalAngle = function() {
                    return this.theta
                }
                ,
                n.prototype.getAutoRotationAngle = function() {
                    return 2 * Math.PI / 60 / 60 * this.autoRotateSpeed
                }
                ,
                n.prototype.getZoomScale = function() {
                    return Math.pow(.95, this.zoomSpeed)
                }
                ,
                n
            }(e.EventDispatcher);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = a
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        var n = function() {
            function e() {}
            return e.lerp = function(e, t, n) {
                return (1 - n) * e + n * t
            }
            ,
            e.clamp01 = function(e) {
                return 0 > e ? 0 : 1 > e ? e : 1
            }
            ,
            e.smoothstep = function(t) {
                return e.clamp01(t * t * (3 - 2 * t))
            }
            ,
            e.gotoValue = function(e, t, n) {
                return t > e ? t > e + n ? e + n : t : e - n > t ? e - n : t
            }
            ,
            e.goto02Value = function(t, n, i) {
                var r = n ? 1 : 0;
                return t > r && (r += 2),
                t = e.gotoValue(t, r, i),
                t >= 2 && (t -= 2),
                t
            }
            ,
            e.smoothDamp = function(e, t, n, i, r, o) {
                r = Math.max(1e-4, r);
                var a = 2 / r
                  , s = a * o
                  , l = 1 / (1 + s + .48 * s * s + .235 * s * s * s)
                  , c = e - t
                  , u = t
                  , h = n[i]
                  , d = (h + a * c) * o;
                n[i] = (h - a * d) * l;
                var f = t + (c + d) * l;
                return u - e > 0 == f > u && (f = u,
                h = (f - u) / o),
                f
            }
            ,
            e.rnd = function(e) {
                return Math.floor(Math.random() * e)
            }
            ,
            e.randomElem = function(t) {
                return t.length > 0 ? t[e.rnd(t.length)] : null
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t, n) {
        (function(e) {
            var n = function() {
                function t() {}
                return t.smoothDamp = function(t, n, i, r, o) {
                    r = Math.max(1e-4, r);
                    var a = 2 / r
                      , s = a * o
                      , l = 1 / (1 + s + .48 * s * s + .235 * s * s * s)
                      , c = (new e.Vector3).subVectors(t, n)
                      , u = (new e.Vector3).addVectors(i, (new e.Vector3).copy(c).multiplyScalar(a)).multiplyScalar(o);
                    i.sub((new e.Vector3).copy(u).multiplyScalar(a)).multiplyScalar(l);
                    var h = (new e.Vector3).addVectors(c, u).multiplyScalar(l).add(n);
                    return c.dot((new e.Vector3).subVectors(h, n)) < 0 && (h = n,
                    i.set(0, 0, 0)),
                    h
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = n
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(29)
              , a = n(30)
              , s = n(46)
              , l = function(t) {
                function n() {
                    var e = this;
                    t.call(this),
                    this.routeSelection = {
                        small: !1,
                        medium: !1,
                        large: !1
                    },
                    this.factionSelection = {},
                    this.lrScannerSelection = {
                        lifeforms: !1,
                        economy: !1,
                        crime: !1
                    },
                    this.lrScannerHeatmap = {
                        lifeforms: !1,
                        economy: !1,
                        crime: !1
                    },
                    this.factionHeatmap = {},
                    this.goal = new o["default"](o.GoalEnum.galacticView),
                    this.hovering = null,
                    this.info = {
                        system: "SOL",
                        body: "EARTH"
                    },
                    this.defaultSelectSystem = function(t) {
                        0 === t.button ? e.gotoSystemView().setSystemCode(t.systemCode) : e.setSystemPivot(t.systemCode)
                    }
                    ,
                    this.defaultSelectBody = function(t) {
                        0 === t.button ? e.gotoPlanetaryView().setPlanetaryCode(t.planetaryCode) : e.setPlanetaryPivot(t.systemCode, t.planetaryCode)
                    }
                    ,
                    this.defaultSelectJumpPoint = function(t) {
                        0 === t.button ? e.goal.planetaryCode === t.planetaryCode ? e.gotoSystemView().setSystemCode(t.gotoCode) : e.gotoPlanetaryView().setPlanetaryCode(t.planetaryCode) : e.gotoSystemView().setSystemCode(t.gotoCode)
                    }
                    ,
                    this.defaultSelectNothing = function(t) {
                        e.goal.isGalacticView && 2 === t.button ? e.releaseSystemPivot() : e.goal.isPlanetaryView ? e.gotoSystemView().setSystemCode(e.goal.systemCode) : e.gotoGalacticView()
                    }
                    ,
                    this.defaultDblClick = function(e) {}
                    ,
                    this.defaultHoverEvent = function(e) {}
                    ,
                    this.defaultEvent = function(e) {
                        console.log("Event " + e.name)
                    }
                    ,
                    this.setDirty = function() {
                        return e.dispatchEvent({
                            type: "updateSelection",
                            target: e
                        })
                    }
                }
                return i(n, t),
                Object.defineProperty(n.prototype, "camctrl", {
                    get: function() {
                        return this.env.camctl
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "affiliationCodes", {
                    get: function() {
                        return this.env.galaxy.affiliationCodes
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "affiliations", {
                    get: function() {
                        return this.env.galaxy.affiliations
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "affiliationColors", {
                    get: function() {
                        return this.env.galaxy.affiliationColors
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.start = function() {
                    this.env.gameLoop.start(),
                    this.env.controlAPI.dispatchSoundEvent("StartGalaxyAmbiance"),
                    this.env.sm.changeState("StateGalaxy", {
                        firstTime: !0
                    })
                }
                ,
                n.prototype.showLoadingScreen = function(e) {
                    this.env.postProcess.showLoadingScreen(e)
                }
                ,
                n.prototype.addToGUI = function(e) {
                    var t = this
                      , n = e.addFolder("ControlAPI");
                    n.add(this.info, "system"),
                    n.add({
                        centerGalaxy: function() {
                            return t.gotoGalacticView().setSystemCode(t.info.system)
                        }
                    }, "centerGalaxy"),
                    n.add({
                        gotoSystem: function() {
                            return t.gotoSystemView().setSystemCode(t.info.system)
                        }
                    }, "gotoSystem");
                    for (var i = n.addFolder("Factions"), r = n.addFolder("Heatmap Factions"), o = 0, a = this.env.galaxy.affiliationCodes; o < a.length; o++) {
                        var s = a[o];
                        i.add(this.factionSelection, s).onChange(this.setDirty),
                        r.add(this.factionHeatmap, s).onChange(this.setDirty)
                    }
                    var l = n.addFolder("Routes");
                    l.add(this.routeSelection, "small").onChange(this.setDirty),
                    l.add(this.routeSelection, "medium").onChange(this.setDirty),
                    l.add(this.routeSelection, "large").onChange(this.setDirty);
                    var c = {
                        showRandomRoute: function() {
                            t.env.galaxy.showRandomRoutingFound()
                        },
                        hideRoute: function() {
                            t.showRouting(null)
                        },
                        next: function() {
                            t.env.gameLoop.doNotShowGUI(),
                            t.routingNext()
                        },
                        previous: function() {
                            t.env.gameLoop.doNotShowGUI(),
                            t.routingPrevious()
                        }
                    };
                    l.add(c, "showRandomRoute"),
                    l.add(c, "next"),
                    l.add(c, "previous"),
                    l.add(c, "hideRoute");
                    var u = n.addFolder("Long-Range Scanner");
                    u.add(this.lrScannerSelection, "lifeforms").onChange(this.setDirty),
                    u.add(this.lrScannerSelection, "economy").onChange(this.setDirty),
                    u.add(this.lrScannerSelection, "crime").onChange(this.setDirty);
                    var h = n.addFolder("Heatmap Scanner");
                    h.add(this.lrScannerHeatmap, "lifeforms").onChange(this.setDirty),
                    h.add(this.lrScannerHeatmap, "economy").onChange(this.setDirty),
                    h.add(this.lrScannerHeatmap, "crime").onChange(this.setDirty);
                    var d = {
                        controls2d: !1
                    };
                    n.add(d, "controls2d").onChange(function(e) {
                        return t.controls2D = e
                    })
                }
                ,
                n.prototype.afterPreload = function() {
                    for (var e = 0, t = this.env.galaxy.affiliationCodes; e < t.length; e++) {
                        var n = t[e];
                        this.factionSelection[n] = !0,
                        this.factionHeatmap[n] = !1
                    }
                }
                ,
                n.prototype.setSystemPivot = function(e) {
                    this.env.camctl.useCumulativePan = !0,
                    this.env.camctl.seamlessChangeTargetPosition(this.env.galaxy.getSystemPosition(e))
                }
                ,
                n.prototype.releaseSystemPivot = function() {
                    this.env.camctl.useCumulativePan = !1
                }
                ,
                n.prototype.setPlanetaryPivot = function(e, t) {
                    this.env.camctl.useCumulativePan = !0,
                    this.env.camctl.seamlessChangeTargetPosition(this.env.galaxy.getPlanetaryPosition(e, t))
                }
                ,
                n.prototype.setPivotScreenCoord = function(t, n) {
                    this.env.camctl.setTargetScreenCoord(new e.Vector2(t,n))
                }
                ,
                n.prototype.getSystemScreenCoord = function(e) {
                    return this.env.galaxy.getSystemScreenCoord(e)
                }
                ,
                n.prototype.getPlanetaryScreenCoord = function(e, t) {
                    return this.env.galaxy.getPlanetaryScreenCoord(e, t)
                }
                ,
                n.prototype.setSystemStickyHovering = function(e) {
                    this.env.galaxy.setSystemStickyHovering(e)
                }
                ,
                n.prototype.releaseSystemStickyHovering = function() {
                    this.env.galaxy.releaseSystemStickyHovering()
                }
                ,
                n.prototype.setPlanetaryStickyHovering = function(e, t) {
                    this.env.galaxy.setPlanetaryStickyHovering(e, t)
                }
                ,
                n.prototype.releasePlanetaryStickyHovering = function(e) {
                    this.env.galaxy.releasePlanetaryStickyHovering(e)
                }
                ,
                n.prototype.forceSystemHighlight = function(e) {
                    this.env.galaxy.forceSystemHighlight(e)
                }
                ,
                n.prototype.releaseSystemHighlight = function(e) {
                    this.env.galaxy.releaseSystemHighlight(e)
                }
                ,
                n.prototype.forcePlanetaryHovered = function(e, t) {
                    this.env.galaxy.forcePlanetaryHovered(e, t)
                }
                ,
                n.prototype.releasePlanetaryHovered = function(e, t) {
                    this.env.galaxy.releasePlanetaryHovered(e, t)
                }
                ,
                n.prototype.setLandingZoneHighlight = function(e, t, n, i) {
                    this.env.galaxy.setLandingZoneHighlight(e, t, n, i)
                }
                ,
                Object.defineProperty(n.prototype, "bottomGuardBand", {
                    get: function() {
                        return this.env.camctl.bottomGuardBand
                    },
                    set: function(e) {
                        this.env.camctl.bottomGuardBand = e
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.lockCamera = function() {
                    this.camctrl.locked = !0
                }
                ,
                n.prototype.unlockCamera = function() {
                    this.camctrl.locked = !1
                }
                ,
                Object.defineProperty(n.prototype, "cameraInfo", {
                    get: function() {
                        return this.camctrl.cameraInfo
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.showRouting = function(e) {
                    e && e.length > 1 ? e[0].raw ? this.env.galaxy.showRouting(e) : this.env.galaxy.showRouting(e.map(s.toRouteSegmentAPI)) : this.env.galaxy.showRouting(null)
                }
                ,
                n.prototype.routingNext = function() {
                    this.isOnRoute ? this.env.galaxy.routingNextSystem() : (this.env.galaxy.resetCurrentRoute(),
                    this.env.galaxy.routingNextSystem()),
                    this.routingCurrent()
                }
                ,
                n.prototype.routingPrevious = function() {
                    this.isOnRoute ? this.env.galaxy.routingPreviousSystem() : (this.env.galaxy.resetCurrentRoute(),
                    this.env.galaxy.routingPreviousSystem()),
                    this.routingCurrent()
                }
                ,
                n.prototype.getCurrentRoutingSystem = function() {
                    return this.env.galaxy.currentRoutingSegment ? this.env.galaxy.currentRoutingSegment.system_code : null
                }
                ,
                n.prototype.setCurrentRoutingSystem = function(e) {
                    return this.env.galaxy.routingFirstInSystem(e),
                    this.gotoSystemView().setSystemCode(e).setRouteInView()
                }
                ,
                Object.defineProperty(n.prototype, "isOnRoute", {
                    get: function() {
                        return this.env.galaxy.currentRoutingSegment ? !this.goal.isGalacticView && this.goal.systemCode === this.env.galaxy.currentRoutingSegment.system_code : this.goal.isGalacticView
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.routingCurrent = function() {
                    return this.env.galaxy.currentRoutingSegment ? this.gotoSystemView().setSystemCode(this.env.galaxy.currentRoutingSystemCode).setRouteInView() : this.gotoGalacticView()
                }
                ,
                n.prototype.setGoal = function(e) {
                    var t = new o["default"](e);
                    return this.goal && !this.goal.done && this.goal.abort(),
                    this.goal = t,
                    t
                }
                ,
                n.prototype.getJumpPointDestination = function(e) {
                    return this.env.galaxy.getJumpPointDestination(e)
                }
                ,
                n.prototype.getJumpPointInfo = function(e) {
                    return this.env.galaxy.getJumpPointInfo(e)
                }
                ,
                n.prototype.load = function() {
                    return this.env.gameLoop.load()
                }
                ,
                n.prototype.gotoGalacticView = function() {
                    return this.setGoal(o.GoalEnum.galacticView)
                }
                ,
                n.prototype.gotoSystemView = function() {
                    return this.setGoal(o.GoalEnum.systemView)
                }
                ,
                n.prototype.gotoPlanetaryView = function() {
                    return this.setGoal(o.GoalEnum.planetaryView)
                }
                ,
                n.prototype.dispatchSelectSystem = function(e, t) {
                    this.dispatchEvent({
                        type: "selectSystem",
                        target: this,
                        systemCode: e,
                        button: t
                    })
                }
                ,
                n.prototype.dispatchSelectBody = function(e, t, n) {
                    this.dispatchEvent({
                        type: "selectBody",
                        target: this,
                        systemCode: e,
                        planetaryCode: t,
                        button: n
                    })
                }
                ,
                n.prototype.dispatchSelectJumpPoint = function(e, t, n, i) {
                    this.dispatchEvent({
                        type: "selectJumpPoint",
                        target: this,
                        systemCode: e,
                        planetaryCode: t,
                        gotoCode: n,
                        button: i
                    })
                }
                ,
                n.prototype.dispatchSelectNothing = function(e) {
                    this.dispatchEvent({
                        type: "selectNothing",
                        target: this,
                        button: e
                    })
                }
                ,
                n.prototype.dispatchHoverSystem = function(e) {
                    this.hovering && this.hovering.systemCode === e && !this.hovering.planetaryCode || (this.dispatchHoverOut(),
                    this.hovering = {
                        systemCode: e
                    },
                    this.dispatchEvent({
                        type: "hoverSystemIn",
                        target: this,
                        systemCode: e
                    }),
                    this.dispatchSoundEvent("HoverSystemIn"))
                }
                ,
                n.prototype.dispatchHoverBody = function(e, t) {
                    this.hovering && this.hovering.systemCode === e && this.hovering.planetaryCode === t && !this.hovering.gotoCode || (this.dispatchHoverOut(),
                    this.hovering = {
                        systemCode: e,
                        planetaryCode: t
                    },
                    this.dispatchEvent({
                        type: "hoverBodyIn",
                        target: this,
                        systemCode: e,
                        planetaryCode: t
                    }),
                    this.dispatchSoundEvent("HoverBodyIn"))
                }
                ,
                n.prototype.dispatchHoverJumpPoint = function(e, t, n) {
                    this.hovering && this.hovering.systemCode === e && this.hovering.planetaryCode === t && this.hovering.gotoCode === n || (this.dispatchHoverOut(),
                    this.hovering = {
                        systemCode: e,
                        planetaryCode: t,
                        gotoCode: n
                    },
                    this.dispatchEvent({
                        type: "hoverJumpPointIn",
                        target: this,
                        systemCode: e,
                        planetaryCode: t,
                        gotoCode: n
                    }),
                    this.dispatchSoundEvent("HoverJumpPointIn"))
                }
                ,
                n.prototype.dispatchHoverOut = function() {
                    this.hovering && (this.hovering.gotoCode ? (this.dispatchEvent({
                        type: "hoverJumpPointOut",
                        target: this,
                        systemCode: this.hovering.systemCode,
                        planetaryCode: this.hovering.planetaryCode,
                        gotoCode: this.hovering.gotoCode
                    }),
                    this.dispatchSoundEvent("HoverJumpPointOut")) : this.hovering.planetaryCode ? (this.dispatchEvent({
                        type: "hoverBodyOut",
                        target: this,
                        systemCode: this.hovering.systemCode,
                        planetaryCode: this.hovering.planetaryCode
                    }),
                    this.dispatchSoundEvent("HoverBodyOut")) : (this.dispatchEvent({
                        type: "hoverSystemOut",
                        target: this,
                        systemCode: this.hovering.systemCode
                    }),
                    this.dispatchSoundEvent("HoverSystemOut")),
                    this.hovering = null)
                }
                ,
                n.prototype.dispatchGenericEvent = function(e) {
                    this.dispatchEvent({
                        type: "event",
                        target: this,
                        name: e
                    })
                }
                ,
                n.prototype.showLongRangeScanner = function(e, t) {
                    void 0 === t && (t = 1),
                    this.env.galaxy.longRangeScanner.show(e, t)
                }
                ,
                n.prototype.setLongRangeScannerData = function(e, t, n, i) {
                    void 0 === i && (i = 1),
                    this.env.galaxy.longRangeScanner.setData(e, t, n, i)
                }
                ,
                n.prototype.setLongRangeScannerPosition = function(e, t) {
                    this.env.galaxy.longRangeScanner.setCanvasPosition(e, t)
                }
                ,
                n.prototype.setLongRangeScannerSize = function(e, t) {
                    this.env.galaxy.longRangeScanner.setCanvasSize(e, t)
                }
                ,
                n.prototype.dispatchSoundEvent = function(e) {
                    this.dispatchEvent({
                        type: "soundEvent",
                        target: this,
                        name: e
                    })
                }
                ,
                n.prototype.dispatchCameraRotationSoundEvent = function(e) {
                    this.dispatchEvent({
                        type: "cameraRotationSoundEvent",
                        target: this,
                        rotation: e
                    })
                }
                ,
                n.prototype.dispatchCameraDollySoundEvent = function(e) {
                    this.dispatchEvent({
                        type: "cameraDollySoundEvent",
                        target: this,
                        dolly: e
                    })
                }
                ,
                n.prototype.dispatchCameraPanSoundEvent = function(e) {
                    this.dispatchEvent({
                        type: "cameraPanSoundEvent",
                        target: this,
                        pan: e
                    })
                }
                ,
                n.prototype.getInfo = function() {
                    return this.env.galaxy.bootup
                }
                ,
                n.prototype.getSystemInfo = function(e) {
                    var t = this.env.galaxy.stars[e];
                    return t.data.detail || t.brief
                }
                ,
                n.prototype.getBodyInfo = function(e, t) {
                    var n = this.env.galaxy.stars[e].starSystem.bodiesByCode[t];
                    return n.data.detail || n.info
                }
                ,
                Object.defineProperty(n.prototype, "controls2D", {
                    get: function() {
                        return this.camctrl.controls2D
                    },
                    set: function(e) {
                        this.camctrl.controls2D = e
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.addDefaultListeners = function() {
                    this.addEventListener("selectSystem", this.defaultSelectSystem),
                    this.addEventListener("selectBody", this.defaultSelectBody),
                    this.addEventListener("selectJumpPoint", this.defaultSelectJumpPoint),
                    this.addEventListener("selectNothing", this.defaultSelectNothing),
                    this.addEventListener("selectSystemDblClick", this.defaultDblClick),
                    this.addEventListener("selectBodyDblClick", this.defaultDblClick),
                    this.addEventListener("selectJumpPointDblClick", this.defaultDblClick),
                    this.addEventListener("selectNothingDblClick", this.defaultDblClick),
                    this.addEventListener("event", this.defaultEvent),
                    this.addEventListener("hoverSystemIn", this.defaultHoverEvent),
                    this.addEventListener("hoverBodyIn", this.defaultHoverEvent),
                    this.addEventListener("hoverJumpPointIn", this.defaultHoverEvent),
                    this.addEventListener("hoverJumpPointOut", this.defaultHoverEvent),
                    this.addEventListener("hoverBodyOut", this.defaultHoverEvent),
                    this.addEventListener("hoverSystemOut", this.defaultHoverEvent)
                }
                ,
                n.prototype.removeDefaultListeners = function() {
                    this.removeEventListener("selectSystem", this.defaultSelectSystem),
                    this.removeEventListener("selectBody", this.defaultSelectBody),
                    this.removeEventListener("selectJumpPoint", this.defaultSelectJumpPoint),
                    this.removeEventListener("selectNothing", this.defaultSelectNothing),
                    this.removeEventListener("selectSystemDblClick", this.defaultDblClick),
                    this.removeEventListener("selectBodyDblClick", this.defaultDblClick),
                    this.removeEventListener("selectJumpPointDblClick", this.defaultDblClick),
                    this.removeEventListener("selectNothingDblClick", this.defaultDblClick),
                    this.removeEventListener("event", this.defaultEvent),
                    this.removeEventListener("hoverSystemIn", this.defaultHoverEvent),
                    this.removeEventListener("hoverBodyIn", this.defaultHoverEvent),
                    this.removeEventListener("hoverJumpPointIn", this.defaultHoverEvent),
                    this.removeEventListener("hoverJumpPointOut", this.defaultHoverEvent),
                    this.removeEventListener("hoverBodyOut", this.defaultHoverEvent),
                    this.removeEventListener("hoverSystemOut", this.defaultHoverEvent)
                }
                ,
                Object.defineProperty(n.prototype, "loadingObjects", {
                    get: function() {
                        return a["default"].objectsLoading
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = l
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        !function(e) {
            e[e.galacticView = 0] = "galacticView",
            e[e.systemView = 1] = "systemView",
            e[e.planetaryView = 2] = "planetaryView"
        }(t.GoalEnum || (t.GoalEnum = {}));
        var n = t.GoalEnum
          , i = function() {
            function e(t) {
                this.type = t,
                this.systemCode = null,
                this.planetaryCode = null,
                this.routeInView = !1,
                this.camInfo = null,
                this.callback = null,
                this.done = !1,
                this.aborted = !1,
                this.bodyPixelSize = null,
                this.typeInfo = e.typesInfo[n[t]]
            }
            return Object.defineProperty(e.prototype, "isGalacticView", {
                get: function() {
                    return this.typeInfo.isGalacticView
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "isSystemView", {
                get: function() {
                    return this.typeInfo.isSystemView
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "isPlanetaryView", {
                get: function() {
                    return this.typeInfo.isPlanetaryView
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.setSystemCode = function(e) {
                return this.systemCode = e,
                this
            }
            ,
            e.prototype.setPlanetaryCode = function(e) {
                return this.planetaryCode = e,
                this
            }
            ,
            e.prototype.setCameraInfo = function(e) {
                return this.camInfo = e,
                this
            }
            ,
            e.prototype.setBodyPixelSize = function(e) {
                return this.bodyPixelSize = e,
                this
            }
            ,
            e.prototype.setRouteInView = function() {
                return this.routeInView = !0,
                this
            }
            ,
            e.prototype.onDone = function(e) {
                return this.callback = e,
                this
            }
            ,
            e.prototype.setDone = function() {
                this.aborted || this.done || (this.done = !0,
                this.callback && this.callback(!1))
            }
            ,
            e.prototype.abort = function() {
                this.aborted || this.done || (this.aborted = !0,
                this.done = !0,
                this.callback && this.callback(!0))
            }
            ,
            e.typesInfo = {
                galacticView: {
                    isGalacticView: !0
                },
                systemView: {
                    isSystemView: !0
                },
                planetaryView: {
                    isPlanetaryView: !0
                }
            },
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = i
    }
    , function(e, t, n) {
        (function(e) {
            var i, r = n(31), o = n(32), a = n(45);
            !function(e) {
                e[e.COLLADA = 0] = "COLLADA",
                e[e.GLTF = 1] = "GLTF"
            }(i || (i = {}));
            var s = function() {
                function t(e, t, n) {
                    this.type = e,
                    this.model = t,
                    this.animations = n
                }
                return t.prototype.update = function(e, t, n) {
                    if (this.type === i.COLLADA)
                        for (var r = 0, o = this.animations; r < o.length; r++) {
                            var a = o[r];
                            a.update(n)
                        }
                    else
                        for (var s = 0, l = this.animations; s < l.length; s++) {
                            var a = l[s];
                            a.update()
                        }
                }
                ,
                t.prototype.dispose = function() {}
                ,
                t.prototype.clone = function() {
                    var n = {}
                      , r = function(e) {
                        var t = e.clone(void 0, !1);
                        if (n[e.uuid] = t,
                        e.children)
                            for (var i = 0, o = e.children.length; o > i; i++)
                                t.add(r(e.children[i]));
                        return t
                    }
                      , o = function(e) {
                        var t = e.clone(n[e.root.uuid]);
                        return t.play(),
                        t
                    }
                      , a = function(t) {
                        var i = new e.glTFAnimation(t.interps.map(function(e) {
                            return {
                                keys: e.keys,
                                values: e.values,
                                count: e.count,
                                type: e.type,
                                path: e.path,
                                target: n[e.targetNode.uuid]
                            }
                        }));
                        return i.loop = t.loop,
                        i.play(),
                        i
                    }
                      , s = r(this.model)
                      , l = [];
                    if (this.type === i.COLLADA)
                        for (var c = 0, u = this.animations.length; u > c; c++)
                            l.push(o(this.animations[c]));
                    else
                        for (var c = 0, u = this.animations.length; u > c; c++)
                            l.push(a(this.animations[c]));
                    return new t(this.type,s,l)
                }
                ,
                t.prototype.play = function() {
                    for (var e = 0, t = this.animations; e < t.length; e++) {
                        var n = t[e];
                        n.play()
                    }
                }
                ,
                t.makeColladaObject = function(e, n) {
                    e.scale.x = e.scale.y = e.scale.z = 1;
                    for (var a = [], s = 0; s < n.length; ++s) {
                        var l = n[s]
                          , c = new r["default"](l.node,l);
                        c.loop = !0,
                        a.push(c)
                    }
                    return o["default"].collapseMaterialsPerName(e),
                    o["default"].convertMeshesWithThinlineMaterial(e),
                    o["default"].convertIncludedAdditiveMaterial(e),
                    new t(i.COLLADA,e,a)
                }
                ,
                t.makeGLTFObject = function(e, n) {
                    e.scale.x = e.scale.y = e.scale.z = 100;
                    for (var r = 0; r < n.length; r++) {
                        var a = n[r];
                        a.loop = !0,
                        a.play()
                    }
                    return o["default"].collapseMaterialsPerName(e),
                    o["default"].convertMeshesWithThinlineMaterial(e),
                    o["default"].convertIncludedAdditiveMaterial(e),
                    new t(i.GLTF,e,n)
                }
                ,
                t.loadObject = function(n) {
                    return new Promise(function(i, r) {
                        t.objectsLoading[n] = !0;
                        (new Date).getTime();
                        if (a["default"].strEndsWith(n, ".dae"))
                            (new e.ColladaLoader).load(n, function(e) {
                                delete t.objectsLoading[n],
                                i(t.makeColladaObject(e.scene, e.animations))
                            });
                        else if (a["default"].strEndsWith(n, ".gltf")) {
                            var o = new e.glTFLoader;
                            o.load(n, function(e) {
                                delete t.objectsLoading[n],
                                i(t.makeGLTFObject(e.scene, e.animations))
                            })
                        } else
                            r(new Error("not a dae or a gltf"))
                    }
                    )
                }
                ,
                t.objectsLoading = {},
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = s,
            window.LObject = s
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        var n = function(e) {
            for (var t = 0; t < e.keys.length; t++)
                e.keys[t].time < 0 && (e.keys[t].time = 0),
                e.keys[t].index = t;
            return e
        }
          , i = function() {
            function e(t, i) {
                this.root = t,
                i instanceof e ? (this.duration = i.duration,
                this.data = i.data,
                this.timeScale = i.timeScale,
                this.loop = i.loop) : (this.duration = i.length,
                this.data = n(i.hierarchy[0]),
                this.timeScale = 1,
                this.loop = !0),
                this.currentTime = 0,
                this.isPlaying = !1,
                this.isPaused = !0,
                this.transforms = [],
                this.animatedTransforms = [],
                this.prevKey = null,
                this.nextKey = null,
                this.init()
            }
            return e.prototype.init = function() {
                for (var e = 0, t = this.data.node.transforms.length; t > e; e++)
                    this.transforms.push(this.data.node.transforms[e].clone());
                for (var n = this.data.keys[0], e = 0, i = n.targets.length; i > e; e++)
                    for (var r = n.targets[e], o = 0, a = this.data.node.transforms.length; a > o; o++) {
                        var s = this.data.node.transforms[o];
                        s === r.transform && this.animatedTransforms.push(this.transforms[o])
                    }
                this.root.matrixAutoUpdate = !1,
                this.root.matrixWorldNeedsUpdate = !0,
                this.update(0)
            }
            ,
            e.prototype.clone = function(t) {
                return new e(t,this)
            }
            ,
            e.prototype.play = function(e) {
                if (void 0 === e && (e = 0),
                this.currentTime = void 0 !== e ? e : 0,
                this.isPlaying === !1) {
                    this.isPlaying = !0;
                    var t, n;
                    t = this.root,
                    n = this.data;
                    var i = this.data.keys;
                    i.length && (this.prevKey = i[0],
                    this.nextKey = i[1]),
                    this.update(0)
                }
                this.isPaused = !1
            }
            ,
            e.prototype.stop = function() {
                this.isPlaying = !1,
                this.isPaused = !1
            }
            ,
            e.prototype.update = function(e) {
                if (this.isPlaying !== !1) {
                    this.currentTime += e * this.timeScale;
                    var t = this.duration;
                    this.loop === !0 && this.currentTime > t && (this.currentTime %= t),
                    this.currentTime = Math.min(this.currentTime, t);
                    var n = this.data
                      , i = n.keys;
                    if (i.length && i.length > 1) {
                        var r = this.prevKey
                          , o = this.nextKey;
                        if (this.currentTime < r.time && (this.prevKey = r = i[0],
                        this.nextKey = o = i[1]),
                        o.time <= this.currentTime) {
                            for (; o.time < this.currentTime && o.index > r.index; )
                                r = o,
                                o = i[r.index + 1];
                            this.prevKey = r,
                            this.nextKey = o
                        }
                        o.time >= this.currentTime ? this.key_interpolate(r, o, this.currentTime) : this.key_interpolate(r, o, o.time),
                        this.updateMatrix()
                    }
                }
            }
            ,
            e.prototype.updateMatrix = function() {
                this.root.matrix.identity();
                for (var e = 0; e < this.transforms.length; e++)
                    this.transforms[e].apply(this.root.matrix);
                this.root.matrixWorldNeedsUpdate = !0
            }
            ,
            e.prototype.key_interpolate = function(e, t, n) {
                for (var i = 0, r = e.targets.length; r > i; i++) {
                    var o, a = e.targets[i], s = t.targets[i], l = this.animatedTransforms[i];
                    if ("matrix" !== l.type && s) {
                        var c = (n - e.time) / (t.time - e.time)
                          , u = s.data
                          , h = a.data;
                        if (0 > c && (c = 0),
                        c > 1 && (c = 1),
                        h.length) {
                            o = [];
                            for (var d = 0; d < h.length; ++d)
                                o[d] = h[d] + (u[d] - h[d]) * c
                        } else
                            o = h + (u - h) * c
                    } else
                        o = a.data;
                    l.update(o, a.member)
                }
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = i
    }
    , function(e, t, n) {
        (function(e) {
            var i = function() {
                function t() {}
                return t.replaceColorGradient = function(e, t, n, i, r, o, a) {
                    for (var s = e.getAttribute("color"), l = s.length / 18, c = 0, u = 1 / (l + 1), h = t.clone(), d = s.array, f = 0; l > f; f++) {
                        var p = 18 * f;
                        o && a > c ? (d[p + 0] = d[p + 3] = d[p + 15] = o.r,
                        d[p + 1] = d[p + 4] = d[p + 16] = o.g,
                        d[p + 2] = d[p + 5] = d[p + 17] = o.b,
                        d[p + 6] = d[p + 9] = d[p + 12] = o.r,
                        d[p + 7] = d[p + 10] = d[p + 13] = o.g,
                        d[p + 8] = d[p + 11] = d[p + 14] = o.b,
                        c += u,
                        h = t.clone().lerp(n, c)) : c > r ? (d[p + 0] = d[p + 3] = d[p + 15] = i.r,
                        d[p + 1] = d[p + 4] = d[p + 16] = i.g,
                        d[p + 2] = d[p + 5] = d[p + 17] = i.b,
                        d[p + 6] = d[p + 9] = d[p + 12] = i.r,
                        d[p + 7] = d[p + 10] = d[p + 13] = i.g,
                        d[p + 8] = d[p + 11] = d[p + 14] = i.b) : (d[p + 0] = d[p + 3] = d[p + 15] = h.r,
                        d[p + 1] = d[p + 4] = d[p + 16] = h.g,
                        d[p + 2] = d[p + 5] = d[p + 17] = h.b,
                        c += u,
                        h = t.clone().lerp(n, c),
                        d[p + 6] = d[p + 9] = d[p + 12] = h.r,
                        d[p + 7] = d[p + 10] = d[p + 13] = h.g,
                        d[p + 8] = d[p + 11] = d[p + 14] = h.b)
                    }
                    s.needsUpdate = !0
                }
                ,
                t.makeLineGeometry = function(t, n, i, r, o) {
                    for (var a = i ? t.length - 1 : t.length / 2, s = new Float32Array(18 * a), l = new Float32Array(18 * a), c = new Float32Array(12 * a), u = 0; a > u; u++) {
                        var h = i ? u : 2 * u
                          , d = 18 * u
                          , f = 12 * u
                          , p = t[h]
                          , m = t[h + 1]
                          , v = (new e.Vector3).subVectors(m, p).normalize();
                        n ? (c[f + 0] = c[f + 2] = c[f + 10] = n[h],
                        c[f + 6] = c[f + 8] = c[f + 4] = n[h + 1]) : (c[f + 0] = c[f + 2] = c[f + 10] = 0,
                        c[f + 6] = c[f + 8] = c[f + 4] = 1),
                        c[f + 1] = c[f + 5] = c[f + 9] = 0,
                        c[f + 3] = c[f + 7] = c[f + 11] = 1,
                        s[d + 0] = s[d + 3] = s[d + 15] = p.x,
                        s[d + 1] = s[d + 4] = s[d + 16] = p.y,
                        s[d + 2] = s[d + 5] = s[d + 17] = p.z,
                        s[d + 6] = s[d + 9] = s[d + 12] = m.x,
                        s[d + 7] = s[d + 10] = s[d + 13] = m.y,
                        s[d + 8] = s[d + 11] = s[d + 14] = m.z,
                        l[d + 0] = l[d + 3] = l[d + 6] = l[d + 9] = l[d + 12] = l[d + 15] = v.x,
                        l[d + 1] = l[d + 4] = l[d + 7] = l[d + 10] = l[d + 13] = l[d + 16] = v.y,
                        l[d + 2] = l[d + 5] = l[d + 8] = l[d + 11] = l[d + 14] = l[d + 17] = v.z
                    }
                    var g = new e.BufferGeometry;
                    if (g.addAttribute("position", new e.BufferAttribute(s,3)),
                    g.addAttribute("normal", new e.BufferAttribute(l,3)),
                    g.addAttribute("uv", new e.BufferAttribute(c,2)),
                    r) {
                        o = o || r;
                        for (var y = new Float32Array(18 * a), b = 0, x = 1 / (a + 1), w = r.clone(), u = 0; a > u; u++) {
                            var d = 18 * u;
                            y[d + 0] = y[d + 3] = y[d + 15] = w.r,
                            y[d + 1] = y[d + 4] = y[d + 16] = w.g,
                            y[d + 2] = y[d + 5] = y[d + 17] = w.b,
                            b += x,
                            w = r.clone().lerp(o, b),
                            y[d + 6] = y[d + 9] = y[d + 12] = w.r,
                            y[d + 7] = y[d + 10] = y[d + 13] = w.g,
                            y[d + 8] = y[d + 11] = y[d + 14] = w.b
                        }
                        g.addAttribute("color", new e.BufferAttribute(y,3))
                    }
                    return g.computeBoundingSphere(),
                    g.computeBoundingBox(),
                    g
                }
                ,
                t.makeCircleGeometry = function(t, n, i, r) {
                    void 0 === t && (t = 1),
                    void 0 === n && (n = 32);
                    for (var o = n, a = new Float32Array(18 * o), s = new Float32Array(18 * o), l = new Float32Array(12 * o), c = 0; o > c; c++) {
                        var u = c
                          , h = 18 * c
                          , d = 12 * c
                          , f = 2 * Math.PI * u / n
                          , p = 2 * Math.PI * (u + 1) / n
                          , m = Math.sin(f)
                          , v = Math.cos(f)
                          , g = Math.sin(p)
                          , y = Math.cos(p);
                        l[d + 0] = l[d + 2] = l[d + 4] = l[d + 6] = l[d + 8] = l[d + 12] = .5,
                        l[d + 1] = l[d + 5] = l[d + 9] = 0,
                        l[d + 3] = l[d + 7] = l[d + 11] = 1,
                        a[h + 0] = a[h + 3] = a[h + 15] = t * m,
                        a[h + 1] = a[h + 4] = a[h + 16] = t * v,
                        a[h + 2] = a[h + 5] = a[h + 17] = 0,
                        a[h + 6] = a[h + 9] = a[h + 12] = t * g,
                        a[h + 7] = a[h + 10] = a[h + 13] = t * y,
                        a[h + 8] = a[h + 11] = a[h + 14] = 0,
                        s[h + 0] = s[h + 3] = s[h + 15] = v,
                        s[h + 1] = s[h + 4] = s[h + 16] = -m,
                        s[h + 2] = s[h + 5] = s[h + 17] = 0,
                        s[h + 6] = s[h + 9] = s[h + 12] = y,
                        s[h + 7] = s[h + 10] = s[h + 13] = -g,
                        s[h + 8] = s[h + 11] = s[h + 14] = 0
                    }
                    var b = new e.BufferGeometry;
                    if (b.addAttribute("position", new e.BufferAttribute(a,3)),
                    b.addAttribute("normal", new e.BufferAttribute(s,3)),
                    b.addAttribute("uv", new e.BufferAttribute(l,2)),
                    i) {
                        r = r || i;
                        for (var x = new Float32Array(18 * o), w = 0, _ = 1 / (o + 1), S = i.clone(), c = 0; o > c; c++) {
                            var h = 18 * c;
                            x[h + 0] = x[h + 3] = x[h + 15] = S.r,
                            x[h + 1] = x[h + 4] = x[h + 16] = S.g,
                            x[h + 2] = x[h + 5] = x[h + 17] = S.b,
                            w += _,
                            S = i.clone().lerp(r, w),
                            x[h + 6] = x[h + 9] = x[h + 12] = S.r,
                            x[h + 7] = x[h + 10] = x[h + 13] = S.g,
                            x[h + 8] = x[h + 11] = x[h + 14] = S.b
                        }
                        b.addAttribute("color", new e.BufferAttribute(x,3))
                    }
                    return b.computeBoundingSphere(),
                    b.computeBoundingBox(),
                    b
                }
                ,
                t.makeCurveGeometry = function(t, n, i, r) {
                    var o = 2 * (n + 1)
                      , a = new Float32Array(3 * o)
                      , s = new Float32Array(3 * o)
                      , l = new Float32Array(2 * o)
                      , c = new Uint16Array(6 * n)
                      , u = new e.BufferGeometry;
                    u.addAttribute("position", new e.BufferAttribute(a,3)),
                    u.addAttribute("normal", new e.BufferAttribute(s,3)),
                    u.addAttribute("uv", new e.BufferAttribute(l,2)),
                    u.addAttribute("index", new e.BufferAttribute(c,3));
                    for (var h = 0; n >= h; h++) {
                        var d = h / n
                          , f = t.getPoint(d)
                          , p = t.getTangent(d)
                          , m = 6 * h
                          , v = 4 * h;
                        l[v + 0] = l[v + 2] = d * i;
                        1 / r(d);
                        l[v + 1] = 0,
                        l[v + 3] = 1,
                        a[m + 0] = a[m + 3] = f.x,
                        a[m + 1] = a[m + 4] = f.y,
                        a[m + 2] = a[m + 5] = f.z,
                        s[m + 0] = s[m + 3] = p.x,
                        s[m + 1] = s[m + 4] = p.y,
                        s[m + 2] = s[m + 5] = p.z
                    }
                    if (r) {
                        var g = new Float32Array(o);
                        u.addAttribute("relThickness", new e.BufferAttribute(g,1));
                        for (var h = 0; n >= h; h++) {
                            var d = h / n
                              , m = 2 * h;
                            g[m] = g[m + 1] = r(d)
                        }
                    }
                    for (var h = 0; n > h; h++) {
                        var m = 6 * h
                          , v = 2 * h;
                        c[m + 0] = v + 0,
                        c[m + 1] = v + 1,
                        c[m + 2] = v + 2,
                        c[m + 3] = v + 3,
                        c[m + 4] = v + 2,
                        c[m + 5] = v + 1
                    }
                    return u
                }
                ,
                t.make2DCircleMesh = function(n, i, r, o) {
                    return void 0 === n && (n = 1),
                    void 0 === i && (i = 32),
                    new e.Mesh(t.makeCircleGeometry(n, i),t.makeThinline2DMaterial(r, o))
                }
                ,
                t.makeThinline2DAdditiveMaterial = function(i, r) {
                    if (void 0 !== r && t.convertedMaterials[r.uuid])
                        return t.convertedMaterials[r.uuid];
                    i = i || {};
                    var o = new e.ShaderMaterial({
                        uniforms: {
                            color: {
                                type: "c",
                                value: i.color ? new e.Color(i.color) : new e.Color(1,1,1)
                            },
                            intensity: {
                                type: "f",
                                value: i.intensity || 1
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(window.innerWidth,window.innerHeight)
                            }
                        },
                        vertexShader: n(33),
                        fragmentShader: n(34)
                    });
                    return o.transparent = !0,
                    o.blending = e.AdditiveBlending,
                    o.depthTest = !1,
                    o.depthWrite = !1,
                    null != r && (o.name = r.name,
                    t.convertedMaterials[r.uuid] = o),
                    o
                }
                ,
                t.makeThinline2DMaterial = function(n, i) {
                    var r = t.makeThinline2DAdditiveMaterial(n, i);
                    return r.blending = e.CustomBlending,
                    r.blendEquation = e.AddEquation,
                    r.blendSrc = e.SrcAlphaFactor,
                    r.blendDst = e.OneMinusSrcAlphaFactor,
                    r
                }
                ,
                t.makeThinline2DBeginEndMaterial = function(t) {
                    t = t || {};
                    var i = new e.ShaderMaterial({
                        uniforms: {
                            color: {
                                type: "c",
                                value: t.color ? new e.Color(t.color) : new e.Color(1,1,1)
                            },
                            intensity: {
                                type: "f",
                                value: t.intensity || 1
                            },
                            length: {
                                type: "f",
                                value: t.intensity || 1
                            },
                            begin: {
                                type: "f",
                                value: t.intensity || 0
                            },
                            end: {
                                type: "f",
                                value: t.intensity || 0
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(window.innerWidth,window.innerHeight)
                            }
                        },
                        vertexShader: n(35),
                        fragmentShader: n(36)
                    });
                    return i.transparent = !0,
                    i.depthTest = !1,
                    i.depthWrite = !1,
                    i.blending = e.CustomBlending,
                    i.blendEquation = e.AddEquation,
                    i.blendSrc = e.SrcAlphaFactor,
                    i.blendDst = e.OneMinusSrcAlphaFactor,
                    i
                }
                ,
                t.makeRouteMaterial = function(t, i, r) {
                    var o = new e.ShaderMaterial({
                        uniforms: {
                            time: {
                                type: "f",
                                value: 0
                            },
                            devicePixelRatio: {
                                type: "f",
                                value: i
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(window.innerWidth,window.innerHeight)
                            },
                            intensity: {
                                type: "f",
                                value: 1
                            },
                            length: {
                                type: "f",
                                value: 1
                            },
                            twoways: {
                                type: "f",
                                value: t ? -1 : 1
                            },
                            color: {
                                type: "c",
                                value: new e.Color(r.color || "rgb(80,20,0)")
                            },
                            colorBorder: {
                                type: "c",
                                value: new e.Color(r.colorBorder || "rgb(100,40,0)")
                            },
                            width: {
                                type: "f",
                                value: r.width
                            },
                            size: {
                                type: "f",
                                value: r.size
                            },
                            density: {
                                type: "f",
                                value: r.density
                            },
                            speed: {
                                type: "f",
                                value: r.speed
                            },
                            side: {
                                type: "f",
                                value: r.side
                            },
                            center: {
                                type: "f",
                                value: r.center
                            },
                            presence: {
                                type: "f",
                                value: 1
                            },
                            highlight: {
                                type: "f",
                                value: 0
                            },
                            highlightFactor: {
                                type: "f",
                                value: .5
                            },
                            depthFactor: {
                                type: "f",
                                value: .1
                            },
                            pitchEffect: {
                                type: "f",
                                value: r.pitchEffect
                            },
                            pitchIntensity: {
                                type: "f",
                                value: r.pitchIntensity
                            }
                        },
                        attributes: {
                            relThickness: {
                                type: "f",
                                value: []
                            }
                        },
                        vertexShader: n(37),
                        fragmentShader: n(38)
                    });
                    return o.transparent = !0,
                    o.blending = e.AdditiveBlending,
                    o.depthTest = !1,
                    o.depthWrite = !1,
                    o
                }
                ,
                t.makeVertexColoredThinline2DMaterial = function(i, r) {
                    if (void 0 !== r && t.convertedMaterials[r.uuid])
                        return t.convertedMaterials[r.uuid];
                    i = i || {};
                    var o = new e.ShaderMaterial({
                        uniforms: {
                            intensity: {
                                type: "f",
                                value: i.intensity || 1
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(window.innerWidth,window.innerHeight)
                            }
                        },
                        vertexShader: n(39),
                        fragmentShader: n(40)
                    });
                    return o.transparent = !0,
                    o.blending = e.CustomBlending,
                    o.blendEquation = e.AddEquation,
                    o.blendSrc = e.SrcAlphaFactor,
                    o.blendDst = e.OneMinusSrcAlphaFactor,
                    o.depthTest = !0,
                    o.depthWrite = !1,
                    null != r && (o.name = r.name,
                    t.convertedMaterials[r.uuid] = o),
                    o
                }
                ,
                t.makeBasicVertexColoredMaterial = function(i) {
                    if (void 0 !== i && t.convertedMaterials[i.uuid])
                        return t.convertedMaterials[i.uuid];
                    var r = new e.ShaderMaterial({
                        vertexShader: n(41),
                        fragmentShader: n(42)
                    });
                    return r.transparent = !0,
                    r.blending = e.AdditiveBlending,
                    r.depthTest = !1,
                    r.depthWrite = !1,
                    null != i && (r.name = i.name,
                    t.convertedMaterials[i.uuid] = r),
                    r
                }
                ,
                t.makeLineMesh = function(n, i, r) {
                    return new e.Mesh(t.makeLineGeometry(n),t.makeThinline3DMaterial(i, r))
                }
                ,
                t.convertContourMeshIntoLineMesh = function(n) {
                    if (n instanceof e.Mesh) {
                        if (n.geometry instanceof e.Geometry) {
                            for (var i = n.geometry, r = i.faces, o = i.vertices, a = o.length, s = [], l = 0; l < r.length; l++) {
                                var c = r[l];
                                s.push(c.a),
                                s.push(c.b),
                                s.push(c.c)
                            }
                            for (var u = {}, h = [], d = [], f = 0; f < s.length; f += 3)
                                for (var p = f; f + 3 > p; p++) {
                                    var m = s[p]
                                      , v = s[f + (p + 1) % 3]
                                      , g = s[f + (p + 2) % 3]
                                      , y = o[m]
                                      , b = o[v]
                                      , x = o[g]
                                      , w = y.distanceToSquared(b);
                                    if (w > y.distanceToSquared(x) || w > b.distanceToSquared(x)) {
                                        var _ = m + a * v
                                          , S = v + a * m;
                                        if (void 0 !== u[S]) {
                                            var M = u[S]
                                              , C = M - M % 3
                                              , T = s[C + (M + 2) % 3]
                                              , E = o[T];
                                            y.distanceToSquared(x) < b.distanceToSquared(x) ? (h.push((new e.Vector3).addVectors(y, x).multiplyScalar(.5)),
                                            h.push((new e.Vector3).addVectors(b, E).multiplyScalar(.5))) : (h.push((new e.Vector3).addVectors(y, E).multiplyScalar(.5)),
                                            h.push((new e.Vector3).addVectors(b, x).multiplyScalar(.5)))
                                        } else
                                            u[_] = p
                                    }
                                }
                            var k = n.material.color.clone()
                              , A = Math.max(k.r, k.g, k.b);
                            return A > 0 && k.multiplyScalar(1 / A),
                            t.makeLineMesh(h, t.materialParams[n.material.name] || {
                                color: k.getHex(),
                                intensity: A
                            }, n.material)
                        }
                        if (n.geometry instanceof e.BufferGeometry) {
                            var i = n.geometry;
                            if (i.getAttribute("index")) {
                                for (var P = i.getAttribute("position").array, a = P.length / 3, s = i.getAttribute("index").array, L = i.getAttribute("uv").array, u = {}, h = [], d = [], y = new e.Vector3, b = new e.Vector3, x = new e.Vector3, E = new e.Vector3, f = 0; f < s.length; f += 3)
                                    for (var p = f; f + 3 > p; p++) {
                                        var m = s[p]
                                          , v = s[f + (p + 1) % 3]
                                          , g = s[f + (p + 2) % 3]
                                          , O = 3 * m
                                          , R = 3 * v
                                          , F = 3 * g;
                                        y.set(P[O], P[O + 1], P[O + 2]),
                                        b.set(P[R], P[R + 1], P[R + 2]),
                                        x.set(P[F], P[F + 1], P[F + 2]);
                                        var B = L[2 * m]
                                          , D = L[2 * v]
                                          , w = y.distanceToSquared(b);
                                        if (w > y.distanceToSquared(x) || w > b.distanceToSquared(x)) {
                                            var _ = m + a * v
                                              , S = v + a * m;
                                            if (void 0 !== u[S]) {
                                                var M = u[S]
                                                  , C = M - M % 3
                                                  , T = s[C + (M + 2) % 3]
                                                  , I = 3 * T;
                                                E.set(P[I], P[I + 1], P[I + 2]),
                                                d.push(B),
                                                d.push(D),
                                                y.distanceToSquared(x) < b.distanceToSquared(x) ? (h.push((new e.Vector3).addVectors(y, x).multiplyScalar(.5)),
                                                h.push((new e.Vector3).addVectors(b, E).multiplyScalar(.5))) : (h.push((new e.Vector3).addVectors(y, E).multiplyScalar(.5)),
                                                h.push((new e.Vector3).addVectors(b, x).multiplyScalar(.5)))
                                            } else
                                                u[_] = p
                                        }
                                    }
                                var k = n.material.color.clone()
                                  , A = Math.max(k.r, k.g, k.b);
                                return A > 0 && k.multiplyScalar(1 / A),
                                new e.Mesh(t.makeLineGeometry(h, d),t.makeThinline3DMaterial(t.materialParams[n.material.name] || {
                                    color: k.getHex(),
                                    intensity: A
                                }, n.material))
                            }
                            return console.log("BufferGeometry without index, do nothing!!!"),
                            n
                        }
                        throw new Error("Expecting a THREE.Geometry")
                    }
                    throw new Error("Expecting a THREE.Mesh")
                }
                ,
                t.convertMeshesWithThinlineMaterial = function(n) {
                    var i = [];
                    n.traverse(function(t) {
                        t instanceof e.Mesh && t.material && t.material.name && 0 === t.material.name.indexOf("Thinline") && i.push(t)
                    });
                    for (var r = 0; r < i.length; r++) {
                        var o = i[r]
                          , a = t.convertContourMeshIntoLineMesh(o);
                        o.parent.add(a),
                        o.parent.remove(o)
                    }
                }
                ,
                t.replaceMaterial = function(t, n, i) {
                    t.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material && t.material.name && t.material.name === n) {
                            var r = t;
                            r.material = i
                        }
                    })
                }
                ,
                t.getMaterial = function(t, n) {
                    var i = null;
                    return t.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material && t.material.name && t.material.name === n) {
                            var r = t;
                            i = r.material
                        }
                    }),
                    i
                }
                ,
                t.getMaterialStartingWith = function(t, n) {
                    var i = {};
                    return t.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material && t.material.name && 0 === t.material.name.indexOf(n)) {
                            var r = t;
                            i[r.material.name] = r.material
                        }
                    }),
                    i
                }
                ,
                t.convertIncludedAdditiveMaterial = function(n) {
                    n.traverse(function(n) {
                        if (n instanceof e.Mesh && n.material && n.material.name && 0 === n.material.name.indexOf("Additive"))
                            if (n.geometry instanceof e.Geometry && n.geometry.faces[0].vertexColors.length) {
                                n.material = t.makeBasicVertexColoredMaterial(n.material);
                                var i = new e.BufferGeometry
                                  , r = n.geometry;
                                i.fromGeometry(r);
                                for (var o = new Float32Array(9 * r.faces.length), a = 0; a < r.faces.length; a++) {
                                    var s = 9 * a
                                      , l = r.faces[a];
                                    o[s] = l.vertexColors[0].r,
                                    o[s + 1] = l.vertexColors[0].g,
                                    o[s + 2] = l.vertexColors[0].b,
                                    o[s + 3] = l.vertexColors[1].r,
                                    o[s + 4] = l.vertexColors[1].g,
                                    o[s + 5] = l.vertexColors[1].b,
                                    o[s + 6] = l.vertexColors[2].r,
                                    o[s + 7] = l.vertexColors[2].g,
                                    o[s + 8] = l.vertexColors[2].b
                                }
                                i.addAttribute("color", new e.BufferAttribute(o,3)),
                                n.geometry = i
                            } else if (n.geometry instanceof e.BufferGeometry && n.geometry.getAttribute("color")) {
                                var i = n.geometry;
                                n.material = t.makeBasicVertexColoredMaterial(n.material)
                            } else {
                                var c = n.material;
                                c.transparent = !0,
                                c.blending = e.AdditiveBlending,
                                c.depthTest = !1,
                                c.depthWrite = !1
                            }
                    })
                }
                ,
                t.collapseMaterialsPerName = function(t) {
                    var n = {};
                    t.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material && t.material.name) {
                            var i = t.material;
                            n[i.name] ? t.material = n[i.name] : n[i.name] = i
                        }
                    })
                }
                ,
                t.updateMaterialsResolution = function(t, n, i) {
                    t.traverse(function(t) {
                        t instanceof e.Mesh && t.material && t.material.uniforms && void 0 !== t.material.uniforms.resolution && t.material.uniforms.resolution.value instanceof e.Vector2 && t.material.uniforms.resolution.value.set(n, i)
                    })
                }
                ,
                t.appendGUI = function(t, n) {
                    var i = function() {
                        return n ? n.name ? n.name : n.children && n.children[0] ? n.children[0].name : null : null
                    }
                      , r = t.addFolder(i() || "Object")
                      , o = {};
                    r.add(n, "visible"),
                    n.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material) {
                            if (t.material.uniforms && !o[t.material.uuid]) {
                                var n = t.material
                                  , i = n.uniforms
                                  , a = r.addFolder(n.name)
                                  , s = {};
                                o[n.uuid] = !0,
                                i.color && (s.color = i.color.value.getStyle(),
                                a.addColor(s, "color").onChange(function(e) {
                                    i.color.value.setStyle(e)
                                })),
                                i.intensity && (s.intensity = i.intensity.value,
                                a.add(s, "intensity", 0, 1).onChange(function(e) {
                                    i.intensity.value = e
                                })),
                                i.fadeBack && (s.fadeBack = i.fadeBack.value,
                                a.add(s, "fadeBack", 0, 1).onChange(function(e) {
                                    i.fadeBack.value = e
                                })),
                                i.radiusAndInvRadius && (s.radius = i.radiusAndInvRadius.value.x,
                                a.add(s, "radius").min(1e-4).onChange(function(e) {
                                    i.radiusAndInvRadius.value.x = e,
                                    i.radiusAndInvRadius.value.y = 1 / e
                                })),
                                i.depth && (s.depthMin = i.depth.value.x,
                                s.depthMax = i.depth.value.y,
                                a.add(s, "depthMin").onChange(function(e) {
                                    i.depth.value.x = e
                                }),
                                a.add(s, "depthMax").onChange(function(e) {
                                    i.depth.value.y = e
                                })),
                                i.fade && (s.fadeMin = i.fade.value.x,
                                s.fadeMax = i.fade.value.y,
                                a.add(s, "fadeMin", 0, 1).onChange(function(e) {
                                    i.fade.value.x = e
                                }),
                                a.add(s, "fadeMax", 0, 1).onChange(function(e) {
                                    i.fade.value.y = e
                                }))
                            }
                            if (t.material.name && 0 === t.material.name.indexOf("Additive") && !o[t.material.uuid]) {
                                var n = t.material
                                  , a = r.addFolder(n.name)
                                  , s = {};
                                o[n.uuid] = !0,
                                s.color = n.color.getStyle(),
                                a.addColor(s, "color").onChange(function(e) {
                                    n.color.setStyle(e)
                                })
                            }
                        }
                    })
                }
                ,
                t.version = 1,
                t.convertedMaterials = {},
                t.materialParams = {
                    ThinlineGrid: {
                        color: "#96a5ff",
                        intensity: .36,
                        fadeBack: 1,
                        depthMax: 10,
                        fadeMax: .2
                    }
                },
                t.makeThinline3DMaterial = function(i, r) {
                    if (void 0 !== r && t.convertedMaterials[r.uuid])
                        return t.convertedMaterials[r.uuid];
                    i = i || {};
                    var o = new e.ShaderMaterial({
                        uniforms: {
                            color: {
                                type: "c",
                                value: i.color ? new e.Color(i.color) : new e.Color(1,1,1)
                            },
                            intensity: {
                                type: "f",
                                value: i.intensity || 1
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(window.innerWidth,window.innerHeight)
                            },
                            fadeBack: {
                                type: "f",
                                value: i.fadeBack || 0
                            },
                            radiusAndInvRadius: {
                                type: "v2",
                                value: i.radiusAndInvRadius || new e.Vector2(1,1)
                            },
                            fade: {
                                type: "v2",
                                value: new e.Vector2(i.fadeMin || 1,i.fadeMax || 1)
                            },
                            depth: {
                                type: "v2",
                                value: new e.Vector2(i.depthMin || 0,i.depthMax || 1)
                            }
                        },
                        vertexShader: n(43),
                        fragmentShader: n(44)
                    });
                    return o.transparent = !0,
                    o.blending = e.CustomBlending,
                    o.blendEquation = e.AddEquation,
                    o.blendSrc = e.SrcAlphaFactor,
                    o.blendDst = e.OneMinusSrcAlphaFactor,
                    o.depthTest = !1,
                    o.depthWrite = !1,
                    null != r && (o.name = r.name,
                    t.convertedMaterials[r.uuid] = o),
                    o
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = i
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        e.exports = "uniform vec2 resolution;\nvarying vec3 texcoord;\nvoid main() {\n	float d = 6.0 * (uv.y - 0.5);\n	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n	vec4 wposN = modelViewMatrix * vec4( position + normal, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	vec4 vpn = projectionMatrix * wposN;\n	float nx = vpn.x*vp.w - vpn.w*vp.x;\n	float ny = vpn.y*vp.w - vpn.w*vp.y;\n	vec3 t = normalize(vec3(nx, ny, 0));\n	gl_Position = vp + vec4(d*vp.w*vec2(t.y/resolution.x, -t.x/resolution.y), 0, 0);\n	texcoord = vec3(uv.x*vp.w, uv.y*vp.w, vp.w);\n}"
    }
    , function(e, t) {
        e.exports = "uniform vec3 color;\nuniform float intensity;\nvarying vec3 texcoord;\nvoid main() {\n	float n = 2.0*(0.5 - abs(texcoord.y/texcoord.z-0.5));\n	gl_FragColor = vec4(color.rgb, n * intensity);\n}"
    }
    , 33, function(e, t) {
        e.exports = "uniform vec3 color;\nuniform float intensity;\nuniform float length;\nuniform float begin;\nuniform float end;\n\nvarying vec3 texcoord;\n\nvoid main() {\n	float n = 2.0*(0.5 - abs(texcoord.y/texcoord.z-0.5));\n	\n	float l = (texcoord.x/texcoord.z)*length;\n	\n	if (l < begin || l > length - end) {\n		gl_FragColor = vec4(0.0,0.0,0.0,0.0);\n	} else {\n		gl_FragColor = vec4(color.rgb, n * intensity);\n	}\n}"
    }
    , function(e, t) {
        e.exports = "uniform float width;\nuniform float devicePixelRatio;\nattribute float relThickness;\nuniform vec2 resolution;\nuniform float presence;\nuniform float highlight;\nuniform float length;\nvarying vec3 texcoord;\nvarying float vZ;\nvarying float vcZ;\nvarying float pitchFactor;\n\nvoid main() {\n	float thickness = devicePixelRatio * width * 50.0;\n	float d = 2.0 * thickness * (uv.y - 0.5);\n//	float d = 2.0 * uv.x * (uv.y - 0.5);\n//	float d = 6.0 * (uv.y - 0.5);\n	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n	vZ = -wpos.z;\n	vcZ = -(viewMatrix * vec4(0.,0.,0.,1.)).z;\n	pitchFactor = 1.0 - abs((viewMatrix * vec4(0.,1.,0.,0.)).y);\n	vec4 wposN = modelViewMatrix * vec4( position + normal, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	vec4 vpn = projectionMatrix * wposN;\n	float nx = vpn.x*vp.w - vpn.w*vp.x;\n	float ny = vpn.y*vp.w - vpn.w*vp.y;\n	vec3 t = normalize(vec3(nx, ny, 0));\n	gl_Position = vp + vec4(d*vp.w*vec2(t.y/resolution.x, -t.x/resolution.y), 0, 0);\n	texcoord = vec3(uv.x, uv.y, relThickness);\n}\n"
    }
    , function(e, t) {
        e.exports = "uniform float time;\nuniform sampler2D map;\nuniform float intensity;\nvarying float vZ; \nvarying float vcZ;\nvarying float pitchFactor;\nvarying vec3 texcoord;\nuniform float length;\nuniform float twoways;\nuniform vec3 color;\nuniform vec3 colorBorder;\nuniform float width;\nuniform float size;\nuniform float density;\nuniform float speed;\nuniform float side;\nuniform float center;\nuniform float pitchEffect;\nuniform float pitchIntensity;\nuniform float presence;\nuniform float highlight;\nuniform float highlightFactor;\nuniform float depthFactor;\n\n				\nfloat rand(vec2 co){\n	\n	return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat noisemap(vec2 uv, float sizeFactor, float densityFactor, float speedFactor) {\n	vec2 vf = vec2(uv.x + time * speedFactor * speed * (uv.y < 0.5 ? twoways : 1.0), uv.y)*(sizeFactor * 2. * size);	\n	vec2 v = vec2(floor(vf.x), floor(vf.y));\n	vec2 f = vf-v;	\n	float r = 2.0*distance(f, vec2(0.5, 0.5));\n	float d = 1.0 - min(r, 1.0);\n	float p = rand(v);\n	p = p < densityFactor * 3. * density ? d*(1.0 - 2.0 * abs(uv.y - 0.5)) : 0.0;\n	return p;\n}\n\nvoid main() {\n\n	float v = (texcoord.y-0.5)/texcoord.z+0.5;\n	if(presence>1.) {\n		float k = max(0., texcoord.x - (presence-1.))/(2.0-presence);\n		v = (texcoord.y-0.5)/(k*texcoord.z)+0.5;\n	}\n	vec2 uv = vec2((texcoord.x-0.5)*length/30.0, v);\n	float c = 1.0 - 2.0 * abs(uv.y - 0.5);\n	vec3 tc = colorBorder;\n	vec3 tcr = color;\n	vec4 col = (uv.y >= 0.0 && uv.y <= 1.0)? \n		c*vec4(tcr-vec3(0.,0.05,0.),  1.) * noisemap(uv, 6.0, 0.3, 2.0) +\n		c*vec4(tcr,  1.) * noisemap(uv, 10.0, 0.3, 3.0) +\n		c*vec4(tcr+vec3(0.,0.05,0.),  1.) * noisemap(uv, 16.0, 0.3, 4.0) +\n		vec4(c*c*tc*2.,1.0) +\n		center*vec4(c > 0.8 ? tcr*3.*(c-0.8) : vec3(0.), 1.0) +\n		side*vec4(c < 0.2 ? tc *1. * (1.-10.*abs(c-0.1)) : vec3(0.), 1.0) \n		: vec4(0,0,0,0);\n	//float fade = mix(1.0, pitchFactor*pitchFactor+0.05, clamp(vZ/(2.0+ (vcZ > 0.? vcZ : 0.)), 0., 1.));\n	float fade = mix(1.0, 0.1, clamp(vZ*(1.+5.*depthFactor)/0.75, 0., 1.));\n	fade = mix(fade, mix(fade, pitchIntensity*2.0, pitchFactor), pitchEffect);\n	fade = mix(fade,1.,highlight);\n	gl_FragColor = (1. + 4.* highlightFactor *highlight) * vec4(col.rgb*intensity*fade, col.a*intensity) * \n		(presence <= 1. ? (texcoord.x < presence  ? 1. : 0.) : (texcoord.x > (presence-1.) ? 1. : 0.));\n}\n"
    }
    , function(e, t) {
        e.exports = "attribute vec3 color;\nuniform vec2 resolution;\nvarying vec3 texcoord;\nvarying vec3 vColor;\nvoid main() {\n	float d = 6.0 * (uv.y - 0.5);\n	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n	vec4 wposN = modelViewMatrix * vec4( position + normal, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	vec4 vpn = projectionMatrix * wposN;\n	float nx = vpn.x*vp.w - vpn.w*vp.x;\n	float ny = vpn.y*vp.w - vpn.w*vp.y;\n	vec3 t = normalize(vec3(nx, ny, 0));\n	gl_Position = vp + vec4(d*vp.w*vec2(t.y/resolution.x, -t.x/resolution.y), 0, 0);\n	texcoord = vec3(uv.x*vp.w, uv.y*vp.w, vp.w);\n	vColor = color;\n}"
    }
    , function(e, t) {
        e.exports = "varying vec3 vColor;\nuniform float intensity;\nvarying vec3 texcoord;\nvoid main() {\n	float n = 3.0*(0.5 - abs(texcoord.y/texcoord.z-0.5));\n	gl_FragColor = vec4(vColor.rgb, n * intensity);\n}"
    }
    , function(e, t) {
        e.exports = "attribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	gl_Position = vp;\n	vColor = color;\n}"
    }
    , function(e, t) {
        e.exports = "varying vec3 vColor;\nuniform float intensity;\nvoid main() {\n	gl_FragColor = vec4(vColor.rgb, 1);\n}"
    }
    , function(e, t) {
        e.exports = "uniform vec2 resolution;\nuniform vec3 color;\nuniform float intensity;\n//\nuniform vec2 radiusAndInvRadius;\nuniform float fadeBack;\n//\n////varying vec2 texcoord;\nvarying vec3 texcoord;\nvarying vec4 vcolor;\nvarying vec4 wpos;\nvoid main() {\n	float d = 6.0 * (uv.y - 0.5);\n	wpos = modelViewMatrix * vec4( position, 1.0 );\n	vec4 wposN = modelViewMatrix * vec4( position + normal, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	vec4 vpn = projectionMatrix * wposN;\n	float nx = vpn.x*vp.w - vpn.w*vp.x;\n	float ny = vpn.y*vp.w - vpn.w*vp.y;\n	vec3 t = normalize(vec3(nx, ny, 0));\n	gl_Position = vp + vec4(d*vp.w*vec2(t.y/resolution.x, -t.x/resolution.y), 0, 0);\n//+ 	//texcoord = uv;\n	texcoord = vec3(uv.x*vp.w, uv.y*vp.w, vp.w);\n\n//	vec4 o = modelViewMatrix * vec4(0.0,0.0,0.0,1.0);\n	vec3 o = modelViewMatrix[3].xyz;\n\n	vec3 lo = vec3(dot(o, modelViewMatrix[0].xyz), dot(o, modelViewMatrix[1].xyz), dot(o, modelViewMatrix[2].xyz));\n	float z = -dot(lo, position)/length(lo);\n\n	float alpha;\n\n	if (z < -radiusAndInvRadius.x) {\n		alpha = fadeBack;\n	} else if (z < radiusAndInvRadius.x) {\n		alpha = fadeBack + (1.0 - fadeBack) * (radiusAndInvRadius.x + z) * 0.5 * radiusAndInvRadius.y;\n	} else {\n		alpha = 1.0;\n	}\n			\n	vcolor = vec4(color,alpha*intensity);\n\n//	vcolor = color;\n\n}\n"
    }
    , function(e, t) {
        e.exports = "//varying vec2 texcoord;\nvarying vec4 vcolor;\nvarying vec3 texcoord;\nvarying vec4 wpos;\nuniform vec2 fade;\nuniform vec2 depth;\nfloat lerp(float a, float b, float t) { return (1.0-t)*a + t*b; }\nfloat clamp01(float a) { return a < 0.0? 0.0 : a < 1.0? a : 1.0; }\nvoid main() {\n	float n = 2.0*(0.5 - abs(texcoord.y/texcoord.z-0.5));\n//	float d = clamp01(depth.y/abs(wpos.z));\n//	gl_FragColor = vec4(vcolor.rgb, 2.0 * n * d * vcolor.a);\n	float d = lerp(fade.x, fade.y, clamp01((abs(wpos.z)-depth.x)/(depth.y-depth.x)));\n	gl_FragColor = vec4(vcolor.rgb, 2.0 * n * d * d * vcolor.a);\n}"
    }
    , function(e, t) {
        var n = function() {
            function e() {}
            return e.foreach = function(e, t) {
                if (e instanceof Array)
                    for (var n = 0, i = e.length; i > n; n++)
                        t(e[n]);
                else
                    for (var r in e)
                        t(e[r])
            }
            ,
            e.strStartsWith = function(e, t) {
                return 0 === e.indexOf(t)
            }
            ,
            e.strEndsWith = function(e, t) {
                var n = e.length
                  , i = t.length;
                return n >= i ? e.substring(n - i, n) === t : !1
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t) {
        function n(e) {
            return void 0 === e ? void 0 : null === e ? null : Number(e)
        }
        function i(e) {
            return void 0 === e ? 0 : null === e ? 0 : Number(e)
        }
        function r(e) {
            return e && "0" !== e
        }
        function o(e) {
            return e ? {
                raw: e,
                id: n(e.id),
                name: e.name,
                type: T[e.type]
            } : null
        }
        function a(e) {
            return {
                raw: e,
                id: n(e.id),
                status: M[e.status],
                time_modified: e.time_modified,
                type: C[e.type],
                name: e.name,
                code: e.code,
                position_x: n(e.position_x),
                position_y: n(e.position_y),
                position_z: n(e.position_z),
                affiliation: e.affiliation,
                aggregated_age: n(e.aggregated_age),
                aggregated_size: n(e.aggregated_size),
                aggregated_population: i(e.aggregated_population),
                aggregated_economy: i(e.aggregated_economy),
                aggregated_danger: i(e.aggregated_danger)
            }
        }
        function s(e) {
            var t = a(e);
            return t.shader_data = e.shader_data,
            t.habitable_zone_inner = n(e.habitable_zone_inner),
            t.habitable_zone_outer = n(e.habitable_zone_outer),
            t.frost_line = n(e.frost_line),
            t.description = e.description,
            t.celestial_objects = e.celestial_objects.map(l),
            t
        }
        function l(e) {
            var t = {
                raw: e,
                id: n(e.id),
                parent_id: n(e.parent_id),
                time_modified: e.time_modified,
                type: T[e.type],
                designation: e.designation,
                name: e.name,
                code: e.code,
                appearance: E[e.appearance],
                age: n(e.age),
                distance: n(e.distance),
                latitude: n(e.latitude),
                longitude: n(e.longitude),
                description: e.description,
                sensor_danger: i(e.sensor_danger),
                sensor_economy: i(e.sensor_economy),
                sensor_population: i(e.sensor_population),
                habitable: r(e.habitable),
                shader_data: e.shader_data,
                size: n(e.size),
                star_classification: e.star_classification,
                subtype_id: n(e.subtype_id),
                subtype: o(e.subtype),
                affiliation: e.affiliation,
                population: e.population,
                children: e.children ? e.children.map(l) : [],
                show_orbitlines: r(e.show_orbitlines),
                show_label: r(e.show_label)
            };
            return e.axial_tilt && (t.axial_tilt = n(e.axial_tilt)),
            e.orbit_period && (t.orbit_period = n(e.orbit_period)),
            e.star_system_id && (t.star_system_id = n(e.star_system_id)),
            e.model && (t.model = e.model),
            e.texture && (t.texture = e.texture),
            e.thumbnail && (t.thumbnail = e.thumbnail),
            t
        }
        function c(e) {
            var t = {
                raw: e,
                id: n(e.id),
                name: e.name,
                size: k[e.size],
                direction: A[e.direction],
                entry_id: n(e.entry_id),
                entry: e.entry ? l(e.entry) : null,
                exit_id: n(e.entry_id),
                exit: e.exit ? l(e.exit) : null
            };
            return t.entry && void 0 === t.entry.type && (t.entry.type = T.JUMPPOINT),
            t.exit && void 0 === t.exit.type && (t.exit.type = T.JUMPPOINT),
            t
        }
        function u(e) {
            return e.entry
        }
        function h(e) {
            return e.exit
        }
        function d(e) {
            return {
                leastjumps: e.leastjumps ? f(e.leastjumps) : null,
                shortest: e.shortest ? f(e.shortest) : null
            }
        }
        function f(e) {
            return {
                raw: e,
                name: e.name,
                label: e.label,
                first_jump: e.first_jump,
                flight_distance: e.flight_distance,
                jumps: e.jumps,
                segments: e.segments.map(p)
            }
        }
        function p(e) {
            return {
                raw: e,
                id: n(e.id),
                name: e.name,
                system_id: n(e.system_id),
                object_id: n(e.object_id),
                system_code: e.system_code,
                object_code: e.object_code,
                segment_type: P[e.segment_type],
                segment_distance: e.segment_distance,
                is_departure: !!e.is_departure,
                is_destination: !!e.is_destination
            }
        }
        function m(e) {
            return {
                config: e.data.config,
                systems: e.data.systems.resultset.map(a),
                tunnels: e.data.tunnels.resultset.map(c),
                species: e.data.species.resultset,
                affiliations: e.data.affiliations.resultset
            }
        }
        function v(e) {
            return e.data
        }
        function g(e) {
            return e.data.resultset.map(a)
        }
        function y(e) {
            return s(e.data.resultset[0])
        }
        function b(e) {
            return l(e.data.resultset[0])
        }
        function x(e) {
            return e.data.resultset.map(c)
        }
        function w(e) {
            return e.data.resultset
        }
        function _(e) {
            return e.data.resultset
        }
        function S(e) {
            return d(e.data)
        }
        t.toSubTypeAPI = o,
        function(e) {
            e[e.D = 0] = "D",
            e[e.R = 1] = "R",
            e[e.U = 2] = "U",
            e[e.N = 3] = "N",
            e[e.S = 4] = "S",
            e[e.P = 5] = "P"
        }(t.StatusCodeEnum || (t.StatusCodeEnum = {}));
        var M = t.StatusCodeEnum;
        !function(e) {
            e[e.draft = 0] = "draft",
            e[e.review = 1] = "review",
            e[e.undiscovered = 2] = "undiscovered",
            e[e.nodata = 3] = "nodata",
            e[e.stub = 4] = "stub",
            e[e.published = 5] = "published"
        }(t.StatusLabelEnum || (t.StatusLabelEnum = {}));
        t.StatusLabelEnum;
        !function(e) {
            e[e.SINGLE_STAR = 0] = "SINGLE_STAR",
            e[e.BINARY = 1] = "BINARY"
        }(t.StarSystemTypeEnum || (t.StarSystemTypeEnum = {}));
        var C = t.StarSystemTypeEnum;
        t.toSystemDetailAPI = s,
        function(e) {
            e[e.STAR = 0] = "STAR",
            e[e.PLANET = 1] = "PLANET",
            e[e.SATELLITE = 2] = "SATELLITE",
            e[e.ASTEROID_BELT = 3] = "ASTEROID_BELT",
            e[e.ASTEROID_FIELD = 4] = "ASTEROID_FIELD",
            e[e.ANOMALY = 5] = "ANOMALY",
            e[e.MANMADE = 6] = "MANMADE",
            e[e.JUMPPOINT = 7] = "JUMPPOINT",
            e[e.LZ = 8] = "LZ",
            e[e.BLACKHOLE = 9] = "BLACKHOLE",
            e[e.POI = 10] = "POI"
        }(t.CelestialBodyType || (t.CelestialBodyType = {}));
        var T = t.CelestialBodyType;
        !function(e) {
            e[e.DEFAULT = 0] = "DEFAULT",
            e[e.PLANET_BLUE = 1] = "PLANET_BLUE",
            e[e.PLANET_GREEN = 2] = "PLANET_GREEN",
            e[e.PLANET_BROWN = 3] = "PLANET_BROWN",
            e[e.PLANET_GAS = 4] = "PLANET_GAS",
            e[e.CUSTOM = 5] = "CUSTOM"
        }(t.CelestialBodyAppearance || (t.CelestialBodyAppearance = {}));
        var E = t.CelestialBodyAppearance;
        t.toCelestialBodyAPI = l,
        function(e) {
            e[e.S = 0] = "S",
            e[e.M = 1] = "M",
            e[e.L = 2] = "L"
        }(t.TunnelSizeCodeEnum || (t.TunnelSizeCodeEnum = {}));
        var k = t.TunnelSizeCodeEnum;
        !function(e) {
            e[e.small = 0] = "small",
            e[e.medium = 1] = "medium",
            e[e.large = 2] = "large"
        }(t.TunnelSizeLabelEnum || (t.TunnelSizeLabelEnum = {}));
        t.TunnelSizeLabelEnum;
        !function(e) {
            e[e.B = 0] = "B",
            e[e.U = 1] = "U"
        }(t.TunnelDirectionCodeEnum || (t.TunnelDirectionCodeEnum = {}));
        var A = t.TunnelDirectionCodeEnum;
        !function(e) {
            e[e.bidirectional = 0] = "bidirectional",
            e[e.unidirectional = 1] = "unidirectional"
        }(t.TunnelDirectionLabelEnum || (t.TunnelDirectionLabelEnum = {}));
        t.TunnelDirectionLabelEnum;
        t.toTunnelAPI = c,
        t.getTunnelEntry = u,
        t.getTunnelExit = h,
        function(e) {
            e[e.S = 0] = "S",
            e[e.M = 1] = "M",
            e[e.L = 2] = "L"
        }(t.ShipSizeCode || (t.ShipSizeCode = {}));
        t.ShipSizeCode;
        t.toRoutesAPI = d,
        function(e) {
            e[e.F = 0] = "F",
            e[e.J = 1] = "J"
        }(t.RouteSegmentCodeEnum || (t.RouteSegmentCodeEnum = {}));
        var P = t.RouteSegmentCodeEnum;
        !function(e) {
            e[e.flight = 0] = "flight",
            e[e.jump = 1] = "jump"
        }(t.RouteSegmentLabelEnum || (t.RouteSegmentLabelEnum = {}));
        t.RouteSegmentLabelEnum;
        t.toRouteSegmentAPI = p,
        t.cleanBootupResponse = m,
        t.cleanLoadResponse = v,
        t.cleanSystemsResponse = g,
        t.cleanSystemDetailResponse = y,
        t.cleanCelestialBodyResponse = b,
        t.cleanTunnelsResponse = x,
        t.cleanSpeciesResponse = w,
        t.cleanAffiliations = _,
        t.cleanRoutesResponse = S
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(48)
              , o = n(53)
              , a = n(55)
              , s = n(57)
              , l = n(24)
              , c = n(32)
              , u = n(22)
              , h = n(46)
              , d = n(52)
              , f = n(58)
              , p = n(61)
              , m = n(26)
              , v = n(62)
              , g = function(t) {
                function n(n, i, r, o, a, s, l, c, h) {
                    var d = this;
                    t.call(this),
                    this.scene = n,
                    this.camera = i,
                    this.window = r,
                    this.controlAPI = s,
                    this.starmapapi = l,
                    this.resourcePath = c,
                    this.getHeader = h,
                    this.ready = !1,
                    this.stars = {},
                    this.starsById = {},
                    this.jumpPointOtherEnd = {},
                    this.jumpPointRoute = {},
                    this.highlightedRoutes = null,
                    this.highlightedObject = {},
                    this.routingSegments = null,
                    this.currentRoutingSegment = null,
                    this.routes = [],
                    this.controllers = {},
                    this.highlightedStar = null,
                    this.highlightedStarSticky = !1,
                    this.started = !1,
                    this.gui = {
                        nebula: !0
                    },
                    this.worldOffset = new e.Vector3(0,0,0),
                    this.routeSizeSelectionArray = [!1, !1, !1],
                    this.showLRScanner = !1,
                    this.showRoutes = !1,
                    this.pixelSizeOverZ = new e.Vector3,
                    this.presenceRatio = 1,
                    this._view = u.ViewEnum.galaxy,
                    this.affiliationCodes = [],
                    this.speciesCodes = [],
                    this.affiliations = {},
                    this.species = {},
                    this.affiliationColors = {},
                    this.systemCurrentlyViewed = null,
                    this.jumpPrefabs = [],
                    this.initConfig = {
                        stars: {
                            radiusFactor: 20,
                            maxRadius: 50,
                            useStarFading: !0,
                            fadeStart: 3.5,
                            pitchEffect: .5,
                            pitchIntensity: .5,
                            colorD1: "rgb(0,0,255)",
                            colorD2: "rgb(128,128,255)",
                            colorL1: "rgb(0,255,0)",
                            colorL2: "rgb(128,255,129)",
                            colorC1: "rgb(255,0,0)",
                            colorC2: "rgb(255,128,128)"
                        },
                        routes: [{
                            width: .24,
                            color: "rgb(80,3,0)",
                            colorBorder: "rgb(115,53,0)",
                            size: .5,
                            density: .5,
                            speed: .5,
                            side: 0,
                            center: 0,
                            pitchEffect: .5,
                            pitchIntensity: .5,
                            highlightFactor: .5,
                            depthFactor: .1
                        }, {
                            width: .39,
                            color: "rgb(80,32,0)",
                            colorBorder: "rgb(115,76,0)",
                            size: .5,
                            density: .5,
                            speed: .5,
                            side: 0,
                            center: 0,
                            pitchEffect: .5,
                            pitchIntensity: .5,
                            highlightFactor: .5,
                            depthFactor: .1
                        }, {
                            width: .54,
                            color: "rgb(80,60,0)",
                            colorBorder: "rgb(115,98,0)",
                            size: .5,
                            density: .5,
                            speed: .5,
                            side: 0,
                            center: 0,
                            pitchEffect: .5,
                            pitchIntensity: .5,
                            highlightFactor: .5,
                            depthFactor: .1
                        }],
                        longRangeScanner: {
                            radius: 1
                        },
                        starfield: {
                            radius: 6,
                            count: 1e3,
                            sizeMin: 1,
                            sizeMax: 1,
                            color1: "rgb(128,128,128)",
                            color2: "rgb(100,100,100)"
                        }
                    },
                    this.updateRoutesParams = function() {
                        for (var e = 0, t = d.routes; e < t.length; e++) {
                            var n = t[e];
                            n.updateRouteParams()
                        }
                    }
                    ;
                    this.root = new e.Group,
                    this.starsRoot = new e.Group,
                    this.routesRoot = new e.Group,
                    this.dustRoot = new e.Group,
                    n.add(this.root),
                    this.root.add(this.starsRoot),
                    this.root.add(this.routesRoot),
                    this.root.add(this.dustRoot),
                    this.factionMaterials = {},
                    this.starSystemMgr = a,
                    a && (a.galaxy = this),
                    s.addEventListener("updateSelection", function(e) {
                        return d.updateSelection()
                    }),
                    this.onWindowResize(r.innerWidth, r.innerHeight)
                }
                return i(n, t),
                Object.defineProperty(n.prototype, "starsConfig", {
                    get: function() {
                        return this.config.data.stars
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "routesConfig", {
                    get: function() {
                        return this.config.data.routes
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "starfieldConfig", {
                    get: function() {
                        return this.config.data.starfield
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "view", {
                    get: function() {
                        return this._view
                    },
                    set: function(e) {
                        this._view = e,
                        this.updateSelection()
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.findNearestStar = function(e, t) {
                    var n = null
                      , i = 1 / 0
                      , r = this.stars;
                    for (var o in r) {
                        var a = r[o]
                          , s = a.distanceFromCursor(e, t);
                        i > s && (i = s,
                        n = a)
                    }
                    return n
                }
                ,
                n.prototype.showJumpPointMesh = function(e) {
                    this.jumpPointMesh && (this.jumpPointMesh.visible = e !== !1)
                }
                ,
                n.prototype.showGrid = function(e) {
                    this.grid && (this.grid.model.visible = e)
                }
                ,
                n.prototype.updateSelection = function() {
                    this.showRoutes = this.controlAPI.routeSelection.small || this.controlAPI.routeSelection.medium || this.controlAPI.routeSelection.large,
                    this.routeSizeSelectionArray[h.TunnelSizeLabelEnum.small] = this.controlAPI.routeSelection.small,
                    this.routeSizeSelectionArray[h.TunnelSizeLabelEnum.medium] = this.controlAPI.routeSelection.medium,
                    this.routeSizeSelectionArray[h.TunnelSizeLabelEnum.large] = this.controlAPI.routeSelection.large,
                    this.controlAPI.lrScannerSelection.lifeforms ? (this.showLRScanner || this.controlAPI.dispatchSoundEvent("ShowLongRangeScanner"),
                    this.showLRScanner = !0,
                    this.currentLRScanner = u.HeatmapEnum.lifeforms) : this.controlAPI.lrScannerSelection.economy ? (this.showLRScanner || this.controlAPI.dispatchSoundEvent("ShowLongRangeScanner"),
                    this.showLRScanner = !0,
                    this.currentLRScanner = u.HeatmapEnum.economy) : this.controlAPI.lrScannerSelection.crime ? (this.showLRScanner || this.controlAPI.dispatchSoundEvent("ShowLongRangeScanner"),
                    this.showLRScanner = !0,
                    this.currentLRScanner = u.HeatmapEnum.crime) : (this.showLRScanner && this.controlAPI.dispatchSoundEvent("HideLongRangeScanner"),
                    this.showLRScanner = !1);
                    for (var e in this.stars)
                        this.stars[e].updateSelection();
                    for (var t = 0, n = this.routes; t < n.length; t++) {
                        var i = n[t];
                        i.updateSelection()
                    }
                }
                ,
                n.prototype.preload = function() {
                    var e = this;
                    return Promise.all([this.starSystemMgr.baseLoadObject(this.resourcePath + "/models/Middle_Nebula.dae").then(function(t) {
                        return d["default"].setDepthWriteFalse(t.model),
                        e.nebula = t,
                        e.scene.add(t.model),
                        e.nebula
                    }), this.starSystemMgr.baseLoadObject(this.resourcePath + "/models/DustGoTrhu.dae").then(function(t) {
                        return e.dustPrefab = t
                    }), this.starSystemMgr.baseLoadObject(this.resourcePath + "/models/JumpGoTrhu.dae").then(function(t) {
                        return e.jumpPrefabs[0] = t
                    }), this.getJSON("/bootup.json").then(function(t) {
                        return e.bootup = h.cleanBootupResponse(t)
                    }).then(function() {
                        return e.preloadAffiliations()
                    }).then(function() {
                        return e.init()
                    })])["catch"](console.log.bind(console))
                }
                ,
                n.prototype.start = function() {
                    this.started = !0,
                    this.longRangeScanner = new v["default"](this,this.config.subConfig("longRangeScanner"))
                }
                ,
                n.prototype.update = function(e, t) {
                    if (this.started) {
                        var n = this.stars;
                        r["default"].minZ = 1 / 0,
                        r["default"].maxZ = -(1 / 0);
                        for (var i in n)
                            n[i].update(this.camera, e, t);
                        for (var o = 0, a = this.routes; o < a.length; o++) {
                            var s = a[o];
                            s.update(this.camera, e, t)
                        }
                        this.starfield && this.starfield.update(e, t),
                        this.updateControllers(e, t),
                        this.longRangeScanner && this.longRangeScanner.update(this.camera, e, t)
                    }
                }
                ,
                n.prototype.addToGUI = function(e) {
                    var t = this
                      , n = e.addFolder("Galaxis View");
                    n.add(this.root, "visible"),
                    this.grid && c["default"].appendGUI(n, this.grid.model),
                    this.longRangeScanner && this.longRangeScanner.addToGUI(n),
                    n.add(this.gui, "nebula").onChange(function(e) {
                        t.nebula && (t.nebula.model.visible = e)
                    });
                    var i = n.addFolder("Stars");
                    i.add(this.starsConfig, "radiusFactor"),
                    i.add(this.starsConfig, "maxRadius"),
                    i.addColor(this.starsConfig, "colorD1"),
                    i.addColor(this.starsConfig, "colorD2"),
                    i.addColor(this.starsConfig, "colorL1"),
                    i.addColor(this.starsConfig, "colorL2"),
                    i.addColor(this.starsConfig, "colorC1"),
                    i.addColor(this.starsConfig, "colorC2"),
                    i.add(this.starsConfig, "useStarFading"),
                    i.add(this.starsConfig, "fadeStart"),
                    i.add(this.starsConfig, "pitchEffect", 0, 1),
                    i.add(this.starsConfig, "pitchIntensity", 0, 1),
                    i.add(this.starfieldConfig, "radius").onChange(function() {
                        t.makeStarfield()
                    }),
                    i.add(this.starfieldConfig, "count", 0, 5e3).onChange(function() {
                        t.makeStarfield()
                    }),
                    i.add(this.starfieldConfig, "sizeMin", .1, 5).onChange(function() {
                        t.makeStarfield()
                    }),
                    i.add(this.starfieldConfig, "sizeMax", .1, 5).onChange(function() {
                        t.makeStarfield()
                    }),
                    i.addColor(this.starfieldConfig, "color1").onChange(function() {
                        t.makeStarfield()
                    }),
                    i.addColor(this.starfieldConfig, "color2").onChange(function() {
                        t.makeStarfield()
                    });
                    var r = n.addFolder("Routes")
                      , o = function(e) {
                        var n = r.addFolder(h.TunnelSizeLabelEnum[e])
                          , i = t.routesConfig[e];
                        n.add(i, "width", 0, 1).onChange(t.updateRoutesParams),
                        n.addColor(i, "color").onChange(t.updateRoutesParams),
                        n.addColor(i, "colorBorder").onChange(t.updateRoutesParams),
                        n.add(i, "size", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "density", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "speed", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "side", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "center", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "pitchEffect", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "pitchIntensity", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "highlightFactor", 0, 1).onChange(t.updateRoutesParams),
                        n.add(i, "depthFactor", 0, 1).onChange(t.updateRoutesParams)
                    };
                    o(0),
                    o(1),
                    o(2),
                    n.add(this.config, "save")
                }
                ,
                n.prototype.onWindowResize = function(e, t) {
                    var n = 2 * Math.tan(.5 * this.camera.fov * Math.PI / 180) / t;
                    this.pixelSizeOverZ.set(n, n, n);
                    for (var i in this.stars) {
                        var r = this.stars[i];
                        r.onWindowResize(e, t)
                    }
                }
                ,
                n.prototype.preloadAffiliations = function() {
                    var t = this;
                    this.affiliationCodes.push("NONE"),
                    this.affiliations.NONE = {
                        id: "-1",
                        code: "NONE",
                        name: "none",
                        color: "#000000"
                    },
                    this.affiliationColors.NONE = new e.Color("#000000");
                    for (var n = 0, i = this.bootup.affiliations; n < i.length; n++) {
                        var r = i[n];
                        this.affiliationCodes.push(r.code),
                        this.affiliations[r.code] = r,
                        this.affiliationColors[r.code] = new e.Color(r.color)
                    }
                    for (var o = 0, a = this.bootup.species; o < a.length; o++) {
                        var s = a[o];
                        this.speciesCodes.push(s.code),
                        this.species[s.code] = s
                    }
                    return Promise.all(this.affiliationCodes.map(function(e) {
                        return t.loadAffiliationIcon(e)
                    }))
                }
                ,
                n.prototype.loadAffiliationIcon = function(t) {
                    var n = this
                      , i = function(i) {
                        i && (i.minFilter = e.LinearFilter);
                        var r = new e.SpriteMaterial({
                            map: i,
                            color: new e.Color("white")
                        });
                        return r.blending = e.AdditiveBlending,
                        r.depthTest = !1,
                        r.depthWrite = !1,
                        n.factionMaterials[t] = r
                    };
                    return d["default"].loadTexture(this.resourcePath + "/sourceimages/factions/" + t + ".png").then(i)["catch"](function(e) {
                        return console.error(e.stack),
                        i(null)
                    })
                }
                ,
                n.prototype.init = function() {
                    var e = this;
                    this.ready = !0,
                    this.bootup.config = this.bootup.config || {},
                    this.config = new p["default"](this.bootup.config,"main",function() {
                        return e.saveConfig(e.bootup.config)
                    }
                    ),
                    p["default"].fleshConfig(this.config.data, this.initConfig),
                    this.routeOneWayMaterial = this.config.data.routes.map(function(e) {
                        return c["default"].makeRouteMaterial(!1, window.devicePixelRatio, e)
                    }),
                    this.routeTwoWaysMaterial = this.config.data.routes.map(function(e) {
                        return c["default"].makeRouteMaterial(!0, window.devicePixelRatio, e)
                    });
                    for (var t = 0, n = this.bootup.systems; t < n.length; t++) {
                        var i = n[t]
                          , a = new r["default"](this,i);
                        this.stars[a.code] = a,
                        this.starsById[a.id] = a
                    }
                    for (var s = 0, l = this.bootup.tunnels; s < l.length; s++) {
                        var u = l[s]
                          , a = null
                          , h = null;
                        if (u.entry && u.exit && (a = this.starsById[u.entry.star_system_id],
                        h = this.starsById[u.exit.star_system_id]),
                        a && h) {
                            var d = new o["default"](this,a,h,u);
                            this.routes.push(d),
                            a.routes.push(d),
                            h.routes.push(d),
                            this.jumpPointOtherEnd[u.entry.code] = h,
                            this.jumpPointOtherEnd[u.exit.code] = a,
                            this.jumpPointRoute[u.entry.code] = this.jumpPointRoute[u.exit.code] = d
                        } else
                            console.warn("Tunnel invalid " + u.id)
                    }
                    this.makeStarfield()
                }
                ,
                n.prototype.showRouting = function(e) {
                    if (this.currentRoutingSegment = null,
                    this.routingSegments = e,
                    this.highlightedObject = {},
                    e) {
                        console.log("Route codes ..."),
                        console.log(e);
                        for (var t = 0; t < e.length; t++) {
                            var n = e[t];
                            this.highlightedObject[n.object_code] = n
                        }
                        this.highlightedRoutes = {};
                        for (var i = 0; i < e.length; i++) {
                            var n = e[i]
                              , r = this.jumpPointRoute[n.object_code];
                            r && this.highlightedObject[r.tunnel.entry.code] && this.highlightedObject[r.tunnel.exit.code] && (this.highlightedRoutes[r.tunnel.id] = r)
                        }
                    } else
                        this.highlightedRoutes = null;
                    this.starSystemMgr.showRouting(e)
                }
                ,
                n.prototype.resetCurrentRoute = function() {
                    this.currentRoutingSegment = null
                }
                ,
                n.prototype.routingPrevious = function() {
                    if (this.routingSegments) {
                        for (var e = null, t = 0, n = this.routingSegments; t < n.length; t++) {
                            var i = n[t];
                            if (this.currentRoutingSegment === i)
                                return void (this.currentRoutingSegment = e);
                            e = i
                        }
                        null === this.currentRoutingSegment ? this.currentRoutingSegment = e : this.currentRoutingSegment = null
                    } else
                        this.currentRoutingSegment = null
                }
                ,
                n.prototype.routingPreviousSystem = function() {
                    if (null === this.currentRoutingSegment)
                        this.routingPrevious();
                    else
                        for (var e = this.currentRoutingSegment.system_code; this.currentRoutingSegment && this.currentRoutingSegment.system_code === e; )
                            this.routingPrevious()
                }
                ,
                n.prototype.routingNext = function() {
                    if (this.routingSegments) {
                        for (var e = null, t = 0, n = this.routingSegments; t < n.length; t++) {
                            var i = n[t];
                            if (this.currentRoutingSegment === e)
                                return void (this.currentRoutingSegment = i);
                            e = i
                        }
                        this.currentRoutingSegment = null
                    } else
                        this.currentRoutingSegment = null
                }
                ,
                n.prototype.routingNextSystem = function() {
                    if (null === this.currentRoutingSegment)
                        this.routingNext();
                    else
                        for (var e = this.currentRoutingSegment.system_code; this.currentRoutingSegment && this.currentRoutingSegment.system_code === e; )
                            this.routingNext()
                }
                ,
                n.prototype.routingFirstInSystem = function(e) {
                    if (this.routingSegments) {
                        for (var t = 0, n = this.routingSegments; t < n.length; t++) {
                            var i = n[t];
                            if (i.system_code === e)
                                return void (this.currentRoutingSegment = i)
                        }
                        this.currentRoutingSegment = null
                    } else
                        this.currentRoutingSegment = null
                }
                ,
                n.prototype.routingLastInSystem = function(e) {
                    if (this.routingSegments) {
                        for (var t = null, n = 0, i = this.routingSegments; n < i.length; n++) {
                            var r = i[n];
                            r.system_code === e && (t = r)
                        }
                        this.currentRoutingSegment = t
                    } else
                        this.currentRoutingSegment = null
                }
                ,
                Object.defineProperty(n.prototype, "currentRoutingCode", {
                    get: function() {
                        return this.currentRoutingSegment.object_code
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "currentRoutingSystemCode", {
                    get: function() {
                        return this.currentRoutingSegment.system_code
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.makeRandomRouting = function(e) {
                    for (var t = [], n = m["default"].randomElem(this.routes), i = n.starA; e-- > 0; ) {
                        i === n.starA ? (t.push(n.tunnel.entry.code),
                        t.push(n.tunnel.exit.code),
                        i = n.starB) : (t.push(n.tunnel.exit.code),
                        t.push(n.tunnel.entry.code),
                        i = n.starA);
                        for (var r = m["default"].randomElem(i.routes); r === n && i.routes.length > 1; )
                            r = m["default"].randomElem(i.routes);
                        n = r
                    }
                    return t
                }
                ,
                n.prototype.showRandomRoutingFound = function() {
                    var e = this
                      , t = m["default"].randomElem(this.routes)
                      , n = m["default"].randomElem(this.routes)
                      , i = Math.random() < .5 ? t.tunnel.entry.code : t.tunnel.exit.code
                      , r = Math.random() < .5 ? n.tunnel.entry.code : n.tunnel.exit.code;
                    return this.findRoutes(i, r, h.ShipSizeCode.S).then(function(t) {
                        var n = Math.random() < .5 ? t.leastjumps : t.shortest;
                        e.showRouting(n && n.segments ? n.segments : null)
                    })
                }
                ,
                n.prototype.getJumpPointDestination = function(e) {
                    var t = this.jumpPointOtherEnd[e];
                    return t ? t.code : null
                }
                ,
                n.prototype.getJumpPointInfo = function(e) {
                    var t = this.jumpPointRoute[e];
                    return t ? t.tunnel : null
                }
                ,
                n.prototype.makeStarfield = function() {
                    this.starfield && this.starfield.dispose(),
                    this.starfield = new f["default"](this.root,this.camera,new e.Vector3(0,0,0),this.starfieldConfig.radius,this.starfieldConfig.count,this.starfieldConfig.sizeMin,this.starfieldConfig.sizeMax,this.starfieldConfig.color1,this.starfieldConfig.color2)
                }
                ,
                n.prototype.getJSON = function(e, t) {
                    if (t) {
                        new Date;
                        return window.fetch(this.starmapapi + e, {
                            method: "GET",
                            body: JSON.stringify(t),
                            headers: this.getHeader(),
                            cors: !0,
                            credentials: "include"
                        }).then(function(e) {
                            return e.json()
                        })["catch"](function(t) {
                            throw console.error(t),
                            new Error("Failed to fetch '" + e + "'")
                        })
                    }
                    new Date;
                    return window.fetch(this.starmapapi + e, {
                        method: "GET",
                        headers: this.getHeader(),
                        cors: !0,
                        credentials: "include"
                    }).then(function(e) {
                        return e.json()
                    })["catch"](function(t) {
                        throw console.error(t),
                        new Error("Failed to fetch '" + e + "'")
                    })
                }
                ,
                n.prototype.saveJSON = function(e, t) {
                    return window.fetch(this.starmapapi + e, {
                        method: "POST",
                        body: JSON.stringify(t),
                        headers: this.getHeader(),
                        cors: !0
                    }).then(function(e) {
                        return e.json()
                    })["catch"](function(e) {
                        return console.error(e)
                    })
                }
                ,
                n.prototype.saveConfig = function(e) {
                    return this.saveJSON("/config/edit", {
                        starmap_config: e
                    })
                }
                ,
                n.prototype.saveSystemConfig = function(e, t) {
                    return this.saveJSON("/star-systems/" + e + "/saveShaderdata", {
                        shader_data: t
                    })
                }
                ,
                n.prototype.saveBodyConfig = function(e, t) {
                    return this.saveJSON("/celestial-objects/" + e + "/saveShaderdata", {
                        shader_data: t
                    })
                }
                ,
                n.prototype.findRoutes = function(e, t, n) {
                    return this.getJSON("/routes/find", {
                        departure: e,
                        destination: t,
                        ship_size: h.ShipSizeCode[n]
                    }).then(function(e) {
                        return h.cleanRoutesResponse(e)
                    })
                }
                ,
                n.prototype.getStar = function(e) {
                    var t = this.stars[e];
                    return t
                }
                ,
                n.prototype.addDust = function(e) {
                    this.dustPrefab && this.addController(new a["default"](this,this.dustPrefab,e))
                }
                ,
                n.prototype.addJumpEffect = function(e) {
                    this.jumpPrefabs && this.addController(new s["default"](this,m["default"].randomElem(this.jumpPrefabs),e))
                }
                ,
                n.prototype.addController = function(e) {
                    this.controllers[e.obj3d.uuid] = e
                }
                ,
                n.prototype.updateControllers = function(e, t) {
                    var n = null;
                    for (var i in this.controllers) {
                        var r = this.controllers[i];
                        r.update(this.camera, e, t) || (n ? n.push(i) : n = [i])
                    }
                    if (n)
                        for (var o = 0; o < n.length; o++) {
                            var i = n[o];
                            delete this.controllers[i]
                        }
                }
                ,
                n.prototype.getSystemPosition = function(t) {
                    var n = this.stars[t];
                    return n ? n.obj3d.getWorldPosition() : new e.Vector3(0,0)
                }
                ,
                n.prototype.getPlanetaryPosition = function(t, n) {
                    var i, r = this.stars[t];
                    return r && r.starSystem && (i = r.starSystem.bodiesByCode[n]) ? i.obj3d.getWorldPosition() : new e.Vector3(0,0)
                }
                ,
                n.prototype.getSystemScreenCoord = function(t) {
                    var n = this.stars[t];
                    return n ? this.getScreenCoord(n.obj3d) : new e.Vector2(0,0)
                }
                ,
                n.prototype.getPlanetaryScreenCoord = function(t, n) {
                    var i, r = this.stars[t];
                    return r && r.starSystem && (i = r.starSystem.bodiesByCode[n]) ? this.getScreenCoord(i.obj3d) : new e.Vector2(0,0)
                }
                ,
                n.prototype.getScreenCoord = function(t) {
                    var n = t.getWorldPosition()
                      , i = n.clone().project(this.camera);
                    return new e.Vector2(.5 * this.window.innerWidth * (i.x + 1),.5 * this.window.innerHeight * (-i.y + 1))
                }
                ,
                n.prototype.getScreenToCamCoord = function(t, n) {
                    var i = new e.Vector3
                      , r = Math.tan(.5 * this.camera.fov * Math.PI / 180);
                    return i.set(r * this.camera.aspect * (t / this.window.innerWidth * 2 - 1), r * (2 * -(n / this.window.innerHeight) + 1), -1),
                    i
                }
                ,
                n.prototype.setLightColor = function(e) {
                    this.controlAPI.env.setLightColor(e)
                }
                ,
                n.prototype.setSystemStickyHovering = function(e) {
                    this.highlightedStar = this.stars[e],
                    this.highlightedStarSticky = !0
                }
                ,
                n.prototype.releaseSystemStickyHovering = function() {
                    this.highlightedStarSticky = !1
                }
                ,
                n.prototype.setPlanetaryStickyHovering = function(e, t) {
                    var n = this.stars[e];
                    n && n.starSystem ? n.starSystem.setPlanetaryStickyHovering(t) : console.log("'" + e + "' is not a star with a star system instantiated")
                }
                ,
                n.prototype.releasePlanetaryStickyHovering = function(e) {
                    var t = this.stars[e];
                    t && t.starSystem ? t.starSystem.releasePlanetaryStickyHovering() : console.log("'" + e + "' is not a star with a star system instantiated")
                }
                ,
                n.prototype.forceSystemHighlight = function(e) {
                    var t = this.stars[e];
                    t ? t.forceHighlight = !0 : console.log("'" + e + "' is not a star")
                }
                ,
                n.prototype.releaseSystemHighlight = function(e) {
                    var t = this.stars[e];
                    t ? t.forceHighlight = !1 : console.log("'" + e + "' is not a star")
                }
                ,
                n.prototype.forcePlanetaryHovered = function(e, t) {
                    var n = this.stars[e];
                    n && n.starSystem ? n.starSystem.forcePlanetaryHovered(t) : console.log("'" + e + "' is not a star with a star system instantiated")
                }
                ,
                n.prototype.releasePlanetaryHovered = function(e, t) {
                    var n = this.stars[e];
                    n && n.starSystem ? n.starSystem.releasePlanetaryHovered(t) : console.log("'" + e + "' is not a star with a star system instantiated")
                }
                ,
                n.prototype.setLandingZoneHighlight = function(e, t, n, i) {
                    var r = this.stars[e];
                    r && r.starSystem ? r.starSystem.setLandingZoneHighlight(t, n, i) : console.log("'" + e + "' is not a star with a star system instantiated")
                }
                ,
                n.prototype.translateWorld = function(e) {
                    this.worldOffset.add(e);
                    for (var t in this.stars)
                        this.stars[t].translateWorld(e);
                    for (var t in this.routes)
                        this.routes[t].translateWorld(e);
                    this.nebula && this.nebula.model.position.add(e),
                    this.starfield && this.starfield.translateWorld(e),
                    this.starSystemMgr.translateWorld(e),
                    this.controlAPI.env.camctl.translateWorld(e)
                }
                ,
                n
            }(l["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = g
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(22)
              , r = n(49)
              , o = n(50)
              , a = n(51)
              , s = n(26)
              , l = n(32)
              , c = n(52)
              , u = n(46)
              , h = n(22)
              , d = function() {
                function e(e, t, n) {
                    this.detail = null,
                    this.lrScanners = [],
                    this.lrScanners[h.HeatmapEnum.lifeforms] = .1 * e,
                    this.lrScanners[h.HeatmapEnum.economy] = .1 * t,
                    this.lrScanners[h.HeatmapEnum.crime] = .1 * n
                }
                return e
            }();
            t.StarData = d;
            var f = function() {
                function t(t, n) {
                    this.galaxy = t,
                    this.brief = n,
                    this.z = 1,
                    this.quadrantValue = 0,
                    this.showQuadrant = !1,
                    this.circleMaterialTargetColor = new e.Color(r["default"].circleSelectedColor),
                    this.circleMaterialColorChanging = !1,
                    this.routes = [],
                    this.forceHighlight = !1,
                    this.highlightRatio = 0,
                    this.starSystem = null,
                    this._lrsMinColors = [new e.Color(t.starsConfig.colorL1), new e.Color(t.starsConfig.colorD1), new e.Color(t.starsConfig.colorC1)],
                    this._lrsMaxColors = [new e.Color(t.starsConfig.colorL2), new e.Color(t.starsConfig.colorD2), new e.Color(t.starsConfig.colorC2)],
                    this.data = new d(n.aggregated_population,n.aggregated_economy,n.aggregated_danger),
                    this.data.affiliationCode = n.affiliation && n.affiliation[0] && n.affiliation[0].code || "NONE",
                    this.obj3d = new e.Group,
                    this.obj3d.position.set(n.position_x / 100, n.position_z / 100, -n.position_y / 100),
                    t.starsRoot.add(this.obj3d),
                    this.labelAnchor = new e.Group;
                    var i = a.createLabelTexture(this.name.toLocaleUpperCase(), {
                        color: r["default"].labelColor,
                        fontsize: 13,
                        quality: window.devicePixelRatio || 1
                    })
                      , s = new e.SpriteMaterial({
                        map: i,
                        color: new e.Color("rgb(255,255,255)")
                    });
                    s.blending = e.AdditiveBlending,
                    s.depthTest = !1,
                    s.depthWrite = !1,
                    this.label = new e.Sprite(s),
                    this.label.scale.set(i.size.x, i.size.y, 1),
                    this.label.position.set(-.5 * i.size.x, .5 * i.size.y, 0),
                    this.labelAnchor.add(this.label);
                    var c = a.createLabelTexture(o["default"].System.toLocaleUpperCase(), {
                        color: r["default"].sublabelColor,
                        fontsize: 12,
                        quality: window.devicePixelRatio || 1
                    })
                      , u = new e.SpriteMaterial({
                        map: c,
                        color: new e.Color("rgb(255,255,255)")
                    });
                    u.blending = e.AdditiveBlending,
                    u.depthTest = !1,
                    u.depthWrite = !1,
                    this.labelsys = new e.Sprite(u),
                    this.labelsys.scale.set(c.size.x, c.size.y, 1),
                    this.labelsys.position.set(-.5 * c.size.x, -.5 * i.size.y, 0),
                    this.labelAnchor.add(this.labelsys),
                    this.factionSprite = new e.Sprite(t.factionMaterials[this.data.affiliationCode].clone()),
                    this.factionSprite.scale.multiplyScalar(19),
                    this.circleMaterial = l["default"].makeThinline2DMaterial({
                        color: r["default"].circleSelectedColor
                    }),
                    this.quadrantMaterial = l["default"].makeVertexColoredThinline2DMaterial(),
                    this.circleMesh = new e.Mesh(l["default"].makeCircleGeometry(1, 32, r["default"].heatQuadrantMinColor, r["default"].heatQuadrantMaxColor),this.circleMaterial),
                    l["default"].replaceColorGradient(this.circleMesh.geometry, r["default"].heatQuadrantMinColor, r["default"].heatQuadrantMaxColor, r["default"].heatQuadrantNotColor, this.quadrantValue, r["default"].circleHighlightColor, this.highlightRatio),
                    this.topQuadrantMesh = new e.Mesh(l["default"].makeLineGeometry([new e.Vector3(0,0,0), new e.Vector3(0,3,0)]),l["default"].makeThinline2DMaterial({
                        color: r["default"].topQuadrantColor
                    })),
                    this.topQuadrantMesh.visible = !1,
                    this.setCircleMeshRadius(15, 0, 0),
                    this.obj3d.add(this.labelAnchor),
                    this.obj3d.add(this.factionSprite),
                    this.obj3d.add(this.circleMesh),
                    this.obj3d.add(this.topQuadrantMesh),
                    this.focusScore = 0,
                    this.selected = !0,
                    this.targetSize = (new e.Vector3).copy(this.galaxy.pixelSizeOverZ),
                    this.obj3d.scale.copy(this.targetSize),
                    this._velocityScale = new e.Vector3(0,0,0)
                }
                return Object.defineProperty(t.prototype, "highlight", {
                    get: function() {
                        return this.forceHighlight || this.galaxy.highlightedStar === this
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "id", {
                    get: function() {
                        return this.brief.id
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "code", {
                    get: function() {
                        return this.brief.code
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "name", {
                    get: function() {
                        return this.brief.name
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.onWindowResize = function(e, t) {
                    this.circleMaterial && this.circleMaterial.uniforms.resolution.value.set(e, t),
                    this.quadrantMaterial && this.quadrantMaterial.uniforms.resolution.value.set(e, t)
                }
                ,
                t.prototype.setCircleMeshRadius = function(e, t, n) {
                    this.circleMesh.scale.set(e, e, e),
                    this.labelAnchor.position.set(-15 - e - t, -n, 0),
                    this.topQuadrantMesh.position.set(0, e, 0)
                }
                ,
                t.prototype.update = function(t, n, i) {
                    if (!isNaN(i)) {
                        var r = (new e.Vector3).setFromMatrixPosition(this.obj3d.matrixWorld)
                          , o = (new e.Vector3).copy(r);
                        t.worldToLocal(o);
                        var a = -o.z
                          , l = this.galaxy.starsConfig.radiusFactor / a
                          , c = this.galaxy.starsConfig.maxRadius;
                        l > c && (l = s["default"].lerp(l, c, this.galaxy.presenceRatio)),
                        this.targetSize.copy(this.galaxy.pixelSizeOverZ),
                        this.targetSize.multiplyScalar(a);
                        var u = this.targetSize;
                        this.obj3d.scale.set(u.x, u.y, u.z),
                        this.obj3d.rotation.copy(t.rotation);
                        var h = 0
                          , d = 0;
                        this.setCircleMeshRadius(l, h, d);
                        var f = 1 - Math.abs(new e.Vector3(0,1,0).applyQuaternion(t.quaternion).y);
                        this.updateColor(i, f),
                        this.updateQuadrant(i)
                    }
                    return !0
                }
                ,
                t.prototype.updateColor = function(e, n) {
                    if (void 0 === n && (n = 0),
                    this.circleMaterialTargetColor.copy(this.showQuadrant || this.highlight ? r["default"].heatQuadrantNotColor : this.galaxy.showRoutes && this.selected ? r["default"].circleSelectedRouteColor : r["default"].circleSelectedColor),
                    this.circleMaterialColorChanging = !c["default"].sameColor(this.circleMaterialColor, this.circleMaterialTargetColor),
                    this.circleMaterialColor.lerp(this.circleMaterialTargetColor, 2 * e),
                    this.selected) {
                        this.label.material.color.set(t.white),
                        this.labelsys.material.color.set(t.white),
                        this.factionSprite.material.color.set(t.white),
                        this.circleMaterial.uniforms.intensity.value = 1,
                        this.quadrantMaterial.uniforms.intensity.value = 1;
                        var i = this.galaxy.starsConfig.fadeStart
                          , o = this.galaxy.starsConfig.useStarFading ? Math.min(i / this.z, 1) : 1;
                        o *= s["default"].lerp(.25, 1, this.galaxy.presenceRatio),
                        1 > o && (o = s["default"].lerp(o, s["default"].lerp(o, 2 * this.galaxy.starsConfig.pitchIntensity, n), this.galaxy.starsConfig.pitchEffect),
                        o = s["default"].lerp(o, 1, this.highlightRatio),
                        o = s["default"].lerp(.25, o, this.galaxy.presenceRatio),
                        this.label.material.color.multiplyScalar(o),
                        this.labelsys.material.color.multiplyScalar(o),
                        this.factionSprite.material.color.multiplyScalar(o),
                        this.circleMaterial.uniforms.intensity.value *= o,
                        this.quadrantMaterial.uniforms.intensity.value *= o)
                    }
                }
                ,
                t.prototype.updateQuadrant = function(t) {
                    (this.showQuadrant || this.highlight) && (this.circleMesh.material = this.quadrantMaterial,
                    this.topQuadrantMesh.visible = !this.highlight);
                    var n = this.showQuadrant ? this.data.lrScanners[this.galaxy.currentLRScanner] : 0
                      , i = s["default"].gotoValue(this.highlightRatio, this.highlight ? 1 : 0, 4 * t)
                      , o = !1;
                    this.circleMesh.material === this.quadrantMaterial && ((n !== this.quadrantValue || this.circleMaterialColorChanging || i != this.highlightRatio) && (this.quadrantValue = s["default"].gotoValue(this.quadrantValue, n, t),
                    o = this.highlightRatio < .5 && i >= .5,
                    this.highlightRatio = i,
                    this.galaxy.currentLRScanner,
                    l["default"].replaceColorGradient(this.circleMesh.geometry, new e.Color(this._lrsMinColors[this.galaxy.currentLRScanner]), new e.Color(this._lrsMaxColors[this.galaxy.currentLRScanner]), this.circleMaterialColor, this.quadrantValue, r["default"].circleHighlightColor, this.highlightRatio)),
                    this.showQuadrant || 0 !== this.quadrantValue || 0 !== this.highlightRatio || (this.circleMesh.material = this.circleMaterial,
                    this.topQuadrantMesh.visible = !1)),
                    this.circleMesh.visible = !o
                }
                ,
                t.prototype.distanceFromCursor = function(t, n) {
                    var i = (new e.Vector3).setFromMatrixPosition(this.obj3d.matrixWorld)
                      , r = (new e.Vector3).copy(i).project(n)
                      , o = new e.Vector2(n.aspect * (r.x - t.x),r.y - t.y)
                      , a = o.length();
                    return this.focusScore = 1 - s["default"].clamp01(Math.pow(a, 1.1) / .3),
                    a
                }
                ,
                t.prototype.shellDistanceFromCursor = function(t, n) {
                    var i = (new e.Vector3).setFromMatrixPosition(this.obj3d.matrixWorld)
                      , r = (new e.Vector3).copy(i).project(n)
                      , o = (new e.Vector3).copy(i).add(new e.Vector3(0,this.circleMesh.getWorldScale().x,0).applyQuaternion(n.quaternion)).project(n)
                      , a = Math.abs(o.y - r.y)
                      , s = new e.Vector2(n.aspect * (r.x - t.x),r.y - t.y)
                      , l = Math.max(s.length() - a, 0);
                    return l
                }
                ,
                t.prototype.updateSelection = function() {
                    this.galaxy.showRoutes;
                    this.selected = this.galaxy.controlAPI.factionSelection[this.data.affiliationCode];
                    var e = this.galaxy.view !== i.ViewEnum.galaxy && this === this.galaxy.systemCurrentlyViewed
                      , n = this.galaxy.showLRScanner;
                    this.obj3d.visible = !e,
                    this.selected ? (this.label.material.color.set(t.white),
                    this.labelsys.material.color.set(t.white),
                    this.factionSprite.material.color.set(t.white),
                    this.circleMaterial.uniforms.intensity.value = 1) : (this.label.material.color.set(r["default"].labelNotSelectedModColor),
                    this.labelsys.material.color.set(r["default"].sublabelNotSelectedModColor),
                    this.factionSprite.material.color.set(r["default"].factionSpriteNotSelectedModCcolor),
                    this.circleMaterial.uniforms.intensity.value = .4,
                    this.galaxy.view !== i.ViewEnum.galaxy && (this.label.material.color.multiplyScalar(.75),
                    this.labelsys.material.color.multiplyScalar(.75),
                    this.factionSprite.material.color.multiplyScalar(.75),
                    this.circleMaterial.uniforms.intensity.value *= .75)),
                    n && this.selected ? this.showQuadrant = !0 : this.showQuadrant = !1,
                    this.updateColor(0, 1)
                }
                ,
                Object.defineProperty(t.prototype, "circleMaterialColor", {
                    get: function() {
                        return this.circleMaterial.uniforms.color.value
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.initStarSystem = function() {
                    this.starSystem || (this.starSystem = this.galaxy.starSystemMgr.makeStarSystem(this))
                }
                ,
                t.prototype.destroyStarSystem = function(e) {
                    void 0 === e && (e = .1),
                    this.starSystem && (this.starSystem.setToDestroy(e),
                    this.starSystem = null)
                }
                ,
                t.prototype.loadDetail = function() {
                    var e = this;
                    // return this.data.detail ? new Promise(function(t, n) {
                    //     return t(e.data.detail)
                    // }
                    // ) : this.galaxy.getJSON("/star-systems/" + this.code+".json").then(function(t) {
                    //     return e.data.detail = u.cleanSystemDetailResponse(t)
                    // })
                    return this.data.detail ? new Promise(function(t, n) {
                        return t(e.data.detail)
                    }
                    ) : this.galaxy.getJSON("/star-systems/CROSHAW.json").then(function(t) {
                        return e.data.detail = u.cleanSystemDetailResponse(t)
                    })
                }
                ,
                Object.defineProperty(t.prototype, "config", {
                    get: function() {
                        return this.data.detail ? this.data.detail.shader_data = this.data.detail.shader_data || {} : {}
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "lightColorStr", {
                    get: function() {
                        return this.config.lightColor = this.config.lightColor || "#ffffff"
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.translateWorld = function(e) {
                    this.obj3d.position.add(e)
                }
                ,
                t._initSmoothTime = .3,
                t.white = new e.Color("#ffffff"),
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = f
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var n = function() {
                function t() {}
                return t.heatQuadrantMinColor = new e.Color("rgb(247,136,44)"),
                t.heatQuadrantMaxColor = new e.Color("rgb(210,59,7)"),
                t.heatQuadrantNotColor = new e.Color("rgb(13,30,42)"),
                t.labelColor = "rgb(87,220,229)",
                t.sublabelColor = "rgb(26,86,124)",
                t.labelNotSelectedModColor = "#404040",
                t.sublabelNotSelectedModColor = "#606060",
                t.factionSpriteNotSelectedModCcolor = "#606060",
                t.hexagoneSpaceStationColor = new e.Color("rgb(16,103,23)"),
                t.labelPoiColor = new e.Color("rgb(237,7,54)"),
                t.trianglePoiColor = new e.Color("rgb(153,20,1)"),
                t.circleSelectedColor = new e.Color("rgb(26,86,124)"),
                t.circleSelectedRouteColor = new e.Color("rgb(220,88,33)"),
                t.circleHighlightColor = new e.Color("rgb(75,133,151)"),
                t.topQuadrantColor = "rgb(245,221,135)",
                t.habitableZoneColor = "rgb(1,44,33)",
                t.frostZoneColor = "rgb(6,21,26)",
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = n
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        var n = function() {
            function e() {}
            return e.System = "System",
            e.STAR = "Star",
            e.PLANET = "Planet",
            e.ASTEROID_BELT = "Asteroid Belt",
            e.JUMPPOINT = "Jump Point",
            e.BLACKHOLE = "Black Hole",
            e.ASTEROID_FIELD = "Asteroid Field",
            e.MANMADE = "Space Station",
            e.JumpPoints = "Jump Point",
            e.DEPARTURE = "DEPARTURE",
            e.DESTINATION = "DESTINATION",
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t, n) {
        (function(e) {
            t.createLabelTexture = function(t, n) {
                void 0 === n && (n = {});
                var i = n.hasOwnProperty("fontface") ? n.fontface : "Electrolize"
                  , r = n.hasOwnProperty("fontsize") ? n.fontsize : 12
                  , o = n.hasOwnProperty("color") ? n.color : "#3c5e66"
                  , a = (n.hasOwnProperty("opacity") ? n.opacity : 0,
                n.hasOwnProperty("quality") ? n.quality : 4)
                  , s = document.createElement("canvas")
                  , l = s.getContext("2d");
                l.font = r * a + "px " + i;
                var c = l.measureText(t);
                s.width = c.width + 4,
                s.height = r * a + 4,
                l.font = r * a + "px " + i,
                l.textAlign = "center",
                l.textBaseline = "middle";
                var u = new e.Color(o);
                l.fillStyle = "rgba(" + 255 * u.r + "," + 255 * u.g + "," + 255 * u.b + ",0.01)",
                l.fillRect(0, 0, s.width, s.height),
                l.fillStyle = o,
                l.fillText(t, s.width / 2, s.height / 2);
                var h = new e.Texture(s);
                return h.needsUpdate = !0,
                h.size = new e.Vector2(s.width / a,s.height / a),
                h.minFilter = e.LinearFilter,
                h
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var n = function() {
                function t() {}
                return t.makeQuad = function(t) {
                    void 0 === t && (t = 1);
                    var n = new Float32Array(12)
                      , i = new Float32Array(8)
                      , r = new Uint16Array(6)
                      , o = new e.BufferGeometry;
                    return o.addAttribute("position", new e.BufferAttribute(n,3)),
                    o.addAttribute("uv", new e.BufferAttribute(i,2)),
                    o.addAttribute("index", new e.BufferAttribute(r,3)),
                    n[0] = -t,
                    n[1] = -t,
                    n[2] = 0,
                    n[3] = t,
                    n[4] = -t,
                    n[5] = 0,
                    n[6] = -t,
                    n[7] = t,
                    n[8] = 0,
                    n[9] = t,
                    n[10] = t,
                    n[11] = 0,
                    i[0] = 0,
                    i[1] = 0,
                    i[2] = 1,
                    i[3] = 0,
                    i[4] = 0,
                    i[5] = 1,
                    i[6] = 1,
                    i[7] = 1,
                    r[0] = 0,
                    r[1] = 1,
                    r[2] = 2,
                    r[3] = 3,
                    r[4] = 2,
                    r[5] = 1,
                    o
                }
                ,
                t.getRandomSaturatedColor = function() {
                    var t = Math.random()
                      , n = Math.random()
                      , i = Math.random()
                      , r = Math.min(t, n, i)
                      , o = Math.max(t, n, i);
                    if (o > r) {
                        var a = 1 / (o - r);
                        return new e.Color((t - r) * a,(n - r) * a,(i - r) * a)
                    }
                    return new e.Color(1,1,1)
                }
                ,
                t.sameColor = function(e, t) {
                    var n = e.r - t.r
                      , i = e.g - t.g
                      , r = e.b - t.b;
                    return 1e-6 > n * n + i * i + r * r
                }
                ,
                t.loadTexture = function(t, n) {
                    e.ImageUtils.crossOrigin = "";
                    (new Date).getTime();
                    return new Promise(function(i, r) {
                        return e.ImageUtils.loadTexture(t, n, function(e) {
                            i(e)
                        }, function(e) {
                            console.log(e),
                            r(e)
                        })
                    }
                    )
                }
                ,
                t.setDepthWriteFalse = function(t) {
                    t.traverse(function(t) {
                        if (t instanceof e.Mesh && t.material) {
                            var n = t;
                            n.material.depthWrite = !1
                        }
                    })
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = n
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(54)
          , o = n(22)
          , a = n(26)
          , s = function(e) {
            function t(t, n, i, r) {
                e.call(this, t, n.obj3d.position, i.obj3d.position, r),
                this.starA = n,
                this.starB = i,
                this.obj3d.visible = !1
            }
            return i(t, e),
            t.prototype.updateSelection = function() {
                this.showRoute = this.galaxy.view === o.ViewEnum.galaxy && this.galaxy.showRoutes && this.galaxy.routeSizeSelectionArray[this.tunnel.size] && this.galaxy.controlAPI.factionSelection[this.starA.data.affiliationCode] && this.galaxy.controlAPI.factionSelection[this.starB.data.affiliationCode]
            }
            ,
            t.prototype.update = function(t, n, i) {
                this.presence = a["default"].goto02Value(this.presence, this.showRoute, 2 * i);
                var r = this.galaxy.highlightedRoutes ? void 0 !== this.galaxy.highlightedRoutes[this.tunnel.id] : this.starA.highlight || this.starB.highlight;
                this.highlightRatio = a["default"].gotoValue(this.highlightRatio, r ? 1 : 0, 2 * i),
                e.prototype.update.call(this, t, n, i)
            }
            ,
            t.prototype.translateWorld = function(e) {
                this.obj3d.position.add(e)
            }
            ,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = s
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(32)
              , r = n(46)
              , o = function() {
                function t(n, o, a, s) {
                    var l = this;
                    this.galaxy = n,
                    this.pointA = o,
                    this.pointB = a,
                    this.tunnel = s,
                    this.presence = 0,
                    this.highlightRatio = 0;
                    var c = o.clone().add(a).multiplyScalar(.5)
                      , u = o.clone().sub(c)
                      , h = a.clone().sub(c)
                      , d = this.makeRandomControlPoint(u, h)
                      , f = this.makeRandomControlPoint(h, u)
                      , p = new e.CubicBezierCurve3(u,d,f,h)
                      , m = u.distanceTo(h)
                      , v = u.distanceTo(h);
                    v < t.mind && (t.mind = v),
                    this.material = (s.direction === r.TunnelDirectionLabelEnum.bidirectional ? this.galaxy.routeTwoWaysMaterial[s.size] : this.galaxy.routeOneWayMaterial[s.size]).clone(),
                    this.width = this.material.uniforms.width.value,
                    this.obj3d = new e.Mesh(i["default"].makeCurveGeometry(p, Math.ceil(150 * m), 1, function(e) {
                        return l.relThickness(e)
                    }),this.material),
                    this.obj3d.position.copy(c),
                    n.routesRoot.add(this.obj3d)
                }
                return t.prototype.makeRandomControlPoint = function(t, n) {
                    var i = n.clone().sub(t)
                      , r = i.length()
                      , o = new e.Vector3(Math.random() - .5,Math.random() - .5,Math.random() - .5).projectOnPlane(i).normalize();
                    return i.multiplyScalar(.3).add(o.multiplyScalar(.3 * Math.random() * r)).add(t)
                }
                ,
                t.prototype.relThickness = function(e) {
                    return .25 + 3 * e * (1 - e)
                }
                ,
                t.prototype.dispose = function() {
                    this.obj3d.geometry.dispose(),
                    this.material.dispose(),
                    this.galaxy.routesRoot.remove(this.obj3d)
                }
                ,
                t.prototype.update = function(t, n, i) {
                    var r = this.pointA.clone().project(t)
                      , o = new e.Vector2(r.x * t.aspect,r.y)
                      , a = this.pointB.clone().project(t)
                      , s = new e.Vector2(a.x * t.aspect,a.y)
                      , l = .5 * o.distanceTo(s) * this.galaxy.window.innerHeight * this.galaxy.window.devicePixelRatio;
                    this.material.uniforms.time.value = n,
                    this.material.uniforms.intensity.value = this.galaxy.presenceRatio,
                    this.material.uniforms.presence.value = this.presence,
                    this.material.uniforms.highlight.value = this.highlightRatio,
                    this.material.uniforms.length.value = l,
                    this.presence <= 0 ? this.obj3d.visible = !1 : this.obj3d.visible = !0
                }
                ,
                t.prototype.updateRouteParams = function() {
                    var e = this.galaxy.routesConfig[this.tunnel.size]
                      , t = this.material.uniforms;
                    this.width = t.width.value = e.width,
                    t.color.value.set(e.color),
                    t.colorBorder.value.set(e.colorBorder),
                    t.size.value = e.size,
                    t.density.value = e.density,
                    t.speed.value = e.speed,
                    t.side.value = e.side,
                    t.center.value = e.center,
                    t.pitchEffect.value = e.pitchEffect,
                    t.pitchIntensity.value = e.pitchIntensity,
                    t.highlightFactor.value = e.highlightFactor,
                    t.depthFactor.value = e.depthFactor
                }
                ,
                t.mind = 1 / 0,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = o
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        var i = n(56)
          , r = function() {
            function e(e, t, n, r) {
                var o = this;
                void 0 === r && (r = !0),
                this.galaxy = e,
                this._timer = new i["default"],
                this._alive = !0,
                this.obj = t.clone(),
                this.obj3d = this.obj.model,
                e.camera.add(this.obj3d),
                this._timer.addPeriod(.5, 1, function(t) {
                    var i = n.clone().applyMatrix4(e.camera.matrixWorldInverse);
                    o.obj3d.scale.set(1, 1, 1).multiplyScalar(1.5 * t),
                    o.obj3d.position.copy(i).multiplyScalar(10 * (1 - t)),
                    r && o.obj3d.rotation.set(0, 0, -2 * t * Math.PI)
                }),
                this._timer.add(3, function() {
                    e.camera.remove(o.obj3d),
                    o.obj.dispose(),
                    o._alive = !1
                })
            }
            return e.prototype.update = function(e, t, n) {
                return this._timer.update(t, n),
                this._alive
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = r
    }
    , function(e, t, n) {
        var i = n(26)
          , r = function() {
            function e(e, t) {
                this.delay = e,
                this.func = t
            }
            return e
        }()
          , o = function() {
            function e(e, t, n, i) {
                this.delay = e,
                this.duration = t,
                this.func = n,
                this.done = i
            }
            return e
        }()
          , a = function() {
            function e() {
                this._index = 0,
                this._timers = {},
                this._periods = {}
            }
            return e.prototype.add = function(e, t) {
                this._timers[this._index++] = new r(e,t)
            }
            ,
            e.prototype.addPeriod = function(e, t, n, i) {
                this._periods[this._index++] = new o(e,t,n,i),
                0 === e && n(0)
            }
            ,
            e.prototype.clear = function() {
                this._timers = {},
                this._periods = {}
            }
            ,
            e.prototype.update = function(e, t) {
                var n = null;
                for (var r in this._timers) {
                    var o = this._timers[r];
                    o.delay -= t,
                    o.delay < 0 && (o.func(),
                    n ? n.push(r) : n = [r])
                }
                for (var r in this._periods) {
                    var a = this._periods[r];
                    a.delay -= t,
                    a.delay < 0 && (a.func(i["default"].clamp01(-a.delay / a.duration)),
                    a.delay < -a.duration && (a.done && a.done(),
                    n ? n.push(r) : n = [r]))
                }
                if (n)
                    for (var s = 0; s < n.length; s++) {
                        var r = n[s];
                        this._timers[r] ? delete this._timers[r] : this._periods[r] && delete this._periods[r]
                    }
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = a
    }
    , function(e, t, n) {
        var i = n(56)
          , r = n(26)
          , o = function() {
            function e(e, t, n) {
                var o = this;
                this.galaxy = e,
                this._timer = new i["default"],
                this._alive = !0,
                this.obj = t.clone(),
                this.obj3d = this.obj.model,
                e.camera.add(this.obj3d);
                var a = n.clone().applyMatrix4(this.galaxy.camera.matrixWorldInverse)
                  , s = 0
                  , l = r["default"].lerp(-s, s, Math.random())
                  , c = r["default"].lerp(-s, s, Math.random())
                  , u = Math.random() > .5 ? 1 : -1
                  , h = r["default"].lerp(2, 6, Math.random())
                  , d = Math.atan2(a.y, a.x);
                this.obj3d.rotateZ(d),
                this._timer.addPeriod(0, 2, function(e) {
                    var t = Math.min(1, 4 * e);
                    o.obj3d.position.set(t * l * Math.sin(h * e * Math.PI * u), t * c * Math.cos(h * e * Math.PI * u), -4)
                }),
                this._timer.add(2, function() {
                    e.camera.remove(o.obj3d),
                    o.obj.dispose(),
                    o._alive = !1
                })
            }
            return e.prototype.update = function(e, t, n) {
                return 0 === this._animeStart && (this._animeStart = t),
                this._timer.update(t, n),
                this.obj.update(e, t - this._animeStart, n),
                this._alive
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = o
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(32)
              , r = function() {
                function t(t, r, o, a, s, l, c, u, h) {
                    this.root = t,
                    this.presenceRatio = 1,
                    this.skip = 0,
                    this.makeStarfieldMaterial = function(t) {
                        t = t || {};
                        var i = new e.ShaderMaterial({
                            uniforms: {
                                color1: {
                                    type: "c",
                                    value: t.color1 ? new e.Color(t.color1) : new e.Color(1,1,1)
                                },
                                color2: {
                                    type: "c",
                                    value: t.color2 ? new e.Color(t.color2) : new e.Color(1,1,1)
                                },
                                sizeMin: {
                                    type: "f",
                                    value: t.sizeMin || 1
                                },
                                sizeMax: {
                                    type: "f",
                                    value: t.sizeMax || 2
                                },
                                intensity: {
                                    type: "f",
                                    value: t.intensity || 1
                                },
                                time: {
                                    type: "f",
                                    value: t.time || 0
                                },
                                deltaTime: {
                                    type: "f",
                                    value: t.deltaTime || .01
                                },
                                resolution: {
                                    type: "v2",
                                    value: new e.Vector2(window.innerWidth,window.innerHeight)
                                },
                                fadeBack: {
                                    type: "f",
                                    value: t.fadeBack || 0
                                },
                                radiusAndInvRadius: {
                                    type: "v2",
                                    value: t.radiusAndInvRadius || new e.Vector2(4,.25)
                                },
                                fade: {
                                    type: "v2",
                                    value: new e.Vector2(t.fadeMin || 1,t.fadeMax || 1)
                                },
                                depth: {
                                    type: "v2",
                                    value: new e.Vector2(t.depthMin || 0,t.depthMax || 1)
                                },
                                previousModelViewMatrix: {
                                    type: "m4",
                                    value: this.getModelViewMatrix()
                                }
                            },
                            vertexShader: n(59),
                            fragmentShader: n(60)
                        });
                        return i.transparent = !0,
                        i.side = e.DoubleSide,
                        i.blending = e.AdditiveBlending,
                        i.depthTest = !1,
                        this.material = i,
                        i
                    }
                    ,
                    this.camera = r;
                    for (var d = [], f = 0; s > f; f++) {
                        var p = new e.Vector3(Math.random() - .5,Math.random() - .5,Math.random() - .5);
                        p.normalize();
                        var m = Math.random();
                        p.multiplyScalar(a * (1 - m * m * m)),
                        d.push(p.clone()),
                        d.push(p.clone())
                    }
                    this.mesh = i["default"].makeLineMesh(d, {
                        color: new e.Color(1,1,1),
                        intensity: .05,
                        fadeBack: 1
                    }),
                    this.mesh.name = "Starfield",
                    this.mesh.material = this.makeStarfieldMaterial({
                        color1: u,
                        color2: h,
                        sizeMin: l,
                        sizeMax: c
                    }),
                    this.mesh.visible = !0,
                    this.previousModelViewMatrix = this.getModelViewMatrix(),
                    this.mesh.position.set(o.x, o.y, o.z),
                    t.add(this.mesh)
                }
                return t.prototype.addToGUI = function(e) {
                    i["default"].appendGUI(e, this.mesh)
                }
                ,
                t.prototype.update = function(e, t) {
                    this.material.uniforms.previousModelViewMatrix.value.copy(this.previousModelViewMatrix),
                    this.material.uniforms.time.value = e,
                    this.material.uniforms.deltaTime.value = t,
                    this.material.uniforms.intensity.value = this.presenceRatio,
                    this.previousModelViewMatrix = this.getModelViewMatrix(),
                    this.skip--
                }
                ,
                t.prototype.getModelViewMatrix = function() {
                    return (new e.Matrix4).multiplyMatrices(this.camera.matrixWorldInverse, this.mesh.matrixWorld)
                }
                ,
                t.prototype.dispose = function() {
                    this.mesh.geometry.dispose(),
                    this.material.dispose(),
                    this.root.remove(this.mesh)
                }
                ,
                t.prototype.translateWorld = function(e) {
                    this.skip = 1,
                    this.mesh.updateMatrixWorld(!0)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = r
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        e.exports = "uniform vec2 resolution;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float sizeMin;\nuniform float sizeMax;\nuniform float intensity;\n\nuniform mat4 previousModelViewMatrix;\nuniform float time;\nuniform float deltaTime;\n\n//\n////varying vec2 texcoord;\nvarying vec3 texcoord;\nvarying vec4 vcolor;\n\n\nfloat rand(vec2 co){	\n	return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main() {\n	float size = mix(sizeMin,sizeMax, rand(position.xy));\n	vec3 color = mix(color1, color2, rand(position.xz));\n	float d = 6.0 * (uv.y - 0.5);\n	vec3 normal2 = normalize((modelViewMatrix * vec4( position, 1.0 ) - previousModelViewMatrix * vec4( position, 1.0 )).xyz);\n	mat4 mvm = uv.x <0.5 ? previousModelViewMatrix : modelViewMatrix;\n	vec4 wpos = mvm * vec4( position, 1.0 );\n	vec4 wposN = mvm * vec4( position + normal2, 1.0 );\n	vec4 vp = projectionMatrix * wpos;\n	vec4 vpn = projectionMatrix * wposN;\n	float nx = vpn.x*vp.w - vpn.w*vp.x;\n	float ny = vpn.y*vp.w - vpn.w*vp.y;\n	vec3 t = normalize(vec3(nx, ny, 0));\n	gl_Position = vp + vec4(\n		size*1.0*d*vp.w*vec2(t.y/resolution.x, -t.x/resolution.y)\n		+ size*3.0*( uv.x >0.5 ? 1.0:-1.0)*vp.w*vec2(t.x/resolution.x, t.y/resolution.y)\n		, 0, 0);\n\n	//gl_Position = vp + 20.*vec4(uv.x >0.5 ? 5.0/resolution.x : 0.,\n						//uv.y <0.5 ? 5.0/resolution.y : 0.,  0.,0.);\n	texcoord = vec3(uv.x*vp.w, uv.y*vp.w, vp.w);\n\n	vcolor = vec4(color,intensity);\n\n}"
    }
    , function(e, t) {
        e.exports = "//varying vec2 texcoord;\nvarying vec4 vcolor;\nvarying vec3 texcoord;\nuniform vec2 fade;\nuniform vec2 depth;\n\nfloat lerp(float a, float b, float t) { return (1.0-t)*a + t*b; }\n\nfloat clamp01(float a) { return a < 0.0? 0.0 : a < 1.0? a : 1.0; }\n\nvoid main() {\n	float UVx = 2.0*(texcoord.x/texcoord.z-0.5);\n	float UVy = 2.0*(texcoord.y/texcoord.z-0.5);\n	float d = 1.0-length(vec2(UVx,UVy));\n	gl_FragColor = vec4(vcolor.rgb, d * vcolor.a);\n}"
    }
    , function(e, t) {
        var n = function() {
            function e(t, n, i) {
                var r = this;
                this.data = t,
                this.type = n,
                this.saveFunc = i,
                this.save = function() {
                    r.saveFunc && r.saveFunc()
                }
                ,
                this.copy = function() {
                    e.clipboard[r.type] = JSON.stringify(r.data)
                }
                ,
                this.paste = function() {
                    if (e.clipboard[r.type]) {
                        var t = JSON.parse(e.clipboard[r.type]);
                        for (var n in r.data)
                            delete r.data[n];
                        for (var n in t)
                            r.data[n] = t[n]
                    }
                }
                ,
                t || (t = {})
            }
            return e.prototype.subConfig = function(t, n) {
                return this.data[t] || (this.data[t] = {}),
                new e(this.data[t],n || t,this.saveFunc)
            }
            ,
            e.fleshConfig = function(t, n) {
                for (var i in n) {
                    var r = t[i]
                      , o = n[i];
                    if (void 0 === r || null === r)
                        t[i] = o;
                    else if ("object" == typeof o)
                        if ("object" != typeof r)
                            t[i] = o;
                        else if (o instanceof Array)
                            if (r instanceof Array)
                                for (var a = 0; a < o.length; a++)
                                    void 0 === r[a] ? r[a] = o[a] : e.fleshConfig(r[a], o[a]);
                            else
                                t[i] = o;
                        else
                            e.fleshConfig(r, o)
                }
            }
            ,
            e.clipboard = {},
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(56)
              , r = n(63)
              , o = n(26)
              , a = function() {
                function t(t, n) {
                    this.galaxy = t,
                    this._canvasPosition = new e.Vector2(500,500),
                    this._canvasSize = new e.Vector2(260,260),
                    this._pixelRatio = 1,
                    this._timer = new i["default"],
                    this._testTimer = new i["default"],
                    this._alive = !0,
                    this._showing = !1,
                    this._targetEconomyRatio = 0,
                    this._targetLifeRatio = 0,
                    this._targetCrimeRatio = 0,
                    this._galaxy = t,
                    this.obj = new r["default"]("LongRangeScanner","longRangeScanner",n),
                    this.obj3d = this.obj.model,
                    t.camera.add(this.obj3d),
                    this.obj3d.position.set(.5, 0, -1),
                    this._pixelRatio = .5 * Math.abs(this._galaxy.getScreenToCamCoord(0, 0).x - this._galaxy.getScreenToCamCoord(1, 0).x) / this.obj.radius,
                    this.setCanvasSize(260, 260),
                    this.obj.material.uniforms.alpha.value = 0,
                    this.Reset()
                }
                return t.prototype.Reset = function() {
                    this.obj.material.uniforms.ratioD.value = 0,
                    this.obj.material.uniforms.ratioL.value = 0,
                    this.obj.material.uniforms.ratioC.value = 0,
                    this.setData(0, 0, 0)
                }
                ,
                t.prototype.setData = function(e, t, n, i) {
                    void 0 === i && (i = 1),
                    this._targetEconomyRatio = o["default"].clamp01(e),
                    this._targetLifeRatio = o["default"].clamp01(t),
                    this._targetCrimeRatio = o["default"].clamp01(n),
                    this._showing && this.show(!0, i)
                }
                ,
                t.prototype.show = function(e, t) {
                    var n = this;
                    void 0 === t && (t = 1),
                    this._showing = e;
                    var i = this.obj.material.uniforms.alpha.value
                      , r = this.obj.material.uniforms.ratioD.value
                      , a = this.obj.material.uniforms.ratioL.value
                      , s = this.obj.material.uniforms.ratioC.value;
                    this._timer.clear(),
                    this._showing ? (this._timer.addPeriod(0, .5 * t, function(e) {
                        var t = o["default"].smoothstep(e);
                        n.obj.material.uniforms.alpha.value = o["default"].lerp(i, 1, t)
                    }),
                    this._timer.addPeriod(.25 * t, 1 * t, function(e) {
                        var t = o["default"].smoothstep(e);
                        n.obj.material.uniforms.ratioD.value = o["default"].lerp(r, n._targetEconomyRatio, t),
                        n.obj.material.uniforms.ratioL.value = o["default"].lerp(a, n._targetLifeRatio, t),
                        n.obj.material.uniforms.ratioC.value = o["default"].lerp(s, n._targetCrimeRatio, t)
                    })) : (this._timer.addPeriod(.5 * t, .5 * t, function(e) {
                        var t = o["default"].smoothstep(e);
                        n.obj.material.uniforms.alpha.value = o["default"].lerp(i, 0, t)
                    }),
                    this._timer.addPeriod(0, .75 * t, function(e) {
                        var t = o["default"].smoothstep(e);
                        n.obj.material.uniforms.ratioD.value = o["default"].lerp(r, 0, t),
                        n.obj.material.uniforms.ratioL.value = o["default"].lerp(a, 0, t),
                        n.obj.material.uniforms.ratioC.value = o["default"].lerp(s, 0, t)
                    }))
                }
                ,
                t.prototype.update = function(e, t, n) {
                    return this._timer.update(t, n),
                    this._testTimer.update(t, n),
                    this.obj.material.uniforms.time.value = t,
                    this.obj3d.position.copy(this._galaxy.getScreenToCamCoord(this._canvasPosition.x, this._canvasPosition.y)),
                    this._pixelRatio = .5 * Math.abs(this._galaxy.getScreenToCamCoord(0, 0).x - this._galaxy.getScreenToCamCoord(1, 0).x) / this.obj.radius,
                    this.obj.model.scale.set(this._canvasSize.x * this._pixelRatio, this._canvasSize.y * this._pixelRatio, 1),
                    this._alive
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    this.obj.addToGUI(e, t)
                }
                ,
                t.prototype.setCanvasPosition = function(t, n) {
                    this._canvasPosition = new e.Vector2(t,n)
                }
                ,
                t.prototype.setCanvasSize = function(t, n) {
                    this._canvasSize = new e.Vector2(t,n)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = a
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(52)
              , r = n(64)
              , o = n(26)
              , a = function() {
                function t(n, o, a, s, l, c) {
                    var u = this;
                    void 0 === l && (l = 100),
                    void 0 === c && (c = 100),
                    this.name = n,
                    this.type = o,
                    this.config = a,
                    this.poi = s,
                    this.width = l,
                    this.height = c,
                    this.frametime = 0,
                    this.updateMaterial = function() {
                        var e = u.fragmentShader
                          , n = u.material.uniforms;
                        if (e.colors)
                            for (var i = 0; i < e.colors.length; i++)
                                n[e.colorsLabel[i]].value.set(u.config.data[e.colorsLabel[i]]);
                        if (e.params)
                            for (var i = 0; i < e.params.length; i++)
                                n[e.paramsLabel[i]].value = u.config.data[e.paramsLabel[i]];
                        if (void 0 !== e.iterations && (n.iterations.value = u.config.data.iterations),
                        e.maps)
                            for (var i = 0; i < e.maps.length; i++)
                                n[e.mapsLabel[i]].value = t.textures[e.mapsChoices[u.config.data[e.mapsLabel[i]]]]
                    }
                    ,
                    this.fleshConfig();
                    var h = this.fragmentShader
                      , d = {
                        time: {
                            type: "f",
                            value: 0
                        },
                        frametime: {
                            type: "f",
                            value: 0
                        },
                        resolution: {
                            type: "v2",
                            value: new e.Vector2(l,c)
                        },
                        speed: {
                            type: "f",
                            value: h.speed || 1
                        },
                        poi: {
                            type: "v2",
                            value: new e.Vector2
                        },
                        poi3D: {
                            type: "v3",
                            value: new e.Vector3
                        },
                        camPos: {
                            type: "v3",
                            value: new e.Vector3
                        },
                        camZ: {
                            type: "v3",
                            value: new e.Vector3
                        },
                        wpoi3D: {
                            type: "v3",
                            value: new e.Vector3
                        },
                        wcenter: {
                            type: "v3",
                            value: new e.Vector3
                        },
                        start: {
                            type: "f",
                            value: r.time + (h.delay || 0)
                        },
                        end: {
                            type: "f",
                            value: r.time + (h.delay || 0) + (h.duration || 0)
                        },
                        iterations: {
                            type: "i",
                            value: void 0 === h.iterations ? 1 : this.config.data.iterations
                        }
                    };
                    if (h.maps)
                        for (var f = 0; f < h.maps.length; f++)
                            d[h.mapsLabel[f]] = {
                                type: "t",
                                value: t.textures[h.mapsChoices[this.config.data[h.mapsLabel[f]]]]
                            };
                    if (h.colors)
                        for (var f = 0; f < h.colors.length; f++)
                            d[h.colorsLabel[f]] = {
                                type: "c",
                                value: new e.Color(this.config.data[h.colorsLabel[f]])
                            };
                    if (h.params)
                        for (var f = 0; f < h.params.length; f++)
                            d[h.paramsLabel[f]] = {
                                type: "f",
                                value: this.config.data[h.paramsLabel[f]]
                            };
                    this.geometry = new e.Geometry,
                    this.geometry.vertices.push(new e.Vector3(0,0,0)),
                    this.material = new e.ShaderMaterial({
                        uniforms: d,
                        vertexShader: h.usePoi3D ? t.vertexShaderPoi3D : t.vertexShader,
                        fragmentShader: h.code,
                        blending: h.additiveBlending ? e.AdditiveBlending : e.NormalBlending,
                        depthWrite: !1,
                        depthTest: !!h.depthTest,
                        transparent: !0
                    }),
                    this.material.side = e.DoubleSide,
                    this.radius = h.radius,
                    this.model = new e.Mesh(i["default"].makeQuad(h.radius),this.material),
                    this.model.name = n,
                    this.fragmentShader.orientation && this.model.quaternion.copy(this.fragmentShader.orientation)
                }
                return Object.defineProperty(t.prototype, "fragmentShader", {
                    get: function() {
                        return t.fragmentShadersLib[this.type]
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.clone = function() {
                    return new t(this.name,this.type,this.config,this.poi,this.width,this.height)
                }
                ,
                t.prototype.resize = function(e, t) {
                    this.width = e,
                    this.height = t,
                    this.material.uniforms.resolution.value.set(e, t)
                }
                ,
                t.prototype.update = function(t, n, i) {
                    if (this.poi) {
                        var r = (new e.Vector3).setFromMatrixPosition(this.poi.matrixWorld)
                          , a = this.model.getWorldPosition()
                          , s = r.clone().applyMatrix4(t.matrixWorldInverse)
                          , l = a.clone().applyMatrix4(t.matrixWorldInverse)
                          , c = r.clone().project(t);
                        this.material.uniforms.poi.value.set(.5 + .5 * c.x, .5 + .5 * c.y),
                        this.material.uniforms.poi3D.value.copy(r),
                        this.material.uniforms.camPos.value.copy(t.position),
                        this.material.uniforms.wcenter.value.copy(l),
                        this.material.uniforms.wpoi3D.value.copy(s)
                    }
                    if (this.material.uniforms.camZ.value.copy(new e.Vector3(0,0,1).applyQuaternion(t.quaternion)),
                    this.frametime = this.frametime + .01666666,
                    this.material.uniforms.time.value = n,
                    this.material.uniforms.frametime.value = this.frametime,
                    this.fragmentShader.orientation || this.model.rotation.copy(t.rotation),
                    void 0 !== this.fragmentShader.scaleMin) {
                        var u = o["default"].lerp(this.config.data.scaleMin, this.config.data.scaleMax, .5 * (Math.sin(2 * n * Math.PI / this.config.data.scalePeriod) + 1));
                        this.model.scale.set(u, u, u)
                    }
                }
                ,
                t.prototype.fleshConfig = function() {
                    var e = this.fragmentShader;
                    if (e.colors || e.params || void 0 !== e.iterations || void 0 !== e.scaleMin) {
                        if (e.colors)
                            for (var t = 0; t < e.colors.length; t++)
                                this.config.data[e.colorsLabel[t]] = this.config.data[e.colorsLabel[t]] || e.colors[t];
                        if (e.params)
                            for (var t = 0; t < e.params.length; t++)
                                void 0 === this.config.data[e.paramsLabel[t]] && (this.config.data[e.paramsLabel[t]] = e.params[t]);
                        if (e.maps)
                            for (var t = 0; t < e.maps.length; t++)
                                void 0 === this.config.data[e.mapsLabel[t]] && (this.config.data[e.mapsLabel[t]] = e.maps[t]);
                        void 0 !== e.iterations && void 0 === this.config.data.iterations && (this.config.data.iterations = e.iterations),
                        void 0 !== e.scaleMin && (void 0 === this.config.data.scaleMin && (this.config.data.scaleMin = e.scaleMin),
                        void 0 === this.config.data.scaleMax && (this.config.data.scaleMax = e.scaleMax),
                        void 0 === this.config.data.scalePeriod && (this.config.data.scalePeriod = e.scalePeriod))
                    }
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    var n = this
                      , i = this.fragmentShader;
                    if (i.colors || i.params || void 0 !== i.iterations || void 0 !== i.scaleMin || void 0 !== i.maps) {
                        var r = e.addFolder(this.type)
                          , o = function() {
                            n.updateMaterial()
                        };
                        if (i.maps) {
                            for (var a = [], s = 0; s < i.mapsChoices.length; s++)
                                a.push(s);
                            for (var s = 0; s < i.maps.length; s++)
                                r.add(this.config.data, i.mapsLabel[s], a).onChange(o)
                        }
                        if (void 0 !== i.scaleMin && (r.add(this.config.data, "scaleMin", 0, 5).onChange(o),
                        r.add(this.config.data, "scaleMax", 0, 5).onChange(o),
                        r.add(this.config.data, "scalePeriod", .1, 60).onChange(o)),
                        i.colors)
                            for (var s = 0; s < i.colors.length; s++)
                                r.addColor(this.config.data, i.colorsLabel[s]).onChange(o);
                        if (i.params)
                            for (var s = 0; s < i.params.length; s++)
                                r.add(this.config.data, i.paramsLabel[s], 0, 1).onChange(o);
                        void 0 !== i.iterations && r.add(this.config.data, "iterations", 0, 10).onChange(o),
                        r.add(this.config, "copy"),
                        r.add({
                            paste: function() {
                                n.config.paste(),
                                n.fleshConfig(),
                                o(),
                                t()
                            }
                        }, "paste")
                    }
                }
                ,
                t.prototype.dispose = function() {
                    this.geometry.dispose(),
                    this.material.dispose()
                }
                ,
                t.loadTextures = function(n) {
                    var r = {};
                    for (var o in t.fragmentShadersLib) {
                        var a = t.fragmentShadersLib[o];
                        if (a.mapsChoices)
                            for (var s = 0, l = a.mapsChoices; s < l.length; s++) {
                                var c = l[s];
                                r[c] = !0
                            }
                    }
                    var u = [];
                    for (var c in r)
                        !function(r) {
                            u.push(i["default"].loadTexture(n + "/sourceimages/" + r).then(function(n) {
                                return n.wrapS = n.wrapT = e.RepeatWrapping,
                                t.textures[r] = n,
                                n
                            }))
                        }(c);
                    return Promise.all(u)
                }
                ,
                t.textures = {},
                t.vertexShader = "\n				varying vec2 texcoord;\n				void main() {\n					vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n					gl_Position = projectionMatrix * wpos;\n					texcoord = uv;\n				}",
                t.vertexShaderPoi3D = "\n				uniform vec3 camPos;\n				uniform vec3 poi3D;\n				varying vec2 texcoord;\n				varying vec4 wpos;\n				\n				void main() {\n					wpos = modelViewMatrix * vec4( position, 1.0 );\n					gl_Position = projectionMatrix * wpos;\n				\n					texcoord = uv;\n				}",
                t.fragmentShadersLib = {},
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = a,
            n(66)
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(65);
            t.time = 0;
            var r = function() {
                function n(n) {
                    var r = this;
                    this.topObjects = [],
                    this.lastTime = 0,
                    this.camera = null,
                    this.container = document.createElement("div"),
                    this.paused = !1,
                    this.pausing = !1,
                    this.started = !1,
                    this.noGUI = !0,
                    this.initPostProcessing = function() {
                        r.composer = new e.EffectComposer(r.renderer);
                        var t = new e.ShaderPass(e.CopyShader);
                        t.renderToScreen = !0,
                        r.topObjects.forEach(function(e) {
                            return e.initPostProcessing(r.composer)
                        }),
                        r.composer.addPass(t)
                    }
                    ,
                    this.resetGUI = function() {
                        "dat"in i.window && (r.noGUI || (r.gui && r.gui.destroy(),
                        r.gui = new dat.GUI,
                        r.gui.add(r, "doNotShowGUI"),
                        r.topObjects.forEach(function(e) {
                            return e.addToGUI(r.gui, r.resetGUI)
                        })))
                    }
                    ,
                    this.doNotShowGUI = function() {
                        "dat"in i.window && (r.noGUI = !0,
                        r.gui && r.gui.destroy(),
                        r.gui = new dat.GUI,
                        r.gui.add(r, "showGUI"))
                    }
                    ,
                    this.showGUI = function() {
                        "dat"in i.window && (r.noGUI = !1,
                        r.resetGUI())
                    }
                    ,
                    this.onWindowResize = function() {
                        r.renderer.setSize(i.window.innerWidth, i.window.innerHeight);
                        var e = r.renderer.context
                          , t = e.canvas.width
                          , n = e.canvas.height;
                        console.log("width = " + t + ", height = " + n + ", drawingBufferWidth = " + e.drawingBufferWidth + ", innerWidth = " + i.window.innerWidth),
                        r.topObjects.forEach(function(e) {
                            return e.onWindowResize(i.window.innerWidth, i.window.innerHeight)
                        }),
                        r.composer && r.composer.reset()
                    }
                    ,
                    this.animate = function(e) {
                        t.time = .001 * e;
                        var n = t.time - r.lastTime;
                        r.topObjects.forEach(function(e) {
                            return e.update(t.time, n)
                        }),
                        r.camera && (r.camera.updateMatrixWorld(!0),
                        r.camera.matrixWorldInverse.getInverse(r.camera.matrixWorld)),
                        r.topObjects.forEach(function(e) {
                            return e.lateUpdate(t.time, n)
                        }),
                        r.lastTime = t.time,
                        r.renderer.autoClear = !1,
                        r.composer.render(),
                        r.pausing ? (r.pausing = !1,
                        r.paused = !0) : requestAnimationFrame(r.animate)
                    }
                    ,
                    n.appendChild(this.container),
                    this.renderer = new e.WebGLRenderer({
                        antialias: !0,
                        alpha: !0
                    }),
                    this.renderer.setPixelRatio(i.window.devicePixelRatio),
                    this.renderer.setSize(i.window.innerWidth, i.window.innerHeight),
                    this.container.appendChild(this.renderer.domElement)
                }
                return n.prototype.pause = function() {
                    this.paused && this.pausing || (this.pausing = !0)
                }
                ,
                n.prototype.unpause = function() {
                    this.pausing ? this.pausing = !1 : this.paused && (this.paused = !1,
                    requestAnimationFrame(this.animate))
                }
                ,
                n.prototype.init = function(e, t) {
                    this.topObjects = e,
                    this.camera = t,
                    this.initPostProcessing(),
                    i.window.addEventListener("resize", this.onWindowResize, !1),
                    this.animate(this.lastTime)
                }
                ,
                n.prototype.load = function() {
                    for (var e = this, t = [], n = 0, i = this.topObjects; n < i.length; n++) {
                        var r = i[n]
                          , o = r.preload();
                        o && t.push(o)
                    }
                    return Promise.all(t).then(function() {
                        for (var t = 0, n = e.topObjects; t < n.length; t++) {
                            var i = n[t];
                            i.afterPreload()
                        }
                        e.doNotShowGUI()
                    })
                }
                ,
                n.prototype.start = function() {
                    this.started || (this.started = !0,
                    this.topObjects.forEach(function(e) {
                        return e.start()
                    }))
                }
                ,
                n
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = r
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        (function(t) {
            "undefined" != typeof window ? e.exports = window : "undefined" != typeof t ? e.exports = t : "undefined" != typeof self ? e.exports = self : e.exports = {}
        }
        ).call(t, function() {
            return this
        }())
    }
    , function(e, t, n) {
        (function(e) {
            var t = n(63);
            t["default"].fragmentShadersLib.gas = {
                usePoi3D: !1,
                additiveBlending: !0,
                radius: 1.5,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                code: n(67)
            },
            t["default"].fragmentShadersLib.sun = {
                usePoi3D: !1,
                additiveBlending: !0,
                radius: 2,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                iterations: 0,
                mapsChoices: ["suns/01_Texture.jpg", "suns/02_Texture.jpg", "suns/03_Texture.jpg", "suns/04_Texture.jpg", "suns/05_Texture.jpg", "suns/06_Texture.jpg", "suns/07_Texture.jpg", "suns/08_Texture.jpg", "suns/09_Texture.jpg"],
                mapsLabel: ["map"],
                maps: [0],
                colorsLabel: ["color1", "color2"],
                colors: ["rgb(205,166,77)", "rgb(205,90,26)"],
                paramsLabel: ["flare1", "flare2", "flare3", "flare4", "flare5", "flare6", "sphere", "texture", "corona", "glow", "alpha", "rotation1", "rotation2"],
                params: [.265, .5, .265, .5, .5, .1, 1, 1, 1, .5, 1, .6, .6],
                code: n(68)
            },
            t["default"].fragmentShadersLib.tunnel = {
                usePoi3D: !1,
                additiveBlending: !0,
                radius: 1,
                code: n(69)
            },
            t["default"].fragmentShadersLib.tunnelback = {
                usePoi3D: !1,
                additiveBlending: !0,
                radius: 1,
                code: n(70)
            },
            t["default"].fragmentShadersLib.sphere = {
                usePoi3D: !1,
                additiveBlending: !0,
                radius: 1,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                code: n(71)
            },
            t["default"].fragmentShadersLib.highlight = {
                usePoi3D: !0,
                additiveBlending: !0,
                radius: 2.5,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                colorsLabel: ["color1", "color2"],
                colors: ["rgb(255,255,255)", "rgb(255,255,255)"],
                paramsLabel: ["alpha", "atmosphere1", "atmosphere2", "atmosphere3"],
                params: [.55, .5, .5, .5],
                code: n(72)
            },
            t["default"].fragmentShadersLib.jumppoint = {
                usePoi3D: !1,
                additiveBlending: !1,
                radius: 2,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                iterations: 0,
                mapsLabel: ["map"],
                mapsChoices: ["JumpPointEnv.png"],
                maps: [0],
                colorsLabel: ["color1", "color2"],
                colors: ["rgb(255,149,0)", "rgb(255,255,255)"],
                paramsLabel: ["flare1", "flare2", "flare3", "flare4", "flare5", "flare6", "texture", "corona", "alpha", "mag", "ior", "power", "len", "flareSpin", "jumpSpin"],
                params: [.14, 1, .29, 1, .39, .15, 1, 1, 1, .5, .5, .5, .32, .53, .6],
                code: n(73)
            },
            t["default"].fragmentShadersLib.blackhole = {
                usePoi3D: !1,
                additiveBlending: !1,
                radius: 3,
                scaleMin: 1,
                scaleMax: 1,
                scalePeriod: 1,
                iterations: 0,
                mapsLabel: ["map"],
                mapsChoices: ["JumpPointEnv.png"],
                maps: [0],
                colorsLabel: ["color1", "color2"],
                colors: ["rgb(128,128,230)", "rgb(76,128,76)"],
                paramsLabel: ["turbulence1", "turbulence2", "turbulence3", "speed", "pitch", "yaw", "roll"],
                params: [.4, .5, .4, .6, .2, .5, .55],
                code: n(74)
            },
            t["default"].fragmentShadersLib.longRangeScanner = {
                usePoi3D: !1,
                additiveBlending: !1,
                radius: 1.5,
                colorsLabel: ["colorD1", "colorD2", "colorL1", "colorL2", "colorC1", "colorC2", "colorBorder", "colorGlow", "colorMap"],
                colors: ["rgb(250,183,62)", "rgb(255,90,0)", "rgb(250,183,62)", "rgb(255,90,0)", "rgb(250,183,62)", "rgb(255,90,0)", "rgb(250,183,62)", "rgb(180,0,0)", "rgb(250,183,62)"],
                paramsLabel: ["alpha", "radiusD", "widthD", "ratioD", "radiusL", "widthL", "ratioL", "radiusC", "widthC", "ratioC", "radiusBorder", "widthBorder", "tickCount", "tickLength", "tickWidth", "glowWidth"],
                params: [1, .64, .07, .59, .51, .22, .32, .36, .08, .41, .8, .1, .872, .1, .17, .38],
                code: n(75)
            },
            t["default"].fragmentShadersLib.ring = {
                usePoi3D: !1,
                orientation: (new e.Quaternion).setFromAxisAngle(new e.Vector3(1,0,0), .5 * Math.PI),
                additiveBlending: !0,
                depthTest: !0,
                radius: 2.5,
                colorsLabel: ["color1", "color2"],
                colors: ["rgb(230,102,0)", "rgb(230,102,26)"],
                paramsLabel: ["radius1", "radius2", "speed", "extraDensity", "borderFading"],
                params: [.6, 1, .75, .01, .2],
                code: n(76)
            }
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform float time;\nvarying vec2 texcoord;\n\nvoid main( void ) \n{\n  gl_FragColor = vec4( 1.0);\n}"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision highp float;\n#endif\n	\nuniform sampler2D map;\nuniform float time;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float flare1;\nuniform float flare2;\nuniform float flare3;\nuniform float flare4;\nuniform float flare5;\nuniform float flare6;		\nuniform float sphere;	\nuniform float texture;	\nuniform float corona;	\nuniform float glow;	\nuniform float alpha;	\nuniform float rotation1;	\nuniform float rotation2;\nuniform int iterations;\nvarying vec2 texcoord;\nfloat freqs[4];\n\n// Noise Settings\n#define NoiseSteps 1\n#define NoiseFrequency 4.0\n\n\n\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\n\nvec4 taylorInvSqrt(vec4 r){ return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise(vec3 v)\n{\n	const vec2  C = vec2(1.0/6.0, 1.0/3.0);\n	const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n \n	// First corner\n	vec3 i  = floor(v + dot(v, C.yyy));\n	vec3 x0 = v - i + dot(i, C.xxx);\n \n	// Other corners\n	vec3 g = step(x0.yzx, x0.xyz);\n	vec3 l = 1.0 - g;\n	vec3 i1 = min(g.xyz, l.zxy);\n	vec3 i2 = max(g.xyz, l.zxy);\n	vec3 x1 = x0 - i1 + C.xxx;\n	vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n	vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n \n	// Permutations\n	i = mod289(i);\n	vec4 p = permute( permute( permute( i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n \n	// Gradients: 7x7 points over a square, mapped onto an octahedron.\n	// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n	float n_ = 0.142857142857; // 1.0/7.0\n	vec3  ns = n_ * D.wyz - D.xzx;\n	vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n \n	vec4 x_ = floor(j * ns.z);\n	vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)\n \n	vec4 x = x_ *ns.x + ns.yyyy;\n	vec4 y = y_ *ns.x + ns.yyyy;\n \n	vec4 h = 1.0 - abs(x) - abs(y);\n	vec4 b0 = vec4(x.xy, y.xy);\n	vec4 b1 = vec4(x.zw, y.zw);\n \n	vec4 s0 = floor(b0) * 2.0 + 1.0;\n	vec4 s1 = floor(b1) * 2.0 + 1.0;\n	vec4 sh = -step(h, vec4(0.0));\n \n	vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;\n	vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;\n \n	vec3 p0 = vec3(a0.xy, h.x);\n	vec3 p1 = vec3(a0.zw, h.y);\n	vec3 p2 = vec3(a1.xy, h.z);\n	vec3 p3 = vec3(a1.zw, h.w);\n \n	//Normalise gradients\n	vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n \n	p0 *= norm.x;\n	p1 *= norm.y;\n	p2 *= norm.z;\n	p3 *= norm.w;\n\n	// Mix final noise value\n	vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n	m = m * m;\n \n	return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n}\n\nfloat Turbulence(vec3 position, float minFreq, float maxFreq, float qWidth)\n{\n	float value = 0.0;\n	float cutoff = clamp(0.5/qWidth, 0.0, maxFreq);\n	float fade;\n	float fOut = minFreq;\n \n	for(int i=NoiseSteps ; i>=0 ; i--)\n	{\n		if(fOut >= 0.5 * cutoff) break;\n		fOut *= 2.0;\n		value += abs(snoise(position * fOut))/fOut;\n	}\n	fade = clamp(2.0 * (cutoff-fOut)/cutoff, 0.0, 1.0);\n	return 1.0 - value - fade * abs(snoise(position * fOut)) / fOut;\n}\n\n\nfloat snoise(vec3 uv, float res)	// by trisomie21\n{\n	const vec3 s = vec3(1e0, 1e2, 1e4);\n	\n	uv *= res;\n	\n	vec3 uv0 = floor(mod(uv, res))*s;\n	vec3 uv1 = floor(mod(uv+vec3(1.), res))*s;\n	\n	vec3 f = fract(uv); f = f*f*(3.0-2.0*f);\n	\n	vec4 v = vec4(uv0.x+uv0.y+uv0.z, uv1.x+uv0.y+uv0.z,\n		      	  uv0.x+uv1.y+uv0.z, uv1.x+uv1.y+uv0.z);\n	\n	vec4 r = fract(sin(v*1e-3)*1e5);\n	float r0 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n	\n	r = fract(sin((v + uv1.z - uv0.z)*1e-3)*1e5);\n	float r1 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n	\n	return mix(r0, r1, f.z)*2.-1.;\n}\n\nvoid main( void )\n{\n	freqs[0] = 0.7;\n	freqs[1] = 0.3;\n	freqs[2] = 0.2;\n	freqs[3] = 0.84;\n\n	float brightness	= freqs[1] * 0.25 + freqs[2] * 0.25;\n	float radius		= 0.24 + brightness * 0.2;\n	float invRadius 	= 1.0/radius;\n	\n	vec3 orange			= color1; \n	vec3 orangeRed		= color2; \n	float time		= time * 0.1;\n	float aspect	= 1.0;\n	vec2 uv			= texcoord;\n	vec2 p 			= -0.5 + uv;\n	p.x *= aspect;\n	\n	float fade		= pow( length( 2.0 * p ), 0.5 );\n	float fVal1		= 1.0 - fade;\n	float fVal2		= 1.0 - fade;\n	\n	float angle		= atan( p.x, p.y )/6.2832;\n	float dist		= length(p)*1.0;\n	float timeflare = time*mix(0.,5.,flare3);\n	vec3 coord		= vec3( angle*floor(flare6*10.), dist, timeflare * 0.1 );\n	\n	float newTime1	= abs( snoise( coord + vec3( 0.0, -timeflare * ( 0.35 + brightness * 0.001), timeflare * 0.015), floor(flare1 * 100.0) * 1.0 ) );\n	float newTime2	= abs( snoise( coord + vec3( 0.0, -timeflare * ( 0.15 + brightness * 0.001), timeflare * 0.015), floor(flare1 * 100.0) * 1.0 ) );	\n	for( int i=1; i<=10; i++ ){\n		if(i>iterations) break;\n		float power = pow( 2.0, float(i + 1) );\n		fVal1 += ( 0.5 / power ) * snoise( coord + vec3( 0.0, -timeflare, timeflare * 0.2 ), ( power * ( 10.0 ) * ( newTime1 + 1.0 ) ) );\n		fVal2 += ( 0.5 / power ) * snoise( coord + vec3( 0.0, -timeflare, timeflare * 0.2 ), ( power * ( 25.0 ) * ( newTime2 + 1.0 ) ) );\n	}\n	\n	float coronafx		= pow( fVal1 * max( 1.1 - fade, 0.0 ), mix(1.2,2.8,flare4)) * 50.0;\n	coronafx				+= pow( fVal2 * max( 1.1 - fade, 0.0 ), mix(1.2,2.8,flare5)) * 50.0;\n	coronafx				*= 1.2 - newTime1;\n	vec3 sphereNormal 	= vec3( 0.0, 0.0, 1.0 );\n	vec3 dir 			= vec3( 0.0 );\n	vec3 center			= vec3( 0.5, 0.5, 1.0 );\n	vec3 starSphere		= vec3( 0.0 );\n	\n	vec2 sp = -1.0 + 2.0 * uv;\n	sp.x *= aspect;\n	sp *= ( 2.0 - brightness );\n  	float r = dot(sp,sp);\n	float f = (1.0-sqrt(abs(1.0-r)))/(r) + brightness * 0.5;\n	if( dist < radius ){\n		coronafx			*= pow( dist * invRadius, 24.0*flare2 );\n  		vec2 newUv;\n 		newUv.x = sp.x*f;\n  		newUv.y = sp.y*f;\n		newUv += vec2( time*0.35 * 5. * (rotation1-0.5), 0.0 );\n		\n		vec3 texSample 	= texture2D( map, newUv ).rgb;\n		float uOff		= ( texSample.g * brightness * 4.5 + time * 5. * (rotation2-0.5) );\n		vec2 starUV		= newUv + vec2( uOff, 0.0 );\n		starSphere		= texture2D( map, starUV ).rgb;\n	}\n	\n	float starGlow	= min( max( 1.0 - dist * ( 1.0 - brightness ), 0.0 ), 1. ) * max(0., .5 - dist) * 2.;\n	//fragColor.rgb	= vec3( r );\n	gl_FragColor.rgb	= vec3( f * ( 0.75 + brightness * 0.3 ) * orange * sphere )  + starSphere * texture + \n							coronafx * orange * corona + starGlow * orangeRed * glow;\n	gl_FragColor.a		= alpha;\n}				\n"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision mediump float;\n#endif\n \nuniform float time;\nuniform vec2 poi;\nuniform vec2 resolution;\n  \nvoid main( void )\n{\n	gl_FragColor = vec4(1.0);\n}"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision mediump float;\n#endif\n \nuniform float time;\nuniform vec2 poi;\nuniform vec2 resolution;\n \nvoid main( void )\n{\n	gl_FragColor = vec4(1.0);\n}"
    }
    , function(e, t) {
        e.exports = "uniform float time;\nvarying vec2 texcoord;\n\nvoid main() {\n	float x = texcoord.x - 0.5;\n	float y = texcoord.y - 0.5;\n	float r = 2.0*sqrt(x*x+y*y);\n	float d;\n	if (r < 1.0) {\n		d = mix(1.0,0.0,r);\n	} else {\n		d = 0.0;\n	}\n	float lum = 1.0;\n	gl_FragColor = vec4(lum*vec3(0.465, 0.203, 0.063), d);\n}"
    }
    , function(e, t) {
        e.exports = "uniform float time;\nvarying vec2 texcoord;\nvarying vec4 wpos;\nuniform vec3 wpoi3D;\nuniform vec3 wcenter;\n\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float alpha;\nuniform float atmosphere1;\nuniform float atmosphere2;\nuniform float atmosphere3;\n\n#define Radius 2.5\n\nfloat nRadius = 1./Radius;\n\n/////////////////////////////////////////////////////////\n\n// parameters of the light and possible values\nvec3 u_lightAmbientIntensity = vec3(0.0, 0.0, 0.0);\nvec3 u_lightDiffuseIntensity = vec3(1.0, 1.0, 1.0);\nvec3 u_lightSpecularIntensity = vec3(1.0, 1.0, 1.0);\n\n// parameters of the material and possible values\nvec3 u_matAmbientReflectance = vec3(1.0, 1.0, 1.0);\nvec3 u_matDiffuseReflectance = vec3(1.0, 1.0, 1.0);\nvec3 u_matSpecularReflectance = vec3(1.0, 1.0, 1.0);\nfloat u_matShininess = 64.0;\n\n/////////////////////////////////////////////////////////\n\n// returns intensity of reflected ambient lighting\nvec3 ambientLighting()\n{\n   return u_matAmbientReflectance * u_lightAmbientIntensity;\n}\n\n// returns intensity of diffuse reflection\nvec3 diffuseLighting(vec3 N, vec3 L)\n{\n   // calculation as for Lambertian reflection\n   float diffuseTerm = clamp(dot(N, L), 0.0, 1.0) ;\n   return u_matDiffuseReflectance * u_lightDiffuseIntensity * diffuseTerm;\n}\n\n// returns intensity of specular reflection\nvec3 specularLighting(vec3 N, vec3 L, vec3 V)\n{\n   float specularTerm = 0.0;\n\n   // calculate specular reflection only if\n   // the surface is oriented to the light source\n   if(dot(N, L) > 0.0)\n   {\n      // half vector\n      vec3 H = normalize(L + V);\n      specularTerm = pow(dot(N, H), u_matShininess);\n   }\n   return u_matSpecularReflectance * u_lightSpecularIntensity * specularTerm;\n}\n\nvoid main() {\n	float x = 2.0 * (texcoord.x - 0.5);\n	float y = 2.0 * (texcoord.y - 0.5);\n	float r = sqrt(x*x+y*y);\n	float d;\n	\n	vec3 C = wcenter.xyz;\n	vec3 P = wpos.xyz;\n	vec3 CP = P - C;\n	float R = sqrt(CP.x * CP.x + CP.y * CP.y);\n	\n	if (r > 0.0) {\n		float dC2 = dot(C,C);\n		float dP2 = dot(P,P);\n		float dPC = dot(P,C);\n		float sr = R * nRadius/r;\n		float a = dP2;\n		float b = -2.0*dPC;\n		float c = dC2 - sr*sr;\n		float det2 = b*b - 4.0*a*c;\n		//if (det2 >= 0.0) {\n		\n			float det = det2 >= 0.? sqrt(det2) : 0.;\n			float kk = 0.5*(-b - det)/a;\n			vec3 Q = kk*P;\n			vec3 CQ = Q-C;\n			\n			float rr = sqrt(abs(0.25*b*b/a - dC2))*r/R;\n			\n			// normalize vectors after interpolation\n			vec3 L = normalize(wpoi3D.xyz-Q);\n			vec3 V = normalize(-Q);\n			vec3 N = normalize(CQ);\n			\n			// get Blinn-Phong reflectance components\n			vec3 Iamb = ambientLighting();\n			vec3 Idif = diffuseLighting(N, L);\n			vec3 Ispe = specularLighting(N, L, V);\n			\n			//float zA = sqrt(1.-x*x-y*y);\n			float zA = Q.z * r / R;\n			\n			// combination of all components and diffuse color of the object\n			\n			float k = mix(15., 9., atmosphere1);\n			float atmHeight = 1.0-nRadius;\n			float iA = 50.0 * atmosphere2 * zA * exp(-atmHeight*k) * exp(-(rr - nRadius)*k);\n			float iLight = max(0., dot(N,L));\n			float iAp = pow(max(0.,1.0-5.*min(atmHeight,abs(rr-nRadius))), mix(8., 1., atmosphere3));\n	\n			gl_FragColor = vec4( (rr <= nRadius ? \n				(iAp * color1 + iLight * color2) : \n				(iA * color1)\n				), alpha);\n\n			//gl_FragColor = vec4(1.,0.,0.,1.);\n		/*} else {\n			gl_FragColor = vec4(0.,0.,0.,0.);\n		}*/\n	} else {\n		gl_FragColor = vec4(0.,0.,0.,0.);\n	}\n\n}				\n\n"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision highp float;\n#endif\n	\n\nuniform sampler2D map;\nuniform float time;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float flare1;\nuniform float flare2;\nuniform float flare3;\nuniform float flare4;\nuniform float flare5;\nuniform float flare6;\nuniform float texture;	\nuniform float corona;	\nuniform float alpha;	\nuniform float mag;\nuniform float ior;\nuniform float power;\nuniform float len;\nuniform float flareSpin;		\nuniform float jumpSpin;	\nuniform int iterations;\nvarying vec2 texcoord;\nfloat freqs[4];\n\n// Noise Settings\n#define NoiseSteps 1\n#define NoiseFrequency 4.0\n\n\n\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\n\nvec4 taylorInvSqrt(vec4 r){ return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise(vec3 v)\n{\n	const vec2  C = vec2(1.0/6.0, 1.0/3.0);\n	const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n \n	// First corner\n	vec3 i  = floor(v + dot(v, C.yyy));\n	vec3 x0 = v - i + dot(i, C.xxx);\n \n	// Other corners\n	vec3 g = step(x0.yzx, x0.xyz);\n	vec3 l = 1.0 - g;\n	vec3 i1 = min(g.xyz, l.zxy);\n	vec3 i2 = max(g.xyz, l.zxy);\n	vec3 x1 = x0 - i1 + C.xxx;\n	vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n	vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n \n	// Permutations\n	i = mod289(i);\n	vec4 p = permute( permute( permute( i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n \n	// Gradients: 7x7 points over a square, mapped onto an octahedron.\n	// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n	float n_ = 0.142857142857; // 1.0/7.0\n	vec3  ns = n_ * D.wyz - D.xzx;\n	vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n \n	vec4 x_ = floor(j * ns.z);\n	vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)\n \n	vec4 x = x_ *ns.x + ns.yyyy;\n	vec4 y = y_ *ns.x + ns.yyyy;\n \n	vec4 h = 1.0 - abs(x) - abs(y);\n	vec4 b0 = vec4(x.xy, y.xy);\n	vec4 b1 = vec4(x.zw, y.zw);\n \n	vec4 s0 = floor(b0) * 2.0 + 1.0;\n	vec4 s1 = floor(b1) * 2.0 + 1.0;\n	vec4 sh = -step(h, vec4(0.0));\n \n	vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;\n	vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;\n \n	vec3 p0 = vec3(a0.xy, h.x);\n	vec3 p1 = vec3(a0.zw, h.y);\n	vec3 p2 = vec3(a1.xy, h.z);\n	vec3 p3 = vec3(a1.zw, h.w);\n \n	//Normalise gradients\n	vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n \n	p0 *= norm.x;\n	p1 *= norm.y;\n	p2 *= norm.z;\n	p3 *= norm.w;\n\n	// Mix final noise value\n	vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n	m = m * m;\n \n	return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n}\n\nfloat Turbulence(vec3 position, float minFreq, float maxFreq, float qWidth)\n{\n	float value = 0.0;\n	float cutoff = clamp(0.5/qWidth, 0.0, maxFreq);\n	float fade;\n	float fOut = minFreq;\n \n	for(int i=NoiseSteps ; i>=0 ; i--)\n	{\n		if(fOut >= 0.5 * cutoff) break;\n		fOut *= 2.0;\n		value += abs(snoise(position * fOut))/fOut;\n	}\n	fade = clamp(2.0 * (cutoff-fOut)/cutoff, 0.0, 1.0);\n	return 1.0 - value - fade * abs(snoise(position * fOut)) / fOut;\n}\n\n\nfloat snoise(vec3 uv, float res)	// by trisomie21\n{\n	const vec3 s = vec3(1e0, 1e2, 1e4);\n	\n	uv *= res;\n	\n	vec3 uv0 = floor(mod(uv, res))*s;\n	vec3 uv1 = floor(mod(uv+vec3(1.), res))*s;\n	\n	vec3 f = fract(uv); f = f*f*(3.0-2.0*f);\n	\n	vec4 v = vec4(uv0.x+uv0.y+uv0.z, uv1.x+uv0.y+uv0.z,\n		      	  uv0.x+uv1.y+uv0.z, uv1.x+uv1.y+uv0.z);\n	\n	vec4 r = fract(sin(v*1e-3)*1e5);\n	float r0 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n	\n	r = fract(sin((v + uv1.z - uv0.z)*1e-3)*1e5);\n	float r1 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n	\n	return mix(r0, r1, f.z)*2.-1.;\n}\n\nvoid main( void )\n{\n	float PI = 3.14159265358979323846264;\n\n	freqs[0] = 0.7;\n	freqs[1] = 0.3;\n	freqs[2] = 0.2;\n	freqs[3] = 0.84;\n\n	float brightness	= freqs[1] * 0.25 + freqs[2] * 0.25;\n	float radius		= 0.24 + brightness * 0.2;\n	float invRadius 	= 1.0/radius;\n	\n	float time		= time * 0.1;\n	float aspect	= 1.0;\n	vec2 uv			= texcoord;\n	vec2 p 			= -0.5 + uv;\n	p.x *= aspect;\n	\n	float fade		= pow( length( 2.0 * p ), 0.5 );\n	float fVal1		= 1.0 - fade;\n	float fVal2		= 1.0 - fade;\n	\n	float angle		= time * mix(-PI, PI, flareSpin) + atan( p.x, p.y )/6.2832;\n	float dist		= length(p)*1.0;\n	float timeflare = time*mix(0.,5.,flare3);\n	vec3 coord		= vec3( angle*floor(flare6*10.), dist, timeflare * 0.1 );\n	\n	float newTime1	= abs( snoise( coord + vec3( 0.0, -timeflare * ( 0.35 + brightness * 0.001), timeflare * 0.015), floor(flare1 * 100.0) * 1.0 ) );\n	float newTime2	= abs( snoise( coord + vec3( 0.0, -timeflare * ( 0.15 + brightness * 0.001), timeflare * 0.015), floor(flare1 * 100.0) * 1.0 ) );	\n	for( int i=1; i<=10; i++ ){\n		if(i>iterations) break;\n		float power = pow( 2.0, float(i + 1) );\n		fVal1 += ( 0.5 / power ) * snoise( coord + vec3( 0.0, -timeflare, timeflare * 0.2 ), ( power * ( 10.0 ) * ( newTime1 + 1.0 ) ) );\n		fVal2 += ( 0.5 / power ) * snoise( coord + vec3( 0.0, -timeflare, timeflare * 0.2 ), ( power * ( 25.0 ) * ( newTime2 + 1.0 ) ) );\n	}\n	\n	float coronafx		= pow( fVal1 * max( 1.1 - fade, 0.0 ), mix(1.2,2.8,flare4)) * 50.0;\n	coronafx				+= pow( fVal2 * max( 1.1 - fade, 0.0 ), mix(1.2,2.8,flare5)) * 50.0;\n	coronafx				*= 1.2 - newTime1;\n	vec3 sphereNormal 	= vec3( 0.0, 0.0, 1.0 );\n	vec3 dir 			= vec3( 0.0 );\n	vec3 center			= vec3( 0.5, 0.5, 1.0 );\n	vec3 starSphere		= vec3( 0.0 );\n	\n	vec2 sp = -1.0 + 2.0 * uv;\n	sp.x *= aspect;\n	sp *= ( 2.0 - brightness );\n  	float r = dot(sp,sp);\n	float f = (1.0-sqrt(abs(1.0-r)))/(r) + brightness * 0.5;\n	if( dist < radius ){\n		coronafx			*= pow( dist * invRadius, 24.0*flare2 );\n\n	    vec2 p = uv - vec2(0.5,0.5);\n	    p /= mix(0.4, 1.0, mag);\n	    vec3 normal = normalize(vec3(normalize(p),pow(length(p) * mix(1.0,80.0,len), mix(0.1,2.0,power))));		\n	    vec2 newPos = uv + refract(vec3(0.,0.0,1.), normal, mix(0.0001, 2.0, ior)).xy*1.;\n\n	    vec4 vd = viewMatrix * vec4(0.,0.,1.,1.);\n\n		starSphere		= color2*texture2D( map, newPos + vec2(time * mix(-2., 2., jumpSpin) + atan(vd.z,vd.x)/PI, atan(vd.z,vd.y)/PI) ).rgb;\n	}\n	\n	//fragColor.rgb	= vec3( r );\n\n	vec3 col = starSphere * texture * min(10.0*(1.0-dist),1.) + coronafx * color1 * corona;\n\n	gl_FragColor.rgb	= dist < radius ? col : 1.*col;\n	float dr = dist/radius;\n	float ma = 2.0*(1.0 - alpha);\n	float i = ma > 1.0? 2.0-ma : 1.0;\n	gl_FragColor.a		= i * (dr < ma? pow(dr/ma, 2.0) : 1.0) * (dist < radius ? 2.0 : max(0.,length(col)*length(col)-0.1));\n}				\n"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision highp float;\n#endif\n\n\nuniform float time;\n\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float turbulence1;\nuniform float turbulence2;\nuniform float turbulence3;\nuniform float speed;\nuniform float pitch;\nuniform float yaw;\nuniform float roll;\nuniform vec3 camZ;\nvarying vec2 texcoord;\n\nfloat tweak(float vmin, float vmax, float k) {\n  //float r = k < 0. ? k < -1.5 ? mouse.y : mouse.x : k;\n  return mix(vmin,vmax,k);\n}\n\nvec4 smoke(vec2 uv, vec3 c1, vec3 c2)\n{\n	uv.x += -uv.y;\n	float d = 1.-uv.y;\n	float a = uv.x*360.;\n	float persistence = mix(.5, .8, turbulence2);\n	float scale = 1./floor(mix(1.,5.,turbulence1));\n	float v = 0.0;\n	float p = 1.;\n\n	uv *= vec2((1./(turbulence3>0.75 ? 6. : floor(mix(1.,5.,turbulence3))))*tweak(16.,60.,0.493),3.14159);\n	float ks = mix(-5.,5.,speed);\n	\n	for (int i=5; i>=0; --i)\n	{\n		v += (sin(uv.x)+cos(uv.y))*p;\n		uv += sin(uv.yx+1.*vec2(ks*time, 0.9*ks*time));\n		p *= persistence;\n		uv /= scale;\n	}\n	\n	float w = pow(1.-tan(v*0.3)*.05,12.);\n	\n	vec4 col = vec4( mix(c2,c1,w)*(d+.45), 1.0 ) *  (d>.91?1.-(d-.91)*30.:1.);\n	if(d< -0.4) col*=0.;\n	\n	return col;\n}\n\nvec4 ringV(vec2 uv, vec3 c1, vec3 c2) {\n	vec4 uvm = vec4(uv-vec2(0.5,0.5), 1.,1.);\n	\n	vec4 cuv = uvm ;\n	\n	float x = cuv.x;//(cuv.x - 0.5);\n	float y = cuv.y;//(cuv.y - 0.5);\n		\n	\n	float r = 2.0*sqrt(x*x+y*y);\n	float angle = degrees(atan(-x,-y)) + 180.;\n	float a = radians(angle);\n	float k = angle/360.0;\n	vec2 q = vec2(0.,1.);\n	float d = q.x + r / q.y;\n	vec2 puv = vec2(k, d);\n	vec4 sm = smoke(puv, c1,vec3(0.));\n	vec4 sm2 = smoke(puv+vec2(0.3,0.4), c2,vec3(0.));\n	\n	return sm+sm2;\n	\n}\n\n\nvec2 obj0(in vec3 p){\n  return vec2(p.y +  min(0.5,1./(length(p*vec3(10.,.1,10.))*.9))-0. ,0.);\n  return vec2(p.y,0);\n}\n\nvec3 obj0_c(in vec3 p){\n return(ringV(    (vec2(0.5)+p.xz* .22 ), color1, color2).rgb);\n}\n\n\n\nvec2 inObj(in vec3 p){\n  return obj0(p);\n}\n\n\nvoid main(void){\n	\n  float yawr = radians(mix(0.,360.,yaw));\n  float pitchr = radians(mix(-90.,90.,pitch));\n  float rollr = radians(mix(-90.,90.,roll));	\n	\n  vec2 vPos=-1.0+2.0*texcoord;\n  vPos = vec2(vPos.x*cos(rollr)-vPos.y*sin(rollr),vPos.y*cos(rollr)+vPos.x*sin(rollr));\n	\n  //Camera animation\n  vec3 vuv=vec3(0,1,0);//Change camere up vector here\n  vec3 vrp=vec3(0,0.,0); //Change camere view here\n\n  float dist = 5.; \n  \n  //vec3 prp=dist*vec3(sin(yawr),sin(-pitchr),cos(yawr)); //Change camera path position here\n  vec3 prp=dist*vec3(-camZ.x,camZ.y,-camZ.z); //Change camera path position here\n  const vec3 e=vec3(0.1,0,0);\n  //Camera setup\n  vec3 vpn=normalize(vrp-prp);\n  vec3 u=normalize(cross(vuv,vpn));\n  vec3 v=cross(vpn,u);\n  vec3 vcv=(prp+vpn);\n  vec3 scrCoord=vcv+vPos.x*u+vPos.y*v;\n  vec3 scp=normalize(scrCoord-prp);\n\n  //Raymarching\n  const float maxd=10.0; //Max depth\n\n  vec2 s=vec2(0.1,0.0);\n  vec3 c,p,n;\n\n  float f=1.0;\n  for(float i=0.;i<100.;i+=1.0){\n    if (abs(s.x)<.01||f>maxd) break;\n    f+=s.x;\n    p=prp+scp*f;\n    p.y= prp.y < 0. ? -p.y : p.y;\n    s=inObj(p);\n  }\n  \n  vec4 col = vec4(0.);\n  if (f<maxd){\n    c = obj0_c(p);\n    n=normalize(vec3(s.x-inObj(p-e.xyy).x, s.x-inObj(p-e.yxy).x, s.x-inObj(p-e.yyx).x));\n    float b=dot(n,normalize(prp-p));\n    col=vec4((mix(b,1.,0.8)*c),1.0);\n    col.a = pow(max(max(col.r,col.g),col.b),1.5);\n  }\n  else col=vec4(0.,0.,0.,0.); //background color\n	\n  gl_FragColor = col;	\n}"
    }
    , function(e, t) {
        e.exports = "//uniform sampler2D map;\nuniform float time;\nuniform vec3 colorD1;\nuniform vec3 colorD2;\nuniform vec3 colorL1;\nuniform vec3 colorL2;\nuniform vec3 colorC1;\nuniform vec3 colorC2;\nuniform vec3 colorBorder;\nuniform vec3 colorGlow;\nuniform vec3 colorMap;\nuniform vec2 resolution;\n\nuniform float alpha;\nuniform float radiusD;\nuniform float widthD;\nuniform float ratioD;\nuniform float radiusL;\nuniform float widthL;\nuniform float ratioL;\nuniform float radiusC;\nuniform float widthC;\nuniform float ratioC;\nuniform float radiusBorder;\nuniform float widthBorder;\nuniform float tickCount;\nuniform float tickLength;\nuniform float tickWidth;\nuniform float glowWidth;\n\nvarying vec2 texcoord;\n\nfloat rand(vec2 co){  \n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat noise(in vec2 p)\n{\n    vec2 i = floor(p);\n     vec2 f = fract(p);\n     f *= f * (3.0-2.0*f);\n\n    return mix(mix(rand(i + vec2(0.,0.)), rand(i + vec2(1.,0.)),f.x),\n               mix(rand(i + vec2(0.,1.)), rand(i + vec2(1.,1.)),f.x),\n               f.y);\n}\n\nfloat wf(vec2 p)\n{\n     return noise(p*0.4)*.35 + noise(p*1.)*.25 + noise(p*2.)*.225;\n}\n\nfloat incandescence(float v, float a, float b, float m) {\n	return mix(a+b*noise(vec2(m*time,v)),1.0, alpha * 0.85);\n}\n\nvec4 waves( vec2 uv ) \n{\n\n	vec2 p = uv * 2.0 - 1.0;\n	p.x *= resolution.x/resolution.y;\n	vec3 col = vec3( 0.0 );\n	for( int i=0; i < 3; ++i )\n	{\n		float t = abs( 1.0 / (sin(p.y + wf( vec2(p.x*30.,p.y) + time * (float(i)+.5) )) * (50.0 + float(i)*3.0)) * 0.7 );\n		col +=  t * vec3( 0.99, 0.95, 0.8 ) * 1.0;\n	}\n	\n	return vec4( col, min(1., col.r+col.g+col.b));\n\n}\n\nvec4 arcHue(vec4 col, float r, float angle, vec3 c1, vec3 c2, float radius, float w, float ratio, vec3 gc, float gw) {\n	float width = w * 0.2;\n	return (abs(r-radius) < width && angle < ratio * 360.) ?\n				vec4(mix(c1,c2,angle/(ratio*360.)),col.a)+0.4*vec4(c1*min(1.,col.r),0.0)\n				: col;\n}\n\nvec4 arc(float r, float angle, vec3 c1, vec3 c2, float radius, float w, float ratio, vec3 gc, float gw) {\n	float width = w * 0.2;\n	vec4 col = (abs(r-radius) < width && angle < ratio * 360.) ?\n				vec4(mix(c1,c2,angle/(ratio*360.)), mix(0., 1., 1.4*pow(1.0-abs(radius-r)/width,0.5))) \n				//+ vec4(vec3(incandescence(.1,-.2,.4,radius*15.)),0.)\n				:\n				vec4(0.,0.,0.,0.);\n\n	if(col.a < 0.5 && abs(r-radius) < width + gw*0.5 && (angle < 1.3 * ratio * 360. || angle > 350.)) {\n		float gp = ( angle > 350.0 ? (1.0-(360.- angle)/10.)  :\n			  angle > ratio * 360. ? (1.0-(angle-ratio*360.)/(.3 * ratio * 360.)) : 1.0)*\n			0.5*pow(1.0-abs(r-radius)/(width + gw*0.5),1.);\n		col = mix(col, vec4(gc, gp), 1.0-col.a/(col.a+0.5));\n	}\n\n	col *= vec4(vec3(incandescence(.1,.5,1.,radius*15.)),1.);	\n\n	return col; \n}\n\nvec4 gradedCircle(float r, float angle, vec3 c, float radius, float w, \n					float tickCount, float tickL, float tickW, vec3 gc, float gw) {\n	float width = w * 0.2;\n	float tlength = tickL * 0.2;\n	vec4 col = vec4(0., 0., 0., 0.);\n\n	col += (abs(r-radius) < width) ?\n			vec4(c, mix(0., 1., 1.4*pow(1.0-abs(radius-r)/width,0.5)))\n			//+ vec4(vec3(incandescence(.1,-.2,.4,radius*15.)),0.)\n			:\n			vec4(0.,0.,0.,0.); \n\n	col = max(col,\n		(r < radius && r > radius - width - tlength && mod(angle+360., 360./floor(1.0/((1.0-tickCount)*0.25+0.0000001))) < tickW * 5.0)  ?\n			vec4(c, max(0.,pow(  1.0-abs(mod(angle+360., 360./floor(1.0/((1.0-tickCount)*0.25+0.0000001))) - tickW * 2.5), 2.) )) :\n			vec4(0.,0.,0.,0.)); \n\n	if(col.a < 0.5 && abs(r-radius) < width + gw*0.5) {\n		float gp = 0.5*pow(1.0-abs(r-radius)/(width + gw*0.5),1.);\n		col = mix(col, vec4(gc, gp), 1.0-col.a/(col.a+0.5));\n	}\n\n	col *= vec4(vec3(incandescence(.1,.5,1.,radius*15.)),1.);	\n\n	return col;\n}\n\n\n\nvoid main() {\n	float x = texcoord.x - 0.5;\n	float y = texcoord.y - 0.5;\n	float r = 2.0*sqrt(x*x+y*y);\n	float angle = degrees(atan(-x,-y)) + 180.;\n\n	float d;\n	if (r < 1.0) {\n		d = mix(1.0,0.0,r);\n	} else {\n		d = 0.0;\n	}\n	vec4 col = vec4(0.,0.,0.,0.);\n	float wc = mix(0.0,0.65,d);\n	vec4 wp = r > (radiusBorder-glowWidth*0.45)? vec4(0.0,0.0,0.0,0.0) : waves(vec2(angle/360., wc))*vec4(1.,0.,0.,1.);\n\n	col = max(col, arc(r, angle, colorD1, colorD2, radiusD, widthD, ratioD, colorGlow, glowWidth));\n	col = max(col, arc(r, angle, colorL1, colorL2, radiusL, widthL, ratioL, colorGlow, glowWidth));\n	col = max(col,arc(r, angle, colorC1, colorC2, radiusC, widthC, ratioC, colorGlow, glowWidth));\n\n	col = max(col,gradedCircle(r, angle, colorBorder, radiusBorder, widthBorder, \n						tickCount, tickLength, tickWidth, colorGlow, glowWidth));\n\n	col.a = min(1.0, col.a);\n	wp.a = min(1.0, wp.a);\n	col = vec4(mix(wp.rgb, col.rgb*1.3, 0.75), col.a);\n\n	col = arcHue(col, r, angle, colorD1, colorD2, radiusD, widthD, ratioD, colorGlow, glowWidth);\n	col = arcHue(col, r, angle, colorL1, colorL2, radiusL, widthL, ratioL, colorGlow, glowWidth);\n	col = arcHue(col, r, angle, colorC1, colorC2, radiusC, widthC, ratioC, colorGlow, glowWidth);\n\n	gl_FragColor = vec4(col.rgb, col.a * alpha);\n\n	//vec4 tp = texture2D( map, texcoord.xy ).rgba;\n	//tp.rgb *= colorMap;\n	//tp.a = min(1., tp.r+tp.g+tp.b);\n	//vec4 finalColor = mix(col,tp,tp.a);\n	//gl_FragColor = vec4(finalColor.rgb, finalColor.a * alpha);\n}"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float radius1;\nuniform float radius2;\nuniform float speed;\nuniform float extraDensity;\nuniform float borderFading;\n\nvarying vec2 texcoord;\n\nfloat size = 5.;\nfloat density = 0.6;\n\nfloat rand(vec2 co){\n	\n	return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat noisemap(vec2 uv, float bias, float sizeFactor, float densityFactor, float speedFactor, float stretch) {\n	sizeFactor*= (1.+floor(extraDensity*10.));\n	vec2 vf = vec2(uv.x + uv.y * bias + time * speedFactor * (0.5-speed), uv.y * stretch)*(sizeFactor * 2. * size);\n	vec2 v = vec2(floor(vf.x), floor(vf.y));\n	vec2 f = vf-v;	\n	float r = 2.0*distance(f, vec2(0.5, 0.5));\n	float d = 1.0 - min(r, 1.0);\n	float p = rand(fract(v));\n	p = p < densityFactor * 0.6 ? d*(1.0 - 2.0 * abs(uv.y - 0.5)) : 0.0;\n	return p;\n}\n\nvec4 trailmap(vec2 uv, vec3 c1, vec3 c2) {\n	vec3 col = vec3(0.);\n	col += noisemap(uv, 1., .1, 0.25, .12, 15.) * c1;\n	col += noisemap(uv, -2., .2, 0.25, .15, 17.) * c2;\n	col += noisemap(uv, 3., .3, 0.25, .20, 9.) * c1;\n	col += noisemap(uv, -1.5, .4, 0.25, .25, 12.) * c2;\n	col += noisemap(uv, 2.5, .5, 0.25, .28, 20.) * c1;\n	col += noisemap(uv, -3.5, .6, 0.25, .37, 22.) * c2;\n	col += noisemap(uv, 1.1, .7, 0.25, .48, 15.) * c1;\n	col += noisemap(uv, -2.1, .8, 0.25, .59, 9.) * c2;\n	return vec4(col, 1.0);\n}\n\nvec4 ring(vec2 uv, float r1, float r2, vec3 c1, vec3 c2) {\n\n	float x = (uv.x - 0.5);\n	float y = (uv.y - 0.5);\n	float r = 2.0*sqrt(x*x+y*y);\n	float angle = degrees(atan(-x,-y)) + 180.;\n\n	float d = r < 1.0 ? mix(0.0,1.0,r) : 0.0;\n	\n	vec2 puv = vec2(angle / 360., d); \n	\n	vec4 tm = trailmap(puv, c1,c2);\n	float f =pow(smoothstep(r1,r2,r),mix(0.01,3.,borderFading));\n	\n	return tm * f;\n	\n}\n\nvoid main( void ) {\n\n	vec2 uv = texcoord;\n\n	\n	vec4 obj  = ring(uv, radius1, radius2, color1, color2);\n	\n	gl_FragColor = obj;\n}\n"
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(78)
              , a = n(86)
              , s = n(87)
              , l = n(63)
              , c = n(32)
              , u = n(30)
              , h = n(90)
              , d = n(52)
              , f = function(t) {
                function n(n, i, r, o, s, l, c) {
                    t.call(this),
                    this.controlAPI = n,
                    this.renderer = i,
                    this.scene = r,
                    this.camera = o,
                    this.width = s,
                    this.height = l,
                    this.resourcePath = c,
                    this.asteriodsPrefabs = [null, null, null],
                    this.allPrefabs = [],
                    this.timeAnimatedMaterials = [],
                    this.arrowMaterial = null,
                    this.started = !1,
                    this.sequentialLoading = new Promise(function(e, t) {
                        return e(!0)
                    }
                    ),
                    this.loadedTextures = {},
                    this.loadedObjects = {},
                    this.starSystems = {},
                    this.starSystemsRoot = new e.Group,
                    this.isReady = !1,
                    this.starSystemsRoot.name = "StarSystems",
                    r.add(this.starSystemsRoot),
                    this.heatmap = new a["default"](n,s,l,this.camera,this.renderer)
                }
                return i(n, t),
                n.prototype.baseLoadObject = function(e) {
                    var t = this;
                    return u["default"].loadObject(e).then(function(e) {
                        return t.allPrefabs.push(e),
                        e
                    })
                }
                ,
                n.prototype.preload = function() {
                    var t = this
                      , n = function(t) {
                        t && (t.minFilter = e.LinearFilter);
                        var n = new e.SpriteMaterial({
                            map: t,
                            color: new e.Color("white")
                        });
                        return n.blending = e.AdditiveBlending,
                        n.depthTest = !1,
                        n.depthWrite = !1,
                        n
                    };
                    return Promise.all([Promise.all([this.baseLoadObject(this.resourcePath + "/models/JumpHead.dae"), this.baseLoadObject(this.resourcePath + "/models/JumpTail.dae")]).then(function(e) {
                        var n = e[0]
                          , i = e[1]
                          , r = c["default"].getMaterialStartingWith(n.model, "Jump");
                        for (var o in r) {
                            var a = s["default"].makeJumpPointMaterial({
                                map: r[o].map
                            });
                            c["default"].replaceMaterial(n.model, o, a),
                            a.name = o,
                            t.timeAnimatedMaterials.push(a)
                        }
                        r = c["default"].getMaterialStartingWith(i.model, "Jump");
                        for (var o in r) {
                            var a = s["default"].makeJumpPointMaterial({
                                map: r[o].map
                            });
                            c["default"].replaceMaterial(i.model, o, a),
                            a.name = o,
                            t.timeAnimatedMaterials.push(a)
                        }
                        t.jumpPointPrefabHead = n,
                        t.jumpPointPrefabTail = i
                    }), this.baseLoadObject(this.resourcePath + "/models/Blackhole.dae").then(function(e) {
                        return t.blackholePrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/SunGodRays.dae").then(function(e) {
                        d["default"].setDepthWriteFalse(e.model),
                        t.sunPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/Planet_Blue.dae").then(function(e) {
                        return t.planetBluePrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/Planet_Green.dae").then(function(e) {
                        return t.planetGreenPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/Planet_Brown.dae").then(function(e) {
                        return t.planetBrownPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/Planet_Gas.dae").then(function(e) {
                        return t.planetGasPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/SpaceStation.dae").then(function(e) {
                        return t.spaceStationPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/LandingZone.dae").then(function(e) {
                        return t.landingZone = new h["default"](e)
                    }), this.baseLoadObject(this.resourcePath + "/models/AsteroidsFRONT.dae").then(function(e) {
                        return t.asteriodsPrefabs[0] = e
                    }), this.baseLoadObject(this.resourcePath + "/models/AsteroidsMIDDLE.dae").then(function(e) {
                        return t.asteriodsPrefabs[1] = e
                    }), this.baseLoadObject(this.resourcePath + "/models/AsteroidsEND.dae").then(function(e) {
                        return t.asteriodsPrefabs[2] = e
                    }), this.baseLoadObject(this.resourcePath + "/models/AsteroidsFAR.dae").then(function(e) {
                        return t.asteriodsFarPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/AsteroidField.dae").then(function(e) {
                        return t.asteriodFieldPrefab = e
                    }), this.baseLoadObject(this.resourcePath + "/models/HoverGizmo.dae").then(function(e) {
                        return t.hoverGizmo = e
                    }), this.baseLoadObject(this.resourcePath + "/models/PlanetRing.dae").then(function(e) {
                        return t.planetRingPrefab = e
                    }), d["default"].loadTexture(this.resourcePath + "/sourceimages/Chevrons32x32.png").then(function(e) {
                        return t.arrowMaterial = n(e)
                    }), l["default"].loadTextures(this.resourcePath)]).then(function(e) {
                        t.isReady = !0
                    })["catch"](function(e) {
                        return console.error(e.stack),
                        null
                    })
                }
                ,
                n.prototype.start = function() {
                    this.started = !0
                }
                ,
                n.prototype.lateUpdate = function(e, t) {
                    if (this.started) {
                        for (var n in this.starSystems) {
                            var i = this.starSystems[n];
                            i.update(this.camera, e, t)
                        }
                        if (this.timeAnimatedMaterials)
                            for (var r = 0, o = this.timeAnimatedMaterials; r < o.length; r++) {
                                var a = o[r];
                                a.uniforms.time.value = -e
                            }
                    }
                }
                ,
                n.prototype.onWindowResize = function(e, t) {
                    for (var n = 0, i = this.allPrefabs; n < i.length; n++) {
                        var r = i[n];
                        c["default"].updateMaterialsResolution(r.model, e, t)
                    }
                    this.heatmap.resize(e, t)
                }
                ,
                n.prototype.addToGUI = function(e, t) {
                    var n = e.addFolder("System View");
                    this.heatmap.addToGUI(n);
                    for (var i in this.starSystems) {
                        var r = this.starSystems[i];
                        r.isSetToDestroy || r.addToGUI(n, t)
                    }
                }
                ,
                n.prototype.showRouting = function(e) {
                    for (var t in this.starSystems) {
                        var n = this.starSystems[t];
                        n.showRouting(e)
                    }
                }
                ,
                n.prototype.makeStarSystem = function(e) {
                    var t = new o["default"](this,e,this.camera,this.heatmap);
                    return this.starSystems[t.obj3d.uuid] = t,
                    t
                }
                ,
                n.prototype.destroyStarSystem = function(e) {
                    e.dispose(),
                    delete this.starSystems[e.obj3d.uuid]
                }
                ,
                n.prototype.loadTexture = function(e) {
                    return this.loadedTextures[e] ? this.loadedTextures[e] : this.loadedTextures[e] = this.sequentialLoading = this.sequentialLoading.then(function() {
                        return d["default"].loadTexture(e)
                    })
                }
                ,
                n.prototype.loadObject = function(e) {
                    var t = this;
                    return this.loadedObjects[e] ? this.loadedObjects[e] : this.loadedObjects[e] = this.sequentialLoading = this.sequentialLoading.then(function() {
                        return t.baseLoadObject(e)
                    })
                }
                ,
                n.prototype.translateWorld = function(e) {
                    for (var t in this.starSystems)
                        this.starSystems[t].translateWorld(e)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = f
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(79)
              , r = n(84)
              , o = n(56)
              , a = n(49)
              , s = n(85)
              , l = n(45)
              , c = n(46)
              , u = n(61)
              , h = n(58)
              , d = n(26)
              , f = function() {
                function t(t, n, r, l) {
                    var h = this;
                    this.manager = t,
                    this.mainStar = n,
                    this.camera = r,
                    this.heatmap = l,
                    this.planetSizeMin = 1 / 0,
                    this.planetSizeMax = -(1 / 0),
                    this.bodiesById = {},
                    this.bodiesByCode = {},
                    this.bodyHovered = null,
                    this.bodyHoveredSticky = !1,
                    this.routesByUUID = {},
                    this.planetCount = 0,
                    this.timer = new o["default"],
                    this.orbitalGrid = null,
                    this.celestialBodyGrid = null,
                    this.isSetToDestroy = !1,
                    this.maxDistance = 1 / 0,
                    this.initConfig = {
                        lightColor: "#ffffff",
                        starfield: {
                            radius: 3,
                            count: 200,
                            sizeMin: 1,
                            sizeMax: 1,
                            color1: "rgb(128,128,128)",
                            color2: "rgb(100,100,100)"
                        },
                        planetsSize: {
                            min: .03,
                            max: .03,
                            kFactor: 1
                        }
                    },
                    this.presenceRatio = 0,
                    this._pixelSizeOverZ = new e.Vector3,
                    this._smoothTime = .1,
                    this._vel = {
                        size: 0
                    },
                    this.obj3d = new e.Group,
                    this.obj3d.scale.set(.001, .001, .001),
                    this.bodiesById = {};
                    var f = this.info.habitable_zone_inner
                      , p = this.info.habitable_zone_outer;
                    this.habitableZone = new e.Mesh(s.makeDiscGeometry(new e.Color(a["default"].habitableZoneColor), [Math.max(0, d["default"].lerp(f, p, -.16666)), d["default"].lerp(f, p, .16666), d["default"].lerp(f, p, .75), d["default"].lerp(f, p, 1.25)], [0, .7, .5, 0]),s.makeAdditiveVertexColoredMaterial()),
                    this.obj3d.add(this.habitableZone);
                    var m = this.info.frost_line;
                    this.frostZone = new e.Mesh(s.makeDiscGeometry(new e.Color(a["default"].frostZoneColor), [m / 1.06, m, 2 * m], [0, 1, 0]),s.makeAdditiveVertexColoredMaterial()),
                    this.obj3d.add(this.frostZone),
                    this.manager = t,
                    this.camera = r;
                    var v = n.obj3d.position
                      , g = n.data.detail;
                    g.shader_data = g.shader_data || {},
                    this.config = new u["default"](g.shader_data,"system",function() {
                        return h.galaxy.saveSystemConfig(g.code, g.shader_data)
                    }
                    ),
                    u["default"].fleshConfig(this.config.data, this.initConfig);
                    var y = {}
                      , b = function(e) {
                        if (e.type === c.CelestialBodyType.PLANET)
                            for (var t = 0, n = g.celestial_objects; t < n.length; t++) {
                                var i = n[t];
                                if (i.type === c.CelestialBodyType.ASTEROID_BELT && i.parent_id === e.id)
                                    return i
                            }
                        return null
                    };
                    if (g.celestial_objects) {
                        for (var x = 0, w = g.celestial_objects; x < w.length; x++) {
                            var _ = w[x];
                            _.type === c.CelestialBodyType.PLANET && (this.planetSizeMin = Math.min(this.planetSizeMin, _.size),
                            this.planetSizeMax = Math.max(this.planetSizeMax, _.size))
                        }
                        for (var S = !0; S; ) {
                            S = !1;
                            for (var M = 0, C = g.celestial_objects; M < C.length; M++) {
                                var _ = C[M];
                                if (!y[_.id] && (null === _.parent_id || y[_.parent_id])) {
                                    var T = null === _.parent_id ? null : y[_.parent_id];
                                    _.type === c.CelestialBodyType.ASTEROID_BELT && T && T.info.type === c.CelestialBodyType.PLANET || (y[_.id] = new i["default"](this,_,b(_),T),
                                    S = !0)
                                }
                            }
                        }
                        this.maxDistance = 0;
                        for (var E = 0, k = g.celestial_objects; E < k.length; E++) {
                            var _ = k[E];
                            this.maxDistance = Math.max(this.maxDistance, _.distance)
                        }
                    }
                    this.obj3d.position.copy(v),
                    this.obj3d.updateMatrixWorld(!0),
                    t.starSystemsRoot.add(this.obj3d),
                    this.init(y)
                }
                return t.prototype.setBodyHovered = function(e) {
                    this.bodyHoveredSticky || (this.bodyHovered = e)
                }
                ,
                Object.defineProperty(t.prototype, "info", {
                    get: function() {
                        return this.mainStar.data.detail
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "starfieldConfig", {
                    get: function() {
                        return this.config.data.starfield
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "planetsSize", {
                    get: function() {
                        return this.config.data.planetsSize
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.isUndiscovered = function() {
                    return this.info.status !== c.StatusLabelEnum.published
                }
                ,
                t.prototype.computePlanetRadius = function(e) {
                    var t = this.planetsSize
                      , n = this.planetSizeMin < this.planetSizeMax ? (e - this.planetSizeMin) / (this.planetSizeMax - this.planetSizeMin) : 0
                      , i = Math.pow(n, t.kFactor);
                    return d["default"].lerp(t.min, t.max, i)
                }
                ,
                t.prototype.computeCameraMaxDistance = function(e) {
                    var t = .5 * e.fov * Math.PI / 180
                      , n = this.obj3d.scale.x * this.maxDistance / Math.tan(t);
                    return 1.3 * Math.max(.01, e.aspect < 1 ? n / e.aspect : n)
                }
                ,
                Object.defineProperty(t.prototype, "hoverGizmo", {
                    get: function() {
                        return this.manager.hoverGizmo
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.init = function(e) {
                    this.bodiesById = e,
                    this.bodiesByCode = {};
                    var t = [];
                    for (var n in e) {
                        var i = e[n];
                        this.bodiesByCode[i.code] = i,
                        i.init(),
                        i.isStar || i.isBelt || t.push(e[n]),
                        i.isPlanet && (this.planetCount += 1)
                    }
                    this.heatmap.createHeaters(this, t),
                    this.makeStarfield(),
                    this.showRouting(this.galaxy.routingSegments)
                }
                ,
                t.prototype.makeStarfield = function() {
                    this.starfield && this.starfield.dispose(),
                    this.starfield = new h["default"](this.obj3d,this.camera,new e.Vector3(0,0,0),this.starfieldConfig.radius,this.starfieldConfig.count,this.starfieldConfig.sizeMin,this.starfieldConfig.sizeMax,this.starfieldConfig.color1,this.starfieldConfig.color2)
                }
                ,
                t.prototype.getBody = function(e) {
                    var t = this.bodiesByCode[e];
                    return t || console.log("Not a planetary code " + e),
                    t
                }
                ,
                t.prototype.attachBodyRoute = function(e) {
                    this.manager.starSystemsRoot.add(e.obj3d),
                    this.routesByUUID[e.uuid] = e
                }
                ,
                t.prototype.detachBodyRoute = function(e) {
                    this.manager.starSystemsRoot.remove(e.obj3d),
                    delete this.routesByUUID[e.uuid]
                }
                ,
                t.prototype.dispose = function() {
                    this.habitableZone && (this.habitableZone.geometry.dispose(),
                    this.habitableZone.material.dispose()),
                    this.frostZone && (this.frostZone.geometry.dispose(),
                    this.frostZone.material.dispose()),
                    this.starfield.dispose(),
                    l["default"].foreach(this.bodiesById, function(e) {
                        e.dispose()
                    });
                    for (var e in this.routesByUUID)
                        this.routesByUUID[e].destroy();
                    this.manager.starSystemsRoot.remove(this.obj3d)
                }
                ,
                t.prototype.initStar = function(e) {
                    this.mainStar = e
                }
                ,
                Object.defineProperty(t.prototype, "galaxy", {
                    get: function() {
                        return this.manager.galaxy
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.pickCelestialBody = function(e, t) {
                    var n = null
                      , i = .1
                      , r = this.bodiesById;
                    for (var o in r) {
                        var a = r[o];
                        if (!a.isBelt && !a.isPoi) {
                            var s = a.distanceFromCursor(e, t);
                            i > s && (i = s,
                            n = a)
                        }
                    }
                    return n
                }
                ,
                t.prototype.hover = function(e) {}
                ,
                t.prototype.update = function(e, t, n) {
                    this.timer.update(t, n);
                    for (var i in this.bodiesById)
                        this.bodiesById[i].update(this.camera, t, n);
                    this.heatmap && this.heatmap.update(t, n),
                    this.starfield && (this.starfield.presenceRatio = this.presenceRatio,
                    this.starfield.update(t, n));
                    for (var r in this.routesByUUID)
                        this.routesByUUID[r].update(e, t, n);
                    return !0
                }
                ,
                t.prototype.setToDestroy = function(e) {
                    var t = this;
                    this.isSetToDestroy = !0;
                    var n = this.obj3d.scale.x;
                    this.leftStarSystem(),
                    this.timer.addPeriod(0, .3 * e, function(e) {
                        t.presenceRatio = (1 - e) * (1 - e)
                    }),
                    this.timer.addPeriod(0, e, function(e) {
                        var i = n * (e + 1e-5);
                        t.obj3d.scale.set(i, i, i)
                    }, function() {
                        t.manager.destroyStarSystem(t)
                    })
                }
                ,
                t.prototype.showLabel = function(e) {
                    for (var t in this.bodiesById)
                        this.bodiesById[t].showLabel(e);
                    for (var n in this.routesByUUID)
                        this.routesByUUID[n].show(e)
                }
                ,
                t.prototype.showOrbitals = function(e, t) {
                    var n = {}
                      , i = [];
                    for (var r in this.bodiesById) {
                        var o = this.bodiesById[r];
                        o.hasOrbital && (n[o.distance] = o,
                        i.push(o.distance))
                    }
                    i = i.sort(function(e, t) {
                        return e - t
                    });
                    for (var a = 0; a < i.length; a++)
                        this.timer.add(e + t * a, function(e) {
                            return function() {
                                return e.showOrbital(!0)
                            }
                        }(n[i[a]]));
                    return i.length > 0
                }
                ,
                Object.defineProperty(t.prototype, "pixelSizeOverZ", {
                    get: function() {
                        return this._pixelSizeOverZ.copy(this.manager.galaxy.pixelSizeOverZ),
                        this._pixelSizeOverZ.multiplyScalar(1 / this.obj3d.scale.x),
                        this._pixelSizeOverZ
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.addToGUI = function(t, n) {
                    var i = this
                      , r = t.addFolder("config");
                    r.addColor(this.config.data, "lightColor").onChange(function(t) {
                        return i.galaxy.setLightColor(new e.Color(t))
                    });
                    var o = r.addFolder("Stars");
                    o.add(this.starfieldConfig, "radius").onChange(function() {
                        i.makeStarfield()
                    }),
                    o.add(this.starfieldConfig, "count", 0, 5e3).onChange(function() {
                        i.makeStarfield()
                    }),
                    o.add(this.starfieldConfig, "sizeMin", .1, 5).onChange(function() {
                        i.makeStarfield()
                    }),
                    o.add(this.starfieldConfig, "sizeMax", .1, 5).onChange(function() {
                        i.makeStarfield()
                    }),
                    o.addColor(this.starfieldConfig, "color1").onChange(function() {
                        i.makeStarfield()
                    }),
                    o.addColor(this.starfieldConfig, "color2").onChange(function() {
                        i.makeStarfield()
                    });
                    var a = r.addFolder("Planets Size");
                    a.add(this.planetsSize, "min", .001, .1).onChange(function() {
                        i.resetPlanetRadius()
                    }),
                    a.add(this.planetsSize, "max", .001, .1).onChange(function() {
                        i.resetPlanetRadius()
                    }),
                    a.add(this.planetsSize, "kFactor", 0, 2).onChange(function() {
                        i.resetPlanetRadius()
                    }),
                    r.add(this.config, "save");
                    for (var s in this.bodiesById)
                        this.bodiesById[s].addToGUI(t, n)
                }
                ,
                t.prototype.showRouting = function(e) {
                    for (var t in this.routesByUUID)
                        this.routesByUUID[t].setToDestroy();
                    var n = null;
                    if (e)
                        for (var i = 0; i < e.length; i++) {
                            var o = e[i];
                            if (n) {
                                var a = this.bodiesByCode[n.object_code]
                                  , s = this.bodiesByCode[o.object_code];
                                a && s && this.attachBodyRoute(new r["default"](a,s,n,o))
                            }
                            n = o
                        }
                }
                ,
                t.prototype.augmentTargetZoomToSeeRoute = function(e) {
                    for (var t in this.bodiesByCode) {
                        var n = this.bodiesByCode[t];
                        n.isOnRoute && e.augmentTargetZoomToSee(n.obj3d.getWorldPosition())
                    }
                }
                ,
                t.prototype.resetPlanetRadius = function() {
                    for (var e in this.bodiesById) {
                        var t = this.bodiesById[e];
                        t.isPlanet && (t.radius = this.computePlanetRadius(t.info.size),
                        t.radiusChanged())
                    }
                }
                ,
                t.prototype.recomputeDistanceAndPosition = function() {
                    for (var e in this.bodiesById)
                        this.bodiesById[e].computeDistanceAndPosition()
                }
                ,
                t.prototype.setPlanetaryStickyHovering = function(e) {
                    this.bodyHovered = this.bodiesByCode[e],
                    this.bodyHoveredSticky = !0
                }
                ,
                t.prototype.releasePlanetaryStickyHovering = function() {
                    this.bodyHoveredSticky = !1
                }
                ,
                t.prototype.forcePlanetaryHovered = function(e) {
                    var t = this.bodiesByCode[e];
                    t ? t.forceHovered = !0 : console.log("'" + e + "' is not a body in the '" + this.info.code + "' system")
                }
                ,
                t.prototype.releasePlanetaryHovered = function(e) {
                    var t = this.bodiesByCode[e];
                    t ? t.forceHovered = !1 : console.log("'" + e + "' is not a body in the '" + this.info.code + "' system")
                }
                ,
                t.prototype.setLandingZoneHighlight = function(e, t, n) {
                    var i = this.bodiesByCode[e];
                    i ? i.setLandingZoneHighlight(t, n) : console.log("'" + e + "' is not a body in the '" + this.info.code + "' system")
                }
                ,
                t.prototype.beginIntersystem = function() {
                    this.heatmap.beginIntersystem()
                }
                ,
                t.prototype.endIntersystem = function() {
                    this.heatmap.endIntersystem()
                }
                ,
                t.prototype.leftStarSystem = function() {
                    this.heatmap.leftStarSystem(),
                    this.heatmap = null
                }
                ,
                t.prototype.translateWorld = function(e) {
                    this.obj3d.position.add(e);
                    for (var t in this.routesByUUID)
                        this.routesByUUID[t].translateWorld(e);
                    for (var n in this.bodiesByCode)
                        this.bodiesByCode[n].translateWorld(e);
                    this.starfield && this.starfield.translateWorld(e)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = f
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(64)
              , r = n(48)
              , o = n(22)
              , a = n(80)
              , s = n(81)
              , l = n(51)
              , c = n(49)
              , u = n(50)
              , h = n(26)
              , d = n(32)
              , f = n(46)
              , p = n(61)
              , m = n(63)
              , v = n(82)
              , g = n(83)
              , y = function() {
                function e(e, t, n) {
                    this.detail = null,
                    this.lrScanners = [],
                    this.lrScanners[o.HeatmapEnum.lifeforms] = .1 * e,
                    this.lrScanners[o.HeatmapEnum.economy] = .1 * t,
                    this.lrScanners[o.HeatmapEnum.crime] = .1 * n
                }
                return e
            }();
            t.CelestialBodyData = y;
            var b = function() {
                function t(t, n, i, r) {
                    var o = this;
                    for (this.starSystem = t,
                    this.info = n,
                    this.ringInfo = i,
                    this.parent = r,
                    this.worldPosition = null,
                    this.worldScale = 0,
                    this.sun = null,
                    this.hoverGizmo = null,
                    this.isOnRouteRatio = 0,
                    this.targetSize = new e.Vector3,
                    this.labelBelow = null,
                    this.labelBelowText = null,
                    this.labelBelowAnchor = null,
                    this.labelBelowIsOnTop = !1,
                    this.labelUnderline = null,
                    this.labelUnderlineLength = 0,
                    this.labelCallout = null,
                    this.circleMeshRadius = 0,
                    this.orbitalStartShowingTime = 0,
                    this.rotatingBody = null,
                    this.material = null,
                    this.hasSatellites = !1,
                    this.forceHovered = !1,
                    this.landingZones = {},
                    this.showingLandingZones = !1,
                    this.code = n.code,
                    this.starSystem = t,
                    this.sun = r; this.sun && this.sun.parent; )
                        this.sun = this.sun.parent;
                    n.shader_data = n.shader_data || {},
                    this.config = new p["default"](n.shader_data,"body",function() {
                        return o.galaxy.saveBodyConfig(n.code, n.shader_data)
                    }
                    ),
                    this.config.data.orbitalMin = this.config.data.orbitalMin || 1,
                    this.config.data.orbitalMax = this.config.data.orbitalMax || 5,
                    this.config.data.orbitalFactor = this.config.data.orbitalFactor || 1;
                    var l = null;
                    if (this.isStar)
                        l = new v["default"](n.name,[new m["default"](n.name,"sun",this.config.subConfig("sun")), new g["default"](this.manager.sunPrefab.clone())]);
                    else if (this.isBlackHole)
                        l = new s["default"](n.name,this.config,this.manager.blackholePrefab);
                    else if (this.isJumpPoint)
                        l = new a["default"](n.name,this.config,this.manager.jumpPointPrefabHead,this.manager.jumpPointPrefabTail);
                    else if (this.isBelt)
                        l = null;
                    else if (this.isPoi)
                        l = null;
                    else {
                        var h = n.appearance === f.CelestialBodyAppearance.PLANET_BLUE ? this.manager.planetBluePrefab : n.appearance === f.CelestialBodyAppearance.PLANET_GREEN ? this.manager.planetGreenPrefab : n.appearance === f.CelestialBodyAppearance.PLANET_BROWN ? this.manager.planetBrownPrefab : n.appearance === f.CelestialBodyAppearance.PLANET_GAS ? this.manager.planetGasPrefab : n.appearance === f.CelestialBodyAppearance.CUSTOM ? null : this.isSpaceStation ? this.manager.spaceStationPrefab : this.isAsteroidField ? this.manager.asteriodFieldPrefab : this.info.habitable ? this.manager.planetBluePrefab : this.manager.planetGreenPrefab;
                        this.rotatingBody = h ? new v["default"](n.name,[h.clone()]) : new v["default"](n.name,[]);
                        var b = [this.rotatingBody];
                        if (i) {
                            var x = new v["default"]("ring",[new m["default"](n.name,"ring",this.config.subConfig("ring"))])
                              , w = i.latitude * Math.PI / 180
                              , _ = -i.longitude * Math.PI / 180
                              , S = Math.sin(w)
                              , M = Math.cos(w)
                              , C = Math.sin(_)
                              , T = Math.cos(_);
                            x.model.quaternion.multiply((new e.Quaternion).setFromUnitVectors(new e.Vector3(T,0,C), new e.Vector3(M * T,S,M * C))),
                            b.push(x)
                        }
                        l = new v["default"](n.name,b),
                        l.model.rotateZ((n.axial_tilt || 0) * Math.PI / 180),
                        (this.isPlanet || this.isMoon) && (l = new v["default"](n.name,[l, new m["default"](n.name,"highlight",this.config.subConfig("highlight"),this.sun ? this.sun.obj3d : null)]))
                    }
                    l && (l.model.name = n.name);
                    this.isMoon;
                    if (this.radius = this.config.data.radius || this.defaultRadius,
                    this.obj = l,
                    this.data = new y(n.sensor_population,n.sensor_economy,n.sensor_danger),
                    this.data.affiliationCode = n.affiliation && n.affiliation[0] && n.affiliation[0].code || "NONE",
                    this.obj3d = new e.Group,
                    this.computeDistanceAndPosition(),
                    this.obj ? (this.objs = [l],
                    this.obj3d.add(this.obj.model)) : this.objs = [],
                    this.radiusChanged(),
                    this.labelOrient = new e.Group,
                    this.obj3d.add(this.labelOrient),
                    this.info.show_label)
                        if (this.isPoi)
                            this.labelAnchor = new e.Group,
                            this.labelOrient.add(this.labelAnchor),
                            this.label = this.createLabel(n.name.toLocaleUpperCase(), c["default"].labelPoiColor.getStyle(), 13, .5, .5),
                            this.labelAnchor.add(this.label),
                            this.labelUnderlineLength = this.label.scale.x + 10,
                            this.labelUnderline = new e.Mesh(d["default"].makeLineGeometry([new e.Vector3(0,0,0), new e.Vector3(this.labelUnderlineLength,0,0)]),d["default"].makeThinline2DMaterial({
                                color: c["default"].trianglePoiColor
                            })),
                            this.labelAnchor.add(this.labelUnderline);
                        else {
                            this.labelAnchor = new e.Group,
                            this.labelOrient.add(this.labelAnchor);
                            var E = this.isSpaceStation ? 1 : 0
                              , k = this.isSpaceStation ? .5 : -.5;
                            this.label = this.createLabel((n.name || n.designation || n.code).toLocaleUpperCase(), c["default"].labelColor, 13, k, E + .5),
                            this.labelAnchor.add(this.label);
                            var A = u["default"][f.CelestialBodyType[n.type]] || f.CelestialBodyType[n.type];
                            this.labeltype = this.createLabel(A.toLocaleUpperCase(), c["default"].sublabelColor, 12, k, E - .5),
                            this.labelAnchor.add(this.labeltype),
                            this.isSpaceStation && (this.labelUnderlineLength = Math.max(this.labeltype.scale.x, this.label.scale.x),
                            this.labelUnderline = new e.Mesh(d["default"].makeLineGeometry([new e.Vector3(-10,0,0), new e.Vector3(this.labelUnderlineLength,0,0)]),d["default"].makeThinline2DMaterial({
                                color: c["default"].hexagoneSpaceStationColor
                            })),
                            this.labelAnchor.add(this.labelUnderline))
                        }
                    else
                        this.label = this.labeltype = null,
                        this.labelAnchor = null;
                    this.circleMaterialBaseColor = this.isSpaceStation ? c["default"].hexagoneSpaceStationColor : this.isPoi ? c["default"].trianglePoiColor : c["default"].circleSelectedColor,
                    this.circleMaterialRouteColor = c["default"].circleSelectedRouteColor,
                    this.circleMaterial = d["default"].makeThinline2DMaterial({
                        color: this.circleMaterialBaseColor
                    });
                    var P = null;
                    if (this.isPoi) {
                        var L = Math.cos(60 * Math.PI / 180)
                          , O = Math.sin(60 * Math.PI / 180)
                          , R = .5
                          , F = new e.Vector3(0,1,0)
                          , B = new e.Vector3(O,-L,0)
                          , D = new e.Vector3(-O,-L,0)
                          , I = F.clone().multiplyScalar(R)
                          , N = B.clone().multiplyScalar(R)
                          , j = D.clone().multiplyScalar(R);
                        P = d["default"].makeLineGeometry([F, B, B, D, D, F, I, N, N, j, j, I])
                    } else if (this.isSpaceStation) {
                        for (var L = Math.cos(30 * Math.PI / 180), O = Math.sin(30 * Math.PI / 180), R = .5, F = [new e.Vector3(O,L,0), new e.Vector3(1,0,0), new e.Vector3(O,-L,0), new e.Vector3(-O,-L,0), new e.Vector3(-1,0,0), new e.Vector3(-O,L,0)], I = F.map(function(e) {
                            return e.clone().multiplyScalar(R)
                        }), V = [], z = 0; 6 > z; z++)
                            V.push(F[z]),
                            V.push(5 > z ? F[z + 1] : F[0]),
                            V.push(I[z]),
                            V.push(5 > z ? I[z + 1] : I[0]);
                        P = d["default"].makeLineGeometry(V)
                    } else
                        P = d["default"].makeCircleGeometry(1, this.isSpaceStation ? 6 : 64);
                    this.circleMesh = new e.Mesh(P,this.circleMaterial),
                    this.labelOrient.add(this.circleMesh),
                    this.circleMesh.visible = !1,
                    this.isSpaceStation ? (this.labelCallout = new e.Mesh(d["default"].makeLineGeometry([new e.Vector3(0,0,0), new e.Vector3(-1.2,.8,0)]),d["default"].makeThinline2DMaterial({
                        color: c["default"].hexagoneSpaceStationColor
                    })),
                    this.labelOrient.add(this.labelCallout)) : this.isPoi && (this.labelCallout = new e.Mesh(d["default"].makeLineGeometry([new e.Vector3(0,0,0), new e.Vector3(1.2,.8,0)]),d["default"].makeThinline2DMaterial({
                        color: c["default"].trianglePoiColor
                    })),
                    this.labelOrient.add(this.labelCallout)),
                    r ? r.obj3d.add(this.obj3d) : t.obj3d.add(this.obj3d),
                    this.showLabel(!1)
                }
                return Object.defineProperty(t.prototype, "isStar", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.STAR
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isBelt", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.ASTEROID_BELT
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isPlanet", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.PLANET
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isJumpPoint", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.JUMPPOINT
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isMoon", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.SATELLITE
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isSpaceStation", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.MANMADE
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isAsteroidField", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.ASTEROID_FIELD
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isBlackHole", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.BLACKHOLE
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isPoi", {
                    get: function() {
                        return this.info.type === f.CelestialBodyType.POI
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "isOnRoute", {
                    get: function() {
                        return !!this.galaxy.highlightedObject[this.code]
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "routeSegment", {
                    get: function() {
                        return this.galaxy.highlightedObject[this.code]
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "orbitalMin", {
                    get: function() {
                        return this.config.data.orbitalMin
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "orbitalMax", {
                    get: function() {
                        return this.config.data.orbitalMax
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "orbitalFactor", {
                    get: function() {
                        return this.config.data.orbitalFactor
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "hovered", {
                    get: function() {
                        return this.forceHovered || this.starSystem.bodyHovered === this
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "manager", {
                    get: function() {
                        return this.starSystem.manager
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.computeDistanceAndPosition = function() {
                    if (this.parent && this.parent != this.sun) {
                        this.parent.hasSatellites = !0;
                        var t = this.parent.orbitalMin
                          , n = this.parent.orbitalMax
                          , i = this.parent.orbitalFactor
                          , r = (n - t - i) / i
                          , o = t * (1 + r) - n
                          , a = Math.max(1, this.info.distance / (this.parent.info.size / 1496e5))
                          , s = (n * a + o) / (a + r);
                        this.distance = s * this.parent.radius
                    } else
                        this.distance = this.info.distance;
                    var l = this.info.latitude * Math.PI / 180
                      , u = -this.info.longitude * Math.PI / 180
                      , h = Math.sin(l)
                      , f = Math.cos(l)
                      , p = Math.sin(u)
                      , m = Math.cos(u);
                    this.obj3d.position.set(f * m * this.distance, h * this.distance, f * p * this.distance),
                    this.info.show_orbitlines ? (this.orbitalMesh && (this.obj3d.remove(this.orbitalMesh),
                    this.orbitalMesh.geometry.dispose(),
                    this.orbitalMesh.material.dispose(),
                    this.orbitalMesh = null),
                    this.config.data.orbitalColor = this.config.data.orbitalColor || c["default"].circleSelectedColor.getStyle(),
                    this.config.data.orbitalHighlightColor = this.config.data.orbitalHighlightColor || "rgb(128,128,255)",
                    this.orbitalColor = new e.Color(this.config.data.orbitalColor),
                    this.orbitalHighlightColor = new e.Color(this.config.data.orbitalHighlightColor),
                    this.orbitalMaterial = d["default"].makeThinline2DAdditiveMaterial({
                        color: this.config.data.orbitalColor
                    }),
                    this.orbitalMesh = new e.Mesh(d["default"].makeCircleGeometry(this.distance, 64),this.orbitalMaterial),
                    this.orbitalMesh.position.copy(this.obj3d.position),
                    this.orbitalMesh.position.multiplyScalar(-1),
                    this.orbitalMesh.quaternion.multiply((new e.Quaternion).setFromUnitVectors(new e.Vector3(m,0,p), new e.Vector3(f * m,h,f * p))),
                    this.orbitalMesh.rotateX(.5 * Math.PI),
                    this.obj3d.add(this.orbitalMesh),
                    this.showOrbital(!1)) : this.orbitalMesh = null
                }
                ,
                t.prototype.init = function() {
                    if (this.isJumpPoint && this.obj instanceof a["default"] && this.otherStar) {
                        var e = this.obj;
                        e.orientTail(this.star.obj3d.getWorldPosition(), this.otherStar.obj3d.getWorldPosition())
                    }
                    this.worldPosition = this.obj3d.getWorldPosition(),
                    this.worldScale = this.obj3d.getWorldScale().x,
                    this.additionalLoads()
                }
                ,
                t.prototype.loadTexture = function() {
                    var e = this;
                    this.info.texture && this.info.texture.source && this.manager.loadTexture(this.info.texture.source).then(function(t) {
                        var n = d["default"].getMaterial(e.rotatingBody.model, "AdditiveTexture");
                        n ? (e.material = n.clone(),
                        e.material.map = t,
                        d["default"].replaceMaterial(e.rotatingBody.model, "AdditiveTexture", e.material)) : console.warn('Expecting a material called "AdditiveTexture" on object ' + e.code)
                    })["catch"](function(e) {
                        return console.log(e)
                    })
                }
                ,
                t.prototype.loadObject = function() {
                    var e = this;
                    this.info.model && this.info.model.source && this.manager.loadObject(this.info.model.source).then(function(t) {
                        var n = e.rotatingBody;
                        n.push(t.clone())
                    }).then(function() {
                        return e.loadTexture()
                    })
                }
                ,
                t.prototype.loadDetail = function() {
                    var e = this;
                    return this.data.detail ? new Promise(function(t, n) {
                        return t(e.data.detail)
                    }
                    ) : this.galaxy.getJSON("/celestial-objects/" + this.code).then(function(t) {
                        return e.data.detail = f.cleanCelestialBodyResponse(t)
                    })
                }
                ,
                t.prototype.showLandingZone = function() {
                    var e = this;
                    this.showingLandingZones || (this.showingLandingZones = !0,
                    this.loadDetail().then(function() {
                        for (var t = 0, n = e.data.detail.children; t < n.length; t++) {
                            var i = n[t];
                            if (i.type === f.CelestialBodyType.LZ) {
                                var r = e.manager.landingZone.clone().setInfo(i);
                                e.landingZones[i.code] = r,
                                e.rotatingBody.push(r)
                            }
                        }
                    }))
                }
                ,
                t.prototype.setLandingZoneHighlight = function(e, t) {
                    var n = this.landingZones[e];
                    n ? t ? n.setHighlight() : n.releaseHighlight() : console.log("'" + e + "' is not a landing zone on '" + this.code + "'")
                }
                ,
                Object.defineProperty(t.prototype, "landingZoneWithHighlight", {
                    get: function() {
                        for (var e in this.landingZones) {
                            var t = this.landingZones[e];
                            if (t.hasHighlight)
                                return t
                        }
                        return null
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.additionalLoads = function() {
                    this.info.appearance === f.CelestialBodyAppearance.CUSTOM ? this.loadObject() : this.loadTexture()
                }
                ,
                Object.defineProperty(t.prototype, "worldRadius", {
                    get: function() {
                        return this.worldScale * this.radius
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "star", {
                    get: function() {
                        return this.starSystem.mainStar
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "otherStar", {
                    get: function() {
                        return this.galaxy.jumpPointOtherEnd[this.info.code]
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.dispose = function() {
                    this.circleMesh && (this.circleMesh.geometry.dispose(),
                    this.circleMesh.material.dispose()),
                    this.orbitalMesh && (this.orbitalMesh.geometry.dispose(),
                    this.orbitalMesh.material.dispose()),
                    this.label && (this.label.material.map.dispose(),
                    this.label.material.dispose()),
                    this.labeltype && (this.labeltype.material.map.dispose(),
                    this.labeltype.material.dispose()),
                    this.labelUnderline && (this.labelUnderline.geometry.dispose(),
                    this.labelUnderline.material.dispose()),
                    this.labelCallout && (this.labelCallout.geometry.dispose(),
                    this.labelCallout.material.dispose()),
                    this.disposeLabelBelow();
                    for (var e = 0, t = this.objs; e < t.length; e++) {
                        var n = t[e];
                        n.dispose()
                    }
                    this.hoverGizmo && this.hoverGizmo.dispose(),
                    this.material && this.material.dispose()
                }
                ,
                t.prototype.createLabel = function(t, n, i, r, o) {
                    var a = l.createLabelTexture(t, {
                        color: n,
                        fontsize: i,
                        quality: window.devicePixelRatio || 1
                    })
                      , s = new e.SpriteMaterial({
                        map: a,
                        color: new e.Color("rgb(255,255,255)")
                    });
                    s.blending = e.AdditiveBlending,
                    s.depthTest = !1,
                    s.depthWrite = !1;
                    var c = new e.Sprite(s);
                    return c.scale.set(a.size.x, a.size.y, 1),
                    c.position.set(r * a.size.x, o * a.size.y, 0),
                    c
                }
                ,
                t.prototype.rebuildAsteroidBelt = function() {
                    if (this.objs)
                        for (var t = 0, n = this.objs; t < n.length; t++) {
                            var i = n[t];
                            this.obj3d.remove(i.model),
                            i.dispose()
                        }
                    var r = this.config.data.fullturn = void 0 === this.config.data.fullturn ? 1 : this.config.data.fullturn
                      , o = this.info.latitude * Math.PI / 180
                      , a = -this.info.longitude * Math.PI / 180
                      , s = Math.sin(o)
                      , l = Math.cos(o)
                      , c = Math.sin(a)
                      , u = Math.cos(a)
                      , h = this.manager.asteriodsPrefabs
                      , d = (new e.Quaternion).setFromUnitVectors(new e.Vector3(1,0,0), new e.Vector3(l * u,s,l * c))
                      , f = new e.Vector3(s * u,-l,s * c)
                      , p = 0
                      , m = 3 * this.radius
                      , v = Math.floor(2 * Math.PI * (this.distance + p) / m);
                    m = 2 * Math.PI * (this.distance + p) / v,
                    v > 100 && (h = [this.manager.asteriodsFarPrefab, this.manager.asteriodsFarPrefab, this.manager.asteriodsFarPrefab]);
                    var g = (new e.Quaternion).setFromAxisAngle(f, .5 * -m / (this.distance + p))
                      , y = this.obj3d.position.clone().multiplyScalar(p / this.distance);
                    this.objs = [h[0].clone()];
                    for (var b = Math.floor(r * v), x = 2; b > x; x++)
                        this.objs.push(h[Math.floor(3 * Math.random())].clone());
                    this.objs.push(h[2].clone()),
                    this.obj = this.objs[0];
                    for (var w = 0, _ = this.objs; w < _.length; w++) {
                        var S = _[w];
                        S.model.scale.set(this.radius, this.radius, this.radius),
                        S.model.position.copy(y),
                        S.model.rotation.setFromQuaternion(d),
                        d.multiply(g),
                        y.add(new e.Vector3(0,0,-m).applyQuaternion(d)),
                        d.multiply(g),
                        this.obj3d.add(S.model)
                    }
                }
                ,
                Object.defineProperty(t.prototype, "defaultRadius", {
                    get: function() {
                        return this.isPlanet ? this.starSystem.computePlanetRadius(this.info.size) : this.isStar ? .1 : this.isBlackHole ? .1 : Math.min(.5, (this.info.size || 1) * (this.isMoon ? .01 : this.isSpaceStation ? .01 : this.isJumpPoint ? .03 : this.isBelt ? .1 : .03))
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.radiusChanged = function() {
                    this.info.type === f.CelestialBodyType.ASTEROID_BELT ? this.rebuildAsteroidBelt() : this.obj && this.obj.model.scale.set(this.radius, this.radius, this.radius)
                }
                ,
                t.prototype.setCircleMeshRadius = function(e) {
                    this.circleMeshRadius = e,
                    this.labelAnchor && (this.isSpaceStation ? this.labelAnchor.position.set(-this.labelUnderlineLength - 1.2 * e, .8 * e, 0) : this.isPoi ? this.labelAnchor.position.set(1.2 * e, .8 * e, 0) : this.labelAnchor.position.set(-10 - 1.2 * e, 0, 0)),
                    this.labelBelowAnchor && (this.labelBelowIsOnTop ? this.labelBelowAnchor.position.set(0, 10 + 1.2 * e, 0) : this.labelBelowAnchor.position.set(0, -10 - 1.2 * e, 0)),
                    this.circleMesh.scale.set(e, e, e),
                    this.labelCallout && this.labelCallout.scale.set(e, e, e)
                }
                ,
                t.prototype.update = function(e, t, n) {
                    for (var i = 0, o = this.objs; i < o.length; i++) {
                        var a = o[i];
                        a.update(e, t, n)
                    }
                    this.labelOrient && this.labelOrient.rotation.copy(e.rotation);
                    var s = this.worldPosition.clone();
                    e.worldToLocal(s);
                    var l = -s.z;
                    this.targetSize.copy(this.starSystem.pixelSizeOverZ),
                    this.targetSize.multiplyScalar(l);
                    var c = this.targetSize;
                    this.isOnRouteRatio = h["default"].gotoValue(this.isOnRouteRatio, this.isOnRoute ? 1 : 0, 2 * n);
                    var d = this.circleMaterial.uniforms.color.value;
                    d.copy(this.circleMaterialBaseColor),
                    d.lerp(this.circleMaterialRouteColor, this.isOnRouteRatio);
                    var f = this.radius / c.x
                      , p = this.isMoon || this.isBelt ? 0 : 5 > f || this.isSpaceStation || this.isPoi ? 1 : h["default"].clamp01(1 - (f - 5) / 5);
                    if (this.circleMaterial.uniforms.intensity.value = h["default"].lerp(p, 1, this.isOnRouteRatio),
                    this.circleMesh.visible = 0 === this.isOnRouteRatio ? !this.isMoon && !this.isBelt : !0,
                    (this.isPoi || this.isSpaceStation) && this.circleMesh.rotation.set(0, 3 * t, 0),
                    this.setCircleMeshRadius(this.isPoi ? 20 : Math.max(1.2 * f, 20)),
                    this.orbitalMaterial) {
                        var m = .3
                          , v = h["default"].clamp01((t - this.orbitalStartShowingTime) / m)
                          , g = 2 * Math.sin(Math.PI * v) + .8 * v;
                        this.orbitalMaterial.uniforms.color.value = this.orbitalHighlightColor.clone().lerp(this.orbitalColor, 1 > g ? 1 : 1 - (g - 1) / 1.5),
                        this.orbitalMaterial.uniforms.intensity.value = g * this.starSystem.presenceRatio
                    }
                    return this.labelOrient && (c.x != this.labelOrient.scale.x || c.y != this.labelOrient.scale.y || c.z != this.labelOrient.scale.z) && this.labelOrient.scale.set(c.x, c.y, c.z),
                    this.isSpaceStation && (this.labelAnchor && (this.labelAnchor.visible = this.hovered),
                    this.labelCallout && (this.labelCallout.visible = this.hovered)),
                    this.hovered && !this.hoverGizmo ? (this.hoverGizmo = this.starSystem.hoverGizmo.clone(),
                    this.hoverGizmo.model.scale.multiplyScalar(1.5 * this.radius),
                    this.obj3d.add(this.hoverGizmo.model)) : !this.hovered && this.hoverGizmo && (this.obj3d.remove(this.hoverGizmo.model),
                    this.hoverGizmo.dispose(),
                    this.hoverGizmo = null),
                    this.hoverGizmo && this.hoverGizmo.update(e, t, n),
                    this.rotatingBody && (this.isPlanet || this.isMoon) && this.rotatingBody.model.rotateY(.02 * n * 2 * Math.PI),
                    this.isOnRoute ? this.routeSegment.is_departure ? this.createLabelBelow(u["default"].DEPARTURE) : this.routeSegment.is_destination && this.createLabelBelow(u["default"].DESTINATION) : 0 === this.isOnRouteRatio && this.disposeLabelBelow(),
                    this.labelBelow && this.labelBelow.material.color.set(r["default"].white).multiplyScalar(this.isOnRouteRatio),
                    !0
                }
                ,
                t.prototype.createLabelBelow = function(t) {
                    this.labelBelow && this.labelBelowText !== t && this.disposeLabelBelow(),
                    this.labelBelowAnchor || (this.labelBelowAnchor = new e.Group,
                    this.labelOrient.add(this.labelBelowAnchor)),
                    this.labelBelow || (this.labelBelow = this.createLabel(t, c["default"].circleSelectedRouteColor.getStyle(), 13, 0, 0),
                    this.labelBelowAnchor.add(this.labelBelow))
                }
                ,
                t.prototype.disposeLabelBelow = function() {
                    this.labelBelow && (this.labelBelowAnchor.remove(this.labelBelow),
                    this.labelBelow.material.map.dispose(),
                    this.labelBelow.material.dispose(),
                    this.labelBelow = null)
                }
                ,
                t.prototype.distanceFromCursor = function(t, n) {
                    var i = (new e.Vector3).copy(this.worldPosition).project(n)
                      , r = (new e.Vector3).copy(this.worldPosition).add(new e.Vector3(0,this.worldRadius,0).applyQuaternion(n.quaternion)).project(n)
                      , o = Math.abs(r.y - i.y)
                      , a = new e.Vector2(n.aspect * (i.x - t.x),i.y - t.y)
                      , s = Math.max(a.length() - o, 0);
                    return s
                }
                ,
                Object.defineProperty(t.prototype, "galaxy", {
                    get: function() {
                        return this.starSystem.manager.galaxy
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "hasOrbital", {
                    get: function() {
                        return null !== this.orbitalMesh
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.addToGUI = function(e, t) {
                    var n = this
                      , i = e.addFolder(this.info.code);
                    this.isPlanet || (i.add(this, "radius").onChange(function(e) {
                        e > 0 && (n.config.data.radius = e),
                        n.radiusChanged()
                    }),
                    i.add({
                        resetRadius: function() {
                            n.radius = n.defaultRadius,
                            delete n.config.data.radius,
                            n.radiusChanged(),
                            t()
                        }
                    }, "resetRadius")),
                    this.isBelt && i.add(this.config.data, "fullturn", 0, 1).onChange(function() {
                        return n.rebuildAsteroidBelt()
                    }),
                    this.hasSatellites && (i.add(this.config.data, "orbitalMin", 1, 3).onChange(function() {
                        return n.starSystem.recomputeDistanceAndPosition()
                    }),
                    i.add(this.config.data, "orbitalMax", 2, 10).onChange(function() {
                        return n.starSystem.recomputeDistanceAndPosition()
                    }),
                    i.add(this.config.data, "orbitalFactor", 1, 10).onChange(function() {
                        return n.starSystem.recomputeDistanceAndPosition()
                    })),
                    this.info.show_orbitlines && (i.addColor(this.config.data, "orbitalColor").onChange(function(e) {
                        return n.orbitalColor.set(e)
                    }),
                    i.addColor(this.config.data, "orbitalHighlightColor").onChange(function(e) {
                        return n.orbitalHighlightColor.set(e)
                    }),
                    i.add({
                        resetOrbitalColors: function() {
                            n.orbitalColor.set(n.config.data.orbitalColor = c["default"].circleSelectedColor),
                            n.orbitalHighlightColor.set(n.config.data.orbitalHighlightColor = "rnd(128,128,255)")
                        }
                    }, "resetOrbitalColors"));
                    for (var r = 0, o = this.objs; r < o.length; r++) {
                        var a = o[r];
                        a.addToGUI && a.addToGUI(i, t)
                    }
                    i.add(this.config, "save")
                }
                ,
                t.prototype.lrScannerStrength = function(e) {
                    return this.data.lrScanners[e || 0]
                }
                ,
                t.prototype.showOrbital = function(e) {
                    this.orbitalMesh.visible = e,
                    e && (this.orbitalStartShowingTime = i.time)
                }
                ,
                t.prototype.showLabel = function(e) {
                    this.labelOrient.visible = e
                }
                ,
                Object.defineProperty(t.prototype, "jumpPoint", {
                    get: function() {
                        return this.obj instanceof a["default"] ? this.obj : null
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.translateWorld = function(e) {
                    this.worldPosition.add(e)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = b
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(63)
              , r = function() {
                function t(t, n, r, o) {
                    this.name = t,
                    this.config = n,
                    this.updateRotation = !0,
                    this.model = new e.Group,
                    this.model.name = "JumpPoint",
                    this.fragObj = new i["default"](t,"jumppoint",this.config.subConfig("jumppoint")),
                    this.model.add(this.fragObj.model),
                    this.headBase = new e.Group,
                    this.model.add(this.headBase),
                    this.head = r.clone(),
                    this.tail = o.clone(),
                    this.headBase.add(this.head.model),
                    this.model.add(this.tail.model)
                }
                return t.prototype.update = function(e, t, n) {
                    this.updateRotation && this.headBase.rotation.copy(e.rotation),
                    this.fragObj.update(e, t, n),
                    this.head.update(e, t, n),
                    this.tail.update(e, t, n)
                }
                ,
                t.prototype.orientTail = function(t, n) {
                    var i = new e.Matrix4;
                    i.lookAt(t, n, new e.Vector3(0,1,0)),
                    this.tail.model.quaternion.setFromRotationMatrix(i),
                    this.tail.model.updateMatrix()
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    this.fragObj.addToGUI(e, t)
                }
                ,
                t.prototype.dispose = function() {
                    this.head.dispose(),
                    this.tail.dispose(),
                    this.fragObj.dispose()
                }
                ,
                t.prototype.clone = function() {
                    return new t(this.name,this.config,this.head,this.tail)
                }
                ,
                Object.defineProperty(t.prototype, "power", {
                    get: function() {
                        return this.fragObj.material.uniforms.power.value
                    },
                    set: function(e) {
                        this.fragObj.material.uniforms.power.value = e
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "alpha", {
                    get: function() {
                        return this.fragObj.material.uniforms.alpha.value
                    },
                    set: function(e) {
                        this.fragObj.material.uniforms.alpha.value = e
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.removeDepthWrite = function() {
                    this.fragObj.material.depthWrite = !1,
                    this.head.model.visible = !1,
                    this.tail.model.visible = !1
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = r
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(63)
              , r = function() {
                function t(t, n, r) {
                    this.name = t,
                    this.config = n,
                    this.base = r,
                    this.model = new e.Group,
                    this.model.name = "Blackhole",
                    this.obj = new i["default"](t,"blackhole",this.config.subConfig("blackhole")),
                    this.model.add(this.obj.model)
                }
                return t.prototype.update = function(e, t, n) {
                    this.obj.update(e, t, n)
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    this.obj.addToGUI(e, t)
                }
                ,
                t.prototype.dispose = function() {
                    this.obj.dispose()
                }
                ,
                t.prototype.clone = function() {
                    return new t(this.name,this.config,this.base)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = r
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var n = function() {
                function t(t, n) {
                    this.name = t,
                    this.objs = n,
                    this.model = new e.Group,
                    this.model.name = t;
                    for (var i = 0; i < n.length; i++) {
                        var r = n[i];
                        this.model.add(r.model)
                    }
                }
                return t.prototype.push = function(e) {
                    this.objs.push(e),
                    this.model.add(e.model)
                }
                ,
                t.prototype.update = function(e, t, n) {
                    for (var i = 0, r = this.objs; i < r.length; i++) {
                        var o = r[i];
                        o.update(e, t, n)
                    }
                }
                ,
                t.prototype.dispose = function() {
                    for (var e = 0, t = this.objs; e < t.length; e++) {
                        var n = t[e];
                        n.dispose()
                    }
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    for (var n = 0, i = this.objs; n < i.length; n++) {
                        var r = i[n];
                        r.addToGUI && r.addToGUI(e, t)
                    }
                }
                ,
                t.prototype.clone = function() {
                    return new t(this.name,this.objs.map(function(e) {
                        return e.clone()
                    }))
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = n
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        var n = function() {
            function e(e) {
                this.obj = e
            }
            return Object.defineProperty(e.prototype, "model", {
                get: function() {
                    return this.obj.model
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.update = function(e, t, n) {
                this.obj.model.rotation.copy(e.rotation),
                this.obj.update(e, t, n)
            }
            ,
            e.prototype.dispose = function() {
                this.obj.dispose()
            }
            ,
            e.prototype.addToGUI = function(e) {
                this.obj.addToGUI && this.obj.addToGUI(e)
            }
            ,
            e.prototype.clone = function() {
                return new e(this.obj.clone())
            }
            ,
            e
        }();
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = n
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(49)
              , r = n(26)
              , o = n(32)
              , a = n(51)
              , s = function() {
                function t(t, n, r, a) {
                    this.bodyA = t,
                    this.bodyB = n,
                    this.infoA = r,
                    this.infoB = a,
                    this.toDestroy = !1,
                    this.intensity = 0,
                    this.starSystem = t.starSystem,
                    this.material = o["default"].makeThinline2DBeginEndMaterial({
                        color: i["default"].circleSelectedRouteColor
                    }),
                    this.pointA = t.obj3d.getWorldPosition().clone(),
                    this.pointB = n.obj3d.getWorldPosition().clone();
                    var s = this.pointA.clone().add(this.pointB).multiplyScalar(.5);
                    this.geometry = o["default"].makeLineGeometry([this.pointA.clone().sub(s), this.pointB.clone().sub(s)]),
                    this.mesh = new e.Mesh(this.geometry,this.material),
                    this.mesh.position.copy(s),
                    this.obj3d = new e.Group,
                    this.obj3d.add(this.mesh);
                    var l = 3;
                    this.arrows = [];
                    for (var c = 0; l > c; c++) {
                        var u = new e.Sprite(this.manager.arrowMaterial.clone());
                        u.material.color.set(i["default"].circleSelectedRouteColor),
                        u.visible = !1,
                        this.arrows.push(u),
                        this.obj3d.add(u)
                    }
                    this.labelAnchor = new e.Group,
                    this.obj3d.add(this.labelAnchor),
                    this.label = this.createLabel(r.segment_distance.toFixed(2) + " AU", i["default"].circleSelectedRouteColor.getStyle(), 12, -10, 0, -.5, 0),
                    this.labelAnchor.add(this.label)
                }
                return Object.defineProperty(t.prototype, "uuid", {
                    get: function() {
                        return this.obj3d.uuid
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "manager", {
                    get: function() {
                        return this.starSystem.manager
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.setToDestroy = function() {
                    this.toDestroy = !0
                }
                ,
                Object.defineProperty(t.prototype, "galaxy", {
                    get: function() {
                        return this.starSystem.galaxy
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.update = function(t, n, i) {
                    var o = this.pointA.clone().project(t)
                      , a = new e.Vector2(o.x * t.aspect,o.y)
                      , s = this.pointB.clone().project(t)
                      , l = new e.Vector2(s.x * t.aspect,s.y)
                      , c = this.pointA.clone()
                      , u = this.pointB.clone();
                    t.worldToLocal(c),
                    t.worldToLocal(u);
                    var h = this.pointA.clone().lerp(this.pointB, c.z / (c.z + u.z))
                      , d = h.clone();
                    t.worldToLocal(d),
                    this.labelAnchor.position.copy(h),
                    this.labelAnchor.scale.copy(this.galaxy.pixelSizeOverZ),
                    this.labelAnchor.scale.multiplyScalar(-d.z),
                    this.labelAnchor.rotation.copy(t.rotation);
                    var f = l.clone().sub(a)
                      , p = .5 * a.distanceTo(l) * this.galaxy.window.innerHeight;
                    this.intensity = r["default"].gotoValue(this.intensity, this.toDestroy ? 0 : 1, 2 * i),
                    this.material.uniforms.intensity.value = this.intensity,
                    this.material.uniforms.length.value = p;
                    var m = this.bodyA.circleMeshRadius
                      , v = this.bodyB.circleMeshRadius;
                    this.material.uniforms.begin.value = .85 * m,
                    this.material.uniforms.end.value = .85 * v,
                    this.toDestroy && 0 === this.intensity && this.destroy();
                    for (var g = Math.atan2(f.y, f.x), y = 0, b = 0, x = this.arrows; b < x.length; b++) {
                        var w = x[b]
                          , _ = .25 * n
                          , S = (_ - Math.floor(_) + y) / this.arrows.length
                          , M = w.position.copy(this.pointA).lerp(this.pointB, S * c.z / ((1 - S) * u.z + S * c.z))
                          , C = (new e.Vector3).copy(M);
                        t.worldToLocal(C);
                        var T = -C.z;
                        w.scale.copy(this.galaxy.pixelSizeOverZ),
                        w.scale.multiplyScalar(20 * T),
                        w.visible = S * p > m && p - v > S * p,
                        w.material.rotation = g,
                        y++
                    }
                }
                ,
                t.prototype.show = function(e) {
                    this.obj3d.visible = e
                }
                ,
                t.prototype.destroy = function() {
                    this.starSystem.detachBodyRoute(this),
                    this.geometry.dispose(),
                    this.material.dispose(),
                    this.label.material.map.dispose(),
                    this.label.material.dispose();
                    for (var e = 0, t = this.arrows; e < t.length; e++) {
                        var n = t[e];
                        n.material.dispose()
                    }
                }
                ,
                t.prototype.createLabel = function(t, n, i, r, o, s, l) {
                    var c = a.createLabelTexture(t, {
                        color: n,
                        fontsize: i,
                        quality: window.devicePixelRatio || 1
                    })
                      , u = new e.SpriteMaterial({
                        map: c,
                        color: new e.Color("rgb(255,255,255)")
                    });
                    u.blending = e.AdditiveBlending,
                    u.depthTest = !1,
                    u.depthWrite = !1;
                    var h = new e.Sprite(u);
                    return h.scale.set(c.size.x, c.size.y, 1),
                    h.position.set(r + s * c.size.x, o + l * c.size.y, 0),
                    h
                }
                ,
                t.prototype.translateWorld = function(e) {
                    this.mesh.position.add(e),
                    this.pointA.add(e),
                    this.pointB.add(e)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = s
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            function n(t, n, i, r) {
                void 0 === r && (r = 128);
                for (var o = new e.BufferGeometry, a = n.length * r, s = 2 * (n.length - 1) * r, l = new Float32Array(3 * a), c = new Float32Array(3 * a), u = new Uint16Array(3 * s), h = 0; h < n.length; h++)
                    for (var d = h * r, f = n[h], p = t.clone().multiplyScalar(i[h]), m = 0; r > m; m++) {
                        var v = 3 * (d + m)
                          , g = 2 * Math.PI * m / r;
                        l[v] = f * Math.cos(g),
                        l[v + 1] = 0,
                        l[v + 2] = f * Math.sin(g),
                        c[v] = p.r,
                        c[v + 1] = p.g,
                        c[v + 2] = p.b
                    }
                for (var h = 0; h < n.length - 1; h++) {
                    var d = h * r
                      , y = d + r - 1
                      , b = d
                      , x = 6 * d;
                    u[x] = y,
                    u[x + 1] = y + r,
                    u[x + 2] = b + r,
                    u[x + 3] = y,
                    u[x + 4] = b + r,
                    u[x + 5] = b;
                    for (var m = 1; r > m; m++) {
                        var y = d + m - 1
                          , b = y + 1
                          , x = 6 * (d + m);
                        u[x] = y,
                        u[x + 1] = y + r,
                        u[x + 2] = b + r,
                        u[x + 3] = y,
                        u[x + 4] = b + r,
                        u[x + 5] = b
                    }
                }
                return o.addAttribute("position", new e.BufferAttribute(l,3)),
                o.addAttribute("color", new e.BufferAttribute(c,3)),
                o.addAttribute("index", new e.BufferAttribute(u,3)),
                o
            }
            t.makeDiscGeometry = n;
            var i = ["attribute vec3 color;", "varying vec3 vColor;", "varying float vAlpha;", "void main() {", "	float d = 6.0 * (uv.y - 0.5);", "	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );", "	gl_Position = projectionMatrix * wpos;", "	vAlpha = 1.0; //max(color.r, max(color.g, color.b));", "	vColor = color; //(1.0/vAlpha)*color;", "}"].join("\n")
              , r = ["varying vec3 vColor;", "varying float vAlpha;", "void main() {", "	gl_FragColor = vec4(vColor.rgb, vAlpha);", "}"].join("\n");
            t.makeAdditiveVertexColoredMaterial = function() {
                var t = new e.ShaderMaterial({
                    vertexShader: i,
                    fragmentShader: r
                });
                return t.transparent = !0,
                t.blending = e.AdditiveBlending,
                t.depthTest = !1,
                t.side = e.DoubleSide,
                t
            }
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i, r = n(56), o = n(26), a = n(22), s = n(52), l = n(64);
            !function(e) {
                e[e.enteringSystem = 0] = "enteringSystem",
                e[e.leavingSystem = 1] = "leavingSystem",
                e[e.inSystem = 2] = "inSystem"
            }(i || (i = {}));
            var c;
            !function(e) {
                e[e.faction = 0] = "faction",
                e[e.longRange = 1] = "longRange",
                e[e.none = 2] = "none"
            }(c || (c = {}));
            var u = function() {
                function t(t, n, i, o, a) {
                    var s = this;
                    this.controlAPI = t,
                    this.width = n,
                    this.height = i,
                    this.camera = o,
                    this.renderer = a,
                    this._heaters = null,
                    this._heatTexture = null,
                    this._bodies = null,
                    this._starSystem = null,
                    this.timer = new r["default"],
                    this.lastShow = !1,
                    this._content = c.none,
                    this._previousContent = c.none,
                    this.showFactions = !1,
                    this.showLRScanner = !1,
                    this.curvature = 1,
                    this.density = 20,
                    this._scene = new e.Scene,
                    this.createHeaterMaterial(),
                    this.createHeatTextureMaterial(),
                    this.createMeshHeatTexture(n, i),
                    t.addEventListener("updateSelection", function(e) {
                        return s.updateSelection()
                    })
                }
                return t.prototype.disposeOfHeaters = function() {
                    if (this._heaters)
                        for (var t = 0, n = this._heaters; t < n.length; t++) {
                            var i = n[t];
                            if (this._scene.remove(i),
                            i instanceof e.PointCloud) {
                                i.geometry.dispose()
                            }
                        }
                    this._heaters = null,
                    this._bodies = null,
                    this._starSystem = null
                }
                ,
                t.prototype.createHeaters = function(t, n) {
                    var r = t.obj3d.getWorldPosition();
                    this.disposeOfHeaters(),
                    this._bodies = n,
                    this._starSystem = t;
                    for (var s = [], l = 0; l < n.length; l++) {
                        var u = n[l];
                        u.isMoon || s.push(u)
                    }
                    var h = n.length
                      , d = s.length
                      , f = this.density * d * (d - 1)
                      , p = h + f
                      , m = new Float32Array(3 * p)
                      , v = new Float32Array(p)
                      , g = new Float32Array(p)
                      , y = new Float32Array(3 * p)
                      , b = new e.BufferGeometry;
                    b.addAttribute("position", new e.BufferAttribute(m,3)),
                    b.addAttribute("radius", new e.BufferAttribute(v,1)),
                    b.addAttribute("intensity", new e.BufferAttribute(g,1)),
                    b.addAttribute("color", new e.BufferAttribute(y,3));
                    for (var x = this.state == i.enteringSystem ? new e.Color(.5,.5,1) : this.state == i.leavingSystem ? new e.Color(.5,.5,1) : new e.Color(.465,.203,.063), w = x.clone(), _ = this._content == c.faction, S = 0; h > S; S++) {
                        var M = 3 * S
                          , u = n[S]
                          , C = u.worldPosition;
                        m[M + 0] = C.x,
                        m[M + 1] = C.y,
                        m[M + 2] = C.z,
                        v[S] = u.radius,
                        _ ? (x = this.controlAPI.affiliationColors[u.data.affiliationCode],
                        y[M + 0] = x.r,
                        y[M + 1] = x.g,
                        y[M + 2] = x.b,
                        g[S] = this.controlAPI.factionHeatmap[u.data.affiliationCode] ? .25 : 0) : (x = new e.Color(this.currentLRScanner == a.HeatmapEnum.lifeforms ? this.controlAPI.env.galaxy.starsConfig.colorL1 : this.currentLRScanner == a.HeatmapEnum.crime ? this.controlAPI.env.galaxy.starsConfig.colorC1 : this.controlAPI.env.galaxy.starsConfig.colorD1),
                        y[M + 0] = x.r,
                        y[M + 1] = x.g,
                        y[M + 2] = x.b,
                        g[S] = (u.isMoon ? .01 : .5) * u.lrScannerStrength(this.currentLRScanner))
                    }
                    for (var S = h; p > S; S++) {
                        var M = 3 * S
                          , T = o["default"].rnd(d)
                          , E = o["default"].rnd(d - 1);
                        E === T && E++;
                        var k = s[T]
                          , A = s[E]
                          , P = k.worldPosition
                          , L = A.worldPosition
                          , O = Math.random()
                          , R = (new e.Vector3).lerpVectors(P, L, O)
                          , F = R.clone().sub(r)
                          , B = F.lengthSq() > 0 ? F.normalize().multiplyScalar(o["default"].lerp(P.distanceTo(r), L.distanceTo(r), O)).add(r) : F
                          , C = (new e.Vector3).lerpVectors(R, B, this.curvature);
                        if (m[M + 0] = C.x,
                        m[M + 1] = C.y,
                        m[M + 2] = C.z,
                        _) {
                            var D = .5 > O ? k : A;
                            w = this.controlAPI.factionHeatmap[D.data.affiliationCode] ? this.controlAPI.affiliationColors[D.data.affiliationCode] : new e.Color(0,0,0),
                            y[M + 0] = w.r,
                            y[M + 1] = w.g,
                            y[M + 2] = w.b,
                            g[S] = .05,
                            v[S] = (.1 + Math.abs(O - .3)) * o["default"].lerp(k.radius, A.radius, O)
                        } else
                            w = new e.Color(this.currentLRScanner == a.HeatmapEnum.lifeforms ? this.controlAPI.env.galaxy.starsConfig.colorL2 : this.currentLRScanner == a.HeatmapEnum.crime ? this.controlAPI.env.galaxy.starsConfig.colorC2 : this.controlAPI.env.galaxy.starsConfig.colorD2),
                            y[M + 0] = w.r,
                            y[M + 1] = w.g,
                            y[M + 2] = w.b,
                            g[S] = .05 * o["default"].lerp(k.lrScannerStrength(this.currentLRScanner), A.lrScannerStrength(this.currentLRScanner), O),
                            v[S] = .6 * o["default"].lerp(k.radius, A.radius, O)
                    }
                    this._heaters = [new e.PointCloud(b,this._heaterBaseMaterial)];
                    for (var I = 0, N = this._heaters; I < N.length; I++) {
                        var j = N[I];
                        this._scene.add(j)
                    }
                }
                ,
                t.prototype.disposeOfHeatTexture = function() {
                    this._heatTexture && (this._heatTexture.dispose(),
                    this._heatTexture = null)
                }
                ,
                t.prototype.createHeatTexture = function(t, n) {
                    this.disposeOfHeatTexture(),
                    this.width = t,
                    this.height = n,
                    this._heatTexture = new e.WebGLRenderTarget(t,n,{
                        wrapS: e.ClampToEdgeWrapping,
                        wrapT: e.ClampToEdgeWrapping,
                        minFilter: e.NearestFilter,
                        magFilter: e.NearestFilter,
                        format: e.RGBFormat,
                        type: e.UnsignedByteType,
                        stencilBuffer: !1
                    }),
                    this._heatTextureMaterial.uniforms.map.value = this._heatTexture
                }
                ,
                t.prototype.createHeaterMaterial = function() {
                    var t = "\n					uniform float basePointSize;\n					attribute float radius;\n					attribute float intensity;\n					attribute vec3 color;\n					varying float vIntensity;\n					varying vec3 vColor;\n					\n					void main() {\n						vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n						gl_Position = projectionMatrix * wpos;\n						float z = -wpos.z;\n						gl_PointSize = basePointSize + radius/z;\n						vIntensity = intensity;\n						vColor = color;\n					}"
                      , n = "\n					#ifdef GL_ES\n					precision mediump float;\n					#endif\n					\n					uniform float time;\n					varying float vIntensity;\n					varying vec3 vColor;\n					\n					float rand(vec2 co){\n						return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n					}\n\n					void main() {\n						float x = gl_PointCoord.x - 0.5;\n						float y = gl_PointCoord.y - 0.5;\n						float r = 2.0*sqrt(x*x+y*y);\n						float d;\n						if (r < 1.0) {\n							d = mix(1.0,0.0,r);\n						} else {\n							d = 0.0;\n						}\n						float k = fract(rand(floor(gl_FragCoord.xy)) + time*0.2);\n						float lum = mix(0.5,1.0,clamp(k,0.0,1.0));							\n											\n						gl_FragColor = vec4(lum*vColor, d*vIntensity);\n					}"
                      , i = new e.ShaderMaterial({
                        uniforms: {
                            basePointSize: {
                                type: "f",
                                value: 2
                            },
                            time: {
                                type: "f",
                                value: 0
                            }
                        },
                        attributes: {
                            radius: {
                                type: "f",
                                value: []
                            },
                            intensity: {
                                type: "f",
                                value: []
                            },
                            color: {
                                type: "c",
                                value: []
                            }
                        },
                        vertexShader: t,
                        fragmentShader: n
                    });
                    i.transparent = !0,
                    i.blending = e.AdditiveBlending,
                    i.depthTest = !1,
                    this._heaterBaseMaterial = i
                }
                ,
                t.prototype.createHeatTextureMaterial = function() {
                    var t = "\n					varying vec2 texcoord;\n					void main() {\n						vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n						gl_Position = projectionMatrix * wpos;\n						texcoord = uv;\n					}"
                      , n = "\n					uniform sampler2D map;\n					uniform float intensity;\n					uniform float width;\n					uniform float height;\n					uniform float time;\n					uniform float timeShowing;\n					uniform float timeHiding;\n					varying vec2 texcoord;\n					\n					float f(float x) {\n						float a = 16.0*(x - floor(x));\n						return a < 1.0 ? 0.5+0.5*a : a < 15.0 ? 1.0 : 0.5+0.5*(16.0-a);\n					}\n					\n					float rand(vec2 co){\n						return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n					}\n					\n					void main() {\n						vec4 col = texture2D( map, texcoord );\n						float u = texcoord.x * width;\n						float v = texcoord.y * height;\n						\n						float transition = timeShowing > timeHiding ? 1.0 : 0.0;\n						float delay = 0.5;\n						\n						if(timeShowing + delay > time) {\n							float k = max(0.0, (time - timeShowing) / delay);\n							float h = floor (v) / height;\n							float w = floor (u) / width;\n							float q = 1.0;//floor(time*10.0);\n							float r = rand(vec2(w*q,h*q));\n							\n							transition = k*k >= r*h ? k : 0.0;\n						}\n						\n						if(timeHiding + delay > time) {\n							float k = 1.0-max(0.0, (time - timeHiding) / delay);\n							float h = floor (v) / height;\n							float w = floor (u) / width;\n							float q = 1.0;//floor(time*10.0);\n							float r = rand(vec2(w*q,h*q));\n							\n							transition = k*k >= r*h ? k : 0.0;\n						}\n						\n		    			gl_FragColor = vec4(max(col.rgb,vec3(0.06,0.06,0.12)), col.a*transition*intensity*f(u)*f(v));\n					}"
                      , i = new e.ShaderMaterial({
                        uniforms: {
                            map: {
                                type: "t",
                                value: this._heatTexture
                            },
                            intensity: {
                                type: "f",
                                value: 1
                            },
                            width: {
                                type: "f",
                                value: 1
                            },
                            height: {
                                type: "f",
                                value: 1
                            },
                            time: {
                                type: "f",
                                value: 0
                            },
                            timeShowing: {
                                type: "f",
                                value: -50
                            },
                            timeHiding: {
                                type: "f",
                                value: -50
                            }
                        },
                        vertexShader: t,
                        fragmentShader: n
                    });
                    i.transparent = !0,
                    i.blending = e.AdditiveBlending,
                    i.depthTest = !1,
                    this._heatTextureMaterial = i
                }
                ,
                t.prototype.createMeshHeatTexture = function(t, n) {
                    this._meshHeatTexture = new e.Mesh(s["default"].makeQuad(1),this._heatTextureMaterial),
                    this.camera.add(this._meshHeatTexture),
                    this._meshHeatTexture.position.set(0, 0, -1),
                    this.resize(t, n)
                }
                ,
                t.prototype.resize = function(e, t) {
                    var n = 16;
                    this.width = e,
                    this.height = t;
                    var i = Math.floor(e / n)
                      , r = Math.floor(t / n);
                    this._heatTextureMaterial.uniforms.width.value = i,
                    this._heatTextureMaterial.uniforms.height.value = r,
                    this.createHeatTexture(i, r);
                    var o = Math.tan(.5 * this.camera.fov * Math.PI / 180)
                      , a = this.camera.aspect;
                    this._meshHeatTexture.scale.set(a * o, o, 1)
                }
                ,
                t.prototype.updateSelection = function() {
                    this.controlAPI.lrScannerHeatmap.lifeforms ? (this.showLRScanner = !0,
                    this.currentLRScanner = a.HeatmapEnum.lifeforms) : this.controlAPI.lrScannerHeatmap.economy ? (this.showLRScanner = !0,
                    this.currentLRScanner = a.HeatmapEnum.economy) : this.controlAPI.lrScannerHeatmap.crime ? (this.showLRScanner = !0,
                    this.currentLRScanner = a.HeatmapEnum.crime) : this.showLRScanner = !1,
                    this.showFactions = !1;
                    for (var e in this.controlAPI.factionHeatmap)
                        this.controlAPI.factionHeatmap[e] && (this.showFactions = !0);
                    this._content = this.showFactions ? c.faction : this.showLRScanner ? c.longRange : c.none,
                    this.state === i.inSystem && (this._content != c.none && this.createHeaters(this._starSystem, this._bodies),
                    this.show(this._content != c.none))
                }
                ,
                t.prototype.update = function(e, t) {
                    this.visible && (this._heaterBaseMaterial.uniforms.time.value = e,
                    this._heatTextureMaterial.uniforms.time.value = e,
                    this.renderer.render(this._scene, this.camera, this._heatTexture, !0)),
                    this.timer.update(e, t)
                }
                ,
                Object.defineProperty(t.prototype, "visible", {
                    get: function() {
                        return this._meshHeatTexture.visible
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.show = function(e) {
                    if (e || this.lastShow)
                        if (this.state == i.inSystem) {
                            var t = this._previousContent == this._content ? 0 : 1;
                            this._heatTextureMaterial.uniforms.timeShowing.value = e ? t * l.time : -50,
                            this._heatTextureMaterial.uniforms.timeHiding.value = e ? -50 : t * l.time,
                            this._meshHeatTexture.visible = !0,
                            this._heatTextureMaterial.uniforms.intensity.value = 1
                        } else
                            this._meshHeatTexture.visible = e,
                            this._heatTextureMaterial.uniforms.intensity.value = e ? 1 : 0;
                    else
                        ;e ? this.lastShow ? this.controlAPI.dispatchSoundEvent("UpdateHeatmap") : this.controlAPI.dispatchSoundEvent("ShowHeatmap") : this.controlAPI.dispatchSoundEvent("HideHeatmap"),
                    this.lastShow = e,
                    this._previousContent = this._content
                }
                ,
                t.prototype.beginIntersystem = function() {
                    this.state = i.enteringSystem,
                    this._content = c.none,
                    this._previousContent = c.none
                }
                ,
                t.prototype.endIntersystem = function() {
                    this.state = i.inSystem
                }
                ,
                t.prototype.leftStarSystem = function() {
                    this.state = i.leavingSystem,
                    this._meshHeatTexture.visible = !1
                }
                ,
                t.prototype.addToGUI = function(e) {
                    var t = this
                      , n = e.addFolder("Heatmap config");
                    n.add(this, "density", 1, 100).onChange(function() {
                        return t.updateSelection()
                    }),
                    n.add(this, "curvature", 0, 2).onChange(function() {
                        return t.updateSelection()
                    })
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = u
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = function() {
                function t() {}
                return t.makeJumpPointMaterial = function(t) {
                    t = t || {};
                    var i = new e.ShaderMaterial({
                        uniforms: {
                            time: {
                                type: "f",
                                value: 0
                            },
                            map: {
                                type: "t",
                                value: t.map
                            },
                            fadedU: {
                                type: "f",
                                value: t.fadedU || 4
                            }
                        },
                        vertexShader: n(88),
                        fragmentShader: n(89)
                    });
                    return i.transparent = !0,
                    i.blending = e.AdditiveBlending,
                    i.depthTest = !0,
                    i
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = i
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        e.exports = "varying vec2 texcoord;\nvoid main() {\n	vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * wpos;\n	texcoord = vec2(uv.x, uv.y);\n}"
    }
    , function(e, t) {
        e.exports = "uniform float time;\nuniform sampler2D map;\nuniform float fadedU;\nvarying vec2 texcoord;\n\nfloat speed = 0.3;\nfloat density = 0.29;\nfloat size = 3.1;\n\nfloat rand(vec2 co){\n	\n	return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nfloat noisemap(vec2 uv, float sizeFactor, float densityFactor, float speedFactor) {\n	vec2 vf = vec2(uv.x + time * speedFactor * speed, uv.y)*(sizeFactor * 2. * size);	\n	vec2 v = vec2(floor(vf.x), floor(vf.y));\n	vec2 f = vf-v;	\n	float r = 2.0*distance(f, vec2(0.5, 0.5));\n	float d = 1.0 - min(r, 1.0);\n	float p = rand(v);\n	p = p < densityFactor * 3. * density ? d*sin(3.14159 * abs(uv.y - 0.5)) : 0.0;\n	return p;\n}\n\n\nvoid main() {\n	vec2 uv = vec2(0.*time+texcoord.x, texcoord.y);\n	float alpha = texcoord.x < fadedU? (fadedU-texcoord.x)/fadedU : 0.0;\n\n	float c = 1.0 - 2.0 * abs(uv.y - 0.5);\n	vec3 tc = 0.5*vec3(67.,56.,31.)/256.; //43381e\n	vec3 tcr = 5.*vec3(65.,33.,0.)/256.; //#2f2100\n	vec4 col = \n		c*vec4(tcr-vec3(0.,0.05,0.),  1.) * noisemap(uv, 6.0, 0.3, 2.0) +\n		c*vec4(tcr,  1.) * noisemap(uv, 10.0, 0.3, 3.0) +\n		c*vec4(tcr+vec3(0.,0.05,0.),  1.) * noisemap(uv, 16.0, 0.3, 4.0) +\n		vec4(c*c*tc*2.,1.0);\n\n	gl_FragColor = vec4(col.rgb*alpha, col.a);\n}\n"
    }
    , function(e, t, n) {
        (function(e) {
            var i = n(32)
              , r = function() {
                function t(e) {
                    this.prefab = e,
                    this.info = null,
                    this.main = null,
                    this.materials = [],
                    this.colors = [],
                    this.highlightColor = "rgb(255,50,0)",
                    this.hasHighlight = !1,
                    this.main = e.clone();
                    var t = i["default"].getMaterialStartingWith(this.main.model, "AdditiveSelect");
                    for (var n in t) {
                        var r = t[n].clone();
                        i["default"].replaceMaterial(this.main.model, n, r),
                        this.materials.push(r),
                        this.colors.push(r.color.clone().getStyle())
                    }
                }
                return Object.defineProperty(t.prototype, "model", {
                    get: function() {
                        return this.main.model
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                t.prototype.setInfo = function(t) {
                    this.info = t;
                    var n = t.latitude * Math.PI / 180
                      , i = -t.longitude * Math.PI / 180
                      , r = Math.sin(n)
                      , o = Math.cos(n)
                      , a = Math.sin(i)
                      , s = Math.cos(i)
                      , l = new e.Vector3(o * s,r,o * a)
                      , c = new e.Vector3(0,0,1)
                      , u = (new e.Quaternion).setFromUnitVectors(c, l);
                    return this.model.quaternion.copy(u),
                    this
                }
                ,
                t.prototype.setHighlight = function() {
                    this.hasHighlight = !0;
                    for (var e = 0, t = this.materials; e < t.length; e++) {
                        var n = t[e];
                        n.color.set(this.highlightColor)
                    }
                }
                ,
                t.prototype.releaseHighlight = function() {
                    this.hasHighlight = !1;
                    for (var e = 0; e < this.materials.length; e++)
                        this.materials[e].color.set(this.colors[e])
                }
                ,
                t.prototype.update = function(e, t, n) {
                    this.main.update(e, t, n)
                }
                ,
                t.prototype.addToGUI = function(e, t) {
                    this.main.addToGUI && this.main.addToGUI(e, t)
                }
                ,
                t.prototype.dispose = function() {
                    this.main.dispose();
                    for (var e = 0, t = this.materials; e < t.length; e++) {
                        var n = t[e];
                        n.dispose()
                    }
                }
                ,
                t.prototype.clone = function() {
                    return new t(this.prefab)
                }
                ,
                t
            }();
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = r
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(63)
              , a = n(56)
              , s = n(52)
              , l = n(61)
              , c = function(t) {
                function n(n, i, r, o) {
                    t.call(this),
                    this.width = n,
                    this.height = i,
                    this.camera = r,
                    this.renderer = o,
                    this._effectTexture = null,
                    this.timer = new a["default"],
                    this._scene = new e.Scene,
                    this.createEffectTextureMaterial(),
                    this.createMeshEffectTexture(n, i),
                    this.show(!1)
                }
                return i(n, t),
                Object.defineProperty(n.prototype, "sw", {
                    get: function() {
                        return Math.floor(this.width / 2)
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "sh", {
                    get: function() {
                        return Math.floor(this.height / 2)
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.disposeOfEffectTexture = function() {
                    this._effectTexture && (this._effectTexture.dispose(),
                    this._effectTexture = null)
                }
                ,
                n.prototype.createEffectTexture = function(t, n) {
                    this.disposeOfEffectTexture(),
                    this._effectTexture = new e.WebGLRenderTarget(t,n,{
                        wrapS: e.ClampToEdgeWrapping,
                        wrapT: e.ClampToEdgeWrapping,
                        minFilter: e.NearestFilter,
                        magFilter: e.NearestFilter,
                        format: e.RGBFormat,
                        type: e.UnsignedByteType,
                        stencilBuffer: !1
                    }),
                    this._effectTextureMaterial.uniforms.map.value = this._effectTexture
                }
                ,
                n.prototype.createEffectTextureMaterial = function() {
                    var t = "\n					varying vec2 texcoord;\n					void main() {\n						vec4 wpos = modelViewMatrix * vec4( position, 1.0 );\n						gl_Position = projectionMatrix * wpos;\n						texcoord = uv;\n					}"
                      , n = "\n					uniform sampler2D map;\n					uniform float intensity;\n					uniform float width;\n					uniform float height;\n					uniform float time;\n					uniform float timeShowing;\n					uniform float timeHiding;\n					varying vec2 texcoord;\n					void main() {\n						vec4 col = texture2D( map, texcoord );\n						\n		    			gl_FragColor = vec4(col.rgb, col.a*intensity);\n					}"
                      , i = new e.ShaderMaterial({
                        uniforms: {
                            map: {
                                type: "t",
                                value: this._effectTexture
                            },
                            intensity: {
                                type: "f",
                                value: 1
                            },
                            width: {
                                type: "f",
                                value: 1
                            },
                            height: {
                                type: "f",
                                value: 1
                            },
                            time: {
                                type: "f",
                                value: 0
                            },
                            timeShowing: {
                                type: "f",
                                value: -50
                            },
                            timeHiding: {
                                type: "f",
                                value: -50
                            }
                        },
                        vertexShader: t,
                        fragmentShader: n
                    });
                    i.transparent = !0,
                    i.blending = e.AdditiveBlending,
                    i.depthTest = !1,
                    this._effectTextureMaterial = i
                }
                ,
                n.prototype.createMeshEffectTexture = function(t, n) {
                    this._meshEffectTexture = new e.Mesh(s["default"].makeQuad(1),this._effectTextureMaterial),
                    this.camera.add(this._meshEffectTexture),
                    this._meshEffectTexture.position.set(0, 0, -1),
                    this.resize(t, n)
                }
                ,
                n.prototype.resize = function(e, t) {
                    this.width = e,
                    this.height = t;
                    var n = this.sw
                      , i = this.sh;
                    this._effectTextureMaterial.uniforms.width.value = n,
                    this._effectTextureMaterial.uniforms.height.value = i,
                    this.createEffectTexture(n, i);
                    var r = Math.tan(.5 * this.camera.fov * Math.PI / 180)
                      , o = this.camera.aspect;
                    this._meshEffectTexture.scale.set(o * r, r, 1),
                    this.effect && this.effect.resize(n, i)
                }
                ,
                n.prototype.update = function(e, t) {
                    this.timer.update(e, t),
                    this.visible && this.effect && (this.effect.update(this.camera, e, t),
                    this.effect.model.position.copy(this._meshEffectTexture.getWorldPosition()),
                    this.effect.model.rotation.copy(this._meshEffectTexture.getWorldRotation()),
                    this.effect.model.scale.copy(this._meshEffectTexture.getWorldScale()),
                    this._effectTextureMaterial.uniforms.time.value = e,
                    this.renderer.render(this._scene, this.camera, this._effectTexture, !0))
                }
                ,
                Object.defineProperty(n.prototype, "visible", {
                    get: function() {
                        return this._meshEffectTexture.visible
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.show = function(e) {
                    this._effectTextureMaterial.uniforms.intensity.value = 1,
                    this._meshEffectTexture.visible = e
                }
                ,
                n.prototype.addToGUI = function(e) {}
                ,
                n.prototype.showEffect = function(e, t) {
                    this.hideEffect(),
                    this.effect = new o["default"](e,e,new l["default"]({},e),t,this.sw,this.sh),
                    this._scene.add(this.effect.model),
                    this.show(!0)
                }
                ,
                n.prototype.hideEffect = function() {
                    this.effect && (this._scene.remove(this.effect.model),
                    this.effect.dispose(),
                    this.effect = null,
                    this.show(!1))
                }
                ,
                n.prototype.hideGraduallyEffect = function(e) {
                    var t = this;
                    this.timer.clear(),
                    this.timer.addPeriod(0, e, function(e) {
                        t._effectTextureMaterial.uniforms.intensity.value = 1 - e
                    }, function() {
                        return t.hideEffect()
                    })
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = c
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(21)
              , o = n(93)
              , a = n(20)
              , s = n(23)
              , l = n(56)
              , c = function(t) {
                function n(e, n) {
                    t.call(this),
                    this.sm = e,
                    this.env = n,
                    this._timer = new l["default"]
                }
                return i(n, t),
                n.prototype.becomeActive = function(t) {
                    var n = this;
                    this._selectedStar = t,
                    this.env.controlAPI.dispatchSoundEvent("SelectSystem"),
                    this._selectedStar.loadDetail().then(function() {
                        n.env.camctl.setTargetPosition(n._selectedStar.obj3d.position),
                        n._selectedStar.initStarSystem(),
                        n.env.camctl.setZoomLimit(o["default"].zoomMin, a["default"].zoomMax(n.env.camctl.controls2D)),
                        n.env.camctl.resetPan(),
                        n.env.camctl.useCumulativePan = !0,
                        n.env.camctl.setSmoothDamp(s["default"].smoothDampTransition),
                        n.env.camctl.setTargetZoom(o["default"].zoom);
                        var t = n.env.controlAPI.goal;
                        t.routeInView && t.isSystemView && t.systemCode && t.systemCode === n._selectedStar.code && n._selectedStar.starSystem.augmentTargetZoomToSeeRoute(n.env.camctl),
                        !t.done && t.systemCode === n._selectedStar.code && t.camInfo && (n.env.camctl.cameraInfo = t.camInfo);
                        n.env.galaxy.addDust(n._selectedStar.obj3d.position),
                        n._selectedStar.starSystem.beginIntersystem();
                        var i = n.env.lightColor.clone()
                          , r = new e.Color(n._selectedStar.lightColorStr);
                        n.env.controlAPI.dispatchSoundEvent("StopGalaxyAmbiance"),
                        n.env.controlAPI.dispatchSoundEvent("EnterStarSystemStart"),
                        n._timer.addPeriod(0, 1.5, function(e) {
                            n.env.galaxy.presenceRatio = 1 - e,
                            n._selectedStar.starSystem.presenceRatio = e,
                            n.env.setLightColor(i.clone().lerp(r, e))
                        }),
                        n._timer.add(1.5, function() {
                            n._selectedStar.starSystem.showLabel(!0),
                            n._selectedStar.starSystem.showOrbitals(.5, .1) && n.env.controlAPI.dispatchSoundEvent("ShowOrbitals"),
                            n.env.postProcess.setUndiscoveredFX(n._selectedStar.starSystem.isUndiscovered())
                        }),
                        n._timer.add(1.9, function() {
                            n.env.camctl.setPitch(n.env.camctl.controls2D ? 0 : o["default"].pitch),
                            n.sm.changeState("StateStarSystem", n._selectedStar),
                            n.env.controlAPI.dispatchSoundEvent("EnterStarSystemCompleted"),
                            n.env.controlAPI.dispatchSoundEvent("StartStarSystemAmbiance")
                        })
                    })["catch"](function(e) {
                        console.error(e.stack),
                        n.sm.changeState("StateGalaxy"),
                        n.env.controlAPI.goal.abort()
                    })
                }
                ,
                n.prototype.becomeInactive = function() {
                    this._selectedStar.starSystem && this._selectedStar.starSystem.endIntersystem(),
                    this._selectedStar = null,
                    this._timer.clear(),
                    this.env.gameLoop.resetGUI()
                }
                ,
                n.prototype.update = function(e, t) {
                    this._timer.update(e, t)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = c
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(21)
          , o = n(22)
          , a = n(23)
          , s = function(e) {
            function t(t, n) {
                e.call(this),
                this.sm = t,
                this.env = n
            }
            return i(t, e),
            t.prototype.becomeActive = function(e) {
                this._selectedStar = e,
                this.env.galaxy.systemCurrentlyViewed = this._selectedStar,
                this.env.galaxy.view = o.ViewEnum.system,
                this.env.camctl.setTargetPosition(this._selectedStar.obj3d.position),
                this._selectedStar.initStarSystem(),
                this.env.camctl.setZoomLimit(t.zoomMin, this._selectedStar.starSystem.computeCameraMaxDistance(this.env.camera));
                var n = this.env.controlAPI.goal;
                n.routeInView && n.isSystemView && n.systemCode && n.systemCode === this._selectedStar.code || this.env.camctl.setTargetZoom(t.zoom),
                this.env.camctl.setPitch(this.env.camctl.controls2D ? 0 : t.pitch),
                this.env.camctl.previous3dPitch = t.pitch,
                this.env.camctl.resetPan(),
                this.env.camctl.useCumulativePan = !0,
                this.env.camctl.setSmoothDamp(a["default"].smoothDampNormal),
                this._selectedStar.starSystem.showLabel(!0),
                this.env.galaxy.showJumpPointMesh(!1),
                this.env.galaxy.showGrid(!1),
                this.env.galaxy.translateWorld(this._selectedStar.obj3d.position.clone().multiplyScalar(-1))
            }
            ,
            t.prototype.becomeInactive = function() {
                this._selectedStar = null,
                this.env.controlAPI.dispatchHoverOut()
            }
            ,
            t.prototype.update = function(e, t) {
                var n = this._selectedStar.starSystem.pickCelestialBody(this.env.mouse.positionInVP, this.env.camera);
                this._selectedStar.starSystem.bodyHoveredSticky || (n && !this.env.mouse.mouseB ? n.isJumpPoint && n.otherStar ? this.env.controlAPI.dispatchHoverJumpPoint(n.star.code, n.code, n.otherStar.code) : this.env.controlAPI.dispatchHoverBody(n.star.code, n.code) : this.env.controlAPI.dispatchHoverOut()),
                this.env.mouse.mouseClick ? (this._selectedStar.starSystem.setBodyHovered(null),
                null != n ? n.isJumpPoint && n.otherStar ? this.env.controlAPI.dispatchSelectJumpPoint(n.star.code, n.code, n.otherStar.code, this.env.mouse.clickButton) : this.env.controlAPI.dispatchSelectBody(n.star.code, n.code, this.env.mouse.clickButton) : (this.env.controlAPI.dispatchSelectNothing(this.env.mouse.clickButton),
                this.env.controlAPI.dispatchSoundEvent("SelectNothing"))) : this._selectedStar.starSystem.setBodyHovered(n),
                this.env.camctl.controls2D && this.env.camctl.set2dView();
                var i = this.env.controlAPI.goal;
                if (!i.done)
                    if (i.isGalacticView)
                        this.sm.changeState("StateLeaveStarSystem", this._selectedStar);
                    else if (i.systemCode && i.systemCode !== this._selectedStar.code)
                        this.sm.changeState("StateSlideJumpPoint", {
                            oldStar: this._selectedStar,
                            newStar: this.env.galaxy.stars[i.systemCode]
                        });
                    else if (i.isSystemView)
                        i.camInfo && (this.env.camctl.cameraInfo = i.camInfo),
                        i.setDone();
                    else if (i.isPlanetaryView) {
                        var r = this._selectedStar.starSystem.getBody(i.planetaryCode);
                        r && this.sm.changeState("StateCelestialBody", r)
                    }
            }
            ,
            t.zoom = .002,
            t.zoomMin = 3e-4,
            t.zoomMax = .2,
            t.pitch = 60,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = s
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(21)
              , o = n(56)
              , a = n(22)
              , s = n(93)
              , l = n(20)
              , c = n(23)
              , u = n(26)
              , h = function(t) {
                function n(e, n) {
                    t.call(this),
                    this.sm = e,
                    this.env = n,
                    this._timer = new o["default"]
                }
                return i(n, t),
                n.prototype.becomeActive = function(t) {
                    var n = this;
                    this._selectedStar = t,
                    this.env.galaxy.view = a.ViewEnum.galaxy,
                    this.env.camctl.setZoomLimit(s["default"].zoomMin, l["default"].zoomMax(this.env.camctl.controls2D)),
                    this.env.camctl.setPitch(this.env.camctl.controls2D ? 0 : l["default"].pitch),
                    this.env.camctl.resetPan(),
                    this.env.camctl.useCumulativePan = !0,
                    this.env.camctl.setSmoothDamp(c["default"].smoothDampTransition),
                    this._selectedStar.starSystem.showLabel(!1);
                    var i = this.env.camctl.targetZoom
                      , r = this.env.lightColor.clone()
                      , o = new e.Color(1,1,1);
                    this.env.postProcess.setUndiscoveredFX(!1),
                    this.env.controlAPI.dispatchSoundEvent("StopStarSystemAmbiance"),
                    this._timer.addPeriod(0, 1, function(e) {
                        n.env.galaxy.presenceRatio = e,
                        n.env.setLightColor(r.clone().lerp(o, e)),
                        n.env.camctl.setTargetZoom(u["default"].lerp(i, l["default"].zoom(n.env.camctl.controls2D), e))
                    }),
                    this._selectedStar.destroyStarSystem(1.5),
                    this.env.controlAPI.dispatchSoundEvent("LeaveStarSystemToGalaxyStart"),
                    this._timer.add(2, function() {
                        n.env.controlAPI.dispatchSoundEvent("LeaveStarSystemToGalaxyCompleted"),
                        n.env.controlAPI.dispatchSoundEvent("StartGalaxyAmbiance"),
                        n.sm.changeState("StateGalaxy")
                    })
                }
                ,
                n.prototype.becomeInactive = function() {
                    this._selectedStar = null,
                    this._timer.clear(),
                    this.env.gameLoop.resetGUI()
                }
                ,
                n.prototype.update = function(e, t) {
                    this._timer.update(e, t)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = h
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(21)
              , o = function(t) {
                function n(e, n) {
                    t.call(this),
                    this.sm = e,
                    this.env = n,
                    this._selectedCelestialBody = null
                }
                return i(n, t),
                n.prototype.becomeActive = function(e) {
                    this._selectedCelestialBody = e;
                    var t = this._selectedCelestialBody;
                    this.env.controlAPI.dispatchSoundEvent(t.isStar ? "SelectStar" : t.isPlanet ? "SelectPlanet" : t.isMoon ? "SelectMoon" : t.isBelt ? "SelectBelt" : t.isAsteroidField ? "SelectBelt" : t.isJumpPoint ? "SelectJumpPoint" : t.isSpaceStation ? "SelectSpaceStation" : ""),
                    this.env.camctl.setTargetPosition(this._selectedCelestialBody.worldPosition),
                    this.env.camctl.setTargetZoom(n.zoom),
                    this.env.camctl.setZoomLimit(n.zoomMin, n.zoomMax),
                    this.env.camctl.setPitch(this.env.camctl.controls2D ? 0 : n.pitch),
                    this.env.camctl.previous3dPitch = n.pitch,
                    this.env.camctl.resetPan();
                    var i = this.env.controlAPI.goal;
                    !i.done && i.isPlanetaryView && i.planetaryCode === this._selectedCelestialBody.code && (i.camInfo ? this.env.camctl.cameraInfo = i.camInfo : i.bodyPixelSize && this.setCameraZoomForBodyPixelSize(),
                    i.setDone()),
                    this._selectedCelestialBody.showLandingZone()
                }
                ,
                n.prototype.setCameraZoomForBodyPixelSize = function() {
                    var e = this.env.controlAPI.goal;
                    if (e.bodyPixelSize) {
                        var t = 2 * this._selectedCelestialBody.worldRadius / (e.bodyPixelSize * this.env.galaxy.pixelSizeOverZ.x);
                        this.env.camctl.setTargetZoom(t),
                        this.env.camctl.setZoomLimit(t, t)
                    }
                }
                ,
                n.prototype.becomeInactive = function() {
                    this._selectedCelestialBody = null,
                    this.env.controlAPI.dispatchHoverOut()
                }
                ,
                n.prototype.update = function(t, i) {
                    var r = this._selectedCelestialBody.starSystem.pickCelestialBody(this.env.mouse.positionInVP, this.env.camera);
                    this._selectedCelestialBody.starSystem.bodyHoveredSticky || (r && !this.env.mouse.mouseB ? r.isJumpPoint && r.otherStar ? this.env.controlAPI.dispatchHoverJumpPoint(r.star.code, r.code, r.otherStar.code) : this.env.controlAPI.dispatchHoverBody(r.star.code, r.code) : this.env.controlAPI.dispatchHoverOut()),
                    this.env.mouse.mouseClick ? (this._selectedCelestialBody.starSystem.setBodyHovered(null),
                    r ? r.isJumpPoint ? this.env.controlAPI.dispatchSelectJumpPoint(r.star.code, r.code, r.otherStar && r.otherStar.code, this.env.mouse.clickButton) : this.env.controlAPI.dispatchSelectBody(r.star.code, r.code, this.env.mouse.clickButton) : (this.env.controlAPI.dispatchSelectNothing(this.env.mouse.clickButton),
                    this.env.controlAPI.dispatchSoundEvent("SelectNothing"))) : this._selectedCelestialBody.starSystem.setBodyHovered(null),
                    this.env.camctl.controls2D && this.env.camctl.set2dView();
                    var o = this.env.controlAPI.goal;
                    if (!o.done)
                        if (this._selectedCelestialBody.isJumpPoint && (o.isSystemView || o.isPlanetaryView) && this._selectedCelestialBody.otherStar && o.systemCode === this._selectedCelestialBody.otherStar.code)
                            this.sm.changeState("StateEnterJumpPoint", this._selectedCelestialBody);
                        else if (o.isGalacticView || o.systemCode && o.systemCode !== this._selectedCelestialBody.starSystem.mainStar.code)
                            this.sm.changeState("StateLeaveStarSystem", this._selectedCelestialBody.starSystem.mainStar);
                        else if (o.isSystemView)
                            this.sm.changeState("StateStarSystem", this._selectedCelestialBody.starSystem.mainStar);
                        else if (o.isPlanetaryView)
                            if (o.planetaryCode !== this._selectedCelestialBody.code) {
                                var a = this._selectedCelestialBody.starSystem.getBody(o.planetaryCode);
                                a && this.sm.changeState("StateCelestialBody", a)
                            } else
                                o.camInfo ? this.env.camctl.cameraInfo = o.camInfo : o.bodyPixelSize ? this.setCameraZoomForBodyPixelSize() : (this.env.camctl.setTargetZoom(n.zoom),
                                this.env.camctl.setZoomLimit(n.zoomMin, n.zoomMax)),
                                o.setDone();
                    var s = this._selectedCelestialBody.landingZoneWithHighlight;
                    if (s) {
                        s.model.updateMatrixWorld(!0);
                        var l = new e.Vector3(0,0,1).applyMatrix4(s.model.matrixWorld).sub(s.model.getWorldPosition())
                          , c = Math.atan2(l.x, l.z)
                          , u = Math.atan2(Math.sqrt(l.x * l.x + l.z * l.z), l.y);
                        this.env.camctl.setTheta(180 * c / Math.PI),
                        this.env.camctl.setPitch(180 * u / Math.PI)
                    }
                }
                ,
                n.zoom = 3e-4,
                n.zoomMin = 12e-5,
                n.zoomMax = 3e-4,
                n.pitch = 60,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = o
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(21)
              , o = n(56)
              , a = n(26)
              , s = n(93)
              , l = n(20)
              , c = n(23)
              , u = function(t) {
                function n(e, n) {
                    t.call(this),
                    this.sm = e,
                    this.env = n,
                    this._selectedCelestialBody = null,
                    this._timer = new o["default"]
                }
                return i(n, t),
                n.prototype.becomeActive = function(t) {
                    var n = this;
                    this._selectedCelestialBody = t,
                    this._selectedStar = t.otherStar,
                    this._selectedStar.loadDetail().then(function() {
                        n.env.camctl.resetPan();
                        var i = 1;
                        n._selectedStar.initStarSystem();
                        var r = n._selectedStar.obj3d.position.clone().sub(t.star.obj3d.position)
                          , o = r.length()
                          , u = new e.Vector3(Math.random() - .5,Math.random() - .5,Math.random() - .5).projectOnPlane(r).normalize();
                        n.env.camctl.setThetaPhiTargetToLookThroughTargetTowardsObjective(n._selectedStar.obj3d.position.clone().add(u.multiplyScalar(.5 * o))),
                        n.env.controlAPI.dispatchSoundEvent("EnterJumpPointStart"),
                        n.env.controlAPI.dispatchSoundEvent("StopStarSystemAmbiance");
                        var h = n._selectedCelestialBody.jumpPoint.power
                          , d = new e.Group;
                        d.matrixAutoUpdate = !1,
                        d.rotationAutoUpdate = !1,
                        n._timer.addPeriod(.5, .5, function(e) {
                            var t = a["default"].lerp(1, 4, e)
                              , i = t * t;
                            n._selectedCelestialBody.obj3d.scale.set(i, i, i),
                            n._selectedCelestialBody.jumpPoint.power = (1 - e) * h
                        }),
                        n._timer.add(.8, function() {
                            d.matrix.copy(n.env.camera.matrixWorldInverse.clone().multiply(n._selectedCelestialBody.obj3d.parent.matrixWorld)),
                            n.env.camera.add(d),
                            d.add(n._selectedCelestialBody.obj3d),
                            n._selectedCelestialBody.jumpPoint.updateRotation = !1,
                            n._selectedCelestialBody.jumpPoint.removeDepthWrite()
                        }),
                        n._timer.add(.8, function() {
                            n.env.galaxy.addJumpEffect(n._selectedStar.obj3d.position)
                        }),
                        n._timer.add(.8, function() {
                            n.env.postProcess.doJumpRipple()
                        }),
                        n._timer.addPeriod(.8, 2.1, function(e) {
                            n._selectedCelestialBody.jumpPoint.alpha = 1 - e
                        }),
                        n._timer.add(i, function() {
                            n.env.controlAPI.dispatchSoundEvent("EnterJumpPointMoveCamera"),
                            n.env.camctl.setTargetPosition(n._selectedStar.obj3d.position),
                            n.env.camctl.setZoomLimit(s["default"].zoomMin, l["default"].zoomMax(n.env.camctl.controls2D)),
                            n.env.camctl.resetPan(),
                            n.env.camctl.useCumulativePan = !0,
                            n.env.camctl.setSmoothDamp(c["default"].smoothDampTransition),
                            n.env.camctl.setTargetZoom(s["default"].zoom),
                            n._selectedStar.starSystem.beginIntersystem();
                            var e = n.env.controlAPI.goal;
                            !e.done && e.systemCode === n._selectedStar.code && e.camInfo && (n.env.camctl.cameraInfo = e.camInfo),
                            e.routeInView && e.isSystemView && e.systemCode && e.systemCode === n._selectedStar.code && n._selectedStar.starSystem.augmentTargetZoomToSeeRoute(n.env.camctl)
                        }),
                        n._timer.addPeriod(i, 1.5, function(e) {
                            n.env.galaxy.presenceRatio = 1 - e,
                            n._selectedStar.starSystem.presenceRatio = e
                        });
                        var f = n.env.lightColor.clone()
                          , p = new e.Color(n._selectedStar.lightColorStr);
                        n._timer.addPeriod(i + 1, .9, function(e) {
                            n.env.setLightColor(f.clone().lerp(p, e))
                        }),
                        n._timer.add(i + 1.5, function() {
                            n._selectedStar.starSystem.showLabel(!0),
                            n._selectedStar.starSystem.showOrbitals(.5, .1) && n.env.controlAPI.dispatchSoundEvent("ShowOrbitals"),
                            n.env.controlAPI.dispatchSoundEvent("EnterJumpPointLanding"),
                            n.env.postProcess.setUndiscoveredFX(n._selectedStar.starSystem.isUndiscovered())
                        }),
                        n._timer.add(i + 1.9, function() {
                            n.env.camera.remove(d),
                            n.env.camctl.setPitch(s["default"].pitch),
                            n.sm.changeState("StateStarSystem", n._selectedStar),
                            n.env.controlAPI.dispatchSoundEvent("EnterJumpPointCompleted"),
                            n.env.controlAPI.dispatchSoundEvent("StartStarSystemAmbiance")
                        })
                    })["catch"](function(e) {
                        console.error(e.stack),
                        n.sm.changeState("StateStarSystem", n._selectedCelestialBody.star),
                        n.env.controlAPI.goal.abort()
                    })
                }
                ,
                n.prototype.becomeInactive = function() {
                    this._selectedCelestialBody.star.destroyStarSystem(),
                    this._selectedStar.starSystem && this._selectedStar.starSystem.endIntersystem(),
                    this._selectedStar = null,
                    this._timer.clear(),
                    this.env.gameLoop.resetGUI()
                }
                ,
                n.prototype.update = function(e, t) {
                    this._timer.update(e, t),
                    this._starfield && this._starfield.update(e, t)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = u
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(21)
              , o = n(56)
              , a = n(93)
              , s = n(20)
              , l = n(23)
              , c = function(t) {
                function n(e, n) {
                    t.call(this),
                    this.sm = e,
                    this.env = n,
                    this._timer = new o["default"]
                }
                return i(n, t),
                n.prototype.becomeActive = function(t) {
                    var n = this
                      , i = t.oldStar
                      , r = t.newStar;
                    this._oldStar = i,
                    this._selectedStar = r,
                    this._selectedStar.loadDetail().then(function() {
                        n.env.camctl.resetPan(),
                        n._selectedStar.initStarSystem(),
                        n.env.camctl.setPitch(n.env.camctl.controls2D ? 0 : a["default"].pitch),
                        n.env.camctl.setTargetPosition(n._selectedStar.obj3d.position),
                        n.env.camctl.setZoomLimit(a["default"].zoomMin, s["default"].zoomMax(n.env.camctl.controls2D)),
                        n.env.camctl.resetPan(),
                        n.env.camctl.useCumulativePan = !0,
                        n.env.camctl.setSmoothDamp(l["default"].smoothDampSlidel),
                        n.env.camctl.setTargetZoom(a["default"].zoom),
                        n._selectedStar.starSystem.beginIntersystem(),
                        n._oldStar && n._oldStar.starSystem.showLabel(!1);
                        var t = n.env.controlAPI.goal;
                        t.routeInView && t.isSystemView && t.systemCode && t.systemCode === n._selectedStar.code && n._selectedStar.starSystem.augmentTargetZoomToSeeRoute(n.env.camctl),
                        !t.done && t.systemCode === n._selectedStar.code && t.camInfo && (n.env.camctl.cameraInfo = t.camInfo),
                        n.env.controlAPI.dispatchSoundEvent("StopStarSystemAmbiance"),
                        n.env.controlAPI.dispatchSoundEvent("SlideSystem");
                        var i = n.env.lightColor.clone()
                          , r = new e.Color(n._selectedStar.lightColorStr);
                        n._timer.addPeriod(0, .5, function(e) {
                            n.env.setLightColor(i.clone().lerp(r, e))
                        }),
                        n._timer.addPeriod(0, .1, function(e) {
                            n._selectedStar.starSystem.presenceRatio = e,
                            n._oldStar || (n.env.galaxy.presenceRatio = 1 - e)
                        }),
                        n._timer.add(.1, function() {
                            n.env.galaxy.translateWorld(n._selectedStar.obj3d.position.clone().multiplyScalar(-1)),
                            n._selectedStar.starSystem.showLabel(!0),
                            n._selectedStar.starSystem.showOrbitals(0, .1) && n.env.controlAPI.dispatchSoundEvent("ShowOrbitals"),
                            n.env.postProcess.setUndiscoveredFX(n._selectedStar.starSystem.isUndiscovered())
                        }),
                        n._oldStar && n._oldStar.destroyStarSystem(.5),
                        n._timer.add(.5, function() {
                            n.env.controlAPI.dispatchSoundEvent("StartStarSystemAmbiance"),
                            n.sm.changeState("StateStarSystem", n._selectedStar)
                        })
                    })["catch"](function(e) {
                        console.error(e.stack),
                        n.sm.changeState("StateGalaxy"),
                        n.env.controlAPI.goal.abort()
                    })
                }
                ,
                n.prototype.becomeInactive = function() {
                    this._selectedStar.starSystem && this._selectedStar.starSystem.endIntersystem(),
                    this._selectedStar = null,
                    this._timer.clear(),
                    this.env.gameLoop.resetGUI()
                }
                ,
                n.prototype.update = function(e, t) {
                    this._timer.update(e, t),
                    this._starfield && this._starfield.update(e, t)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = c
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = function(t) {
                function n(n) {
                    var i = this;
                    t.call(this),
                    this.mouseUpLB = !1,
                    this.mouseUpRB = !1,
                    this.mouseUpMB = !1,
                    this.mouseDownLB = !1,
                    this.mouseDownRB = !1,
                    this.mouseDownMB = !1,
                    this.mouseLB = !1,
                    this.mouseRB = !1,
                    this.mouseMB = !1,
                    this.lastMouseLB = !1,
                    this.lastMouseRB = !1,
                    this.lastMouseMB = !1,
                    this.mouseClickLB = !1,
                    this.mouseClickRB = !1,
                    this.mouseClickMB = !1,
                    this.mouseDblClickLB = !1,
                    this.mouseDblClickRB = !1,
                    this.mouseDblClickMB = !1,
                    this.dragStartPosition = new e.Vector2,
                    this.dragDelta = new e.Vector2,
                    this.lastPosition = new e.Vector2(1 / 0,1 / 0),
                    this.position = new e.Vector2(1 / 0,1 / 0),
                    this.positionInVP = new e.Vector2(1 / 0,1 / 0),
                    this.positionNormalized = new e.Vector2(1 / 0,1 / 0),
                    this.delta = new e.Vector2,
                    this.enabled = !0,
                    this.clickRegion = 5,
                    this.onMouseDown = function(t) {
                        i.enabled !== !1 && (t.preventDefault(),
                        t.button === e.MOUSE.LEFT ? (i.mouseLB = !0,
                        i.mouseMB = !1,
                        i.mouseRB = !1) : t.button === e.MOUSE.MIDDLE ? (i.mouseLB = !1,
                        i.mouseMB = !0,
                        i.mouseRB = !1) : t.button === e.MOUSE.RIGHT && (i.mouseLB = !1,
                        i.mouseMB = !1,
                        i.mouseRB = !0),
                        i.domElement.addEventListener("mouseup", i.onMouseUp, !1),
                        i.domElement.addEventListener("mouseout", i.onMouseUp, !1))
                    }
                    ,
                    this.onMouseMove = function(e) {
                        i.enabled !== !1 && (i.position.x = e.clientX,
                        i.position.y = e.clientY,
                        i.positionInVP.x = e.clientX / i.element.clientWidth * 2 - 1,
                        i.positionInVP.y = 2 * -(e.clientY / i.element.clientHeight) + 1,
                        i.positionNormalized.x = e.clientX / i.element.clientWidth,
                        i.positionNormalized.y = 1 - e.clientY / i.element.clientHeight,
                        e.preventDefault())
                    }
                    ,
                    this.onMouseUp = function() {
                        i.enabled !== !1 && (i.mouseLB = !1,
                        i.mouseMB = !1,
                        i.mouseRB = !1,
                        i.domElement.removeEventListener("mouseup", i.onMouseUp, !1),
                        i.domElement.removeEventListener("mouseout", i.onMouseUp, !1))
                    }
                    ,
                    this.onMouseWheel = function(e) {
                        i.enabled === !1
                    }
                    ,
                    this.touchstart = function(e) {
                        if (i.enabled !== !1)
                            switch (e.touches.length) {
                            case 1:
                                i.mouseLB = !0,
                                i.mouseMB = !1,
                                i.mouseRB = !1;
                                break;
                            case 2:
                                i.mouseLB = !1,
                                i.mouseMB = !0,
                                i.mouseRB = !1;
                                break;
                            case 3:
                                i.mouseLB = !1,
                                i.mouseMB = !1,
                                i.mouseRB = !0
                            }
                    }
                    ,
                    this.touchmove = function(e) {
                        i.enabled !== !1 && (i.position.x = e.touches[0].pageX,
                        i.position.y = e.touches[0].pageY,
                        i.positionInVP.x = e.clientX / i.element.clientWidth * 2 - 1,
                        i.positionInVP.y = 2 * -(e.clientY / i.element.clientHeight) + 1,
                        e.preventDefault())
                    }
                    ,
                    this.touchend = function() {
                        i.enabled !== !1 && (i.mouseLB = !1,
                        i.mouseMB = !1,
                        i.mouseRB = !1)
                    }
                    ,
                    this.domElement = void 0 !== n ? n : document,
                    this.element = n === document || void 0 === n ? document.body : n,
                    this.domElement.addEventListener("mousedown", this.onMouseDown, !1),
                    this.domElement.addEventListener("mousewheel", this.onMouseWheel, !1),
                    this.domElement.addEventListener("DOMMouseScroll", this.onMouseWheel, !1),
                    this.domElement.addEventListener("mousemove", this.onMouseMove, !1),
                    this.domElement.addEventListener("touchstart", this.touchstart, !1),
                    this.domElement.addEventListener("touchend", this.touchend, !1),
                    this.domElement.addEventListener("touchmove", this.touchmove, !1)
                }
                return i(n, t),
                Object.defineProperty(n.prototype, "mouseClick", {
                    get: function() {
                        return this.mouseClickLB || this.mouseClickMB || this.mouseClickRB
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "clickButton", {
                    get: function() {
                        return this.mouseClickLB ? e.MOUSE.LEFT : this.mouseClickMB ? e.MOUSE.MIDDLE : this.mouseClickRB ? e.MOUSE.RIGHT : -1
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                Object.defineProperty(n.prototype, "mouseB", {
                    get: function() {
                        return this.mouseLB || this.mouseMB || this.mouseRB
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.update = function(e, t) {
                    var n = this.lastMouseLB || this.lastMouseRB || this.lastMouseMB;
                    this.mouseDownLB = !this.lastMouseLB && this.mouseLB,
                    this.mouseDownRB = !this.lastMouseRB && this.mouseRB,
                    this.mouseDownMB = !this.lastMouseMB && this.mouseMB,
                    this.mouseUpLB = this.lastMouseLB && !this.mouseLB,
                    this.mouseUpRB = this.lastMouseRB && !this.mouseRB,
                    this.mouseUpMB = this.lastMouseMB && !this.mouseMB,
                    (this.mouseDownLB || this.mouseDownRB || this.mouseDownMB) && this.dragStartPosition.copy(this.position),
                    this.delta.subVectors(this.position, this.lastPosition),
                    this.dragDelta.subVectors(this.position, this.dragStartPosition);
                    var i = this.dragDelta.length()
                      , r = i < this.clickRegion;
                    this.mouseClickLB = n && this.mouseUpLB && r,
                    this.mouseClickRB = n && this.mouseUpRB && r,
                    this.mouseClickMB = n && this.mouseUpMB && r,
                    this.lastPosition = this.position,
                    this.lastMouseLB = this.mouseLB,
                    this.lastMouseRB = this.mouseRB,
                    this.lastMouseMB = this.mouseMB
                }
                ,
                Object.defineProperty(n.prototype, "isStill", {
                    get: function() {
                        return this.dragDelta.length() < this.clickRegion
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = o
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(32)
              , a = function(t) {
                function n(n) {
                    t.call(this),
                    this.renderer = n,
                    this.options = {
                        light: !0
                    },
                    this.scene = new e.Scene,
                    this.camera = new e.PerspectiveCamera(45,window.innerWidth / window.innerHeight,1e-6,1e3),
                    this.updateProjectionMatrix(),
                    this.scene.add(this.camera),
                    this.camera.position.set(0, 3, 5),
                    this.camera.lookAt(new e.Vector3(0,0,0)),
                    this.pointLight = new e.PointLight(16777215,1.75),
                    this.setLightColor(new e.Color(this.lightColor)),
                    this.scene.add(this.pointLight),
                    this.scene.visible = !1
                }
                return i(n, t),
                n.prototype.updateProjectionMatrix = function() {
                    this.camera.updateProjectionMatrix()
                }
                ,
                n.prototype.addToGUI = function(t) {
                    var n = this
                      , i = t.addFolder("Stage")
                      , r = {
                        lightColor: this.lightColor.getStyle()
                    };
                    i.add(this.camera, "fov").onChange(function() {
                        return n.updateProjectionMatrix()
                    }),
                    i.add(this.options, "light").onChange(function(e) {
                        return n.pointLight.visible = e
                    }),
                    i.addColor(r, "lightColor").onChange(function(t) {
                        return n.setLightColor(new e.Color(t))
                    })
                }
                ,
                n.prototype.onWindowResize = function(e, t) {
                    this.camera.aspect = e / t,
                    this.updateProjectionMatrix(),
                    o["default"].updateMaterialsResolution(this.scene, e, t)
                }
                ,
                n.prototype.render = function(e) {
                    e.render(this.scene, this.camera)
                }
                ,
                n.prototype.initPostProcessing = function(t) {
                    var n = new e.RenderPass(this.scene,this.camera);
                    t.addPass(n),
                    n.clear = !1
                }
                ,
                n.prototype.lateUpdate = function(e, t) {
                    this.pointLight.position.copy(this.camera.position)
                }
                ,
                n.prototype.setLightColor = function(e) {
                    this.pointLight.color.set(e)
                }
                ,
                Object.defineProperty(n.prototype, "lightColor", {
                    get: function() {
                        return this.pointLight.color
                    },
                    enumerable: !0,
                    configurable: !0
                }),
                n.prototype.start = function() {
                    this.scene.visible = !0
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = a
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(24)
          , o = function(e) {
            function t() {
                e.call(this),
                this.states = {},
                this.nextState = null,
                this.nextArg = null,
                this.currentState = null
            }
            return i(t, e),
            t.prototype.addState = function(e, t) {
                this.states[e] = t
            }
            ,
            t.prototype.changeState = function(e, t) {
                this.nextState = this.states[e],
                this.nextArg = t,
                this.nextState || console.warn("StateMachine - undefined state used !!! " + e)
            }
            ,
            t.prototype.hasState = function(e) {
                return !!this.states[e]
            }
            ,
            t.prototype.update = function(e, t) {
                this.nextState && (this.currentState && this.currentState.becomeInactive && this.currentState.becomeInactive(),
                this.currentState = this.nextState,
                this.currentState.becomeActive && this.currentState.becomeActive(this.nextArg),
                this.nextState = null),
                this.currentState && this.currentState.update && this.currentState.update(e, t)
            }
            ,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = o
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(24)
          , o = function(e) {
            function t() {
                e.call(this)
            }
            return i(t, e),
            t.prototype.addToGUI = function(e) {
                var t = this;
                e.add({
                    fullscreen: function() {
                        return t.toggleFullscreen()
                    }
                }, "fullscreen")
            }
            ,
            t.prototype.toggleFullscreen = function() {
                document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement ? document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen() : document.documentElement.requestFullscreen ? document.documentElement.requestFullscreen() : document.documentElement.msRequestFullscreen ? document.documentElement.msRequestFullscreen() : document.documentElement.mozRequestFullScreen ? document.documentElement.mozRequestFullScreen() : document.documentElement.webkitRequestFullscreen && document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)
            }
            ,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = o
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(30)
              , a = n(52)
              , s = function(t) {
                function n(n, i) {
                    t.call(this),
                    this.camera = n,
                    this.resourcePath = i,
                    this.back = null,
                    this.nebulas1 = null,
                    this.nebulas2 = null,
                    this.skybox = {
                        visible1: !0,
                        visible2: !0,
                        fov1: 60,
                        fov2: 75,
                        fov2amplitude: 2,
                        fov2frequency: .05,
                        lightColor: "rgb(255,255,255)"
                    },
                    this.cameraCube = new e.PerspectiveCamera(this.skybox.fov1,window.innerWidth / window.innerHeight,.01,1e3),
                    this.cameraCube2 = new e.PerspectiveCamera(this.skybox.fov2,window.innerWidth / window.innerHeight,.01,1e3),
                    this.sceneCube = new e.Scene,
                    this.sceneCube2 = new e.Scene,
                    this.pointLightCube = new e.PointLight(16777215,1.75),
                    this.sceneCube.add(this.pointLightCube),
                    this.pointLightCube2 = new e.PointLight(16777215,1.75),
                    this.sceneCube2.add(this.pointLightCube2),
                    this.setLightColor(new e.Color(this.skybox.lightColor)),
                    this.sceneCube.visible = !1,
                    this.sceneCube2.visible = !1
                }
                return i(n, t),
                n.prototype.preload = function() {
                    var e = this;
                    return Promise.all([o["default"].loadObject(this.resourcePath + "/models/SpaceCube_Nebulas.dae"), o["default"].loadObject(this.resourcePath + "/models/SpaceCube_Back.dae")]).then(function(t) {
                        var n = t[0]
                          , i = t[1];
                        a["default"].setDepthWriteFalse(i.model),
                        a["default"].setDepthWriteFalse(n.model),
                        e.back = i,
                        e.nebulas1 = n,
                        e.nebulas2 = n.clone(),
                        e.sceneCube.add(e.back.model),
                        e.sceneCube.add(e.nebulas1.model),
                        e.sceneCube2.add(e.nebulas2.model)
                    })
                }
                ,
                n.prototype.start = function() {
                    this.sceneCube.visible = !0,
                    this.sceneCube2.visible = !0
                }
                ,
                n.prototype.render = function(e) {
                    e.render(this.sceneCube, this.cameraCube),
                    e.render(this.sceneCube2, this.cameraCube2)
                }
                ,
                n.prototype.initPostProcessing = function(t) {
                    var n = new e.RenderPass(this.sceneCube,this.cameraCube)
                      , i = new e.RenderPass(this.sceneCube2,this.cameraCube2);
                    t.addPass(n),
                    t.addPass(i),
                    i.clear = !1
                }
                ,
                n.prototype.addToGUI = function(t) {
                    var n = this
                      , i = t.addFolder("Skybox");
                    i.add(this.skybox, "visible1").onChange(function(e) {
                        return n.sceneCube.visible = e
                    }),
                    i.add(this.skybox, "visible2").onChange(function(e) {
                        return n.sceneCube2.visible = e
                    }),
                    i.add(this.cameraCube, "fov").onChange(function() {
                        return n.cameraCube.updateProjectionMatrix()
                    }),
                    i.add(this.skybox, "fov2"),
                    i.add(this.skybox, "fov2amplitude"),
                    i.add(this.skybox, "fov2frequency"),
                    i.addColor(this.skybox, "lightColor").onChange(function(t) {
                        return n.setLightColor(new e.Color(t))
                    })
                }
                ,
                n.prototype.onWindowResize = function(e, t) {
                    this.cameraCube.aspect = e / t,
                    this.cameraCube.updateProjectionMatrix(),
                    this.cameraCube2.aspect = e / t,
                    this.cameraCube2.updateProjectionMatrix()
                }
                ,
                n.prototype.update = function(e, t) {
                    this.cameraCube2.fov = this.skybox.fov2 + this.skybox.fov2amplitude * Math.sin(e * Math.PI * this.skybox.fov2frequency),
                    this.cameraCube2.updateProjectionMatrix(),
                    this.cameraCube.rotation.setFromRotationMatrix(this.camera.matrixWorld),
                    this.cameraCube2.rotation.setFromRotationMatrix(this.camera.matrixWorld)
                }
                ,
                n.prototype.setLightColor = function(e) {
                    this.pointLightCube.color.set(e),
                    this.pointLightCube2.color.set(e)
                }
                ,
                n
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = s
        }
        ).call(t, n(2))
    }
    , function(e, t, n) {
        var i = this && this.__extends || function(e, t) {
            function n() {
                this.constructor = e
            }
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i]);
            e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
            new n)
        }
          , r = n(24)
          , o = function(e) {
            function t(t) {
                e.call(this),
                this.stats = new Stats,
                this.stats.domElement.style.position = "absolute",
                this.stats.domElement.style.top = "0px",
                t.appendChild(this.stats.domElement)
            }
            return i(t, e),
            t.prototype.update = function(e, t) {
                this.stats.update()
            }
            ,
            t
        }(r["default"]);
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t["default"] = o
    }
    , function(e, t, n) {
        (function(e) {
            var i = this && this.__extends || function(e, t) {
                function n() {
                    this.constructor = e
                }
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }
              , r = n(24)
              , o = n(64)
              , a = function(t) {
                function r(n, i, r, o, a) {
                    t.call(this),
                    this.initPostProcessingFunc = n,
                    this.mouse = i,
                    this.width = r,
                    this.height = o,
                    this.camera = a,
                    this.ppParams = {
                        Bloom: {
                            enabled: !1,
                            strength: 0,
                            kernelSize: 25,
                            sigma: 4
                        },
                        Ripple: {
                            enabled: !0,
                            amount: .34,
                            duration: 5.5,
                            velocity: .56,
                            ripples: 1.9,
                            apex: .29
                        },
                        Undiscovered: {
                            enabled: !0,
                            distortion: .1,
                            distortion2: .4,
                            speed: .09,
                            amount: .68
                        },
                        LoadingScreen: {
                            enabled: !0,
                            distortion: .3,
                            distortion2: 2.11,
                            speed: .09,
                            amount: .68
                        }
                    },
                    this.effects = {},
                    this.undiscovered = !1,
                    this.actionPoint = new e.Vector2(0,0),
                    this.actionTime = 0
                }
                return i(r, t),
                r.prototype.initPostProcessing = function(t) {
                    this.ppParams.Bloom.enabled && (this.effects.Bloom = new e.BloomPass(this.ppParams.Bloom.strength,this.ppParams.Bloom.kernelSize,this.ppParams.Bloom.sigma,512),
                    t.addPass(this.effects.Bloom)),
                    this.ppParams.Ripple.enabled && (this.effects.Ripple = new e.ShaderPass({
                        uniforms: {
                            tDiffuse: {
                                type: "t",
                                value: null
                            },
                            time: {
                                type: "f",
                                value: 0
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(this.width,this.height)
                            },
                            mouse: {
                                type: "v2",
                                value: this.mouse.positionNormalized.clone()
                            },
                            actionPoint: {
                                type: "v2",
                                value: this.mouse.positionNormalized.clone()
                            },
                            actionTime: {
                                type: "f",
                                value: 0
                            },
                            amount: {
                                type: "f",
                                value: this.ppParams.Ripple.amount
                            },
                            duration: {
                                type: "f",
                                value: this.ppParams.Ripple.duration
                            },
                            velocity: {
                                type: "f",
                                value: this.ppParams.Ripple.velocity
                            },
                            ripples: {
                                type: "f",
                                value: this.ppParams.Ripple.ripples
                            },
                            apex: {
                                type: "f",
                                value: this.ppParams.Ripple.apex
                            }
                        },
                        vertexShader: n(105),
                        fragmentShader: n(106)
                    }),
                    t.addPass(this.effects.Ripple)),
                    this.ppParams.Undiscovered.enabled && (this.effects.Undiscovered = new e.ShaderPass({
                        uniforms: {
                            tDiffuse: {
                                type: "t",
                                value: null
                            },
                            time: {
                                type: "f",
                                value: 0
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(this.width,this.height)
                            },
                            distortion: {
                                type: "f",
                                value: this.ppParams.Undiscovered.distortion
                            },
                            distortion2: {
                                type: "f",
                                value: this.ppParams.Undiscovered.distortion2
                            },
                            speed: {
                                type: "f",
                                value: this.ppParams.Undiscovered.speed
                            },
                            amount: {
                                type: "f",
                                value: this.ppParams.Undiscovered.amount
                            }
                        },
                        vertexShader: n(105),
                        fragmentShader: n(107)
                    }),
                    t.addPass(this.effects.Undiscovered),
                    this.setUndiscoveredFX(this.undiscovered)),
                    this.ppParams.LoadingScreen.enabled && (this.effects.LoadingScreen = new e.ShaderPass({
                        uniforms: {
                            tDiffuse: {
                                type: "t",
                                value: null
                            },
                            time: {
                                type: "f",
                                value: 0
                            },
                            resolution: {
                                type: "v2",
                                value: new e.Vector2(this.width,this.height)
                            },
                            distortion: {
                                type: "f",
                                value: this.ppParams.LoadingScreen.distortion
                            },
                            distortion2: {
                                type: "f",
                                value: this.ppParams.LoadingScreen.distortion2
                            },
                            speed: {
                                type: "f",
                                value: this.ppParams.LoadingScreen.speed
                            },
                            amount: {
                                type: "f",
                                value: this.ppParams.LoadingScreen.amount
                            },
                            alpha: {
                                type: "f",
                                value: 1
                            }
                        },
                        vertexShader: n(105),
                        fragmentShader: n(108)
                    }),
                    t.addPass(this.effects.LoadingScreen),
                    this.showLoadingScreen(0))
                }
                ,
                r.prototype.addToGUI = function(e) {
                    var t = this.ppParams
                      , n = e.addFolder("Post Process")
                      , i = n.addFolder("Bloom Pass");
                    i.add(t.Bloom, "enabled").onChange(this.initPostProcessingFunc),
                    i.add(t.Bloom, "strength", 0, 5).onChange(this.initPostProcessingFunc),
                    i.add(t.Bloom, "kernelSize", 1, 50).onChange(this.initPostProcessingFunc),
                    i.add(t.Bloom, "sigma", 0, 10).onChange(this.initPostProcessingFunc);
                    var r = n.addFolder("Ripple Pass");
                    r.add(t.Ripple, "enabled").onChange(this.initPostProcessingFunc),
                    r.add(t.Ripple, "amount", 0, 10).onChange(this.initPostProcessingFunc),
                    r.add(t.Ripple, "duration", 0, 10).onChange(this.initPostProcessingFunc),
                    r.add(t.Ripple, "velocity", 0, 10).onChange(this.initPostProcessingFunc),
                    r.add(t.Ripple, "ripples", 0, 10).onChange(this.initPostProcessingFunc),
                    r.add(t.Ripple, "apex", 0, 1).onChange(this.initPostProcessingFunc);
                    var o = n.addFolder("Undiscovered Pass");
                    o.add(t.Undiscovered, "enabled").onChange(this.initPostProcessingFunc),
                    o.add(t.Undiscovered, "distortion", 0, 1).onChange(this.initPostProcessingFunc),
                    o.add(t.Undiscovered, "distortion2", 0, 1).onChange(this.initPostProcessingFunc),
                    o.add(t.Undiscovered, "speed", 0, 1).onChange(this.initPostProcessingFunc),
                    o.add(t.Undiscovered, "amount", 0, 1).onChange(this.initPostProcessingFunc);
                    var a = n.addFolder("LoadingScreen Pass");
                    a.add(t.LoadingScreen, "enabled").onChange(this.initPostProcessingFunc),
                    a.add(t.LoadingScreen, "speed", 0, 1).onChange(this.initPostProcessingFunc),
                    a.add(t.LoadingScreen, "amount", 0, 1).onChange(this.initPostProcessingFunc)
                }
                ,
                r.prototype.update = function(e, t) {
                    for (var n in this.effects) {
                        var i = this.effects[n];
                        i.uniforms && (i.uniforms.time && (i.uniforms.time.value = e),
                        i.uniforms.mouse && i.uniforms.mouse.value.set(this.mouse.positionNormalized.x, this.mouse.positionNormalized.y),
                        i.uniforms.actionPoint && i.uniforms.actionPoint.value.set(this.actionPoint.x, this.actionPoint.y),
                        i.uniforms.actionTime && (i.uniforms.actionTime.value = this.actionTime))
                    }
                }
                ,
                r.prototype.resize = function(e, t) {
                    this.width = e,
                    this.height = t;
                    for (var n in this.effects) {
                        var i = this.effects[n];
                        i.uniforms && i.uniforms.resolution && i.uniforms.resolution.value.set(e, t)
                    }
                }
                ,
                r.prototype.doJumpRipple = function() {
                    this.actionPoint = new e.Vector2(.5,.5),
                    this.actionTime = o.time
                }
                ,
                r.prototype.setUndiscoveredFX = function(e) {
                    this.effects.Undiscovered && (this.undiscovered = e,
                    this.effects.Undiscovered.enabled = e)
                }
                ,
                r.prototype.showLoadingScreen = function(e) {
                    this.effects.LoadingScreen.enabled = 0 === e ? !1 : !0,
                    this.effects.LoadingScreen.uniforms.alpha.value = e
                }
                ,
                r.textures = {},
                r
            }(r["default"]);
            Object.defineProperty(t, "__esModule", {
                value: !0
            }),
            t["default"] = a
        }
        ).call(t, n(2))
    }
    , function(e, t) {
        e.exports = "varying vec2 vUV;\n\nvoid main() {\n\n	vUV = uv;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D tDiffuse;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 mouse;\nuniform vec2 actionPoint;\nuniform float actionTime;\nuniform float amount;\nuniform float duration;\nuniform float velocity;\nuniform float ripples;\nuniform float apex;\n\nvarying vec2 vUV;\n\nvoid main() {\n    \n	float k = (time - actionTime)/duration;\n    \n    if(k <= 1.0) {\n\n	    float intensity = mix(0.00, 0.05, amount);\n		vec2 p =-1.+2.* (vUV-actionPoint+vec2(0.5,0.5));\n	    vec2 newUV = vUV + (normalize(p))*cos(length(p)*10.0*ripples-k*velocity*20.0)*intensity;	   \n	    vec3 col= texture2D(tDiffuse,mix(vUV,newUV, k < apex ? smoothstep(0.,1., k/apex) : pow(1.0-(k-apex)/(1.0-apex), 2.0)       )).rgb;\n		gl_FragColor = vec4(col, 1.0);\n\n	} else {\n\n		gl_FragColor = vec4(texture2D(tDiffuse,vUV).rgb,1.0);\n	}\n\n	//gl_FragColor = vec4(newUV, 0., 1.0);\n\n}\n\n\n"
    }
    , function(e, t) {
        e.exports = "uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float time;\nuniform float distortion;\nuniform float distortion2;\nuniform float speed;\nuniform float amount;\n\n\nvarying vec2 vUV;\n\nfloat rand(vec2 co){  \n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n\n// Start Ashima 2D Simplex Noise\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n x12.xy -= i1;\n\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n		+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n//float f(float x) {\n//  float a = 16.0*(x - floor(x));\n//  return a < 1.0 ? 0.5+0.5*a : a < 15.0 ? 1.0 : 0.5+0.5*(16.0-a);\n//}\n\n\nfloat grid(vec2 v) {\n  vec2 p = 16. * fract(v / 16.);\n  return (p.x < 1.0 ? 0.5+0.5*p.x : p.x < 15.0 ? 1.0 : 0.5+0.5*(16.0-p.x))\n  * (p.y < 1.0 ? 0.5+0.5*p.y : p.y < 15.0 ? 1.0 : 0.5+0.5*(16.0-p.y));\n}\n\n\n\n\n\n\n// End Ashima 2D Simplex Noise\n\nvoid main() {\n\n  //float offset = mix(0.,mix(0.0, pow(snoise(vec2(vUV.y*10.+time,0.)), 2.) * 0.1, 5.0*max(0.,sin(vUV.y*10.+time)-0.8)), distortion);\n  float q = fract(snoise(vec2(vUV.y+time*0.3,0.)));\n  float r = mix(0.001, 0.05, distortion);\n  float offset =  q < r ? mix(0.0, sin(3.14159* q/r), distortion2*0.2) : 0.0;\n \n  float tk = fract(time*0.25) < 0.1 ? (1.-abs(20.*fract(time*0.25)-1.0)) :0.;\n  offset = mix(0., (fract(snoise(vec2(vUV.y*150.+time*30.,0.)))-0.5)*0.05, tk);\n\n\n\n  vec2 p = vUV * resolution;\n  vec2 m = floor(p/16.);\n  vec4 col = texture2D(tDiffuse,vUV + vec2(offset, 0.));\n  vec2 pd = (vUV + vec2(offset, 0.))*resolution;\n  vec2 md = floor(pd/16.);\n  float k = pow(snoise(m+vec2(time*2.*speed,time*1.5*speed))*0.05,amount*.33);\n  k = k < 0.3 ? 0.1 : 0.9;\n  vec2 pg = m * 16.0;\n  vec4 colg = ( texture2D(tDiffuse, (pg + vec2(8., 8.))/resolution) +\n                texture2D(tDiffuse, (pg + vec2(12., 12.))/resolution) +\n                texture2D(tDiffuse, (pg + vec2(8., 4.))/resolution) +\n                texture2D(tDiffuse, (pg + vec2(4., 12.))/resolution)) * 0.25;\n	gl_FragColor = vec4(grid(p) * mix(colg.rgb , col.rgb, k), 1.) ;//+ (offset > 0. ? 0.2:0.)*vec4(0.2,0.2,0.4,0.);\n\n}\n\n\n"
    }
    , function(e, t) {
        e.exports = "#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float time;\nuniform float frametime;\nuniform float distortion;\nuniform float distortion2;\nuniform float speed;\nuniform float amount;\nuniform float alpha;\n\nvarying vec2 vUV;\n\n\n \nfloat rand(vec2 co){  \n  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\n\n\n// Start Ashima 2D Simplex Noise\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n  vec2 i1;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  vec4 x12 = x0.xyxy + C.xxzz;\n x12.xy -= i1;\n\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n		+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n\n\n\nfloat grid(vec2 v) {\n  vec2 p = 16. * fract(v / 16.);\n  return (p.x < 1.0 ? 0.5+0.5*p.x : p.x < 15.0 ? 1.0 : 0.5+0.5*(16.0-p.x))\n  * (p.y < 1.0 ? 0.5+0.5*p.y : p.y < 15.0 ? 1.0 : 0.5+0.5*(16.0-p.y));\n}\n\n\n\nvec4 tunnel(vec2 uv)\n{\n  vec2 suv = vec2(uv.x * resolution.x/resolution.y, uv.y);\n  vec2 suv2 = floor(uv*resolution*0.5)/resolution;\n  vec4 p1 = \n    .03 *pow(fract(snoise(suv*200.+vec2(0.5,0.4))),10.) * vec4(0.9,0.9,0.9,1.0) +\n    0.2 * pow(fract(snoise(suv*132.+vec2(10.1,0.5)))*0.9,4.) * vec4(0.8,0.8,0.9,1.0)+\n    //5.2 * pow(snoise(suv*70.+vec2(0.3,20.4)) * 0.9,14.) * vec4(0.8,0.8,0.9,1.0)+\n    (rand(suv)<0.001 ? mix(0.4, 1.0,rand(suv)*1000.) * vec4(0.8,0.8,0.9,1.0) : vec4(0.0,0.0,0.0,0.0)) +\n    (rand(suv2)<0.0002 ? mix(0.4, 1.0,rand(suv2)*5000.) * vec4(0.8,0.8,0.9,1.0) : vec4(0.0,0.0,0.0,0.0)) +\n    3.2 * pow(snoise(suv*60.+vec2(0.3,10.8)) * 0.72,8.) * vec4(0.8,0.8,0.9,1.0)+\n    0.;\n  vec4 r = (p1 + vec4(0.,0.05 * pow(1.0-uv.y,1.2),0.15 * pow(1.0-uv.y,1.),0.)) * 0.8 + 1.2*vec4(0.05,0.08,0.1,1.);\n  return vec4(r.rgb * 0.75, r.a);\n}\n\n\nfloat vPlain(vec2 m)\n{\n  float ctime = time + 3000.;\n  float k = pow(snoise(m+vec2(ctime*2.*speed,ctime*1.5*speed))*0.05,1.*amount*.33);\n  return k < 0.3 ? 0.1 : 0.9;  \n}\n\nvoid main() {\n\n  float offset = 0.;//mix(0.0, pow(snoise(vec2(vUV.y*10.+time,0.)), 2.) * 0.1, 5.0*max(0.,sin(vUV.y*10.+time)-0.8));\n  vec2 p = vUV * resolution;\n  vec2 m = floor(p/16.);\n  vec2 m2 = floor(p/32.);\n  vec2 m3 = floor(p/48.);\n  vec4 col = tunnel(vUV + vec2(offset, 0.));\n  vec2 pd = (vUV + vec2(offset, 0.))*resolution;\n  vec2 md = floor(pd/16.);\n\n  vec2 pg = m * 16.0;\n  float k = vPlain(m)*vPlain(m2);//*vPlain(m3);\n\n  vec4 colg = ( tunnel((pg + vec2(8., 8.))/resolution) +\n                tunnel((pg + vec2(12., 12.))/resolution) +\n                tunnel((pg + vec2(8., 4.))/resolution) +\n                tunnel((pg + vec2(4., 12.))/resolution)) * 0.35;\n\n  vec4 vlines = ((fract(p.x/16.) * 16.0 >= 15.0 && k > .5 && vPlain(m+vec2(1.,0.)) <0.5) \n                || (fract(p.y/16.) * 16.0 >= 15.0 && k > .5 && vPlain(m+vec2(0.,1.)) <0.5) \n                || (fract(p.x/16.) * 16.0 <= 1.0 && k > .5 && vPlain(m-vec2(1.,0.)) <0.5) \n                || (fract(p.y/16.) * 16.0 <= 1.0 && k > .5 && vPlain(m-vec2(0.,1.)) <0.5)) \n                ? 0.*vec4(0.1, 0.1,0.1,1.0) : vec4(0.0); \n	gl_FragColor = alpha * (vlines + vec4( grid(p) *  mix(colg.rgb , col.rgb, k), 1.)) + (1.0 - alpha) * texture2D(tDiffuse,vUV);\n   \n}\n\n\n"
    }
    ]))
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(19)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(123)
      , d = c(h)
      , f = n(130)
      , p = c(f)
      , m = n(132)
      , v = c(m)
      , g = n(128)
      , y = c(g)
      , b = n(135)
      , x = c(b)
      , w = n(137)
      , _ = s("LoadingView._elements")
      , S = s("LoadingView._starmap")
      , M = s("LoadingView._noWebgl")
      , C = s("ui")
      , T = s("events")
      , E = function(e) {
        return new l(function(t) {
            return setTimeout(t, e)
        }
        )
    }
      , k = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this[_] = null,
            this[S] = e.starmap,
            this._scLogo = new d["default"],
            this._arkLogo = new p["default"],
            this._loading = new v["default"],
            this[M] = e.noWebgl
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                return {
                    fwa_sotd: window.RSI.sm_enable_fwa_sotd
                }
            }
        }, {
            key: "onShow",
            value: function() {
                var e = this;
                return this._setup(),
                this[M] ? void this.$el.addClass("sm-current-no-webgl") : localStorage.skip ? void function() {
                    e.model.load().then(function() {
                        e.model.set("loadingOverlayOpacity", 0),
                        localStorage.pause && e.model.api.env.gameLoop.pause(),
                        e.trigger("end")
                    })
                }() : void this._initialAnimation()
            }
        }, {
            key: "_setup",
            value: function() {
                this.ui.scLogoWrapper.append(this._scLogo.element),
                this.ui.arkLogoWrapper.prepend(this._arkLogo.element),
                this.ui.welcomeText.css("opacity", 0),
                this.ui.fullscreenLaunchButton.css({
                    opacity: 0,
                    display: "none"
                }),
                this.ui.fullscreenLaunchButtonCaption.addClass("hidden"),
                this.ui.launchButton.css({
                    opacity: 0,
                    display: "none"
                }),
                this.model && (this.model.set("loadingOverlayOpacity", 1),
                this.model.get("soundFX").getSoundService().findGroup("loading:bgm").findSound("loading:background-music:main").play({
                    fadeIn: 500
                }))
            }
        }, {
            key: "_initialAnimation",
            value: function() {
                var e = this;
                this.$el.addClass("sm-current-initial"),
                E(300).then(function(t) {
                    return e._scLogo.show()
                });
                var t = new y["default"];
                t.tween({
                    from: {
                        opacity: 100
                    },
                    to: {
                        opacity: 0
                    },
                    delay: 2400,
                    duration: 650,
                    start: function() {
                        e.model.get("soundFX").getSoundService().findGroup("loading:sfx").findSound("loading:logos:1").play()
                    },
                    step: function(t) {
                        var n = t.opacity;
                        e.ui.scLogoWrapper.css("opacity", n / 100)
                    }
                });
                var n = new y["default"];
                n.tween({
                    from: {
                        top: 50
                    },
                    to: {
                        top: 30
                    },
                    delay: 2800,
                    duration: 250,
                    easing: "easeOutQuad",
                    step: function(t) {
                        var n = t.top;
                        e.ui.scLogoWrapper.css("top", n + "%")
                    }
                }),
                E(3e3).then(function(t) {
                    e.model.get("soundFX").getSoundService().findGroup("loading:sfx").findSound("loading:logos:2").play(),
                    e._arkLogo.show().then(function() {
                        return e.ui.arkLogoWrapper.addClass("sm-active")
                    })
                }),
                E(3850).then(function(t) {
                    e.ui.scLogoWrapper.css({
                        opacity: 1,
                        top: "30px"
                    }),
                    e.ui.scLogoWrapper.addClass("small");
                    var n = new y["default"];
                    n.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        duration: 1e3,
                        step: function(t) {
                            var n = t.opacity;
                            e.ui.scLogoWrapper.css("opacity", n / 100),
                            e.ui.welcomeText.css("opacity", n / 100)
                        }
                    });
                    var i = new y["default"];
                    i.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        duration: 100,
                        start: function() {
                            e.model.get("soundFX").getSoundService().findGroup("loading:sfx").findSound("loading:enter-button:appear").play(),
                            e.ui.fullscreenLaunchButton.on("mouseenter", function() {
                                e.model.get("soundFX").getSoundService().findGroup("loading:sfx").findSound("loading:enter-button:hover").play()
                            }),
                            e.ui.fullscreenLaunchButton.css("display", "block")
                        },
                        step: function(t) {
                            var n = t.opacity;
                            e.ui.fullscreenLaunchButton.css("opacity", n / 100)
                        },
                        finish: function() {
                            e.ui.fullscreenLaunchButtonCaption.removeClass("hidden"),
                            E(40).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.addClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.removeClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.addClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.removeClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.addClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.removeClass("on")
                            }).then(function(e) {
                                return E(55)
                            }).then(function(t) {
                                return e.ui.fullscreenLaunchButtonCaption.addClass("on")
                            }).then(function(t) {
                                var n = new y["default"];
                                n.tween({
                                    from: {
                                        opacity: 0
                                    },
                                    to: {
                                        opacity: 100
                                    },
                                    duration: 1e3,
                                    start: function() {
                                        e.ui.launchButton.css("display", "block")
                                    },
                                    step: function(t) {
                                        var n = t.opacity;
                                        return e.ui.launchButton.css("opacity", n / 100)
                                    }
                                })
                            })
                        }
                    })
                })
            }
        }, {
            key: "onLaunchFullscreenClick",
            value: function(e) {
                e.preventDefault();
                var t = new x["default"];
                t.request(),
                this._loadMap()
            }
        }, {
            key: "onLaunchClick",
            value: function(e) {
                e.preventDefault(),
                this._loadMap()
            }
        }, {
            key: "_loadMap",
            value: function() {
                var e = this;
                this.$el.removeClass("sm-current-initial"),
                this.model.get("soundFX").getSoundService().findGroup("loading:bgm").findSound("loading:background-music:extra").play({
                    fadeIn: 1e3
                }),
                this.$el.addClass("sm-current-loading"),
                this.model.load().then(function() {
                    setTimeout(function() {
                        e.$el.removeClass("sm-current-loading"),
                        setTimeout(function() {
                            e._showAcknowledgment()
                        }, 500)
                    }, 200)
                })
            }
        }, {
            key: "_showAcknowledgment",
            value: function() {
                localStorage.skipAcknowledgment ? this._showInfo() : this.$el.addClass("sm-current-acknowledgment")
            }
        }, {
            key: "onAcknowledgeClick",
            value: function() {
                this.ui.dontShowAcknowledgment.get(0).checked && (localStorage.skipAcknowledgment = !0),
                this.$el.removeClass("sm-current-acknowledgment"),
                this._showInfo()
            }
        }, {
            key: "_showInfo",
            value: function() {
                localStorage.skipInfo ? this._fadeOut() : this.$el.addClass("sm-current-info")
            }
        }, {
            key: "onInfoContinueClick",
            value: function() {
                this.ui.dontShowInfo.get(0).checked && (localStorage.skipInfo = !0),
                this.$el.removeClass("sm-current-info"),
                this._fadeOut()
            }
        }, {
            key: "_fadeOut",
            value: function() {
                var e = this;
                this.ui.fwaSOTD.removeClass("sm-active");
                var t = new y["default"];
                t.tween({
                    from: {
                        scale: 100
                    },
                    to: {
                        scale: 325
                    },
                    delay: 250,
                    duration: 750,
                    easing: "easeInBack",
                    step: function(t) {
                        var n = t.scale;
                        e.ui.circleOne.css && e.ui.circleOne.css("transform", "scale(" + n / 100 + ") translateZ(0)")
                    }
                });
                var n = new y["default"];
                n.tween({
                    from: {
                        scale: 100
                    },
                    to: {
                        scale: 250
                    },
                    delay: 350,
                    duration: 550,
                    easing: "easeInBack",
                    step: function(t) {
                        var n = t.scale;
                        e.ui.circleTwo.css && e.ui.circleTwo.css("transform", "scale(" + n / 100 + ") translateZ(0)")
                    }
                });
                var i = new y["default"];
                i.tween({
                    from: {
                        scale: 100
                    },
                    to: {
                        scale: 150
                    },
                    delay: 400,
                    duration: 350,
                    easing: "easeInBack",
                    step: function(t) {
                        var n = t.scale;
                        e.ui.circleThree.css && e.ui.circleThree.css("transform", "scale(" + n / 100 + ") translateZ(0)")
                    }
                });
                var r = new y["default"];
                r.tween({
                    from: {
                        opacity: 100
                    },
                    to: {
                        opacity: 0
                    },
                    delay: 200,
                    duration: 500,
                    step: function(t) {
                        var n = t.opacity;
                        return e.model.set("loadingOverlayOpacity", n / 100)
                    },
                    finish: function() {
                        e.trigger("end")
                    }
                })
            }
        }, {
            key: "template",
            get: function() {
                return w
            }
        }, {
            key: "tagName",
            get: function() {
                return "section"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-loading-screen"
            }
        }, {
            key: "ui",
            get: function() {
                return this[C] = this[C] || {
                    fwaSOTD: ".sm-fwa-sotd",
                    scLogoWrapper: ".sc-logo-wrapper",
                    arkLogoWrapper: ".ark-logo-wrapper",
                    welcomeText: ".welcome",
                    fullscreenLaunchButton: ".launch-fullscreen",
                    fullscreenLaunchButtonCaption: ".launch-fullscreen .caption",
                    launchButton: ".launch",
                    circleOne: ".circle-one",
                    circleTwo: ".circle-two",
                    circleThree: ".circle-three",
                    acknowledgment: ".sm-acknowledgment-scene",
                    dontShowAcknowledgment: "#sm-dont-show-acknowledgment",
                    acknowledge: ".sm-acknowledge",
                    info: ".sm-info-scene",
                    dontShowInfo: "#sm-dont-show-info",
                    infoContinue: ".sm-continue"
                }
            },
            set: function(e) {
                this[C] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[T] = this[T] || {
                    "click @ui.fullscreenLaunchButton": "onLaunchFullscreenClick",
                    "click @ui.launchButton": "onLaunchClick",
                    "click @ui.acknowledge": "onAcknowledgeClick",
                    "click @ui.infoContinue": "onInfoContinueClick"
                }
            },
            set: function(e) {
                this[T] = e
            }
        }]),
        t
    }(u.ItemView);
    t["default"] = k,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(97)["default"]
      , a = n(124)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(128)
      , c = s(l)
      , u = o("StarCitizenLogo._elements")
      , h = function(e, t) {
        var n = arguments.length <= 2 || void 0 === arguments[2] ? t : arguments[2];
        return function() {
            var i = e.getBBox()
              , r = (i.width / 2 + i.x).toFixed(3)
              , o = (i.height / 2 + i.y).toFixed(3);
            return "matrix(" + t + ", 0, 0, " + n + ", " + (r - t * r) + ", " + (o - n * o) + ")"
        }()
    }
      , d = function() {
        function e() {
            r(this, e);
            var t = document.createElement("section");
            t.classList.add("sc-logo"),
            t.innerHTML = n(129),
            this[u] = {
                root: t,
                background: t.querySelector("#sc-logo-background"),
                star: t.querySelector("#sc-logo-star"),
                text: t.querySelector("#sc-logo-text"),
                arcs: {
                    first: t.querySelector("#sc-logo-arc-1"),
                    second: t.querySelector("#sc-logo-arc-2"),
                    third: t.querySelector("#sc-logo-arc-3"),
                    fourth: t.querySelector("#sc-logo-arc-4")
                },
                chevronPairs: a(t.querySelectorAll('[id^="sc-logo-chevron-pair-"]')),
                bottom: t.querySelector("#sc-logo-bottom")
            },
            this[u].root.style.opacity = 0
        }
        return i(e, [{
            key: "show",
            value: function() {
                var e = this[u]
                  , t = e.root
                  , n = e.background
                  , i = e.star
                  , r = e.text
                  , o = e.arcs
                  , a = e.bottom
                  , s = e.chevronPairs;
                n.style.opacity = 0,
                i.setAttribute("transform", h(i, 0)),
                r.style.opacity = 0,
                o.first.setAttribute("transform", h(i, 0)),
                o.second.setAttribute("transform", h(i, 0)),
                o.third.setAttribute("transform", h(i, 0)),
                o.fourth.setAttribute("transform", h(i, 0)),
                a.style.opacity = 0,
                s.forEach(function(e) {
                    return e.style.opacity = 0
                }),
                t.style.opacity = 1;
                var l = new c["default"];
                l.tween({
                    from: {
                        scale: 0,
                        ratioXY: 4
                    },
                    to: {
                        scale: 100,
                        ratioXY: 1
                    },
                    duration: 350,
                    step: function(e) {
                        var t = e.scale
                          , n = e.ratioXY;
                        return i.setAttribute("transform", h(i, t / 100 / n, t / 100))
                    }
                });
                var d = new c["default"];
                d.tween({
                    from: {
                        scale: 10
                    },
                    to: {
                        scale: 100
                    },
                    duration: 500,
                    delay: 100,
                    easing: "easeInOutBack",
                    step: function(e) {
                        var t = e.scale;
                        return o.first.setAttribute("transform", h(o.first, t / 100))
                    }
                });
                var f = new c["default"];
                f.tween({
                    from: {
                        scale: 10
                    },
                    to: {
                        scale: 100
                    },
                    duration: 600,
                    delay: 100,
                    easing: "easeInOutBack",
                    step: function(e) {
                        var t = e.scale;
                        return o.second.setAttribute("transform", h(o.second, t / 100))
                    }
                });
                var p = new c["default"];
                p.tween({
                    from: {
                        scale: 10
                    },
                    to: {
                        scale: 100
                    },
                    duration: 700,
                    delay: 100,
                    easing: "easeInOutBack",
                    step: function(e) {
                        var t = e.scale;
                        return o.third.setAttribute("transform", h(o.third, t / 100))
                    }
                });
                var m = new c["default"];
                m.tween({
                    from: {
                        scale: 10
                    },
                    to: {
                        scale: 100
                    },
                    duration: 800,
                    delay: 100,
                    easing: "easeInOutBack",
                    step: function(e) {
                        var t = e.scale;
                        return o.fourth.setAttribute("transform", h(o.fourth, t / 100))
                    }
                }),
                s.forEach(function(e, t) {
                    var n = new c["default"];
                    n.tween({
                        from: {
                            opacity: 10
                        },
                        to: {
                            opacity: 100
                        },
                        duration: 30,
                        delay: 750 + 20 * t,
                        step: function(t) {
                            var n = t.opacity;
                            return e.style.opacity = n / 100
                        }
                    })
                });
                var v = new c["default"];
                v.tween({
                    from: {
                        opacity: 0
                    },
                    to: {
                        opacity: 100
                    },
                    duration: 500,
                    delay: 850,
                    step: function(e) {
                        var t = e.opacity;
                        return r.style.opacity = a.style.opacity = t / 100
                    }
                });
                var g = new c["default"];
                g.tween({
                    from: {
                        opacity: 0
                    },
                    to: {
                        opacity: 100
                    },
                    duration: 1250,
                    delay: 850,
                    step: function(e) {
                        var t = e.opacity;
                        return n.style.opacity = t / 100
                    }
                })
            }
        }, {
            key: "element",
            get: function() {
                return this[u].root
            }
        }]),
        e
    }();
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t, n) {
    e.exports = {
        "default": n(125),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(22),
    n(126),
    e.exports = n(30).Array.from
}
, [474, 31, 28, 127, 59, 60, 61, 62, 73], [475, 25], function(e, t, n) {
    (function() {
        var t = this || Function("return this")()
          , n = function() {
            "use strict";
            function n() {}
            function i(e, t) {
                var n;
                for (n in e)
                    Object.hasOwnProperty.call(e, n) && t(n)
            }
            function r(e, t) {
                return i(t, function(n) {
                    e[n] = t[n]
                }),
                e
            }
            function o(e, t) {
                i(t, function(n) {
                    "undefined" == typeof e[n] && (e[n] = t[n])
                })
            }
            function a(e, t, n, i, r, o, a) {
                var l, c, u, h = o > e ? 0 : (e - o) / r;
                for (l in t)
                    t.hasOwnProperty(l) && (c = a[l],
                    u = "function" == typeof c ? c : d[c],
                    t[l] = s(n[l], i[l], u, h));
                return t
            }
            function s(e, t, n, i) {
                return e + (t - e) * n(i)
            }
            function l(e, t) {
                var n = h.prototype.filter
                  , r = e._filterArgs;
                i(n, function(i) {
                    "undefined" != typeof n[i][t] && n[i][t].apply(e, r)
                })
            }
            function c(e, t, n, i, r, o, s, c, u, h, d) {
                b = t + n + i,
                x = Math.min(d || y(), b),
                w = x >= b,
                _ = i - (b - x),
                e.isPlaying() && (w ? (u(s, e._attachment, _),
                e.stop(!0)) : (e._scheduleId = h(e._timeoutHandler, v),
                l(e, "beforeTween"),
                t + n > x ? a(1, r, o, s, 1, 1, c) : a(x, r, o, s, i, t + n, c),
                l(e, "afterTween"),
                u(r, e._attachment, _)))
            }
            function u(e, t) {
                var n = {}
                  , r = typeof t;
                return "string" === r || "function" === r ? i(e, function(e) {
                    n[e] = t
                }) : i(e, function(e) {
                    n[e] || (n[e] = t[e] || p)
                }),
                n
            }
            function h(e, t) {
                this._currentState = e || {},
                this._configured = !1,
                this._scheduleFunction = f,
                "undefined" != typeof t && this.setConfig(t)
            }
            var d, f, p = "linear", m = 500, v = 1e3 / 60, g = Date.now ? Date.now : function() {
                return +new Date
            }
            , y = "undefined" != typeof SHIFTY_DEBUG_NOW ? SHIFTY_DEBUG_NOW : g;
            f = "undefined" != typeof window ? window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || window.mozCancelRequestAnimationFrame && window.mozRequestAnimationFrame || setTimeout : setTimeout;
            var b, x, w, _;
            return h.prototype.tween = function(e) {
                return this._isTweening ? this : (void 0 === e && this._configured || this.setConfig(e),
                this._timestamp = y(),
                this._start(this.get(), this._attachment),
                this.resume())
            }
            ,
            h.prototype.setConfig = function(e) {
                e = e || {},
                this._configured = !0,
                this._attachment = e.attachment,
                this._pausedAtTime = null,
                this._scheduleId = null,
                this._delay = e.delay || 0,
                this._start = e.start || n,
                this._step = e.step || n,
                this._finish = e.finish || n,
                this._duration = e.duration || m,
                this._currentState = r({}, e.from) || this.get(),
                this._originalState = this.get(),
                this._targetState = r({}, e.to) || this.get();
                var t = this;
                this._timeoutHandler = function() {
                    c(t, t._timestamp, t._delay, t._duration, t._currentState, t._originalState, t._targetState, t._easing, t._step, t._scheduleFunction)
                }
                ;
                var i = this._currentState
                  , a = this._targetState;
                return o(a, i),
                this._easing = u(i, e.easing || p),
                this._filterArgs = [i, this._originalState, a, this._easing],
                l(this, "tweenCreated"),
                this
            }
            ,
            h.prototype.get = function() {
                return r({}, this._currentState)
            }
            ,
            h.prototype.set = function(e) {
                this._currentState = e
            }
            ,
            h.prototype.pause = function() {
                return this._pausedAtTime = y(),
                this._isPaused = !0,
                this
            }
            ,
            h.prototype.resume = function() {
                return this._isPaused && (this._timestamp += y() - this._pausedAtTime),
                this._isPaused = !1,
                this._isTweening = !0,
                this._timeoutHandler(),
                this
            }
            ,
            h.prototype.seek = function(e) {
                e = Math.max(e, 0);
                var t = y();
                return this._timestamp + e === 0 ? this : (this._timestamp = t - e,
                this.isPlaying() || (this._isTweening = !0,
                this._isPaused = !1,
                c(this, this._timestamp, this._delay, this._duration, this._currentState, this._originalState, this._targetState, this._easing, this._step, this._scheduleFunction, t),
                this.pause()),
                this)
            }
            ,
            h.prototype.stop = function(e) {
                return this._isTweening = !1,
                this._isPaused = !1,
                this._timeoutHandler = n,
                (t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.oCancelAnimationFrame || t.msCancelAnimationFrame || t.mozCancelRequestAnimationFrame || t.clearTimeout)(this._scheduleId),
                e && (l(this, "beforeTween"),
                a(1, this._currentState, this._originalState, this._targetState, 1, 0, this._easing),
                l(this, "afterTween"),
                l(this, "afterTweenEnd"),
                this._finish.call(this, this._currentState, this._attachment)),
                this
            }
            ,
            h.prototype.isPlaying = function() {
                return this._isTweening && !this._isPaused
            }
            ,
            h.prototype.setScheduleFunction = function(e) {
                this._scheduleFunction = e
            }
            ,
            h.prototype.dispose = function() {
                var e;
                for (e in this)
                    this.hasOwnProperty(e) && delete this[e]
            }
            ,
            h.prototype.filter = {},
            h.prototype.formula = {
                linear: function(e) {
                    return e
                }
            },
            d = h.prototype.formula,
            r(h, {
                now: y,
                each: i,
                tweenProps: a,
                tweenProp: s,
                applyFilter: l,
                shallowCopy: r,
                defaults: o,
                composeEasingObject: u
            }),
            "function" == typeof SHIFTY_DEBUG_NOW && (t.timeoutHandler = c),
            e.exports = h,
            h
        }();
        !function() {
            n.shallowCopy(n.prototype.formula, {
                easeInQuad: function(e) {
                    return Math.pow(e, 2)
                },
                easeOutQuad: function(e) {
                    return -(Math.pow(e - 1, 2) - 1)
                },
                easeInOutQuad: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 2) : -.5 * ((e -= 2) * e - 2)
                },
                easeInCubic: function(e) {
                    return Math.pow(e, 3)
                },
                easeOutCubic: function(e) {
                    return Math.pow(e - 1, 3) + 1
                },
                easeInOutCubic: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 3) : .5 * (Math.pow(e - 2, 3) + 2)
                },
                easeInQuart: function(e) {
                    return Math.pow(e, 4)
                },
                easeOutQuart: function(e) {
                    return -(Math.pow(e - 1, 4) - 1)
                },
                easeInOutQuart: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 4) : -.5 * ((e -= 2) * Math.pow(e, 3) - 2)
                },
                easeInQuint: function(e) {
                    return Math.pow(e, 5)
                },
                easeOutQuint: function(e) {
                    return Math.pow(e - 1, 5) + 1
                },
                easeInOutQuint: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 5) : .5 * (Math.pow(e - 2, 5) + 2)
                },
                easeInSine: function(e) {
                    return -Math.cos(e * (Math.PI / 2)) + 1
                },
                easeOutSine: function(e) {
                    return Math.sin(e * (Math.PI / 2))
                },
                easeInOutSine: function(e) {
                    return -.5 * (Math.cos(Math.PI * e) - 1)
                },
                easeInExpo: function(e) {
                    return 0 === e ? 0 : Math.pow(2, 10 * (e - 1))
                },
                easeOutExpo: function(e) {
                    return 1 === e ? 1 : -Math.pow(2, -10 * e) + 1
                },
                easeInOutExpo: function(e) {
                    return 0 === e ? 0 : 1 === e ? 1 : (e /= .5) < 1 ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (-Math.pow(2, -10 * --e) + 2)
                },
                easeInCirc: function(e) {
                    return -(Math.sqrt(1 - e * e) - 1)
                },
                easeOutCirc: function(e) {
                    return Math.sqrt(1 - Math.pow(e - 1, 2))
                },
                easeInOutCirc: function(e) {
                    return (e /= .5) < 1 ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
                },
                easeOutBounce: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                },
                easeInBack: function(e) {
                    var t = 1.70158;
                    return e * e * ((t + 1) * e - t)
                },
                easeOutBack: function(e) {
                    var t = 1.70158;
                    return (e -= 1) * e * ((t + 1) * e + t) + 1
                },
                easeInOutBack: function(e) {
                    var t = 1.70158;
                    return (e /= .5) < 1 ? .5 * (e * e * (((t *= 1.525) + 1) * e - t)) : .5 * ((e -= 2) * e * (((t *= 1.525) + 1) * e + t) + 2)
                },
                elastic: function(e) {
                    return -1 * Math.pow(4, -8 * e) * Math.sin((6 * e - 1) * (2 * Math.PI) / 2) + 1
                },
                swingFromTo: function(e) {
                    var t = 1.70158;
                    return (e /= .5) < 1 ? .5 * (e * e * (((t *= 1.525) + 1) * e - t)) : .5 * ((e -= 2) * e * (((t *= 1.525) + 1) * e + t) + 2)
                },
                swingFrom: function(e) {
                    var t = 1.70158;
                    return e * e * ((t + 1) * e - t)
                },
                swingTo: function(e) {
                    var t = 1.70158;
                    return (e -= 1) * e * ((t + 1) * e + t) + 1
                },
                bounce: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                },
                bouncePast: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 2 - (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 2 - (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 2 - (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
                },
                easeFromTo: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 4) : -.5 * ((e -= 2) * Math.pow(e, 3) - 2)
                },
                easeFrom: function(e) {
                    return Math.pow(e, 4)
                },
                easeTo: function(e) {
                    return Math.pow(e, .25)
                }
            })
        }(),
        function() {
            function e(e, t, n, i, r, o) {
                function a(e) {
                    return ((f * e + p) * e + m) * e
                }
                function s(e) {
                    return ((v * e + g) * e + y) * e
                }
                function l(e) {
                    return (3 * f * e + 2 * p) * e + m
                }
                function c(e) {
                    return 1 / (200 * e)
                }
                function u(e, t) {
                    return s(d(e, t))
                }
                function h(e) {
                    return e >= 0 ? e : 0 - e
                }
                function d(e, t) {
                    var n, i, r, o, s, c;
                    for (r = e,
                    c = 0; 8 > c; c++) {
                        if (o = a(r) - e,
                        h(o) < t)
                            return r;
                        if (s = l(r),
                        h(s) < 1e-6)
                            break;
                        r -= o / s
                    }
                    if (n = 0,
                    i = 1,
                    r = e,
                    n > r)
                        return n;
                    if (r > i)
                        return i;
                    for (; i > n; ) {
                        if (o = a(r),
                        h(o - e) < t)
                            return r;
                        e > o ? n = r : i = r,
                        r = .5 * (i - n) + n
                    }
                    return r
                }
                var f = 0
                  , p = 0
                  , m = 0
                  , v = 0
                  , g = 0
                  , y = 0;
                return m = 3 * t,
                p = 3 * (i - t) - m,
                f = 1 - m - p,
                y = 3 * n,
                g = 3 * (r - n) - y,
                v = 1 - y - g,
                u(e, c(o))
            }
            function t(t, n, i, r) {
                return function(o) {
                    return e(o, t, n, i, r, 1)
                }
            }
            n.setBezierFunction = function(e, i, r, o, a) {
                var s = t(i, r, o, a);
                return s.displayName = e,
                s.x1 = i,
                s.y1 = r,
                s.x2 = o,
                s.y2 = a,
                n.prototype.formula[e] = s
            }
            ,
            n.unsetBezierFunction = function(e) {
                delete n.prototype.formula[e]
            }
        }(),
        function() {
            function e(e, t, i, r, o, a) {
                return n.tweenProps(r, t, e, i, 1, a, o)
            }
            var t = new n;
            t._filterArgs = [],
            n.interpolate = function(i, r, o, a, s) {
                var l = n.shallowCopy({}, i)
                  , c = s || 0
                  , u = n.composeEasingObject(i, a || "linear");
                t.set({});
                var h = t._filterArgs;
                h.length = 0,
                h[0] = l,
                h[1] = i,
                h[2] = r,
                h[3] = u,
                n.applyFilter(t, "tweenCreated"),
                n.applyFilter(t, "beforeTween");
                var d = e(i, l, r, o, u, c);
                return n.applyFilter(t, "afterTween"),
                d
            }
        }(),
        function(e) {
            function t(e, t) {
                var n, i = [], r = e.length;
                for (n = 0; r > n; n++)
                    i.push("_" + t + "_" + n);
                return i
            }
            function n(e) {
                var t = e.match(w);
                return t ? (1 === t.length || e[0].match(x)) && t.unshift("") : t = ["", ""],
                t.join(T)
            }
            function i(t) {
                e.each(t, function(e) {
                    var n = t[e];
                    "string" == typeof n && n.match(C) && (t[e] = r(n))
                })
            }
            function r(e) {
                return l(C, e, o)
            }
            function o(e) {
                var t = a(e);
                return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
            }
            function a(e) {
                return e = e.replace(/#/, ""),
                3 === e.length && (e = e.split(""),
                e = e[0] + e[0] + e[1] + e[1] + e[2] + e[2]),
                E[0] = s(e.substr(0, 2)),
                E[1] = s(e.substr(2, 2)),
                E[2] = s(e.substr(4, 2)),
                E
            }
            function s(e) {
                return parseInt(e, 16)
            }
            function l(e, t, n) {
                var i = t.match(e)
                  , r = t.replace(e, T);
                if (i)
                    for (var o, a = i.length, s = 0; a > s; s++)
                        o = i.shift(),
                        r = r.replace(T, n(o));
                return r
            }
            function c(e) {
                return l(S, e, u)
            }
            function u(e) {
                for (var t = e.match(_), n = t.length, i = e.match(M)[0], r = 0; n > r; r++)
                    i += parseInt(t[r], 10) + ",";
                return i = i.slice(0, -1) + ")"
            }
            function h(i) {
                var r = {};
                return e.each(i, function(e) {
                    var o = i[e];
                    if ("string" == typeof o) {
                        var a = g(o);
                        r[e] = {
                            formatString: n(o),
                            chunkNames: t(a, e)
                        }
                    }
                }),
                r
            }
            function d(t, n) {
                e.each(n, function(e) {
                    for (var i = t[e], r = g(i), o = r.length, a = 0; o > a; a++)
                        t[n[e].chunkNames[a]] = +r[a];
                    delete t[e]
                })
            }
            function f(t, n) {
                e.each(n, function(e) {
                    var i = t[e]
                      , r = p(t, n[e].chunkNames)
                      , o = m(r, n[e].chunkNames);
                    i = v(n[e].formatString, o),
                    t[e] = c(i)
                })
            }
            function p(e, t) {
                for (var n, i = {}, r = t.length, o = 0; r > o; o++)
                    n = t[o],
                    i[n] = e[n],
                    delete e[n];
                return i
            }
            function m(e, t) {
                k.length = 0;
                for (var n = t.length, i = 0; n > i; i++)
                    k.push(e[t[i]]);
                return k
            }
            function v(e, t) {
                for (var n = e, i = t.length, r = 0; i > r; r++)
                    n = n.replace(T, +t[r].toFixed(4));
                return n
            }
            function g(e) {
                return e.match(_)
            }
            function y(t, n) {
                e.each(n, function(e) {
                    var i, r = n[e], o = r.chunkNames, a = o.length, s = t[e];
                    if ("string" == typeof s) {
                        var l = s.split(" ")
                          , c = l[l.length - 1];
                        for (i = 0; a > i; i++)
                            t[o[i]] = l[i] || c
                    } else
                        for (i = 0; a > i; i++)
                            t[o[i]] = s;
                    delete t[e]
                })
            }
            function b(t, n) {
                e.each(n, function(e) {
                    var i = n[e]
                      , r = i.chunkNames
                      , o = r.length
                      , a = t[r[0]]
                      , s = typeof a;
                    if ("string" === s) {
                        for (var l = "", c = 0; o > c; c++)
                            l += " " + t[r[c]],
                            delete t[r[c]];
                        t[e] = l.substr(1)
                    } else
                        t[e] = a
                })
            }
            var x = /(\d|\-|\.)/
              , w = /([^\-0-9\.]+)/g
              , _ = /[0-9.\-]+/g
              , S = new RegExp("rgb\\(" + _.source + /,\s*/.source + _.source + /,\s*/.source + _.source + "\\)","g")
              , M = /^.*\(/
              , C = /#([0-9]|[a-f]){3,6}/gi
              , T = "VAL"
              , E = []
              , k = [];
            e.prototype.filter.token = {
                tweenCreated: function(e, t, n, r) {
                    i(e),
                    i(t),
                    i(n),
                    this._tokenData = h(e)
                },
                beforeTween: function(e, t, n, i) {
                    y(i, this._tokenData),
                    d(e, this._tokenData),
                    d(t, this._tokenData),
                    d(n, this._tokenData)
                },
                afterTween: function(e, t, n, i) {
                    f(e, this._tokenData),
                    f(t, this._tokenData),
                    f(n, this._tokenData),
                    b(i, this._tokenData)
                }
            }
        }(n)
    }
    ).call(null)
}
, function(e, t) {
    e.exports = '<?xml version="1.0" encoding="utf-8"?>\r\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n	 viewBox="0 0 309 364" xml:space="preserve">\r\n	 <g id="sc-logo-background">\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M213,41c0-6.1,0-12,0-18.2c-4-0.3-7.9-0.5-12.1-0.8\r\n			c-0.2,7.7,0.2,15.3,0.1,22.8c0,7.5,0,15,0,22.6c-3.1-1.1-6.2-2.2-9.5-3.4c-0.2-16.1-0.4-32.4-0.6-48.7c0.8-0.1,1.4-0.1,2.1-0.1\r\n			c7.5,0,15,0,22.5,0c1.1,0,2.3,0.1,3.4,0.3c2,0.4,3.3,1.6,3.7,3.6c0.2,1,0.3,2.1,0.3,3.2c0,7.2,0,14.4,0,21.6c0,0.9-0.1,1.8-0.3,2.7\r\n			c-0.4,1.7-1.4,2.4-3.1,2.2c-1.1-0.1-2.2-0.5-3.3-0.7c-0.6-0.1-1.2-0.3-2.1-0.5c3.8,10.9,7.3,21.6,10.3,32.8c-0.8-0.4-1.2-0.7-1.7-1\r\n			c-2.3-1.5-4.6-3.1-6.9-4.5c-0.9-0.6-1.4-1.3-1.7-2.3c-3.2-9.1-6.4-18.1-9.7-27.1c-0.7-2-0.8-4.1-0.6-6.5\r\n			C206.8,39.7,209.9,40.3,213,41z M116.4,30.8c0-4,0.1-7.9,0-11.7c0-1.8-1.3-3.1-3.2-3.5c-1.2-0.3-2.5-0.4-3.8-0.4\r\n			c-6.2,0-12.4,0.1-18.7,0.1c-3.9,0-5.7,1.8-5.8,5.7c-0.1,4.9,0,9.9,0,14.8c0,2.2,0.8,4,2.8,5.1c3.7,2.1,7.3,4.4,10.9,6.5\r\n			c2.4,1.4,5,2.6,7.3,3.9c0,3.5,0,6.9,0,10.2c-3.8,1.7-7.5,3.3-11.5,5c0-4,0-7.7,0-11.5c-2,0.3-7.6,2.7-9.6,4.1c0,5.3,0,10.7,0,16\r\n			c0,0.4,0.1,0.8,0.2,1.2c0.4,1.5,1.3,2,2.7,1.5c1-0.3,1.9-0.8,2.8-1.4c6.1-3.9,12.5-7.2,19.2-9.9c1.3-0.5,2.5-1.3,3.7-2.1\r\n			c1.5-1.1,2.3-2.7,2.3-4.6c0-4,0-8.1,0.1-12.1c0-1.6-0.7-2.7-2.1-3.4c-1.1-0.5-2.1-1.1-3.2-1.7c-4.9-2.9-9.7-5.7-14.6-8.7\r\n			c-0.6-0.4-1.4-1.1-1.4-1.6c-0.1-3.2-0.1-6.5-0.1-9.8c4.1-0.5,7.9-0.7,11.9-0.7c0,3.4,0,6.5,0,9.8C109.9,31.6,113.1,31.2,116.4,30.8\r\n			z M257,333c-0.2,0-0.4,0.1-0.6,0.1c-1.4-2.7-2.9-5.5-4.3-8.2c-1.7-3.3-3.4-6.5-5.1-9.8c-0.3-0.6-0.9-1.3-1.4-1.4\r\n			c-1.8-0.2-3.6-0.1-5.5-0.1c0,11.9,0,23.5,0,35.2c2.3,0,4.5,0,6.9,0c0-6.8,0-13.4,0-20c0.1,0,0.3,0,0.4-0.1\r\n			c3.4,6.7,6.8,13.4,10.3,20.2c2.1,0,4.1,0.1,6.1-0.1c0-11.9,0-23.4,0-35.1c-2.3,0-4.4,0-6.8,0C257,320.2,257,326.6,257,333z\r\n			M152.5,15.3c-10.4,0-20.7,0-31.1,0c-0.2,2.2-0.2,4.2,0,6.3c3.7,0.1,7.1-0.3,10.7,0c-0.1,13.1-0.3,26-0.4,39c3.5-0.5,6.7-1,9.9-1.4\r\n			c0-0.7,0.1-1.2,0.1-1.8c0.1-7,0.1-14,0.1-21c0-4.4,0-8.9,0.1-13.3c0-0.6,0.1-1.2,0.2-2c3.6,0,7,0,10.5,0\r\n			C152.5,19,152.5,17.2,152.5,15.3z M61.5,336.9c0,2.5,0,4.8,0,7.2c-3.1,0-6,0-8.8,0c-0.5-3-0.3-24.4,0.2-25.9c2.8,0,5.6,0,8.6,0\r\n			c0,2.3,0,4.5,0,6.8c2.4,0,4.6,0,6.9,0c0-3,0-5.9,0-8.8c0-1.2-0.8-2-1.9-2.3c-0.7-0.2-1.5-0.3-2.3-0.3c-4.9,0-9.9,0-14.8,0\r\n			c-2.5,0-4.1,0.7-4.1,4.1c0.1,7.9,0,15.8,0,23.8c0,1.4,0,2.8,0,4.2c0.1,1.8,0.7,2.6,2.4,3c0.8,0.2,1.5,0.3,2.3,0.3\r\n			c4.5,0,8.9,0,13.4,0c0.8,0,1.7-0.1,2.5-0.3c1.7-0.4,2.4-1.2,2.4-3c0-2.4,0-4.8,0-7.2c0-0.5-0.1-1.1-0.2-1.6\r\n			C66,336.9,63.9,336.9,61.5,336.9z M207.8,313.7c0,11.8,0,23.4,0,35.1c6.5,0,12.9,0,19.4,0c0-1.6,0-3,0-4.7c-2.2,0-4.2,0-6.2,0\r\n			c-2-0.1-4,0.3-6-0.2c0-3.6,0-7,0-10.7c3.5,0,7,0,10.3,0c0-1.7,0-3,0-4.6c-3.5,0-6.9,0-10.2,0c-0.4-2.4-0.4-8.5,0.1-10.2\r\n			c3.9,0,7.8,0,11.8,0c0-1.6,0-3.1,0-4.6C220.5,313.7,214.2,313.7,207.8,313.7z M172.8,348.8c7.2,0,14.2,0,21.3,0c0-1.7,0-3.2,0-4.9\r\n			c-4.3,0-8.4,0-12.8,0c0.3-0.7,0.5-1.1,0.7-1.6c3.8-8,7.7-16.1,11.5-24.1c0.7-1.5,0.9-2.9,0.5-4.4c-2.9-0.5-18.8-0.3-20.2,0.1\r\n			c0,1.5,0,2.9,0,4.5c3.9,0,7.7,0,11.8,0c-0.5,1.1-0.8,1.9-1.2,2.7c-3.7,7.8-7.4,15.6-11.1,23.3C172.6,345.9,172.4,347.2,172.8,348.8\r\n			z M129.9,318.3c2.7,0,5.1,0,7.6,0c0-1.7,0-3.1,0-4.6c-7.5,0-14.8,0-22.3,0c0,1.6,0,3,0,4.7c2.6,0,5,0,7.6,0c0,2.8,0,5.3,0,7.8\r\n			c0,2.5,0,4.9,0,7.4c0,2.5,0,5.1,0,7.6c0,2.5-0.1,5,0.1,7.6c2.5,0,4.7,0.1,7-0.1C129.9,338.6,129.9,328.7,129.9,318.3z M89.3,313.7\r\n			c0,11.8,0,23.4,0,35.1c2.4,0,4.6,0,6.9,0c0-11.8,0-23.4,0-35.1C93.9,313.7,91.6,313.7,89.3,313.7z M159,313.7c-2.4,0-4.6,0-6.9,0\r\n			c0,11.7,0,23.4,0,35.1c2.3,0,4.6,0,6.9,0C159,337.1,159,325.5,159,313.7z M172.9,15.3c-3.6,0-6.9,0-10.3,0\r\n			c-4.2,14.4-8.5,28.7-12.8,43.2c3.4,0,6.6,0,9.9,0c0.7-2.6,1.3-5.2,2.1-8c4.1,0.3,8.1,0.7,12.2,1c0.8,3.1,1.5,6,2.2,8.9\r\n			c3.3,0.7,6.4,1.4,9.9,2.1C181.8,46.3,177.5,30.7,172.9,15.3z M167.5,26.8c-1.4,5.9-2.9,11.9-4.4,18c3.1,0.2,6.1,0.5,9.5,0.7\r\n			c-1.6-6.4-3.1-12.6-4.6-18.7C167.8,26.8,167.6,26.8,167.5,26.8z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M88.9,304.5c2.6,0.7,4.8,0.7,7.7,0.1\r\n			c6.7-1.3,12.5-4.4,17.6-8.8c1-0.8,1.8-1.8,2.6-2.8c0.5-0.7,0.8-1.6,1.1-2.4c-1.5-1.2-3-1-4.5-0.9c-4.8,0.5-9.2,2.1-13.4,4.3\r\n			c-3.8,2-7.1,4.6-9.7,8C89.8,302.9,89.4,303.7,88.9,304.5z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M191.5,290.7c0.2,1.9,1.4,3.1,2.6,4.2c5.4,5,11.6,8.5,18.9,9.8\r\n			c2.4,0.4,4.8,0.6,7.6-0.2c-1.3-1.6-2.2-3.1-3.4-4.3c-3.7-4-8.4-6.6-13.5-8.5c-2.9-1-5.8-1.8-8.9-1.9\r\n			C193.7,289.8,192.4,289.7,191.5,290.7z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M204.8,285.9c0.5,1.7,0.7,2.3,2.5,3.5c2.5,1.7,5.1,3.2,7.9,4.5\r\n			c4.6,2.1,9.5,3.1,14.6,2.9c1.7-0.1,3.4-0.3,5.3-1.1c-1.1-1.2-1.9-2.3-3-3.1c-6.8-5.8-14.8-8-23.5-7.9\r\n			C207.3,284.6,205.8,284.7,204.8,285.9z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M74.2,295.8c1,0.3,1.7,0.5,2.4,0.6c9.9,1.4,18.5-1.7,26.2-7.7\r\n			c0.4-0.3,0.8-0.8,1.1-1.3c0.9-1.3,0.7-2-0.9-2.5c-0.3-0.1-0.7-0.2-1-0.2c-2.2,0-4.5-0.1-6.7,0.1c-6.1,0.7-11.7,2.7-16.6,6.3\r\n			C77,292.5,75.5,293.9,74.2,295.8z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M247.6,285.1c-1.4-1.1-2.6-2.1-3.9-2.9\r\n			c-6.2-3.8-13-4.9-20.1-4.5c-1.5,0.1-3.1,0.3-4.6,0.7c-1,0.2-2.1,0.5-2.5,1.6C220,286.5,239.6,289.9,247.6,285.1z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M92.9,279.8c-0.8-1-1.9-1.4-3-1.6c-3.5-0.8-7.1-0.8-10.7-0.4\r\n			c-5,0.5-9.7,1.9-13.9,4.6c-1.2,0.8-2.4,1.6-3.4,3.1c1.2,0.5,2.2,0.9,3.3,1.2c3.4,1,6.8,1.1,10.3,0.7c4.8-0.5,9.4-1.8,13.7-4.1\r\n			C90.6,282.5,92.2,281.7,92.9,279.8z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M227.8,272.4c0.8,1.4,2,2.1,3.2,2.5c2.8,0.8,5.7,1.7,8.6,2.1\r\n			c5.3,0.8,10.6,0.5,15.6-1.5c1.3-0.5,2.4-1.2,4-2c-1.3-0.8-2.1-1.4-3-1.9c-3.5-1.9-7.2-2.7-11.1-3c-4.6-0.4-9.2,0-13.6,1.4\r\n			C230.1,270.4,228.7,270.9,227.8,272.4z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M50.2,273.6c1.6,0.8,2.8,1.5,4.1,2c5,2,10.2,2.2,15.4,1.5\r\n			c3-0.4,5.9-1.4,8.8-2.2c1.3-0.4,2.4-1.1,3.1-2.5c-1.1-1.6-2.8-2.1-4.5-2.6c-5.9-1.6-11.8-1.8-17.8-0.4\r\n			C56.1,270,53.1,271.2,50.2,273.6z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M238.5,264c1.1,0.5,1.9,1.2,2.9,1.4c1.8,0.5,3.6,0.9,5.4,1\r\n			c6.4,0.6,12.7-0.2,18.5-3.2c1.4-0.7,2.7-1.7,4.5-2.9c-1.8-0.7-3-1.4-4.3-1.8c-5.4-1.7-10.9-1.5-16.3-0.2c-2.5,0.6-5,1.5-7.4,2.5\r\n			C240.4,261.4,239.2,262.1,238.5,264z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M40,260.4c1.9,2,4.2,3.2,6.6,4c6.6,2.4,13.3,2.8,20.2,1.3\r\n			c0.9-0.2,1.8-0.5,2.6-0.9c1.6-0.8,1.7-1.6,0.3-2.7c-0.7-0.6-1.5-1.1-2.3-1.5c-6.5-2.9-13.3-4-20.4-2.9\r\n			C44.5,258.3,42.2,258.9,40,260.4z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M31.8,246.4c1.2,1.1,2.1,2.1,3.1,2.8c7,5.1,14.9,6.6,23.3,5.9\r\n			c1.2-0.1,2.5-0.3,3.3-1.5C58.7,247,40.4,242.4,31.8,246.4z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M277.6,246.2c-1.2-0.4-1.8-0.6-2.5-0.8\r\n			c-3.1-0.8-6.3-0.9-9.4-0.5c-5.3,0.7-10.2,2.4-14.6,5.2c-1,0.6-1.9,1.5-2.7,2.3c-0.8,0.9-0.6,1.6,0.5,2c1.2,0.4,2.6,0.8,3.9,0.8\r\n			c2.8,0,5.7-0.1,8.4-0.5c5.4-0.9,10.5-2.9,14.7-6.6C276.3,247.6,276.8,247,277.6,246.2z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M53.6,242.5c-0.4-1.9-1.7-3-3-4.1c-5.1-4.1-10.9-6.8-17.4-7.6\r\n			c-2.5-0.3-5-0.4-7.7,0.5c1,1.7,2.1,3,3.4,4.2c6,5.1,13,7.6,20.7,8.1C50.9,243.6,52.3,243.6,53.6,242.5z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M283.8,231.6c-0.1-0.2-0.2-0.4-0.2-0.6\r\n			c-1.1-0.1-2.2-0.4-3.3-0.4c-8.5-0.2-15.7,3-22.1,8.3c-0.8,0.7-1.5,1.5-2,2.4c-0.6,1-0.3,1.6,0.8,1.9c0.9,0.2,2,0.4,2.9,0.3\r\n			c7.7-0.5,14.6-2.9,20.5-8.1C281.6,234.4,282.7,232.9,283.8,231.6z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M20.9,215.1c0.8,2.3,2.2,4,3.7,5.6c4.6,4.9,10.3,7.8,16.7,9.4\r\n			c1.1,0.3,2.2,0.4,3.3,0.4c0.7,0,1.4-0.3,2.1-0.4c-0.2-2-0.5-2.6-1.9-4.1c-4.7-5.1-10.3-8.8-17.1-10.5\r\n			C25.6,215,23.4,214.7,20.9,215.1z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M262.1,229.9c1.9,1.1,3.6,0.8,5.1,0.5\r\n			c4.5-0.9,8.6-2.8,12.4-5.3c3.2-2.1,6-4.7,8-8.1c0.3-0.6,0.6-1.2,0.9-2c-1-0.1-1.6-0.1-2.2-0.1c-0.8,0-1.7,0.1-2.5,0.2\r\n			c-7.9,1.3-14.2,5.3-19.4,11.2C263.4,227.3,262.9,228.5,262.1,229.9z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M18.5,199c0.4,2.3,1.2,3.8,2.2,5.3c4.1,6.3,10,10.4,17,13\r\n			c1,0.4,2.1,0.4,3.1,0.5c0.9,0,1.3-0.5,1.1-1.4c-0.3-0.9-0.6-1.9-1.1-2.7c-4.4-6.6-10.2-11.5-17.8-13.8\r\n			C21.6,199.4,20.2,199.3,18.5,199z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M290.9,199.2c-1.2,0.1-2.1,0.1-3,0.3\r\n			c-6.3,1.3-11.4,4.8-15.7,9.5c-1.6,1.7-2.9,3.7-4.2,5.6c-0.6,0.8-1,1.9-0.5,3c1.7,0.7,3.2,0,4.7-0.5c4.9-1.8,9.2-4.6,12.8-8.4\r\n			c2-2.1,3.8-4.4,4.9-7.1C290.3,200.9,290.5,200.2,290.9,199.2z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M18.2,183.3c-0.1,0.7-0.2,0.9-0.1,1.1c0.2,0.8,0.3,1.5,0.6,2.2\r\n			c3,8.1,8.8,13.6,16.3,17.5c0.5,0.3,1.1,0.4,1.6,0.5c0.6,0.1,1.2,0,1.8,0c0.3-1.7,0.3-2.4-0.6-4.2c-3.2-6.4-7.7-11.6-14.1-15.1\r\n			C22,184.5,20.1,184,18.2,183.3z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M291.2,183.5c-0.8,0.2-1.3,0.2-1.8,0.4\r\n			c-8.9,3.1-14.6,9.5-18.3,18c-0.3,0.8-0.2,1.7-0.3,2.6c2,0.3,2.5,0.3,4.3-0.6c6.4-3.4,11.5-8.2,14.7-14.8\r\n			C290.5,187.4,291.3,185.7,291.2,183.5z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M36.7,190.5c-0.1-1.2,0-2.4-0.3-3.5c-0.4-1.5-0.9-3-1.6-4.4\r\n			c-2.7-5.7-6.4-10.6-11.9-13.9c-1.1-0.6-2.2-1.1-3.5-1.7c0,1.1-0.1,1.9,0,2.6c1.7,8.7,6.7,15.2,13.9,20.2\r\n			C34.1,190.4,35,191,36.7,190.5z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M273.3,190.9c0.8-0.3,1.8-0.5,2.5-1\r\n			c7.3-4.8,12.2-11.2,14.1-19.8c0.2-0.9,0.1-1.9,0.2-3.2c-1.3,0.6-2.2,0.9-3.1,1.3c-2.7,1.4-5,3.4-7,5.7c-3.5,4.1-6.1,8.6-7.3,13.9\r\n			C272.5,188.9,272.4,189.8,273.3,190.9z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M22.1,151.2c-0.1,1.2-0.3,2.1-0.2,3\r\n			c0.7,8.4,4.5,15.2,10.5,20.9c0.8,0.8,2,1.2,3.1,1.9c1.2-1.7,1-3.4,0.7-4.9c-1.2-6.4-3.9-12.1-8.4-16.8\r\n			C26.2,153.6,24.5,152.2,22.1,151.2z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M287.1,151.1c-1.2,0.8-2.3,1.3-3.2,2.1\r\n			c-6.4,5.3-9.6,12.4-10.9,20.5c-0.2,1-0.1,2.1,0.7,2.9C280.5,175.3,288.7,160,287.1,151.1z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M36.4,160.7c0.3-1,0.7-1.8,0.7-2.7c0.2-8.6-2.4-16.3-8.5-22.5\r\n			c-0.6-0.6-1.3-1.1-2.1-1.7c-0.2,0.6-0.4,0.9-0.5,1.3c-0.6,2.7-0.5,5.3,0,8c1,5.5,3.2,10.5,6.7,14.9\r\n			C33.5,159.2,34.4,160.3,36.4,160.7z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M282.9,133.8c-0.8,0.6-1.4,1-1.9,1.5\r\n			c-6.3,6.1-8.7,13.8-8.8,22.4c0,1,0.2,2.1,1.1,3c1.6-0.2,2.5-1.4,3.4-2.5c3.6-4.6,5.9-9.8,6.7-15.5\r\n			C283.8,139.8,283.9,136.9,282.9,133.8z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M39.3,146.2c1.2-0.9,1.4-2.1,1.6-3.4c0.5-2.8,0.3-5.6,0-8.4\r\n			c-0.6-4.8-2.1-9.4-5-13.3c-0.7-0.9-1.5-1.6-2.3-2.6c-0.3,0.8-0.5,1.2-0.7,1.7c-1,3-1.1,6.1-0.9,9.2c0.4,4.9,1.8,9.5,4.3,13.8\r\n			C36.9,144.4,37.7,145.7,39.3,146.2z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M275.7,118.7c-0.7,0.7-1.4,1.4-2,2.2c-2.7,3.5-4.2,7.6-5,12\r\n			c-0.6,3.6-0.8,7.3-0.1,10.9c0.2,1,0.4,1.9,1.4,2.4C276.2,143.1,279.8,125.5,275.7,118.7z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M44,132.8c1.6-1,2-2.2,2.3-3.4c1.2-4.6,1.4-9.2,0.7-13.8\r\n			c-0.5-3.4-1.6-6.6-3.5-9.4c-0.3-0.4-0.7-0.8-1.2-1.3c-0.5,1.1-1,1.8-1.3,2.7c-2.8,7.9-2,15.5,1.3,23C42.6,131.3,43.4,132,44,132.8z\r\n			"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M265,132.6c1.2-0.4,1.8-1.4,2.2-2.4c3-7.2,3.8-14.5,1.4-22.1\r\n			c-0.4-1.1-1-2.1-1.7-3.5c-0.8,1.1-1.4,1.8-1.8,2.6c-3.9,7.5-4.2,15.2-1.9,23.2C263.6,131.2,264,132.2,265,132.6z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M244,78.7c-0.4,1.2-0.8,2.1-1,3.1c-1.6,8,0.3,15.3,4.4,22.1\r\n			c0.5,0.8,1.4,1.5,2.2,2.2c1.3-1.4,1.5-1.8,1.8-3.5c0.8-5.8-0.1-11.4-2.4-16.8C247.9,83.2,246.4,80.9,244,78.7z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M59.8,106.1c0.8-0.8,1.7-1.5,2.2-2.3\r\n			c4.1-6.8,5.9-14.2,4.3-22.1c-0.2-0.9-0.6-1.8-1.1-3.1c-1.1,1.3-2.1,2.3-2.8,3.4c-4.1,6.2-5.2,13.2-4.5,20.5\r\n			C58.1,103.7,58.3,105,59.8,106.1z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M256.3,91.2c-0.6,1.2-1.1,2-1.4,3c-2.6,7.7-1.9,15.1,1.3,22.5\r\n			c0.4,0.9,1,1.9,2.2,2.3c1.4-0.9,1.8-2.4,2.1-3.9c1.1-4.4,1.2-9,0.4-13.4C260.2,97.9,259.1,94.4,256.3,91.2z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M51,118.9c5.6-3.9,6.7-21.4,1.7-27.6c-0.7,1.1-1.4,2-1.9,3\r\n			c-3.4,7-3.6,14.3-1.7,21.7C49.4,117.2,49.8,118.3,51,118.9z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M79.2,69.1c-0.7,0.5-1.2,0.9-1.7,1.3\r\n			C71.4,76.3,69.1,83.7,69,92c0,1,0.1,2.1,1.1,2.8C76.4,92.4,82,76.7,79.2,69.1z"/>\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#347BA3;" d="M230,69.3c-0.9,3-1,4.7-0.4,8.7c0.9,5.4,3.1,10.2,6.5,14.5\r\n			c0.8,1,1.7,2.1,3.1,2.3C243,89.6,236.9,72.8,230,69.3z"/>\r\n		<path style="fill:#347BA3;" d="M199.7,172.9c-16.8-2.6-28-6.1-33.6-17.6c-5.6-11.6-7.8-28.8-8.8-41.7c-1-12.9-2.6-46.2-2.6-46.2\r\n			s-1.7,33.2-2.6,46.1c-1,12.9-3.2,30.1-8.8,41.7c-5.6,11.6-16.8,15-33.6,17.6s-54.4,4.4-54.4,4.4c62.6,4,83.4,2.3,91.7,32.3\r\n			c6.7,24.1,7.6,72.1,7.7,90v0c0,4.4,0,7,0,7s0-2.6,0-7c0.1-18,1-65.9,7.7-90c8.3-29.9,29.1-28.3,91.7-32.3\r\n			C254.1,177.3,216.6,175.5,199.7,172.9z"/>\r\n		<path style="fill:#347BA3;" d="M261.9,135.5c-2.9-6.8-6.5-13.3-10.7-19.4c-4.2-6-8.9-11.7-14.2-16.9c-5.3-5.2-11-9.9-17.2-13.9\r\n			c-1.3-0.9-2.6-1.7-4-2.5c30.7,20.2,51,55.2,51,95c0,0.4,0,0.7,0,1.1c0,0.4,0,0.7,0,1.1c0,28.9-11.3,55.1-29.8,74.8\r\n			c-20.5,22.3-49.7,36.3-82.2,36.3s-61.7-14-82.2-36.3C54,235.1,42.7,208.8,42.7,180c0-0.4,0-0.7,0-1.1c0-0.4,0-0.7,0-1.1\r\n			c0-39.8,20.3-74.8,51-95c-1.4,0.8-2.7,1.7-4,2.5c-6.2,4.1-11.9,8.8-17.2,13.9c-5.3,5.2-10,10.9-14.2,16.9\r\n			c-4.2,6.1-7.8,12.6-10.7,19.4c-6.1,14.1-9.1,29-9.1,44.5s3.1,30.4,9.1,44.5c2.9,6.8,6.5,13.3,10.7,19.4c4.2,6,8.9,11.7,14.2,16.9\r\n			c5.3,5.2,11,9.9,17.2,13.9c6.2,4.1,12.9,7.7,19.8,10.5c14.3,6,29.6,9,45.3,9s30.9-3,45.3-9c6.9-2.9,13.5-6.4,19.8-10.5\r\n			c6.2-4.1,11.9-8.8,17.2-13.9c5.3-5.2,10-10.9,14.2-16.9c4.2-6.1,7.8-12.6,10.7-19.4c6.1-14.1,9.1-29,9.1-44.5\r\n			S267.9,149.6,261.9,135.5z"/>\r\n		<path style="fill:#347BA3;" d="M154.7,74.6c57.1,0,103.3,46.3,103.3,103.3s-46.3,103.3-103.3,103.3S51.4,234.9,51.4,177.9\r\n			S97.7,74.6,154.7,74.6 M154.7,72.5c-14.2,0-28,2.8-41,8.3c-12.6,5.3-23.8,12.9-33.5,22.6c-9.7,9.7-17.3,21-22.6,33.5\r\n			c-5.5,13-8.3,26.8-8.3,41s2.8,28,8.3,41c5.3,12.6,12.9,23.8,22.6,33.5c9.7,9.7,21,17.3,33.5,22.6c13,5.5,26.8,8.3,41,8.3\r\n			c14.2,0,28-2.8,41-8.3c12.6-5.3,23.8-12.9,33.5-22.6c9.7-9.7,17.3-21,22.6-33.5c5.5-13,8.3-26.8,8.3-41s-2.8-28-8.3-41\r\n			c-5.3-12.6-12.9-23.8-22.6-33.5c-9.7-9.7-21-17.3-33.5-22.6C182.8,75.2,169,72.5,154.7,72.5z"/>\r\n		<path style="fill:#347BA3;" d="M154.7,84.6c51.5,0,93.3,41.8,93.3,93.3s-41.8,93.3-93.3,93.3s-93.3-41.8-93.3-93.3\r\n			S103.2,84.6,154.7,84.6 M154.7,81.4c-13,0-25.7,2.6-37.6,7.6c-11.5,4.9-21.8,11.8-30.7,20.7c-8.9,8.9-15.8,19.2-20.7,30.7\r\n			c-5,11.9-7.6,24.5-7.6,37.6c0,13,2.6,25.7,7.6,37.6c4.9,11.5,11.8,21.8,20.7,30.7s19.2,15.8,30.7,20.7c11.9,5,24.5,7.6,37.6,7.6\r\n			c13,0,25.7-2.6,37.6-7.6c11.5-4.9,21.8-11.8,30.7-20.7c8.9-8.9,15.8-19.2,20.7-30.7c5-11.9,7.6-24.5,7.6-37.6\r\n			c0-13-2.6-25.7-7.6-37.6c-4.9-11.5-11.8-21.8-20.7-30.7c-8.9-8.9-19.2-15.8-30.7-20.7C180.4,83.9,167.8,81.4,154.7,81.4z"/>\r\n		<path style="fill:#347BA3;" d="M154.7,114.1c35.3,0,63.8,28.6,63.8,63.8s-28.6,63.8-63.8,63.8s-63.8-28.6-63.8-63.8\r\n			S119.5,114.1,154.7,114.1 M154.7,107.7c-9.5,0-18.7,1.9-27.3,5.5c-8.4,3.5-15.9,8.6-22.3,15c-6.4,6.4-11.5,14-15,22.3\r\n			c-3.7,8.7-5.5,17.9-5.5,27.3s1.9,18.7,5.5,27.3c3.5,8.4,8.6,15.9,15,22.3c6.4,6.4,14,11.5,22.3,15c8.7,3.7,17.9,5.5,27.3,5.5\r\n			s18.7-1.9,27.3-5.5c8.4-3.5,15.9-8.6,22.3-15c6.4-6.4,11.5-14,15-22.3c3.7-8.7,5.5-17.9,5.5-27.3s-1.9-18.7-5.5-27.3\r\n			c-3.5-8.4-8.6-15.9-15-22.3c-6.4-6.4-14-11.5-22.3-15C173.4,109.5,164.2,107.7,154.7,107.7z"/>\r\n		<path style="fill:#347BA3;" d="M128.1,296c-1.2,0.3-2,1.6-1.7,2.8l0.5,1.9c0.3,1.2,1.6,2,2.8,1.7l24.7-6.3c0.1,0,0.2-0.1,0.4-0.1\r\n			c0.1,0,0.2,0.1,0.4,0.1l24.7,6.3c1.2,0.3,2.5-0.4,2.8-1.7l0.5-1.9c0.3-1.2-0.4-2.5-1.7-2.8l-13.3-3.4h-26.7L128.1,296z"/>\r\n	</g>\r\n	<g id="sc-logo-text">\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M213,41c0-6.1,0-12,0-18.2\r\n			c-4-0.3-7.9-0.5-12.1-0.8c-0.2,7.7,0.2,15.3,0.1,22.8c0,7.5,0,15,0,22.6c-3.1-1.1-6.2-2.2-9.5-3.4c-0.2-16.1-0.4-32.4-0.6-48.7\r\n			c0.8-0.1,1.4-0.1,2.1-0.1c7.5,0,15,0,22.5,0c1.1,0,2.3,0.1,3.4,0.3c2,0.4,3.3,1.6,3.7,3.6c0.2,1,0.3,2.1,0.3,3.2\r\n			c0,7.2,0,14.4,0,21.6c0,0.9-0.1,1.8-0.3,2.7c-0.4,1.7-1.4,2.4-3.1,2.2c-1.1-0.1-2.2-0.5-3.3-0.7c-0.6-0.1-1.2-0.3-2.1-0.5\r\n			c3.8,10.9,7.3,21.6,10.3,32.8c-0.8-0.4-1.2-0.7-1.7-1c-2.3-1.5-4.6-3.1-6.9-4.5c-0.9-0.6-1.4-1.3-1.7-2.3\r\n			c-3.2-9.1-6.4-18.1-9.7-27.1c-0.7-2-0.8-4.1-0.6-6.5C206.8,39.7,209.9,40.3,213,41z M116.4,30.8c0-4,0.1-7.9,0-11.7\r\n			c0-1.8-1.3-3.1-3.2-3.5c-1.2-0.3-2.5-0.4-3.8-0.4c-6.2,0-12.4,0.1-18.7,0.1c-3.9,0-5.7,1.8-5.8,5.7c-0.1,4.9,0,9.9,0,14.8\r\n			c0,2.2,0.8,4,2.8,5.1c3.7,2.1,7.3,4.4,10.9,6.5c2.4,1.4,5,2.6,7.3,3.9c0,3.5,0,6.9,0,10.2c-3.8,1.7-7.5,3.3-11.5,5\r\n			c0-4,0-7.7,0-11.5c-2,0.3-7.6,2.7-9.6,4.1c0,5.3,0,10.7,0,16c0,0.4,0.1,0.8,0.2,1.2c0.4,1.5,1.3,2,2.7,1.5c1-0.3,1.9-0.8,2.8-1.4\r\n			c6.1-3.9,12.5-7.2,19.2-9.9c1.3-0.5,2.5-1.3,3.7-2.1c1.5-1.1,2.3-2.7,2.3-4.6c0-4,0-8.1,0.1-12.1c0-1.6-0.7-2.7-2.1-3.4\r\n			c-1.1-0.5-2.1-1.1-3.2-1.7c-4.9-2.9-9.7-5.7-14.6-8.7c-0.6-0.4-1.4-1.1-1.4-1.6c-0.1-3.2-0.1-6.5-0.1-9.8c4.1-0.5,7.9-0.7,11.9-0.7\r\n			c0,3.4,0,6.5,0,9.8C109.9,31.6,113.1,31.2,116.4,30.8z M257,333c-0.2,0-0.4,0.1-0.6,0.1c-1.4-2.7-2.9-5.5-4.3-8.2\r\n			c-1.7-3.3-3.4-6.5-5.1-9.8c-0.3-0.6-0.9-1.3-1.4-1.4c-1.8-0.2-3.6-0.1-5.5-0.1c0,11.9,0,23.5,0,35.2c2.3,0,4.5,0,6.9,0\r\n			c0-6.8,0-13.4,0-20c0.1,0,0.3,0,0.4-0.1c3.4,6.7,6.8,13.4,10.3,20.2c2.1,0,4.1,0.1,6.1-0.1c0-11.9,0-23.4,0-35.1\r\n			c-2.3,0-4.4,0-6.8,0C257,320.2,257,326.6,257,333z M152.5,15.3c-10.4,0-20.7,0-31.1,0c-0.2,2.2-0.2,4.2,0,6.3\r\n			c3.7,0.1,7.1-0.3,10.7,0c-0.1,13.1-0.3,26-0.4,39c3.5-0.5,6.7-1,9.9-1.4c0-0.7,0.1-1.2,0.1-1.8c0.1-7,0.1-14,0.1-21\r\n			c0-4.4,0-8.9,0.1-13.3c0-0.6,0.1-1.2,0.2-2c3.6,0,7,0,10.5,0C152.5,19,152.5,17.2,152.5,15.3z M61.5,336.9c0,2.5,0,4.8,0,7.2\r\n			c-3.1,0-6,0-8.8,0c-0.5-3-0.3-24.4,0.2-25.9c2.8,0,5.6,0,8.6,0c0,2.3,0,4.5,0,6.8c2.4,0,4.6,0,6.9,0c0-3,0-5.9,0-8.8\r\n			c0-1.2-0.8-2-1.9-2.3c-0.7-0.2-1.5-0.3-2.3-0.3c-4.9,0-9.9,0-14.8,0c-2.5,0-4.1,0.7-4.1,4.1c0.1,7.9,0,15.8,0,23.8\r\n			c0,1.4,0,2.8,0,4.2c0.1,1.8,0.7,2.6,2.4,3c0.8,0.2,1.5,0.3,2.3,0.3c4.5,0,8.9,0,13.4,0c0.8,0,1.7-0.1,2.5-0.3\r\n			c1.7-0.4,2.4-1.2,2.4-3c0-2.4,0-4.8,0-7.2c0-0.5-0.1-1.1-0.2-1.6C66,336.9,63.9,336.9,61.5,336.9z M207.8,313.7\r\n			c0,11.8,0,23.4,0,35.1c6.5,0,12.9,0,19.4,0c0-1.6,0-3,0-4.7c-2.2,0-4.2,0-6.2,0c-2-0.1-4,0.3-6-0.2c0-3.6,0-7,0-10.7\r\n			c3.5,0,7,0,10.3,0c0-1.7,0-3,0-4.6c-3.5,0-6.9,0-10.2,0c-0.4-2.4-0.4-8.5,0.1-10.2c3.9,0,7.8,0,11.8,0c0-1.6,0-3.1,0-4.6\r\n			C220.5,313.7,214.2,313.7,207.8,313.7z M172.8,348.8c7.2,0,14.2,0,21.3,0c0-1.7,0-3.2,0-4.9c-4.3,0-8.4,0-12.8,0\r\n			c0.3-0.7,0.5-1.1,0.7-1.6c3.8-8,7.7-16.1,11.5-24.1c0.7-1.5,0.9-2.9,0.5-4.4c-2.9-0.5-18.8-0.3-20.2,0.1c0,1.5,0,2.9,0,4.5\r\n			c3.9,0,7.7,0,11.8,0c-0.5,1.1-0.8,1.9-1.2,2.7c-3.7,7.8-7.4,15.6-11.1,23.3C172.6,345.9,172.4,347.2,172.8,348.8z M129.9,318.3\r\n			c2.7,0,5.1,0,7.6,0c0-1.7,0-3.1,0-4.6c-7.5,0-14.8,0-22.3,0c0,1.6,0,3,0,4.7c2.6,0,5,0,7.6,0c0,2.8,0,5.3,0,7.8c0,2.5,0,4.9,0,7.4\r\n			c0,2.5,0,5.1,0,7.6c0,2.5-0.1,5,0.1,7.6c2.5,0,4.7,0.1,7-0.1C129.9,338.6,129.9,328.7,129.9,318.3z M89.3,313.7\r\n			c0,11.8,0,23.4,0,35.1c2.4,0,4.6,0,6.9,0c0-11.8,0-23.4,0-35.1C93.9,313.7,91.6,313.7,89.3,313.7z M159,313.7c-2.4,0-4.6,0-6.9,0\r\n			c0,11.7,0,23.4,0,35.1c2.3,0,4.6,0,6.9,0C159,337.1,159,325.5,159,313.7z M172.9,15.3c-3.6,0-6.9,0-10.3,0\r\n			c-4.2,14.4-8.5,28.7-12.8,43.2c3.4,0,6.6,0,9.9,0c0.7-2.6,1.3-5.2,2.1-8c4.1,0.3,8.1,0.7,12.2,1c0.8,3.1,1.5,6,2.2,8.9\r\n			c3.3,0.7,6.4,1.4,9.9,2.1C181.8,46.3,177.5,30.7,172.9,15.3z M167.5,26.8c-1.4,5.9-2.9,11.9-4.4,18c3.1,0.2,6.1,0.5,9.5,0.7\r\n			c-1.6-6.4-3.1-12.6-4.6-18.7C167.8,26.8,167.6,26.8,167.5,26.8z"/>\r\n	</g>\r\n	<g id="sc-logo-chevrons">\r\n		<g id="sc-logo-chevron-pair-18">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M88.9,304.5\r\n				c2.6,0.7,4.8,0.7,7.7,0.1c6.7-1.3,12.5-4.4,17.6-8.8c1-0.8,1.8-1.8,2.6-2.8c0.5-0.7,0.8-1.6,1.1-2.4c-1.5-1.2-3-1-4.5-0.9\r\n				c-4.8,0.5-9.2,2.1-13.4,4.3c-3.8,2-7.1,4.6-9.7,8C89.8,302.9,89.4,303.7,88.9,304.5z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M191.5,290.7\r\n				c0.2,1.9,1.4,3.1,2.6,4.2c5.4,5,11.6,8.5,18.9,9.8c2.4,0.4,4.8,0.6,7.6-0.2c-1.3-1.6-2.2-3.1-3.4-4.3c-3.7-4-8.4-6.6-13.5-8.5\r\n				c-2.9-1-5.8-1.8-8.9-1.9C193.7,289.8,192.4,289.7,191.5,290.7z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-17">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M204.8,285.9\r\n				c0.5,1.7,0.7,2.3,2.5,3.5c2.5,1.7,5.1,3.2,7.9,4.5c4.6,2.1,9.5,3.1,14.6,2.9c1.7-0.1,3.4-0.3,5.3-1.1c-1.1-1.2-1.9-2.3-3-3.1\r\n				c-6.8-5.8-14.8-8-23.5-7.9C207.3,284.6,205.8,284.7,204.8,285.9z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M74.2,295.8\r\n				c1,0.3,1.7,0.5,2.4,0.6c9.9,1.4,18.5-1.7,26.2-7.7c0.4-0.3,0.8-0.8,1.1-1.3c0.9-1.3,0.7-2-0.9-2.5c-0.3-0.1-0.7-0.2-1-0.2\r\n				c-2.2,0-4.5-0.1-6.7,0.1c-6.1,0.7-11.7,2.7-16.6,6.3C77,292.5,75.5,293.9,74.2,295.8z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-16">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M247.6,285.1\r\n				c-1.4-1.1-2.6-2.1-3.9-2.9c-6.2-3.8-13-4.9-20.1-4.5c-1.5,0.1-3.1,0.3-4.6,0.7c-1,0.2-2.1,0.5-2.5,1.6\r\n				C220,286.5,239.6,289.9,247.6,285.1z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M92.9,279.8\r\n				c-0.8-1-1.9-1.4-3-1.6c-3.5-0.8-7.1-0.8-10.7-0.4c-5,0.5-9.7,1.9-13.9,4.6c-1.2,0.8-2.4,1.6-3.4,3.1c1.2,0.5,2.2,0.9,3.3,1.2\r\n				c3.4,1,6.8,1.1,10.3,0.7c4.8-0.5,9.4-1.8,13.7-4.1C90.6,282.5,92.2,281.7,92.9,279.8z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-15">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M227.8,272.4\r\n				c0.8,1.4,2,2.1,3.2,2.5c2.8,0.8,5.7,1.7,8.6,2.1c5.3,0.8,10.6,0.5,15.6-1.5c1.3-0.5,2.4-1.2,4-2c-1.3-0.8-2.1-1.4-3-1.9\r\n				c-3.5-1.9-7.2-2.7-11.1-3c-4.6-0.4-9.2,0-13.6,1.4C230.1,270.4,228.7,270.9,227.8,272.4z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M50.2,273.6\r\n				c1.6,0.8,2.8,1.5,4.1,2c5,2,10.2,2.2,15.4,1.5c3-0.4,5.9-1.4,8.8-2.2c1.3-0.4,2.4-1.1,3.1-2.5c-1.1-1.6-2.8-2.1-4.5-2.6\r\n				c-5.9-1.6-11.8-1.8-17.8-0.4C56.1,270,53.1,271.2,50.2,273.6z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-14">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M238.5,264\r\n				c1.1,0.5,1.9,1.2,2.9,1.4c1.8,0.5,3.6,0.9,5.4,1c6.4,0.6,12.7-0.2,18.5-3.2c1.4-0.7,2.7-1.7,4.5-2.9c-1.8-0.7-3-1.4-4.3-1.8\r\n				c-5.4-1.7-10.9-1.5-16.3-0.2c-2.5,0.6-5,1.5-7.4,2.5C240.4,261.4,239.2,262.1,238.5,264z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M40,260.4\r\n				c1.9,2,4.2,3.2,6.6,4c6.6,2.4,13.3,2.8,20.2,1.3c0.9-0.2,1.8-0.5,2.6-0.9c1.6-0.8,1.7-1.6,0.3-2.7c-0.7-0.6-1.5-1.1-2.3-1.5\r\n				c-6.5-2.9-13.3-4-20.4-2.9C44.5,258.3,42.2,258.9,40,260.4z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-13">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M31.8,246.4\r\n				c1.2,1.1,2.1,2.1,3.1,2.8c7,5.1,14.9,6.6,23.3,5.9c1.2-0.1,2.5-0.3,3.3-1.5C58.7,247,40.4,242.4,31.8,246.4z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M277.6,246.2\r\n				c-1.2-0.4-1.8-0.6-2.5-0.8c-3.1-0.8-6.3-0.9-9.4-0.5c-5.3,0.7-10.2,2.4-14.6,5.2c-1,0.6-1.9,1.5-2.7,2.3c-0.8,0.9-0.6,1.6,0.5,2\r\n				c1.2,0.4,2.6,0.8,3.9,0.8c2.8,0,5.7-0.1,8.4-0.5c5.4-0.9,10.5-2.9,14.7-6.6C276.3,247.6,276.8,247,277.6,246.2z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-12">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M53.6,242.5\r\n				c-0.4-1.9-1.7-3-3-4.1c-5.1-4.1-10.9-6.8-17.4-7.6c-2.5-0.3-5-0.4-7.7,0.5c1,1.7,2.1,3,3.4,4.2c6,5.1,13,7.6,20.7,8.1\r\n				C50.9,243.6,52.3,243.6,53.6,242.5z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M283.8,231.6\r\n				c-0.1-0.2-0.2-0.4-0.2-0.6c-1.1-0.1-2.2-0.4-3.3-0.4c-8.5-0.2-15.7,3-22.1,8.3c-0.8,0.7-1.5,1.5-2,2.4c-0.6,1-0.3,1.6,0.8,1.9\r\n				c0.9,0.2,2,0.4,2.9,0.3c7.7-0.5,14.6-2.9,20.5-8.1C281.6,234.4,282.7,232.9,283.8,231.6z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-11">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M20.9,215.1\r\n				c0.8,2.3,2.2,4,3.7,5.6c4.6,4.9,10.3,7.8,16.7,9.4c1.1,0.3,2.2,0.4,3.3,0.4c0.7,0,1.4-0.3,2.1-0.4c-0.2-2-0.5-2.6-1.9-4.1\r\n				c-4.7-5.1-10.3-8.8-17.1-10.5C25.6,215,23.4,214.7,20.9,215.1z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M262.1,229.9\r\n				c1.9,1.1,3.6,0.8,5.1,0.5c4.5-0.9,8.6-2.8,12.4-5.3c3.2-2.1,6-4.7,8-8.1c0.3-0.6,0.6-1.2,0.9-2c-1-0.1-1.6-0.1-2.2-0.1\r\n				c-0.8,0-1.7,0.1-2.5,0.2c-7.9,1.3-14.2,5.3-19.4,11.2C263.4,227.3,262.9,228.5,262.1,229.9z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-10">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M18.5,199\r\n				c0.4,2.3,1.2,3.8,2.2,5.3c4.1,6.3,10,10.4,17,13c1,0.4,2.1,0.4,3.1,0.5c0.9,0,1.3-0.5,1.1-1.4c-0.3-0.9-0.6-1.9-1.1-2.7\r\n				c-4.4-6.6-10.2-11.5-17.8-13.8C21.6,199.4,20.2,199.3,18.5,199z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M290.9,199.2\r\n				c-1.2,0.1-2.1,0.1-3,0.3c-6.3,1.3-11.4,4.8-15.7,9.5c-1.6,1.7-2.9,3.7-4.2,5.6c-0.6,0.8-1,1.9-0.5,3c1.7,0.7,3.2,0,4.7-0.5\r\n				c4.9-1.8,9.2-4.6,12.8-8.4c2-2.1,3.8-4.4,4.9-7.1C290.3,200.9,290.5,200.2,290.9,199.2z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-9">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M18.2,183.3\r\n				c-0.1,0.7-0.2,0.9-0.1,1.1c0.2,0.8,0.3,1.5,0.6,2.2c3,8.1,8.8,13.6,16.3,17.5c0.5,0.3,1.1,0.4,1.6,0.5c0.6,0.1,1.2,0,1.8,0\r\n				c0.3-1.7,0.3-2.4-0.6-4.2c-3.2-6.4-7.7-11.6-14.1-15.1C22,184.5,20.1,184,18.2,183.3z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M291.2,183.5\r\n				c-0.8,0.2-1.3,0.2-1.8,0.4c-8.9,3.1-14.6,9.5-18.3,18c-0.3,0.8-0.2,1.7-0.3,2.6c2,0.3,2.5,0.3,4.3-0.6c6.4-3.4,11.5-8.2,14.7-14.8\r\n				C290.5,187.4,291.3,185.7,291.2,183.5z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-8">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M36.7,190.5\r\n				c-0.1-1.2,0-2.4-0.3-3.5c-0.4-1.5-0.9-3-1.6-4.4c-2.7-5.7-6.4-10.6-11.9-13.9c-1.1-0.6-2.2-1.1-3.5-1.7c0,1.1-0.1,1.9,0,2.6\r\n				c1.7,8.7,6.7,15.2,13.9,20.2C34.1,190.4,35,191,36.7,190.5z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M273.3,190.9\r\n				c0.8-0.3,1.8-0.5,2.5-1c7.3-4.8,12.2-11.2,14.1-19.8c0.2-0.9,0.1-1.9,0.2-3.2c-1.3,0.6-2.2,0.9-3.1,1.3c-2.7,1.4-5,3.4-7,5.7\r\n				c-3.5,4.1-6.1,8.6-7.3,13.9C272.5,188.9,272.4,189.8,273.3,190.9z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-7">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M22.1,151.2\r\n				c-0.1,1.2-0.3,2.1-0.2,3c0.7,8.4,4.5,15.2,10.5,20.9c0.8,0.8,2,1.2,3.1,1.9c1.2-1.7,1-3.4,0.7-4.9c-1.2-6.4-3.9-12.1-8.4-16.8\r\n				C26.2,153.6,24.5,152.2,22.1,151.2z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M287.1,151.1\r\n				c-1.2,0.8-2.3,1.3-3.2,2.1c-6.4,5.3-9.6,12.4-10.9,20.5c-0.2,1-0.1,2.1,0.7,2.9C280.5,175.3,288.7,160,287.1,151.1z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-6">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M36.4,160.7\r\n				c0.3-1,0.7-1.8,0.7-2.7c0.2-8.6-2.4-16.3-8.5-22.5c-0.6-0.6-1.3-1.1-2.1-1.7c-0.2,0.6-0.4,0.9-0.5,1.3c-0.6,2.7-0.5,5.3,0,8\r\n				c1,5.5,3.2,10.5,6.7,14.9C33.5,159.2,34.4,160.3,36.4,160.7z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M282.9,133.8\r\n				c-0.8,0.6-1.4,1-1.9,1.5c-6.3,6.1-8.7,13.8-8.8,22.4c0,1,0.2,2.1,1.1,3c1.6-0.2,2.5-1.4,3.4-2.5c3.6-4.6,5.9-9.8,6.7-15.5\r\n				C283.8,139.8,283.9,136.9,282.9,133.8z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-5">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M39.3,146.2\r\n				c1.2-0.9,1.4-2.1,1.6-3.4c0.5-2.8,0.3-5.6,0-8.4c-0.6-4.8-2.1-9.4-5-13.3c-0.7-0.9-1.5-1.6-2.3-2.6c-0.3,0.8-0.5,1.2-0.7,1.7\r\n				c-1,3-1.1,6.1-0.9,9.2c0.4,4.9,1.8,9.5,4.3,13.8C36.9,144.4,37.7,145.7,39.3,146.2z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M275.7,118.7\r\n				c-0.7,0.7-1.4,1.4-2,2.2c-2.7,3.5-4.2,7.6-5,12c-0.6,3.6-0.8,7.3-0.1,10.9c0.2,1,0.4,1.9,1.4,2.4\r\n				C276.2,143.1,279.8,125.5,275.7,118.7z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-4">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M44,132.8\r\n				c1.6-1,2-2.2,2.3-3.4c1.2-4.6,1.4-9.2,0.7-13.8c-0.5-3.4-1.6-6.6-3.5-9.4c-0.3-0.4-0.7-0.8-1.2-1.3c-0.5,1.1-1,1.8-1.3,2.7\r\n				c-2.8,7.9-2,15.5,1.3,23C42.6,131.3,43.4,132,44,132.8z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M265,132.6\r\n				c1.2-0.4,1.8-1.4,2.2-2.4c3-7.2,3.8-14.5,1.4-22.1c-0.4-1.1-1-2.1-1.7-3.5c-0.8,1.1-1.4,1.8-1.8,2.6c-3.9,7.5-4.2,15.2-1.9,23.2\r\n				C263.6,131.2,264,132.2,265,132.6z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-3">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M244,78.7\r\n				c-0.4,1.2-0.8,2.1-1,3.1c-1.6,8,0.3,15.3,4.4,22.1c0.5,0.8,1.4,1.5,2.2,2.2c1.3-1.4,1.5-1.8,1.8-3.5c0.8-5.8-0.1-11.4-2.4-16.8\r\n				C247.9,83.2,246.4,80.9,244,78.7z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M59.8,106.1\r\n				c0.8-0.8,1.7-1.5,2.2-2.3c4.1-6.8,5.9-14.2,4.3-22.1c-0.2-0.9-0.6-1.8-1.1-3.1c-1.1,1.3-2.1,2.3-2.8,3.4\r\n				c-4.1,6.2-5.2,13.2-4.5,20.5C58.1,103.7,58.3,105,59.8,106.1z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-2">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M256.3,91.2\r\n				c-0.6,1.2-1.1,2-1.4,3c-2.6,7.7-1.9,15.1,1.3,22.5c0.4,0.9,1,1.9,2.2,2.3c1.4-0.9,1.8-2.4,2.1-3.9c1.1-4.4,1.2-9,0.4-13.4\r\n				C260.2,97.9,259.1,94.4,256.3,91.2z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M51,118.9\r\n				c5.6-3.9,6.7-21.4,1.7-27.6c-0.7,1.1-1.4,2-1.9,3c-3.4,7-3.6,14.3-1.7,21.7C49.4,117.2,49.8,118.3,51,118.9z"/>\r\n		</g>\r\n		<g id="sc-logo-chevron-pair-1">\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M79.2,69.1\r\n				c-0.7,0.5-1.2,0.9-1.7,1.3C71.4,76.3,69.1,83.7,69,92c0,1,0.1,2.1,1.1,2.8C76.4,92.4,82,76.7,79.2,69.1z"/>\r\n			<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M230,69.3\r\n				c-0.9,3-1,4.7-0.4,8.7c0.9,5.4,3.1,10.2,6.5,14.5c0.8,1,1.7,2.1,3.1,2.3C243,89.6,236.9,72.8,230,69.3z"/>\r\n		</g>\r\n	</g>\r\n	<g id="sc-logo-star">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M199.7,172.9c-16.8-2.6-28-6.1-33.6-17.6\r\n			c-5.6-11.6-7.8-28.8-8.8-41.7c-1-12.9-2.6-46.2-2.6-46.2s-1.7,33.2-2.6,46.1c-1,12.9-3.2,30.1-8.8,41.7\r\n			c-5.6,11.6-16.8,15-33.6,17.6s-54.4,4.4-54.4,4.4c62.6,4,83.4,2.3,91.7,32.3c6.7,24.1,7.6,72.1,7.7,90v0c0,4.4,0,7,0,7s0-2.6,0-7\r\n			c0.1-18,1-65.9,7.7-90c8.3-29.9,29.1-28.3,91.7-32.3C254.1,177.3,216.6,175.5,199.7,172.9z"/>\r\n	</g>\r\n	<g id="sc-logo-arc-4">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M261.9,135.5c-2.9-6.8-6.5-13.3-10.7-19.4\r\n			c-4.2-6-8.9-11.7-14.2-16.9c-5.3-5.2-11-9.9-17.2-13.9c-1.3-0.9-2.6-1.7-4-2.5c30.7,20.2,51,55.2,51,95c0,0.4,0,0.7,0,1.1\r\n			c0,0.4,0,0.7,0,1.1c0,28.9-11.3,55.1-29.8,74.8c-20.5,22.3-49.7,36.3-82.2,36.3s-61.7-14-82.2-36.3C54,235.1,42.7,208.8,42.7,180\r\n			c0-0.4,0-0.7,0-1.1c0-0.4,0-0.7,0-1.1c0-39.8,20.3-74.8,51-95c-1.4,0.8-2.7,1.7-4,2.5c-6.2,4.1-11.9,8.8-17.2,13.9\r\n			c-5.3,5.2-10,10.9-14.2,16.9c-4.2,6.1-7.8,12.6-10.7,19.4c-6.1,14.1-9.1,29-9.1,44.5s3.1,30.4,9.1,44.5c2.9,6.8,6.5,13.3,10.7,19.4\r\n			c4.2,6,8.9,11.7,14.2,16.9c5.3,5.2,11,9.9,17.2,13.9c6.2,4.1,12.9,7.7,19.8,10.5c14.3,6,29.6,9,45.3,9s30.9-3,45.3-9\r\n			c6.9-2.9,13.5-6.4,19.8-10.5c6.2-4.1,11.9-8.8,17.2-13.9c5.3-5.2,10-10.9,14.2-16.9c4.2-6.1,7.8-12.6,10.7-19.4\r\n			c6.1-14.1,9.1-29,9.1-44.5S267.9,149.6,261.9,135.5z"/>\r\n		<circle style="fill:none;" cx="154.8" cy="177.9" r="116.3"/>\r\n	</g>\r\n	<g id="sc-logo-arc-3">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M154.7,74.6c57.1,0,103.3,46.3,103.3,103.3\r\n			s-46.3,103.3-103.3,103.3S51.4,234.9,51.4,177.9S97.7,74.6,154.7,74.6 M154.7,72.5c-14.2,0-28,2.8-41,8.3\r\n			c-12.6,5.3-23.8,12.9-33.5,22.6c-9.7,9.7-17.3,21-22.6,33.5c-5.5,13-8.3,26.8-8.3,41s2.8,28,8.3,41c5.3,12.6,12.9,23.8,22.6,33.5\r\n			c9.7,9.7,21,17.3,33.5,22.6c13,5.5,26.8,8.3,41,8.3c14.2,0,28-2.8,41-8.3c12.6-5.3,23.8-12.9,33.5-22.6c9.7-9.7,17.3-21,22.6-33.5\r\n			c5.5-13,8.3-26.8,8.3-41s-2.8-28-8.3-41c-5.3-12.6-12.9-23.8-22.6-33.5c-9.7-9.7-21-17.3-33.5-22.6C182.8,75.2,169,72.5,154.7,72.5\r\n			z"/>\r\n	</g>\r\n	<g id="sc-logo-arc-2">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M154.7,84.6c51.5,0,93.3,41.8,93.3,93.3s-41.8,93.3-93.3,93.3\r\n			s-93.3-41.8-93.3-93.3S103.2,84.6,154.7,84.6 M154.7,81.4c-13,0-25.7,2.6-37.6,7.6c-11.5,4.9-21.8,11.8-30.7,20.7\r\n			c-8.9,8.9-15.8,19.2-20.7,30.7c-5,11.9-7.6,24.5-7.6,37.6c0,13,2.6,25.7,7.6,37.6c4.9,11.5,11.8,21.8,20.7,30.7\r\n			s19.2,15.8,30.7,20.7c11.9,5,24.5,7.6,37.6,7.6c13,0,25.7-2.6,37.6-7.6c11.5-4.9,21.8-11.8,30.7-20.7c8.9-8.9,15.8-19.2,20.7-30.7\r\n			c5-11.9,7.6-24.5,7.6-37.6c0-13-2.6-25.7-7.6-37.6c-4.9-11.5-11.8-21.8-20.7-30.7c-8.9-8.9-19.2-15.8-30.7-20.7\r\n			C180.4,83.9,167.8,81.4,154.7,81.4z"/>\r\n	</g>\r\n	<g id="sc-logo-arc-1">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M154.7,114.1c35.3,0,63.8,28.6,63.8,63.8s-28.6,63.8-63.8,63.8\r\n			s-63.8-28.6-63.8-63.8S119.5,114.1,154.7,114.1 M154.7,107.7c-9.5,0-18.7,1.9-27.3,5.5c-8.4,3.5-15.9,8.6-22.3,15\r\n			c-6.4,6.4-11.5,14-15,22.3c-3.7,8.7-5.5,17.9-5.5,27.3s1.9,18.7,5.5,27.3c3.5,8.4,8.6,15.9,15,22.3c6.4,6.4,14,11.5,22.3,15\r\n			c8.7,3.7,17.9,5.5,27.3,5.5s18.7-1.9,27.3-5.5c8.4-3.5,15.9-8.6,22.3-15c6.4-6.4,11.5-14,15-22.3c3.7-8.7,5.5-17.9,5.5-27.3\r\n			s-1.9-18.7-5.5-27.3c-3.5-8.4-8.6-15.9-15-22.3c-6.4-6.4-14-11.5-22.3-15C173.4,109.5,164.2,107.7,154.7,107.7z"/>\r\n	</g>\r\n	<g id="sc-logo-bottom">\r\n		<path style="fill:none;stroke:#347BA3;stroke-miterlimit:10;" d="M128.1,296c-1.2,0.3-2,1.6-1.7,2.8l0.5,1.9c0.3,1.2,1.6,2,2.8,1.7\r\n			l24.7-6.3c0.1,0,0.2-0.1,0.4-0.1c0.1,0,0.2,0.1,0.4,0.1l24.7,6.3c1.2,0.3,2.5-0.4,2.8-1.7l0.5-1.9c0.3-1.2-0.4-2.5-1.7-2.8\r\n			l-13.3-3.4h-26.7L128.1,296z"/>\r\n	</g>\r\n</svg>\r\n';
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(97)["default"]
      , a = n(19)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(128)
      , c = s(l)
      , u = o("ARKLogo._elements")
      , h = function(e, t) {
        var n = arguments.length <= 2 || void 0 === arguments[2] ? t : arguments[2];
        return function() {
            var i = e.getBBox()
              , r = (i.width / 2 + i.x).toFixed(3)
              , o = (i.height / 2 + i.y).toFixed(3);
            return "matrix(" + t + ", 0, 0, " + n + ", " + (r - t * r) + ", " + (o - n * o) + ")"
        }()
    }
      , d = function() {
        function e() {
            r(this, e);
            var t = document.createElement("section");
            t.classList.add("ark-logo"),
            t.innerHTML = n(131),
            this[u] = {
                root: t,
                background: t.querySelector("#ark-logo-background"),
                star: t.querySelector("#ark-logo-star"),
                arkLetters: {
                    shape: t.querySelector("#ark-logo-ark-letters"),
                    mask: t.querySelector("#ark-logo-ark-letters__mask")
                },
                starmapLetters: {
                    shape: t.querySelector("#ark-logo-starmap-letters"),
                    mask: t.querySelector("#ark-logo-starmap-letters__mask")
                },
                logo: {
                    leftLine1: t.querySelector("#ark-logo-left-line-1 path"),
                    leftLine2: t.querySelector("#ark-logo-left-line-2 path"),
                    rightLine1: t.querySelector("#ark-logo-right-line-1 path"),
                    rightLine2: t.querySelector("#ark-logo-right-line-2 path")
                }
            },
            this[u].root.style.opacity = 0
        }
        return i(e, [{
            key: "show",
            value: function() {
                var e = this;
                return new a(function(t) {
                    var n = e[u]
                      , i = n.root
                      , r = n.background
                      , o = n.star
                      , a = n.arkLetters
                      , s = n.starmapLetters
                      , l = n.logo;
                    r.style.opacity = 0,
                    o.setAttribute("transform", h(o, 0)),
                    i.style.opacity = 1,
                    a.mask.setAttribute("transform", "translate(170 0)"),
                    s.mask.setAttribute("transform", "translate(-170 0)");
                    var d = l.leftLine1.getTotalLength();
                    l.leftLine1.style.strokeDasharray = d,
                    l.leftLine1.style.strokeDashoffset = d;
                    var f = l.leftLine2.getTotalLength();
                    l.leftLine2.style.strokeDasharray = f,
                    l.leftLine2.style.strokeDashoffset = f;
                    var p = l.rightLine1.getTotalLength();
                    l.rightLine1.style.strokeDasharray = p,
                    l.rightLine1.style.strokeDashoffset = p;
                    var m = l.rightLine2.getTotalLength();
                    l.rightLine2.style.strokeDasharray = m,
                    l.rightLine2.style.strokeDashoffset = m;
                    var v = new c["default"];
                    v.tween({
                        from: {
                            length1: d,
                            length2: f
                        },
                        to: {
                            length1: 0,
                            length2: 0
                        },
                        duration: 650,
                        step: function(e) {
                            var t = e.length1
                              , n = e.length2;
                            l.leftLine1.style.strokeDashoffset = -(.95 * t),
                            l.leftLine2.style.strokeDashoffset = n
                        }
                    });
                    var g = new c["default"];
                    g.tween({
                        from: {
                            length1: p,
                            length2: m
                        },
                        to: {
                            length1: 0,
                            length2: 0
                        },
                        duration: 650,
                        step: function(e) {
                            var t = e.length1
                              , n = e.length2;
                            l.rightLine1.style.strokeDashoffset = t,
                            l.rightLine2.style.strokeDashoffset = -(.95 * n)
                        }
                    });
                    var y = new c["default"];
                    y.tween({
                        from: {
                            scale: 0
                        },
                        to: {
                            scale: 100
                        },
                        duration: 450,
                        delay: 280,
                        easing: "easeInOutBack",
                        step: function(e) {
                            var t = e.scale;
                            return o.setAttribute("transform", h(o, t / 100))
                        }
                    });
                    var b = new c["default"];
                    b.tween({
                        from: {
                            left: 170
                        },
                        to: {
                            left: 0
                        },
                        duration: 450,
                        delay: 125,
                        step: function(e) {
                            var t = e.left;
                            return a.mask.setAttribute("transform", "translate(" + t + " 0)")
                        }
                    });
                    var x = new c["default"];
                    x.tween({
                        from: {
                            left: -170
                        },
                        to: {
                            left: 0
                        },
                        duration: 450,
                        delay: 125,
                        step: function(e) {
                            var t = e.left;
                            return s.mask.setAttribute("transform", "translate(" + t + " 0)")
                        }
                    });
                    var w = new c["default"];
                    w.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        duration: 500,
                        delay: 825,
                        step: function(e) {
                            var t = e.opacity;
                            return r.style.opacity = t / 100
                        },
                        finish: t
                    })
                }
                )
            }
        }, {
            key: "element",
            get: function() {
                return this[u].root
            }
        }]),
        e
    }();
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t) {
    e.exports = '<?xml version="1.0" encoding="utf-8"?>\r\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n	 viewBox="0 0 191 279.3" xml:space="preserve">\r\n	<g id="ark-logo-background">\r\n		<path style="display:inline;fill:#42CBF8;" d="M87.1,217.8c3.1,0,6.3,0,9.4,0c0.5,0.1,1,0.2,1.5,0.3c5.1,1.1,8,5.9,6.2,10.6\r\n			c-0.7,1.8-2,3-3.8,3.9c0.2,0.2,0.3,0.3,0.4,0.4c1.5,2,2.9,4,4.4,6c-2,0-4.1,0-6.1,0c-0.7-1.1-1.5-2.2-2.2-3.3\r\n			c-1-1.4-2.5-1.8-4.3-1.4c0,0.8,0,1.5,0,2.3c0,0.8,0,1.6,0,2.3c-1.8,0-3.6,0-5.4,0C87.1,231.9,87.1,224.9,87.1,217.8z M92.6,229.3\r\n			c1.3,0,2.6,0.1,3.8,0c2-0.2,3.1-1.4,3.2-3.1c0.1-1.8-1-3.1-3-3.4c-1.3-0.2-2.6,0-4,0C92.6,224.9,92.6,227,92.6,229.3z M170,217.8\r\n			c-1.5,2.2-3,4.5-4.5,6.7c-0.8,1.2-2,1.5-3.5,1.3c0-2.6,0-5.3,0-8c-1.8,0-3.6,0-5.4,0c0,7.1,0,14.2,0,21.3c1.8,0,3.6,0,5.4,0\r\n			c0-2.7,0-5.4,0-8.1c1.8-0.4,2.6-0.1,3.5,1.2c1.6,2.3,3.1,4.6,4.6,7c2,0,4.1,0,6.1,0c-0.1-0.2-0.2-0.5-0.4-0.7\r\n			c-1.5-2.3-3-4.6-4.6-6.8c-0.8-1.2-1.8-2.3-2.5-3.2c0.3-0.4,0.8-0.9,1.2-1.5c2.1-3,4.1-6,6.1-9C174.1,217.8,172,217.8,170,217.8z\r\n			M24.3,217.8c1.1,0,2.2,0,3.4,0c0.9,2.1,1.8,4.2,2.7,6.3c2.1,5,4.2,10,6.3,14.9c-2,0-4.1,0-6.1,0c-0.3-0.8-0.6-1.6-0.9-2.4\r\n			c-0.1-0.4-0.4-0.5-0.8-0.5c-1.9,0-3.9,0-5.8,0c-0.4,0-0.7,0.1-0.8,0.5c-0.3,0.8-0.6,1.6-0.9,2.4c-2,0-4.1,0-6.1,0\r\n			c2.1-4.8,4.2-9.6,6.2-14.5C22.4,222.3,23.3,220,24.3,217.8z M23.5,232.1c1.7,0,3.2,0,4.8,0c-0.8-2-1.5-3.9-2.4-6.1\r\n			C25.1,228.2,24.3,230.1,23.5,232.1z"/>\r\n		<path style="display:inline;fill:#42CBF8;" d="M127,249.2c0,5.4,0,10.7,0,16.1c-0.8,0-1.6,0-2.4,0c0-3.8,0-7.5,0-11.3\r\n			c0,0-0.1,0-0.1-0.1c-1.8,2.2-3.5,4.4-5.3,6.7c-1.8-2.3-3.6-4.5-5.5-6.8c0,3.9,0,7.7,0,11.5c-0.8,0-1.6,0-2.5,0c0-5.4,0-10.7,0-16.1\r\n			c0.8-0.1,1.4-0.1,2,0.7c1.7,2.4,3.6,4.6,5.4,6.9c0.1,0.2,0.3,0.4,0.5,0.6c1.2-1.6,2.5-3.1,3.7-4.6c0.7-0.9,1.5-1.8,2.2-2.8\r\n			C125.5,249.1,126.2,249.1,127,249.2z M95.1,260c1.3-0.7,2.1-1.8,2.5-3.4c0.7-3.4-1-6.6-3.9-7.1c-2-0.4-4.2-0.2-6.2-0.3\r\n			c0,0-0.1,0-0.1,0.1c0,5.4,0,10.7,0,16.1c0.7,0,1.4,0,2.1,0c0-1.4,0-2.8,0-4.2c0.9,0,1.7,0,2.5,0c0.8,0,1.5,0.5,2,1.3\r\n			c0.5,0.8,1,1.7,1.5,2.5c0.1,0.1,0.2,0.3,0.3,0.3c0.7,0,1.4,0,2.1,0c-0.6-1.6-2.2-4.1-3.3-5.1C94.8,260.2,94.9,260.1,95.1,260z\r\n			M89.4,256.3c0-1.4,0-2.9,0-4.3c0-0.2,0.2-0.5,0.3-0.5c1.2,0,2.5,0,3.7,0.2c1.8,0.4,2.8,2.3,2.3,4.4c-0.3,1.3-1.1,2.1-2.1,2.3\r\n			c-0.9,0.2-1.7,0.2-2.6,0.3c-0.5,0-0.9,0-1.5,0C89.4,257.9,89.4,257.1,89.4,256.3z M15.2,262.5c1.9,3.2,6.6,4.1,9.3,1.7\r\n			c1.2-1.1,1.6-2.5,1.5-4.2c-0.2-1.8-1-2.9-2.4-3.5c-0.9-0.4-1.9-0.5-2.9-0.7c-0.8-0.2-1.6-0.3-2.4-0.7c-0.9-0.4-1.1-1.6-0.5-2.5\r\n			c0.3-0.4,0.7-0.8,1.2-0.9c1.8-0.7,3.4-0.1,4.8,1.2c0.1,0.1,0.2,0.2,0.4,0.4c0.5-0.5,0.9-1,1.3-1.5c-0.8-1-1.8-1.8-2.9-2.2\r\n			c-2-0.8-4-0.7-5.7,0.8c-1.2,1-1.7,2.4-1.5,4c0.2,1.7,1,2.6,2.3,3.2c0.7,0.3,1.4,0.4,2,0.6c1,0.2,2,0.4,2.9,0.7\r\n			c0.7,0.2,1.1,0.9,1.2,1.8c0.1,1-0.3,1.7-1,2.1c-0.5,0.3-1.1,0.5-1.7,0.6c-2,0.2-3.6-0.5-4.8-2.5c-0.5,0.5-0.9,1-1.3,1.5\r\n			C15.1,262.3,15.1,262.4,15.2,262.5z M74.6,265c-1.9-5.1-3.9-10.3-5.8-15.4c-0.2-0.6-0.6-0.3-1-0.4c-0.3,0-0.5,0-0.7,0.4\r\n			c-1.5,4-3.1,8.1-4.6,12.1c-0.5,1.2-0.9,2.4-1.4,3.7c0.8,0,1.5,0,2.1,0c0.3,0,0.5-0.1,0.6-0.4c0.3-0.9,0.7-1.8,1-2.8\r\n			c0.1-0.3,0.3-0.4,0.6-0.4c1.7,0,3.4,0,5,0c0.3,0,0.4,0.1,0.6,0.4c0.3,1,0.7,1.9,1.1,2.8c0.1,0.2,0.2,0.4,0.4,0.4c0.7,0,1.5,0,2.3,0\r\n			C74.6,265.2,74.6,265.1,74.6,265z M70,259.4c-1.4,0-2.8,0-4.2,0c0.7-1.8,1.4-3.7,2.1-5.6C68.6,255.7,69.3,257.5,70,259.4z\r\n			M42.5,251.5c0.4,0,0.6,0.1,0.6,0.7c0,4.2,0,8.3,0,12.5c0,0.2,0,0.4,0,0.7c0.7,0,1.4,0,2.1,0c0-4.6,0-9.2,0-13.8c1.3,0,2.6,0,4,0\r\n			c0-0.8,0-1.6,0-2.3c-3.4,0-6.7,0-10,0c0,0.8,0,1.5,0,2.3C40.3,251.5,41.4,251.6,42.5,251.5z M166.3,265.4h1.5\r\n			c0.1,0,0.3-0.1,0.3-0.3v-3.4c0-0.2,0.1-0.3,0.3-0.3c0.3,0,0.6,0,0.8,0c1-0.1,2.1,0,3.1-0.3c2.6-0.6,4.1-2.8,4.2-5.8\r\n			c0.1-2.8-1.4-5-3.9-5.8c-0.4-0.1-0.8-0.2-1.2-0.3c0,0,0,0-0.1,0c-1.7,0-3.3,0-5,0c-0.1,0-0.3,0.1-0.3,0.3v15.6\r\n			C166,265.2,166.1,265.4,166.3,265.4z M168.1,254.4c0-0.8,0-1.7,0-2.5c0-0.1,0.2-0.4,0.3-0.4c1.2,0,2.4,0,3.5,0.2\r\n			c1.9,0.4,2.9,2.4,2.4,4.5c-0.3,1.2-1,2-2,2.4c-0.8,0.2-1.6,0.3-2.5,0.4c-0.5,0-1,0-1.6,0c-0.1,0-0.3-0.1-0.3-0.3\r\n			C168.1,257.2,168.1,255.8,168.1,254.4z M145,249.9c-0.3,0.9-0.7,1.8-1,2.7c-1.6,4.1-3.2,8.2-4.8,12.4c0,0,0,0,0,0\r\n			c-0.1,0.2,0.1,0.4,0.3,0.4h2c0.1,0,0.2-0.1,0.3-0.2c0.4-1.1,0.8-2.1,1.2-3.2c0-0.1,0.3-0.2,0.4-0.2c1.8,0,3.5,0,5.3,0\r\n			c0.1,0,0.4,0.1,0.4,0.2c0.4,1.1,0.8,2.1,1.2,3.2c0,0.1,0.2,0.2,0.3,0.2h2c0.2,0,0.4-0.2,0.3-0.4c-0.6-1.7-1.3-3.3-1.9-5\r\n			c-1.3-3.3-2.6-6.7-3.9-10C146,249.9,146,249.9,145,249.9z M144,258.9c0.6-1.5,1.1-2.9,1.7-4.4c0.1-0.3,0.5-0.3,0.6,0\r\n			c0.6,1.5,1.1,3,1.7,4.4c0.1,0.2-0.1,0.4-0.3,0.4h-3.4C144.1,259.4,144,259.1,144,258.9z"/>\r\n		<path style="display:inline;fill:#42CBF8;" d="M82.1,66.4V28.8l-38,36.6v41.9l42.3,40.9v50.2l-46.7-45.1v-24.3h0.1l4.3,4.3v18.1\r\n			l38,36.6v-38.1l-42.3-40.9V63.6l46.7-45.1v49.7L61.8,93.6l0,0v-6.2L82.1,66.4z M147.3,133.5v18.1l-38,36.6v-38.1l42.3-40.9V63.6\r\n			l-46.7-45.1v49.7l24.7,25.5l0,0v-6.2l-20.3-21V28.8l38,36.6v41.9l-42.3,40.9v50.2l46.7-45.1v-24.3h-0.1L147.3,133.5z"/>\r\n		<path style="display:inline;fill:#42CBF8;" d="M88.4,106.4c2.4-0.2,4.6-2.4,4.9-4.8l2-19.9c0.2-2.4,0.6-2.4,0.9,0l2,19.9\r\n			c0.2,2.4,2.4,4.6,4.9,4.8l20.1,2c2.4,0.2,2.4,0.6,0,0.9l-20.1,2c-2.4,0.2-4.6,2.4-4.9,4.8l-2,19.9c-0.2,2.4-0.6,2.4-0.9,0l-2-19.9\r\n			c-0.2-2.4-2.4-4.6-4.9-4.8l-20.1-2c-2.4-0.2-2.4-0.6,0-0.9L88.4,106.4z"/>\r\n	</g>\r\n	<g id="ark-logo-ark-letters">\r\n		<defs>\r\n			<rect id="ark-logo-ark-letters__shape" x="11.7" y="211.6" width="168.2" height="33.5"/>\r\n		</defs>\r\n		<clipPath id="ark-logo-ark-letters__clip">\r\n			<use id="ark-logo-ark-letters__mask" xlink:href="#ark-logo-ark-letters__shape"  style="overflow:visible;"/>\r\n		</clipPath>\r\n		<path style="clip-path:url(#ark-logo-ark-letters__clip);fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M87.1,217.8c3.1,0,6.3,0,9.4,0\r\n			c0.5,0.1,1,0.2,1.5,0.3c5.1,1.1,8,5.9,6.2,10.6c-0.7,1.8-2,3-3.8,3.9c0.2,0.2,0.3,0.3,0.4,0.4c1.5,2,2.9,4,4.4,6c-2,0-4.1,0-6.1,0\r\n			c-0.7-1.1-1.5-2.2-2.2-3.3c-1-1.4-2.5-1.8-4.3-1.4c0,0.8,0,1.5,0,2.3c0,0.8,0,1.6,0,2.3c-1.8,0-3.6,0-5.4,0\r\n			C87.1,231.9,87.1,224.9,87.1,217.8z M92.6,229.3c1.3,0,2.6,0.1,3.8,0c2-0.2,3.1-1.4,3.2-3.1c0.1-1.8-1-3.1-3-3.4\r\n			c-1.3-0.2-2.6,0-4,0C92.6,224.9,92.6,227,92.6,229.3z M170,217.8c-1.5,2.2-3,4.5-4.5,6.7c-0.8,1.2-2,1.5-3.5,1.3c0-2.6,0-5.3,0-8\r\n			c-1.8,0-3.6,0-5.4,0c0,7.1,0,14.2,0,21.3c1.8,0,3.6,0,5.4,0c0-2.7,0-5.4,0-8.1c1.8-0.4,2.6-0.1,3.5,1.2c1.6,2.3,3.1,4.6,4.6,7\r\n			c2,0,4.1,0,6.1,0c-0.1-0.2-0.2-0.5-0.4-0.7c-1.5-2.3-3-4.6-4.6-6.8c-0.8-1.2-1.8-2.3-2.5-3.2c0.3-0.4,0.8-0.9,1.2-1.5\r\n			c2.1-3,4.1-6,6.1-9C174.1,217.8,172,217.8,170,217.8z M24.3,217.8c1.1,0,2.2,0,3.4,0c0.9,2.1,1.8,4.2,2.7,6.3\r\n			c2.1,5,4.2,10,6.3,14.9c-2,0-4.1,0-6.1,0c-0.3-0.8-0.6-1.6-0.9-2.4c-0.1-0.4-0.4-0.5-0.8-0.5c-1.9,0-3.9,0-5.8,0\r\n			c-0.4,0-0.7,0.1-0.8,0.5c-0.3,0.8-0.6,1.6-0.9,2.4c-2,0-4.1,0-6.1,0c2.1-4.8,4.2-9.6,6.2-14.5C22.4,222.3,23.3,220,24.3,217.8z\r\n				M23.5,232.1c1.7,0,3.2,0,4.8,0c-0.8-2-1.5-3.9-2.4-6.1C25.1,228.2,24.3,230.1,23.5,232.1z"/>\r\n	</g>\r\n	<g id="ark-logo-starmap-letters">\r\n		<defs>\r\n			<rect id="ark-logo-starmap-letters__shape" x="11.7" y="245.1" width="168.2" height="25.6"/>\r\n		</defs>\r\n		<clipPath id="ark-logo-starmap-letters__clip">\r\n			<use id="ark-logo-starmap-letters__mask" xlink:href="#ark-logo-starmap-letters__shape"  style="overflow:visible;"/>\r\n		</clipPath>\r\n		<path style="clip-path:url(#ark-logo-starmap-letters__clip);fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M127,249.2c0,5.4,0,10.7,0,16.1\r\n			c-0.8,0-1.6,0-2.4,0c0-3.8,0-7.5,0-11.3c0,0-0.1,0-0.1-0.1c-1.8,2.2-3.5,4.4-5.3,6.7c-1.8-2.3-3.6-4.5-5.5-6.8c0,3.9,0,7.7,0,11.5\r\n			c-0.8,0-1.6,0-2.5,0c0-5.4,0-10.7,0-16.1c0.8-0.1,1.4-0.1,2,0.7c1.7,2.4,3.6,4.6,5.4,6.9c0.1,0.2,0.3,0.4,0.5,0.6\r\n			c1.2-1.6,2.5-3.1,3.7-4.6c0.7-0.9,1.5-1.8,2.2-2.8C125.5,249.1,126.2,249.1,127,249.2z M95.1,260c1.3-0.7,2.1-1.8,2.5-3.4\r\n			c0.7-3.4-1-6.6-3.9-7.1c-2-0.4-4.2-0.2-6.2-0.3c0,0-0.1,0-0.1,0.1c0,5.4,0,10.7,0,16.1c0.7,0,1.4,0,2.1,0c0-1.4,0-2.8,0-4.2\r\n			c0.9,0,1.7,0,2.5,0c0.8,0,1.5,0.5,2,1.3c0.5,0.8,1,1.7,1.5,2.5c0.1,0.1,0.2,0.3,0.3,0.3c0.7,0,1.4,0,2.1,0\r\n			c-0.6-1.6-2.2-4.1-3.3-5.1C94.8,260.2,94.9,260.1,95.1,260z M89.4,256.3c0-1.4,0-2.9,0-4.3c0-0.2,0.2-0.5,0.3-0.5\r\n			c1.2,0,2.5,0,3.7,0.2c1.8,0.4,2.8,2.3,2.3,4.4c-0.3,1.3-1.1,2.1-2.1,2.3c-0.9,0.2-1.7,0.2-2.6,0.3c-0.5,0-0.9,0-1.5,0\r\n			C89.4,257.9,89.4,257.1,89.4,256.3z M15.2,262.5c1.9,3.2,6.6,4.1,9.3,1.7c1.2-1.1,1.6-2.5,1.5-4.2c-0.2-1.8-1-2.9-2.4-3.5\r\n			c-0.9-0.4-1.9-0.5-2.9-0.7c-0.8-0.2-1.6-0.3-2.4-0.7c-0.9-0.4-1.1-1.6-0.5-2.5c0.3-0.4,0.7-0.8,1.2-0.9c1.8-0.7,3.4-0.1,4.8,1.2\r\n			c0.1,0.1,0.2,0.2,0.4,0.4c0.5-0.5,0.9-1,1.3-1.5c-0.8-1-1.8-1.8-2.9-2.2c-2-0.8-4-0.7-5.7,0.8c-1.2,1-1.7,2.4-1.5,4\r\n			c0.2,1.7,1,2.6,2.3,3.2c0.7,0.3,1.4,0.4,2,0.6c1,0.2,2,0.4,2.9,0.7c0.7,0.2,1.1,0.9,1.2,1.8c0.1,1-0.3,1.7-1,2.1\r\n			c-0.5,0.3-1.1,0.5-1.7,0.6c-2,0.2-3.6-0.5-4.8-2.5c-0.5,0.5-0.9,1-1.3,1.5C15.1,262.3,15.1,262.4,15.2,262.5z M74.6,265\r\n			c-1.9-5.1-3.9-10.3-5.8-15.4c-0.2-0.6-0.6-0.3-1-0.4c-0.3,0-0.5,0-0.7,0.4c-1.5,4-3.1,8.1-4.6,12.1c-0.5,1.2-0.9,2.4-1.4,3.7\r\n			c0.8,0,1.5,0,2.1,0c0.3,0,0.5-0.1,0.6-0.4c0.3-0.9,0.7-1.8,1-2.8c0.1-0.3,0.3-0.4,0.6-0.4c1.7,0,3.4,0,5,0c0.3,0,0.4,0.1,0.6,0.4\r\n			c0.3,1,0.7,1.9,1.1,2.8c0.1,0.2,0.2,0.4,0.4,0.4c0.7,0,1.5,0,2.3,0C74.6,265.2,74.6,265.1,74.6,265z M70,259.4c-1.4,0-2.8,0-4.2,0\r\n			c0.7-1.8,1.4-3.7,2.1-5.6C68.6,255.7,69.3,257.5,70,259.4z M42.5,251.5c0.4,0,0.6,0.1,0.6,0.7c0,4.2,0,8.3,0,12.5\r\n			c0,0.2,0,0.4,0,0.7c0.7,0,1.4,0,2.1,0c0-4.6,0-9.2,0-13.8c1.3,0,2.6,0,4,0c0-0.8,0-1.6,0-2.3c-3.4,0-6.7,0-10,0c0,0.8,0,1.5,0,2.3\r\n			C40.3,251.5,41.4,251.6,42.5,251.5z M166.3,265.4h1.5c0.1,0,0.3-0.1,0.3-0.3v-3.4c0-0.2,0.1-0.3,0.3-0.3c0.3,0,0.6,0,0.8,0\r\n			c1-0.1,2.1,0,3.1-0.3c2.6-0.6,4.1-2.8,4.2-5.8c0.1-2.8-1.4-5-3.9-5.8c-0.4-0.1-0.8-0.2-1.2-0.3c0,0,0,0-0.1,0c-1.7,0-3.3,0-5,0\r\n			c-0.1,0-0.3,0.1-0.3,0.3v15.6C166,265.2,166.1,265.4,166.3,265.4z M168.1,254.4c0-0.8,0-1.7,0-2.5c0-0.1,0.2-0.4,0.3-0.4\r\n			c1.2,0,2.4,0,3.5,0.2c1.9,0.4,2.9,2.4,2.4,4.5c-0.3,1.2-1,2-2,2.4c-0.8,0.2-1.6,0.3-2.5,0.4c-0.5,0-1,0-1.6,0\r\n			c-0.1,0-0.3-0.1-0.3-0.3C168.1,257.2,168.1,255.8,168.1,254.4z M145,249.9c-0.3,0.9-0.7,1.8-1,2.7c-1.6,4.1-3.2,8.2-4.8,12.4\r\n			c0,0,0,0,0,0c-0.1,0.2,0.1,0.4,0.3,0.4h2c0.1,0,0.2-0.1,0.3-0.2c0.4-1.1,0.8-2.1,1.2-3.2c0-0.1,0.3-0.2,0.4-0.2c1.8,0,3.5,0,5.3,0\r\n			c0.1,0,0.4,0.1,0.4,0.2c0.4,1.1,0.8,2.1,1.2,3.2c0,0.1,0.2,0.2,0.3,0.2h2c0.2,0,0.4-0.2,0.3-0.4c-0.6-1.7-1.3-3.3-1.9-5\r\n			c-1.3-3.3-2.6-6.7-3.9-10C146,249.9,146,249.9,145,249.9z M144,258.9c0.6-1.5,1.1-2.9,1.7-4.4c0.1-0.3,0.5-0.3,0.6,0\r\n			c0.6,1.5,1.1,3,1.7,4.4c0.1,0.2-0.1,0.4-0.3,0.4h-3.4C144.1,259.4,144,259.1,144,258.9z"/>\r\n	</g>\r\n	<g id="ark-logo-right-line-2">\r\n		<path style="fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M149.1,131.6 147.3,133.5 147.3,151.6 109.3,188.2 \r\n			109.3,150.2 151.6,109.3 151.6,63.6 104.9,18.5 104.9,68.2 129.6,93.6 129.7,93.6 129.7,90.3 	"/>\r\n	</g>\r\n	<g id="ark-logo-right-line-1">\r\n		<path style="fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M129.7,90.3 129.7,87.4 109.3,66.4 109.3,28.8 \r\n			147.3,65.5 147.3,107.4 104.9,148.3 104.9,198.6 151.6,153.4 151.6,129.2 151.6,129.2 149.1,131.6 	"/>\r\n	</g>\r\n	<g id="ark-logo-left-line-1">\r\n		<path style="fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M61.8,90.2 61.8,87.4 82.1,66.4 82.1,28.8 44.2,65.5 \r\n			44.2,107.4 86.5,148.3 86.5,198.6 39.8,153.4 39.8,129.2 39.9,129.2 41.9,131.2 	"/>\r\n	</g>\r\n	<g id="ark-logo-left-line-2">\r\n		<path style="fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M41.9,131.2 44.2,133.5 44.2,151.6 82.1,188.2 \r\n			82.1,150.2 39.8,109.3 39.8,63.6 86.5,18.5 86.5,68.2 61.8,93.6 61.8,93.6 61.8,90.2 	"/>\r\n	</g>\r\n	<g id="ark-logo-star">\r\n		<path style="fill:none;stroke:#42CBF8;stroke-miterlimit:10;" d="M88.4,106.4c2.4-0.2,4.6-2.4,4.9-4.8l2-19.9\r\n			c0.2-2.4,0.6-2.4,0.9,0l2,19.9c0.2,2.4,2.4,4.6,4.9,4.8l20.1,2c2.4,0.2,2.4,0.6,0,0.9l-20.1,2c-2.4,0.2-4.6,2.4-4.9,4.8l-2,19.9\r\n			c-0.2,2.4-0.6,2.4-0.9,0l-2-19.9c-0.2-2.4-2.4-4.6-4.9-4.8l-20.1-2c-2.4-0.2-2.4-0.6,0-0.9L88.4,106.4z"/>\r\n	</g>\r\n</svg>\r\n'
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(97)["default"]
      , a = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(133)
      , l = a(s)
      , c = o("Loading._elements")
      , u = function() {
        function e() {
            r(this, e);
            var t = document.createElement("section");
            t.classList.add("loading"),
            t.innerHTML = n(134),
            this[c] = {
                root: t,
                diamond: t.querySelector("#loading__shape path"),
                gradient: t.querySelector("#loading__shape--shape")
            },
            this[c].root.style.opacity = 0
        }
        return i(e, [{
            key: "show",
            value: function() {
                var e = this[c]
                  , t = e.root
                  , n = e.diamond
                  , i = e.gradient;
                i.style.opacity = 0;
                var r = n.getTotalLength();
                n.style.strokeDasharray = r + "px",
                n.style.strokeDashoffset = r + "px",
                t.style.opacity = 1;
                var o = new l["default"];
                o.tween({
                    from: {
                        length: r
                    },
                    to: {
                        length: 0
                    },
                    duration: 750,
                    step: function(e) {
                        var t = e.length;
                        return n.style.strokeDashoffset = t + "px"
                    },
                    finish: function() {
                        i.style.opacity = 1;
                        var e = n.getBBox()
                          , t = e.x + e.width / 2
                          , r = e.y + e.height / 2;
                        !function o() {
                            var e = new l["default"];
                            e.tween({
                                from: {
                                    rotation: 0
                                },
                                to: {
                                    rotation: 359
                                },
                                duration: 2e3,
                                step: function(e) {
                                    var n = e.rotation;
                                    return i.setAttribute("transform", "rotate(" + n.toFixed(2) + " " + t + " " + r + ")")
                                },
                                finish: o
                            })
                        }()
                    }
                })
            }
        }, {
            key: "element",
            get: function() {
                return this[c].root
            }
        }]),
        e
    }();
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    (function() {
        var t = this || Function("return this")()
          , n = function() {
            "use strict";
            function n() {}
            /*!
	   * Handy shortcut for doing a for-in loop. This is not a "normal" each
	   * function, it is optimized for Shifty.  The iterator function only receives
	   * the property name, not the value.
	   * @param {Object} obj
	   * @param {Function(string)} fn
	   */
            function i(e, t) {
                var n;
                for (n in e)
                    Object.hasOwnProperty.call(e, n) && t(n)
            }
            /*!
	   * Perform a shallow copy of Object properties.
	   * @param {Object} targetObject The object to copy into
	   * @param {Object} srcObject The object to copy from
	   * @return {Object} A reference to the augmented `targetObj` Object
	   */
            function r(e, t) {
                return i(t, function(n) {
                    e[n] = t[n]
                }),
                e
            }
            /*!
	   * Copies each property from src onto target, but only if the property to
	   * copy to target is undefined.
	   * @param {Object} target Missing properties in this Object are filled in
	   * @param {Object} src
	   */
            function o(e, t) {
                i(t, function(n) {
                    "undefined" == typeof e[n] && (e[n] = t[n])
                })
            }
            /*!
	   * Calculates the interpolated tween values of an Object for a given
	   * timestamp.
	   * @param {Number} forPosition The position to compute the state for.
	   * @param {Object} currentState Current state properties.
	   * @param {Object} originalState: The original state properties the Object is
	   * tweening from.
	   * @param {Object} targetState: The destination state properties the Object
	   * is tweening to.
	   * @param {number} duration: The length of the tween in milliseconds.
	   * @param {number} timestamp: The UNIX epoch time at which the tween began.
	   * @param {Object} easing: This Object's keys must correspond to the keys in
	   * targetState.
	   */
            function a(e, t, n, i, r, o, a) {
                var l, c, u, h = o > e ? 0 : (e - o) / r;
                for (l in t)
                    t.hasOwnProperty(l) && (c = a[l],
                    u = "function" == typeof c ? c : d[c],
                    t[l] = s(n[l], i[l], u, h));
                return t
            }
            /*!
	   * Tweens a single property.
	   * @param {number} start The value that the tween started from.
	   * @param {number} end The value that the tween should end at.
	   * @param {Function} easingFunc The easing curve to apply to the tween.
	   * @param {number} position The normalized position (between 0.0 and 1.0) to
	   * calculate the midpoint of 'start' and 'end' against.
	   * @return {number} The tweened value.
	   */
            function s(e, t, n, i) {
                return e + (t - e) * n(i)
            }
            /*!
	   * Applies a filter to Tweenable instance.
	   * @param {Tweenable} tweenable The `Tweenable` instance to call the filter
	   * upon.
	   * @param {String} filterName The name of the filter to apply.
	   */
            function l(e, t) {
                var n = h.prototype.filter
                  , r = e._filterArgs;
                i(n, function(i) {
                    "undefined" != typeof n[i][t] && n[i][t].apply(e, r)
                })
            }
            /*!
	   * Handles the update logic for one step of a tween.
	   * @param {Tweenable} tweenable
	   * @param {number} timestamp
	   * @param {number} delay
	   * @param {number} duration
	   * @param {Object} currentState
	   * @param {Object} originalState
	   * @param {Object} targetState
	   * @param {Object} easing
	   * @param {Function(Object, *, number)} step
	   * @param {Function(Function,number)}} schedule
	   * @param {number=} opt_currentTimeOverride Needed for accurate timestamp in
	   * Tweenable#seek.
	   */
            function c(e, t, n, i, r, o, s, c, u, h, d) {
                b = t + n + i,
                x = Math.min(d || y(), b),
                w = x >= b,
                _ = i - (b - x),
                e.isPlaying() && (w ? (u(s, e._attachment, _),
                e.stop(!0)) : (e._scheduleId = h(e._timeoutHandler, v),
                l(e, "beforeTween"),
                t + n > x ? a(1, r, o, s, 1, 1, c) : a(x, r, o, s, i, t + n, c),
                l(e, "afterTween"),
                u(r, e._attachment, _)))
            }
            /*!
	   * Creates a usable easing Object from a string, a function or another easing
	   * Object.  If `easing` is an Object, then this function clones it and fills
	   * in the missing properties with `"linear"`.
	   * @param {Object.<string|Function>} fromTweenParams
	   * @param {Object|string|Function} easing
	   * @return {Object.<string|Function>}
	   */
            function u(e, t) {
                var n = {}
                  , r = typeof t;
                return "string" === r || "function" === r ? i(e, function(e) {
                    n[e] = t
                }) : i(e, function(e) {
                    n[e] || (n[e] = t[e] || p)
                }),
                n
            }
            function h(e, t) {
                this._currentState = e || {},
                this._configured = !1,
                this._scheduleFunction = f,
                "undefined" != typeof t && this.setConfig(t)
            }
            var d, f, p = "linear", m = 500, v = 1e3 / 60, g = Date.now ? Date.now : function() {
                return +new Date
            }
            , y = "undefined" != typeof SHIFTY_DEBUG_NOW ? SHIFTY_DEBUG_NOW : g;
            f = "undefined" != typeof window ? window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || window.mozCancelRequestAnimationFrame && window.mozRequestAnimationFrame || setTimeout : setTimeout;
            var b, x, w, _;
            /*!
	   * Filters are used for transforming the properties of a tween at various
	   * points in a Tweenable's life cycle.  See the README for more info on this.
	   */
            return h.prototype.tween = function(e) {
                return this._isTweening ? this : (void 0 === e && this._configured || this.setConfig(e),
                this._timestamp = y(),
                this._start(this.get(), this._attachment),
                this.resume())
            }
            ,
            h.prototype.setConfig = function(e) {
                e = e || {},
                this._configured = !0,
                this._attachment = e.attachment,
                this._pausedAtTime = null,
                this._scheduleId = null,
                this._delay = e.delay || 0,
                this._start = e.start || n,
                this._step = e.step || n,
                this._finish = e.finish || n,
                this._duration = e.duration || m,
                this._currentState = r({}, e.from) || this.get(),
                this._originalState = this.get(),
                this._targetState = r({}, e.to) || this.get();
                var t = this;
                this._timeoutHandler = function() {
                    c(t, t._timestamp, t._delay, t._duration, t._currentState, t._originalState, t._targetState, t._easing, t._step, t._scheduleFunction)
                }
                ;
                var i = this._currentState
                  , a = this._targetState;
                return o(a, i),
                this._easing = u(i, e.easing || p),
                this._filterArgs = [i, this._originalState, a, this._easing],
                l(this, "tweenCreated"),
                this
            }
            ,
            h.prototype.get = function() {
                return r({}, this._currentState)
            }
            ,
            h.prototype.set = function(e) {
                this._currentState = e
            }
            ,
            h.prototype.pause = function() {
                return this._pausedAtTime = y(),
                this._isPaused = !0,
                this
            }
            ,
            h.prototype.resume = function() {
                return this._isPaused && (this._timestamp += y() - this._pausedAtTime),
                this._isPaused = !1,
                this._isTweening = !0,
                this._timeoutHandler(),
                this
            }
            ,
            h.prototype.seek = function(e) {
                e = Math.max(e, 0);
                var t = y();
                return this._timestamp + e === 0 ? this : (this._timestamp = t - e,
                this.isPlaying() || (this._isTweening = !0,
                this._isPaused = !1,
                c(this, this._timestamp, this._delay, this._duration, this._currentState, this._originalState, this._targetState, this._easing, this._step, this._scheduleFunction, t),
                this.pause()),
                this)
            }
            ,
            h.prototype.stop = function(e) {
                return this._isTweening = !1,
                this._isPaused = !1,
                this._timeoutHandler = n,
                (t.cancelAnimationFrame || t.webkitCancelAnimationFrame || t.oCancelAnimationFrame || t.msCancelAnimationFrame || t.mozCancelRequestAnimationFrame || t.clearTimeout)(this._scheduleId),
                e && (l(this, "beforeTween"),
                a(1, this._currentState, this._originalState, this._targetState, 1, 0, this._easing),
                l(this, "afterTween"),
                l(this, "afterTweenEnd"),
                this._finish.call(this, this._currentState, this._attachment)),
                this
            }
            ,
            h.prototype.isPlaying = function() {
                return this._isTweening && !this._isPaused
            }
            ,
            h.prototype.setScheduleFunction = function(e) {
                this._scheduleFunction = e
            }
            ,
            h.prototype.dispose = function() {
                var e;
                for (e in this)
                    this.hasOwnProperty(e) && delete this[e]
            }
            ,
            h.prototype.filter = {},
            h.prototype.formula = {
                linear: function(e) {
                    return e
                }
            },
            d = h.prototype.formula,
            r(h, {
                now: y,
                each: i,
                tweenProps: a,
                tweenProp: s,
                applyFilter: l,
                shallowCopy: r,
                defaults: o,
                composeEasingObject: u
            }),
            "function" == typeof SHIFTY_DEBUG_NOW && (t.timeoutHandler = c),
            e.exports = h,
            h
        }();
        !function() {
            n.shallowCopy(n.prototype.formula, {
                easeInQuad: function(e) {
                    return Math.pow(e, 2)
                },
                easeOutQuad: function(e) {
                    return -(Math.pow(e - 1, 2) - 1)
                },
                easeInOutQuad: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 2) : -.5 * ((e -= 2) * e - 2)
                },
                easeInCubic: function(e) {
                    return Math.pow(e, 3)
                },
                easeOutCubic: function(e) {
                    return Math.pow(e - 1, 3) + 1
                },
                easeInOutCubic: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 3) : .5 * (Math.pow(e - 2, 3) + 2)
                },
                easeInQuart: function(e) {
                    return Math.pow(e, 4)
                },
                easeOutQuart: function(e) {
                    return -(Math.pow(e - 1, 4) - 1)
                },
                easeInOutQuart: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 4) : -.5 * ((e -= 2) * Math.pow(e, 3) - 2)
                },
                easeInQuint: function(e) {
                    return Math.pow(e, 5)
                },
                easeOutQuint: function(e) {
                    return Math.pow(e - 1, 5) + 1
                },
                easeInOutQuint: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 5) : .5 * (Math.pow(e - 2, 5) + 2)
                },
                easeInSine: function(e) {
                    return -Math.cos(e * (Math.PI / 2)) + 1
                },
                easeOutSine: function(e) {
                    return Math.sin(e * (Math.PI / 2))
                },
                easeInOutSine: function(e) {
                    return -.5 * (Math.cos(Math.PI * e) - 1)
                },
                easeInExpo: function(e) {
                    return 0 === e ? 0 : Math.pow(2, 10 * (e - 1))
                },
                easeOutExpo: function(e) {
                    return 1 === e ? 1 : -Math.pow(2, -10 * e) + 1
                },
                easeInOutExpo: function(e) {
                    return 0 === e ? 0 : 1 === e ? 1 : (e /= .5) < 1 ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (-Math.pow(2, -10 * --e) + 2)
                },
                easeInCirc: function(e) {
                    return -(Math.sqrt(1 - e * e) - 1)
                },
                easeOutCirc: function(e) {
                    return Math.sqrt(1 - Math.pow(e - 1, 2))
                },
                easeInOutCirc: function(e) {
                    return (e /= .5) < 1 ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
                },
                easeOutBounce: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                },
                easeInBack: function(e) {
                    var t = 1.70158;
                    return e * e * ((t + 1) * e - t)
                },
                easeOutBack: function(e) {
                    var t = 1.70158;
                    return (e -= 1) * e * ((t + 1) * e + t) + 1
                },
                easeInOutBack: function(e) {
                    var t = 1.70158;
                    return (e /= .5) < 1 ? .5 * (e * e * (((t *= 1.525) + 1) * e - t)) : .5 * ((e -= 2) * e * (((t *= 1.525) + 1) * e + t) + 2)
                },
                elastic: function(e) {
                    return -1 * Math.pow(4, -8 * e) * Math.sin((6 * e - 1) * (2 * Math.PI) / 2) + 1
                },
                swingFromTo: function(e) {
                    var t = 1.70158;
                    return (e /= .5) < 1 ? .5 * (e * e * (((t *= 1.525) + 1) * e - t)) : .5 * ((e -= 2) * e * (((t *= 1.525) + 1) * e + t) + 2)
                },
                swingFrom: function(e) {
                    var t = 1.70158;
                    return e * e * ((t + 1) * e - t)
                },
                swingTo: function(e) {
                    var t = 1.70158;
                    return (e -= 1) * e * ((t + 1) * e + t) + 1
                },
                bounce: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                },
                bouncePast: function(e) {
                    return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 2 - (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 2 - (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 2 - (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
                },
                easeFromTo: function(e) {
                    return (e /= .5) < 1 ? .5 * Math.pow(e, 4) : -.5 * ((e -= 2) * Math.pow(e, 3) - 2)
                },
                easeFrom: function(e) {
                    return Math.pow(e, 4)
                },
                easeTo: function(e) {
                    return Math.pow(e, .25)
                }
            })
        }(),
        function() {
            function e(e, t, n, i, r, o) {
                function a(e) {
                    return ((f * e + p) * e + m) * e
                }
                function s(e) {
                    return ((v * e + g) * e + y) * e
                }
                function l(e) {
                    return (3 * f * e + 2 * p) * e + m
                }
                function c(e) {
                    return 1 / (200 * e)
                }
                function u(e, t) {
                    return s(d(e, t))
                }
                function h(e) {
                    return e >= 0 ? e : 0 - e
                }
                function d(e, t) {
                    var n, i, r, o, s, c;
                    for (r = e,
                    c = 0; 8 > c; c++) {
                        if (o = a(r) - e,
                        h(o) < t)
                            return r;
                        if (s = l(r),
                        h(s) < 1e-6)
                            break;
                        r -= o / s
                    }
                    if (n = 0,
                    i = 1,
                    r = e,
                    n > r)
                        return n;
                    if (r > i)
                        return i;
                    for (; i > n; ) {
                        if (o = a(r),
                        h(o - e) < t)
                            return r;
                        e > o ? n = r : i = r,
                        r = .5 * (i - n) + n
                    }
                    return r
                }
                var f = 0
                  , p = 0
                  , m = 0
                  , v = 0
                  , g = 0
                  , y = 0;
                return m = 3 * t,
                p = 3 * (i - t) - m,
                f = 1 - m - p,
                y = 3 * n,
                g = 3 * (r - n) - y,
                v = 1 - y - g,
                u(e, c(o))
            }
            /*!
	   *  getCubicBezierTransition(x1, y1, x2, y2) -> Function
	   *
	   *  Generates a transition easing function that is compatible
	   *  with WebKit's CSS transitions `-webkit-transition-timing-function`
	   *  CSS property.
	   *
	   *  The W3C has more information about CSS3 transition timing functions:
	   *  http://www.w3.org/TR/css3-transitions/#transition-timing-function_tag
	   *
	   *  @param {number} x1
	   *  @param {number} y1
	   *  @param {number} x2
	   *  @param {number} y2
	   *  @return {function}
	   */
            function t(t, n, i, r) {
                return function(o) {
                    return e(o, t, n, i, r, 1)
                }
            }
            n.setBezierFunction = function(e, i, r, o, a) {
                var s = t(i, r, o, a);
                return s.displayName = e,
                s.x1 = i,
                s.y1 = r,
                s.x2 = o,
                s.y2 = a,
                n.prototype.formula[e] = s
            }
            ,
            n.unsetBezierFunction = function(e) {
                delete n.prototype.formula[e]
            }
        }(),
        function() {
            function e(e, t, i, r, o, a) {
                return n.tweenProps(r, t, e, i, 1, a, o)
            }
            var t = new n;
            t._filterArgs = [],
            n.interpolate = function(i, r, o, a, s) {
                var l = n.shallowCopy({}, i)
                  , c = s || 0
                  , u = n.composeEasingObject(i, a || "linear");
                t.set({});
                var h = t._filterArgs;
                h.length = 0,
                h[0] = l,
                h[1] = i,
                h[2] = r,
                h[3] = u,
                n.applyFilter(t, "tweenCreated"),
                n.applyFilter(t, "beforeTween");
                var d = e(i, l, r, o, u, c);
                return n.applyFilter(t, "afterTween"),
                d
            }
        }(),
        function(e) {
            /*!
	   * @param {Array.number} rawValues
	   * @param {string} prefix
	   *
	   * @return {Array.<string>}
	   */
            function t(e, t) {
                var n, i = [], r = e.length;
                for (n = 0; r > n; n++)
                    i.push("_" + t + "_" + n);
                return i
            }
            /*!
	   * @param {string} formattedString
	   *
	   * @return {string}
	   */
            function n(e) {
                var t = e.match(w);
                return t ? (1 === t.length || e[0].match(x)) && t.unshift("") : t = ["", ""],
                t.join(T)
            }
            /*!
	   * Convert all hex color values within a string to an rgb string.
	   *
	   * @param {Object} stateObject
	   *
	   * @return {Object} The modified obj
	   */
            function i(t) {
                e.each(t, function(e) {
                    var n = t[e];
                    "string" == typeof n && n.match(C) && (t[e] = r(n))
                })
            }
            /*!
	   * @param {string} str
	   *
	   * @return {string}
	   */
            function r(e) {
                return l(C, e, o)
            }
            /*!
	   * @param {string} hexString
	   *
	   * @return {string}
	   */
            function o(e) {
                var t = a(e);
                return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
            }
            /*!
	   * Convert a hexadecimal string to an array with three items, one each for
	   * the red, blue, and green decimal values.
	   *
	   * @param {string} hex A hexadecimal string.
	   *
	   * @returns {Array.<number>} The converted Array of RGB values if `hex` is a
	   * valid string, or an Array of three 0's.
	   */
            function a(e) {
                return e = e.replace(/#/, ""),
                3 === e.length && (e = e.split(""),
                e = e[0] + e[0] + e[1] + e[1] + e[2] + e[2]),
                E[0] = s(e.substr(0, 2)),
                E[1] = s(e.substr(2, 2)),
                E[2] = s(e.substr(4, 2)),
                E
            }
            /*!
	   * Convert a base-16 number to base-10.
	   *
	   * @param {Number|String} hex The value to convert
	   *
	   * @returns {Number} The base-10 equivalent of `hex`.
	   */
            function s(e) {
                return parseInt(e, 16)
            }
            /*!
	   * Runs a filter operation on all chunks of a string that match a RegExp
	   *
	   * @param {RegExp} pattern
	   * @param {string} unfilteredString
	   * @param {function(string)} filter
	   *
	   * @return {string}
	   */
            function l(e, t, n) {
                var i = t.match(e)
                  , r = t.replace(e, T);
                if (i)
                    for (var o, a = i.length, s = 0; a > s; s++)
                        o = i.shift(),
                        r = r.replace(T, n(o));
                return r
            }
            /*!
	   * Check for floating point values within rgb strings and rounds them.
	   *
	   * @param {string} formattedString
	   *
	   * @return {string}
	   */
            function c(e) {
                return l(S, e, u)
            }
            /*!
	   * @param {string} rgbChunk
	   *
	   * @return {string}
	   */
            function u(e) {
                for (var t = e.match(_), n = t.length, i = e.match(M)[0], r = 0; n > r; r++)
                    i += parseInt(t[r], 10) + ",";
                return i = i.slice(0, -1) + ")"
            }
            /*!
	   * @param {Object} stateObject
	   *
	   * @return {Object} An Object of formatManifests that correspond to
	   * the string properties of stateObject
	   */
            function h(i) {
                var r = {};
                return e.each(i, function(e) {
                    var o = i[e];
                    if ("string" == typeof o) {
                        var a = g(o);
                        r[e] = {
                            formatString: n(o),
                            chunkNames: t(a, e)
                        }
                    }
                }),
                r
            }
            /*!
	   * @param {Object} stateObject
	   * @param {Object} formatManifests
	   */
            function d(t, n) {
                e.each(n, function(e) {
                    for (var i = t[e], r = g(i), o = r.length, a = 0; o > a; a++)
                        t[n[e].chunkNames[a]] = +r[a];
                    delete t[e]
                })
            }
            /*!
	   * @param {Object} stateObject
	   * @param {Object} formatManifests
	   */
            function f(t, n) {
                e.each(n, function(e) {
                    var i = t[e]
                      , r = p(t, n[e].chunkNames)
                      , o = m(r, n[e].chunkNames);
                    i = v(n[e].formatString, o),
                    t[e] = c(i)
                })
            }
            /*!
	   * @param {Object} stateObject
	   * @param {Array.<string>} chunkNames
	   *
	   * @return {Object} The extracted value chunks.
	   */
            function p(e, t) {
                for (var n, i = {}, r = t.length, o = 0; r > o; o++)
                    n = t[o],
                    i[n] = e[n],
                    delete e[n];
                return i
            }
            /*!
	   * @param {Object} stateObject
	   * @param {Array.<string>} chunkNames
	   *
	   * @return {Array.<number>}
	   */
            function m(e, t) {
                k.length = 0;
                for (var n = t.length, i = 0; n > i; i++)
                    k.push(e[t[i]]);
                return k
            }
            /*!
	   * @param {string} formatString
	   * @param {Array.<number>} rawValues
	   *
	   * @return {string}
	   */
            function v(e, t) {
                for (var n = e, i = t.length, r = 0; i > r; r++)
                    n = n.replace(T, +t[r].toFixed(4));
                return n
            }
            /*!
	   * Note: It's the duty of the caller to convert the Array elements of the
	   * return value into numbers.  This is a performance optimization.
	   *
	   * @param {string} formattedString
	   *
	   * @return {Array.<string>|null}
	   */
            function g(e) {
                return e.match(_)
            }
            /*!
	   * @param {Object} easingObject
	   * @param {Object} tokenData
	   */
            function y(t, n) {
                e.each(n, function(e) {
                    var i, r = n[e], o = r.chunkNames, a = o.length, s = t[e];
                    if ("string" == typeof s) {
                        var l = s.split(" ")
                          , c = l[l.length - 1];
                        for (i = 0; a > i; i++)
                            t[o[i]] = l[i] || c
                    } else
                        for (i = 0; a > i; i++)
                            t[o[i]] = s;
                    delete t[e]
                })
            }
            /*!
	   * @param {Object} easingObject
	   * @param {Object} tokenData
	   */
            function b(t, n) {
                e.each(n, function(e) {
                    var i = n[e]
                      , r = i.chunkNames
                      , o = r.length
                      , a = t[r[0]]
                      , s = typeof a;
                    if ("string" === s) {
                        for (var l = "", c = 0; o > c; c++)
                            l += " " + t[r[c]],
                            delete t[r[c]];
                        t[e] = l.substr(1)
                    } else
                        t[e] = a
                })
            }
            /*!
	   * @typedef {{
	   *   formatString: string
	   *   chunkNames: Array.<string>
	   * }}
	   */
            var x = /(\d|\-|\.)/
              , w = /([^\-0-9\.]+)/g
              , _ = /[0-9.\-]+/g
              , S = new RegExp("rgb\\(" + _.source + /,\s*/.source + _.source + /,\s*/.source + _.source + "\\)","g")
              , M = /^.*\(/
              , C = /#([0-9]|[a-f]){3,6}/gi
              , T = "VAL"
              , E = []
              , k = [];
            e.prototype.filter.token = {
                tweenCreated: function(e, t, n, r) {
                    i(e),
                    i(t),
                    i(n),
                    this._tokenData = h(e)
                },
                beforeTween: function(e, t, n, i) {
                    y(i, this._tokenData),
                    d(e, this._tokenData),
                    d(t, this._tokenData),
                    d(n, this._tokenData)
                },
                afterTween: function(e, t, n, i) {
                    f(e, this._tokenData),
                    f(t, this._tokenData),
                    f(n, this._tokenData),
                    b(i, this._tokenData)
                }
            }
        }(n)
    }
    ).call(null)
}
, function(e, t) {
    e.exports = '<?xml version="1.0" encoding="utf-8"?>\r\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n	 viewBox="0 0 429 425" style="enable-background:new 0 0 429 425;" xml:space="preserve">\r\n	<g id="loading__shape">\r\n		<path style="fill-rule:evenodd;clip-rule:evenodd;fill:none;stroke:#072B45;stroke-width:6;stroke-miterlimit:10;" d="M17.6,241.1\r\n			v-58.3L185.9,14.6h58.3l168.3,168.3v60.4L246.3,409.4H188L17.6,241.5z"/>\r\n	</g>\r\n	<g>\r\n		<defs>\r\n			<path id="loading__shape--mask-shape" d="M247.5,412.4h-60.7l-172.2-170v-60.8L184.6,11.6h60.7l170.1,170.1v62.9L247.5,412.4z M189.3,406.4H245\r\n					L409.4,242v-57.9L242.9,17.6h-55.8L20.6,184.1v55.8L189.3,406.4z"/>\r\n		</defs>\r\n		<clipPath id="loading__shape--mask-shape">\r\n			<use xlink:href="#loading__shape--mask-shape"  style="overflow:visible;"/>\r\n		</clipPath>\r\n		<linearGradient id="loading__shape--gradient" gradientUnits="userSpaceOnUse" x1="-44.7716" y1="-186.4162" x2="12.9588" y2="-186.4162" gradientTransform="matrix(-0.9099 -1.6358 0.8739 -0.4861 210.6906 179.9666)">\r\n			<stop offset="0" style="stop-color:#FFFFFF;stop-opacity:0"/>\r\n			<stop offset="0.9402" style="stop-color:#FFFFFF;stop-opacity:0.4"/>\r\n			<stop offset="1" style="stop-color:#FFFFFF;stop-opacity:0"/>\r\n		</linearGradient>\r\n		<g style="clip-path:url(#loading__shape--mask-shape);">\r\n			<polygon id="loading__shape--shape" style="fill-rule:evenodd;clip-rule:evenodd;fill:url(#loading__shape--gradient);" points="180.5,153.1 \r\n				246.5,271.6 -134.8,483.6 -200.7,365.1 		"/>\r\n		</g>\r\n	</g>\r\n</svg>\r\n'
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(114)
      , u = l(c)
      , h = n(76)
      , d = l(h)
      , f = n(136)
      , p = l(f)
      , m = s("mapping")
      , v = {
        requestFullscreen: ["requestFullscreen", "webkitRequestFullscreen", "mozRequestFullScreen", "msRequestFullscreen"],
        exitFullscreen: ["exitFullscreen", "webkitExitFullscreen", "webkitCancelFullScreen", "mozCancelFullScreen", "msExitFullscreen"],
        fullscreenElement: ["fullscreenElement", "webkitFullscreenElement", "webkitCurrentFullScreenElement", "mozFullScreenElement", "msFullscreenElement"],
        fullscreenEnabled: ["fullscreenEnabled", "webkitFullscreenEnabled", "mozFullScreenEnabled", "msFullscreenEnabled"],
        fullscreenchange: ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"],
        fullscreenerror: ["fullscreenerror", "webkitfullscreenerror", "mozfullscreenerror", "MSFullscreenError"]
    }
      , g = ["fullscreenchange", "fullscreenerror"]
      , y = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this),
            u["default"].addEventListener(this.mapping.fullscreenchange, this._onStateChange.bind(this))
        }
        return r(t, e),
        o(t, [{
            key: "_initMapping",
            value: function() {
                this.mapping = d["default"].mapObject(v, function(e, t) {
                    return e.find(function(e) {
                        return e in u["default"] || e in u["default"].documentElement || g.indexOf(t) > -1 && "on" + e in u["default"]
                    })
                })
            }
        }, {
            key: "request",
            value: function(e) {
                e = e || u["default"].documentElement,
                e[this.mapping.requestFullscreen]()
            }
        }, {
            key: "exit",
            value: function() {
                u["default"][this.mapping.exitFullscreen]()
            }
        }, {
            key: "toggle",
            value: function(e) {
                this.isFullscreen ? this.exit() : this.request(e)
            }
        }, {
            key: "_onStateChange",
            value: function() {
                this.trigger("change_state", this.isFullscreen)
            }
        }, {
            key: "mapping",
            get: function() {
                return this[m] || this._initMapping(),
                this[m]
            },
            set: function(e) {
                this[m] = e
            }
        }, {
            key: "isFullscreen",
            get: function() {
                return !!u["default"][this.mapping.fullscreenElement]
            }
        }]),
        t
    }(p["default"]);
    t["default"] = y,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(76)
      , u = s(c)
      , h = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "toJSON",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "toJSON", this).call(this)
                  , a = u["default"].isArray(o) ? "map" : "mapObject"
                  , s = u["default"][a](o, function(e) {
                    return e && u["default"].isFunction(e.toJSON) ? e.toJSON.apply(e, n) : e
                });
                return s
            }
        }]),
        t
    }(l.Model);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                i.contextOrFrameLookup(t, n, "fwa_sotd") && (s += '\n  <a href="http://www.thefwa.com/site/star-citizen-starmap" target="_blank" class="sm-fwa-sotd sm-active"><span>FWA Site Of The Day</span></a>\n'),
                s += '\n\n<div class="circle-one"></div>\n<div class="circle-two"></div>\n<div class="circle-three"></div>\n\n<div class="sm-initial-scene">\n  <div class="sc-logo-wrapper"></div>\n\n  <div class="ark-logo-wrapper">\n    <p>Stellar Cartographics</p>\n  </div>\n\n  <div class="welcome">Welcome to the ARK Starmap. Use the fullscreen mode for a better experience</div>\n\n  <button type="button" class="launch-fullscreen">\n    <span class="background-wrapper">\n      <span class="background"></span>\n    </span>\n    <span class="left-light"></span>\n    <span class="right-light"></span>\n    <span class="caption">Enter full screen</span>\n  </button>\n\n  <button type="button" class="launch">Or <strong>enter in window mode</strong></button>\n</div>\n\n<div class="sm-loading-scene">\n  <label><span>Loading Ark interface</span></label>\n  <p><span></span></p>\n</div>\n\n<div class="sm-acknowledgment-scene">\n  <blockquote>\n    <p>Humanity has always been told to reach for the stars.</p>\n    <p>Well, it looks like we may have finally caught one.</p>\n    <footer><span>Nick Croshaw, Explorer, 2271</span></footer>\n  </blockquote>\n\n  <p>\n    Star Citizen is currently in development and changes are to be expected.\n    The ARK Starmap will be regularly expanded and updated as we move toward the completed game.\n    Thank you for joining us on the journey.\n  </p>\n\n  <input id="sm-dont-show-acknowledgment" type="checkbox">\n  <label for="sm-dont-show-acknowledgment"><span>Don\'t show this screen next time</span></label>\n\n  <button type="button" class="sm-acknowledge">\n    <span class="background-wrapper">\n      <span class="background"></span>\n    </span>\n    <span class="left-light"></span>\n    <span class="right-light"></span>\n    <span class="caption on">Acknowledge &amp; continue</span>\n  </button>\n</div>\n\n<div class="sm-info-scene">\n  <p>At the dawn of the 29th century, a new center of knowledge and understanding was constructed: the ARK. Not bound to any one place, species or government, the Ark was established under a simple principle: to provide a neutral repository for all galactic knowledge.</p>\n\n  <p>Currently residing in the Tayac System, the Ark and its team of dedicated archivists and researchers curate this information for the Galactapedia and the Starmap. Invaluable tools that allow all beings to better understand the universe and find their way through it.</p>\n\n  <input id="sm-dont-show-info" type="checkbox">\n  <label for="sm-dont-show-info"><span>Don\'t show this screen next time</span></label>\n\n  <button type="button" class="sm-continue">\n    <span class="background-wrapper">\n      <span class="background"></span>\n    </span>\n    <span class="left-light"></span>\n    <span class="right-light"></span>\n    <span class="caption on">Explore starmap</span>\n  </button>\n</div>\n\n<div class="sm-no-webgl-scene">\n  <div class="sm-contents">\n    <p class="sm-welcome">Welcome to the ARK Starmap</p>\n\n    <p class="sm-no-support">Your browser does not seem to support WebGL.</p>\n\n    <p class="sm-download">\n      We suggest you\n      <a href="http://www.google.com/chrome/" target="_blank">download the latest version of Google Chrome</a>.\n    </p>\n  </div>\n</div>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(139)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(135)
      , d = c(h)
      , f = n(142)
      , p = c(f)
      , m = n(116)
      , v = c(m)
      , g = n(146)
      , y = c(g)
      , b = n(147)
      , x = s("ui")
      , w = s("events")
      , _ = s("modelEvents")
      , S = s("fsHelper")
      , M = {
        N: "Probe data incomplete",
        M: "UEE Military classified"
    }
      , C = function(e) {
        function t(e) {
            var n = this;
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e);
            var r = this.model.get("soundFX");
            this.onUserFullscreenChange(),
            this.listenTo(this.model.get("interface"), "change:fullscreen", this.onFullscreenChange),
            this.listenTo(this.fsHelper, "change_state", this.onUserFullscreenChange),
            this.listenTo(this.model, "change:location", this.onLocationChange),
            this.listenTo(r, "change:enabled", this.render),
            y["default"].bind("backspace", function(e) {
                e.preventDefault(),
                n.model.goToParent()
            }),
            y["default"].bind("m", function(e) {
                var t = n.model.get("soundFX");
                t.set("enabled", !t.get("enabled"))
            }),
            y["default"].bind("f", function(e) {
                var t = n.model.get("interface");
                t.set("fullscreen", !t.get("fullscreen")),
                n.render()
            })
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                var e = this.model.get("soundFX")
                  , t = this.model.get("location")
                  , n = this.model.get("location").type;
                n === v["default"].Types.CELESTIAL_OBJECT && (n = "BODY");
                var i = null
                  , r = null
                  , o = null
                  , a = null;
                if (t.type !== v["default"].Types.GALAXY) {
                    r = this._getInfo();
                    var s = r && r.affiliation && r.affiliation[0];
                    o = s && s.code.toLowerCase(),
                    a = s && s.color
                }
                return r && t.type === v["default"].Types.STAR_SYSTEM && (i = M[r.status]),
                {
                    isFullscreen: this.fsHelper.isFullscreen,
                    soundEnabled: e.get("enabled"),
                    hasParent: t.type !== v["default"].Types.GALAXY,
                    info: r,
                    affiliationCode: o,
                    affiliationColor: a,
                    systemStatusText: i,
                    levels: l(p["default"].TYPE_INFO).map(function(e) {
                        var t = p["default"].TYPE_INFO[e];
                        return t.key = e,
                        t.active = e === n,
                        t
                    })
                }
            }
        }, {
            key: "_getInfo",
            value: function() {
                var e = this
                  , t = this._locationInfo
                  , n = this.model.get("currentAnimation")
                  , i = this.model.get("location");
                if (!t)
                    if (n)
                        n.then(function() {
                            e._locationInfo = e.model.getLocationInfo(i),
                            e.render()
                        });
                    else
                        try {
                            t = this.model.getLocationInfo(i)
                        } catch (r) {
                            console.error("get location info threw error even without animation", r)
                        }
                return this._locationInfo = null,
                t && t.raw
            }
        }, {
            key: "onUserFullscreenChange",
            value: function(e) {
                this.render()
            }
        }, {
            key: "onFullscreenChange",
            value: function(e, t) {
                t ? this.fsHelper.request() : this.fsHelper.exit()
            }
        }, {
            key: "onFullscreenClick",
            value: function(e) {
                e.preventDefault();
                var t = this.model.get("interface");
                t.set("fullscreen", !t.get("fullscreen")),
                this.render()
            }
        }, {
            key: "onLocationChange",
            value: function(e) {
                this.render()
            }
        }, {
            key: "onSoundClick",
            value: function(e) {
                e.preventDefault();
                var t = this.model.get("soundFX");
                t.set("enabled", !t.get("enabled"))
            }
        }, {
            key: "onBackClick",
            value: function(e) {
                e.preventDefault(),
                this.model.goToParent()
            }
        }, {
            key: "template",
            get: function() {
                return b
            }
        }, {
            key: "className",
            get: function() {
                return "sm-header"
            }
        }, {
            key: "ui",
            get: function() {
                return this[x] = this[x] || {
                    back: ".sm-back",
                    fullscreen: ".sm-fullscreen",
                    sound: ".sm-sound"
                },
                this[x]
            },
            set: function(e) {
                this[x] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[w] = this[w] || {
                    "click @ui.back": "onBackClick",
                    "click @ui.fullscreen": "onFullscreenClick",
                    "click @ui.sound": "onSoundClick"
                },
                this[w]
            },
            set: function(e) {
                this[w] = e
            }
        }, {
            key: "modelEvents",
            get: function() {
                return this[_] = this[_] || {
                    "change:location": "render"
                },
                this[_]
            }
        }, {
            key: "fsHelper",
            get: function() {
                return this[S] = this[S] || new d["default"],
                this[S]
            }
        }]),
        t
    }(u.ItemView);
    t["default"] = C,
    e.exports = t["default"]
}
, function(e, t, n) {
    e.exports = {
        "default": n(140),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(141),
    e.exports = n(30).Object.keys
}
, [476, 127, 86], function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(136)
      , u = l(c)
      , h = n(143)
      , d = l(h)
      , f = n(76)
      , p = (l(f),
    n(116))
      , m = l(p)
      , v = s("cache")
      , g = {
        STAR_SYSTEM: "STAR_SYSTEM",
        BODY: "BODY"
    }
      , y = {
        STAR_SYSTEM: null,
        BODY: "system"
    }
      , b = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "toURLParams",
            value: function() {
                var e = this.parent ? "&system=" + this.parent.get("code") : "";
                return this.get("code") + e
            }
        }, {
            key: "idAttribute",
            get: function() {
                return "code"
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    type: null,
                    code: null,
                    name: null,
                    system: null,
                    subType: void 0
                }
            }
        }, {
            key: "parent",
            get: function() {
                var e = y[this.get("type")];
                return e && this.get(e)
            }
        }], [{
            key: "load",
            value: function(e) {
                var n = t.cache.add(e);
                return n.set(e),
                n
            }
        }, {
            key: "fromLocation",
            value: function(e, n) {
                var i = e.getLocationInfo(n)
                  , r = g.STAR_SYSTEM
                  , o = null
                  , a = null;
                return n.type !== m["default"].Types.STAR_SYSTEM ? (r = g.BODY,
                o = n.objectCode,
                a = t.fromLocation(e, new m["default"](m["default"].Types.STAR_SYSTEM,n.starSystemCode))) : o = n.starSystemCode,
                new t({
                    type: r,
                    code: o,
                    name: i.name,
                    system: a,
                    subType: i.raw.type
                })
            }
        }, {
            key: "cache",
            get: function() {
                return this[v] = this[v] || new d["default"]
            }
        }, {
            key: "TYPES",
            get: function() {
                return g
            }
        }, {
            key: "TYPE_INFO",
            get: function() {
                return {
                    GALAXY: {
                        name: "Galaxy",
                        acronym: "GLX"
                    },
                    STAR_SYSTEM: {
                        name: "Star System",
                        acronym: "SYS"
                    },
                    BODY: {
                        name: "Celestial Body",
                        acronym: "OBJ"
                    }
                }
            }
        }, {
            key: "SUB_TYPE_INFO",
            get: function() {
                return {
                    STAR: {
                        name: "Star"
                    },
                    PLANET: {
                        name: "Planet"
                    },
                    SATELLITE: {
                        name: "Satellite"
                    },
                    LZ: {
                        name: "Landing zone"
                    },
                    BLACKHOLE: {
                        name: "Black hole"
                    },
                    POI: {
                        name: "Point of interest"
                    },
                    ASTEROID_BELT: {
                        name: "Asteroid belt"
                    },
                    ASTEROID_FIELD: {
                        name: "Asteroid field"
                    },
                    MANMADE: {
                        name: "Man-made"
                    },
                    JUMPPOINT: {
                        name: "Jump point"
                    }
                }
            }
        }, {
            key: "SUB_TYPES",
            get: function() {
                return {
                    STAR: "STAR",
                    PLANET: "PLANET",
                    SATELLITE: "SATELLITE",
                    LANDING_ZONE: "LZ",
                    BLACKHOLE: "BLACKHOLE",
                    POI: "POI",
                    ASTEROID_BELT: "ASTEROID_BELT",
                    ASTEROID_FIELD: "ASTEROID_FIELD",
                    MANMADE: "MANMADE",
                    JUMPPOINT: "JUMPPOINT"
                }
            }
        }]),
        t
    }(u["default"]);
    t["default"] = b,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(144)
      , c = s(l)
      , u = n(142)
      , h = s(u)
      , d = n(76)
      , f = (s(d),
    function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "parse",
            value: function(e) {
                if (!(e && e.success && e.data && e.data.objects && e.data.systems))
                    return [];
                var t = e.data.systems.resultset.map(function(e) {
                    return e.subType = e.type,
                    e.type = h["default"].TYPES.STAR_SYSTEM,
                    e
                }).concat(e.data.objects.resultset.map(function(e) {
                    return e.subType = e.type,
                    e.type = h["default"].TYPES.BODY,
                    e.system = new h["default"]({
                        type: h["default"].TYPES.STAR_SYSTEM,
                        code: e.star_system.code,
                        name: e.star_system.name,
                        subType: e.star_system.type
                    }),
                    delete e.star_system,
                    e
                }));
                return t
            }
        }, {
            key: "model",
            get: function() {
                return h["default"]
            }
        }, {
            key: "url",
            get: function() {
                return "/api/starmap/find"
            }
        }]),
        t
    }(c["default"]));
    t["default"] = f,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(75)
      , u = n(145)
      , h = l(u)
      , d = n(76)
      , f = l(d)
      , p = s("isLoading")
      , m = {
        sessionName: window.RSI.SESSION_NAME,
        defaultBase: "https://test.cloudimperiumgames.com"
    }
      , v = function(e) {
        function t() {
            a(this, t);
            for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                n[r] = arguments[r];
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, n),
            this.setSyncOptions = h["default"].prototype.setSyncOptions.bind(this),
            this.on("request", this._onRequest),
            this.on("sync", this._onSync),
            this.on("error", this._onError)
        }
        return r(t, e),
        o(t, [{
            key: "url",
            value: function() {
                throw new Error("url not set")
            }
        }, {
            key: "sync",
            value: function(e, n, r) {
                this.setSyncOptions(e, n, r);
                var o = f["default"].result(this, "url");
                return "file:" === location.protocol && (r.url = m.defaultBase + o),
                i(Object.getPrototypeOf(t.prototype), "sync", this).call(this, e, n, r)
            }
        }, {
            key: "parse",
            value: function(e) {
                return e && e.success && e.data ? e.data.resultset : []
            }
        }, {
            key: "toServerObject",
            value: function() {
                return this.toJSON()
            }
        }, {
            key: "_onRequest",
            value: function() {
                this.isLoading = !0
            }
        }, {
            key: "_onSync",
            value: function() {
                this.isLoading = !1
            }
        }, {
            key: "_onError",
            value: function() {
                this.isLoading = !1
            }
        }, {
            key: "model",
            get: function() {
                return h["default"]
            }
        }, {
            key: "isLoading",
            get: function() {
                return this[p] = this[p] || !1
            },
            set: function(e) {
                this[p] = e
            }
        }]),
        t
    }(c.Collection);
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(114)
      , c = s(l)
      , u = n(136)
      , h = s(u)
      , d = n(76)
      , f = s(d)
      , p = function(e) {
        var t = new RegExp("(?:^|; )" + encodeURIComponent(e) + "=([^;]*)").exec(c["default"].cookie);
        return t ? t[1] : null
    }
      , m = {
        sessionName: window.RSI.SESSION_NAME,
        defaultBase: "https://test.cloudimperiumgames.com"
    }
      , v = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "getUrl",
            value: function(e, t) {
                throw new Error("getUrl not implemented.")
            }
        }, {
            key: "setSyncOptions",
            value: function(e, t, n) {
                n = n || {},
                n.type = "POST",
                n.data = JSON.stringify(n.data || t.toServerObject()),
                n.contentType = "application/json; charset=utf-8",
                n.headers = n.headers || {},
                n.headers["X-" + m.sessionName] = p(m.sessionName)
            }
        }, {
            key: "sync",
            value: function(e, n, r) {
                r._method = e,
                this.setSyncOptions(e, n, r),
                r.url = this.getUrl(e, r),
                "file:" === location.protocol && (r.url = m.defaultBase + r.url);
                var o = i(Object.getPrototypeOf(t.prototype), "sync", this).call(this, e, n, r);
                return o
            }
        }, {
            key: "parse",
            value: function(e) {
                return e = e || {},
                f["default"].isUndefined(e.success) ? e : e.success && f["default"].isObject(e.data) ? e.data : null
            }
        }, {
            key: "toServerObject",
            value: function() {
                return this.toJSON()
            }
        }]),
        t
    }(h["default"]);
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i;
    !function(r, o, a) {
        function s(e, t, n) {
            return e.addEventListener ? void e.addEventListener(t, n, !1) : void e.attachEvent("on" + t, n)
        }
        function l(e) {
            if ("keypress" == e.type) {
                var t = String.fromCharCode(e.which);
                return e.shiftKey || (t = t.toLowerCase()),
                t
            }
            return w[e.which] ? w[e.which] : _[e.which] ? _[e.which] : String.fromCharCode(e.which).toLowerCase()
        }
        function c(e, t) {
            return e.sort().join(",") === t.sort().join(",")
        }
        function u(e) {
            var t = [];
            return e.shiftKey && t.push("shift"),
            e.altKey && t.push("alt"),
            e.ctrlKey && t.push("ctrl"),
            e.metaKey && t.push("meta"),
            t
        }
        function h(e) {
            return e.preventDefault ? void e.preventDefault() : void (e.returnValue = !1)
        }
        function d(e) {
            return e.stopPropagation ? void e.stopPropagation() : void (e.cancelBubble = !0)
        }
        function f(e) {
            return "shift" == e || "ctrl" == e || "alt" == e || "meta" == e
        }
        function p() {
            if (!x) {
                x = {};
                for (var e in w)
                    e > 95 && 112 > e || w.hasOwnProperty(e) && (x[w[e]] = e)
            }
            return x
        }
        function m(e, t, n) {
            return n || (n = p()[e] ? "keydown" : "keypress"),
            "keypress" == n && t.length && (n = "keydown"),
            n
        }
        function v(e) {
            return "+" === e ? ["+"] : (e = e.replace(/\+{2}/g, "+plus"),
            e.split("+"))
        }
        function g(e, t) {
            var n, i, r, o = [];
            for (n = v(e),
            r = 0; r < n.length; ++r)
                i = n[r],
                M[i] && (i = M[i]),
                t && "keypress" != t && S[i] && (i = S[i],
                o.push("shift")),
                f(i) && o.push(i);
            return t = m(i, o, t),
            {
                key: i,
                modifiers: o,
                action: t
            }
        }
        function y(e, t) {
            return null === e || e === o ? !1 : e === t ? !0 : y(e.parentNode, t)
        }
        function b(e) {
            function t(e) {
                e = e || {};
                var t, n = !1;
                for (t in x)
                    e[t] ? n = !0 : x[t] = 0;
                n || (S = !1)
            }
            function n(e, t, n, i, r, o) {
                var a, s, l = [], u = n.type;
                if (!v._callbacks[e])
                    return [];
                for ("keyup" == u && f(e) && (t = [e]),
                a = 0; a < v._callbacks[e].length; ++a)
                    if (s = v._callbacks[e][a],
                    (i || !s.seq || x[s.seq] == s.level) && u == s.action && ("keypress" == u && !n.metaKey && !n.ctrlKey || c(t, s.modifiers))) {
                        var h = !i && s.combo == r
                          , d = i && s.seq == i && s.level == o;
                        (h || d) && v._callbacks[e].splice(a, 1),
                        l.push(s)
                    }
                return l
            }
            function i(e, t, n, i) {
                v.stopCallback(t, t.target || t.srcElement, n, i) || e(t, n) === !1 && (h(t),
                d(t))
            }
            function r(e) {
                "number" != typeof e.which && (e.which = e.keyCode);
                var t = l(e);
                if (t)
                    return "keyup" == e.type && w === t ? void (w = !1) : void v.handleKey(t, u(e), e)
            }
            function a() {
                clearTimeout(y),
                y = setTimeout(t, 1e3)
            }
            function p(e, n, r, o) {
                function s(t) {
                    return function() {
                        S = t,
                        ++x[e],
                        a()
                    }
                }
                function c(n) {
                    i(r, n, e),
                    "keyup" !== o && (w = l(n)),
                    setTimeout(t, 10)
                }
                x[e] = 0;
                for (var u = 0; u < n.length; ++u) {
                    var h = u + 1 === n.length
                      , d = h ? c : s(o || g(n[u + 1]).action);
                    m(n[u], d, o, e, u)
                }
            }
            function m(e, t, i, r, o) {
                v._directMap[e + ":" + i] = t,
                e = e.replace(/\s+/g, " ");
                var a, s = e.split(" ");
                return s.length > 1 ? void p(e, s, t, i) : (a = g(e, i),
                v._callbacks[a.key] = v._callbacks[a.key] || [],
                n(a.key, a.modifiers, {
                    type: a.action
                }, r, e, o),
                void v._callbacks[a.key][r ? "unshift" : "push"]({
                    callback: t,
                    modifiers: a.modifiers,
                    action: a.action,
                    seq: r,
                    level: o,
                    combo: e
                }))
            }
            var v = this;
            if (e = e || o,
            !(v instanceof b))
                return new b(e);
            v.target = e,
            v._callbacks = {},
            v._directMap = {};
            var y, x = {}, w = !1, _ = !1, S = !1;
            v._handleKey = function(e, r, o) {
                var a, s = n(e, r, o), l = {}, c = 0, u = !1;
                for (a = 0; a < s.length; ++a)
                    s[a].seq && (c = Math.max(c, s[a].level));
                for (a = 0; a < s.length; ++a)
                    if (s[a].seq) {
                        if (s[a].level != c)
                            continue;
                        u = !0,
                        l[s[a].seq] = 1,
                        i(s[a].callback, o, s[a].combo, s[a].seq)
                    } else
                        u || i(s[a].callback, o, s[a].combo);
                var h = "keypress" == o.type && _;
                o.type != S || f(e) || h || t(l),
                _ = u && "keydown" == o.type
            }
            ,
            v._bindMultiple = function(e, t, n) {
                for (var i = 0; i < e.length; ++i)
                    m(e[i], t, n)
            }
            ,
            s(e, "keypress", r),
            s(e, "keydown", r),
            s(e, "keyup", r)
        }
        for (var x, w = {
            8: "backspace",
            9: "tab",
            13: "enter",
            16: "shift",
            17: "ctrl",
            18: "alt",
            20: "capslock",
            27: "esc",
            32: "space",
            33: "pageup",
            34: "pagedown",
            35: "end",
            36: "home",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            45: "ins",
            46: "del",
            91: "meta",
            93: "meta",
            224: "meta"
        }, _ = {
            106: "*",
            107: "+",
            109: "-",
            110: ".",
            111: "/",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'"
        }, S = {
            "~": "`",
            "!": "1",
            "@": "2",
            "#": "3",
            $: "4",
            "%": "5",
            "^": "6",
            "&": "7",
            "*": "8",
            "(": "9",
            ")": "0",
            _: "-",
            "+": "=",
            ":": ";",
            '"': "'",
            "<": ",",
            ">": ".",
            "?": "/",
            "|": "\\"
        }, M = {
            option: "alt",
            command: "meta",
            "return": "enter",
            escape: "esc",
            plus: "+",
            mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
        }, C = 1; 20 > C; ++C)
            w[111 + C] = "f" + C;
        for (C = 0; 9 >= C; ++C)
            w[C + 96] = C;
        b.prototype.bind = function(e, t, n) {
            var i = this;
            return e = e instanceof Array ? e : [e],
            i._bindMultiple.call(i, e, t, n),
            i
        }
        ,
        b.prototype.unbind = function(e, t) {
            var n = this;
            return n.bind.call(n, e, function() {}, t)
        }
        ,
        b.prototype.trigger = function(e, t) {
            var n = this;
            return n._directMap[e + ":" + t] && n._directMap[e + ":" + t]({}, e),
            n
        }
        ,
        b.prototype.reset = function() {
            var e = this;
            return e._callbacks = {},
            e._directMap = {},
            e
        }
        ,
        b.prototype.stopCallback = function(e, t) {
            var n = this;
            return (" " + t.className + " ").indexOf(" mousetrap ") > -1 ? !1 : y(t, n.target) ? !1 : "INPUT" == t.tagName || "SELECT" == t.tagName || "TEXTAREA" == t.tagName || t.isContentEditable
        }
        ,
        b.prototype.handleKey = function() {
            var e = this;
            return e._handleKey.apply(e, arguments)
        }
        ,
        b.init = function() {
            var e = b(o);
            for (var t in e)
                "_" !== t.charAt(0) && (b[t] = function(t) {
                    return function() {
                        return e[t].apply(e, arguments)
                    }
                }(t))
        }
        ,
        b.init(),
        r.Mousetrap = b,
        "undefined" != typeof e && e.exports && (e.exports = b),
        i = function() {
            return b
        }
        .call(t, n, t, e),
        !(i !== a && (e.exports = i))
    }(window, document)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div class="sm-back-indicator-container">\n  ',
                i.contextOrFrameLookup(t, n, "hasParent") && (s += '<button class="sm-back" type="button" title="Go back"><span>Back</span></button>'),
                s += '<ul class="sm-indicator">\n    ',
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "levels");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("level", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += "<li ",
                        i.memberLookup(h, "active", e.opts.autoescape) && (s += 'class="sm-active"'),
                        s += ' title="',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '">',
                        s += i.suppressValue(i.memberLookup(h, "acronym", e.opts.autoescape), e.opts.autoescape),
                        s += "</li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-info-container">',
                i.contextOrFrameLookup(t, n, "info") && (s += '<div class="sm-info sm-status-',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "info"), "status", e.opts.autoescape), e.opts.autoescape),
                s += " sm-affiliation-",
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "affiliationCode"), e.opts.autoescape),
                s += '">\n      <div class="sm-info-inner">\n        <h1 style="color: ',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "affiliationColor"), e.opts.autoescape),
                s += ';">\n          <span class="sm-name">',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "info"), "name", e.opts.autoescape), e.opts.autoescape),
                s += '</span>\n          <span class="sm-designation">',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "info"), "designation", e.opts.autoescape), e.opts.autoescape),
                s += "</span>\n        </h1>",
                i.contextOrFrameLookup(t, n, "systemStatusText") && (s += '<strong class="sm-system-status"><span>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "systemStatusText"), e.opts.autoescape),
                s += "</span></strong>"),
                s += "</div>\n    </div>"),
                s += '</div>\n\n<div class="sm-settings-container">\n  <div class="sm-settings">\n    <button class="sm-sound ',
                i.contextOrFrameLookup(t, n, "soundEnabled") && (s += "sm-enabled"),
                s += '" type="button" title="Toggle sound effects">\n      <strong><span>Toggle sound effects</span></strong>\n    </button>',
                s += '<button class="sm-fullscreen ',
                i.contextOrFrameLookup(t, n, "isFullscreen") && (s += "sm-enabled"),
                s += '" type="button" title="Toggle fullscreen">\n      <strong><span>Toggle fullscreen</span></strong>\n    </button>\n  </div>\n</div>\n',
                r(null, s)
            } catch (d) {
                r(i.handleError(d, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(149)["default"]
      , l = n(97)["default"]
      , c = n(19)["default"]
      , u = n(139)["default"]
      , h = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var d = n(114)
      , f = h(d)
      , p = n(121)
      , m = n(136)
      , v = h(m)
      , g = n(76)
      , y = h(g)
      , b = n(156)
      , x = h(b)
      , w = n(167)
      , _ = h(w)
      , S = n(178)
      , M = h(S)
      , C = n(180)
      , T = h(C)
      , E = n(182)
      , k = h(E)
      , A = n(184)
      , P = h(A)
      , L = n(142)
      , O = (h(L),
    n(186))
      , R = h(O)
      , F = n(113)
      , B = h(F)
      , D = n(116)
      , I = h(D)
      , N = n(187)
      , j = h(N)
      , V = l("canvas")
      , z = l("allLoaded")
      , U = l("api")
      , H = l("Starmap._isLoading")
      , G = function(e) {
        function t(e) {
            var n = this;
            a(this, t);
            var r = e.state;
            delete e.state,
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.initialState = r,
            window.model = this,
            y["default"].bindAll(this, "updateViewer", "updateCamera"),
            this.listenTo(this.get("affiliations"), "change:selected", this.updateViewer),
            this.listenTo(this.get("routeSizes"), "change:selected", this.updateViewer),
            this.listenTo(this.get("scanners"), "change:selected", this.updateViewer),
            this.listenTo(this.get("systemScanners"), "change:selected", this.updateViewer),
            this.listenTo(this.get("camera"), "change", this.onCameraChange),
            this.on("change:camera2d", this.updateViewer),
            this.on("change:loadingLevel", this.onLoadingLevelChange),
            this.on("start", this.onStart),
            this[H] = !1,
            this.canvas = f["default"].createDocumentFragment(),
            this.oldapi = p.starmapMain({
                rootElement: this.canvas,
                resourcePath: this.get("resourcePath"),
                apiBaseURL: this.get("apiBaseURL"),
                getSessionData: function() {
                    var e = j["default"].parse(f["default"].cookie)
                      , t = window.RSI.SESSION_NAME;
                    return {
                        sessionName: t,
                        sessionId: e[t]
                    }
                }
            }),
            window.oldapi = this.oldapi,
            this.api = new B["default"](this.oldapi),
            this._api = this.api,
            ["start", "destroy", "goToLocation", "selectLocation", "unselectLocation", "goThroughJumpPoint", "getLocationInfo", "getLocationCoordinates", "moveSelectedElementAt", "getJumpTunnelInfo", "routingHide", "routingShow", "routingGoToSegment", "addStickyHoverLocation", "removeStickyHoverLocation", "landingZoneHighlight", "landingZoneClear"].forEach(function(e) {
                return n[e] = n._api[e].bind(n._api)
            }),
            this.set("location", this._api.location),
            this.set("soundFX", new x["default"]({
                resourcePath: this.get("resourcePath"),
                api: this.oldapi
            })),
            this.set("interface", new _["default"]),
            this[z] = new c(function(e, t) {
                n._resolveLoad = e,
                n._rejectLoad = t
            }
            ),
            this.listenTo(this, "change:loadingOverlayOpacity", this._onLoadingOverlayOpacityChange),
            this._api.addEventListener("location:change", this._onLocationChange.bind(this))
        }
        return r(t, e),
        o(t, [{
            key: "load",
            value: function() {
                var e = this;
                if (!this[H]) {
                    this[H] = !0;
                    var t = this.api.start()
                      , n = this.get("soundFX").loadMusic();
                    c.all([t, n]).then(function(t) {
                        var n = s(t, 2);
                        n[0],
                        n[1];
                        e.oldapi.start(),
                        e.get("soundFX").getSoundService().findGroup("main:bgm").findSound("main:background-music").play({
                            fadeIn: 1e3
                        }),
                        e.get("soundFX").getSoundService().findGroup("loading:bgm").findSound("loading:background-music:extra").stop({
                            fadeOut: 2e3
                        }),
                        e.get("soundFX").getSoundService().findGroup("loading:bgm").findSound("loading:background-music:main").stop({
                            fadeOut: 2e3
                        }),
                        e.get("interface").trigger("start"),
                        e.onStart(),
                        e._resolveLoad(e)
                    })["catch"](function(t) {
                        return e._rejectLoad(t)
                    })
                }
                return this[z]
            }
        }, {
            key: "goToParent",
            value: function() {
                this.goToParentLocation(this.get("location"))
            }
        }, {
            key: "_onLoadingOverlayOpacityChange",
            value: function() {
                this._api.loadingOverlayOpacity = this.get("loadingOverlayOpacity")
            }
        }, {
            key: "_onLocationChange",
            value: function(e) {
                this.set({
                    location: e.detail.location,
                    currentAnimation: e.detail.animation
                })
            }
        }, {
            key: "updateViewer",
            value: function() {
                var e = this;
                this.get("affiliations").each(function(t) {
                    e.oldapi.factionSelection[t.get("code")] = t.get("selected")
                }, this),
                this.get("routeSizes").each(function(t) {
                    e.oldapi.routeSelection[t.get("size")] = t.get("selected")
                }, this),
                this.get("scanners").each(function(t) {
                    e.oldapi.lrScannerSelection[t.get("type")] = t.get("selected")
                }, this),
                this.get("routeSizes").each(function(t) {
                    e.oldapi.routeSelection[t.get("size")] = t.get("selected")
                }, this),
                this.get("systemScanners").each(function(t) {
                    e.oldapi.lrScannerHeatmap[t.get("type")] = t.get("selected")
                }, this),
                this.oldapi.controls2D = this.get("camera2d"),
                this.oldapi.setDirty()
            }
        }, {
            key: "onStart",
            value: function() {
                var e = this
                  , t = this.oldapi.getInfo()
                  , n = t.affiliations
                  , i = t.species
                  , r = n.map(function(e) {
                    var t = e.id
                      , n = e.code
                      , i = e.name
                      , r = e.color;
                    return {
                        id: parseInt(t, 10),
                        code: n,
                        name: i,
                        color: r
                    }
                }).filter(function(e) {
                    return e.id >= 0
                })
                  , o = i.map(function(e) {
                    var t = e.id
                      , n = e.code
                      , i = e.name;
                    return {
                        id: parseInt(t, 10),
                        code: n,
                        name: i
                    }
                }).filter(function(e) {
                    return e.id >= 0
                })
                  , a = u(this.oldapi.routeSelection).map(function(t) {
                    return {
                        size: t,
                        selected: e.oldapi.routeSelection[t]
                    }
                })
                  , s = u(this.oldapi.lrScannerSelection).map(function(t) {
                    return {
                        type: t,
                        selected: e.oldapi.lrScannerSelection[t]
                    }
                })
                  , l = u(this.oldapi.lrScannerHeatmap).map(function(t) {
                    return {
                        type: t,
                        selected: e.oldapi.lrScannerHeatmap[t]
                    }
                });
                this.set("camera2d", this.api.controls2D),
                this.get("affiliations").reset(r),
                this.get("routeSizes").reset(a),
                this.get("scanners").reset(s),
                this.get("systemScanners").reset(l),
                this.get("species").reset(o),
                this._setInitialState(),
                this.updateCamera()
            }
        }, {
            key: "onCameraChange",
            value: function() {
                this.trigger("update_camera", this.get("camera"))
            }
        }, {
            key: "updateCamera",
            value: function() {
                var e = this.get("camera")
                  , t = this.oldapi.cameraInfo;
                e.set({
                    pitch: t.pitch,
                    theta: t.tetha,
                    radius: t.radius,
                    panX: t.pan.x,
                    panY: t.pan.y
                }),
                requestAnimationFrame(this.updateCamera)
            }
        }, {
            key: "toURLParams",
            value: function() {
                var e = this
                  , t = ["loadingOverlayOpacity", "resourcePath"]
                  , n = this.pick(this.keys().filter(function(n) {
                    var i = e.get(n);
                    return i && y["default"].isFunction(i.toURLParams) && (i = i.toURLParams()),
                    -1 === t.indexOf(n) && (y["default"].isNumber(i) || y["default"].isString(i)) && i !== e.defaults[n]
                }));
                return y["default"].map(n, function(e, t) {
                    return [t, e.toURLParams ? e.toURLParams() : e].join("=")
                }).join("&")
            }
        }, {
            key: "_setInitialState",
            value: function() {
                var e = this;
                if (this.initialState) {
                    var t = this.initialState
                      , n = t.location
                      , i = t.system
                      , r = t.camera;
                    this.initialState = null;
                    var o = c.resolve();
                    if (n) {
                        var a = I["default"].Types.STAR_SYSTEM;
                        i && (a = I["default"].Types.CELESTIAL_OBJECT,
                        n.indexOf(".JUMPPOINTS.") > -1 && (a = I["default"].Types.JUMP_POINT));
                        var s = new I["default"](a,i || n,i ? n : null);
                        o = this.goToLocation(s)
                    }
                    r && o.then(function() {
                        var t = R["default"].parseURLParams(r)
                          , n = e.oldapi.camctrl;
                        n.setPitch(t.pitch),
                        n.setTheta(t.theta),
                        n.setTargetZoom(t.radius),
                        n._controls.targetPan.set(t.panX, t.panY, 0)
                    })
                }
            }
        }, {
            key: "goToParentLocation",
            value: function(e) {
                return (e.type === I["default"].Types.CELESTIAL_OBJECT || e.type === I["default"].Types.JUMP_POINT) && this.get("soundFX").getSoundService().findGroup("main:ambient:object").stop({
                    fadeOut: 200
                }),
                this._api.goToParentLocation(e)
            }
        }, {
            key: "canvas",
            get: function() {
                return this[V]
            },
            set: function(e) {
                this[V] = e
            }
        }, {
            key: "api",
            get: function() {
                return this[U]
            },
            set: function(e) {
                this[U] = e
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    resourcePath: "",
                    apiBaseURL: "",
                    soundFX: void 0,
                    "interface": void 0,
                    loadingOverlayOpacity: 0,
                    location: null,
                    affiliations: new M["default"],
                    routeSizes: new T["default"],
                    scanners: new k["default"],
                    species: new P["default"],
                    systemScanners: new k["default"],
                    camera: new R["default"],
                    camera2d: !1,
                    currentAnimation: null
                }
            }
        }, {
            key: "allLoaded",
            get: function() {
                return this[z]
            }
        }]),
        t
    }(v["default"]);
    t["default"] = G,
    G.prototype.updateViewer = y["default"].debounce(G.prototype.updateViewer, 100),
    G.prototype.updateCamera = y["default"].debounce(G.prototype.updateCamera, 100),
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(150)["default"]
      , r = n(153)["default"];
    t["default"] = function() {
        function e(e, t) {
            var n = []
              , r = !0
              , o = !1
              , a = void 0;
            try {
                for (var s, l = i(e); !(r = (s = l.next()).done) && (n.push(s.value),
                !t || n.length !== t); r = !0)
                    ;
            } catch (c) {
                o = !0,
                a = c
            } finally {
                try {
                    !r && l["return"] && l["return"]()
                } finally {
                    if (o)
                        throw a
                }
            }
            return n
        }
        return function(t, n) {
            if (Array.isArray(t))
                return t;
            if (r(Object(t)))
                return e(t, n);
            throw new TypeError("Invalid attempt to destructure non-iterable instance")
        }
    }(),
    t.__esModule = !0
}
, function(e, t, n) {
    e.exports = {
        "default": n(151),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(46),
    n(22),
    e.exports = n(152)
}
, function(e, t, n) {
    var i = n(56)
      , r = n(62);
    e.exports = n(30).getIterator = function(e) {
        var t = r(e);
        if ("function" != typeof t)
            throw TypeError(e + " is not iterable!");
        return i(t.call(e))
    }
}
, function(e, t, n) {
    e.exports = {
        "default": n(154),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(46),
    n(22),
    e.exports = n(155)
}
, function(e, t, n) {
    var i = n(54)
      , r = n(43)("iterator")
      , o = n(40);
    e.exports = n(30).isIterable = function(e) {
        var t = Object(e);
        return void 0 !== t[r] || "@@iterator"in t || o.hasOwnProperty(i(t))
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(19)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(136)
      , h = c(u)
      , d = n(157)
      , f = c(d)
      , p = n(166)
      , m = c(p)
      , v = n(76)
      , g = c(v)
      , y = n(128)
      , b = (c(y),
    s("api"),
    s("Rotating"))
      , x = s("Dollying")
      , w = s("Rotating")
      , _ = s("Dollying")
      , S = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this._loadPreferences(),
            f["default"].supported ? this._soundService = new f["default"](new d.ResourceService,new AudioContext) : (f["default"].installWebkitShim(),
            f["default"].supported ? this._soundService = new f["default"](new d.ResourceService,new AudioContext) : this._soundService = new m["default"]),
            this.onChangeEnabled(),
            this.api.addEventListener("soundEvent", this._processEvent.bind(this)),
            this.api.addEventListener("cameraRotationSoundEvent", this._processEvent.bind(this)),
            this.api.addEventListener("cameraDollySoundEvent", this._processEvent.bind(this)),
            this[b] = !1,
            this[w] = null,
            this[x] = !1,
            this[_] = null,
            this.on("change:enabled", this.onChangeEnabled)
        }
        return r(t, e),
        o(t, [{
            key: "getSoundService",
            value: function() {
                return this._soundService
            }
        }, {
            key: "discMenuSelection",
            value: function() {
                this._soundService.findGroup("main:sfx").findSound("main:sfx:disc:click").play()
            }
        }, {
            key: "toggleButton",
            value: function(e) {
                e ? this._soundService.findGroup("main:sfx").findSound("main:sfx:button:activate").play() : this._soundService.findGroup("main:sfx").findSound("main:sfx:button:deactivate").play()
            }
        }, {
            key: "openDisc",
            value: function() {
                this._soundService.findGroup("main:sfx").findSound("main:sfx:disc:show").play()
            }
        }, {
            key: "closeDisc",
            value: function() {
                this._soundService.findGroup("main:sfx").findSound("main:sfx:disc:hide").play()
            }
        }, {
            key: "hoverObjectIn",
            value: function() {
                this._soundService.findGroup("main:sfx").findSound("main:sfx:disc:label").play()
            }
        }, {
            key: "hoverObjectOut",
            value: function() {}
        }, {
            key: "_processEvent",
            value: function(e) {
                var t = this
                  , n = this._soundService;
                if ("soundEvent" === e.type)
                    switch (e.name) {
                    case "SelectStar":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:star").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectPlanet":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:planet").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectMoon":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:moon").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectBelt":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:belt").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectJumpPoint":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:jump-point").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectSpaceStation":
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:space-station").play({
                            fadeIn: 1e3
                        });
                        break;
                    case "SelectNothing":
                        n.findGroup("main:sfx").findSound("main:sfx:select:nothing").play(),
                        n.findGroup("main:ambient:object").stop({
                            fadeOut: 200
                        });
                        break;
                    case "EnterStarSystemStart":
                        n.findGroup("main:transitions").findSound("main:transitions:star-system:start").play({}),
                        n.findGroup("main:ambient").findSound("main:ambient:galaxy").stop({
                            fadeOut: 1500
                        }),
                        n.findGroup("main:bgm").findSound("main:background-music").fadeTo(.2, 2e3);
                        break;
                    case "EnterStarSystemCompleted":
                        n.findGroup("main:transitions").findSound("main:transitions:star-system:end").play();
                        break;
                    case "ShowLongRangeScanner":
                        n.findGroup("main:sfx").findSound("main:sfx:scanner:show").play();
                        break;
                    case "HideLongRangeScanner":
                        n.findGroup("main:sfx").findSound("main:sfx:scanner:hide").play();
                        break;
                    case "ShowHeatmap":
                        n.findGroup("main:sfx").findSound("main:sfx:heatmap:show").play();
                        break;
                    case "HideHeatmap":
                        n.findGroup("main:sfx").findSound("main:sfx:heatmap:hide").play();
                        break;
                    case "UpdateHeatmap":
                        n.findGroup("main:sfx").findSound("main:sfx:heatmap:update").play();
                        break;
                    case "LeaveStarSystemToGalaxyStart":
                        n.findGroup("main:transitions").findSound("main:transitions:star-system-to-galaxy:start").play(),
                        n.findGroup("main:ambient").findSound("main:ambient:star-system").stop({
                            fadeOut: 1500
                        }),
                        n.findGroup("main:ambient:object").stop({
                            fadeOut: 200
                        }),
                        n.findGroup("main:bgm").findSound("main:background-music").fadeTo(1, 2e3);
                        break;
                    case "LeaveStarSystemToGalaxyCompleted":
                        n.findGroup("main:transitions").findSound("main:transitions:star-system-to-galaxy:end").play();
                        break;
                    case "EnterJumpPointStart":
                        n.findGroup("main:transitions").findSound("main:transitions:jump-point:start").play(),
                        n.findGroup("main:ambient:object").findSound("main:ambient:object:jump-point").stop({
                            fadeOut: 200
                        });
                        break;
                    case "EnterJumpPointCompleted":
                        n.findGroup("main:transitions").findSound("main:transitions:jump-point:end").play();
                        break;
                    case "ShowOrbitals":
                        n.findGroup("main:sfx").findSound("main:sfx:orbitals:show").play();
                        break;
                    case "StartGalaxyAmbiance":
                        n.findGroup("main:ambient").findSound("main:ambient:galaxy").play({
                            fadeIn: 1500
                        });
                        break;
                    case "StartStarSystemAmbiance":
                        n.findGroup("main:ambient").findSound("main:ambient:star-system").play({
                            fadeIn: 1500
                        });
                        break;
                    case "HoverSystemIn":
                        n.findGroup("main:sfx").findSound("main:sfx:star-system:hover:in").play();
                        break;
                    case "HoverSystemOut":
                        n.findGroup("main:sfx").findSound("main:sfx:star-system:hover:out").play();
                        break;
                    case "HoverBodyIn":
                        n.findGroup("main:sfx").findSound("main:sfx:object:hover:in").play();
                        break;
                    case "HoverBodyOut":
                        n.findGroup("main:sfx").findSound("main:sfx:object:hover:out").play();
                        break;
                    case "HoverJumpPointIn":
                        n.findGroup("main:sfx").findSound("main:sfx:jump-point:hover:in").play();
                        break;
                    case "HoverJumpPointOut":
                        n.findGroup("main:sfx").findSound("main:sfx:jump-point:hover:out").play()
                    }
                "cameraRotationSoundEvent" === e.type && (this[b] ? (clearTimeout(this[w]),
                this[w] = setTimeout(function() {
                    n.findGroup("main:camera-sfx").findSound("main:camera:move").stop(),
                    t[b] = !1
                }, 500)) : (this[b] = !0,
                n.findGroup("main:camera-sfx").findSound("main:camera:move").play(),
                this[w] = setTimeout(function() {
                    n.findGroup("main:camera-sfx").findSound("main:camera:move").stop(),
                    t[b] = !1
                }, 500))),
                "cameraDollySoundEvent" === e.type && (this[x] ? (clearTimeout(this[_]),
                this[_] = setTimeout(function() {
                    n.findGroup("main:camera-sfx").findSound("main:camera:dolly").stop(),
                    t[x] = !1
                }, 250)) : (this[x] = !0,
                n.findGroup("main:camera-sfx").findSound("main:camera:dolly").play(),
                this[_] = setTimeout(function() {
                    n.findGroup("main:camera-sfx").findSound("main:camera:dolly").stop(),
                    t[x] = !1
                }, 250)))
            }
        }, {
            key: "loadMusic",
            value: function() {
                var e = this.get("resourcePath")
                  , t = e + "/sounds"
                  , n = this._soundService
                  , i = "StarMapOdyssaeRemix1";
                return i += f["default"].formatSupported("ogg") ? ".ogg" : f["default"].formatSupported("mp3") ? ".mp3" : ".wav",
                l.all([n.load("main:background-music", t + "/" + i, "main:bgm", {
                    loop: !0
                }), n.load("main:camera:move", t + "/CAM_FastMove_LOOP.wav", "main:camera-sfx", {
                    loop: !0
                }), n.load("main:camera:dolly", t + "/CAM_Dolly_LOOP.wav", "main:camera-sfx", {
                    loop: !0
                }), n.load("main:ambient:object:belt", t + "/SE_SelectBelt_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:object:jump-point", t + "/SE_SelectJumpPoint_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:object:moon", t + "/SE_SelectMoon_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:object:planet", t + "/SE_SelectPlanet_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:object:space-station", t + "/SE_SelectSpaceStation_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:object:star", t + "/SE_SelectStar_LOOP.wav", "main:ambient:object", {
                    loop: !0
                }), n.load("main:ambient:galaxy", t + "/SE_StartGalaxyAmbiance_LOOP.wav", "main:ambient", {
                    loop: !0
                }), n.load("main:ambient:star-system", t + "/SE_StartStarSystemAmbiance_LOOP.wav", "main:ambient", {
                    loop: !0
                }), n.load("main:sfx:select:nothing", t + "/SE_SelectNothing.wav", "main:sfx"), n.load("main:sfx:heatmap:show", t + "/SE_ShowHeatmap.wav", "main:sfx"), n.load("main:sfx:heatmap:hide", t + "/SE_HideHeatmap.wav", "main:sfx"), n.load("main:sfx:heatmap:update", t + "/SE_UpdateHeatmap.wav", "main:sfx"), n.load("main:sfx:scanner:show", t + "/SE_ShowLongRangeScanner.wav", "main:sfx"), n.load("main:sfx:scanner:hide", t + "/SE_HideLongRangeScanner.wav", "main:sfx"), n.load("main:sfx:route:search", t + "/UI_BB_RoutingSearchForRoute.wav", "main:sfx"), n.load("main:sfx:route:found", t + "/UI_BB_RoutingRouteFound.wav", "main:sfx"), n.load("main:sfx:button:activate", t + "/UI_BB_ToggleButtonActivate.wav", "main:sfx"), n.load("main:sfx:button:deactivate", t + "/UI_BB_ToggleButtonDeactivate.wav", "main:sfx"), n.load("main:sfx:orbitals:show", t + "/SE_ShowOrbitals.wav", "main:sfx"), n.load("main:sfx:disc:show", t + "/UI_DiscOpen.wav", "main:sfx"), n.load("main:sfx:disc:hide", t + "/UI_DiscClose.wav", "main:sfx"), n.load("main:sfx:disc:activate", t + "/UI_DiscToggleActivate.wav", "main:sfx"), n.load("main:sfx:disc:deactivate", t + "/UI_DiscToggleDeactivate.wav", "main:sfx"), n.load("main:sfx:disc:click", t + "/UI_DiscClick.wav", "main:sfx"), n.load("main:sfx:disc:label", t + "/SE_ControlDisk_Label.wav", "main:sfx"), n.load("main:sfx:star-system:hover:in", t + "/SE_HoverSystemIn.wav", "main:sfx"), n.load("main:sfx:star-system:hover:out", t + "/SE_HoverSystemOut.wav", "main:sfx"), n.load("main:sfx:object:hover:in", t + "/SE_HoverBodyIn.wav", "main:sfx"), n.load("main:sfx:object:hover:out", t + "/SE_HoverBodyOut.wav", "main:sfx"), n.load("main:sfx:jump-point:hover:in", t + "/SE_HoverJumpPointIn.wav", "main:sfx"), n.load("main:sfx:jump-point:hover:out", t + "/SE_HoverJumpPointOut.wav", "main:sfx"), n.load("main:transitions:jump-point:start", t + "/SE_EnterJumpPointStart.wav", "main:transitions"), n.load("main:transitions:jump-point:end", t + "/SE_EnterJumpPointCompleted.wav", "main:transitions"), n.load("main:transitions:star-system:start", t + "/SE_EnterStarSystemStart.wav", "main:transitions"), n.load("main:transitions:star-system:end", t + "/SE_EnterStarSystemCompleted.wav", "main:transitions"), n.load("main:transitions:star-system-to-galaxy:start", t + "/SE_LeaveStarSystemToGalaxyStart.wav", "main:transitions"), n.load("main:transitions:star-system-to-galaxy:end", t + "/SE_LeaveStarSystemToGalaxyCompleted.wav", "main:transitions")]).then(function(e) {
                    n.findGroup("main:ambient").setAllowSimultaneous(!1).setFadeOut(1500),
                    n.findGroup("main:ambient:object").setAllowSimultaneous(!1).setFadeOut(200)
                })
            }
        }, {
            key: "onChangeEnabled",
            value: function() {
                this._soundService.setMasterVolume(this.get("enabled") ? 1 : 0),
                this.savePreferences()
            }
        }, {
            key: "_loadPreferences",
            value: function() {
                var e = localStorage.sm_sound_fx;
                if (e) {
                    try {
                        e = JSON.parse(e)
                    } catch (t) {
                        return void (localStorage.sm_sound_fx = null)
                    }
                    this.set(g["default"].pick(e, "enabled"))
                }
            }
        }, {
            key: "savePreferences",
            value: function() {
                localStorage.sm_sound_fx = JSON.stringify(g["default"].pick(this.toJSON(), "enabled"))
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    api: void 0,
                    resourcePath: void 0,
                    enabled: !0,
                    volume: 1
                }
            }
        }, {
            key: "api",
            get: function() {
                return this.get("api")
            },
            set: function(e) {
                this.set("api", e)
            }
        }]),
        t
    }(h["default"]);
    t["default"] = S,
    e.exports = t["default"]
}
, function(e, t, n) {
    (function(e) {
        "use strict";
        var i = n(93)["default"]
          , r = n(96)["default"]
          , o = n(82)["default"]
          , a = n(87)["default"]
          , s = n(19)["default"]
          , l = n(159)["default"];
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var c = function() {
            function e(t, n) {
                r(this, e),
                this._uri = t,
                this._buffer = n
            }
            return i(e, [{
                key: "getUri",
                value: function() {
                    return this._uri
                }
            }, {
                key: "getBuffer",
                value: function() {
                    return this._buffer
                }
            }]),
            e
        }()
          , u = function(e) {
            function t(e) {
                r(this, t),
                o(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
            }
            return a(t, e),
            t
        }(Error)
          , h = function() {
            function t() {
                r(this, t),
                this._resourceCache = new l
            }
            return i(t, [{
                key: "load",
                value: function(t, n) {
                    var i = this;
                    return this._resourceCache.has(t) ? s.resolve(this._resourceCache.get(t)) : e(n, {
                        credentials: "include"
                    }).then(function(e) {
                        return e.arrayBuffer()
                    }).then(function(e) {
                        var n = new c(t,e);
                        return i._resourceCache.set(t, n),
                        n
                    })
                }
            }, {
                key: "free",
                value: function(e) {
                    if (!this._resourceCache.has(e))
                        throw new u("A resource with uri " + e + " was not found");
                    this._resourceCache["delete"](e)
                }
            }, {
                key: "freeAll",
                value: function() {
                    this._resourceCache.clear()
                }
            }]),
            t
        }();
        t.ResourceService = h;
        var d = function(e) {
            function t(e) {
                r(this, t),
                o(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
            }
            return a(t, e),
            t
        }(Error)
          , f = function(e) {
            function t(e) {
                r(this, t),
                o(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
            }
            return a(t, e),
            t
        }(Error)
          , p = function(e) {
            function t(e) {
                r(this, t),
                o(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
            }
            return a(t, e),
            t
        }(Error)
          , m = function() {
            function e(t, n, i, o) {
                r(this, e),
                this._audioContext = t,
                this._gain = n,
                this._source = i,
                this._isPlaying = !1,
                this._uri = o
            }
            return i(e, [{
                key: "play",
                value: function(e) {
                    var t = e.fadeIn
                      , n = void 0 === t ? 0 : t;
                    0 === n ? this._source.start(0) : (this._gain.gain.setValueAtTime(0, this._audioContext.currentTime),
                    this._gain.gain.linearRampToValueAtTime(1, this._audioContext.currentTime + n / 1e3),
                    this._source.start(this._audioContext.currentTime)),
                    this._isPlaying = !0
                }
            }, {
                key: "stop",
                value: function(e) {
                    var t = e.fadeOut
                      , n = void 0 === t ? 0 : t;
                    this._isPlaying && (0 === n ? this._source.stop(this._audioContext.currentTime) : (this._gain.gain.setValueAtTime(this._gain.gain.value, this._audioContext.currentTime),
                    this._gain.gain.linearRampToValueAtTime(0, this._audioContext.currentTime + n / 1e3),
                    this._source.stop(this._audioContext.currentTime + n / 1e3)))
                }
            }, {
                key: "disconnect",
                value: function() {
                    this._gain.disconnect(),
                    this._source.disconnect(),
                    this._isPlaying = !1
                }
            }, {
                key: "isPlaying",
                value: function() {
                    return this._isPlaying
                }
            }]),
            e
        }()
          , v = function() {
            function e(t, n, i, o, a) {
                r(this, e),
                this._uri = t,
                this._audioBuffer = n,
                this._audioContext = i,
                this._parentNode = o,
                this._loop = a,
                this._instances = [],
                this._subscriptions = new l
            }
            return i(e, [{
                key: "getUri",
                value: function() {
                    return this._uri
                }
            }, {
                key: "play",
                value: function() {
                    var e = this
                      , t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    if (this._loop && this._instances.length > 0)
                        return this;
                    var n = this._audioContext.createGain()
                      , i = this._audioContext.createBufferSource();
                    i.buffer = this._audioBuffer,
                    i.loop = this._loop,
                    n.connect(this._parentNode),
                    i.connect(n);
                    var r = new m(this._audioContext,n,i,this._uri);
                    return this._instances = this._instances.concat([r]),
                    i.addEventListener("ended", function(t) {
                        r.disconnect(),
                        e._instances = e._instances.filter(function(e) {
                            return e !== r
                        }),
                        e._dispatchEvent("stopped")
                    }),
                    r.play(t),
                    this._dispatchEvent("started"),
                    this
                }
            }, {
                key: "stop",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    this._instances.forEach(function(t) {
                        t.stop(e)
                    })
                }
            }, {
                key: "fadeTo",
                value: function(e, t) {
                    var n = this;
                    this._instances.forEach(function(i) {
                        i.isPlaying() && (i._gain.gain.setValueAtTime(i._gain.gain.value, n._audioContext.currentTime),
                        i._gain.gain.linearRampToValueAtTime(e, n._audioContext.currentTime + t / 1e3))
                    })
                }
            }, {
                key: "addEventListener",
                value: function(e, t) {
                    this._subscriptions.has(e) || this._subscriptions.set(e, []);
                    var n = this._subscriptions.get(e);
                    this._subscriptions.set(e, n.concat([t]))
                }
            }, {
                key: "removeEventListener",
                value: function(e, t) {
                    if (this._subscriptions.has(e)) {
                        this._subscriptions.get(e);
                        this._subscriptions.set(e, currentSubscription.filter(function(e) {
                            return e !== t
                        }))
                    }
                }
            }, {
                key: "getNumberOfInstances",
                value: function() {
                    return this._instances.length
                }
            }, {
                key: "_dispatchEvent",
                value: function(e) {
                    var t = this
                      , n = arguments.length <= 1 || void 0 === arguments[1] ? {} : arguments[1];
                    if (this._subscriptions.has(e)) {
                        var i = this._subscriptions.get(e);
                        i.forEach(function(i) {
                            return i({
                                type: e,
                                data: n,
                                target: t
                            })
                        })
                    }
                }
            }]),
            e
        }()
          , g = function() {
            function e(t) {
                var n = arguments.length <= 1 || void 0 === arguments[1] ? !0 : arguments[1]
                  , i = arguments.length <= 2 || void 0 === arguments[2] ? 0 : arguments[2];
                r(this, e),
                this._name = t,
                this._allowSimultaneous = n,
                this._fadeOut = i,
                this._sounds = new l
            }
            return i(e, [{
                key: "getName",
                value: function() {
                    return this._name
                }
            }, {
                key: "getAllowSimultaneous",
                value: function() {
                    return this._allowSimultaneous
                }
            }, {
                key: "setAllowSimultaneous",
                value: function(e) {
                    return this._allowSimultaneous = e,
                    this
                }
            }, {
                key: "getFadeOut",
                value: function() {
                    return this._fadeOut
                }
            }, {
                key: "setFadeOut",
                value: function(e) {
                    return this._fadeOut = e,
                    this
                }
            }, {
                key: "add",
                value: function(e) {
                    var t = this
                      , n = e.getUri();
                    if (this._sounds.has(n))
                        throw new d("A sound with the URI " + n + " already exist");
                    e.addEventListener("started", function() {
                        t._allowSimultaneous || t._sounds.forEach(function(n, i) {
                            n.getUri() !== e.getUri() && n.stop({
                                fadeOut: t._fadeOut
                            })
                        })
                    }),
                    this._sounds.set(n, e)
                }
            }, {
                key: "stop",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    this._sounds.forEach(function(t, n) {
                        return t.stop(e)
                    })
                }
            }, {
                key: "findSound",
                value: function(e) {
                    if (!this._sounds.has(e))
                        throw new f("A sound with the URI " + e + " does not exist in group " + this._name);
                    return this._sounds.get(e)
                }
            }]),
            e
        }()
          , y = "DEFAULT_GROUP"
          , b = function() {
            function e(t, n) {
                r(this, e),
                this._resourceService = t,
                this._audioContext = n,
                this._masterGain = this._audioContext.createGain(),
                this._masterGain.connect(this._audioContext.destination),
                this._groups = new l([[y, new g(y)]]),
                this._volume = 1
            }
            return i(e, [{
                key: "getMasterVolume",
                value: function() {
                    return this._masterGain.gain.value
                }
            }, {
                key: "setMasterVolume",
                value: function(e) {
                    this._volume = e,
                    this._masterGain.gain.value = e
                }
            }, {
                key: "load",
                value: function(e, t) {
                    var n = this
                      , i = arguments.length <= 2 || void 0 === arguments[2] ? y : arguments[2]
                      , r = arguments.length <= 3 || void 0 === arguments[3] ? {} : arguments[3]
                      , o = r.loop
                      , a = void 0 === o ? !1 : o
                      , l = function(e, t) {
                        return new s(function(n, i) {
                            return e.decodeAudioData(t, n, i)
                        }
                        )
                    };
                    return this._resourceService.load(e, t).then(function(e) {
                        return l(n._audioContext, e.getBuffer())
                    }).then(function(t) {
                        n._groups.has(i) || n._groups.set(i, new g(i));
                        var r = new v(e,t,n._audioContext,n._masterGain,a);
                        return n._groups.get(i).add(r),
                        r
                    })
                }
            }, {
                key: "findGroup",
                value: function(e) {
                    if (!this._groups.has(e))
                        throw new p("A sound group named " + e + " does not exist");
                    return this._groups.get(e)
                }
            }], [{
                key: "installWebkitShim",
                value: function() {
                    window.AudioContext = window.webkitAudioContext
                }
            }, {
                key: "formatSupported",
                value: function(e) {
                    var t = {
                        mp3: "audio/mpeg",
                        ogg: "audio/ogg"
                    }
                      , n = t[e];
                    if (!n)
                        return !1;
                    var i = document.createElement("audio");
                    return !!i.canPlayType && "no" !== i.canPlayType(n) && "" !== i.canPlayType(n)
                }
            }, {
                key: "supported",
                get: function() {
                    return "AudioContext"in window && window.AudioContext
                }
            }]),
            e
        }();
        t["default"] = b
    }
    ).call(t, n(158))
}
, function(e, t) {
    (function() {
        !function() {
            "use strict";
            function e(e) {
                if ("string" != typeof e && (e = e.toString()),
                /[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))
                    throw new TypeError("Invalid character in header field name");
                return e.toLowerCase()
            }
            function t(e) {
                return "string" != typeof e && (e = e.toString()),
                e
            }
            function n(e) {
                this.map = {},
                e instanceof n ? e.forEach(function(e, t) {
                    this.append(t, e)
                }, this) : e && Object.getOwnPropertyNames(e).forEach(function(t) {
                    this.append(t, e[t])
                }, this)
            }
            function i(e) {
                return e.bodyUsed ? Promise.reject(new TypeError("Already read")) : void (e.bodyUsed = !0)
            }
            function r(e) {
                return new Promise(function(t, n) {
                    e.onload = function() {
                        t(e.result)
                    }
                    ,
                    e.onerror = function() {
                        n(e.error)
                    }
                }
                )
            }
            function o(e) {
                var t = new FileReader;
                return t.readAsArrayBuffer(e),
                r(t)
            }
            function a(e) {
                var t = new FileReader;
                return t.readAsText(e),
                r(t)
            }
            function s() {
                return this.bodyUsed = !1,
                this._initBody = function(e) {
                    if (this._bodyInit = e,
                    "string" == typeof e)
                        this._bodyText = e;
                    else if (f.blob && Blob.prototype.isPrototypeOf(e))
                        this._bodyBlob = e;
                    else if (f.formData && FormData.prototype.isPrototypeOf(e))
                        this._bodyFormData = e;
                    else {
                        if (e)
                            throw new Error("unsupported BodyInit type");
                        this._bodyText = ""
                    }
                }
                ,
                f.blob ? (this.blob = function() {
                    var e = i(this);
                    if (e)
                        return e;
                    if (this._bodyBlob)
                        return Promise.resolve(this._bodyBlob);
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as blob");
                    return Promise.resolve(new Blob([this._bodyText]))
                }
                ,
                this.arrayBuffer = function() {
                    return this.blob().then(o)
                }
                ,
                this.text = function() {
                    var e = i(this);
                    if (e)
                        return e;
                    if (this._bodyBlob)
                        return a(this._bodyBlob);
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as text");
                    return Promise.resolve(this._bodyText)
                }
                ) : this.text = function() {
                    var e = i(this);
                    return e ? e : Promise.resolve(this._bodyText)
                }
                ,
                f.formData && (this.formData = function() {
                    return this.text().then(u)
                }
                ),
                this.json = function() {
                    return this.text().then(JSON.parse)
                }
                ,
                this
            }
            function l(e) {
                var t = e.toUpperCase();
                return p.indexOf(t) > -1 ? t : e
            }
            function c(e, t) {
                if (t = t || {},
                this.url = e,
                this.credentials = t.credentials || "omit",
                this.headers = new n(t.headers),
                this.method = l(t.method || "GET"),
                this.mode = t.mode || null,
                this.referrer = null,
                ("GET" === this.method || "HEAD" === this.method) && t.body)
                    throw new TypeError("Body not allowed for GET or HEAD requests");
                this._initBody(t.body)
            }
            function u(e) {
                var t = new FormData;
                return e.trim().split("&").forEach(function(e) {
                    if (e) {
                        var n = e.split("=")
                          , i = n.shift().replace(/\+/g, " ")
                          , r = n.join("=").replace(/\+/g, " ");
                        t.append(decodeURIComponent(i), decodeURIComponent(r))
                    }
                }),
                t
            }
            function h(e) {
                var t = new n
                  , i = e.getAllResponseHeaders().trim().split("\n");
                return i.forEach(function(e) {
                    var n = e.trim().split(":")
                      , i = n.shift().trim()
                      , r = n.join(":").trim();
                    t.append(i, r)
                }),
                t
            }
            function d(e, t) {
                t || (t = {}),
                this._initBody(e),
                this.type = "default",
                this.url = null,
                this.status = t.status,
                this.ok = this.status >= 200 && this.status < 300,
                this.statusText = t.statusText,
                this.headers = t.headers instanceof n ? t.headers : new n(t.headers),
                this.url = t.url || ""
            }
            if (!self.fetch) {
                n.prototype.append = function(n, i) {
                    n = e(n),
                    i = t(i);
                    var r = this.map[n];
                    r || (r = [],
                    this.map[n] = r),
                    r.push(i)
                }
                ,
                n.prototype["delete"] = function(t) {
                    delete this.map[e(t)]
                }
                ,
                n.prototype.get = function(t) {
                    var n = this.map[e(t)];
                    return n ? n[0] : null
                }
                ,
                n.prototype.getAll = function(t) {
                    return this.map[e(t)] || []
                }
                ,
                n.prototype.has = function(t) {
                    return this.map.hasOwnProperty(e(t))
                }
                ,
                n.prototype.set = function(n, i) {
                    this.map[e(n)] = [t(i)]
                }
                ,
                n.prototype.forEach = function(e, t) {
                    Object.getOwnPropertyNames(this.map).forEach(function(n) {
                        this.map[n].forEach(function(i) {
                            e.call(t, i, n, this)
                        }, this)
                    }, this)
                }
                ;
                var f = {
                    blob: "FileReader"in self && "Blob"in self && function() {
                        try {
                            return new Blob,
                            !0
                        } catch (e) {
                            return !1
                        }
                    }(),
                    formData: "FormData"in self
                }
                  , p = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
                s.call(c.prototype),
                s.call(d.prototype),
                self.Headers = n,
                self.Request = c,
                self.Response = d,
                self.fetch = function(e, t) {
                    var n;
                    return n = c.prototype.isPrototypeOf(e) && !t ? e : new c(e,t),
                    new Promise(function(e, t) {
                        function i() {
                            return "responseURL"in r ? r.responseURL : /^X-Request-URL:/m.test(r.getAllResponseHeaders()) ? r.getResponseHeader("X-Request-URL") : void 0
                        }
                        var r = new XMLHttpRequest;
                        r.onload = function() {
                            var n = 1223 === r.status ? 204 : r.status;
                            if (100 > n || n > 599)
                                return void t(new TypeError("Network request failed"));
                            var o = {
                                status: n,
                                statusText: r.statusText,
                                headers: h(r),
                                url: i()
                            }
                              , a = "response"in r ? r.response : r.responseText;
                            e(new d(a,o))
                        }
                        ,
                        r.onerror = function() {
                            t(new TypeError("Network request failed"))
                        }
                        ,
                        r.open(n.method, n.url, !0),
                        "include" === n.credentials && (r.withCredentials = !0),
                        "responseType"in r && f.blob && (r.responseType = "blob"),
                        n.headers.forEach(function(e, t) {
                            r.setRequestHeader(t, e)
                        }),
                        r.send("undefined" == typeof n._bodyInit ? null : n._bodyInit)
                    }
                    )
                }
                ,
                self.fetch.polyfill = !0
            }
        }(),
        e.exports = window.fetch
    }
    ).call(window)
}
, function(e, t, n) {
    e.exports = {
        "default": n(160),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(21),
    n(22),
    n(46),
    n(161),
    n(164),
    e.exports = n(30).Map
}
, [477, 162, 163], [478, 35, 34, 71, 31, 57, 25, 58, 26, 49, 45, 39, 55, 72, 37], function(e, t, n) {
    "use strict";
    var i = n(35)
      , r = n(29)
      , o = n(28)
      , a = n(38)
      , s = n(34)
      , l = n(71)
      , c = n(58)
      , u = n(57)
      , h = n(55)
      , d = n(42)
      , f = n(37);
    e.exports = function(e, t, n, p, m, v) {
        var g = r[e]
          , y = g
          , b = m ? "set" : "add"
          , x = y && y.prototype
          , w = {};
        return f && "function" == typeof y && (v || x.forEach && !a(function() {
            (new y).entries().next()
        })) ? (y = t(function(t, n) {
            u(t, y, e),
            t._c = new g,
            void 0 != n && c(n, m, t[b], t)
        }),
        i.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","), function(e) {
            var t = "add" == e || "set" == e;
            e in x && (!v || "clear" != e) && s(y.prototype, e, function(n, i) {
                if (!t && v && !h(n))
                    return "get" == e ? void 0 : !1;
                var r = this._c[e](0 === n ? 0 : n, i);
                return t ? this : r
            })
        }),
        "size"in x && i.setDesc(y.prototype, "size", {
            get: function() {
                return this._c.size
            }
        })) : (y = p.getConstructor(t, e, m, b),
        l(y.prototype, n)),
        d(y, e),
        w[e] = y,
        o(o.G + o.W + o.F, w),
        v || p.setStrong(y, e, m),
        y
    }
}
, [479, 28, 165], [480, 58, 54], function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(19)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = function() {
        function e() {
            r(this, e)
        }
        return i(e, [{
            key: "getUri",
            value: function() {
                return "" + Date.now()
            }
        }, {
            key: "play",
            value: function() {
                return this
            }
        }, {
            key: "stop",
            value: function() {}
        }, {
            key: "fadeTo",
            value: function() {}
        }, {
            key: "addEventListener",
            value: function() {}
        }, {
            key: "removeEventListener",
            value: function() {}
        }, {
            key: "getNumberOfInstances",
            value: function() {
                return 0
            }
        }]),
        e
    }()
      , s = function() {
        function e() {
            r(this, e)
        }
        return i(e, [{
            key: "getName",
            value: function() {
                return "" + Date.now()
            }
        }, {
            key: "getAllowSimultaneous",
            value: function() {
                return !1
            }
        }, {
            key: "setAllowSimultaneous",
            value: function() {
                return this
            }
        }, {
            key: "getFadeOut",
            value: function() {
                return 0
            }
        }, {
            key: "setFadeOut",
            value: function() {
                return this
            }
        }, {
            key: "add",
            value: function() {}
        }, {
            key: "stop",
            value: function() {}
        }, {
            key: "findSound",
            value: function(e) {
                return new a
            }
        }]),
        e
    }()
      , l = function() {
        function e() {
            r(this, e)
        }
        return i(e, [{
            key: "getMasterVolume",
            value: function() {
                return 1
            }
        }, {
            key: "setMasterVolume",
            value: function(e) {}
        }, {
            key: "load",
            value: function() {
                return o.resolve(new a)
            }
        }, {
            key: "findGroup",
            value: function() {
                return new s
            }
        }], [{
            key: "installWebkitShim",
            value: function() {}
        }, {
            key: "formatSupported",
            value: function() {
                return !1
            }
        }, {
            key: "supported",
            get: function() {
                return !0
            }
        }]),
        e
    }();
    t["default"] = l,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = n(168)
      , h = s(u)
      , d = n(171)
      , f = s(d)
      , p = n(173)
      , m = s(p)
      , v = n(143)
      , g = s(v)
      , y = n(174)
      , b = s(y)
      , x = n(176)
      , w = s(x)
      , _ = {
        search: "search",
        bookmarks: "bookmarks",
        routes: "routes",
        display: "display"
    }
      , S = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.on("start", this.onStart),
            this.listenTo(this.get("bookmarks").fullCollection, "update", this.filterBookmarks),
            this.listenTo(this.get("bookmarkFilters"), "change", this.filterBookmarks),
            this.listenTo(this.get("searchFilters"), "change", this.searchObjects),
            this.listenTo(this.get("routingFilters"), "search", this.searchRoutes)
        }
        return r(t, e),
        o(t, [{
            key: "onStart",
            value: function() {
                var e = this;
                this.get("bookmarks").loadAll().then(function() {
                    return e.filterBookmarks()
                })
            }
        }, {
            key: "filterBookmarks",
            value: function() {
                var e = this.get("bookmarkFilters").get("types").where({
                    selected: !0
                })
                  , t = (this.get("bookmarkFilters").get("query") || "").toLowerCase()
                  , n = this.get("bookmarks");
                n.reset(n.fullCollection.filter(function(n) {
                    return (!t || n.get("name").toLowerCase().indexOf(t) > -1) && e.indexOf(n.get("type")) > -1
                }))
            }
        }, {
            key: "searchObjects",
            value: function() {
                var e = this.get("searchFilters")
                  , t = this.get("searchResults");
                return e.hasQuery ? t.fetch({
                    data: e.toJSON()
                }) : (t.reset(),
                !1)
            }
        }, {
            key: "searchRoutes",
            value: function() {
                var e = this.get("routingFilters")
                  , t = this.get("routingResults");
                return e.hasQuery ? t.fetch({
                    data: e.toJSON()
                }) : (t.reset(),
                !1)
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    tab: _.display,
                    fullscreen: !1,
                    bookmarkFilters: new h["default"],
                    bookmarks: f["default"].createWithFull(),
                    searchFilters: new m["default"],
                    searchResults: new g["default"],
                    routingFilters: new b["default"],
                    routingResults: new w["default"]
                }
            }
        }], [{
            key: "TABS",
            get: function() {
                return _
            }
        }]),
        t
    }(c["default"]);
    t["default"] = S,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = n(169)
      , h = s(u)
      , d = function(e) {
        function t() {
            a(this, t);
            for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                n[r] = arguments[r];
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, n),
            this.listenTo(this.get("types"), "change", this.onTypeChange)
        }
        return r(t, e),
        o(t, [{
            key: "onTypeChange",
            value: function() {
                this.trigger("change")
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    types: h["default"].getWhere({
                        avoid: !1,
                        custom: !1
                    }),
                    query: ""
                }
            }
        }, {
            key: "hasQuery",
            get: function() {
                return !!this.get("query")
            }
        }, {
            key: "allTypesSelected",
            get: function() {
                return this.get("types").where({
                    selected: !0
                }).length === this.get("types").length
            }
        }, {
            key: "isFilled",
            get: function() {
                return this.hasQuery || !this.allTypesSelected
            }
        }]),
        t
    }(c["default"]);
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(136)
      , u = l(c)
      , h = n(170)
      , d = l(h)
      , f = n(142)
      , p = l(f)
      , m = n(76)
      , v = l(m)
      , g = s("cache")
      , y = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "idAttribute",
            get: function() {
                return "key"
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    key: null,
                    name: null,
                    custom: null,
                    avoid: null,
                    bodyType: null,
                    selected: !0
                }
            }
        }], [{
            key: "getWhere",
            value: function(e) {
                var n = t.all;
                return e ? new d["default"](n.where(e)) : n.clone()
            }
        }, {
            key: "getForObject",
            value: function(e) {
                var n = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1];
                return t.all.findWhere({
                    bodyType: e.get("type"),
                    avoid: n
                })
            }
        }, {
            key: "all",
            get: function() {
                return this[g] = this[g] || new d["default"](v["default"].chain(t.RAW_TYPES).pairs().map(function(e) {
                    return {
                        key: e[0],
                        name: (p["default"].TYPE_INFO[e[1]] || {}).name || e[1],
                        custom: e[0] === t.CUSTOM_TYPE,
                        avoid: 0 === e[0].indexOf("A"),
                        bodyType: e[1]
                    }
                }).value())
            }
        }, {
            key: "RAW_TYPES",
            get: function() {
                return {
                    BS: "STAR_SYSTEM",
                    BO: "BODY",
                    BC: "Custom",
                    AS: "STAR_SYSTEM",
                    AO: "BODY"
                }
            }
        }, {
            key: "CUSTOM_TYPE",
            get: function() {
                return "BC"
            }
        }]),
        t
    }(u["default"]);
    t["default"] = y,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(169)
      , u = s(c)
      , h = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "model",
            get: function() {
                return u["default"]
            }
        }]),
        t
    }(l.Collection);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(144)
      , u = l(c)
      , h = n(172)
      , d = l(h)
      , f = n(169)
      , p = l(f)
      , m = n(116)
      , v = (l(m),
    s("fullCollection"))
      , g = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "findByObject",
            value: function(e) {
                var t = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1];
                if (!e)
                    return null;
                var n = this.fullCollection.find(function(n) {
                    return (n.get("celestialObject") === e || n.get("code") === e.get("code")) && n.get("type").get("avoid") === t
                });
                return n && n.set("celestialObject", e),
                n
            }
        }, {
            key: "toggle",
            value: function(e) {
                var t = arguments.length <= 1 || void 0 === arguments[1] ? !1 : arguments[1]
                  , n = this.findByObject(e, t);
                return n ? n.destroy({
                    wait: !0
                }) : this.fullCollection.create({
                    celestialObject: e,
                    type: p["default"].getForObject(e, t),
                    code: e.get("code"),
                    name: e.get("name"),
                    parentCode: e.get("system") ? e.get("system").get("code") : null
                }, {
                    wait: !0
                })
            }
        }, {
            key: "loadAll",
            value: function() {
                return this.fullCollection.fetch()
            }
        }, {
            key: "model",
            get: function() {
                return d["default"]
            }
        }, {
            key: "url",
            get: function() {
                return "/api/starmap/bookmarks/find"
            }
        }, {
            key: "fullCollection",
            get: function() {
                return this[v]
            },
            set: function(e) {
                this[v] = e
            }
        }], [{
            key: "createWithFull",
            value: function() {
                var e = new t;
                return e.fullCollection = new t,
                e
            }
        }]),
        t
    }(u["default"]);
    t["default"] = g,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(145)
      , c = s(l)
      , u = n(169)
      , h = s(u)
      , d = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "isNew",
            value: function() {
                return !1
            }
        }, {
            key: "getUrl",
            value: function(e, t) {
                var n = this.get("type").get("avoid") ? "Avoid" : "Bookmark";
                return "/api/starmap/bookmarks/" + this.get("code") + "/toggle" + n
            }
        }, {
            key: "parse",
            value: function(e) {
                var n = i(Object.getPrototypeOf(t.prototype), "parse", this).call(this, e);
                return n ? (n.code = n.object_code || n.system_code || void 0,
                n.object_code && (n.parentCode = n.system_code),
                delete n.object_code,
                delete n.system_code,
                n.type = h["default"].all.get(n.type),
                n) : n
            }
        }, {
            key: "toServerObject",
            value: function() {
                return {}
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    id: void 0,
                    type: void 0,
                    name: void 0,
                    code: void 0,
                    parentCode: void 0,
                    celestialObject: null
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "defaults",
            get: function() {
                return {
                    query: ""
                }
            }
        }, {
            key: "hasQuery",
            get: function() {
                return !!this.get("query")
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = n(175)
      , h = s(u)
      , d = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "search",
            value: function() {
                this.trigger("search")
            }
        }, {
            key: "toJSON",
            value: function() {
                return {
                    departure: this.get("departure").getCode(),
                    destination: this.get("destination").getCode(),
                    ship_size: this.get("shipSize")
                }
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    departure: new h["default"],
                    destination: new h["default"],
                    shipSize: void 0
                }
            }
        }, {
            key: "hasQuery",
            get: function() {
                return this.get("departure").hasSelection && this.get("destination").hasSelection && !!t.SHIP_SIZES[this.get("shipSize")]
            }
        }], [{
            key: "SHIP_SIZES",
            get: function() {
                return {
                    S: "Small",
                    M: "Medium",
                    L: "Large"
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = n(143)
      , h = s(u)
      , d = function(e) {
        function t() {
            a(this, t);
            for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                n[r] = arguments[r];
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, n),
            this.on("change:query", this.onChangeQuery)
        }
        return r(t, e),
        o(t, [{
            key: "onChangeQuery",
            value: function() {
                this.set("object", null),
                this.get("results").fetch({
                    data: {
                        query: this.get("query")
                    }
                })
            }
        }, {
            key: "getCode",
            value: function() {
                return this.get("object") && this.get("object").get("code")
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    query: "",
                    object: null,
                    results: new h["default"]
                }
            }
        }, {
            key: "hasSelection",
            get: function() {
                return !!this.get("object")
            }
        }]),
        t
    }(c["default"]);
    t["default"] = d,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(144)
      , c = s(l)
      , u = n(177)
      , h = s(u)
      , d = n(76)
      , f = s(d)
      , p = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "parse",
            value: function(e) {
                if (!e || !e.success || !e.data || !e.data.shortest && !e.data.leastjumps)
                    return [];
                var t = e.data
                  , n = (t.shortest,
                t.leastjumps,
                f["default"].chain(t).values().compact().map(function(e) {
                    return e.currentSegment = 0,
                    e.segmentCount = e.segments.length,
                    e
                }).value());
                return n
            }
        }, {
            key: "model",
            get: function() {
                return h["default"]
            }
        }, {
            key: "url",
            get: function() {
                return "/api/starmap/routes/find"
            }
        }]),
        t
    }(c["default"]);
    t["default"] = p,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "goToSegment",
            value: function(e) {
                var t = this.flightSegments;
                if (!t || !t.length)
                    return !1;
                var n = t[e];
                return n && this.set("selectedSegment", n),
                !!n
            }
        }, {
            key: "changeSegment",
            value: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? !1 : arguments[0]
                  , t = this.flightSegments;
                if (!t || !t.length)
                    return !1;
                var n = e ? -1 : 1
                  , i = t.indexOf(this.get("selectedSegment")) + n;
                return this.goToSegment(i)
            }
        }, {
            key: "previousSegment",
            value: function() {
                return this.changeSegment(!0)
            }
        }, {
            key: "nextSegment",
            value: function() {
                return this.changeSegment(!1)
            }
        }, {
            key: "clearSelection",
            value: function() {
                this.set({
                    selected: !1,
                    selectedSegment: null
                })
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    name: null,
                    label: null,
                    first_jump: null,
                    flight_distance: null,
                    jumps: null,
                    segments: null,
                    flightSegments: null,
                    selectedSegment: null,
                    selected: !1
                }
            }
        }, {
            key: "flightSegments",
            get: function() {
                var e = this.get("flightSegments");
                if (!e) {
                    var n = this.get("segments") || [];
                    e = n.filter(function(e) {
                        return e.segment_type === t.SEGMENT_TYPES.FLIGHT && e.segment_distance
                    }),
                    this.set("flightSegments", e)
                }
                return e
            }
        }], [{
            key: "SEGMENT_TYPES",
            get: function() {
                return {
                    JUMP: "J",
                    FLIGHT: "F"
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(179)
      , u = s(c)
      , h = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "model",
            get: function() {
                return u["default"]
            }
        }]),
        t
    }(l.Collection);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "defaults",
            get: function() {
                return {
                    id: null,
                    name: "Unknown",
                    code: "UNKNOWN",
                    color: "#FFFFFF",
                    selected: !0
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(181)
      , u = s(c)
      , h = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "model",
            get: function() {
                return u["default"]
            }
        }]),
        t
    }(l.Collection);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "idAttribute",
            get: function() {
                return "size"
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    size: void 0,
                    selected: !1
                }
            }
        }], [{
            key: "SIZES",
            get: function() {
                return {
                    SMALL: "small",
                    MEDIUM: "medium",
                    LARGE: "large"
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(183)
      , u = s(c)
      , h = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "model",
            get: function() {
                return u["default"]
            }
        }]),
        t
    }(l.Collection);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "idAttribute",
            get: function() {
                return "type"
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    type: void 0,
                    selected: !1
                }
            }
        }], [{
            key: "TYPES",
            get: function() {
                return {
                    LIFEFORMS: "lifeforms",
                    ECONOMY: "economy",
                    CRIME: "crime"
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(75)
      , c = n(185)
      , u = s(c)
      , h = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "model",
            get: function() {
                return u["default"]
            }
        }]),
        t
    }(l.Collection);
    t["default"] = h,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "defaults",
            get: function() {
                return {
                    code: "Unknown"
                }
            }
        }]),
        t
    }(c["default"]);
    t["default"] = u,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(136)
      , c = s(l)
      , u = n(76)
      , h = s(u)
      , d = {
        pitch: 2,
        theta: 2,
        radius: 4,
        panX: 7,
        panY: 7
    }
      , f = ["pitch", "theta", "radius", "panX", "panY"]
      , p = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "toURLParams",
            value: function() {
                var e = this
                  , t = f.map(function(t) {
                    var n = Math.pow(10, d[t]);
                    return Math.round(e.get(t) * n) / n
                });
                return 0 === h["default"].compact(t).length ? "" : t.join(",")
            }
        }, {
            key: "defaults",
            get: function() {
                return {
                    pitch: 0,
                    theta: 0,
                    radius: 0,
                    panX: 0,
                    panY: 0
                }
            }
        }], [{
            key: "parseURLParams",
            value: function(e) {
                var t = e.split(",")
                  , n = h["default"].object(h["default"].compact(f.map(function(e, n) {
                    var i = parseFloat(t[n]);
                    return h["default"].isNaN(i) ? null : [e, i]
                })));
                return n
            }
        }]),
        t
    }(c["default"]);
    t["default"] = p,
    e.exports = t["default"]
}
, function(e, t) {
    /*!
	 * cookie
	 * Copyright(c) 2012-2014 Roman Shtylman
	 * Copyright(c) 2015 Douglas Christopher Wilson
	 * MIT Licensed
	 */
    "use strict";
    function n(e, t) {
        if ("string" != typeof e)
            throw new TypeError("argument str must be a string");
        for (var n = {}, i = t || {}, a = e.split(s), l = i.decode || o, c = 0; c < a.length; c++) {
            var u = a[c]
              , h = u.indexOf("=");
            if (!(0 > h)) {
                var d = u.substr(0, h).trim()
                  , f = u.substr(++h, u.length).trim();
                '"' == f[0] && (f = f.slice(1, -1)),
                void 0 == n[d] && (n[d] = r(f, l))
            }
        }
        return n
    }
    function i(e, t, n) {
        var i = n || {}
          , r = i.encode || a;
        if (!l.test(e))
            throw new TypeError("argument name is invalid");
        var o = r(t);
        if (o && !l.test(o))
            throw new TypeError("argument val is invalid");
        var s = e + "=" + o;
        if (null != i.maxAge) {
            var c = i.maxAge - 0;
            if (isNaN(c))
                throw new Error("maxAge should be a Number");
            s += "; Max-Age=" + Math.floor(c)
        }
        if (i.domain) {
            if (!l.test(i.domain))
                throw new TypeError("option domain is invalid");
            s += "; Domain=" + i.domain
        }
        if (i.path) {
            if (!l.test(i.path))
                throw new TypeError("option path is invalid");
            s += "; Path=" + i.path
        }
        return i.expires && (s += "; Expires=" + i.expires.toUTCString()),
        i.httpOnly && (s += "; HttpOnly"),
        i.secure && (s += "; Secure"),
        i.firstPartyOnly && (s += "; First-Party-Only"),
        s
    }
    function r(e, t) {
        try {
            return t(e)
        } catch (n) {
            return e
        }
    }
    t.parse = n,
    t.serialize = i;
    var o = decodeURIComponent
      , a = encodeURIComponent
      , s = /; */
      , l = /^[\u0009\u0020-\u007e\u0080-\u00ff]+$/
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(19)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(75)
      , d = n(105)
      , f = c(d)
      , p = n(189)
      , m = n(76)
      , v = c(m)
      , g = n(113)
      , y = c(g)
      , b = n(116)
      , x = c(b)
      , w = n(194)
      , _ = c(w)
      , S = n(393)
      , M = c(S)
      , C = n(142)
      , T = c(C)
      , E = n(396)
      , k = c(E)
      , A = {
        SINGLE_STAR: "Single star",
        BINARY: "Binary"
    }
      , P = {
        B: "Bidirectional",
        U: "Unidirectional"
    }
      , L = {
        S: "Small",
        M: "Medium",
        L: "Large"
    }
      , O = s("events")
      , R = s("modelEvents")
      , F = s("regions")
      , B = n(398)
      , D = 230
      , I = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this._disc = new _["default"](this.model.get("resourcePath")),
            this._locationMarker = new M["default"],
            this._locationMarker.title = "Control Disc",
            this._locationMarker.position = {
                x: 200,
                y: 400
            },
            window._lc = this._locationMarker,
            this._trackingDisc = !1,
            this._trackingMarker = !1,
            this._hoveredObject = null,
            this.layout = e.layout,
            this._disc.addEventListener("select", this._onDiscSelect.bind(this)),
            this._disc.addEventListener("show", this._onDiscShow.bind(this)),
            this._disc.addEventListener("shown", this._onDiscShown.bind(this)),
            this._disc.addEventListener("hide", this._onDiscHide.bind(this)),
            this._disc.addEventListener("hidden", this._onDiscHidden.bind(this)),
            this.model.api.addEventListener("select:starsystem", this._onSelectStarSystem.bind(this)),
            this.model.api.addEventListener("select:celestialobject", this._onSelectCelestialObject.bind(this)),
            this.model.api.addEventListener("select:jumppoint", this._onSelectJumpPoint.bind(this)),
            this.model.api.addEventListener("select:none", this._onSelectNone.bind(this)),
            this._longRangeScanner = this.model.api.longRangeScanner;
            var n = this._hoverObjectIn.bind(this)
              , r = this._hoverObjectOut.bind(this);
            this.model.api.addEventListener("mouseenter:starsystem", n),
            this.model.api.addEventListener("mouseleave:starsystem", r),
            this.model.api.addEventListener("mouseenter:celestialobject", n),
            this.model.api.addEventListener("mouseleave:celestialobject", r),
            this.model.api.addEventListener("mouseenter:jumppoint", n),
            this.model.api.addEventListener("mouseleave:jumppoint", r),
            this._locationMarker.addEventListener("marker:click", this._onMarkerClick.bind(this), !1),
            this._locationMarker.addEventListener("marker:mouseenter", this._onMarkerMouseEnter.bind(this), !1),
            this._locationMarker.addEventListener("marker:mouseleave", this._onMarkerMouseLeave.bind(this), !1),
            this._jumpPointAnimation = l.resolve(),
            this._hoveringMarker = !1,
            this._hoverAnimationQueue = l.resolve(),
            this.model.on("change:location", this._onLocationChange.bind(this))
        }
        return r(t, e),
        o(t, [{
            key: "onInteraction",
            value: function(e) {
                this.layout.interactiveUI = "mousedown" !== e.type
            }
        }, {
            key: "onAttach",
            value: function() {
                this.$el.find("#sm-map-map-region").append(this.model.canvas),
                this.$el.find("#sm-map-disc-region").append(this._disc.element),
                this.$el.find("#sm-map-location-marker-region").append(this._locationMarker.element),
                this.$el.find("#sm-map-disc-region").on("mousedown click", function(e) {
                    e.stopPropagation()
                })
            }
        }, {
            key: "updateQueryString",
            value: function() {
                var e = f["default"].getFragment({
                    options: {
                        removeQueryString: !0
                    }
                })
                  , t = this.model.toURLParams();
                t && (t = "?" + t),
                h.history.navigate(e + t, {
                    replace: !0
                })
            }
        }, {
            key: "_onDiscSelect",
            value: function(e) {
                if (e.detail.type === _["default"].Commands.INSPECT) {
                    var t = this.model.api.selectedLocation
                      , n = this.model.get("location");
                    t && (n.type !== x["default"].Types.JUMP_POINT ? this.model.goToLocation(t) : this.model.goThroughJumpPoint(t))
                } else if (e.detail.type === _["default"].Commands.BOOKMARK)
                    e.preventDefault(),
                    this._addRemoveBookmark();
                else if (e.detail.type === _["default"].Commands.INFORMATION)
                    if (e.preventDefault(),
                    this.info.currentView)
                        this._closeInfo();
                    else {
                        var i = 400
                          , r = 100;
                        this.info.show(new k["default"]({
                            model: this.model
                        })),
                        this._moveDiscToSuitablePosition(i + r)
                    }
                else
                    e.detail.type === _["default"].Commands.AVOID ? (e.preventDefault(),
                    this._addRemoveAvoidance()) : e.detail.type === _["default"].Commands.DEPARTURE ? this._addDeparture() : e.detail.type === _["default"].Commands.DESTINATION && this._addDestination();
                this.model.get("soundFX").discMenuSelection()
            }
        }, {
            key: "_addRemoveBookmark",
            value: function() {
                var e = this.model.get("interface").get("bookmarks")
                  , t = this.model.api.selectedLocation;
                if (t) {
                    var n = T["default"].fromLocation(this.model, t);
                    e.toggle(n),
                    this._disc.bookmarked = !this._disc.bookmarked
                }
            }
        }, {
            key: "_addRemoveAvoidance",
            value: function() {
                var e = this.model.get("interface").get("bookmarks")
                  , t = this.model.api.selectedLocation;
                if (t) {
                    var n = T["default"].fromLocation(this.model, t);
                    e.toggle(n, !0),
                    this._disc.avoided = !this._disc.avoided
                }
            }
        }, {
            key: "_addDeparture",
            value: function() {
                var e = this.model.api.selectedLocation;
                if (e) {
                    this.model.get("interface").set("tab", "routes");
                    var t = T["default"].fromLocation(this.model, e);
                    this.model.get("interface").get("routingFilters").get("departure").set("object", t)
                }
            }
        }, {
            key: "_addDestination",
            value: function() {
                var e = this.model.api.selectedLocation;
                if (e) {
                    this.model.get("interface").set("tab", "routes");
                    var t = T["default"].fromLocation(this.model, e);
                    this.model.get("interface").get("routingFilters").get("destination").set("object", t)
                }
            }
        }, {
            key: "_onDiscShow",
            value: function(e) {
                this.model.get("soundFX").openDisc();
                var t = this.model.get("interface").get("bookmarks")
                  , n = this.model.api.selectedLocation;
                if (n) {
                    var i = T["default"].fromLocation(this.model, n)
                      , r = t.findByObject(i);
                    this._disc.bookmarked = !!r;
                    var o = t.findByObject(i, !0);
                    this._disc.avoided = !!o
                }
                this.model.removeStickyHoverLocation(n),
                this._hoveredObject = null,
                this._trackingMarker = !1,
                this._locationMarker.hidden = !0,
                this._initialHoverCancelable && (this._initialHoverCancelable.cancel(),
                this._initialHoverCancelable = null),
                this._disc.inspectingJumpPoint = this.model.get("location").type === x["default"].Types.JUMP_POINT,
                this._disc.inspectingDisabled = this.model.get("location").type === x["default"].Types.CELESTIAL_OBJECT
            }
        }, {
            key: "_onDiscShown",
            value: function(e) {
                var t = this;
                this._trackingDisc = !0,
                function n() {
                    if (t._trackingDisc) {
                        var e = t.model.api.selectedLocation;
                        if (e) {
                            var i = t.model.getLocationCoordinates(e);
                            t._disc.position = i,
                            t._longRangeScanner.position = i
                        }
                        requestAnimationFrame(n)
                    }
                }(),
                this._moveDiscToSuitablePosition()
            }
        }, {
            key: "_moveDiscToSuitablePosition",
            value: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? 0 : arguments[0]
                  , t = this.model.api.selectedLocation
                  , n = this.$el.find(".disc-root.starmap-disc")
                  , i = this.$el.find("#sm-map-map-region")
                  , r = n[0].getBoundingClientRect()
                  , o = i[0].getBoundingClientRect()
                  , a = o.width - e;
                if (t) {
                    var s = 80
                      , l = 30
                      , c = 175
                      , u = this.model.getLocationCoordinates(t)
                      , h = !1
                      , d = u.x
                      , f = u.y;
                    r.left < 0 && (h = !0,
                    d = u.x + Math.abs(r.left) + l),
                    r.left + r.width > a && (h = !0,
                    d = u.x - Math.abs(r.left + r.width - a) - l),
                    r.top < 0 && (h = !0,
                    f = u.y + Math.abs(r.top) + s);
                    var p = o.height - c;
                    r.top + r.height > p && (h = !0,
                    f = u.y - Math.abs(r.top + r.height - p)),
                    h && this.model.moveSelectedElementAt(d, f)
                }
            }
        }, {
            key: "_onDiscHide",
            value: function(e) {
                this.model.get("soundFX").closeDisc(),
                this._longRangeScanner.hidden = !0,
                this._longRangeScanner.setValues({
                    lifeform: 0,
                    economy: 0,
                    danger: 0
                }),
                this.model.unselectLocation()
            }
        }, {
            key: "_onDiscHidden",
            value: function(e) {
                this._closeInfo()
            }
        }, {
            key: "_onSelectStarSystem",
            value: function(e) {
                if (!this._disc.hidden)
                    return e.preventDefault(),
                    this._disc.hidden = !0,
                    void (this._trackingDisc = !1);
                if (e.detail.mouseButton === y["default"].Mouse.LEFT_BUTTON)
                    e.preventDefault(),
                    this.model.goToLocation(e.detail.location);
                else {
                    this.model.selectLocation(e.detail.location);
                    var t = this.model.getLocationInfo(e.detail.location)
                      , n = t.name
                      , i = t.raw.type
                      , r = t.aggregated_population
                      , o = t.aggregated_economy
                      , a = t.aggregated_danger
                      , s = t.aggregated_size
                      , l = t.affiliation
                      , c = this.model.getLocationCoordinates(e.detail.location);
                    this._disc.position = c,
                    this._disc.setObjectTitle(n),
                    this._disc.setObjectType("starsystem"),
                    this._disc.setObjectInfo({
                        title: "Star System",
                        definitions: [{
                            name: "System Type",
                            value: A[i]
                        }, {
                            name: "Size",
                            value: Math.round(s) + " au"
                        }, {
                            name: "Affiliation",
                            value: l.length > 0 ? l[0].name : "Unknown"
                        }]
                    }),
                    this._disc.indicators = !0,
                    this._disc.hidden = !1,
                    this._longRangeScanner.size = {
                        width: D,
                        height: D
                    },
                    this._longRangeScanner.position = c,
                    this._longRangeScanner.hidden = !1,
                    this._longRangeScanner.setValues({
                        lifeform: r || 0,
                        economy: o || 0,
                        danger: a || 0
                    })
                }
            }
        }, {
            key: "_onSelectCelestialObject",
            value: function(e) {
                var t = this;
                return this._disc.hidden ? void (e.detail.mouseButton === y["default"].Mouse.LEFT_BUTTON ? (e.preventDefault(),
                this.model.goToLocation(e.detail.location)) : this.model.goToLocation(e.detail.location, {
                    size: 170
                }).then(function(n) {
                    t.model.selectLocation(e.detail.location);
                    var i = t.model.getLocationInfo(e.detail.location)
                      , r = i.name
                      , o = (i.age,
                    i.raw)
                      , a = o.type
                      , s = o.habitable
                      , l = i.subtype
                      , c = i.affiliation
                      , u = (i.size,
                    t.model.getLocationCoordinates(e.detail.location));
                    t._disc.position = u,
                    t._disc.setObjectTitle(r),
                    "STAR" === a ? (t._disc.setObjectType("star"),
                    t._disc.setObjectInfo({
                        title: "Star",
                        definitions: [{
                            name: "Type",
                            value: l ? l.name : "Unknown"
                        }]
                    })) : "PLANET" === a ? (t._disc.setObjectType("planet"),
                    t._disc.setObjectInfo({
                        title: "Planet",
                        definitions: [{
                            name: "Type",
                            value: l ? l.name : "Unknown"
                        }, {
                            name: "Habitable",
                            value: "1" === s ? "Yes" : "No"
                        }, {
                            name: "Affiliation",
                            value: c.length > 0 ? c[0].name : "Unknown"
                        }]
                    })) : "BLACKHOLE" === a ? (t._disc.setObjectType("celestialobject"),
                    t._disc.setObjectInfo({
                        title: "Black Hole",
                        definitions: [{
                            name: "Type",
                            value: l ? l.name : "Unknown"
                        }]
                    })) : (t._disc.setObjectType("celestialobject"),
                    t._disc.setObjectInfo({
                        title: "Celestial Object",
                        definitions: [{
                            name: "Type",
                            value: l ? l.name : "Unknown"
                        }]
                    })),
                    t._disc.indicators = !1,
                    t._disc.hidden = !1
                })) : (e.preventDefault(),
                this._disc.hidden = !0,
                this._trackingDisc = !1,
                void this.model.unselectLocation())
            }
        }, {
            key: "_onSelectJumpPoint",
            value: function(e) {
                var t = this;
                return this._disc.hidden ? void (e.detail.mouseButton === y["default"].Mouse.LEFT_BUTTON ? (e.preventDefault(),
                this.model.get("location").type === x["default"].Types.STAR_SYSTEM ? (this._jumpPointAnimation = this._jumpPointAnimation.then(function(n) {
                    return t.model.goToLocation(e.detail.location)
                }),
                setTimeout(function() {
                    t._jumpPointAnimation = l.resolve()
                }, 250)) : this.model.get("location").type === x["default"].Types.JUMP_POINT && (this._jumpPointAnimation = this._jumpPointAnimation.then(this.model.goThroughJumpPoint(e.detail.location)).then(function(e) {
                    return t._jumpPointAnimation = l.resolve()
                }))) : this.model.goToLocation(e.detail.location).then(function(n) {
                    t.model.selectLocation(e.detail.location);
                    var i = t.model.getJumpTunnelInfo(e.detail.location)
                      , r = i.raw
                      , o = r.direction
                      , a = r.size
                      , s = i.extra.destination
                      , l = t.model.getLocationCoordinates(e.detail.location);
                    t._disc.position = l,
                    t._disc.setObjectTitle(name),
                    t._disc.setObjectType("jumppoint"),
                    t._disc.setObjectInfo({
                        title: "Jump Gate",
                        definitions: [{
                            name: "Type",
                            value: P[o]
                        }, {
                            name: "Size",
                            value: L[a] ? L[a] : "Unknown"
                        }, {
                            name: "Destination System",
                            value: s.name
                        }]
                    }),
                    t._disc.indicators = !1,
                    t._disc.hidden = !1
                })) : (e.preventDefault(),
                this._disc.hidden = !0,
                this._trackingDisc = !1,
                void this.model.unselectLocation())
            }
        }, {
            key: "_hoverObjectIn",
            value: function(e) {
                var t = this
                  , n = e.detail.location
                  , i = this.model.get("location");
                this._disc.hidden && i.type !== x["default"].Types.CELESTIAL_OBJECT && i.type !== x["default"].Types.JUMP_POINT && (this._hoverOutCancelable && (this._hoverOutCancelable.cancel(),
                this._hoverOutCancelable = null,
                n.equals(this._hoveredObject) || (this._hoveredObject && this.model.removeStickyHoverLocation(this._hoveredObject),
                this._hoveredObject = null,
                this._trackingMarker = !1,
                this._locationMarker.hidden = !0,
                this.model.get("soundFX").hoverObjectOut(),
                this._hoverAnimationQueue = this._hoverAnimationQueue.then(function(e) {
                    return p.delay(200)
                }))),
                n.equals(this._hoveredObject) || (this._initialHoverCancelable = p.cancelableDelay(500),
                this._initialHoverCancelable.then(function(e) {
                    var i = e.canceled;
                    t._initialHoverCancelable = null,
                    i || (t._hoverAnimationQueue = t._hoverAnimationQueue.then(function(e) {
                        t._hoveredObject = n;
                        var i = t.model.getLocationCoordinates(n);
                        t._locationMarker.position = {
                            x: i.x.toFixed(2),
                            y: i.y.toFixed(2)
                        },
                        t._locationMarker.hidden = !1,
                        t.model.get("soundFX").hoverObjectIn(),
                        t._trackingMarker = !0,
                        t.model.addStickyHoverLocation(t._hoveredObject);
                        var r = t;
                        !function o() {
                            if (r._trackingMarker) {
                                var e = r.model.getLocationCoordinates(n);
                                r._locationMarker.position = e,
                                requestAnimationFrame(o)
                            }
                        }()
                    }))
                })))
            }
        }, {
            key: "_hoverObjectOut",
            value: function(e) {
                var t = this;
                this._initialHoverCancelable ? (this._initialHoverCancelable.cancel(),
                this._initialHoverCancelable = null) : (this._hoverOutCancelable = p.cancelableDelay(150),
                this._hoverOutCancelable.then(function(e) {
                    var n = e.canceled;
                    t._hoverOutCancelable = null,
                    n || (t._hoveredObject && t.model.removeStickyHoverLocation(t._hoveredObject),
                    t._hoveredObject = null,
                    t._trackingMarker = !1,
                    t._locationMarker.hidden = !0,
                    t.model.get("soundFX").hoverObjectOut(),
                    t._hoverAnimationQueue = t._hoverAnimationQueue.then(function(e) {
                        return p.delay(200)
                    }))
                }))
            }
        }, {
            key: "_onMarkerMouseEnter",
            value: function() {
                this._hoverOutCancelable && (this._hoverOutCancelable.cancel(),
                this._hoverOutCancelable = null)
            }
        }, {
            key: "_onMarkerMouseLeave",
            value: function() {
                var e = this;
                this._hoverOutCancelable = p.cancelableDelay(150),
                this._hoverOutCancelable.then(function(t) {
                    var n = t.canceled;
                    e._hoverOutCancelable = null,
                    n || (e._hoveredObject && e.model.removeStickyHoverLocation(e._hoveredObject),
                    e._hoveredObject = null,
                    e._trackingMarker = !1,
                    e._locationMarker.hidden = !0,
                    e.model.get("soundFX").hoverObjectOut(),
                    e._hoverAnimationQueue = e._hoverAnimationQueue.then(function(e) {
                        return p.delay(200)
                    }))
                })
            }
        }, {
            key: "_onSelectNone",
            value: function(e) {
                e.detail.mouseButton === y["default"].Mouse.LEFT_BUTTON ? this._disc.hidden ? this.model.goToParentLocation(this.model.get("location")) : (this._disc.hidden = !0,
                this._trackingDisc = !1,
                this.model.unselectLocation()) : this._disc.hidden || (this._disc.hidden = !0,
                this._trackingDisc = !1,
                this.model.unselectLocation())
            }
        }, {
            key: "_onLocationChange",
            value: function() {
                this._disc.hidden || (this._disc.hidden = !0,
                this._trackingDisc = !1,
                this.model.unselectLocation())
            }
        }, {
            key: "_onMarkerClick",
            value: function(e) {
                var t = this._hoveredObject;
                this.model.removeStickyHoverLocation(t),
                this._trackingMarker = !1,
                this._locationMarker.hidden = !0,
                t.type === x["default"].Types.STAR_SYSTEM ? this._onSelectStarSystem({
                    detail: {
                        location: t,
                        mouseButton: 2
                    },
                    preventDefault: function() {}
                }) : t.type === x["default"].Types.CELESTIAL_OBJECT ? this._onSelectCelestialObject({
                    detail: {
                        location: t,
                        mouseButton: 2
                    },
                    preventDefault: function() {}
                }) : t.type === x["default"].Types.JUMP_POINT && this._onSelectJumpPoint({
                    detail: {
                        location: t,
                        mouseButton: 2
                    },
                    preventDefault: function() {}
                })
            }
        }, {
            key: "_closeInfo",
            value: function() {
                var e = this;
                this.info.currentView && this.info.currentView.hide().then(function() {
                    return e.info.empty()
                })
            }
        }, {
            key: "tagName",
            get: function() {
                return "section"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-starmap"
            }
        }, {
            key: "template",
            get: function() {
                return B
            }
        }, {
            key: "modelEvents",
            get: function() {
                return this[R] = this[R] || {
                    "change:location": "updateQueryString",
                    update_camera: "updateQueryString"
                }
            },
            set: function(e) {
                this[R] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[O] = this[O] || {
                    mouseup: "onInteraction",
                    mousedown: "onInteraction",
                    mouseout: "onInteraction"
                }
            },
            set: function(e) {
                this[O] = e
            }
        }, {
            key: "regions",
            get: function() {
                return this[F] = this[F] || {
                    info: "#sm-map-info-region"
                }
            },
            set: function(e) {
                this[F] = e
            }
        }]),
        t
    }(u.LayoutView);
    t["default"] = I,
    I.prototype.updateQueryString = v["default"].debounce(I.prototype.updateQueryString, 500),
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(19)["default"]
      , r = n(190)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function(e, t) {
        return new i(function(n) {
            return setTimeout(n.bind(null, t), e)
        }
        )
    };
    t.delay = o;
    var a = function(e) {
        var t = null
          , n = [new i(function(e) {
            return t = e
        }
        ), o(e, {
            canceled: !1
        })];
        return r(i.race(n), {
            cancel: function() {
                t({
                    canceled: !0
                })
            }
        })
    };
    t.cancelableDelay = a
}
, function(e, t, n) {
    e.exports = {
        "default": n(191),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(192),
    e.exports = n(30).Object.assign
}
, [481, 28, 193], [482, 35, 127, 51, 38], function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(195)["default"]
      , a = n(97)["default"]
      , s = n(19)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    }),
    n(197);
    var c = n(114)
      , u = l(c)
      , h = n(128)
      , d = l(h)
      , f = n(388)
      , p = l(f)
      , m = n(389)
      , v = n(106)
      , g = l(v);
    n(390);
    var y = "section"
      , b = "starmap-disc"
      , x = "div"
      , w = "svg-root"
      , _ = 757
      , S = 540
      , M = "h1"
      , C = "div"
      , T = "h2"
      , E = "dl"
      , k = "dt"
      , A = "dd"
      , P = "Unknown Object"
      , L = o("Disc._elements")
      , O = a("Disc._hidden")
      , R = a("Disc._lights")
      , F = a("Disc._position")
      , B = a("Disc._setInitialState")
      , D = (a("Disc._setObjectInfo"),
    a("Disc._objectTitle"))
      , I = a("Disc._objectInfo")
      , N = a("Disc._eventTarget")
      , j = a("Disc._objectType")
      , V = "#1A324E"
      , z = "#7F7779"
      , U = "#FEE5A1"
      , H = function() {
        var e = u["default"].createElement("div")
          , t = ["matches", "msMatchesSelector", "mozMatchesSelector", "webkitMatchesSelector"];
        return t.reduce(function(t, n) {
            return !t && n in e ? n : t
        }, null)
    }()
      , G = {
        INSPECT: "inspect",
        INFORMATION: "information",
        ROUTING: "routing",
        BOOKMARK: "bookmark",
        AVOID: "avoid",
        DEPARTURE: "departure",
        DESTINATION: "destination"
    }
      , W = function() {
        function e(t) {
            var n = this;
            r(this, e),
            this[N] = u["default"].createDocumentFragment();
            var i = u["default"].createElement(y);
            i.classList.add("disc-root"),
            this._rootElement = i;
            var o = u["default"].createElement(x)
              , a = u["default"].createElement(M);
            a.classList.add("disc-root__title");
            var s = u["default"].createElement(C);
            s.classList.add("disc-root__info"),
            i.classList.add(b),
            i.style.visibility = "hidden",
            o.classList.add(w),
            o.style.width = _ + "px",
            o.style.height = S + "px",
            this._degradedAnimations = -1 !== g["default"].navigator.userAgent.toLowerCase().indexOf("firefox");
            var l = u["default"].createElement("object");
            l.type = "image/svg+xml",
            i.appendChild(o),
            i.appendChild(a),
            i.appendChild(s),
            g["default"]._disc = this,
            this[D] = P,
            this[I] = null,
            this._bookmarked = !1,
            this._avoided = !1,
            this._inspectingJumpPoint = !1,
            this._inspectingDisabled = !1,
            o.appendChild(l),
            l.addEventListener("load", function() {
                var e = l.contentDocument
                  , t = u["default"].createElement("ul");
                t.classList.add("disc-root__menu"),
                t.innerHTML = '\n        <li data-order="0"><a data-type="inspect" href="#"><span class="inspect">Inspect</span><span class="go-through">Navigate</span></a></li>\n        <li data-order="1"><a data-type="information" href="#">Information</a></li>\n        <li data-order="2"><a data-type="routing" href="#">Routing</a></li>\n        <li data-order="3"><a data-type="bookmark" href="#">Bookmark</a></li>\n      ';
                var r = u["default"].createElement("ul");
                r.classList.add("disc-root__extended-menu"),
                r.style.display = "none",
                r.innerHTML = '\n        <li data-order="0"><a data-type="back" href="#">Back<i class="back-icon"><span></span></i></a></li>\n        <li data-order="1"><a data-type="departure" href="#"><span>Set As:</span>Departure</a></li>\n        <li data-order="2"><a data-type="destination" href="#"><span>Set As:</span>Destination</a></li>\n        <li data-order="3"><a data-type="avoid" href="#">Avoid</a></li>\n      ';
                var o = u["default"].createElement("ul");
                o.classList.add("disc-root__indicators"),
                o.style.opacity = "0",
                o.innerHTML = "\n        <li><span>Population</span></li>\n        <li><span>Economy</span></li>\n        <li><span>Threat</span></li>\n      ",
                n._selectedMainMenuItemIndex = 0,
                n._selectedExtendedMainMenuItemIndex = 0,
                i.appendChild(t),
                i.appendChild(r),
                i.appendChild(o);
                l.contentDocument;
                n[L] = {
                    root: i,
                    title: a,
                    info: s,
                    menu: t,
                    extendedMenu: r,
                    indicators: o,
                    disc: {
                        root: e,
                        mask: {
                            shape: e.querySelector(".disc__mask-shape"),
                            gradient: e.querySelector(".disc__mask-gradient")
                        },
                        background: {
                            mask: e.querySelector(".disc__background-strokes--shape")
                        },
                        middleTop: {
                            mask: e.querySelector(".disc__middle-top--mask-shape"),
                            strokeMask: e.querySelector(".disc__middle-top--stroke-shape"),
                            shape: e.querySelector(".disc__middle-top--shape")
                        },
                        circles: {
                            bottomLeft: e.querySelector(".disc__highlights-bottom-left"),
                            bottomRight: e.querySelector(".disc__highlights-bottom-right"),
                            topLeft: e.querySelector(".disc__highlights-top-left"),
                            topRight: e.querySelector(".disc__highlights-top-right")
                        },
                        smallLights: e.querySelector(".disc__small-lights"),
                        menuMask: e.querySelector("#disc__menu-mask")
                    }
                },
                n._showIndicators = !1,
                n[F] = {
                    x: 0,
                    y: 0
                },
                n[R] = new p["default"](n,e,{
                    degraded: !0
                }),
                n[O] = !0,
                n._discDimensions = i.getBoundingClientRect(),
                n[B]()
            }),
            l.data = t + "/disc/disc.svg"
        }
        return i(e, [{
            key: "_resetMainMenu",
            value: function() {
                for (var e = this[L].menu, t = 0, n = 0, i = e.children.length; i > t; t++)
                    this._inspectingDisabled && 0 === t || (e.children[t].setAttribute("data-order", n),
                    n++);
                this._selectedMainMenuItemIndex = 0
            }
        }, {
            key: "_resetExtendedMainMenu",
            value: function() {
                for (var e = this[L].extendedMenu, t = 0, n = e.children.length; n > t; t++)
                    e.children[t].setAttribute("data-order", t);
                this._selectedExtendedMainMenuItemIndex = 0
            }
        }, {
            key: "addEventListener",
            value: function(e, t) {
                var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                return this[N].addEventListener(e, t, n)
            }
        }, {
            key: "removeEventListener",
            value: function(e, t) {
                var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                return this[N].removeEventListener(e, t, n)
            }
        }, {
            key: "dispatchEvent",
            value: function(e) {
                return this[N].dispatchEvent(e)
            }
        }, {
            key: "_showStandard",
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = t.shape
                  , i = t.gradient
                  , r = this[L].disc.middleTop.shape
                  , o = this[L].disc.middleTop.mask
                  , a = this[L].disc.middleTop.strokeMask
                  , s = this[L].disc.background.mask
                  , l = this[L].disc.circles.bottomLeft
                  , c = this[L].title
                  , u = this[L].disc.smallLights
                  , h = this[L].info
                  , f = this[L].menu
                  , p = (this[L].extendedMenu,
                this[L].disc.circles.bottomRight)
                  , v = this[L].disc.circles.topLeft
                  , g = this[L].disc.circles.topRight
                  , y = l.getBBox()
                  , b = p.getBBox()
                  , x = v.getBBox()
                  , w = g.getBBox()
                  , _ = new CustomEvent("show",{
                    cancelable: !0
                });
                if (this[L].menu.classList.add("inactive"),
                this[N].dispatchEvent(_)) {
                    this[L].root.style.pointerEvents = "all";
                    var S = new d["default"];
                    this._resetMainMenu(),
                    S.tween({
                        from: {
                            radius: 95
                        },
                        to: {
                            radius: 400
                        },
                        duration: 150,
                        step: function(e) {
                            n.setAttribute("r", e.radius),
                            i.setAttribute("r", e.radius)
                        }
                    });
                    var M = new d["default"];
                    M.tween({
                        from: {
                            radius: 110
                        },
                        to: {
                            radius: 300
                        },
                        delay: 150,
                        duration: 450,
                        step: function(e) {
                            o.setAttribute("r", e.radius)
                        }
                    });
                    var C = new d["default"];
                    C.tween({
                        from: {
                            opacity: 100
                        },
                        to: {
                            opacity: 60
                        },
                        delay: 660,
                        duration: 600,
                        step: function(e) {
                            r.style.opacity = e.opacity / 100
                        }
                    });
                    var T = new d["default"];
                    T.tween({
                        from: {
                            radius: 110
                        },
                        to: {
                            radius: 300
                        },
                        duration: 400,
                        delay: 400,
                        step: function(e) {
                            a.setAttribute("r", e.radius)
                        }
                    });
                    var E = new d["default"];
                    E.tween({
                        from: {
                            radius: 110
                        },
                        to: {
                            radius: 300
                        },
                        duration: 530,
                        step: function(e) {
                            s.setAttribute("r", e.radius)
                        }
                    });
                    var k = new d["default"]
                      , A = y.x + y.width / 2
                      , P = y.y + y.height / 2;
                    k.tween({
                        from: {
                            angle: 0
                        },
                        to: {
                            angle: 360
                        },
                        duration: 1500,
                        delay: 150,
                        step: function(e) {
                            l.setAttribute("transform", "rotate(" + -e.angle + " " + A + " " + P + ")")
                        }
                    });
                    var O = new d["default"]
                      , F = b.x + b.width / 2
                      , B = b.y + b.height / 2;
                    O.tween({
                        from: {
                            angle: 0
                        },
                        to: {
                            angle: 360
                        },
                        duration: 1500,
                        delay: 150,
                        step: function(e) {
                            p.setAttribute("transform", "rotate(" + e.angle + " " + F + " " + B + ")")
                        }
                    });
                    var I = new d["default"]
                      , j = x.x + x.width / 2
                      , H = x.y + x.height / 2;
                    I.tween({
                        from: {
                            angle: 0
                        },
                        to: {
                            angle: 360
                        },
                        duration: 1500,
                        delay: 150,
                        step: function(e) {
                            v.setAttribute("transform", "rotate(" + e.angle + " " + j + " " + H + ")")
                        }
                    });
                    var G = new d["default"]
                      , W = w.x + w.width / 2
                      , q = w.y + w.height / 2;
                    G.tween({
                        from: {
                            angle: 0
                        },
                        to: {
                            angle: 360
                        },
                        duration: 1500,
                        delay: 150,
                        step: function(e) {
                            g.setAttribute("transform", "rotate(" + -e.angle + " " + W + " " + q + ")")
                        }
                    }),
                    m.delay(60).then(function(t) {
                        return e[R].hidden = !1
                    }),
                    m.delay(180).then(function(t) {
                        return e[R].on = !0
                    }),
                    c.style.color = V,
                    c.innerHTML = this[D],
                    c.style.opacity = 1,
                    c.style.display = "block",
                    m.delay(150).then(function(e) {
                        c.style.color = z
                    }).then(function(e) {
                        return m.delay(60)
                    }).then(function(e) {
                        c.style.color = V
                    }).then(function(e) {
                        return m.delay(50)
                    }).then(function(e) {
                        c.classList.add("disc-root__title--shadow"),
                        c.style.color = U
                    });
                    var X = new d["default"];
                    X.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        delay: 60,
                        duration: 100,
                        step: function(e) {
                            u.style.opacity = e.opacity / 100
                        }
                    });
                    var Y = new d["default"];
                    Y.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        delay: 350,
                        duration: 300,
                        step: function(e) {
                            h.style.opacity = e.opacity / 100
                        }
                    }),
                    f.style.display = "block";
                    for (var J = f.querySelectorAll("a"), Z = 0, Q = J.length; Q > Z; Z++)
                        J[Z].style.transform = "",
                        J[Z].style.opacity = "1";
                    var K = (this[L].indicators,
                    new d["default"]);
                    K.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        delay: 350,
                        duration: 300,
                        step: function(e) {
                            f.style.opacity = e.opacity / 100
                        },
                        finish: function() {
                            e[L].menu.classList.remove("inactive")
                        }
                    }),
                    this._showIndicators && !function() {
                        var t = e[L].indicators
                          , n = new d["default"];
                        n.tween({
                            from: {
                                opacity: 0
                            },
                            to: {
                                opacity: 100
                            },
                            delay: 350,
                            duration: 300,
                            step: function(e) {
                                t.style.opacity = e.opacity / 100
                            }
                        })
                    }();
                    var $ = new CustomEvent("shown",{
                        cancelable: !0
                    });
                    !this[N].dispatchEvent($)
                }
            }
        }, {
            key: "_hideStandard",
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = t.shape
                  , i = t.gradient
                  , r = this[L].disc.middleTop.shape
                  , o = this[L].disc.middleTop.mask
                  , a = this[L].disc.middleTop.strokeMask
                  , s = this[L].disc.background.mask
                  , l = this[L].disc.circles.bottomLeft
                  , c = this[L].disc.circles.bottomRight
                  , u = this[L].disc.circles.topLeft
                  , h = this[L].disc.circles.topRight
                  , f = this[L].title
                  , p = this[L].disc.smallLights
                  , v = this[L].info
                  , g = this[L].menu
                  , y = this[L].extendedMenu
                  , b = new CustomEvent("hide",{
                    cancelable: !0
                });
                if (this[N].dispatchEvent(b)) {
                    this[L].root.style.pointerEvents = "none";
                    var x = new d["default"];
                    x.tween({
                        from: {
                            radius: 400
                        },
                        to: {
                            radius: 95
                        },
                        duration: 100,
                        step: function(e) {
                            n.setAttribute("r", e.radius),
                            i.setAttribute("r", e.radius)
                        },
                        finish: function() {
                            o.setAttribute("r", 110),
                            r.style.opacity = 1,
                            a.setAttribute("r", 110),
                            s.setAttribute("r", 110),
                            l.removeAttribute("transform"),
                            c.removeAttribute("transform"),
                            u.removeAttribute("transform"),
                            h.removeAttribute("transform"),
                            f.style.opacity = 0,
                            f.style.display = "none",
                            p.style.opacity = 0,
                            v.style.opacity = 0,
                            g.style.opacity = 0,
                            g.style.display = "block",
                            y.style.opacity = 1,
                            y.style.display = "none";
                            var t = g.querySelectorAll("a");
                            e[L].indicators.style.opacity = "0";
                            for (var n = 0, i = t.length; i > n; n++)
                                t[n].style.transform = "",
                                t[n].style.opacity = "1";
                            for (var d = y.querySelectorAll("a"), n = 0, m = d.length; m > n; n++)
                                d[n].style.textIndent = "0px",
                                d[n].style.opacity = "1"
                        }
                    }),
                    this[R].on = !1,
                    m.delay(60).then(function(t) {
                        return e[R].hidden = !0
                    }),
                    m.delay(100).then(function(t) {
                        return e._resetMainMenu()
                    });
                    var w = new CustomEvent("hidden",{
                        cancelable: !0
                    });
                    !this[N].dispatchEvent(w)
                }
            }
        }, {
            key: "_showDegraded",
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = (t.shape,
                t.gradient,
                this[L].disc.middleTop.shape)
                  , i = this[L].disc.middleTop.mask
                  , r = this[L].disc.middleTop.strokeMask
                  , o = this[L].disc.background.mask
                  , a = this[L].disc.circles.bottomLeft
                  , s = this[L].title
                  , l = this[L].disc.smallLights
                  , c = this[L].info
                  , u = this[L].menu
                  , h = (this[L].extendedMenu,
                this[L].disc.circles.bottomRight)
                  , f = this[L].disc.circles.topLeft
                  , p = this[L].disc.circles.topRight
                  , v = (a.getBBox(),
                h.getBBox(),
                f.getBBox(),
                p.getBBox(),
                new CustomEvent("show",{
                    cancelable: !0
                }));
                if (this[L].menu.classList.add("inactive"),
                this[N].dispatchEvent(v)) {
                    this[L].root.style.pointerEvents = "all";
                    new d["default"];
                    this._resetMainMenu(),
                    this[L].root.style.opacity = 1,
                    i.setAttribute("r", 300),
                    n.style.opacity = .6,
                    r.setAttribute("r", 300),
                    o.setAttribute("r", 300),
                    m.delay(60).then(function(t) {
                        return e[R].hidden = !1
                    }),
                    m.delay(180).then(function(t) {
                        return e[R].on = !0
                    }),
                    s.style.color = V,
                    s.innerHTML = this[D],
                    s.style.opacity = 1,
                    s.style.display = "block",
                    m.delay(150).then(function(e) {
                        s.classList.add("disc-root__title--shadow"),
                        s.style.color = U
                    }),
                    l.style.opacity = 1;
                    var g = new d["default"];
                    g.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        delay: 350,
                        duration: 300,
                        step: function(e) {
                            c.style.opacity = e.opacity / 100
                        }
                    }),
                    u.style.display = "block";
                    for (var y = u.querySelectorAll("a"), b = 0, x = y.length; x > b; b++)
                        y[b].style.transform = "",
                        y[b].style.opacity = "1";
                    var w = (this[L].indicators,
                    new d["default"]);
                    w.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        delay: 350,
                        duration: 300,
                        step: function(e) {
                            u.style.opacity = e.opacity / 100
                        },
                        finish: function() {
                            e[L].menu.classList.remove("inactive")
                        }
                    }),
                    this._showIndicators && !function() {
                        var t = e[L].indicators
                          , n = new d["default"];
                        n.tween({
                            from: {
                                opacity: 0
                            },
                            to: {
                                opacity: 100
                            },
                            delay: 350,
                            duration: 300,
                            step: function(e) {
                                t.style.opacity = e.opacity / 100
                            }
                        })
                    }();
                    var _ = new CustomEvent("shown",{
                        cancelable: !0
                    });
                    !this[N].dispatchEvent(_)
                }
            }
        }, {
            key: "_hideStandard",
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = t.shape
                  , i = t.gradient
                  , r = this[L].disc.middleTop.shape
                  , o = this[L].disc.middleTop.mask
                  , a = this[L].disc.middleTop.strokeMask
                  , s = this[L].disc.background.mask
                  , l = this[L].disc.circles.bottomLeft
                  , c = this[L].disc.circles.bottomRight
                  , u = this[L].disc.circles.topLeft
                  , h = this[L].disc.circles.topRight
                  , f = this[L].title
                  , p = this[L].disc.smallLights
                  , v = this[L].info
                  , g = this[L].menu
                  , y = this[L].extendedMenu
                  , b = new CustomEvent("hide",{
                    cancelable: !0
                });
                if (this[N].dispatchEvent(b)) {
                    this[L].root.style.pointerEvents = "none";
                    var x = new d["default"];
                    x.tween({
                        from: {
                            radius: 400
                        },
                        to: {
                            radius: 95
                        },
                        duration: 100,
                        step: function(e) {
                            n.setAttribute("r", e.radius),
                            i.setAttribute("r", e.radius)
                        },
                        finish: function() {
                            o.setAttribute("r", 110),
                            r.style.opacity = 1,
                            a.setAttribute("r", 110),
                            s.setAttribute("r", 110),
                            l.removeAttribute("transform"),
                            c.removeAttribute("transform"),
                            u.removeAttribute("transform"),
                            h.removeAttribute("transform"),
                            f.style.opacity = 0,
                            f.style.display = "none",
                            p.style.opacity = 0,
                            v.style.opacity = 0,
                            g.style.opacity = 0,
                            g.style.display = "block",
                            y.style.opacity = 1,
                            y.style.display = "none";
                            var t = g.querySelectorAll("a");
                            e[L].indicators.style.opacity = "0";
                            for (var n = 0, i = t.length; i > n; n++)
                                t[n].style.transform = "",
                                t[n].style.opacity = "1";
                            for (var d = y.querySelectorAll("a"), n = 0, m = d.length; m > n; n++)
                                d[n].style.textIndent = "0px",
                                d[n].style.opacity = "1"
                        }
                    }),
                    this[R].on = !1,
                    m.delay(60).then(function(t) {
                        return e[R].hidden = !0
                    }),
                    m.delay(100).then(function(t) {
                        return e._resetMainMenu()
                    });
                    var w = new CustomEvent("hidden",{
                        cancelable: !0
                    });
                    !this[N].dispatchEvent(w)
                }
            }
        }, {
            key: "_hideDegraded",
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = (t.shape,
                t.gradient,
                this[L].disc.middleTop.shape)
                  , i = this[L].disc.middleTop.mask
                  , r = this[L].disc.middleTop.strokeMask
                  , o = this[L].disc.background.mask
                  , a = this[L].disc.circles.bottomLeft
                  , s = this[L].disc.circles.bottomRight
                  , l = this[L].disc.circles.topLeft
                  , c = this[L].disc.circles.topRight
                  , u = this[L].title
                  , h = this[L].disc.smallLights
                  , d = this[L].info
                  , f = this[L].menu
                  , p = this[L].extendedMenu
                  , v = new CustomEvent("hide",{
                    cancelable: !0
                });
                if (this[N].dispatchEvent(v)) {
                    this[L].root.style.pointerEvents = "none",
                    this[L].root.style.opacity = 0,
                    i.setAttribute("r", 110),
                    n.style.opacity = 1,
                    r.setAttribute("r", 110),
                    o.setAttribute("r", 110),
                    a.removeAttribute("transform"),
                    s.removeAttribute("transform"),
                    l.removeAttribute("transform"),
                    c.removeAttribute("transform"),
                    u.style.opacity = 0,
                    u.style.display = "none",
                    h.style.opacity = 0,
                    d.style.opacity = 0,
                    f.style.opacity = 0,
                    f.style.display = "block",
                    p.style.opacity = 1,
                    p.style.display = "none";
                    var g = f.querySelectorAll("a");
                    this[L].indicators.style.opacity = "0";
                    for (var y = 0, b = g.length; b > y; y++)
                        g[y].style.transform = "",
                        g[y].style.opacity = "1";
                    for (var x = p.querySelectorAll("a"), y = 0, w = x.length; w > y; y++)
                        x[y].style.textIndent = "0px",
                        x[y].style.opacity = "1";
                    this[R].on = !1,
                    m.delay(60).then(function(t) {
                        return e[R].hidden = !0
                    }),
                    m.delay(100).then(function(t) {
                        return e._resetMainMenu()
                    });
                    var _ = new CustomEvent("hidden",{
                        cancelable: !0
                    });
                    !this[N].dispatchEvent(_)
                }
            }
        }, {
            key: "setObjectTitle",
            value: function(e) {
                this[D] = e
            }
        }, {
            key: "setObjectType",
            value: function(e) {
                this[L].root.setAttribute("data-type", e),
                this[j] = e
            }
        }, {
            key: "setObjectInfo",
            value: function(e) {
                this[I] = e;
                var t = u["default"].createElement(T);
                t.appendChild(u["default"].createTextNode(e.title));
                var n = u["default"].createElement(E);
                e.definitions.forEach(function(e) {
                    var t = u["default"].createElement(k);
                    t.appendChild(u["default"].createTextNode(e.name));
                    var i = u["default"].createElement(A);
                    i.appendChild(u["default"].createTextNode(e.value)),
                    n.appendChild(t),
                    n.appendChild(i)
                });
                var i = this[L].info;
                i.innerHTML = "",
                i.appendChild(t),
                i.appendChild(n)
            }
        }, {
            key: "_menuUp",
            value: function() {
                var e = this
                  , t = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0]
                  , n = this[L].disc.menuMask
                  , i = this[L].menu
                  , r = new d["default"];
                return 0 === t ? s.resolve() : new s(function(t) {
                    r.tween({
                        from: {
                            translateY: 0
                        },
                        to: {
                            translateY: -30
                        },
                        duration: 125,
                        start: function() {
                            e._selectedMainMenuItemIndex++;
                            for (var t = -e._selectedMainMenuItemIndex, n = 0, r = i.children.length; r > n; n++)
                                i.children[n].setAttribute("data-order", t++)
                        },
                        step: function(e) {
                            var t = e.translateY;
                            n.setAttribute("transform", "translate(0 " + t + ")")
                        },
                        finish: function() {
                            n.removeAttribute("transform"),
                            t()
                        }
                    })
                }
                ).then(function(n) {
                    return e._menuUp(t - 1)
                })
            }
        }, {
            key: "_extendedMenuUp",
            value: function() {
                var e = this
                  , t = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0]
                  , n = this[L].disc.menuMask
                  , i = this[L].extendedMenu
                  , r = new d["default"];
                return 0 === t ? s.resolve() : new s(function(t) {
                    r.tween({
                        from: {
                            translateY: 0
                        },
                        to: {
                            translateY: -30
                        },
                        duration: 125,
                        start: function() {
                            e._selectedExtendedMainMenuItemIndex++;
                            for (var t = -e._selectedExtendedMainMenuItemIndex, n = 0, r = i.children.length; r > n; n++)
                                i.children[n].setAttribute("data-order", t++)
                        },
                        step: function(e) {
                            var t = e.translateY;
                            n.setAttribute("transform", "translate(0 " + t + ")")
                        },
                        finish: function() {
                            n.removeAttribute("transform"),
                            t()
                        }
                    })
                }
                ).then(function(n) {
                    return e._extendedMenuUp(t - 1)
                })
            }
        }, {
            key: "_menuDown",
            value: function() {
                var e = this
                  , t = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0]
                  , n = this[L].disc.menuMask
                  , i = this[L].menu
                  , r = new d["default"];
                return 0 === t ? s.resolve() : new s(function(t) {
                    r.tween({
                        from: {
                            translateY: 0
                        },
                        to: {
                            translateY: 30
                        },
                        duration: 125,
                        start: function() {
                            e._selectedMainMenuItemIndex--;
                            for (var t = -e._selectedMainMenuItemIndex, n = 0, r = i.children.length; r > n; n++)
                                i.children[n].setAttribute("data-order", t++)
                        },
                        step: function(e) {
                            var t = e.translateY;
                            n.setAttribute("transform", "translate(0 " + t + ")")
                        },
                        finish: function() {
                            n.removeAttribute("transform"),
                            t()
                        }
                    })
                }
                ).then(function(n) {
                    return e._menuDown(t - 1)
                })
            }
        }, {
            key: "_extendedMenuDown",
            value: function() {
                var e = this
                  , t = arguments.length <= 0 || void 0 === arguments[0] ? 1 : arguments[0]
                  , n = this[L].disc.menuMask
                  , i = this[L].extendedMenu
                  , r = new d["default"];
                return 0 === t ? s.resolve() : new s(function(t) {
                    r.tween({
                        from: {
                            translateY: 0
                        },
                        to: {
                            translateY: 30
                        },
                        duration: 125,
                        start: function() {
                            e._selectedExtendedMainMenuItemIndex--;
                            for (var t = -e._selectedExtendedMainMenuItemIndex, n = 0, r = i.children.length; r > n; n++)
                                i.children[n].setAttribute("data-order", t++)
                        },
                        step: function(e) {
                            var t = e.translateY;
                            n.setAttribute("transform", "translate(0 " + t + ")")
                        },
                        finish: function() {
                            n.removeAttribute("transform"),
                            t()
                        }
                    })
                }
                ).then(function(n) {
                    return e._extendedMenuDown(t - 1)
                })
            }
        }, {
            key: B,
            value: function() {
                var e = this
                  , t = this[L].disc.mask
                  , n = t.shape
                  , i = t.gradient
                  , r = this[L].title
                  , o = this[L].info
                  , a = this[L].menu
                  , l = this[L].extendedMenu;
                r.style.opacity = 0,
                o.style.opacity = 0,
                a.style.opacity = 0,
                this[L].root.style.pointerEvents = "none",
                this._degradedAnimations ? (i.setAttribute("r", 500),
                n.setAttribute("r", 500),
                this[L].root.style.opacity = 0) : (i.setAttribute("r", 0),
                n.setAttribute("r", 0)),
                this[L].root.style.visibility = "visible",
                this[L].disc.smallLights.style.opacity = 0;
                var c = "a";
                this[L].root.addEventListener("click", function(e) {
                    e.stopPropagation()
                }),
                a.addEventListener("click", function(t) {
                    for (var n = t.target, i = void 0; n && n !== u["default"] && !(i = n[H](c)); )
                        n = n.parentNode;
                    i && !function() {
                        var t = parseInt(n.parentNode.getAttribute("data-order"), 10)
                          , i = s.resolve();
                        i = 0 > t ? i.then(function(n) {
                            return e._menuDown(Math.abs(t))
                        }) : i.then(function(n) {
                            return e._menuUp(Math.abs(t))
                        }),
                        i.then(function(t) {
                            var i = n.getAttribute("data-type");
                            if ("routing" !== i) {
                                var r = new CustomEvent("select",{
                                    detail: {
                                        type: i
                                    },
                                    cancelable: !0
                                })
                                  , o = !e[N].dispatchEvent(r);
                                o || (e.hidden = !0)
                            } else {
                                var r = new CustomEvent("select",{
                                    detail: {
                                        type: i
                                    },
                                    cancelable: !0
                                });
                                e[N].dispatchEvent(r),
                                e._showExtendedMenu()
                            }
                        })
                    }()
                }, !1),
                l.addEventListener("click", function(t) {
                    for (var n = t.target, i = void 0; n && n !== u["default"] && !(i = n[H](c)); )
                        n = n.parentNode;
                    i && !function() {
                        var t = parseInt(n.parentNode.getAttribute("data-order"), 10)
                          , i = s.resolve();
                        i = 0 > t ? i.then(function(n) {
                            return e._extendedMenuDown(Math.abs(t))
                        }) : i.then(function(n) {
                            return e._extendedMenuUp(Math.abs(t))
                        }),
                        i.then(function(t) {
                            var i = n.getAttribute("data-type");
                            if ("back" !== i) {
                                var r = new CustomEvent("select",{
                                    detail: {
                                        type: i
                                    },
                                    cancelable: !0
                                })
                                  , o = !e[N].dispatchEvent(r);
                                o || (e.hidden = !0)
                            } else {
                                var r = new CustomEvent("select",{
                                    detail: {
                                        type: i
                                    },
                                    cancelable: !0
                                });
                                e[N].dispatchEvent(r),
                                e._hideExtendedMenu()
                            }
                        })
                    }()
                }, !1)
            }
        }, {
            key: "_showExtendedMenu",
            value: function() {
                var e = new d["default"]
                  , t = this[L].menu
                  , n = t.querySelectorAll("a");
                e.tween({
                    from: {
                        translateX: 0,
                        opacity: 100
                    },
                    to: {
                        translateX: 250,
                        opacity: 0
                    },
                    duration: 150,
                    step: function(e) {
                        for (var t = e.translateX, i = e.opacity, r = 0, o = n.length; o > r; r++)
                            n[r].style.transform = "translateX(" + t + "px)",
                            n[r].style.opacity = Math.max(0, i / 100 / 2)
                    },
                    finish: function() {
                        t.style.display = "none"
                    }
                });
                var i = new d["default"]
                  , r = this[L].extendedMenu
                  , o = r.querySelector("i span")
                  , a = r.querySelectorAll("a");
                i.tween({
                    from: {
                        translateX: -250,
                        opacity: 0
                    },
                    to: {
                        translateX: 0,
                        opacity: 100
                    },
                    duration: 150,
                    delay: 150,
                    start: function() {
                        for (var e = 0, t = a.length; t > e; e++)
                            a[e].style.textIndent = "-250px",
                            a[e].style.opacity = 0;
                        o.style.left = "-250px",
                        r.style.display = "block"
                    },
                    step: function(e) {
                        for (var t = e.translateX, n = e.opacity, i = 0, r = a.length; r > i; i++)
                            a[i].style.textIndent = t + "px",
                            a[i].style.opacity = Math.min(1, n / 100 * 2);
                        o.style.left = t + "px"
                    }
                })
            }
        }, {
            key: "_hideExtendedMenu",
            value: function() {
                var e = new d["default"]
                  , t = this[L].extendedMenu
                  , n = t.querySelector("i span")
                  , i = t.querySelectorAll("a");
                e.tween({
                    from: {
                        translateX: 0,
                        opacity: 10
                    },
                    to: {
                        translateX: -250,
                        opacity: 0
                    },
                    duration: 150,
                    start: function() {
                        for (var e = 0, t = i.length; t > e; e++)
                            i[e].style.textIndent = "0px",
                            i[e].style.opacity = 1;
                        n.style.left = "0px"
                    },
                    step: function(e) {
                        for (var t = e.translateX, r = e.opacity, o = 0, a = i.length; a > o; o++)
                            i[o].style.textIndent = t + "px",
                            i[o].style.opacity = Math.min(1, r / 100 * 2);
                        n.style.left = t + "px"
                    },
                    finish: function() {
                        t.style.display = "none"
                    }
                });
                var r = new d["default"]
                  , o = this[L].menu
                  , a = o.querySelectorAll("a");
                r.tween({
                    from: {
                        translateX: 250,
                        opacity: 0
                    },
                    to: {
                        translateX: 0,
                        opacity: 100
                    },
                    duration: 150,
                    delay: 150,
                    start: function() {
                        o.style.display = "block"
                    },
                    step: function(e) {
                        for (var t = e.translateX, n = e.opacity, i = 0, r = a.length; r > i; i++)
                            a[i].style.transform = "translateX(" + t + "px)",
                            a[i].style.opacity = Math.max(1, n / 100 * 2)
                    },
                    finish: function() {
                        t.style.display = "none"
                    }
                })
            }
        }, {
            key: "indicators",
            set: function(e) {
                this._showIndicators = e
            },
            get: function() {
                return this._showIndicators
            }
        }, {
            key: "element",
            get: function() {
                return this._rootElement
            }
        }, {
            key: "hidden",
            get: function() {
                return this[O]
            },
            set: function(e) {
                e !== this[O] && (e ? this._degradedAnimations ? this._hideDegraded() : this._hideStandard() : this._degradedAnimations ? this._showDegraded() : this._showStandard(),
                this[O] = e)
            }
        }, {
            key: "lights",
            get: function() {
                return this[R]
            }
        }, {
            key: "position",
            get: function() {
                return this[F]
            },
            set: function() {
                var e = arguments.length <= 0 || void 0 === arguments[0] ? {
                    x: 0,
                    y: 0
                } : arguments[0]
                  , t = e.x
                  , n = e.y
                  , i = this[L].root;
                i.style.transform = "translate(" + (t - this._discDimensions.width / 2).toFixed(2) + "px, " + (n - this._discDimensions.height / 2).toFixed(2) + "px)",
                this[F] = {
                    x: t,
                    y: n
                }
            }
        }, {
            key: "bookmarked",
            set: function(e) {
                e ? this[L].menu.querySelector('[data-type="bookmark"]').classList.add("added") : this[L].menu.querySelector('[data-type="bookmark"]').classList.remove("added"),
                this._bookmarked = e
            },
            get: function() {
                return this._bookmarked
            }
        }, {
            key: "avoided",
            set: function(e) {
                e ? this[L].extendedMenu.querySelector('[data-type="avoid"]').classList.add("added") : this[L].extendedMenu.querySelector('[data-type="avoid"]').classList.remove("added"),
                this._avoided = e
            },
            get: function() {
                return this._avoided
            }
        }, {
            key: "inspectingJumpPoint",
            set: function(e) {
                e ? this[L].menu.querySelector('[data-type="inspect"]').classList.add("inspecting-jump-point") : this[L].menu.querySelector('[data-type="inspect"]').classList.remove("inspecting-jump-point"),
                this._inspectingJumpPoint = e
            },
            get: function() {
                this._inspectingJumpPoint
            }
        }, {
            key: "inspectingDisabled",
            set: function(e) {
                e ? this[L].menu.querySelector('[data-type="inspect"]').classList.add("inspecting-disabled") : this[L].menu.querySelector('[data-type="inspect"]').classList.remove("inspecting-disabled"),
                this._inspectingDisabled = e
            },
            get: function() {
                this._inspectingDisabled
            }
        }], [{
            key: "Commands",
            get: function() {
                return G
            }
        }]),
        e
    }();
    t["default"] = W,
    e.exports = t["default"]
}
, function(e, t, n) {
    e.exports = {
        "default": n(196),
        __esModule: !0
    }
}
, function(e, t, n) {
    n(99),
    e.exports = n(30).Symbol["for"]
}
, function(e, t, n) {
    e.exports = n(198)
}
, function(e, t, n) {
    (function(e) {
        "use strict";
        if (n(199),
        n(386),
        e._babelPolyfill)
            throw new Error("only one instance of babel/polyfill is allowed");
        e._babelPolyfill = !0
    }
    ).call(t, function() {
        return this
    }())
}
, function(e, t, n) {
    n(200),
    n(233),
    n(239),
    n(241),
    n(243),
    n(245),
    n(247),
    n(249),
    n(250),
    n(251),
    n(252),
    n(253),
    n(254),
    n(255),
    n(256),
    n(257),
    n(258),
    n(259),
    n(260),
    n(263),
    n(264),
    n(265),
    n(267),
    n(268),
    n(269),
    n(270),
    n(271),
    n(272),
    n(273),
    n(275),
    n(276),
    n(277),
    n(279),
    n(280),
    n(281),
    n(283),
    n(284),
    n(285),
    n(286),
    n(287),
    n(288),
    n(289),
    n(290),
    n(291),
    n(292),
    n(293),
    n(294),
    n(295),
    n(296),
    n(301),
    n(302),
    n(306),
    n(307),
    n(309),
    n(310),
    n(315),
    n(316),
    n(319),
    n(321),
    n(323),
    n(325),
    n(326),
    n(327),
    n(329),
    n(330),
    n(332),
    n(333),
    n(334),
    n(335),
    n(342),
    n(345),
    n(346),
    n(348),
    n(349),
    n(350),
    n(351),
    n(352),
    n(353),
    n(354),
    n(355),
    n(356),
    n(357),
    n(358),
    n(359),
    n(361),
    n(362),
    n(363),
    n(364),
    n(365),
    n(366),
    n(368),
    n(369),
    n(370),
    n(371),
    n(373),
    n(374),
    n(376),
    n(377),
    n(379),
    n(380),
    n(381),
    n(384),
    n(385),
    e.exports = n(204)
}
, function(e, t, n) {
    "use strict";
    var i, r = n(201), o = n(202), a = n(207), s = n(206), l = n(213), c = n(214), u = n(216), h = n(217), d = n(218), f = n(208), p = n(219), m = n(212), v = n(215), g = n(220), y = n(222), b = n(224), x = n(225), w = n(226), _ = n(223), S = n(210)("__proto__"), M = n(227), C = n(232)(!1), T = Object.prototype, E = Array.prototype, k = E.slice, A = E.join, P = r.setDesc, L = r.getDesc, O = r.setDescs, R = {};
    a || (i = !f(function() {
        return 7 != P(c("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    }),
    r.setDesc = function(e, t, n) {
        if (i)
            try {
                return P(e, t, n)
            } catch (r) {}
        if ("get"in n || "set"in n)
            throw TypeError("Accessors not supported!");
        return "value"in n && (p(e)[t] = n.value),
        e
    }
    ,
    r.getDesc = function(e, t) {
        if (i)
            try {
                return L(e, t)
            } catch (n) {}
        return u(e, t) ? s(!T.propertyIsEnumerable.call(e, t), e[t]) : void 0
    }
    ,
    r.setDescs = O = function(e, t) {
        p(e);
        for (var n, i = r.getKeys(t), o = i.length, a = 0; o > a; )
            r.setDesc(e, n = i[a++], t[n]);
        return e
    }
    ),
    o(o.S + o.F * !a, "Object", {
        getOwnPropertyDescriptor: r.getDesc,
        defineProperty: r.setDesc,
        defineProperties: O
    });
    var F = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
      , B = F.concat("length", "prototype")
      , D = F.length
      , I = function() {
        var e, t = c("iframe"), n = D, i = ">";
        for (t.style.display = "none",
        l.appendChild(t),
        t.src = "javascript:",
        e = t.contentWindow.document,
        e.open(),
        e.write("<script>document.F=Object</script" + i),
        e.close(),
        I = e.F; n--; )
            delete I.prototype[F[n]];
        return I()
    }
      , N = function(e, t) {
        return function(n) {
            var i, r = y(n), o = 0, a = [];
            for (i in r)
                i != S && u(r, i) && a.push(i);
            for (; t > o; )
                u(r, i = e[o++]) && (~C(a, i) || a.push(i));
            return a
        }
    }
      , j = function() {};
    o(o.S, "Object", {
        getPrototypeOf: r.getProto = r.getProto || function(e) {
            return e = g(e),
            u(e, S) ? e[S] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? T : null
        }
        ,
        getOwnPropertyNames: r.getNames = r.getNames || N(B, B.length, !0),
        create: r.create = r.create || function(e, t) {
            var n;
            return null !== e ? (j.prototype = p(e),
            n = new j,
            j.prototype = null,
            n[S] = e) : n = I(),
            void 0 === t ? n : O(n, t)
        }
        ,
        keys: r.getKeys = r.getKeys || N(F, D, !1)
    });
    var V = function(e, t, n) {
        if (!(t in R)) {
            for (var i = [], r = 0; t > r; r++)
                i[r] = "a[" + r + "]";
            R[t] = Function("F,a", "return new F(" + i.join(",") + ")")
        }
        return R[t](e, n)
    };
    o(o.P, "Function", {
        bind: function(e) {
            var t = m(this)
              , n = k.call(arguments, 1)
              , i = function() {
                var r = n.concat(k.call(arguments));
                return this instanceof i ? V(t, r.length, r) : d(t, r, e)
            };
            return v(t.prototype) && (i.prototype = t.prototype),
            i
        }
    }),
    o(o.P + o.F * f(function() {
        l && k.call(l)
    }), "Array", {
        slice: function(e, t) {
            var n = w(this.length)
              , i = h(this);
            if (t = void 0 === t ? n : t,
            "Array" == i)
                return k.call(this, e, t);
            for (var r = x(e, n), o = x(t, n), a = w(o - r), s = Array(a), l = 0; a > l; l++)
                s[l] = "String" == i ? this.charAt(r + l) : this[r + l];
            return s
        }
    }),
    o(o.P + o.F * (_ != Object), "Array", {
        join: function(e) {
            return A.call(_(this), void 0 === e ? "," : e)
        }
    }),
    o(o.S, "Array", {
        isArray: n(229)
    });
    var z = function(e) {
        return function(t, n) {
            m(t);
            var i = _(this)
              , r = w(i.length)
              , o = e ? r - 1 : 0
              , a = e ? -1 : 1;
            if (arguments.length < 2)
                for (; ; ) {
                    if (o in i) {
                        n = i[o],
                        o += a;
                        break
                    }
                    if (o += a,
                    e ? 0 > o : o >= r)
                        throw TypeError("Reduce of empty array with no initial value")
                }
            for (; e ? o >= 0 : r > o; o += a)
                o in i && (n = t(n, i[o], o, this));
            return n
        }
    }
      , U = function(e) {
        return function(t) {
            return e(this, t, arguments[1])
        }
    };
    o(o.P, "Array", {
        forEach: r.each = r.each || U(M(0)),
        map: U(M(1)),
        filter: U(M(2)),
        some: U(M(3)),
        every: U(M(4)),
        reduce: z(!1),
        reduceRight: z(!0),
        indexOf: U(C),
        lastIndexOf: function(e, t) {
            var n = y(this)
              , i = w(n.length)
              , r = i - 1;
            for (arguments.length > 1 && (r = Math.min(r, b(t))),
            0 > r && (r = w(i + r)); r >= 0; r--)
                if (r in n && n[r] === e)
                    return r;
            return -1
        }
    }),
    o(o.S, "Date", {
        now: function() {
            return +new Date
        }
    });
    var H = function(e) {
        return e > 9 ? e : "0" + e
    };
    o(o.P + o.F * (f(function() {
        return "0385-07-25T07:06:39.999Z" != new Date(-5e13 - 1).toISOString()
    }) || !f(function() {
        new Date(NaN).toISOString()
    })), "Date", {
        toISOString: function() {
            if (!isFinite(this))
                throw RangeError("Invalid time value");
            var e = this
              , t = e.getUTCFullYear()
              , n = e.getUTCMilliseconds()
              , i = 0 > t ? "-" : t > 9999 ? "+" : "";
            return i + ("00000" + Math.abs(t)).slice(i ? -6 : -4) + "-" + H(e.getUTCMonth() + 1) + "-" + H(e.getUTCDate()) + "T" + H(e.getUTCHours()) + ":" + H(e.getUTCMinutes()) + ":" + H(e.getUTCSeconds()) + "." + (n > 99 ? n : "0" + H(n)) + "Z"
        }
    })
}
, 35, function(e, t, n) {
    var i = n(203)
      , r = n(204)
      , o = n(205)
      , a = n(209)
      , s = n(211)
      , l = "prototype"
      , c = function(e, t, n) {
        var u, h, d, f, p = e & c.F, m = e & c.G, v = e & c.S, g = e & c.P, y = e & c.B, b = m ? i : v ? i[t] || (i[t] = {}) : (i[t] || {})[l], x = m ? r : r[t] || (r[t] = {}), w = x[l] || (x[l] = {});
        m && (n = t);
        for (u in n)
            h = !p && b && u in b,
            d = (h ? b : n)[u],
            f = y && h ? s(d, i) : g && "function" == typeof d ? s(Function.call, d) : d,
            b && !h && a(b, u, d),
            x[u] != d && o(x, u, f),
            g && w[u] != d && (w[u] = d)
    };
    i.core = r,
    c.F = 1,
    c.G = 2,
    c.S = 4,
    c.P = 8,
    c.B = 16,
    c.W = 32,
    e.exports = c
}
, 29, 30, [440, 201, 206, 207], 36, [441, 208], 38, function(e, t, n) {
    var i = n(203)
      , r = n(205)
      , o = n(210)("src")
      , a = "toString"
      , s = Function[a]
      , l = ("" + s).split(a);
    n(204).inspectSource = function(e) {
        return s.call(e)
    }
    ,
    (e.exports = function(e, t, n, a) {
        "function" == typeof n && (n.hasOwnProperty(o) || r(n, o, e[t] ? "" + e[t] : l.join(String(t))),
        n.hasOwnProperty("name") || r(n, "name", t)),
        e === i ? e[t] = n : (a || delete e[t],
        r(e, t, n))
    }
    )(Function.prototype, a, function() {
        return "function" == typeof this && this[o] || s.call(this)
    })
}
, 45, [439, 212], 32, [461, 203], [462, 215, 203], 55, 39, 52, 68, [451, 215], [475, 221], 25, [447, 223, 221], [448, 217], 24, function(e, t, n) {
    var i = n(224)
      , r = Math.max
      , o = Math.min;
    e.exports = function(e, t) {
        return e = i(e),
        0 > e ? r(e + t, 0) : o(e, t)
    }
}
, [455, 224], function(e, t, n) {
    var i = n(211)
      , r = n(223)
      , o = n(220)
      , a = n(226)
      , s = n(228);
    e.exports = function(e) {
        var t = 1 == e
          , n = 2 == e
          , l = 3 == e
          , c = 4 == e
          , u = 6 == e
          , h = 5 == e || u;
        return function(d, f, p) {
            for (var m, v, g = o(d), y = r(g), b = i(f, p, 3), x = a(y.length), w = 0, _ = t ? s(d, x) : n ? s(d, 0) : void 0; x > w; w++)
                if ((h || w in y) && (m = y[w],
                v = b(m, w, g),
                e))
                    if (t)
                        _[w] = v;
                    else if (v)
                        switch (e) {
                        case 3:
                            return !0;
                        case 5:
                            return m;
                        case 6:
                            return w;
                        case 2:
                            _.push(m)
                        }
                    else if (c)
                        return !1;
            return u ? -1 : l || c ? c : _
        }
    }
}
, function(e, t, n) {
    var i = n(215)
      , r = n(229)
      , o = n(230)("species");
    e.exports = function(e, t) {
        var n;
        return r(e) && (n = e.constructor,
        "function" != typeof n || n !== Array && !r(n.prototype) || (n = void 0),
        i(n) && (n = n[o],
        null === n && (n = void 0))),
        new (void 0 === n ? Array : n)(t)
    }
}
, [472, 217], [444, 231, 210, 203], [445, 203], function(e, t, n) {
    var i = n(222)
      , r = n(226)
      , o = n(225);
    e.exports = function(e) {
        return function(t, n, a) {
            var s, l = i(t), c = r(l.length), u = o(a, c);
            if (e && n != n) {
                for (; c > u; )
                    if (s = l[u++],
                    s != s)
                        return !0
            } else
                for (; c > u; u++)
                    if ((e || u in l) && l[u] === n)
                        return e || u;
            return !e && -1
        }
    }
}
, [468, 201, 203, 216, 207, 202, 209, 208, 231, 234, 210, 230, 235, 236, 237, 229, 219, 222, 206, 238], [443, 201, 216, 230], [469, 201, 222], [470, 222, 201], [471, 201], function(e, t) {
    e.exports = !1
}
, [481, 202, 240], [482, 201, 220, 223, 208], function(e, t, n) {
    var i = n(202);
    i(i.S, "Object", {
        is: n(242)
    })
}
, 64, [467, 202, 244], [457, 201, 215, 219, 211], function(e, t, n) {
    "use strict";
    var i = n(246)
      , r = {};
    r[n(230)("toStringTag")] = "z",
    r + "" != "[object z]" && n(209)(Object.prototype, "toString", function() {
        return "[object " + i(this) + "]"
    }, !0)
}
, [450, 217, 230], [473, 215, 248], [466, 202, 204, 208], function(e, t, n) {
    var i = n(215);
    n(248)("seal", function(e) {
        return function(t) {
            return e && i(t) ? e(t) : t
        }
    })
}
, function(e, t, n) {
    var i = n(215);
    n(248)("preventExtensions", function(e) {
        return function(t) {
            return e && i(t) ? e(t) : t
        }
    })
}
, function(e, t, n) {
    var i = n(215);
    n(248)("isFrozen", function(e) {
        return function(t) {
            return i(t) ? e ? e(t) : !1 : !0
        }
    })
}
, function(e, t, n) {
    var i = n(215);
    n(248)("isSealed", function(e) {
        return function(t) {
            return i(t) ? e ? e(t) : !1 : !0
        }
    })
}
, function(e, t, n) {
    var i = n(215);
    n(248)("isExtensible", function(e) {
        return function(t) {
            return i(t) ? e ? e(t) : !0 : !1
        }
    })
}
, [465, 222, 248], function(e, t, n) {
    var i = n(220);
    n(248)("getPrototypeOf", function(e) {
        return function(t) {
            return e(i(t))
        }
    })
}
, [476, 220, 248], function(e, t, n) {
    n(248)("getOwnPropertyNames", function() {
        return n(236).get
    })
}
, function(e, t, n) {
    var i = n(201).setDesc
      , r = n(206)
      , o = n(216)
      , a = Function.prototype
      , s = /^\s*function ([^ (]*)/
      , l = "name";
    l in a || n(207) && i(a, l, {
        configurable: !0,
        get: function() {
            var e = ("" + this).match(s)
              , t = e ? e[1] : "";
            return o(this, l) || i(this, l, r(5, t)),
            t
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(201)
      , r = n(215)
      , o = n(230)("hasInstance")
      , a = Function.prototype;
    o in a || i.setDesc(a, o, {
        value: function(e) {
            if ("function" != typeof this || !r(e))
                return !1;
            if (!r(this.prototype))
                return e instanceof this;
            for (; e = i.getProto(e); )
                if (this.prototype === e)
                    return !0;
            return !1
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(201)
      , r = n(203)
      , o = n(216)
      , a = n(217)
      , s = n(261)
      , l = n(208)
      , c = n(262).trim
      , u = "Number"
      , h = r[u]
      , d = h
      , f = h.prototype
      , p = a(i.create(f)) == u
      , m = "trim"in String.prototype
      , v = function(e) {
        var t = s(e, !1);
        if ("string" == typeof t && t.length > 2) {
            t = m ? t.trim() : c(t, 3);
            var n, i, r, o = t.charCodeAt(0);
            if (43 === o || 45 === o) {
                if (n = t.charCodeAt(2),
                88 === n || 120 === n)
                    return NaN
            } else if (48 === o) {
                switch (t.charCodeAt(1)) {
                case 66:
                case 98:
                    i = 2,
                    r = 49;
                    break;
                case 79:
                case 111:
                    i = 8,
                    r = 55;
                    break;
                default:
                    return +t
                }
                for (var a, l = t.slice(2), u = 0, h = l.length; h > u; u++)
                    if (a = l.charCodeAt(u),
                    48 > a || a > r)
                        return NaN;
                return parseInt(l, i)
            }
        }
        return +t
    };
    h(" 0o1") && h("0b1") && !h("+0x1") || (h = function(e) {
        var t = arguments.length < 1 ? 0 : e
          , n = this;
        return n instanceof h && (p ? l(function() {
            f.valueOf.call(n)
        }) : a(n) != u) ? new d(v(t)) : v(t)
    }
    ,
    i.each.call(n(207) ? i.getNames(d) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), function(e) {
        o(d, e) && !o(h, e) && i.setDesc(h, e, i.getDesc(d, e))
    }),
    h.prototype = f,
    f.constructor = h,
    n(209)(r, u, h))
}
, function(e, t, n) {
    var i = n(215);
    e.exports = function(e, t) {
        if (!i(e))
            return e;
        var n, r;
        if (t && "function" == typeof (n = e.toString) && !i(r = n.call(e)))
            return r;
        if ("function" == typeof (n = e.valueOf) && !i(r = n.call(e)))
            return r;
        if (!t && "function" == typeof (n = e.toString) && !i(r = n.call(e)))
            return r;
        throw TypeError("Can't convert object to primitive value")
    }
}
, function(e, t, n) {
    var i = n(202)
      , r = n(221)
      , o = n(208)
      , a = "	\n\f\r \u2028\u2029\ufeff"
      , s = "[" + a + "]"
      , l = ""
      , c = RegExp("^" + s + s + "*")
      , u = RegExp(s + s + "*$")
      , h = function(e, t) {
        var n = {};
        n[e] = t(d),
        i(i.P + i.F * o(function() {
            return !!a[e]() || l[e]() != l
        }), "String", n)
    }
      , d = h.trim = function(e, t) {
        return e = String(r(e)),
        1 & t && (e = e.replace(c, "")),
        2 & t && (e = e.replace(u, "")),
        e
    }
    ;
    e.exports = h
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        EPSILON: Math.pow(2, -52)
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(203).isFinite;
    i(i.S, "Number", {
        isFinite: function(e) {
            return "number" == typeof e && r(e)
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        isInteger: n(266)
    })
}
, function(e, t, n) {
    var i = n(215)
      , r = Math.floor;
    e.exports = function(e) {
        return !i(e) && isFinite(e) && r(e) === e
    }
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        isNaN: function(e) {
            return e != e
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(266)
      , o = Math.abs;
    i(i.S, "Number", {
        isSafeInteger: function(e) {
            return r(e) && o(e) <= 9007199254740991
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        MAX_SAFE_INTEGER: 9007199254740991
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        MIN_SAFE_INTEGER: -9007199254740991
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        parseFloat: parseFloat
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Number", {
        parseInt: parseInt
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(274)
      , o = Math.sqrt
      , a = Math.acosh;
    i(i.S + i.F * !(a && 710 == Math.floor(a(Number.MAX_VALUE))), "Math", {
        acosh: function(e) {
            return (e = +e) < 1 ? NaN : e > 94906265.62425156 ? Math.log(e) + Math.LN2 : r(e - 1 + o(e - 1) * o(e + 1))
        }
    })
}
, function(e, t) {
    e.exports = Math.log1p || function(e) {
        return (e = +e) > -1e-8 && 1e-8 > e ? e - e * e / 2 : Math.log(1 + e)
    }
}
, function(e, t, n) {
    function i(e) {
        return isFinite(e = +e) && 0 != e ? 0 > e ? -i(-e) : Math.log(e + Math.sqrt(e * e + 1)) : e
    }
    var r = n(202);
    r(r.S, "Math", {
        asinh: i
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        atanh: function(e) {
            return 0 == (e = +e) ? e : Math.log((1 + e) / (1 - e)) / 2
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(278);
    i(i.S, "Math", {
        cbrt: function(e) {
            return r(e = +e) * Math.pow(Math.abs(e), 1 / 3)
        }
    })
}
, function(e, t) {
    e.exports = Math.sign || function(e) {
        return 0 == (e = +e) || e != e ? e : 0 > e ? -1 : 1
    }
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        clz32: function(e) {
            return (e >>>= 0) ? 31 - Math.floor(Math.log(e + .5) * Math.LOG2E) : 32
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = Math.exp;
    i(i.S, "Math", {
        cosh: function(e) {
            return (r(e = +e) + r(-e)) / 2
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        expm1: n(282)
    })
}
, function(e, t) {
    e.exports = Math.expm1 || function(e) {
        return 0 == (e = +e) ? e : e > -1e-6 && 1e-6 > e ? e + e * e / 2 : Math.exp(e) - 1
    }
}
, function(e, t, n) {
    var i = n(202)
      , r = n(278)
      , o = Math.pow
      , a = o(2, -52)
      , s = o(2, -23)
      , l = o(2, 127) * (2 - s)
      , c = o(2, -126)
      , u = function(e) {
        return e + 1 / a - 1 / a
    };
    i(i.S, "Math", {
        fround: function(e) {
            var t, n, i = Math.abs(e), o = r(e);
            return c > i ? o * u(i / c / s) * c * s : (t = (1 + s / a) * i,
            n = t - (t - i),
            n > l || n != n ? o * (1 / 0) : o * n)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = Math.abs;
    i(i.S, "Math", {
        hypot: function(e, t) {
            for (var n, i, o = 0, a = 0, s = arguments, l = s.length, c = 0; l > a; )
                n = r(s[a++]),
                n > c ? (i = c / n,
                o = o * i * i + 1,
                c = n) : n > 0 ? (i = n / c,
                o += i * i) : o += n;
            return c === 1 / 0 ? 1 / 0 : c * Math.sqrt(o)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = Math.imul;
    i(i.S + i.F * n(208)(function() {
        return -5 != r(4294967295, 5) || 2 != r.length
    }), "Math", {
        imul: function(e, t) {
            var n = 65535
              , i = +e
              , r = +t
              , o = n & i
              , a = n & r;
            return 0 | o * a + ((n & i >>> 16) * a + o * (n & r >>> 16) << 16 >>> 0)
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        log10: function(e) {
            return Math.log(e) / Math.LN10
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        log1p: n(274)
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        log2: function(e) {
            return Math.log(e) / Math.LN2
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        sign: n(278)
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(282)
      , o = Math.exp;
    i(i.S + i.F * n(208)(function() {
        return -2e-17 != !Math.sinh(-2e-17)
    }), "Math", {
        sinh: function(e) {
            return Math.abs(e = +e) < 1 ? (r(e) - r(-e)) / 2 : (o(e - 1) - o(-e - 1)) * (Math.E / 2)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(282)
      , o = Math.exp;
    i(i.S, "Math", {
        tanh: function(e) {
            var t = r(e = +e)
              , n = r(-e);
            return t == 1 / 0 ? 1 : n == 1 / 0 ? -1 : (t - n) / (o(e) + o(-e))
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Math", {
        trunc: function(e) {
            return (e > 0 ? Math.floor : Math.ceil)(e)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(225)
      , o = String.fromCharCode
      , a = String.fromCodePoint;
    i(i.S + i.F * (!!a && 1 != a.length), "String", {
        fromCodePoint: function(e) {
            for (var t, n = [], i = arguments, a = i.length, s = 0; a > s; ) {
                if (t = +i[s++],
                r(t, 1114111) !== t)
                    throw RangeError(t + " is not a valid code point");
                n.push(65536 > t ? o(t) : o(((t -= 65536) >> 10) + 55296, t % 1024 + 56320))
            }
            return n.join("")
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(222)
      , o = n(226);
    i(i.S, "String", {
        raw: function(e) {
            for (var t = r(e.raw), n = o(t.length), i = arguments, a = i.length, s = [], l = 0; n > l; )
                s.push(String(t[l++])),
                a > l && s.push(String(i[l]));
            return s.join("")
        }
    })
}
, function(e, t, n) {
    "use strict";
    n(262)("trim", function(e) {
        return function() {
            return e(this, 3)
        }
    })
}
, [436, 297, 298], [437, 224, 221], [438, 238, 202, 209, 205, 216, 299, 300, 234, 201, 230], 40, [442, 201, 206, 234, 205, 230], function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(297)(!1);
    i(i.P, "String", {
        codePointAt: function(e) {
            return r(this, e)
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(226)
      , o = n(303)
      , a = "endsWith"
      , s = ""[a];
    i(i.P + i.F * n(305)(a), "String", {
        endsWith: function(e) {
            var t = o(this, e, a)
              , n = arguments
              , i = n.length > 1 ? n[1] : void 0
              , l = r(t.length)
              , c = void 0 === i ? l : Math.min(r(i), l)
              , u = String(e);
            return s ? s.call(t, u, c) : t.slice(c - u.length, c) === u
        }
    })
}
, function(e, t, n) {
    var i = n(304)
      , r = n(221);
    e.exports = function(e, t, n) {
        if (i(t))
            throw TypeError("String#" + n + " doesn't accept regex!");
        return String(r(e))
    }
}
, function(e, t, n) {
    var i = n(215)
      , r = n(217)
      , o = n(230)("match");
    e.exports = function(e) {
        var t;
        return i(e) && (void 0 !== (t = e[o]) ? !!t : "RegExp" == r(e))
    }
}
, function(e, t, n) {
    var i = n(230)("match");
    e.exports = function(e) {
        var t = /./;
        try {
            "/./"[e](t)
        } catch (n) {
            try {
                return t[i] = !1,
                !"/./"[e](t)
            } catch (r) {}
        }
        return !0
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(303)
      , o = "includes";
    i(i.P + i.F * n(305)(o), "String", {
        includes: function(e) {
            return !!~r(this, e, o).indexOf(e, arguments.length > 1 ? arguments[1] : void 0)
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.P, "String", {
        repeat: n(308)
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(224)
      , r = n(221);
    e.exports = function(e) {
        var t = String(r(this))
          , n = ""
          , o = i(e);
        if (0 > o || o == 1 / 0)
            throw RangeError("Count can't be negative");
        for (; o > 0; (o >>>= 1) && (t += t))
            1 & o && (n += t);
        return n
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(226)
      , o = n(303)
      , a = "startsWith"
      , s = ""[a];
    i(i.P + i.F * n(305)(a), "String", {
        startsWith: function(e) {
            var t = o(this, e, a)
              , n = arguments
              , i = r(Math.min(n.length > 1 ? n[1] : void 0, t.length))
              , l = String(e);
            return s ? s.call(t, l, i) : t.slice(i, i + l.length) === l
        }
    })
}
, [474, 211, 202, 220, 311, 312, 226, 313, 314], [453, 219], [454, 299, 230], [456, 246, 230, 299, 204], [464, 230], function(e, t, n) {
    "use strict";
    var i = n(202);
    i(i.S + i.F * n(208)(function() {
        function e() {}
        return !(Array.of.call(e)instanceof e)
    }), "Array", {
        of: function() {
            for (var e = 0, t = arguments, n = t.length, i = new ("function" == typeof this ? this : Array)(n); n > e; )
                i[e] = t[e++];
            return i.length = n,
            i
        }
    })
}
, [446, 317, 318, 299, 222, 298], function(e, t, n) {
    var i = n(230)("unscopables")
      , r = Array.prototype;
    void 0 == r[i] && n(205)(r, i, {}),
    e.exports = function(e) {
        r[i][e] = !0
    }
}
, 49, function(e, t, n) {
    n(320)("Array")
}
, function(e, t, n) {
    "use strict";
    var i = n(203)
      , r = n(201)
      , o = n(207)
      , a = n(230)("species");
    e.exports = function(e) {
        var t = i[e];
        o && t && !t[a] && r.setDesc(t, a, {
            configurable: !0,
            get: function() {
                return this
            }
        })
    }
}
, function(e, t, n) {
    var i = n(202);
    i(i.P, "Array", {
        copyWithin: n(322)
    }),
    n(317)("copyWithin")
}
, function(e, t, n) {
    "use strict";
    var i = n(220)
      , r = n(225)
      , o = n(226);
    e.exports = [].copyWithin || function(e, t) {
        var n = i(this)
          , a = o(n.length)
          , s = r(e, a)
          , l = r(t, a)
          , c = arguments
          , u = c.length > 2 ? c[2] : void 0
          , h = Math.min((void 0 === u ? a : r(u, a)) - l, a - s)
          , d = 1;
        for (s > l && l + h > s && (d = -1,
        l += h - 1,
        s += h - 1); h-- > 0; )
            l in n ? n[s] = n[l] : delete n[s],
            s += d,
            l += d;
        return n
    }
}
, function(e, t, n) {
    var i = n(202);
    i(i.P, "Array", {
        fill: n(324)
    }),
    n(317)("fill")
}
, function(e, t, n) {
    "use strict";
    var i = n(220)
      , r = n(225)
      , o = n(226);
    e.exports = [].fill || function(e) {
        for (var t = i(this), n = o(t.length), a = arguments, s = a.length, l = r(s > 1 ? a[1] : void 0, n), c = s > 2 ? a[2] : void 0, u = void 0 === c ? n : r(c, n); u > l; )
            t[l++] = e;
        return t
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(227)(5)
      , o = "find"
      , a = !0;
    o in [] && Array(1)[o](function() {
        a = !1
    }),
    i(i.P + i.F * a, "Array", {
        find: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }),
    n(317)(o)
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(227)(6)
      , o = "findIndex"
      , a = !0;
    o in [] && Array(1)[o](function() {
        a = !1
    }),
    i(i.P + i.F * a, "Array", {
        findIndex: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }),
    n(317)(o)
}
, function(e, t, n) {
    var i = n(201)
      , r = n(203)
      , o = n(304)
      , a = n(328)
      , s = r.RegExp
      , l = s
      , c = s.prototype
      , u = /a/g
      , h = /a/g
      , d = new s(u) !== u;
    !n(207) || d && !n(208)(function() {
        return h[n(230)("match")] = !1,
        s(u) != u || s(h) == h || "/a/i" != s(u, "i")
    }) || (s = function(e, t) {
        var n = o(e)
          , i = void 0 === t;
        return this instanceof s || !n || e.constructor !== s || !i ? d ? new l(n && !i ? e.source : e,t) : l((n = e instanceof s) ? e.source : e, n && i ? a.call(e) : t) : e
    }
    ,
    i.each.call(i.getNames(l), function(e) {
        e in s || i.setDesc(s, e, {
            configurable: !0,
            get: function() {
                return l[e]
            },
            set: function(t) {
                l[e] = t
            }
        })
    }),
    c.constructor = s,
    s.prototype = c,
    n(209)(r, "RegExp", s)),
    n(320)("RegExp")
}
, function(e, t, n) {
    "use strict";
    var i = n(219);
    e.exports = function() {
        var e = i(this)
          , t = "";
        return e.global && (t += "g"),
        e.ignoreCase && (t += "i"),
        e.multiline && (t += "m"),
        e.unicode && (t += "u"),
        e.sticky && (t += "y"),
        t
    }
}
, function(e, t, n) {
    var i = n(201);
    n(207) && "g" != /./g.flags && i.setDesc(RegExp.prototype, "flags", {
        configurable: !0,
        get: n(328)
    })
}
, function(e, t, n) {
    n(331)("match", 1, function(e, t) {
        return function(n) {
            "use strict";
            var i = e(this)
              , r = void 0 == n ? void 0 : n[t];
            return void 0 !== r ? r.call(n, i) : new RegExp(n)[t](String(i))
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(205)
      , r = n(209)
      , o = n(208)
      , a = n(221)
      , s = n(230);
    e.exports = function(e, t, n) {
        var l = s(e)
          , c = ""[e];
        o(function() {
            var t = {};
            return t[l] = function() {
                return 7
            }
            ,
            7 != ""[e](t)
        }) && (r(String.prototype, e, n(a, l, c)),
        i(RegExp.prototype, l, 2 == t ? function(e, t) {
            return c.call(e, this, t)
        }
        : function(e) {
            return c.call(e, this)
        }
        ))
    }
}
, function(e, t, n) {
    n(331)("replace", 2, function(e, t, n) {
        return function(i, r) {
            "use strict";
            var o = e(this)
              , a = void 0 == i ? void 0 : i[t];
            return void 0 !== a ? a.call(i, o, r) : n.call(String(o), i, r)
        }
    })
}
, function(e, t, n) {
    n(331)("search", 1, function(e, t) {
        return function(n) {
            "use strict";
            var i = e(this)
              , r = void 0 == n ? void 0 : n[t];
            return void 0 !== r ? r.call(n, i) : new RegExp(n)[t](String(i))
        }
    })
}
, function(e, t, n) {
    n(331)("split", 2, function(e, t, n) {
        return function(i, r) {
            "use strict";
            var o = e(this)
              , a = void 0 == i ? void 0 : i[t];
            return void 0 !== a ? a.call(i, o, r) : n.call(String(o), i, r)
        }
    })
}
, [449, 201, 238, 203, 211, 246, 202, 215, 219, 212, 336, 337, 244, 242, 230, 338, 339, 207, 341, 234, 320, 204, 314], 57, [452, 211, 311, 312, 219, 226, 313], [458, 219, 212, 230], [459, 203, 340, 217], [460, 211, 218, 213, 214, 203, 217], [463, 209], [477, 343, 344], [478, 201, 205, 341, 211, 336, 221, 337, 298, 318, 210, 216, 215, 320, 207], function(e, t, n) {
    "use strict";
    var i = n(203)
      , r = n(202)
      , o = n(209)
      , a = n(341)
      , s = n(337)
      , l = n(336)
      , c = n(215)
      , u = n(208)
      , h = n(314)
      , d = n(234);
    e.exports = function(e, t, n, f, p, m) {
        var v = i[e]
          , g = v
          , y = p ? "set" : "add"
          , b = g && g.prototype
          , x = {}
          , w = function(e) {
            var t = b[e];
            o(b, e, "delete" == e ? function(e) {
                return m && !c(e) ? !1 : t.call(this, 0 === e ? 0 : e)
            }
            : "has" == e ? function(e) {
                return m && !c(e) ? !1 : t.call(this, 0 === e ? 0 : e)
            }
            : "get" == e ? function(e) {
                return m && !c(e) ? void 0 : t.call(this, 0 === e ? 0 : e)
            }
            : "add" == e ? function(e) {
                return t.call(this, 0 === e ? 0 : e),
                this
            }
            : function(e, n) {
                return t.call(this, 0 === e ? 0 : e, n),
                this
            }
            )
        };
        if ("function" == typeof g && (m || b.forEach && !u(function() {
            (new g).entries().next()
        }))) {
            var _, S = new g, M = S[y](m ? {} : -0, 1) != S, C = u(function() {
                S.has(1)
            }), T = h(function(e) {
                new g(e)
            });
            T || (g = t(function(t, n) {
                l(t, g, e);
                var i = new v;
                return void 0 != n && s(n, p, i[y], i),
                i
            }),
            g.prototype = b,
            b.constructor = g),
            m || S.forEach(function(e, t) {
                _ = 1 / t === -(1 / 0)
            }),
            (C || _) && (w("delete"),
            w("has"),
            p && w("get")),
            (_ || M) && w(y),
            m && b.clear && delete b.clear
        } else
            g = f.getConstructor(t, e, p, y),
            a(g.prototype, n);
        return d(g, e),
        x[e] = g,
        r(r.G + r.W + r.F * (g != v), x),
        m || f.setStrong(g, e, p),
        g
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(343);
    n(344)("Set", function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }, {
        add: function(e) {
            return i.def(this, e = 0 === e ? 0 : e, e)
        }
    }, i)
}
, function(e, t, n) {
    "use strict";
    var i = n(201)
      , r = n(209)
      , o = n(347)
      , a = n(215)
      , s = n(216)
      , l = o.frozenStore
      , c = o.WEAK
      , u = Object.isExtensible || a
      , h = {}
      , d = n(344)("WeakMap", function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }, {
        get: function(e) {
            if (a(e)) {
                if (!u(e))
                    return l(this).get(e);
                if (s(e, c))
                    return e[c][this._i]
            }
        },
        set: function(e, t) {
            return o.def(this, e, t)
        }
    }, o, !0, !0);
    7 != (new d).set((Object.freeze || Object)(h), 7).get(h) && i.each.call(["delete", "has", "get", "set"], function(e) {
        var t = d.prototype
          , n = t[e];
        r(t, e, function(t, i) {
            if (a(t) && !u(t)) {
                var r = l(this)[e](t, i);
                return "set" == e ? this : r
            }
            return n.call(this, t, i)
        })
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(205)
      , r = n(341)
      , o = n(219)
      , a = n(215)
      , s = n(336)
      , l = n(337)
      , c = n(227)
      , u = n(216)
      , h = n(210)("weak")
      , d = Object.isExtensible || a
      , f = c(5)
      , p = c(6)
      , m = 0
      , v = function(e) {
        return e._l || (e._l = new g)
    }
      , g = function() {
        this.a = []
    }
      , y = function(e, t) {
        return f(e.a, function(e) {
            return e[0] === t
        })
    };
    g.prototype = {
        get: function(e) {
            var t = y(this, e);
            return t ? t[1] : void 0
        },
        has: function(e) {
            return !!y(this, e)
        },
        set: function(e, t) {
            var n = y(this, e);
            n ? n[1] = t : this.a.push([e, t])
        },
        "delete": function(e) {
            var t = p(this.a, function(t) {
                return t[0] === e
            });
            return ~t && this.a.splice(t, 1),
            !!~t
        }
    },
    e.exports = {
        getConstructor: function(e, t, n, i) {
            var o = e(function(e, r) {
                s(e, o, t),
                e._i = m++,
                e._l = void 0,
                void 0 != r && l(r, n, e[i], e)
            });
            return r(o.prototype, {
                "delete": function(e) {
                    return a(e) ? d(e) ? u(e, h) && u(e[h], this._i) && delete e[h][this._i] : v(this)["delete"](e) : !1
                },
                has: function(e) {
                    return a(e) ? d(e) ? u(e, h) && u(e[h], this._i) : v(this).has(e) : !1
                }
            }),
            o
        },
        def: function(e, t, n) {
            return d(o(t)) ? (u(t, h) || i(t, h, {}),
            t[h][e._i] = n) : v(e).set(t, n),
            e
        },
        frozenStore: v,
        WEAK: h
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(347);
    n(344)("WeakSet", function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }, {
        add: function(e) {
            return i.def(this, e, !0)
        }
    }, i, !1, !0)
}
, function(e, t, n) {
    var i = n(202)
      , r = Function.apply;
    i(i.S, "Reflect", {
        apply: function(e, t, n) {
            return r.call(e, t, n)
        }
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(202)
      , o = n(212)
      , a = n(219)
      , s = n(215)
      , l = Function.bind || n(204).Function.prototype.bind;
    r(r.S + r.F * n(208)(function() {
        function e() {}
        return !(Reflect.construct(function() {}, [], e)instanceof e)
    }), "Reflect", {
        construct: function(e, t) {
            o(e);
            var n = arguments.length < 3 ? e : o(arguments[2]);
            if (e == n) {
                if (void 0 != t)
                    switch (a(t).length) {
                    case 0:
                        return new e;
                    case 1:
                        return new e(t[0]);
                    case 2:
                        return new e(t[0],t[1]);
                    case 3:
                        return new e(t[0],t[1],t[2]);
                    case 4:
                        return new e(t[0],t[1],t[2],t[3])
                    }
                var r = [null];
                return r.push.apply(r, t),
                new (l.apply(e, r))
            }
            var c = n.prototype
              , u = i.create(s(c) ? c : Object.prototype)
              , h = Function.apply.call(e, u, t);
            return s(h) ? h : u
        }
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(202)
      , o = n(219);
    r(r.S + r.F * n(208)(function() {
        Reflect.defineProperty(i.setDesc({}, 1, {
            value: 1
        }), 1, {
            value: 2
        })
    }), "Reflect", {
        defineProperty: function(e, t, n) {
            o(e);
            try {
                return i.setDesc(e, t, n),
                !0
            } catch (r) {
                return !1
            }
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(201).getDesc
      , o = n(219);
    i(i.S, "Reflect", {
        deleteProperty: function(e, t) {
            var n = r(o(e), t);
            return n && !n.configurable ? !1 : delete e[t]
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(219)
      , o = function(e) {
        this._t = r(e),
        this._i = 0;
        var t, n = this._k = [];
        for (t in e)
            n.push(t)
    };
    n(300)(o, "Object", function() {
        var e, t = this, n = t._k;
        do
            if (t._i >= n.length)
                return {
                    value: void 0,
                    done: !0
                };
        while (!((e = n[t._i++])in t._t));
        return {
            value: e,
            done: !1
        }
    }),
    i(i.S, "Reflect", {
        enumerate: function(e) {
            return new o(e)
        }
    })
}
, function(e, t, n) {
    function i(e, t) {
        var n, a, c = arguments.length < 3 ? e : arguments[2];
        return l(e) === c ? e[t] : (n = r.getDesc(e, t)) ? o(n, "value") ? n.value : void 0 !== n.get ? n.get.call(c) : void 0 : s(a = r.getProto(e)) ? i(a, t, c) : void 0
    }
    var r = n(201)
      , o = n(216)
      , a = n(202)
      , s = n(215)
      , l = n(219);
    a(a.S, "Reflect", {
        get: i
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(202)
      , o = n(219);
    r(r.S, "Reflect", {
        getOwnPropertyDescriptor: function(e, t) {
            return i.getDesc(o(e), t)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(201).getProto
      , o = n(219);
    i(i.S, "Reflect", {
        getPrototypeOf: function(e) {
            return r(o(e))
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Reflect", {
        has: function(e, t) {
            return t in e
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(219)
      , o = Object.isExtensible;
    i(i.S, "Reflect", {
        isExtensible: function(e) {
            return r(e),
            o ? o(e) : !0
        }
    })
}
, function(e, t, n) {
    var i = n(202);
    i(i.S, "Reflect", {
        ownKeys: n(360)
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(219)
      , o = n(203).Reflect;
    e.exports = o && o.ownKeys || function(e) {
        var t = i.getNames(r(e))
          , n = i.getSymbols;
        return n ? t.concat(n(e)) : t
    }
}
, function(e, t, n) {
    var i = n(202)
      , r = n(219)
      , o = Object.preventExtensions;
    i(i.S, "Reflect", {
        preventExtensions: function(e) {
            r(e);
            try {
                return o && o(e),
                !0
            } catch (t) {
                return !1
            }
        }
    })
}
, function(e, t, n) {
    function i(e, t, n) {
        var a, u, h = arguments.length < 4 ? e : arguments[3], d = r.getDesc(l(e), t);
        if (!d) {
            if (c(u = r.getProto(e)))
                return i(u, t, n, h);
            d = s(0)
        }
        return o(d, "value") ? d.writable !== !1 && c(h) ? (a = r.getDesc(h, t) || s(0),
        a.value = n,
        r.setDesc(h, t, a),
        !0) : !1 : void 0 === d.set ? !1 : (d.set.call(h, n),
        !0)
    }
    var r = n(201)
      , o = n(216)
      , a = n(202)
      , s = n(206)
      , l = n(219)
      , c = n(215);
    a(a.S, "Reflect", {
        set: i
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(244);
    r && i(i.S, "Reflect", {
        setPrototypeOf: function(e, t) {
            r.check(e, t);
            try {
                return r.set(e, t),
                !0
            } catch (n) {
                return !1
            }
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(232)(!0);
    i(i.P, "Array", {
        includes: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }),
    n(317)("includes")
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(297)(!0);
    i(i.P, "String", {
        at: function(e) {
            return r(this, e)
        }
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(367);
    i(i.P, "String", {
        padLeft: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0, !0)
        }
    })
}
, function(e, t, n) {
    var i = n(226)
      , r = n(308)
      , o = n(221);
    e.exports = function(e, t, n, a) {
        var s = String(o(e))
          , l = s.length
          , c = void 0 === n ? " " : String(n)
          , u = i(t);
        if (l >= u)
            return s;
        "" == c && (c = " ");
        var h = u - l
          , d = r.call(c, Math.ceil(h / c.length));
        return d.length > h && (d = d.slice(0, h)),
        a ? d + s : s + d
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(202)
      , r = n(367);
    i(i.P, "String", {
        padRight: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0, !1)
        }
    })
}
, function(e, t, n) {
    "use strict";
    n(262)("trimLeft", function(e) {
        return function() {
            return e(this, 1)
        }
    })
}
, function(e, t, n) {
    "use strict";
    n(262)("trimRight", function(e) {
        return function() {
            return e(this, 2)
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(372)(/[\\^$*+?.()|[\]{}]/g, "\\$&");
    i(i.S, "RegExp", {
        escape: function(e) {
            return r(e)
        }
    })
}
, function(e, t) {
    e.exports = function(e, t) {
        var n = t === Object(t) ? function(e) {
            return t[e]
        }
        : t;
        return function(t) {
            return String(t).replace(e, n)
        }
    }
}
, function(e, t, n) {
    var i = n(201)
      , r = n(202)
      , o = n(360)
      , a = n(222)
      , s = n(206);
    r(r.S, "Object", {
        getOwnPropertyDescriptors: function(e) {
            for (var t, n, r = a(e), l = i.setDesc, c = i.getDesc, u = o(r), h = {}, d = 0; u.length > d; )
                n = c(r, t = u[d++]),
                t in h ? l(h, t, s(0, n)) : h[t] = n;
            return h
        }
    })
}
, function(e, t, n) {
    var i = n(202)
      , r = n(375)(!1);
    i(i.S, "Object", {
        values: function(e) {
            return r(e)
        }
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(222)
      , o = i.isEnum;
    e.exports = function(e) {
        return function(t) {
            for (var n, a = r(t), s = i.getKeys(a), l = s.length, c = 0, u = []; l > c; )
                o.call(a, n = s[c++]) && u.push(e ? [n, a[n]] : a[n]);
            return u
        }
    }
}
, function(e, t, n) {
    var i = n(202)
      , r = n(375)(!0);
    i(i.S, "Object", {
        entries: function(e) {
            return r(e)
        }
    })
}
, [479, 202, 378], [480, 337, 246], function(e, t, n) {
    var i = n(202);
    i(i.P, "Set", {
        toJSON: n(378)("Set")
    })
}
, function(e, t, n) {
    var i = n(201)
      , r = n(202)
      , o = n(211)
      , a = n(204).Array || Array
      , s = {}
      , l = function(e, t) {
        i.each.call(e.split(","), function(e) {
            void 0 == t && e in a ? s[e] = a[e] : e in [] && (s[e] = o(Function.call, [][e], t))
        })
    };
    l("pop,reverse,shift,keys,values,entries", 1),
    l("indexOf,every,some,forEach,map,filter,find,findIndex,includes", 3),
    l("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),
    r(r.S, "Array", s)
}
, function(e, t, n) {
    var i = n(203)
      , r = n(202)
      , o = n(218)
      , a = n(382)
      , s = i.navigator
      , l = !!s && /MSIE .\./.test(s.userAgent)
      , c = function(e) {
        return l ? function(t, n) {
            return e(o(a, [].slice.call(arguments, 2), "function" == typeof t ? t : Function(t)), n)
        }
        : e
    };
    r(r.G + r.B + r.F * l, {
        setTimeout: c(i.setTimeout),
        setInterval: c(i.setInterval)
    })
}
, function(e, t, n) {
    "use strict";
    var i = n(383)
      , r = n(218)
      , o = n(212);
    e.exports = function() {
        for (var e = o(this), t = arguments.length, n = Array(t), a = 0, s = i._, l = !1; t > a; )
            (n[a] = arguments[a++]) === s && (l = !0);
        return function() {
            var i, o = this, a = arguments, c = a.length, u = 0, h = 0;
            if (!l && !c)
                return r(e, n, o);
            if (i = n.slice(),
            l)
                for (; t > u; u++)
                    i[u] === s && (i[u] = a[h++]);
            for (; c > h; )
                i.push(a[h++]);
            return r(e, i, o)
        }
    }
}
, function(e, t, n) {
    e.exports = n(203)
}
, function(e, t, n) {
    var i = n(202)
      , r = n(340);
    i(i.G + i.B, {
        setImmediate: r.set,
        clearImmediate: r.clear
    })
}
, function(e, t, n) {
    n(316);
    var i = n(203)
      , r = n(205)
      , o = n(299)
      , a = n(230)("iterator")
      , s = i.NodeList
      , l = i.HTMLCollection
      , c = s && s.prototype
      , u = l && l.prototype
      , h = o.NodeList = o.HTMLCollection = o.Array;
    c && !c[a] && r(c, a, h),
    u && !u[a] && r(u, a, h)
}
, function(e, t, n) {
    (function(t, n) {
        !function(t) {
            "use strict";
            function i(e, t, n, i) {
                var r = Object.create((t || o).prototype)
                  , a = new p(i || []);
                return r._invoke = h(e, n, a),
                r
            }
            function r(e, t, n) {
                try {
                    return {
                        type: "normal",
                        arg: e.call(t, n)
                    }
                } catch (i) {
                    return {
                        type: "throw",
                        arg: i
                    }
                }
            }
            function o() {}
            function a() {}
            function s() {}
            function l(e) {
                ["next", "throw", "return"].forEach(function(t) {
                    e[t] = function(e) {
                        return this._invoke(t, e)
                    }
                })
            }
            function c(e) {
                this.arg = e
            }
            function u(e) {
                function t(t, n) {
                    var i = e[t](n)
                      , r = i.value;
                    return r instanceof c ? Promise.resolve(r.arg).then(o, a) : Promise.resolve(r).then(function(e) {
                        return i.value = e,
                        i
                    })
                }
                function i(e, n) {
                    function i() {
                        return t(e, n)
                    }
                    return r = r ? r.then(i, i) : new Promise(function(e) {
                        e(i())
                    }
                    )
                }
                "object" == typeof n && n.domain && (t = n.domain.bind(t));
                var r, o = t.bind(e, "next"), a = t.bind(e, "throw");
                t.bind(e, "return");
                this._invoke = i
            }
            function h(e, t, n) {
                var i = _;
                return function(o, a) {
                    if (i === M)
                        throw new Error("Generator is already running");
                    if (i === C) {
                        if ("throw" === o)
                            throw a;
                        return v()
                    }
                    for (; ; ) {
                        var s = n.delegate;
                        if (s) {
                            if ("return" === o || "throw" === o && s.iterator[o] === g) {
                                n.delegate = null;
                                var l = s.iterator["return"];
                                if (l) {
                                    var c = r(l, s.iterator, a);
                                    if ("throw" === c.type) {
                                        o = "throw",
                                        a = c.arg;
                                        continue
                                    }
                                }
                                if ("return" === o)
                                    continue
                            }
                            var c = r(s.iterator[o], s.iterator, a);
                            if ("throw" === c.type) {
                                n.delegate = null,
                                o = "throw",
                                a = c.arg;
                                continue
                            }
                            o = "next",
                            a = g;
                            var u = c.arg;
                            if (!u.done)
                                return i = S,
                                u;
                            n[s.resultName] = u.value,
                            n.next = s.nextLoc,
                            n.delegate = null
                        }
                        if ("next" === o)
                            i === S ? n.sent = a : n.sent = g;
                        else if ("throw" === o) {
                            if (i === _)
                                throw i = C,
                                a;
                            n.dispatchException(a) && (o = "next",
                            a = g)
                        } else
                            "return" === o && n.abrupt("return", a);
                        i = M;
                        var c = r(e, t, n);
                        if ("normal" === c.type) {
                            i = n.done ? C : S;
                            var u = {
                                value: c.arg,
                                done: n.done
                            };
                            if (c.arg !== T)
                                return u;
                            n.delegate && "next" === o && (a = g)
                        } else
                            "throw" === c.type && (i = C,
                            o = "throw",
                            a = c.arg)
                    }
                }
            }
            function d(e) {
                var t = {
                    tryLoc: e[0]
                };
                1 in e && (t.catchLoc = e[1]),
                2 in e && (t.finallyLoc = e[2],
                t.afterLoc = e[3]),
                this.tryEntries.push(t)
            }
            function f(e) {
                var t = e.completion || {};
                t.type = "normal",
                delete t.arg,
                e.completion = t
            }
            function p(e) {
                this.tryEntries = [{
                    tryLoc: "root"
                }],
                e.forEach(d, this),
                this.reset(!0)
            }
            function m(e) {
                if (e) {
                    var t = e[b];
                    if (t)
                        return t.call(e);
                    if ("function" == typeof e.next)
                        return e;
                    if (!isNaN(e.length)) {
                        var n = -1
                          , i = function r() {
                            for (; ++n < e.length; )
                                if (y.call(e, n))
                                    return r.value = e[n],
                                    r.done = !1,
                                    r;
                            return r.value = g,
                            r.done = !0,
                            r
                        };
                        return i.next = i
                    }
                }
                return {
                    next: v
                }
            }
            function v() {
                return {
                    value: g,
                    done: !0
                }
            }
            var g, y = Object.prototype.hasOwnProperty, b = "function" == typeof Symbol && Symbol.iterator || "@@iterator", x = "object" == typeof e, w = t.regeneratorRuntime;
            if (w)
                return void (x && (e.exports = w));
            w = t.regeneratorRuntime = x ? e.exports : {},
            w.wrap = i;
            var _ = "suspendedStart"
              , S = "suspendedYield"
              , M = "executing"
              , C = "completed"
              , T = {}
              , E = s.prototype = o.prototype;
            a.prototype = E.constructor = s,
            s.constructor = a,
            a.displayName = "GeneratorFunction",
            w.isGeneratorFunction = function(e) {
                var t = "function" == typeof e && e.constructor;
                return t ? t === a || "GeneratorFunction" === (t.displayName || t.name) : !1
            }
            ,
            w.mark = function(e) {
                return Object.setPrototypeOf ? Object.setPrototypeOf(e, s) : e.__proto__ = s,
                e.prototype = Object.create(E),
                e
            }
            ,
            w.awrap = function(e) {
                return new c(e)
            }
            ,
            l(u.prototype),
            w.async = function(e, t, n, r) {
                var o = new u(i(e, t, n, r));
                return w.isGeneratorFunction(t) ? o : o.next().then(function(e) {
                    return e.done ? e.value : o.next()
                })
            }
            ,
            l(E),
            E[b] = function() {
                return this
            }
            ,
            E.toString = function() {
                return "[object Generator]"
            }
            ,
            w.keys = function(e) {
                var t = [];
                for (var n in e)
                    t.push(n);
                return t.reverse(),
                function i() {
                    for (; t.length; ) {
                        var n = t.pop();
                        if (n in e)
                            return i.value = n,
                            i.done = !1,
                            i
                    }
                    return i.done = !0,
                    i
                }
            }
            ,
            w.values = m,
            p.prototype = {
                constructor: p,
                reset: function(e) {
                    if (this.prev = 0,
                    this.next = 0,
                    this.sent = g,
                    this.done = !1,
                    this.delegate = null,
                    this.tryEntries.forEach(f),
                    !e)
                        for (var t in this)
                            "t" === t.charAt(0) && y.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = g)
                },
                stop: function() {
                    this.done = !0;
                    var e = this.tryEntries[0]
                      , t = e.completion;
                    if ("throw" === t.type)
                        throw t.arg;
                    return this.rval
                },
                dispatchException: function(e) {
                    function t(t, i) {
                        return o.type = "throw",
                        o.arg = e,
                        n.next = t,
                        !!i
                    }
                    if (this.done)
                        throw e;
                    for (var n = this, i = this.tryEntries.length - 1; i >= 0; --i) {
                        var r = this.tryEntries[i]
                          , o = r.completion;
                        if ("root" === r.tryLoc)
                            return t("end");
                        if (r.tryLoc <= this.prev) {
                            var a = y.call(r, "catchLoc")
                              , s = y.call(r, "finallyLoc");
                            if (a && s) {
                                if (this.prev < r.catchLoc)
                                    return t(r.catchLoc, !0);
                                if (this.prev < r.finallyLoc)
                                    return t(r.finallyLoc)
                            } else if (a) {
                                if (this.prev < r.catchLoc)
                                    return t(r.catchLoc, !0)
                            } else {
                                if (!s)
                                    throw new Error("try statement without catch or finally");
                                if (this.prev < r.finallyLoc)
                                    return t(r.finallyLoc)
                            }
                        }
                    }
                },
                abrupt: function(e, t) {
                    for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                        var i = this.tryEntries[n];
                        if (i.tryLoc <= this.prev && y.call(i, "finallyLoc") && this.prev < i.finallyLoc) {
                            var r = i;
                            break
                        }
                    }
                    r && ("break" === e || "continue" === e) && r.tryLoc <= t && t <= r.finallyLoc && (r = null);
                    var o = r ? r.completion : {};
                    return o.type = e,
                    o.arg = t,
                    r ? this.next = r.finallyLoc : this.complete(o),
                    T
                },
                complete: function(e, t) {
                    if ("throw" === e.type)
                        throw e.arg;
                    "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = e.arg,
                    this.next = "end") : "normal" === e.type && t && (this.next = t)
                },
                finish: function(e) {
                    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                        var n = this.tryEntries[t];
                        if (n.finallyLoc === e)
                            return this.complete(n.completion, n.afterLoc),
                            f(n),
                            T
                    }
                },
                "catch": function(e) {
                    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                        var n = this.tryEntries[t];
                        if (n.tryLoc === e) {
                            var i = n.completion;
                            if ("throw" === i.type) {
                                var r = i.arg;
                                f(n)
                            }
                            return r
                        }
                    }
                    throw new Error("illegal catch attempt")
                },
                delegateYield: function(e, t, n) {
                    return this.delegate = {
                        iterator: m(e),
                        resultName: t,
                        nextLoc: n
                    },
                    T
                }
            }
        }("object" == typeof t ? t : "object" == typeof window ? window : "object" == typeof self ? self : this)
    }
    ).call(t, function() {
        return this
    }(), n(387))
}
, function(e, t) {
    function n() {
        h && c && (h = !1,
        c.length ? u = c.concat(u) : d = -1,
        u.length && i())
    }
    function i() {
        if (!h) {
            var e = a(n);
            h = !0;
            for (var t = u.length; t; ) {
                for (c = u,
                u = []; ++d < t; )
                    c && c[d].run();
                d = -1,
                t = u.length
            }
            c = null,
            h = !1,
            s(e)
        }
    }
    function r(e, t) {
        this.fun = e,
        this.array = t
    }
    function o() {}
    var a, s, l = e.exports = {};
    !function() {
        try {
            a = setTimeout
        } catch (e) {
            a = function() {
                throw new Error("setTimeout is not defined")
            }
        }
        try {
            s = clearTimeout
        } catch (e) {
            s = function() {
                throw new Error("clearTimeout is not defined")
            }
        }
    }();
    var c, u = [], h = !1, d = -1;
    l.nextTick = function(e) {
        var t = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++)
                t[n - 1] = arguments[n];
        u.push(new r(e,t)),
        1 !== u.length || h || a(i, 0)
    }
    ,
    r.prototype.run = function() {
        this.fun.apply(null, this.array)
    }
    ,
    l.title = "browser",
    l.browser = !0,
    l.env = {},
    l.argv = [],
    l.version = "",
    l.versions = {},
    l.on = o,
    l.addListener = o,
    l.once = o,
    l.off = o,
    l.removeListener = o,
    l.removeAllListeners = o,
    l.emit = o,
    l.binding = function(e) {
        throw new Error("process.binding is not supported")
    }
    ,
    l.cwd = function() {
        return "/"
    }
    ,
    l.chdir = function(e) {
        throw new Error("process.chdir is not supported")
    }
    ,
    l.umask = function() {
        return 0
    }
}
, function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(97)["default"]
      , a = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(128)
      , l = (a(s),
    n(389))
      , c = "#1A324E"
      , u = "#3B97A6"
      , h = "#42EDF8"
      , d = o("Lights._disc")
      , f = o("Lights._elements")
      , p = o("Lights._hidden")
      , m = o("Lights._on")
      , v = o("Lights._elements")
      , g = function() {
        function e(t, n) {
            var i = arguments.length <= 2 || void 0 === arguments[2] ? {
                degraded: !1
            } : arguments[2];
            r(this, e),
            this[d] = t,
            this[v] = {
                root: n,
                lights: {
                    main: {
                        lights: n.querySelector(".lights__main-lights"),
                        glows: n.querySelector(".lights__main-glows")
                    },
                    selector: {
                        light: n.querySelector(".lights__selector-light"),
                        glow: n.querySelector(".lights__selector-glow")
                    }
                }
            },
            this._degradedAnimations = i.degraded,
            this[p] = !0,
            this[m] = !1,
            this[f]()
        }
        return i(e, [{
            key: f,
            value: function() {
                var e = this[v].lights.main.lights
                  , t = this[v].lights.main.glows
                  , n = this[v].lights.selector.light
                  , i = this[v].lights.selector.glow;
                e.style.opacity = 0,
                e.style.stroke = c,
                t.style.opacity = 0,
                n.style.opacity = 0,
                n.style.fill = c,
                i.style.opacity = 0
            }
        }, {
            key: "hidden",
            get: function() {
                return this[p]
            },
            set: function(e) {
                if (e !== this[p]) {
                    var t = this[v].lights.main.lights
                      , n = this[v].lights.selector.light;
                    e ? (t.style.opacity = 0,
                    n.style.opacity = 0) : (t.style.opacity = 1,
                    n.style.opacity = 1),
                    this[p] = e
                }
            }
        }, {
            key: "on",
            get: function() {
                return this[m]
            },
            set: function(e) {
                if (e !== this[m]) {
                    var t = this[v].lights.main.lights
                      , n = this[v].lights.main.glows
                      , i = this[v].lights.selector.light
                      , r = this[v].lights.selector.glow
                      , o = function() {
                        t.style.stroke = h,
                        n.style.opacity = 1,
                        i.style.fill = h,
                        r.style.opacity = 1
                    }
                      , a = function() {
                        t.style.stroke = c,
                        n.style.opacity = 0,
                        i.style.fill = c,
                        r.style.opacity = 0
                    }
                      , s = function() {
                        t.style.stroke = u,
                        n.style.opacity = 1,
                        i.style.fill = u,
                        r.style.opacity = 1
                    };
                    e ? (s(),
                    this._degradedAnimations ? l.delay(50).then(o) : l.delay(50).then(a).then(function(e) {
                        return l.delay(50)
                    }).then(s).then(function(e) {
                        return l.delay(50)
                    }).then(a).then(function(e) {
                        return l.delay(50)
                    }).then(o)) : a(),
                    this[m] = e
                }
            }
        }]),
        e
    }();
    t["default"] = g,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(19)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function(e) {
        return new i(function(t) {
            return setTimeout(t, e)
        }
        )
    };
    t.delay = r
}
, function(e, t) {}
, , , function(e, t, n) {
    "use strict";
    var i = n(93)["default"]
      , r = n(96)["default"]
      , o = n(19)["default"]
      , a = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(128)
      , l = a(s);
    n(394);
    var c = function() {
        function e() {
            var t = this;
            r(this, e),
            this._position = {
                x: 0,
                y: 0
            };
            var n = document.createElement("section");
            n.classList.add("location-marker"),
            this._eventTarget = document.createDocumentFragment(),
            this._elements = {
                root: n,
                link: document.createElement("a"),
                title: document.createElement("h1")
            },
            this._elements.link.href = "#",
            this._elements.link.appendChild(this._elements.title),
            n.appendChild(this._elements.link),
            this._elements.root.style.display = "none",
            this._hidden = !0,
            this._animationQueue = o.resolve(),
            this._elements.link.addEventListener("click", function(e) {
                e.stopPropagation(),
                e.preventDefault(),
                t._eventTarget.dispatchEvent(new CustomEvent("marker:click"))
            }, !1),
            this._elements.link.addEventListener("mouseenter", function(e) {
                e.stopPropagation(),
                e.preventDefault(),
                t._eventTarget.dispatchEvent(new CustomEvent("marker:mouseenter"))
            }, !1),
            this._elements.link.addEventListener("mouseleave", function(e) {
                e.stopPropagation(),
                e.preventDefault(),
                t._eventTarget.dispatchEvent(new CustomEvent("marker:mouseleave"))
            }, !1)
        }
        return i(e, [{
            key: "_showMarker",
            value: function() {
                var e = this;
                return new o(function(t) {
                    var n = new l["default"];
                    n.tween({
                        from: {
                            opacity: 0
                        },
                        to: {
                            opacity: 100
                        },
                        duration: 150,
                        start: function() {
                            e._elements.root.style.opacity = 0,
                            e._elements.root.style.display = "block"
                        },
                        step: function(t) {
                            var n = t.opacity;
                            e._elements.root.style.opacity = n / 100
                        },
                        finish: function() {
                            t()
                        }
                    })
                }
                )
            }
        }, {
            key: "_hideMarker",
            value: function() {
                var e = this;
                return new o(function(t) {
                    var n = new l["default"];
                    n.tween({
                        from: {
                            opacity: 100
                        },
                        to: {
                            opacity: 0
                        },
                        duration: 150,
                        step: function(t) {
                            var n = t.opacity;
                            e._elements.root.style.opacity = n / 100
                        },
                        finish: function() {
                            e._elements.root.style.opacity = 0,
                            e._elements.root.style.display = "none",
                            t()
                        }
                    })
                }
                )
            }
        }, {
            key: "addEventListener",
            value: function(e, t) {
                var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                return this._eventTarget.addEventListener(e, t, n)
            }
        }, {
            key: "removeEventListener",
            value: function(e, t) {
                var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                return this._eventTarget.removeEventListener(e, t, n)
            }
        }, {
            key: "dispatchEvent",
            value: function(e) {
                return this._eventTarget.dispatchEvent(e)
            }
        }, {
            key: "position",
            set: function(e) {
                this._position = e,
                this._elements.root.style.transform = "translate(" + this._position.x + "px, " + this._position.y + "px)"
            },
            get: function() {
                return this._position
            }
        }, {
            key: "element",
            get: function() {
                return this._elements.root
            }
        }, {
            key: "hidden",
            set: function(e) {
                var t = this;
                e !== this._hidden && (e ? this._animationQueue = this._animationQueue.then(function(e) {
                    return t._hideMarker()
                }) : this._animationQueue = this._animationQueue.then(function(e) {
                    return t._showMarker()
                }),
                this._hidden = e)
            },
            get: function() {
                return this._hidden
            }
        }, {
            key: "title",
            set: function(e) {
                this._elements.title.innerHTML = e,
                this._title = e
            },
            get: function() {
                return this._title
            }
        }]),
        e
    }();
    t["default"] = c,
    e.exports = t["default"]
}
, 390, , function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(19)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(76)
      , d = c(h)
      , f = n(116)
      , p = c(f)
      , m = n(142)
      , v = c(m)
      , g = n(397)
      , y = s("ui")
      , b = s("events")
      , x = {
        SINGLE_STAR: "Single star",
        BINARY: "Binary"
    }
      , w = {
        B: "Bidirectional",
        U: "Unidirectional"
    }
      , _ = {
        S: "Small",
        M: "Medium",
        L: "Large"
    }
      , S = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "onShow",
            value: function() {
                var e = this;
                setTimeout(function() {
                    return e.$el.addClass("sm-active")
                })
            }
        }, {
            key: "serializeData",
            value: function() {
                var e = d["default"].pick(this._getInfo(), "designation", "name", "type", "habitable", "subtype", "affiliation", "description", "info_url", "jumpInfo", "aggregated_size", "fairchanceact", "thumbnail", "children")
                  , t = e.type
                  , n = v["default"].SUB_TYPE_INFO[t] || {};
                if (e.type = (t || "").toLowerCase(),
                e.typeText = n.name,
                e.subtype = d["default"].pick(e.subtype, "name"),
                e.habitable = "1" === String(e.habitable),
                e.affiliation = (e.affiliation || []).length ? d["default"].pick(e.affiliation[0], "name", "code", "color") : {},
                e.affiliation.code = (e.affiliation.code || "").toLowerCase(),
                e.description = (e.description || "").trim(),
                e.jumpInfo) {
                    var i = e.jumpInfo.raw;
                    delete e.jumpInfo,
                    e.subtype = {
                        name: w[i.direction]
                    },
                    e.size = _[i.size],
                    e.description || (e.description = (i.extra.destination.raw.description || "").trim())
                }
                return this.model.api.selectedLocation.type === p["default"].Types.STAR_SYSTEM && (e.subtype = {
                    name: x[t]
                },
                e.type = "star_system",
                e.typeText = "Star System",
                e.size = Math.round(parseFloat(e.aggregated_size)) + " AU",
                delete e.habitable),
                e.hasHabitability = d["default"].has(e, "habitable"),
                e["protected"] = "1" === e.fairchanceact,
                e.children && (this._landingZones = e.landingZones = e.children.filter(function(e) {
                    return e.type === v["default"].SUB_TYPES.LANDING_ZONE
                }),
                delete e.children),
                e
            }
        }, {
            key: "_getInfo",
            value: function() {
                var e = this
                  , t = this._locationInfo
                  , n = this.model.get("currentAnimation")
                  , i = this.model.api.selectedLocation;
                if (this._location = i,
                !t)
                    if (n)
                        n.then(function() {
                            e._locationInfo = e.model.getLocationInfo(i),
                            e.render()
                        });
                    else
                        try {
                            t = this.model.getLocationInfo(i)
                        } catch (r) {
                            console.error("get location info threw error even without animation", r)
                        }
                return this._locationInfo = null,
                t && t.raw
            }
        }, {
            key: "onShowLandingZoneClick",
            value: function(e) {
                e.preventDefault();
                var t = this.ui.showLandingZone.filter(function(t, n) {
                    return n === e.currentTarget
                })
                  , n = t.parent().index()
                  , i = this._landingZones[n];
                this._clearLandingZoneHighlight(),
                this.model.landingZoneHighlight(this._location, i);
                var r = this.ui.landingZoneInfo.filter(function(e) {
                    return e === n
                });
                r.addClass("sm-active"),
                this.ui.allInfo.addClass("sm-lz-open")
            }
        }, {
            key: "onBackLandingZoneClick",
            value: function(e) {
                e.preventDefault(),
                this._clearLandingZoneHighlight(),
                this.ui.landingZoneInfo.removeClass("sm-active"),
                this.ui.allInfo.removeClass("sm-lz-open")
            }
        }, {
            key: "_clearLandingZoneHighlight",
            value: function() {
                var e = this;
                this._landingZones && this._location && this._landingZones.map(function(t) {
                    return e.model.landingZoneClear(e._location, t)
                })
            }
        }, {
            key: "hide",
            value: function() {
                return this._clearLandingZoneHighlight(),
                this.$el.removeClass("sm-active"),
                new l(function(e) {
                    return setTimeout(e, 500)
                }
                )
            }
        }, {
            key: "template",
            get: function() {
                return g
            }
        }, {
            key: "tagName",
            get: function() {
                return "article"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-disc-info"
            }
        }, {
            key: "ui",
            get: function() {
                return this[y] = this[y] || {
                    showLandingZone: ".sm-show-lz",
                    allInfo: ".sm-all-info",
                    landingZoneInfo: ".sm-lz-info",
                    backLandingZone: ".sm-back-lz"
                }
            },
            set: function(e) {
                this[y] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[b] = this[b] || {
                    "click @ui.showLandingZone": "onShowLandingZoneClick",
                    "click @ui.backLandingZone": "onBackLandingZoneClick"
                }
            },
            set: function(e) {
                this[b] = e
            }
        }]),
        t
    }(u.ItemView);
    t["default"] = S,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                if (s += '<h1>\n  <span class="sm-name">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "name") || i.contextOrFrameLookup(t, n, "designation"), e.opts.autoescape),
                s += "</span>\n  ",
                i.contextOrFrameLookup(t, n, "designation") && i.contextOrFrameLookup(t, n, "name") && (s += '\n    <span class="sm-designation">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "designation"), e.opts.autoescape),
                s += "</span>\n  "),
                s += '\n</h1>\n\n<ul class="sm-summary">\n  <li class="sm-type sm-type-',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "type"), e.opts.autoescape),
                s += '">\n    <strong>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "typeText"), e.opts.autoescape),
                s += "</strong>\n  </li>",
                i.contextOrFrameLookup(t, n, "hasHabitability") ? (s += '<li class="sm-habitable">\n      <label>Habitable</label>\n      <strong>',
                s += i.contextOrFrameLookup(t, n, "habitable") ? "Yes" : "No",
                s += "</strong>\n    </li>") : (s += '<li class="sm-size">\n      <label>Size</label>\n      <strong>\n        <span>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "size"), e.opts.autoescape),
                s += "</span>\n      </strong>\n    </li>"),
                s += '<li class="sm-subtype">\n    <label>Type</label>\n    <strong>',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subtype"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</strong>\n  </li>",
                i.memberLookup(i.contextOrFrameLookup(t, n, "affiliation"), "name", e.opts.autoescape) ? (s += '<li class="sm-affiliation">\n      <label>Affiliation</label>\n      <strong class="sm-affiliation-',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "affiliation"), "code", e.opts.autoescape), e.opts.autoescape),
                s += '" style="color: ',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "affiliation"), "color", e.opts.autoescape), e.opts.autoescape),
                s += ';">\n        <span>',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "affiliation"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</span>\n      </strong>\n    </li>") : (s += '<li class="sm-size">\n      <label>Size</label>\n      <strong>\n        <span>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "size"), e.opts.autoescape),
                s += "</span>\n      </strong>\n    </li>"),
                s += '</ul>\n\n<div class="sm-all-info-container">\n  <div class="sm-all-info">\n    <div class="sm-object-info">',
                i.contextOrFrameLookup(t, n, "landingZones") && i.memberLookup(i.contextOrFrameLookup(t, n, "landingZones"), "length", e.opts.autoescape)) {
                    s += '<div class="sm-lz-list">\n          <label>Landing zones: <span>',
                    s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "landingZones"), "length", e.opts.autoescape), e.opts.autoescape),
                    s += "</span></label>\n\n          <ul>",
                    n = n.push();
                    var l = i.contextOrFrameLookup(t, n, "landingZones");
                    if (l)
                        for (var c = l.length, u = 0; u < l.length; u++) {
                            var h = l[u];
                            n.set("lz", h),
                            n.set("loop.index", u + 1),
                            n.set("loop.index0", u),
                            n.set("loop.revindex", c - u),
                            n.set("loop.revindex0", c - u - 1),
                            n.set("loop.first", 0 === u),
                            n.set("loop.last", u === c - 1),
                            n.set("loop.length", c),
                            s += '<li><button class="sm-show-lz" type="button">',
                            s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape) || i.memberLookup(h, "designation", e.opts.autoescape), e.opts.autoescape),
                            s += "</button></li>"
                        }
                    n = n.pop(),
                    s += "\n          </ul>\n        </div>"
                }
                if (i.memberLookup(i.memberLookup(i.contextOrFrameLookup(t, n, "thumbnail"), "images", e.opts.autoescape), "post", e.opts.autoescape) && (s += '<div class="sm-image" style="background-image: url(\'',
                s += i.suppressValue(i.memberLookup(i.memberLookup(i.contextOrFrameLookup(t, n, "thumbnail"), "images", e.opts.autoescape), "post", e.opts.autoescape), e.opts.autoescape),
                s += "');\"></div>"),
                i.contextOrFrameLookup(t, n, "protected") && (s += '<p class="sm-protected">Protected under the fair chance act</p>'),
                s += '<div class="sm-description">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "description"), e.opts.autoescape),
                s += "</div>\n    </div>",
                i.contextOrFrameLookup(t, n, "landingZones")) {
                    s += '<ul class="sm-lz-info-list">',
                    n = n.push();
                    var d = i.contextOrFrameLookup(t, n, "landingZones");
                    if (d)
                        for (var f = d.length, p = 0; p < d.length; p++) {
                            var m = d[p];
                            n.set("lz", m),
                            n.set("loop.index", p + 1),
                            n.set("loop.index0", p),
                            n.set("loop.revindex", f - p),
                            n.set("loop.revindex0", f - p - 1),
                            n.set("loop.first", 0 === p),
                            n.set("loop.last", p === f - 1),
                            n.set("loop.length", f),
                            s += '<li class="sm-lz-info">\n            <button type="button" class="sm-back-lz">Back</button>\n\n            <article>\n              <header>\n                <h1>',
                            s += i.suppressValue(i.memberLookup(m, "name", e.opts.autoescape) || i.memberLookup(m, "designation", e.opts.autoescape), e.opts.autoescape),
                            s += '</h1>\n                <p>Landing zone</p>\n              </header>\n              <div class="sm-description">',
                            s += i.suppressValue(i.memberLookup(m, "description", e.opts.autoescape), e.opts.autoescape),
                            s += "</div>\n            </article>\n          </li>"
                        }
                    n = n.pop(),
                    s += "\n      </ul>"
                }
                s += '</div>\n</div>\n\n<div class="sm-guide-container">\n  ',
                i.contextOrFrameLookup(t, n, "info_url") && (s += '\n    <a href="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "info_url"), e.opts.autoescape),
                s += '" target="_blank" class="sm-guide">\n      <span>View Galactic Guide</span>\n    </a>\n  '),
                s += "\n</div>\n",
                r(null, s)
            } catch (v) {
                r(i.handleError(v, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div id="sm-map-map-region"></div>\n<div id="sm-map-location-marker-region"></div>\n<div id="sm-map-disc-region"></div>\n<div id="sm-map-info-region"></div>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(400)
      , h = l(u)
      , d = n(402)
      , f = l(d)
      , p = n(404)
      , m = l(p)
      , v = n(406)
      , g = l(v)
      , y = n(413)
      , b = l(y)
      , x = n(425)
      , w = l(x)
      , _ = n(146)
      , S = l(_)
      , M = n(431)
      , C = s("regions")
      , T = {
        search: g["default"],
        routes: b["default"],
        bookmarks: w["default"],
        display: {
            dependsOnSelection: !0,
            selection: {
                GALAXY: f["default"],
                STAR_SYSTEM: m["default"],
                CELESTIAL_OBJECT: m["default"],
                JUMP_POINT: m["default"]
            }
        }
    }
      , E = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this.model.get("interface"), "change:tab", this.renderTab),
            this.listenTo(this.model, "change:location", this.renderTab)
        }
        return r(t, e),
        o(t, [{
            key: "onShow",
            value: function() {
                var e = this;
                this.tabs.show(new h["default"]({
                    model: this.model
                })),
                S["default"].bind("/", function(t) {
                    t.preventDefault(),
                    e.model.get("interface").set("tab", "search")
                }),
                S["default"].bind("r", function(t) {
                    t.preventDefault(),
                    e.model.get("interface").set("tab", "routes")
                }),
                S["default"].bind("d", function(t) {
                    t.preventDefault(),
                    e.model.get("interface").set("tab", "display")
                }),
                S["default"].bind("b", function(t) {
                    t.preventDefault(),
                    e.model.get("interface").set("tab", "bookmarks")
                }),
                this.renderTab()
            }
        }, {
            key: "renderTab",
            value: function() {
                var e = this.model.get("interface").get("tab")
                  , t = T[e];
                t && t.dependsOnSelection && (t = t.selection[this.model.get("location").type]),
                t ? this.tabContent.show(new t({
                    model: this.model
                })) : this.tabContent.empty()
            }
        }, {
            key: "template",
            get: function() {
                return M
            }
        }, {
            key: "tagName",
            get: function() {
                return "section"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-controls"
            }
        }, {
            key: "regions",
            get: function() {
                return this[C] = this[C] || {
                    tabs: "#sm-controls-tabs-region",
                    tabContent: "#sm-controls-tab-content-region"
                },
                this[C]
            },
            set: function(e) {
                this[C] = e
            }
        }]),
        t
    }(c.LayoutView);
    t["default"] = E,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(139)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(167)
      , u = l(c)
      , h = n(111)
      , d = l(h)
      , f = n(78)
      , p = n(75)
      , m = n(116)
      , v = (l(m),
    n(401))
      , g = {
        search: "Search",
        bookmarks: "Bookmarks",
        routes: "Routes",
        display: "Display"
    }
      , y = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this["interface"], "change:tab", this.render)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                var e = this["interface"].get("tab");
                return {
                    tabs: s(u["default"].TABS).map(function(t) {
                        var n = d["default"].ROUTES[t]
                          , i = "" + p.history.root + n;
                        return n || (i = p.history.root.substring(0, p.history.root.length - 1)),
                        {
                            url: i,
                            name: g[t],
                            active: e === t
                        }
                    })
                }
            }
        }, {
            key: "template",
            get: function() {
                return v
            }
        }, {
            key: "tagName",
            get: function() {
                return "ul"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-tabs"
            }
        }, {
            key: "interface",
            get: function() {
                return this.model.get("interface")
            }
        }]),
        t
    }(f.ItemView);
    t["default"] = y,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "tabs");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("tab", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += "<li ",
                        i.memberLookup(h, "active", e.opts.autoescape) && (s += 'class="sm-active"'),
                        s += ">",
                        s += '<a href="',
                        s += i.suppressValue(i.memberLookup(h, "url", e.opts.autoescape), e.opts.autoescape),
                        s += '">\n      <span>',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span>\n      ",
                        s += "\n    </a>",
                        s += "</li>"
                    }
                n = n.pop(),
                s += "\n",
                r(null, s)
            } catch (d) {
                r(i.handleError(d, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(78)
      , c = n(403)
      , u = s("ui")
      , h = s("events")
      , d = {
        lifeforms: "Population",
        economy: "Economy",
        crime: "Threat"
    }
      , f = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this.model.get("affiliations"), "change:selected", this.onAffiliationSelectionChange),
            this.listenTo(this.model.get("routeSizes"), "change:selected", this.onRouteSizeSelectionChange),
            this.listenTo(this.model.get("scanners"), "change:selected", this.onScannerSelectionChange)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                var e = {
                    affiliations: this.model.get("affiliations").map(function(e) {
                        var t = e.toJSON();
                        return t.code = (t.code || "").toLowerCase(),
                        t
                    }),
                    routeSizes: this.model.get("routeSizes").toJSON(),
                    scanners: this.model.get("scanners").map(function(e) {
                        var t = e.toJSON();
                        return t.name = d[t.type],
                        t
                    }),
                    camera_views: [{
                        name: "3D",
                        selected: !this.model.get("camera2d"),
                        value: !1
                    }, {
                        name: "2D",
                        selected: this.model.get("camera2d"),
                        value: !0
                    }]
                };
                return e
            }
        }, {
            key: "onAffiliationSelectionChange",
            value: function(e, t) {
                this.ui.affiliationItems.filter('[value="' + e.get("id") + '"]').prop("checked", t)
            }
        }, {
            key: "onAffiliationClick",
            value: function(e) {
                var t = e.currentTarget;
                this.model.get("soundFX").toggleButton(t.checked),
                this.model.get("affiliations").get(t.value).set("selected", t.checked)
            }
        }, {
            key: "onRouteSizeSelectionChange",
            value: function(e, t) {
                this.ui.routeSizeItems.filter('[value="' + e.get("size") + '"]').prop("checked", t)
            }
        }, {
            key: "onRouteSizeClick",
            value: function(e) {
                var t = e.currentTarget;
                this.model.get("soundFX").toggleButton(t.checked),
                this.model.get("routeSizes").get(t.value).set("selected", t.checked)
            }
        }, {
            key: "onScannerSelectionChange",
            value: function(e, t) {
                this.ui.scannerItems.filter('[value="' + e.get("type") + '"]').prop("checked", t)
            }
        }, {
            key: "onScannerClick",
            value: function(e) {
                var t = e.currentTarget
                  , n = this.model.get("scanners")
                  , i = n.findWhere({
                    selected: !0
                })
                  , r = i && i.get("type") === t.value;
                i && (i.set("selected", !1),
                r && (t.checked = !1,
                this.model.get("soundFX").toggleButton(!1))),
                i && r || (this.model.get("soundFX").toggleButton(t.checked),
                n.get(t.value).set("selected", t.checked))
            }
        }, {
            key: "onCamera2dChange",
            value: function(e, t) {
                this.ui.camera.filter('[value="' + t + '"]').prop("checked", !0)
            }
        }, {
            key: "onCameraClick",
            value: function(e) {
                var t = e.currentTarget;
                this.model.get("camera2d") !== ("true" === t.value) && this.model.get("soundFX").toggleButton(!0),
                this.model.set("camera2d", "true" === t.value)
            }
        }, {
            key: "modelEvents",
            get: function() {
                return {
                    "change:camera2d": "onCamera2dChange"
                }
            }
        }, {
            key: "template",
            get: function() {
                return c
            }
        }, {
            key: "className",
            get: function() {
                return "sm-galaxy-display-tab"
            }
        }, {
            key: "ui",
            get: function() {
                return this[u] = this[u] || {
                    affiliationItems: 'input[name="affiliations"]',
                    routeSizeItems: 'input[name="route_sizes"]',
                    scannerItems: 'input[name="scanners"]',
                    camera: 'input[name="camera_view"]'
                }
            },
            set: function(e) {
                this[u] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[h] = this[h] || {
                    "click @ui.affiliationItems": "onAffiliationClick",
                    "click @ui.routeSizeItems": "onRouteSizeClick",
                    "click @ui.scannerItems": "onScannerClick",
                    "click @ui.camera": "onCameraClick"
                }
            },
            set: function(e) {
                this[h] = e
            }
        }]),
        t
    }(l.ItemView);
    t["default"] = f,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div class="sm-affiliations">\n  <label>Factions</label>\n  <ul>\n    ',
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "affiliations");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("item", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += '<li>\n        <input\n          id="affiliation-',
                        s += i.suppressValue(i.memberLookup(h, "code", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="affiliations"\n          type="checkbox"\n          value="',
                        s += i.suppressValue(i.memberLookup(h, "id", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(h, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="affiliation-',
                        s += i.suppressValue(i.memberLookup(h, "code", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '" style="color: ',
                        s += i.suppressValue(i.memberLookup(h, "color", e.opts.autoescape), e.opts.autoescape),
                        s += ';"><span>',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-route-sizes">\n  <label>Jump tunnels</label>\n  <ul>\n    ',
                n = n.push();
                var d = i.contextOrFrameLookup(t, n, "routeSizes");
                if (d)
                    for (var f = d.length, p = 0; p < d.length; p++) {
                        var m = d[p];
                        n.set("item", m),
                        n.set("loop.index", p + 1),
                        n.set("loop.index0", p),
                        n.set("loop.revindex", f - p),
                        n.set("loop.revindex0", f - p - 1),
                        n.set("loop.first", 0 === p),
                        n.set("loop.last", p === f - 1),
                        n.set("loop.length", f),
                        s += '<li>\n        <input\n          id="route-size-',
                        s += i.suppressValue(i.memberLookup(m, "size", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="route_sizes"\n          type="checkbox"\n          value="',
                        s += i.suppressValue(i.memberLookup(m, "size", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(m, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="route-size-',
                        s += i.suppressValue(i.memberLookup(m, "size", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(m, "size", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(m, "size", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-scanners">\n  <label>Sensors</label>\n  <ul>\n    ',
                n = n.push();
                var v = i.contextOrFrameLookup(t, n, "scanners");
                if (v)
                    for (var g = v.length, y = 0; y < v.length; y++) {
                        var b = v[y];
                        n.set("item", b),
                        n.set("loop.index", y + 1),
                        n.set("loop.index0", y),
                        n.set("loop.revindex", g - y),
                        n.set("loop.revindex0", g - y - 1),
                        n.set("loop.first", 0 === y),
                        n.set("loop.last", y === g - 1),
                        n.set("loop.length", g),
                        s += '<li>\n        <input\n          id="sensor-',
                        s += i.suppressValue(i.memberLookup(b, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="scanners"\n          type="radio"\n          value="',
                        s += i.suppressValue(i.memberLookup(b, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(b, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="sensor-',
                        s += i.suppressValue(i.memberLookup(b, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(b, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(b, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-camera-views">\n  <label>Camera</label>\n  <ul>\n    ',
                n = n.push();
                var x = i.contextOrFrameLookup(t, n, "camera_views");
                if (x)
                    for (var w = x.length, _ = 0; _ < x.length; _++) {
                        var S = x[_];
                        n.set("item", S),
                        n.set("loop.index", _ + 1),
                        n.set("loop.index0", _),
                        n.set("loop.revindex", w - _),
                        n.set("loop.revindex0", w - _ - 1),
                        n.set("loop.first", 0 === _),
                        n.set("loop.last", _ === w - 1),
                        n.set("loop.length", w),
                        s += '<li>\n        <input\n          id="camera-view-',
                        s += i.suppressValue(i.memberLookup(S, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="camera_view"\n          type="radio"\n          value="',
                        s += i.suppressValue(i.memberLookup(S, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(S, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="camera-view-',
                        s += i.suppressValue(i.memberLookup(S, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(S, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(S, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += "\n  </ul>\n</div>\n",
                r(null, s)
            } catch (M) {
                r(i.handleError(M, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(78)
      , c = n(405)
      , u = s("ui")
      , h = s("events")
      , d = {
        lifeforms: "Population",
        economy: "Economy",
        crime: "Threat"
    }
      , f = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this.model.get("systemScanners"), "change:selected", this.onScannerSelectionChange)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                var e = {
                    scanners: this.model.get("systemScanners").map(function(e) {
                        var t = e.toJSON();
                        return t.name = d[t.type],
                        t
                    }),
                    camera_views: [{
                        name: "3D",
                        selected: !this.model.get("camera2d"),
                        value: !1
                    }, {
                        name: "2D",
                        selected: this.model.get("camera2d"),
                        value: !0
                    }]
                };
                return e
            }
        }, {
            key: "onScannerSelectionChange",
            value: function(e, t) {
                this.ui.scannerItems.filter('[value="' + e.get("type") + '"]').prop("checked", t)
            }
        }, {
            key: "onScannerClick",
            value: function(e) {
                var t = e.currentTarget
                  , n = this.model.get("systemScanners")
                  , i = n.findWhere({
                    selected: !0
                })
                  , r = i && i.get("type") === t.value;
                i && (i.set("selected", !1),
                r && (t.checked = !1,
                this.model.get("soundFX").toggleButton(!1))),
                i && r || (this.model.get("soundFX").toggleButton(t.checked),
                n.get(t.value).set("selected", t.checked))
            }
        }, {
            key: "onCamera2dChange",
            value: function(e, t) {
                this.ui.camera.filter('[value="' + t + '"]').prop("checked", !0)
            }
        }, {
            key: "onCameraClick",
            value: function(e) {
                var t = e.currentTarget;
                this.model.get("camera2d") !== ("true" === t.value) && this.model.get("soundFX").toggleButton(!0),
                this.model.set("camera2d", "true" === t.value)
            }
        }, {
            key: "modelEvents",
            get: function() {
                return {
                    "change:camera2d": "onCamera2dChange"
                }
            }
        }, {
            key: "template",
            get: function() {
                return c
            }
        }, {
            key: "className",
            get: function() {
                return "sm-system-display-tab"
            }
        }, {
            key: "ui",
            get: function() {
                return this[u] = this[u] || {
                    scannerItems: 'input[name="scanners"]',
                    camera: 'input[name="camera_view"]'
                }
            },
            set: function(e) {
                this[u] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[h] = this[h] || {
                    "click @ui.scannerItems": "onScannerClick",
                    "click @ui.camera": "onCameraClick"
                }
            },
            set: function(e) {
                this[h] = e
            }
        }]),
        t
    }(l.ItemView);
    t["default"] = f,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div class="sm-scanners">\n  <label>Sensors</label>\n  <ul>\n    ',
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "scanners");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("item", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += '<li>\n        <input\n          id="sensor-',
                        s += i.suppressValue(i.memberLookup(h, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="scanners"\n          type="radio"\n          value="',
                        s += i.suppressValue(i.memberLookup(h, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(h, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="sensor-',
                        s += i.suppressValue(i.memberLookup(h, "type", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-camera-views">\n  <label>Camera</label>\n  <ul>\n    ',
                n = n.push();
                var d = i.contextOrFrameLookup(t, n, "camera_views");
                if (d)
                    for (var f = d.length, p = 0; p < d.length; p++) {
                        var m = d[p];
                        n.set("item", m),
                        n.set("loop.index", p + 1),
                        n.set("loop.index0", p),
                        n.set("loop.revindex", f - p),
                        n.set("loop.revindex0", f - p - 1),
                        n.set("loop.first", 0 === p),
                        n.set("loop.last", p === f - 1),
                        n.set("loop.length", f),
                        s += '<li>\n        <input\n          id="camera-view-',
                        s += i.suppressValue(i.memberLookup(m, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="camera_view"\n          type="radio"\n          value="',
                        s += i.suppressValue(i.memberLookup(m, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(m, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="camera-view-',
                        s += i.suppressValue(i.memberLookup(m, "value", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(m, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(m, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += "\n  </ul>\n</div>\n",
                r(null, s)
            } catch (v) {
                r(i.handleError(v, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(407)
      , h = l(u)
      , d = n(409)
      , f = l(d)
      , p = n(75)
      , m = n(76)
      , v = (l(m),
    n(411))
      , g = (l(v),
    n(116))
      , y = l(g)
      , b = n(412)
      , x = s("ui")
      , w = s("events")
      , _ = function(e) {
        function t(e) {
            a(this, t);
            var n = e.model;
            e.model = e.model.get("interface"),
            e.collection = e.model.get("searchResults"),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this._api = n._api,
            this._starmapApi = n,
            this.listenTo(this.collection, "request", this.onCollectionRequest),
            this.listenTo(this.collection, "sync", this.onCollectionSync),
            this.listenTo(this.collection, "update", this.onCollectionUpdate),
            this.on("childview:bookmark", this.onChildViewBookmark),
            this.on("childview:goto", this.onChildViewGoto)
        }
        return r(t, e),
        o(t, [{
            key: "isEmpty",
            value: function() {
                return this.collection.isLoading || 0 === this.collection.length
            }
        }, {
            key: "onSubmit",
            value: function(e) {
                e.preventDefault(),
                this._canSubmit() && (this.model.get("searchFilters").set("query", this.ui.query.val()),
                this.isDirty = !1,
                this._updateListState())
            }
        }, {
            key: "serializeData",
            value: function() {
                return this.model.get("searchFilters").toJSON()
            }
        }, {
            key: "onShow",
            value: function() {
                this.ui.query.focus()
            }
        }, {
            key: "onRender",
            value: function() {
                this._updateEnabled(),
                this._updateListState(),
                this.onCollectionUpdate()
            }
        }, {
            key: "onChildViewGoto",
            value: function(e, t) {
                var n = t.model
                  , i = n.parent ? "&system=" + n.parent.get("code") : "";
                if (p.history.navigate("/?selection=" + n.get("code") + i, {
                    trigger: !0
                }),
                n.parent) {
                    var r = "JUMPPOINT" === n.get("subType");
                    this._starmapApi.goToLocation(new y["default"](r ? y["default"].Types.JUMP_POINT : y["default"].Types.CELESTIAL_OBJECT,n.get("system").get("code"),n.get("code")))
                } else
                    this._starmapApi.goToLocation(new y["default"](y["default"].Types.STAR_SYSTEM,n.get("code")))
            }
        }, {
            key: "onChildViewBookmark",
            value: function(e, t) {
                var n = t.model;
                this.model.get("bookmarks").toggle(n)
            }
        }, {
            key: "onCollectionRequest",
            value: function() {
                this.collection.trigger("reset")
            }
        }, {
            key: "onCollectionSync",
            value: function() {
                this.collection.trigger("reset")
            }
        }, {
            key: "onCollectionUpdate",
            value: function() {
                var e = 1 === this.collection.length ? "item" : "items"
                  , t = this.collection.length > 0 ? this.collection.length + " " + e + " found" : "";
                this.ui.count.text(t)
            }
        }, {
            key: "_updateListState",
            value: function() {
                this.ui.list.toggleClass("sm-active", !this.isDirty && this.model.get("searchFilters").hasQuery)
            }
        }, {
            key: "_updateEnabled",
            value: function() {
                var e = this._canSubmit();
                this.ui.field.toggleClass("sm-active", e),
                this.ui.submit.prop("disabled", !e)
            }
        }, {
            key: "_updateQueryState",
            value: function() {
                this.isDirty = this.ui.query.val() !== this.model.get("searchFilters").get("query"),
                this._updateEnabled(),
                this._updateListState()
            }
        }, {
            key: "_canSubmit",
            value: function() {
                return this.ui.query.val().length >= 3
            }
        }, {
            key: "template",
            get: function() {
                return b
            }
        }, {
            key: "childView",
            get: function() {
                return h["default"]
            }
        }, {
            key: "childViewOptions",
            get: function() {
                return {
                    bookmarks: this.model.get("bookmarks")
                }
            }
        }, {
            key: "emptyView",
            get: function() {
                return f["default"]
            }
        }, {
            key: "emptyViewOptions",
            get: function() {
                return {
                    collection: this.collection
                }
            }
        }, {
            key: "childViewContainer",
            get: function() {
                return "tbody"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-search-tab"
            }
        }, {
            key: "ui",
            get: function() {
                return this[x] = this[x] || {
                    list: ".sm-list",
                    field: ".sm-field",
                    query: 'input[name="query"]',
                    submit: "form button",
                    form: "form.sm-search",
                    count: ".sm-count-label"
                }
            },
            set: function(e) {
                this[x] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[w] = this[w] || {
                    "input @ui.query": "_updateQueryState",
                    "submit @ui.form": "onSubmit"
                }
            },
            set: function(e) {
                this[w] = e
            }
        }]),
        t
    }(c.CompositeView);
    t["default"] = _,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(142)
      , h = l(u)
      , d = n(76)
      , f = l(d)
      , p = n(408)
      , m = s("ui")
      , v = s("triggers")
      , g = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.bookmarks = e.bookmarks,
            this.onBookmarksUpdate(),
            this.listenTo(this.bookmarks.fullCollection, "update", this.onBookmarksUpdate)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "serializeData", this).apply(this, n);
                o.bookmarked = this.bookmarked,
                o.type = {
                    key: o.type.toLowerCase(),
                    name: h["default"].TYPE_INFO[o.type].name
                };
                var a = h["default"].SUB_TYPE_INFO[o.subType];
                return a && (o.subType = {
                    key: o.subType.toLowerCase(),
                    name: a.name
                }),
                o
            }
        }, {
            key: "onBookmarksUpdate",
            value: function() {
                var e = this.bookmarked;
                this.bookmarked = !!this.bookmarks.findByObject(this.model),
                f["default"].isUndefined(e) || e === this.bookmarked || this.render()
            }
        }, {
            key: "template",
            get: function() {
                return p
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }, {
            key: "ui",
            get: function() {
                return this[m] = this[m] || {
                    bookmark: ".sm-bookmark",
                    go: ".sm-go"
                }
            },
            set: function(e) {
                this[m] = e
            }
        }, {
            key: "triggers",
            get: function() {
                return this[v] = this[v] || {
                    "click @ui.bookmark": "bookmark",
                    "click @ui.go": "goto",
                    click: "goto"
                }
            }
        }]),
        t
    }(c.ItemView);
    t["default"] = g,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td class="sm-name">\n  <strong>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "name") || i.contextOrFrameLookup(t, n, "designation"), e.opts.autoescape),
                s += "</strong>\n",
                s += "\n  ",
                i.contextOrFrameLookup(t, n, "system") && (s += "\n    <em>in ",
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "system"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</em>\n  "),
                s += '\n</td>\n<td class="sm-type sm-type-',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subType"), "key", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "type"), "key", e.opts.autoescape), e.opts.autoescape),
                s += '">',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subType"), "name", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "type"), "name", e.opts.autoescape), e.opts.autoescape),
                s += '</td>\n<td class="sm-bookmark-container"><button class="sm-bookmark ',
                i.contextOrFrameLookup(t, n, "bookmarked") && (s += "sm-active"),
                s += '" title="',
                s += i.contextOrFrameLookup(t, n, "bookmarked") ? "Remove bookmark" : "Bookmark",
                s += '"><span>',
                s += i.contextOrFrameLookup(t, n, "bookmarked") ? "Remove bookmark" : "Bookmark",
                s += '</span></button></td>\n<td class="sm-go-container"><button class="sm-go" title="Go"><span>Go</span></button></td>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(78)
      , l = n(410)
      , c = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                return {
                    loading: this.collection.isLoading
                }
            }
        }, {
            key: "onRender",
            value: function() {
                this.$el.toggleClass("sm-is-loading", this.collection.isLoading)
            }
        }, {
            key: "template",
            get: function() {
                return l
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }]),
        t
    }(s.ItemView);
    t["default"] = c,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td colspan="4">\n  ',
                s += i.contextOrFrameLookup(t, n, "loading") ? "\n    Loading...\n  " : "\n    No objects found with filters.\n  ",
                s += "\n</td>\n",
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(96)["default"]
      , a = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(136)
      , l = a(s)
      , c = function(e) {
        function t(e) {
            o(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        t
    }(l["default"]);
    t["default"] = c,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<section class="sm-list">\n  <div class="sm-table-container">\n    <table>\n      <thead>\n        <tr>\n          <th class="sm-name">Name</th>\n          <th class="sm-type">Type</th>\n          <th class="sm-bookmark-container"><span class="sm-count-label"></span></th>\n          <th class="sm-go-container"></th>\n        </tr>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n  </div>\n</section>\n\n<form class="sm-search">\n  <div class="sm-field">\n    <label for="query">Search</label>\n\n    <div class="sm-input-container">\n      <input type="search" id="query" name="query" placeholder="" value="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "query"), e.opts.autoescape),
                s += '">\n    </div>\n\n    <button><span>Search</span></button>\n  </div>\n</form>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(139)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(414)
      , d = c(h)
      , f = n(420)
      , p = c(f)
      , m = n(174)
      , v = c(m)
      , g = n(76)
      , y = (c(g),
    n(424))
      , b = s("ui")
      , x = s("regions")
      , w = s("events")
      , _ = function(e) {
        function t(e) {
            a(this, t);
            var n = e.model;
            e.model = e.model.get("interface"),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this._api = n,
            this.listenTo(this.model.get("routingFilters"), "change:shipSize", this.onChangeShipSize),
            this.listenTo(this.model.get("routingFilters").get("departure"), "change:object", this._updateUIState),
            this.listenTo(this.model.get("routingFilters").get("destination"), "change:object", this._updateUIState)
        }
        return r(t, e),
        o(t, [{
            key: "onShow",
            value: function() {
                var e = this.model.get("routingResults");
                this.list.show(new d["default"]({
                    collection: e,
                    model: this._api
                }));
                var t = this.model.get("routingFilters");
                this.departure.show(new p["default"]({
                    key: "departure",
                    label: "Departure",
                    model: t.get("departure")
                })),
                this.destination.show(new p["default"]({
                    key: "destination",
                    label: "Destination",
                    model: t.get("destination")
                })),
                this.onChangeShipSize()
            }
        }, {
            key: "serializeData",
            value: function() {
                var e = {
                    shipSize: this.model.get("routingFilters").get("shipSize")
                };
                return e.sizes = l(v["default"].SHIP_SIZES).map(function(e) {
                    return {
                        key: e,
                        name: v["default"].SHIP_SIZES[e]
                    }
                }),
                e
            }
        }, {
            key: "onRender",
            value: function() {
                this._updateListState(),
                this._updateUIState()
            }
        }, {
            key: "onSizeItemsClick",
            value: function(e) {
                var t = this.model.get("routingFilters").get("shipSize");
                e.currentTarget.checked = t !== e.currentTarget.value,
                this._api.get("soundFX").toggleButton(!0),
                this.model.get("routingFilters").set("shipSize", e.currentTarget.value),
                this._updateUIState()
            }
        }, {
            key: "onChangeShipSize",
            value: function() {
                var e = this.model.get("routingFilters").get("shipSize");
                this.ui.sizeItems.filter('[value="' + e + '"]').prop("checked", !0)
            }
        }, {
            key: "onSubmit",
            value: function(e) {
                e.preventDefault(),
                this.model.get("routingFilters").search(),
                this._updateListState(),
                this._updateUIState()
            }
        }, {
            key: "_updateUIState",
            value: function() {
                var e = this.model.get("routingFilters").hasQuery;
                this.ui.button.prop("disabled", !e),
                this.ui.actions.toggleClass("sm-active", e)
            }
        }, {
            key: "_updateListState",
            value: function() {
                this.ui.listRegion.toggleClass("sm-active", this.model.get("routingFilters").hasQuery)
            }
        }, {
            key: "template",
            get: function() {
                return y
            }
        }, {
            key: "className",
            get: function() {
                return "sm-routes-tab"
            }
        }, {
            key: "ui",
            get: function() {
                return this[b] = this[b] || {
                    listRegion: ".sm-list-region",
                    departureRegion: ".sm-departure-region",
                    destinationRegion: ".sm-destination-region",
                    sizeItems: 'input[name="ship-size"]',
                    form: "form.sm-routes",
                    actions: ".sm-actions",
                    button: ".sm-actions button"
                }
            },
            set: function(e) {
                this[b] = e
            }
        }, {
            key: "regions",
            get: function() {
                return this[x] = this[x] || {
                    list: "@ui.listRegion",
                    departure: "@ui.departureRegion",
                    destination: "@ui.destinationRegion"
                },
                this[x]
            },
            set: function(e) {
                this[x] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[w] = this[w] || {
                    "click @ui.sizeItems": "onSizeItemsClick",
                    "submit @ui.form": "onSubmit"
                }
            },
            set: function(e) {
                this[w] = e
            }
        }]),
        t
    }(u.LayoutView);
    t["default"] = _,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = n(78)
      , c = n(415)
      , u = s(c)
      , h = n(417)
      , d = s(h)
      , f = n(177)
      , p = (s(f),
    n(419))
      , m = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this.collection, "change:selectedSegment", this.onChangeSelectedSegment),
            this.listenTo(this.collection, "request", this.onCollectionRequest),
            this.listenTo(this.collection, "sync", this.onCollectionSync),
            this.on("childview:deselect", this.onChildViewDeselect),
            this.on("childview:select", this.onChildViewSelect)
        }
        return r(t, e),
        o(t, [{
            key: "isEmpty",
            value: function() {
                return this.collection.isLoading || 0 === this.collection.length
            }
        }, {
            key: "onChangeSelectedSegment",
            value: function(e, t) {
                t && this.model.routingGoToSegment(t)
            }
        }, {
            key: "onChildViewDeselect",
            value: function(e, t) {
                var n = t.model;
                n.set("selected", !1),
                this.model.routingHide(),
                this._updateSelectionState()
            }
        }, {
            key: "onChildViewSelect",
            value: function(e, t) {
                var n = t.model;
                this.collection.invoke("clearSelection"),
                this.model.routingShow(n.get("segments")),
                n.set("selected", !0),
                n.goToSegment(0),
                this._updateSelectionState()
            }
        }, {
            key: "onRender",
            value: function() {
                this._updateSelectionState()
            }
        }, {
            key: "onCollectionRequest",
            value: function() {
                this.collection.trigger("reset")
            }
        }, {
            key: "onCollectionSync",
            value: function() {
                0 === this.collection.length && this.collection.trigger("reset")
            }
        }, {
            key: "onCollectionRequest",
            value: function() {
                this.collection.trigger("reset")
            }
        }, {
            key: "onCollectionSync",
            value: function() {
                0 === this.collection.length && this.collection.trigger("reset")
            }
        }, {
            key: "_updateSelectionState",
            value: function() {
                this.$el.toggleClass("sm-has-selection", this.collection.where({
                    selected: !0
                }).length > 0)
            }
        }, {
            key: "template",
            get: function() {
                return p
            }
        }, {
            key: "childView",
            get: function() {
                return u["default"]
            }
        }, {
            key: "emptyView",
            get: function() {
                return d["default"]
            }
        }, {
            key: "emptyViewOptions",
            get: function() {
                return {
                    collection: this.collection
                }
            }
        }, {
            key: "childViewContainer",
            get: function() {
                return "tbody"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-table-container"
            }
        }]),
        t
    }(l.CompositeView);
    t["default"] = m,
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(139)["default"]
      , c = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = n(78)
      , h = n(142)
      , d = (c(h),
    n(76))
      , f = (c(d),
    n(416))
      , p = s("ui")
      , m = s("events")
      , v = s("triggers")
      , g = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.listenTo(this.model, "change", this.onModelChange)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "serializeData", this).apply(this, n);
                return o.shortestLabel = o.isShortest ? "Yes" : "No",
                o.leastJumpsLabel = o.isLeastJumps ? "Yes" : "No",
                o.flight_distance = Math.round(100 * o.flight_distance) / 100,
                o.segmentCount = this.model.flightSegments.length,
                o.currentSegment = this.model.flightSegments.indexOf(o.selectedSegment) + 1,
                o
            }
        }, {
            key: "onRender",
            value: function() {
                this._updateSelection()
            }
        }, {
            key: "onModelChange",
            value: function() {
                var e = l(this.model.changed)
                  , t = -1 !== e.indexOf("selected")
                  , n = -1 !== e.indexOf("selectedSegment");
                (t || n) && this.render()
            }
        }, {
            key: "onPreviousSegmentClick",
            value: function() {
                this.model.previousSegment()
            }
        }, {
            key: "onNextSegmentClick",
            value: function() {
                this.model.nextSegment()
            }
        }, {
            key: "_updateSelection",
            value: function() {
                this.$el.toggleClass("sm-active", this.model.get("selected"))
            }
        }, {
            key: "template",
            get: function() {
                return f
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }, {
            key: "ui",
            get: function() {
                return this[p] = this[p] || {
                    prevSegment: ".sm-prev-segment",
                    nextSegment: ".sm-next-segment",
                    select: ".sm-select",
                    deselect: ".sm-deselect"
                }
            },
            set: function(e) {
                this[p] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[m] = this[m] || {
                    "click @ui.prevSegment": "onPreviousSegmentClick",
                    "click @ui.nextSegment": "onNextSegmentClick"
                }
            },
            set: function(e) {
                this[m] = e
            }
        }, {
            key: "triggers",
            get: function() {
                return this[v] = this[v] || {
                    "click @ui.select": "select",
                    "click @ui.deselect": "deselect"
                }
            }
        }]),
        t
    }(u.ItemView);
    t["default"] = g,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td class="sm-label">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "label"), e.opts.autoescape),
                s += '</td>\n<td class="sm-jumps">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "jumps"), e.opts.autoescape),
                s += '</td>\n<td class="sm-distance">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "flight_distance"), e.opts.autoescape),
                s += " AU</td>\n",
                s += "\n",
                s += '\n<td class="sm-selection">\n  ',
                s += i.contextOrFrameLookup(t, n, "selected") ? '\n    <button class="sm-deselect">\n      <span>Exit route</span>\n    </button>\n  ' : '\n    <button class="sm-select">\n      <span>View route</span>\n    </button>\n  ',
                s += '\n</td>\n<td class="sm-navigation">\n  <button class="sm-prev-segment"',
                (!i.contextOrFrameLookup(t, n, "selected") || i.contextOrFrameLookup(t, n, "currentSegment") < 2) && (s += " disabled"),
                s += '><span>Previous segment</span></button>\n  <label class="sm-current-segment">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "currentSegment"), e.opts.autoescape),
                s += '</label>\n  <label class="sm-segment-count">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "segmentCount"), e.opts.autoescape),
                s += '</label>\n  <button class="sm-next-segment"',
                i.contextOrFrameLookup(t, n, "selected") && i.contextOrFrameLookup(t, n, "currentSegment") != i.contextOrFrameLookup(t, n, "segmentCount") || (s += " disabled"),
                s += "><span>Next segment</span></button>\n</td>\n",
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(78)
      , l = n(418)
      , c = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                return {
                    loading: this.collection.isLoading
                }
            }
        }, {
            key: "onRender",
            value: function() {
                this.$el.toggleClass("sm-is-loading", this.collection.isLoading)
            }
        }, {
            key: "template",
            get: function() {
                return l
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }]),
        t
    }(s.ItemView);
    t["default"] = c,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td colspan="5">\n  ',
                s += i.contextOrFrameLookup(t, n, "loading") ? "\n    Loading...\n  " : "\n    No routes found with filters.\n  ",
                s += "\n</td>\n",
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<table>\n  <thead>\n    <tr>\n      <th class="sm-label">Route</th>\n      <th class="sm-jumps">Jumps</th>\n      <th class="sm-distance">Flight distance</th>\n      ',
                s += "\n      ",
                s += '\n      <th class="sm-selection">Show segment</th>\n      <th class="sm-navigation"></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(421)
      , h = l(u)
      , d = n(142)
      , f = (l(d),
    n(76))
      , p = l(f)
      , m = n(423)
      , v = s("ui")
      , g = s("modelEvents")
      , y = s("events")
      , b = function(e) {
        function t(e) {
            a(this, t),
            e.collection = e.model.get("results"),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this.key = e.key,
            this.label = e.label,
            this.listenTo(this.model, "change:query", this._updateQuery),
            this.listenTo(this.model, "change:object", this._updateResultsState),
            this.listenTo(this.collection, "update", this._updateResultsState),
            this.on("childview:select", this.onChildViewSelect)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "serializeData", this).apply(this, n);
                return o.key = this.key,
                o.label = this.label,
                o
            }
        }, {
            key: "onRender",
            value: function() {
                this._updateResultsState(),
                this.onObjectChange()
            }
        }, {
            key: "onQueryKeyup",
            value: function(e) {
                this.model.set("query", e.currentTarget.value)
            }
        }, {
            key: "_updateQuery",
            value: function() {
                this.ui.query.val(this.model.get("query"))
            }
        }, {
            key: "_updateResultsState",
            value: function() {
                var e = !!this.model.get("object");
                this.ui.field.toggleClass("sm-active", e),
                this.ui.resultsRegion.toggleClass("sm-position-top", this.collection.length > 2),
                this.ui.resultsRegion.toggleClass("sm-active", !e)
            }
        }, {
            key: "onChildViewSelect",
            value: function(e, t) {
                var n = t.model;
                this.model.set("object", n)
            }
        }, {
            key: "onObjectChange",
            value: function() {
                var e = this.model.get("object")
                  , t = e ? e.get("name") || e.get("designation") : "";
                this.model.set("query", t, {
                    silent: !0
                }),
                this._updateQuery()
            }
        }, {
            key: "template",
            get: function() {
                return m
            }
        }, {
            key: "childView",
            get: function() {
                return h["default"]
            }
        }, {
            key: "childViewContainer",
            get: function() {
                return "@ui.resultsRegion"
            }
        }, {
            key: "ui",
            get: function() {
                return this[v] = this[v] || {
                    field: ".sm-field",
                    query: 'input[type="search"]',
                    resultsRegion: ".sm-results-region"
                }
            },
            set: function(e) {
                this[v] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[y] = this[y] || {
                    "keyup @ui.query": "onQueryKeyup"
                }
            },
            set: function(e) {
                this[y] = e
            }
        }, {
            key: "modelEvents",
            get: function() {
                return this[g] = this[g] || {
                    "change:object": "onObjectChange"
                }
            },
            set: function(e) {
                this[g] = e
            }
        }]),
        t
    }(c.CompositeView);
    t["default"] = b,
    b.prototype.onQueryKeyup = p["default"].debounce(b.prototype.onQueryKeyup, 300),
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(142)
      , h = l(u)
      , d = n(76)
      , f = (l(d),
    n(422))
      , p = s("ui")
      , m = (s("events"),
    s("triggers"))
      , v = function(e) {
        function t(e) {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "serializeData", this).apply(this, n);
                o.type = {
                    key: o.type,
                    name: h["default"].TYPE_INFO[o.type].name
                };
                var a = h["default"].SUB_TYPE_INFO[o.subType];
                return a && (o.subType = {
                    key: o.subType,
                    name: a.name
                }),
                o
            }
        }, {
            key: "template",
            get: function() {
                return f
            }
        }, {
            key: "tagName",
            get: function() {
                return "li"
            }
        }, {
            key: "ui",
            get: function() {
                return this[p] = this[p] || {
                    button: "button"
                }
            },
            set: function(e) {
                this[p] = e
            }
        }, {
            key: "triggers",
            get: function() {
                return this[m] = this[m] || {
                    "click @ui.button": "select"
                }
            }
        }]),
        t
    }(c.ItemView);
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<button type="button">\n  <span>\n    <strong>',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "name") || i.contextOrFrameLookup(t, n, "designation"), e.opts.autoescape),
                s += "</strong>\n    ",
                i.contextOrFrameLookup(t, n, "subType") && (s += "\n      <small>",
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subType"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</small>\n    "),
                s += "\n    ",
                i.contextOrFrameLookup(t, n, "system") && (s += "\n      <em>in ",
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "system"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</em>\n    "),
                s += "\n  </span>\n</button>\n",
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div class="sm-field">\n  <label for="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "key"), e.opts.autoescape),
                s += '-query">',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "label"), e.opts.autoescape),
                s += '</label>\n\n  <div class="sm-input-container">\n    <input type="search" id="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "key"), e.opts.autoescape),
                s += '-query" name="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "key"), e.opts.autoescape),
                s += '-query" placeholder="" value="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "query"), e.opts.autoescape),
                s += '">\n  </div>\n\n  <button type="button" class="sm-search-autocomplete"><span>Search</span></button>\n</div>\n\n<ul class="sm-results-region"></ul>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<section class="sm-list-region"></section>\n\n<form class="sm-routes">\n  <div class="sm-departure-region"></div>',
                s += '<div class="sm-destination-region"></div>',
                s += '<div class="sm-ship-size">\n    <label>Ship size</label>\n    <ul>\n      ',
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "sizes");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("item", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += '<li>\n          <input\n            id="size-',
                        s += i.suppressValue(i.memberLookup(h, "key", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n            name="ship-size"\n            type="radio"\n            value="',
                        s += i.suppressValue(i.memberLookup(h, "key", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n            ',
                        i.memberLookup(h, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n            >\n          <label for="size-',
                        s += i.suppressValue(i.memberLookup(h, "key", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n        </li>"
                    }
                n = n.pop(),
                s += "\n    </ul>\n  </div>",
                s += '<div class="sm-actions">\n    <button><span>Calculate</span></button>\n  </div>\n</form>\n',
                r(null, s)
            } catch (d) {
                r(i.handleError(d, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(426)
      , h = l(u)
      , d = n(428)
      , f = l(d)
      , p = n(75)
      , m = n(76)
      , v = l(m)
      , g = n(116)
      , y = l(g)
      , b = n(430)
      , x = s("ui")
      , w = s("events")
      , _ = function(e) {
        function t(e) {
            a(this, t);
            var n = e.model;
            e.model = e.model.get("interface"),
            e.collection = e.model.get("bookmarks"),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).call(this, e),
            this._starmapApi = n,
            this._api = n._api,
            this.listenTo(this.model.get("bookmarkFilters").get("types"), "change:selected", this.onTypeSelectionChange),
            this.listenTo(this.collection, "reset update", this.onCollectionUpdate),
            this.on("childview:goto", this.onChildViewGoTo)
        }
        return r(t, e),
        o(t, [{
            key: "onShow",
            value: function() {
                this.ui.query.focus(),
                this.onCollectionUpdate()
            }
        }, {
            key: "onTypeSelectionChange",
            value: function(e, t) {
                this.ui.typeItems.filter('[value="' + e.get("key") + '"]').prop("checked", t)
            }
        }, {
            key: "onTypeClick",
            value: function(e) {
                var t = e.currentTarget;
                this._starmapApi.get("soundFX").toggleButton(t.checked),
                this.model.get("bookmarkFilters").get("types").get(t.value).set("selected", t.checked)
            }
        }, {
            key: "onQueryKeyup",
            value: function(e) {
                this.model.get("bookmarkFilters").set("query", e.currentTarget.value)
            }
        }, {
            key: "serializeData",
            value: function() {
                var e = this.model.get("bookmarkFilters")
                  , t = e.toJSON();
                return t.types = e.get("types").map(function(e) {
                    var t = e.toJSON();
                    return t.lowerKey = (t.key || "").toLowerCase(),
                    t
                }),
                t
            }
        }, {
            key: "onChildViewGoTo",
            value: function(e, t) {
                var n = t.model
                  , i = n.parent ? "&system=" + n.parent.get("code") : "";
                if (p.history.navigate("/?selection=" + n.get("code") + i, {
                    trigger: !0
                }),
                n.get("parentCode")) {
                    var r = "JUMPPOINT" === n.get("subType");
                    this._starmapApi.goToLocation(new y["default"](r ? y["default"].Types.JUMP_POINT : y["default"].Types.CELESTIAL_OBJECT,n.get("parentCode"),n.get("code")))
                } else
                    this._starmapApi.goToLocation(new y["default"](y["default"].Types.STAR_SYSTEM,n.get("code")))
            }
        }, {
            key: "onCollectionUpdate",
            value: function() {
                var e = 1 === this.collection.length ? "item" : "items"
                  , t = this.collection.length > 0 ? this.collection.length + " " + e + " found" : "";
                this.ui.count.text(t)
            }
        }, {
            key: "template",
            get: function() {
                return b
            }
        }, {
            key: "childView",
            get: function() {
                return h["default"]
            }
        }, {
            key: "emptyView",
            get: function() {
                return f["default"]
            }
        }, {
            key: "emptyViewOptions",
            get: function() {
                return {
                    model: this.model.get("bookmarkFilters")
                }
            }
        }, {
            key: "childViewContainer",
            get: function() {
                return "tbody"
            }
        }, {
            key: "className",
            get: function() {
                return "sm-bookmarks-tab"
            }
        }, {
            key: "ui",
            get: function() {
                return this[x] = this[x] || {
                    typeItems: 'input[name="types"]',
                    query: 'input[name="query"]',
                    count: ".sm-count-label"
                }
            },
            set: function(e) {
                this[x] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[w] = this[w] || {
                    "click @ui.typeItems": "onTypeClick",
                    "keyup @ui.query": "onQueryKeyup"
                }
            },
            set: function(e) {
                this[w] = e
            }
        }]),
        t
    }(c.CompositeView);
    t["default"] = _,
    _.prototype.onQueryKeyup = v["default"].debounce(_.prototype.onQueryKeyup, 300),
    e.exports = t["default"]
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"]
      , s = n(97)["default"]
      , l = n(74)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = n(78)
      , u = n(142)
      , h = l(u)
      , d = n(427)
      , f = s("ui")
      , p = s("events")
      , m = s("triggers")
      , v = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                for (var e = arguments.length, n = Array(e), r = 0; e > r; r++)
                    n[r] = arguments[r];
                var o = i(Object.getPrototypeOf(t.prototype), "serializeData", this).apply(this, n)
                  , a = o.celestialObject;
                a && (o.system = a.system || a,
                o.object = a.system ? a : null,
                o.object && (o.object.type = a.subType)),
                o.type = {
                    key: o.type.bodyType.toLowerCase(),
                    name: h["default"].TYPE_INFO[o.type.bodyType].name
                };
                var s = o.object && o.object.type
                  , l = h["default"].SUB_TYPE_INFO[s];
                return l && (o.subType = {
                    key: s.toLowerCase(),
                    name: l.name
                }),
                o
            }
        }, {
            key: "onRemoveClick",
            value: function(e) {
                e.stopPropagation(),
                this.model.destroy({
                    wait: !0
                })
            }
        }, {
            key: "template",
            get: function() {
                return d
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }, {
            key: "ui",
            get: function() {
                return this[f] = this[f] || {
                    remove: ".sm-remove",
                    go: ".sm-go"
                }
            },
            set: function(e) {
                this[f] = e
            }
        }, {
            key: "events",
            get: function() {
                return this[p] = this[p] || {
                    "click @ui.remove": "onRemoveClick"
                }
            },
            set: function(e) {
                this[p] = e
            }
        }, {
            key: "triggers",
            get: function() {
                return this[m] = this[m] || {
                    "click @ui.go": "goto",
                    click: "goto"
                }
            }
        }]),
        t
    }(c.ItemView);
    t["default"] = v,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td class="sm-name">\n  <strong>',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "object"), "name", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "object"), "designation", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "system"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</strong>\n  ",
                i.contextOrFrameLookup(t, n, "object") && (s += "\n    <em>in ",
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "system"), "name", e.opts.autoescape), e.opts.autoescape),
                s += "</em>\n  "),
                s += '\n</td>\n<td class="sm-type sm-type-',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subType"), "key", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "type"), "key", e.opts.autoescape), e.opts.autoescape),
                s += '">',
                s += i.suppressValue(i.memberLookup(i.contextOrFrameLookup(t, n, "subType"), "name", e.opts.autoescape) || i.memberLookup(i.contextOrFrameLookup(t, n, "type"), "name", e.opts.autoescape), e.opts.autoescape),
                s += '</td>\n<td class="sm-bookmark-container"><button class="sm-remove"><span>Remove</span></button></td>\n<td class="sm-go-container"><button class="sm-go"><span>Go</span></button></td>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = n(82)["default"]
      , r = n(87)["default"]
      , o = n(93)["default"]
      , a = n(96)["default"];
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = n(78)
      , l = n(429)
      , c = function(e) {
        function t() {
            a(this, t),
            i(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
        }
        return r(t, e),
        o(t, [{
            key: "serializeData",
            value: function() {
                return {
                    filtered: this.model.isFilled
                }
            }
        }, {
            key: "template",
            get: function() {
                return l
            }
        }, {
            key: "tagName",
            get: function() {
                return "tr"
            }
        }]),
        t
    }(s.ItemView);
    t["default"] = c,
    e.exports = t["default"]
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<td colspan="4">\n  ',
                s += i.contextOrFrameLookup(t, n, "filtered") ? "\n    No bookmarks found with filters.\n  " : "\n    You have no bookmarks yet.\n  ",
                s += "\n</td>\n",
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<section class="sm-list sm-active">\n  <div class="sm-table-container">\n    <table>\n      <thead>\n        <tr>\n          <th class="sm-name">Name</th>\n          <th class="sm-type">Type</th>\n          <th class="sm-bookmark-container"><span class="sm-count-label"></span></th>\n          <th class="sm-go-container"></th>\n        </tr>\n      </thead>\n      <tbody>\n      </tbody>\n    </table>\n  </div>\n</section>\n\n<div class="sm-types">\n  <label>Filters</label>\n  <ul>\n    ',
                n = n.push();
                var l = i.contextOrFrameLookup(t, n, "types");
                if (l)
                    for (var c = l.length, u = 0; u < l.length; u++) {
                        var h = l[u];
                        n.set("item", h),
                        n.set("loop.index", u + 1),
                        n.set("loop.index0", u),
                        n.set("loop.revindex", c - u),
                        n.set("loop.revindex0", c - u - 1),
                        n.set("loop.first", 0 === u),
                        n.set("loop.last", u === c - 1),
                        n.set("loop.length", c),
                        s += '<li>\n        <input\n          id="type-',
                        s += i.suppressValue(i.memberLookup(h, "lowerKey", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          name="types"\n          type="checkbox"\n          value="',
                        s += i.suppressValue(i.memberLookup(h, "key", e.opts.autoescape), e.opts.autoescape),
                        s += '"\n          ',
                        i.memberLookup(h, "selected", e.opts.autoescape) && (s += "checked"),
                        s += '\n          >\n        <label for="type-',
                        s += i.suppressValue(i.memberLookup(h, "lowerKey", e.opts.autoescape), e.opts.autoescape),
                        s += '" title="',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += '"><span>',
                        s += i.suppressValue(i.memberLookup(h, "name", e.opts.autoescape), e.opts.autoescape),
                        s += "</span></label>\n      </li>"
                    }
                n = n.pop(),
                s += '\n  </ul>\n</div>\n\n<div class="sm-search">\n  <label for="bookmark-query">Search</label>\n\n  <div class="sm-input-container">\n    <input type="search" id="bookmark-query" name="query" placeholder="" value="',
                s += i.suppressValue(i.contextOrFrameLookup(t, n, "query"), e.opts.autoescape),
                s += '">\n  </div>\n\n  <button><span>Search</span></button>\n</div>\n',
                r(null, s)
            } catch (d) {
                r(i.handleError(d, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    var i = n(108)
      , r = i.webpackDependencies || (i.webpackDependencies = {})
      , o = new i.Environment([],{
        autoescape: !0
    })
      , a = (n(109)(o),
    n(110))
      , s = function() {
        function e(e, t, n, i, r) {
            var o = null
              , a = null
              , s = "";
            try {
                s += '<div id="sm-controls-tabs-region"></div>\n\n<div id="sm-controls-tab-content-region"></div>\n\n<a class="sm-website" href="/">Back to RSI website</a>\n',
                r(null, s)
            } catch (l) {
                r(i.handleError(l, o, a))
            }
        }
        return {
            root: e
        }
    }();
    e.exports = a(i, o, s, r)
}
, function(e, t, n) {
    "use strict";
    var i = {
        canvas: !!window.CanvasRenderingContext2D,
        webgl: function() {
            try {
                var e = document.createElement("canvas");
                return !(!window.WebGLRenderingContext || !e.getContext("webgl") && !e.getContext("experimental-webgl"))
            } catch (t) {
                return !1
            }
        }(),
        workers: !!window.Worker,
        fileapi: window.File && window.FileReader && window.FileList && window.Blob,
        getWebGLErrorMessage: function() {
            var e = document.createElement("div");
            return e.id = "webgl-error-message",
            e.style.fontFamily = "monospace",
            e.style.fontSize = "13px",
            e.style.fontWeight = "normal",
            e.style.textAlign = "center",
            e.style.background = "#fff",
            e.style.color = "#000",
            e.style.padding = "1.5em",
            e.style.width = "400px",
            e.style.margin = "5em auto 0",
            this.webgl || (e.innerHTML = window.WebGLRenderingContext ? ['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n") : ['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>', 'Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),
            e
        },
        addGetWebGLMessage: function(e) {
            var t, n, r;
            e = e || {},
            t = void 0 !== e.parent ? e.parent : document.body,
            n = void 0 !== e.id ? e.id : "oldie",
            r = i.getWebGLErrorMessage(),
            r.id = n,
            t.appendChild(r)
        }
    };
    e.exports = i
}
, 390, , function(e, t) {
    try {
        new window.CustomEvent("test")
    } catch (n) {
        var i = function(e, t) {
            var n;
            return t = t || {
                bubbles: !1,
                cancelable: !1,
                detail: void 0
            },
            n = document.createEvent("CustomEvent"),
            n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail),
            n
        };
        i.prototype = window.Event.prototype,
        window.CustomEvent = i
    }
}
, function(e, t, n, i, r) {
    "use strict";
    var o = n(i)(!0);
    n(r)(String, "String", function(e) {
        this._t = String(e),
        this._i = 0
    }, function() {
        var e, t = this._t, n = this._i;
        return n >= t.length ? {
            value: void 0,
            done: !0
        } : (e = o(t, n),
        this._i += e.length,
        {
            value: e,
            done: !1
        })
    })
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r);
    e.exports = function(e) {
        return function(t, n) {
            var i, r, s = String(a(t)), l = o(n), c = s.length;
            return 0 > l || l >= c ? e ? "" : void 0 : (i = s.charCodeAt(l),
            55296 > i || i > 56319 || l + 1 === c || (r = s.charCodeAt(l + 1)) < 56320 || r > 57343 ? e ? s.charAt(l) : i : e ? s.slice(l, l + 2) : (i - 55296 << 10) + (r - 56320) + 65536)
        }
    }
}
, function(e, t, n, i, r, o, a, s, l, c, u, h, d) {
    "use strict";
    var f = n(i)
      , p = n(r)
      , m = n(o)
      , v = n(a)
      , g = n(s)
      , y = n(l)
      , b = n(c)
      , x = n(u)
      , w = n(h).getProto
      , _ = n(d)("iterator")
      , S = !([].keys && "next"in [].keys())
      , M = "@@iterator"
      , C = "keys"
      , T = "values"
      , E = function() {
        return this
    };
    e.exports = function(e, t, n, i, r, o, a) {
        b(n, t, i);
        var s, l, c = function(e) {
            if (!S && e in k)
                return k[e];
            switch (e) {
            case C:
                return function() {
                    return new n(this,e)
                }
                ;
            case T:
                return function() {
                    return new n(this,e)
                }
            }
            return function() {
                return new n(this,e)
            }
        }, u = t + " Iterator", h = r == T, d = !1, k = e.prototype, A = k[_] || k[M] || r && k[r], P = A || c(r);
        if (A) {
            var L = w(P.call(new e));
            x(L, u, !0),
            !f && g(k, M) && v(L, _, E),
            h && A.name !== T && (d = !0,
            P = function() {
                return A.call(this)
            }
            )
        }
        if (f && !a || !S && !d && k[_] || v(k, _, P),
        y[t] = P,
        y[u] = E,
        r)
            if (s = {
                values: h ? P : c(T),
                keys: o ? P : c(C),
                entries: h ? c("entries") : P
            },
            a)
                for (l in s)
                    l in k || m(k, l, s[l]);
            else
                p(p.P + p.F * (S || d), t, s);
        return s
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e, t, n) {
        if (r(e),
        void 0 === t)
            return e;
        switch (n) {
        case 1:
            return function(n) {
                return e.call(t, n)
            }
            ;
        case 2:
            return function(n, i) {
                return e.call(t, n, i)
            }
            ;
        case 3:
            return function(n, i, r) {
                return e.call(t, n, i, r)
            }
        }
        return function() {
            return e.apply(t, arguments)
        }
    }
}
, function(e, t, n, i, r, o) {
    var a = n(i)
      , s = n(r);
    e.exports = n(o) ? function(e, t, n) {
        return a.setDesc(e, t, s(1, n))
    }
    : function(e, t, n) {
        return e[t] = n,
        e
    }
}
, function(e, t, n, i) {
    e.exports = !n(i)(function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    })
}
, function(e, t, n, i, r, o, a, s) {
    "use strict";
    var l = n(i)
      , c = n(r)
      , u = n(o)
      , h = {};
    n(a)(h, n(s)("iterator"), function() {
        return this
    }),
    e.exports = function(e, t, n) {
        e.prototype = l.create(h, {
            next: c(1, n)
        }),
        u(e, t + " Iterator")
    }
}
, function(e, t, n, i, r, o) {
    var a = n(i).setDesc
      , s = n(r)
      , l = n(o)("toStringTag");
    e.exports = function(e, t, n) {
        e && !s(e = n ? e : e.prototype, l) && a(e, l, {
            configurable: !0,
            value: t
        })
    }
}
, function(e, t, n, i, r, o) {
    var a = n(i)("wks")
      , s = n(r)
      , l = n(o).Symbol;
    e.exports = function(e) {
        return a[e] || (a[e] = l && l[e] || (l || s)("Symbol." + e))
    }
}
, function(e, t, n, i) {
    var r = n(i)
      , o = "__core-js_shared__"
      , a = r[o] || (r[o] = {});
    e.exports = function(e) {
        return a[e] || (a[e] = {})
    }
}
, function(e, t, n, i, r, o, a, s) {
    "use strict";
    var l = n(i)
      , c = n(r)
      , u = n(o)
      , h = n(a);
    e.exports = n(s)(Array, "Array", function(e, t) {
        this._t = h(e),
        this._i = 0,
        this._k = t
    }, function() {
        var e = this._t
          , t = this._k
          , n = this._i++;
        return !e || n >= e.length ? (this._t = void 0,
        c(1)) : "keys" == t ? c(0, n) : "values" == t ? c(0, e[n]) : c(0, [n, e[n]])
    }, "values"),
    u.Arguments = u.Array,
    l("keys"),
    l("values"),
    l("entries")
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r);
    e.exports = function(e) {
        return o(a(e))
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
        return "String" == r(e) ? e.split("") : Object(e)
    }
}
, function(e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w, _, S, M) {
    "use strict";
    var C, T = n(i), E = n(r), k = n(o), A = n(a), P = n(s), L = n(l), O = n(c), R = n(u), F = n(h), B = n(d), D = n(f), I = n(p).set, N = n(m), j = n(v)("species"), V = n(g), z = n(y), U = "Promise", H = k.process, G = "process" == P(H), W = k[U], q = function(e) {
        var t = new W(function() {}
        );
        return e && (t.constructor = Object),
        W.resolve(t) === t
    }, X = function() {
        function e(t) {
            var n = new W(t);
            return I(n, e.prototype),
            n
        }
        var t = !1;
        try {
            if (t = W && W.resolve && q(),
            I(e, W),
            e.prototype = T.create(W.prototype, {
                constructor: {
                    value: e
                }
            }),
            e.resolve(5).then(function() {})instanceof e || (t = !1),
            t && n(b)) {
                var i = !1;
                W.resolve(T.setDesc({}, "then", {
                    get: function() {
                        i = !0
                    }
                })),
                t = i
            }
        } catch (r) {
            t = !1
        }
        return t
    }(), Y = function(e, t) {
        return E && e === W && t === C ? !0 : N(e, t)
    }, J = function(e) {
        var t = R(e)[j];
        return void 0 != t ? t : e
    }, Z = function(e) {
        var t;
        return O(e) && "function" == typeof (t = e.then) ? t : !1
    }, Q = function(e) {
        var t, n;
        this.promise = new e(function(e, i) {
            if (void 0 !== t || void 0 !== n)
                throw TypeError("Bad Promise constructor");
            t = e,
            n = i
        }
        ),
        this.resolve = F(t),
        this.reject = F(n)
    }, K = function(e) {
        try {
            e()
        } catch (t) {
            return {
                error: t
            }
        }
    }, $ = function(e, t) {
        if (!e.n) {
            e.n = !0;
            var n = e.c;
            z(function() {
                for (var i = e.v, r = 1 == e.s, o = 0, a = function(t) {
                    var n, o, a = r ? t.ok : t.fail, s = t.resolve, l = t.reject;
                    try {
                        a ? (r || (e.h = !0),
                        n = a === !0 ? i : a(i),
                        n === t.promise ? l(TypeError("Promise-chain cycle")) : (o = Z(n)) ? o.call(n, s, l) : s(n)) : l(i)
                    } catch (c) {
                        l(c)
                    }
                }; n.length > o; )
                    a(n[o++]);
                n.length = 0,
                e.n = !1,
                t && setTimeout(function() {
                    var t, n, r = e.p;
                    ee(r) && (G ? H.emit("unhandledRejection", i, r) : (t = k.onunhandledrejection) ? t({
                        promise: r,
                        reason: i
                    }) : (n = k.console) && n.error && n.error("Unhandled promise rejection", i)),
                    e.a = void 0
                }, 1)
            })
        }
    }, ee = function(e) {
        var t, n = e._d, i = n.a || n.c, r = 0;
        if (n.h)
            return !1;
        for (; i.length > r; )
            if (t = i[r++],
            t.fail || !ee(t.promise))
                return !1;
        return !0
    }, te = function(e) {
        var t = this;
        t.d || (t.d = !0,
        t = t.r || t,
        t.v = e,
        t.s = 2,
        t.a = t.c.slice(),
        $(t, !0))
    }, ne = function(e) {
        var t, n = this;
        if (!n.d) {
            n.d = !0,
            n = n.r || n;
            try {
                if (n.p === e)
                    throw TypeError("Promise can't be resolved itself");
                (t = Z(e)) ? z(function() {
                    var i = {
                        r: n,
                        d: !1
                    };
                    try {
                        t.call(e, A(ne, i, 1), A(te, i, 1))
                    } catch (r) {
                        te.call(i, r)
                    }
                }) : (n.v = e,
                n.s = 1,
                $(n, !1))
            } catch (i) {
                te.call({
                    r: n,
                    d: !1
                }, i)
            }
        }
    };
    X || (W = function(e) {
        F(e);
        var t = this._d = {
            p: B(this, W, U),
            c: [],
            a: void 0,
            s: 0,
            d: !1,
            v: void 0,
            h: !1,
            n: !1
        };
        try {
            e(A(ne, t, 1), A(te, t, 1))
        } catch (n) {
            te.call(t, n)
        }
    }
    ,
    n(x)(W.prototype, {
        then: function(e, t) {
            var n = new Q(V(this, W))
              , i = n.promise
              , r = this._d;
            return n.ok = "function" == typeof e ? e : !0,
            n.fail = "function" == typeof t && t,
            r.c.push(n),
            r.a && r.a.push(n),
            r.s && $(r, !1),
            i
        },
        "catch": function(e) {
            return this.then(void 0, e)
        }
    })),
    L(L.G + L.W + L.F * !X, {
        Promise: W
    }),
    n(w)(W, U),
    n(_)(U),
    C = n(S)[U],
    L(L.S + L.F * !X, U, {
        reject: function(e) {
            var t = new Q(this)
              , n = t.reject;
            return n(e),
            t.promise
        }
    }),
    L(L.S + L.F * (!X || q(!0)), U, {
        resolve: function(e) {
            if (e instanceof W && Y(e.constructor, this))
                return e;
            var t = new Q(this)
              , n = t.resolve;
            return n(e),
            t.promise
        }
    }),
    L(L.S + L.F * !(X && n(M)(function(e) {
        W.all(e)["catch"](function() {})
    })), U, {
        all: function(e) {
            var t = J(this)
              , n = new Q(t)
              , i = n.resolve
              , r = n.reject
              , o = []
              , a = K(function() {
                D(e, !1, o.push, o);
                var n = o.length
                  , a = Array(n);
                n ? T.each.call(o, function(e, o) {
                    var s = !1;
                    t.resolve(e).then(function(e) {
                        s || (s = !0,
                        a[o] = e,
                        --n || i(a))
                    }, r)
                }) : i(a)
            });
            return a && r(a.error),
            n.promise
        },
        race: function(e) {
            var t = J(this)
              , n = new Q(t)
              , i = n.reject
              , r = K(function() {
                D(e, !1, function(e) {
                    t.resolve(e).then(n.resolve, i)
                })
            });
            return r && i(r.error),
            n.promise
        }
    })
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r)("toStringTag")
      , s = "Arguments" == o(function() {
        return arguments
    }());
    e.exports = function(e) {
        var t, n, i;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = (t = Object(e))[a]) ? n : s ? o(t) : "Object" == (i = o(t)) && "function" == typeof t.callee ? "Arguments" : i
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e) {
        if (!r(e))
            throw TypeError(e + " is not an object!");
        return e
    }
}
, function(e, t, n, i, r, o, a, s, l) {
    var c = n(i)
      , u = n(r)
      , h = n(o)
      , d = n(a)
      , f = n(s)
      , p = n(l);
    e.exports = function(e, t, n, i) {
        var r, o, a, s = p(e), l = c(n, i, t ? 2 : 1), m = 0;
        if ("function" != typeof s)
            throw TypeError(e + " is not iterable!");
        if (h(s))
            for (r = f(e.length); r > m; m++)
                t ? l(d(o = e[m])[0], o[1]) : l(e[m]);
        else
            for (a = s.call(e); !(o = a.next()).done; )
                u(a, l, o.value, t)
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e, t, n, i) {
        try {
            return i ? t(r(n)[0], n[1]) : t(n)
        } catch (o) {
            var a = e["return"];
            throw void 0 !== a && r(a.call(e)),
            o
        }
    }
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r)("iterator")
      , s = Array.prototype;
    e.exports = function(e) {
        return void 0 !== e && (o.Array === e || s[a] === e)
    }
}
, function(e, t, n, i) {
    var r = n(i)
      , o = Math.min;
    e.exports = function(e) {
        return e > 0 ? o(r(e), 9007199254740991) : 0
    }
}
, function(e, t, n, i, r, o, a) {
    var s = n(i)
      , l = n(r)("iterator")
      , c = n(o);
    e.exports = n(a).getIteratorMethod = function(e) {
        return void 0 != e ? e[l] || e["@@iterator"] || c[s(e)] : void 0
    }
}
, function(e, t, n, i, r, o, a) {
    var s = n(i).getDesc
      , l = n(r)
      , c = n(o)
      , u = function(e, t) {
        if (c(e),
        !l(t) && null !== t)
            throw TypeError(t + ": can't set as prototype!")
    };
    e.exports = {
        set: Object.setPrototypeOf || ("__proto__"in {} ? function(e, t, i) {
            try {
                i = n(a)(Function.call, s(Object.prototype, "__proto__").set, 2),
                i(e, []),
                t = !(e instanceof Array)
            } catch (r) {
                t = !0
            }
            return function(e, n) {
                return u(e, n),
                t ? e.__proto__ = n : i(e, n),
                e
            }
        }({}, !1) : void 0),
        check: u
    }
}
, function(e, t, n, i, r, o) {
    var a = n(i)
      , s = n(r)
      , l = n(o)("species");
    e.exports = function(e, t) {
        var n, i = a(e).constructor;
        return void 0 === i || void 0 == (n = a(i)[l]) ? t : s(n)
    }
}
, function(e, t, n, i, r, o) {
    var a, s, l, c = n(i), u = n(r).set, h = c.MutationObserver || c.WebKitMutationObserver, d = c.process, f = c.Promise, p = "process" == n(o)(d), m = function() {
        var e, t, n;
        for (p && (e = d.domain) && (d.domain = null,
        e.exit()); a; )
            t = a.domain,
            n = a.fn,
            t && t.enter(),
            n(),
            t && t.exit(),
            a = a.next;
        s = void 0,
        e && e.enter()
    };
    if (p)
        l = function() {
            d.nextTick(m)
        }
        ;
    else if (h) {
        var v = 1
          , g = document.createTextNode("");
        new h(m).observe(g, {
            characterData: !0
        }),
        l = function() {
            g.data = v = -v
        }
    } else
        l = f && f.resolve ? function() {
            f.resolve().then(m)
        }
        : function() {
            u.call(c, m)
        }
        ;
    e.exports = function(e) {
        var t = {
            fn: e,
            next: void 0,
            domain: p && d.domain
        };
        s && (s.next = t),
        a || (a = t,
        l()),
        s = t
    }
}
, function(e, t, n, i, r, o, a, s, l) {
    var c, u, h, d = n(i), f = n(r), p = n(o), m = n(a), v = n(s), g = v.process, y = v.setImmediate, b = v.clearImmediate, x = v.MessageChannel, w = 0, _ = {}, S = "onreadystatechange", M = function() {
        var e = +this;
        if (_.hasOwnProperty(e)) {
            var t = _[e];
            delete _[e],
            t()
        }
    }, C = function(e) {
        M.call(e.data)
    };
    y && b || (y = function(e) {
        for (var t = [], n = 1; arguments.length > n; )
            t.push(arguments[n++]);
        return _[++w] = function() {
            f("function" == typeof e ? e : Function(e), t)
        }
        ,
        c(w),
        w
    }
    ,
    b = function(e) {
        delete _[e]
    }
    ,
    "process" == n(l)(g) ? c = function(e) {
        g.nextTick(d(M, e, 1))
    }
    : x ? (u = new x,
    h = u.port2,
    u.port1.onmessage = C,
    c = d(h.postMessage, h, 1)) : v.addEventListener && "function" == typeof postMessage && !v.importScripts ? (c = function(e) {
        v.postMessage(e + "", "*")
    }
    ,
    v.addEventListener("message", C, !1)) : c = S in m("script") ? function(e) {
        p.appendChild(m("script"))[S] = function() {
            p.removeChild(this),
            M.call(e)
        }
    }
    : function(e) {
        setTimeout(d(M, e, 1), 0)
    }
    ),
    e.exports = {
        set: y,
        clear: b
    }
}
, function(e, t, n, i) {
    e.exports = n(i).document && document.documentElement
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r).document
      , s = o(a) && o(a.createElement);
    e.exports = function(e) {
        return s ? a.createElement(e) : {}
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e, t) {
        for (var n in t)
            r(e, n, t[n]);
        return e
    }
}
, function(e, t, n, i) {
    var r = n(i)("iterator")
      , o = !1;
    try {
        var a = [7][r]();
        a["return"] = function() {
            o = !0
        }
        ,
        Array.from(a, function() {
            throw 2
        })
    } catch (s) {}
    e.exports = function(e, t) {
        if (!t && !o)
            return !1;
        var n = !1;
        try {
            var i = [7]
              , a = i[r]();
            a.next = function() {
                n = !0
            }
            ,
            i[r] = function() {
                return a
            }
            ,
            e(i)
        } catch (s) {}
        return n
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    n(r)("getOwnPropertyDescriptor", function(e) {
        return function(t, n) {
            return e(o(t), n)
        }
    })
}
, function(e, t, n, i, r, o) {
    var a = n(i)
      , s = n(r)
      , l = n(o);
    e.exports = function(e, t) {
        var n = (s.Object || {})[e] || Object[e]
          , i = {};
        i[e] = t(n),
        a(a.S + a.F * l(function() {
            n(1)
        }), "Object", i)
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    o(o.S, "Object", {
        setPrototypeOf: n(r).set
    })
}
, function(e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m, v, g, y, b, x, w) {
    "use strict";
    var _ = n(i)
      , S = n(r)
      , M = n(o)
      , C = n(a)
      , T = n(s)
      , E = n(l)
      , k = n(c)
      , A = n(u)
      , P = n(h)
      , L = n(d)
      , O = n(f)
      , R = n(p)
      , F = n(m)
      , B = n(v)
      , D = n(g)
      , I = n(y)
      , N = n(b)
      , j = n(x)
      , V = _.getDesc
      , z = _.setDesc
      , U = _.create
      , H = F.get
      , G = S.Symbol
      , W = S.JSON
      , q = W && W.stringify
      , X = !1
      , Y = O("_hidden")
      , J = _.isEnum
      , Z = A("symbol-registry")
      , Q = A("symbols")
      , K = "function" == typeof G
      , $ = Object.prototype
      , ee = C && k(function() {
        return 7 != U(z({}, "a", {
            get: function() {
                return z(this, "a", {
                    value: 7
                }).a
            }
        })).a
    }) ? function(e, t, n) {
        var i = V($, t);
        i && delete $[t],
        z(e, t, n),
        i && e !== $ && z($, t, i)
    }
    : z
      , te = function(e) {
        var t = Q[e] = U(G.prototype);
        return t._k = e,
        C && X && ee($, e, {
            configurable: !0,
            set: function(t) {
                M(this, Y) && M(this[Y], e) && (this[Y][e] = !1),
                ee(this, e, j(1, t))
            }
        }),
        t
    }
      , ne = function(e) {
        return "symbol" == typeof e
    }
      , ie = function(e, t, n) {
        return n && M(Q, t) ? (n.enumerable ? (M(e, Y) && e[Y][t] && (e[Y][t] = !1),
        n = U(n, {
            enumerable: j(0, !1)
        })) : (M(e, Y) || z(e, Y, j(1, {})),
        e[Y][t] = !0),
        ee(e, t, n)) : z(e, t, n)
    }
      , re = function(e, t) {
        I(e);
        for (var n, i = B(t = N(t)), r = 0, o = i.length; o > r; )
            ie(e, n = i[r++], t[n]);
        return e
    }
      , oe = function(e, t) {
        return void 0 === t ? U(e) : re(U(e), t)
    }
      , ae = function(e) {
        var t = J.call(this, e);
        return t || !M(this, e) || !M(Q, e) || M(this, Y) && this[Y][e] ? t : !0
    }
      , se = function(e, t) {
        var n = V(e = N(e), t);
        return !n || !M(Q, t) || M(e, Y) && e[Y][t] || (n.enumerable = !0),
        n
    }
      , le = function(e) {
        for (var t, n = H(N(e)), i = [], r = 0; n.length > r; )
            M(Q, t = n[r++]) || t == Y || i.push(t);
        return i
    }
      , ce = function(e) {
        for (var t, n = H(N(e)), i = [], r = 0; n.length > r; )
            M(Q, t = n[r++]) && i.push(Q[t]);
        return i
    }
      , ue = function(e) {
        if (void 0 !== e && !ne(e)) {
            for (var t, n, i = [e], r = 1, o = arguments; o.length > r; )
                i.push(o[r++]);
            return t = i[1],
            "function" == typeof t && (n = t),
            (n || !D(t)) && (t = function(e, t) {
                return n && (t = n.call(this, e, t)),
                ne(t) ? void 0 : t
            }
            ),
            i[1] = t,
            q.apply(W, i)
        }
    }
      , he = k(function() {
        var e = G();
        return "[null]" != q([e]) || "{}" != q({
            a: e
        }) || "{}" != q(Object(e))
    });
    K || (G = function() {
        if (ne(this))
            throw TypeError("Symbol is not a constructor");
        return te(L(arguments.length > 0 ? arguments[0] : void 0))
    }
    ,
    E(G.prototype, "toString", function() {
        return this._k
    }),
    ne = function(e) {
        return e instanceof G
    }
    ,
    _.create = oe,
    _.isEnum = ae,
    _.getDesc = se,
    _.setDesc = ie,
    _.setDescs = re,
    _.getNames = F.get = le,
    _.getSymbols = ce,
    C && !n(w) && E($, "propertyIsEnumerable", ae, !0));
    var de = {
        "for": function(e) {
            return M(Z, e += "") ? Z[e] : Z[e] = G(e)
        },
        keyFor: function(e) {
            return R(Z, e)
        },
        useSetter: function() {
            X = !0
        },
        useSimple: function() {
            X = !1
        }
    };
    _.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), function(e) {
        var t = O(e);
        de[e] = K ? t : te(t)
    }),
    X = !0,
    T(T.G + T.W, {
        Symbol: G
    }),
    T(T.S, "Symbol", de),
    T(T.S + T.F * !K, "Object", {
        create: oe,
        defineProperty: ie,
        defineProperties: re,
        getOwnPropertyDescriptor: se,
        getOwnPropertyNames: le,
        getOwnPropertySymbols: ce
    }),
    W && T(T.S + T.F * (!K || he), "JSON", {
        stringify: ue
    }),
    P(G, "Symbol"),
    P(Math, "Math", !0),
    P(S.JSON, "JSON", !0)
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r);
    e.exports = function(e, t) {
        for (var n, i = a(e), r = o.getKeys(i), s = r.length, l = 0; s > l; )
            if (i[n = r[l++]] === t)
                return n
    }
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r).getNames
      , s = {}.toString
      , l = "object" == typeof window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : []
      , c = function(e) {
        try {
            return a(e)
        } catch (t) {
            return l.slice()
        }
    };
    e.exports.get = function(e) {
        return l && "[object Window]" == s.call(e) ? c(e) : a(o(e))
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e) {
        var t = r.getKeys(e)
          , n = r.getSymbols;
        if (n)
            for (var i, o = n(e), a = r.isEnum, s = 0; o.length > s; )
                a.call(e, i = o[s++]) && t.push(i);
        return t
    }
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = Array.isArray || function(e) {
        return "Array" == r(e)
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    n(r)("freeze", function(e) {
        return function(t) {
            return e && o(t) ? e(t) : t
        }
    })
}
, function(e, t, n, i, r, o, a, s, l, c, u) {
    "use strict";
    var h = n(i)
      , d = n(r)
      , f = n(o)
      , p = n(a)
      , m = n(s)
      , v = n(l)
      , g = n(c);
    d(d.S + d.F * !n(u)(function(e) {
        Array.from(e)
    }), "Array", {
        from: function(e) {
            var t, n, i, r, o = f(e), a = "function" == typeof this ? this : Array, s = arguments, l = s.length, c = l > 1 ? s[1] : void 0, u = void 0 !== c, d = 0, y = g(o);
            if (u && (c = h(c, l > 2 ? s[2] : void 0, 2)),
            void 0 == y || a == Array && m(y))
                for (t = v(o.length),
                n = new a(t); t > d; d++)
                    n[d] = u ? c(o[d], d) : o[d];
            else
                for (r = y.call(o),
                n = new a; !(i = r.next()).done; d++)
                    n[d] = u ? p(r, c, [i.value, d], !0) : i.value;
            return n.length = d,
            n
        }
    })
}
, function(e, t, n, i) {
    var r = n(i);
    e.exports = function(e) {
        return Object(r(e))
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    n(r)("keys", function(e) {
        return function(t) {
            return e(o(t))
        }
    })
}
, function(e, t, n, i, r) {
    "use strict";
    var o = n(i);
    n(r)("Map", function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }, {
        get: function(e) {
            var t = o.getEntry(this, e);
            return t && t.v
        },
        set: function(e, t) {
            return o.def(this, 0 === e ? 0 : e, t)
        }
    }, o, !0)
}
, function(e, t, n, i, r, o, a, s, l, c, u, h, d, f, p, m, v) {
    "use strict";
    var g = n(i)
      , y = n(r)
      , b = n(o)
      , x = n(a)
      , w = n(s)
      , _ = n(l)
      , S = n(c)
      , M = n(u)
      , C = n(h)
      , T = n(d)("id")
      , E = n(f)
      , k = n(p)
      , A = n(m)
      , P = n(v)
      , L = Object.isExtensible || k
      , O = P ? "_s" : "size"
      , R = 0
      , F = function(e, t) {
        if (!k(e))
            return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
        if (!E(e, T)) {
            if (!L(e))
                return "F";
            if (!t)
                return "E";
            y(e, T, ++R)
        }
        return "O" + e[T]
    }
      , B = function(e, t) {
        var n, i = F(t);
        if ("F" !== i)
            return e._i[i];
        for (n = e._f; n; n = n.n)
            if (n.k == t)
                return n
    };
    e.exports = {
        getConstructor: function(e, t, n, i) {
            var r = e(function(e, o) {
                w(e, r, t),
                e._i = g.create(null),
                e._f = void 0,
                e._l = void 0,
                e[O] = 0,
                void 0 != o && S(o, n, e[i], e)
            });
            return b(r.prototype, {
                clear: function() {
                    for (var e = this, t = e._i, n = e._f; n; n = n.n)
                        n.r = !0,
                        n.p && (n.p = n.p.n = void 0),
                        delete t[n.i];
                    e._f = e._l = void 0,
                    e[O] = 0
                },
                "delete": function(e) {
                    var t = this
                      , n = B(t, e);
                    if (n) {
                        var i = n.n
                          , r = n.p;
                        delete t._i[n.i],
                        n.r = !0,
                        r && (r.n = i),
                        i && (i.p = r),
                        t._f == n && (t._f = i),
                        t._l == n && (t._l = r),
                        t[O]--
                    }
                    return !!n
                },
                forEach: function(e) {
                    for (var t, n = x(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.n : this._f; )
                        for (n(t.v, t.k, this); t && t.r; )
                            t = t.p
                },
                has: function(e) {
                    return !!B(this, e)
                }
            }),
            P && g.setDesc(r.prototype, "size", {
                get: function() {
                    return _(this[O])
                }
            }),
            r
        },
        def: function(e, t, n) {
            var i, r, o = B(e, t);
            return o ? o.v = n : (e._l = o = {
                i: r = F(t, !0),
                k: t,
                v: n,
                p: i = e._l,
                n: void 0,
                r: !1
            },
            e._f || (e._f = o),
            i && (i.n = o),
            e[O]++,
            "F" !== r && (e._i[r] = o)),
            e
        },
        getEntry: B,
        setStrong: function(e, t, n) {
            M(e, t, function(e, t) {
                this._t = e,
                this._k = t,
                this._l = void 0
            }, function() {
                for (var e = this, t = e._k, n = e._l; n && n.r; )
                    n = n.p;
                return e._t && (e._l = n = n ? n.n : e._t._f) ? "keys" == t ? C(0, n.k) : "values" == t ? C(0, n.v) : C(0, [n.k, n.v]) : (e._t = void 0,
                C(1))
            }, n ? "entries" : "values", !n, !0),
            A(t)
        }
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    o(o.P, "Map", {
        toJSON: n(r)("Map")
    })
}
, function(e, t, n, i, r) {
    var o = n(i)
      , a = n(r);
    e.exports = function(e) {
        return function() {
            if (a(this) != e)
                throw TypeError(e + "#toJSON isn't generic");
            var t = [];
            return o(this, !1, t.push, t),
            t
        }
    }
}
, function(e, t, n, i, r) {
    var o = n(i);
    o(o.S + o.F, "Object", {
        assign: n(r)
    })
}
, function(e, t, n, i, r, o, a) {
    var s = n(i)
      , l = n(r)
      , c = n(o);
    e.exports = n(a)(function() {
        var e = Object.assign
          , t = {}
          , n = {}
          , i = Symbol()
          , r = "abcdefghijklmnopqrst";
        return t[i] = 7,
        r.split("").forEach(function(e) {
            n[e] = e
        }),
        7 != e({}, t)[i] || Object.keys(e({}, n)).join("") != r
    }) ? function(e, t) {
        for (var n = l(e), i = arguments, r = i.length, o = 1, a = s.getKeys, u = s.getSymbols, h = s.isEnum; r > o; )
            for (var d, f = c(i[o++]), p = u ? a(f).concat(u(f)) : a(f), m = p.length, v = 0; m > v; )
                h.call(f, d = p[v++]) && (n[d] = f[d]);
        return n
    }
    : Object.assign
}
]));
